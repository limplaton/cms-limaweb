function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/FullCalendar-D8xHpkRH.js","assets/FullCalendar-Dolz0C-W.css","assets/CropsAndUploadsImage-By5Is3ag.js","assets/CropsAndUploadsImage-BmOS4t_i.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
const nC=Vue.BaseTransition,oC=Vue.BaseTransitionPropsValidators,q1=Vue.Comment,aC=Vue.DeprecationTypes,rC=Vue.EffectScope,lC=Vue.ErrorCodes,sC=Vue.ErrorTypeStrings,fe=Vue.Fragment,iC=Vue.KeepAlive,uC=Vue.ReactiveEffect,cC=Vue.Static,dC=Vue.Suspense,ta=Vue.Teleport,Gf=Vue.Text,mC=Vue.TrackOpTypes,lr=Vue.Transition,li=Vue.TransitionGroup,fC=Vue.TriggerOpTypes,pC=Vue.VueElement,vC=Vue.assertNumber,hC=Vue.callWithAsyncErrorHandling,gC=Vue.callWithErrorHandling,bC=Vue.camelize,yC=Vue.capitalize,si=Vue.cloneVNode,_C=Vue.compatUtils,IC=Vue.compile,O=Vue.computed,U1=Vue.createApp,A=Vue.createBlock,K=Vue.createCommentVNode,D=Vue.createElementBlock,_=Vue.createElementVNode,wC=Vue.createHydrationRenderer,xC=Vue.createPropsRestProxy,kC=Vue.createRenderer,$C=Vue.createSSRApp,bn=Vue.createSlots,CC=Vue.createStaticVNode,le=Vue.createTextVNode,l=Vue.createVNode,j1=Vue.customRef,Vl=Vue.defineAsyncComponent,Le=Vue.defineComponent,SC=Vue.defineCustomElement,TC=Vue.defineEmits,EC=Vue.defineExpose,FC=Vue.defineModel,AC=Vue.defineOptions,RC=Vue.defineProps,DC=Vue.defineSSRCustomElement,OC=Vue.defineSlots,BC=Vue.devtools,NC=Vue.effect,fc=Vue.effectScope,va=Vue.getCurrentInstance,Kf=Vue.getCurrentScope,PC=Vue.getTransitionRawChildren,un=Vue.guardReactiveProps,Ae=Vue.h,MC=Vue.handleError,VC=Vue.hasInjectionContext,LC=Vue.hydrate,qC=Vue.initCustomFormatter,UC=Vue.initDirectivesForSSR,Pe=Vue.inject,pc=Vue.isMemoSame,jC=Vue.isProxy,zC=Vue.isReactive,HC=Vue.isReadonly,$n=Vue.isRef,WC=Vue.isRuntimeOnly,GC=Vue.isShallow,z1=Vue.isVNode,KC=Vue.markRaw,ZC=Vue.mergeDefaults,yt=Vue.mergeModels,Ue=Vue.mergeProps,ze=Vue.nextTick,be=Vue.normalizeClass,en=Vue.normalizeProps,Nt=Vue.normalizeStyle,Zf=Vue.onActivated,Pa=Vue.onBeforeMount,En=Vue.onBeforeUnmount,YC=Vue.onBeforeUpdate,Yf=Vue.onDeactivated,XC=Vue.onErrorCaptured,Je=Vue.onMounted,QC=Vue.onRenderTracked,JC=Vue.onRenderTriggered,Xf=Vue.onScopeDispose,e8=Vue.onServerPrefetch,rn=Vue.onUnmounted,Ll=Vue.onUpdated,g=Vue.openBlock,t8=Vue.popScopeId,st=Vue.provide,n8=Vue.proxyRefs,o8=Vue.pushScopeId,a8=Vue.queuePostFlushCb,uo=Vue.reactive,ii=Vue.readonly,M=Vue.ref,r8=Vue.registerRuntimeCompiler,Um=Vue.render,Ie=Vue.renderList,Se=Vue.renderSlot,d=Vue.resolveComponent,Ve=Vue.resolveDirective,Rt=Vue.resolveDynamicComponent,l8=Vue.resolveFilter,s8=Vue.resolveTransitionHooks,je=Vue.setBlockTracking,i8=Vue.setDevtoolsHook,u8=Vue.setTransitionHooks,vc=Vue.shallowReactive,Tr=Vue.shallowReadonly,Pt=Vue.shallowRef,c8=Vue.ssrContextKey,d8=Vue.ssrUtils,m8=Vue.stop,Z=Vue.toDisplayString,f8=Vue.toHandlerKey,Ur=Vue.toHandlers,Vn=Vue.toRaw,gt=Vue.toRef,H1=Vue.toRefs,pt=Vue.toValue,p8=Vue.transformVNodeArgs,Rr=Vue.triggerRef,h=Vue.unref,v8=Vue.useAttrs,h8=Vue.useCssModule,g8=Vue.useCssVars,Zt=Vue.useModel,b8=Vue.useSSRContext,y8=Vue.useSlots,_8=Vue.useTransitionState,I8=Vue.vModelCheckbox,w8=Vue.vModelDynamic,x8=Vue.vModelRadio,W1=Vue.vModelSelect,ua=Vue.vModelText,pe=Vue.vShow,k8=Vue.version,$8=Vue.warn,$e=Vue.watch,on=Vue.watchEffect,G1=Vue.watchPostEffect,C8=Vue.watchSyncEffect,S8=Vue.withAsyncContext,p=Vue.withCtx,T8=Vue.withDefaults,ne=Vue.withDirectives,fo=Vue.withKeys,Un=Vue.withMemo,ot=Vue.withModifiers,E8=Vue.withScopeId,F8=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:nC,BaseTransitionPropsValidators:oC,Comment:q1,DeprecationTypes:aC,EffectScope:rC,ErrorCodes:lC,ErrorTypeStrings:sC,Fragment:fe,KeepAlive:iC,ReactiveEffect:uC,Static:cC,Suspense:dC,Teleport:ta,Text:Gf,TrackOpTypes:mC,Transition:lr,TransitionGroup:li,TriggerOpTypes:fC,VueElement:pC,assertNumber:vC,callWithAsyncErrorHandling:hC,callWithErrorHandling:gC,camelize:bC,capitalize:yC,cloneVNode:si,compatUtils:_C,compile:IC,computed:O,createApp:U1,createBlock:A,createCommentVNode:K,createElementBlock:D,createElementVNode:_,createHydrationRenderer:wC,createPropsRestProxy:xC,createRenderer:kC,createSSRApp:$C,createSlots:bn,createStaticVNode:CC,createTextVNode:le,createVNode:l,customRef:j1,defineAsyncComponent:Vl,defineComponent:Le,defineCustomElement:SC,defineEmits:TC,defineExpose:EC,defineModel:FC,defineOptions:AC,defineProps:RC,defineSSRCustomElement:DC,defineSlots:OC,devtools:BC,effect:NC,effectScope:fc,getCurrentInstance:va,getCurrentScope:Kf,getTransitionRawChildren:PC,guardReactiveProps:un,h:Ae,handleError:MC,hasInjectionContext:VC,hydrate:LC,initCustomFormatter:qC,initDirectivesForSSR:UC,inject:Pe,isMemoSame:pc,isProxy:jC,isReactive:zC,isReadonly:HC,isRef:$n,isRuntimeOnly:WC,isShallow:GC,isVNode:z1,markRaw:KC,mergeDefaults:ZC,mergeModels:yt,mergeProps:Ue,nextTick:ze,normalizeClass:be,normalizeProps:en,normalizeStyle:Nt,onActivated:Zf,onBeforeMount:Pa,onBeforeUnmount:En,onBeforeUpdate:YC,onDeactivated:Yf,onErrorCaptured:XC,onMounted:Je,onRenderTracked:QC,onRenderTriggered:JC,onScopeDispose:Xf,onServerPrefetch:e8,onUnmounted:rn,onUpdated:Ll,openBlock:g,popScopeId:t8,provide:st,proxyRefs:n8,pushScopeId:o8,queuePostFlushCb:a8,reactive:uo,readonly:ii,ref:M,registerRuntimeCompiler:r8,render:Um,renderList:Ie,renderSlot:Se,resolveComponent:d,resolveDirective:Ve,resolveDynamicComponent:Rt,resolveFilter:l8,resolveTransitionHooks:s8,setBlockTracking:je,setDevtoolsHook:i8,setTransitionHooks:u8,shallowReactive:vc,shallowReadonly:Tr,shallowRef:Pt,ssrContextKey:c8,ssrUtils:d8,stop:m8,toDisplayString:Z,toHandlerKey:f8,toHandlers:Ur,toRaw:Vn,toRef:gt,toRefs:H1,toValue:pt,transformVNodeArgs:p8,triggerRef:Rr,unref:h,useAttrs:v8,useCssModule:h8,useCssVars:g8,useModel:Zt,useSSRContext:b8,useSlots:y8,useTransitionState:_8,vModelCheckbox:I8,vModelDynamic:w8,vModelRadio:x8,vModelSelect:W1,vModelText:ua,vShow:pe,version:k8,warn:$8,watch:$e,watchEffect:on,watchPostEffect:G1,watchSyncEffect:C8,withAsyncContext:S8,withCtx:p,withDefaults:T8,withDirectives:ne,withKeys:fo,withMemo:Un,withModifiers:ot,withScopeId:E8},Symbol.toStringTag,{value:"Module"}));var Dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function K1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return e[o]}})}),n}var A8=Array.isArray,Fn=A8;const R8=Bt(Fn);var D8=typeof Dr=="object"&&Dr&&Dr.Object===Object&&Dr,Z1=D8,O8=Z1,B8=typeof self=="object"&&self&&self.Object===Object&&self,N8=O8||B8||Function("return this")(),na=N8,P8=na,M8=P8.Symbol,ql=M8,hh=ql,Y1=Object.prototype,V8=Y1.hasOwnProperty,L8=Y1.toString,Is=hh?hh.toStringTag:void 0;function q8(e){var t=V8.call(e,Is),n=e[Is];try{e[Is]=void 0;var o=!0}catch{}var a=L8.call(e);return o&&(t?e[Is]=n:delete e[Is]),a}var U8=q8,j8=Object.prototype,z8=j8.toString;function H8(e){return z8.call(e)}var W8=H8,gh=ql,G8=U8,K8=W8,Z8="[object Null]",Y8="[object Undefined]",bh=gh?gh.toStringTag:void 0;function X8(e){return e==null?e===void 0?Y8:Z8:bh&&bh in Object(e)?G8(e):K8(e)}var fr=X8;function Q8(e){return e!=null&&typeof e=="object"}var oa=Q8,J8=fr,eS=oa,tS="[object Symbol]";function nS(e){return typeof e=="symbol"||eS(e)&&J8(e)==tS}var ui=nS,oS=Fn,aS=ui,rS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lS=/^\w*$/;function sS(e,t){if(oS(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||aS(e)?!0:lS.test(e)||!rS.test(e)||t!=null&&e in Object(t)}var Qf=sS;function iS(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ho=iS;const $l=Bt(ho);var uS=fr,cS=ho,dS="[object AsyncFunction]",mS="[object Function]",fS="[object GeneratorFunction]",pS="[object Proxy]";function vS(e){if(!cS(e))return!1;var t=uS(e);return t==mS||t==fS||t==dS||t==pS}var hc=vS;const hS=Bt(hc);var gS=na,bS=gS["__core-js_shared__"],yS=bS,Ld=yS,yh=function(){var e=/[^.]+$/.exec(Ld&&Ld.keys&&Ld.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _S(e){return!!yh&&yh in e}var IS=_S,wS=Function.prototype,xS=wS.toString;function kS(e){if(e!=null){try{return xS.call(e)}catch{}try{return e+""}catch{}}return""}var X1=kS,$S=hc,CS=IS,SS=ho,TS=X1,ES=/[\\^$.*+?()[\]{}|]/g,FS=/^\[object .+?Constructor\]$/,AS=Function.prototype,RS=Object.prototype,DS=AS.toString,OS=RS.hasOwnProperty,BS=RegExp("^"+DS.call(OS).replace(ES,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function NS(e){if(!SS(e)||CS(e))return!1;var t=$S(e)?BS:FS;return t.test(TS(e))}var PS=NS;function MS(e,t){return e==null?void 0:e[t]}var VS=MS,LS=PS,qS=VS;function US(e,t){var n=qS(e,t);return LS(n)?n:void 0}var Wr=US,jS=Wr,zS=jS(Object,"create"),gc=zS,_h=gc;function HS(){this.__data__=_h?_h(null):{},this.size=0}var WS=HS;function GS(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var KS=GS,ZS=gc,YS="__lodash_hash_undefined__",XS=Object.prototype,QS=XS.hasOwnProperty;function JS(e){var t=this.__data__;if(ZS){var n=t[e];return n===YS?void 0:n}return QS.call(t,e)?t[e]:void 0}var e3=JS,t3=gc,n3=Object.prototype,o3=n3.hasOwnProperty;function a3(e){var t=this.__data__;return t3?t[e]!==void 0:o3.call(t,e)}var r3=a3,l3=gc,s3="__lodash_hash_undefined__";function i3(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=l3&&t===void 0?s3:t,this}var u3=i3,c3=WS,d3=KS,m3=e3,f3=r3,p3=u3;function Ul(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ul.prototype.clear=c3;Ul.prototype.delete=d3;Ul.prototype.get=m3;Ul.prototype.has=f3;Ul.prototype.set=p3;var v3=Ul;function h3(){this.__data__=[],this.size=0}var g3=h3;function b3(e,t){return e===t||e!==e&&t!==t}var ci=b3,y3=ci;function _3(e,t){for(var n=e.length;n--;)if(y3(e[n][0],t))return n;return-1}var bc=_3,I3=bc,w3=Array.prototype,x3=w3.splice;function k3(e){var t=this.__data__,n=I3(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():x3.call(t,n,1),--this.size,!0}var $3=k3,C3=bc;function S3(e){var t=this.__data__,n=C3(t,e);return n<0?void 0:t[n][1]}var T3=S3,E3=bc;function F3(e){return E3(this.__data__,e)>-1}var A3=F3,R3=bc;function D3(e,t){var n=this.__data__,o=R3(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}var O3=D3,B3=g3,N3=$3,P3=T3,M3=A3,V3=O3;function jl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}jl.prototype.clear=B3;jl.prototype.delete=N3;jl.prototype.get=P3;jl.prototype.has=M3;jl.prototype.set=V3;var yc=jl,L3=Wr,q3=na,U3=L3(q3,"Map"),Jf=U3,Ih=v3,j3=yc,z3=Jf;function H3(){this.size=0,this.__data__={hash:new Ih,map:new(z3||j3),string:new Ih}}var W3=H3;function G3(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var K3=G3,Z3=K3;function Y3(e,t){var n=e.__data__;return Z3(t)?n[typeof t=="string"?"string":"hash"]:n.map}var _c=Y3,X3=_c;function Q3(e){var t=X3(this,e).delete(e);return this.size-=t?1:0,t}var J3=Q3,eT=_c;function tT(e){return eT(this,e).get(e)}var nT=tT,oT=_c;function aT(e){return oT(this,e).has(e)}var rT=aT,lT=_c;function sT(e,t){var n=lT(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}var iT=sT,uT=W3,cT=J3,dT=nT,mT=rT,fT=iT;function zl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}zl.prototype.clear=uT;zl.prototype.delete=cT;zl.prototype.get=dT;zl.prototype.has=mT;zl.prototype.set=fT;var ep=zl,Q1=ep,pT="Expected a function";function tp(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pT);var n=function(){var o=arguments,a=t?t.apply(this,o):o[0],r=n.cache;if(r.has(a))return r.get(a);var s=e.apply(this,o);return n.cache=r.set(a,s)||r,s};return n.cache=new(tp.Cache||Q1),n}tp.Cache=Q1;var vT=tp,hT=vT,gT=500;function bT(e){var t=hT(e,function(o){return n.size===gT&&n.clear(),o}),n=t.cache;return t}var yT=bT,_T=yT,IT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wT=/\\(\\)?/g,xT=_T(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(IT,function(n,o,a,r){t.push(a?r.replace(wT,"$1"):o||n)}),t}),kT=xT;function $T(e,t){for(var n=-1,o=e==null?0:e.length,a=Array(o);++n<o;)a[n]=t(e[n],n,e);return a}var Hl=$T,wh=ql,CT=Hl,ST=Fn,TT=ui,ET=1/0,xh=wh?wh.prototype:void 0,kh=xh?xh.toString:void 0;function J1(e){if(typeof e=="string")return e;if(ST(e))return CT(e,J1)+"";if(TT(e))return kh?kh.call(e):"";var t=e+"";return t=="0"&&1/e==-ET?"-0":t}var FT=J1,AT=FT;function RT(e){return e==null?"":AT(e)}var DT=RT,OT=Fn,BT=Qf,NT=kT,PT=DT;function MT(e,t){return OT(e)?e:BT(e,t)?[e]:NT(PT(e))}var Wl=MT,VT=ui,LT=1/0;function qT(e){if(typeof e=="string"||VT(e))return e;var t=e+"";return t=="0"&&1/e==-LT?"-0":t}var Gl=qT,UT=Wl,jT=Gl;function zT(e,t){t=UT(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[jT(t[n++])];return n&&n==o?e:void 0}var di=zT,HT=di;function WT(e,t,n){var o=e==null?void 0:HT(e,t);return o===void 0?n:o}var ey=WT;const Ma=Bt(ey);var GT=Wr,KT=function(){try{var e=GT(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ty=KT,$h=ty;function ZT(e,t,n){t=="__proto__"&&$h?$h(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Ic=ZT,YT=Ic,XT=ci,QT=Object.prototype,JT=QT.hasOwnProperty;function e4(e,t,n){var o=e[t];(!(JT.call(e,t)&&XT(o,n))||n===void 0&&!(t in e))&&YT(e,t,n)}var np=e4,t4=9007199254740991,n4=/^(?:0|[1-9]\d*)$/;function o4(e,t){var n=typeof e;return t=t??t4,!!t&&(n=="number"||n!="symbol"&&n4.test(e))&&e>-1&&e%1==0&&e<t}var wc=o4,a4=np,r4=Wl,l4=wc,Ch=ho,s4=Gl;function i4(e,t,n,o){if(!Ch(e))return e;t=r4(t,e);for(var a=-1,r=t.length,s=r-1,i=e;i!=null&&++a<r;){var u=s4(t[a]),c=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(a!=s){var m=i[u];c=o?o(m,u,i):void 0,c===void 0&&(c=Ch(m)?m:l4(t[a+1])?[]:{})}a4(i,u,c),i=i[u]}return e}var ny=i4,u4=ny;function c4(e,t,n){return e==null?e:u4(e,t,n)}var d4=c4;const m4=Bt(d4);function xc(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map(function(a){a(n)}),(o=e.get("*"))&&o.slice().map(function(a){a(t,n)})}}}var oy={exports:{}};(function(e){(function(t,n,o){if(!t)return;for(var a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u,c=1;c<20;++c)a[111+c]="f"+c;for(c=0;c<=9;++c)a[c+96]=c.toString();function m($,F,R){if($.addEventListener){$.addEventListener(F,R,!1);return}$.attachEvent("on"+F,R)}function f($){if($.type=="keypress"){var F=String.fromCharCode($.which);return $.shiftKey||(F=F.toLowerCase()),F}return a[$.which]?a[$.which]:r[$.which]?r[$.which]:String.fromCharCode($.which).toLowerCase()}function v($,F){return $.sort().join(",")===F.sort().join(",")}function y($){var F=[];return $.shiftKey&&F.push("shift"),$.altKey&&F.push("alt"),$.ctrlKey&&F.push("ctrl"),$.metaKey&&F.push("meta"),F}function b($){if($.preventDefault){$.preventDefault();return}$.returnValue=!1}function w($){if($.stopPropagation){$.stopPropagation();return}$.cancelBubble=!0}function k($){return $=="shift"||$=="ctrl"||$=="alt"||$=="meta"}function x(){if(!u){u={};for(var $ in a)$>95&&$<112||a.hasOwnProperty($)&&(u[a[$]]=$)}return u}function I($,F,R){return R||(R=x()[$]?"keydown":"keypress"),R=="keypress"&&F.length&&(R="keydown"),R}function C($){return $==="+"?["+"]:($=$.replace(/\+{2}/g,"+plus"),$.split("+"))}function S($,F){var R,B,V,P=[];for(R=C($),V=0;V<R.length;++V)B=R[V],i[B]&&(B=i[B]),F&&F!="keypress"&&s[B]&&(B=s[B],P.push("shift")),k(B)&&P.push(B);return F=I(B,P,F),{key:B,modifiers:P,action:F}}function T($,F){return $===null||$===n?!1:$===F?!0:T($.parentNode,F)}function E($){var F=this;if($=$||n,!(F instanceof E))return new E($);F.target=$,F._callbacks={},F._directMap={};var R={},B,V=!1,P=!1,z=!1;function H(W){W=W||{};var ae=!1,ue;for(ue in R){if(W[ue]){ae=!0;continue}R[ue]=0}ae||(z=!1)}function j(W,ae,ue,ce,oe,ie){var Q,se,me=[],xe=ue.type;if(!F._callbacks[W])return[];for(xe=="keyup"&&k(W)&&(ae=[W]),Q=0;Q<F._callbacks[W].length;++Q)if(se=F._callbacks[W][Q],!(!ce&&se.seq&&R[se.seq]!=se.level)&&xe==se.action&&(xe=="keypress"&&!ue.metaKey&&!ue.ctrlKey||v(ae,se.modifiers))){var de=!ce&&se.combo==oe,he=ce&&se.seq==ce&&se.level==ie;(de||he)&&F._callbacks[W].splice(Q,1),me.push(se)}return me}function N(W,ae,ue,ce){F.stopCallback(ae,ae.target||ae.srcElement,ue,ce)||W(ae,ue)===!1&&(b(ae),w(ae))}F._handleKey=function(W,ae,ue){var ce=j(W,ae,ue),oe,ie={},Q=0,se=!1;for(oe=0;oe<ce.length;++oe)ce[oe].seq&&(Q=Math.max(Q,ce[oe].level));for(oe=0;oe<ce.length;++oe){if(ce[oe].seq){if(ce[oe].level!=Q)continue;se=!0,ie[ce[oe].seq]=1,N(ce[oe].callback,ue,ce[oe].combo,ce[oe].seq);continue}se||N(ce[oe].callback,ue,ce[oe].combo)}var me=ue.type=="keypress"&&P;ue.type==z&&!k(W)&&!me&&H(ie),P=se&&ue.type=="keydown"};function L(W){typeof W.which!="number"&&(W.which=W.keyCode);var ae=f(W);if(ae){if(W.type=="keyup"&&V===ae){V=!1;return}F.handleKey(ae,y(W),W)}}function U(){clearTimeout(B),B=setTimeout(H,1e3)}function ee(W,ae,ue,ce){R[W]=0;function oe(xe){return function(){z=xe,++R[W],U()}}function ie(xe){N(ue,xe,W),ce!=="keyup"&&(V=f(xe)),setTimeout(H,10)}for(var Q=0;Q<ae.length;++Q){var se=Q+1===ae.length,me=se?ie:oe(ce||S(ae[Q+1]).action);G(ae[Q],me,ce,W,Q)}}function G(W,ae,ue,ce,oe){F._directMap[W+":"+ue]=ae,W=W.replace(/\s+/g," ");var ie=W.split(" "),Q;if(ie.length>1){ee(W,ie,ae,ue);return}Q=S(W,ue),F._callbacks[Q.key]=F._callbacks[Q.key]||[],j(Q.key,Q.modifiers,{type:Q.action},ce,W,oe),F._callbacks[Q.key][ce?"unshift":"push"]({callback:ae,modifiers:Q.modifiers,action:Q.action,seq:ce,level:oe,combo:W})}F._bindMultiple=function(W,ae,ue){for(var ce=0;ce<W.length;++ce)G(W[ce],ae,ue)},m($,"keypress",L),m($,"keydown",L),m($,"keyup",L)}E.prototype.bind=function($,F,R){var B=this;return $=$ instanceof Array?$:[$],B._bindMultiple.call(B,$,F,R),B},E.prototype.unbind=function($,F){var R=this;return R.bind.call(R,$,function(){},F)},E.prototype.trigger=function($,F){var R=this;return R._directMap[$+":"+F]&&R._directMap[$+":"+F]({},$),R},E.prototype.reset=function(){var $=this;return $._callbacks={},$._directMap={},$},E.prototype.stopCallback=function($,F){var R=this;if((" "+F.className+" ").indexOf(" mousetrap ")>-1||T(F,R.target))return!1;if("composedPath"in $&&typeof $.composedPath=="function"){var B=$.composedPath()[0];B!==$.target&&(F=B)}return F.tagName=="INPUT"||F.tagName=="SELECT"||F.tagName=="TEXTAREA"||F.isContentEditable},E.prototype.handleKey=function(){var $=this;return $._handleKey.apply($,arguments)},E.addKeycodes=function($){for(var F in $)$.hasOwnProperty(F)&&(a[F]=$[F]);u=null},E.init=function(){var $=E(n);for(var F in $)F.charAt(0)!=="_"&&(E[F]=function(R){return function(){return $[R].apply($,arguments)}}(F))},E.init(),t.Mousetrap=E,e.exports&&(e.exports=E),typeof o=="function"&&o.amd&&o(function(){return E})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(oy);var f4=oy.exports;const qd=Bt(f4);/*!
  * shared v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Nu=typeof window<"u",pr=(e,t=!1)=>t?Symbol.for(e):Symbol(e),p4=(e,t,n)=>v4({l:e,k:t,s:n}),v4=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),zn=e=>typeof e=="number"&&isFinite(e),h4=e=>ry(e)==="[object Date]",ur=e=>ry(e)==="[object RegExp]",kc=e=>wt(e)&&Object.keys(e).length===0,Xn=Object.assign;let Sh;const Ta=()=>Sh||(Sh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Th(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const g4=Object.prototype.hasOwnProperty;function Pu(e,t){return g4.call(e,t)}const wn=Array.isArray,gn=e=>typeof e=="function",nt=e=>typeof e=="string",Mt=e=>typeof e=="boolean",an=e=>e!==null&&typeof e=="object",b4=e=>an(e)&&gn(e.then)&&gn(e.catch),ay=Object.prototype.toString,ry=e=>ay.call(e),wt=e=>{if(!an(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},y4=e=>e==null?"":wn(e)||wt(e)&&e.toString===ay?JSON.stringify(e,null,2):String(e);function _4(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}function op(e){let t=e;return()=>++t}function I4(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const tu=e=>!an(e)||wn(e);function $u(e,t){if(tu(e)||tu(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:o,des:a}=n.pop();Object.keys(o).forEach(r=>{tu(o[r])||tu(a[r])?a[r]=o[r]:n.push({src:o[r],des:a[r]})})}}/*!
  * message-compiler v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function w4(e,t,n){return{line:e,column:t,offset:n}}function jm(e,t,n){const o={start:e,end:t};return n!=null&&(o.source=n),o}const x4=/\{([0-9a-zA-Z]+)\}/g;function k4(e,...t){return t.length===1&&$4(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(x4,(n,o)=>t.hasOwnProperty(o)?t[o]:"")}const ly=Object.assign,Eh=e=>typeof e=="string",$4=e=>e!==null&&typeof e=="object";function sy(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}const bt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},C4={[bt.EXPECTED_TOKEN]:"Expected token: '{0}'",[bt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[bt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[bt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[bt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[bt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[bt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[bt.EMPTY_PLACEHOLDER]:"Empty placeholder",[bt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[bt.INVALID_LINKED_FORMAT]:"Invalid linked format",[bt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[bt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[bt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[bt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[bt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[bt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Kl(e,t,n={}){const{domain:o,messages:a,args:r}=n,s=k4((a||C4)[e]||"",...r||[]),i=new SyntaxError(String(s));return i.code=e,t&&(i.location=t),i.domain=o,i}function S4(e){throw e}const wa=" ",T4="\r",lo=`
`,E4="\u2028",F4="\u2029";function A4(e){const t=e;let n=0,o=1,a=1,r=0;const s=$=>t[$]===T4&&t[$+1]===lo,i=$=>t[$]===lo,u=$=>t[$]===F4,c=$=>t[$]===E4,m=$=>s($)||i($)||u($)||c($),f=()=>n,v=()=>o,y=()=>a,b=()=>r,w=$=>s($)||u($)||c($)?lo:t[$],k=()=>w(n),x=()=>w(n+r);function I(){return r=0,m(n)&&(o++,a=0),s(n)&&n++,n++,a++,t[n]}function C(){return s(n+r)&&r++,r++,t[n+r]}function S(){n=0,o=1,a=1,r=0}function T($=0){r=$}function E(){const $=n+r;for(;$!==n;)I();r=0}return{index:f,line:v,column:y,peekOffset:b,charAt:w,currentChar:k,currentPeek:x,next:I,peek:C,reset:S,resetPeek:T,skipToPeek:E}}const Ga=void 0,R4=".",Fh="'",D4="tokenizer";function O4(e,t={}){const n=t.location!==!1,o=A4(e),a=()=>o.index(),r=()=>w4(o.line(),o.column(),o.index()),s=r(),i=a(),u={currentType:14,offset:i,startLoc:s,endLoc:s,lastType:14,lastOffset:i,lastStartLoc:s,lastEndLoc:s,braceNest:0,inLinked:!1,text:""},c=()=>u,{onError:m}=t;function f(Y,X,re,...we){const Ce=c();if(X.column+=re,X.offset+=re,m){const ge=n?jm(Ce.startLoc,X):null,Re=Kl(Y,ge,{domain:D4,args:we});m(Re)}}function v(Y,X,re){Y.endLoc=r(),Y.currentType=X;const we={type:X};return n&&(we.loc=jm(Y.startLoc,Y.endLoc)),re!=null&&(we.value=re),we}const y=Y=>v(Y,14);function b(Y,X){return Y.currentChar()===X?(Y.next(),X):(f(bt.EXPECTED_TOKEN,r(),0,X),"")}function w(Y){let X="";for(;Y.currentPeek()===wa||Y.currentPeek()===lo;)X+=Y.currentPeek(),Y.peek();return X}function k(Y){const X=w(Y);return Y.skipToPeek(),X}function x(Y){if(Y===Ga)return!1;const X=Y.charCodeAt(0);return X>=97&&X<=122||X>=65&&X<=90||X===95}function I(Y){if(Y===Ga)return!1;const X=Y.charCodeAt(0);return X>=48&&X<=57}function C(Y,X){const{currentType:re}=X;if(re!==2)return!1;w(Y);const we=x(Y.currentPeek());return Y.resetPeek(),we}function S(Y,X){const{currentType:re}=X;if(re!==2)return!1;w(Y);const we=Y.currentPeek()==="-"?Y.peek():Y.currentPeek(),Ce=I(we);return Y.resetPeek(),Ce}function T(Y,X){const{currentType:re}=X;if(re!==2)return!1;w(Y);const we=Y.currentPeek()===Fh;return Y.resetPeek(),we}function E(Y,X){const{currentType:re}=X;if(re!==8)return!1;w(Y);const we=Y.currentPeek()===".";return Y.resetPeek(),we}function $(Y,X){const{currentType:re}=X;if(re!==9)return!1;w(Y);const we=x(Y.currentPeek());return Y.resetPeek(),we}function F(Y,X){const{currentType:re}=X;if(!(re===8||re===12))return!1;w(Y);const we=Y.currentPeek()===":";return Y.resetPeek(),we}function R(Y,X){const{currentType:re}=X;if(re!==10)return!1;const we=()=>{const ge=Y.currentPeek();return ge==="{"?x(Y.peek()):ge==="@"||ge==="%"||ge==="|"||ge===":"||ge==="."||ge===wa||!ge?!1:ge===lo?(Y.peek(),we()):x(ge)},Ce=we();return Y.resetPeek(),Ce}function B(Y){w(Y);const X=Y.currentPeek()==="|";return Y.resetPeek(),X}function V(Y){const X=w(Y),re=Y.currentPeek()==="%"&&Y.peek()==="{";return Y.resetPeek(),{isModulo:re,hasSpace:X.length>0}}function P(Y,X=!0){const re=(Ce=!1,ge="",Re=!1)=>{const et=Y.currentPeek();return et==="{"?ge==="%"?!1:Ce:et==="@"||!et?ge==="%"?!0:Ce:et==="%"?(Y.peek(),re(Ce,"%",!0)):et==="|"?ge==="%"||Re?!0:!(ge===wa||ge===lo):et===wa?(Y.peek(),re(!0,wa,Re)):et===lo?(Y.peek(),re(!0,lo,Re)):!0},we=re();return X&&Y.resetPeek(),we}function z(Y,X){const re=Y.currentChar();return re===Ga?Ga:X(re)?(Y.next(),re):null}function H(Y){return z(Y,re=>{const we=re.charCodeAt(0);return we>=97&&we<=122||we>=65&&we<=90||we>=48&&we<=57||we===95||we===36})}function j(Y){return z(Y,re=>{const we=re.charCodeAt(0);return we>=48&&we<=57})}function N(Y){return z(Y,re=>{const we=re.charCodeAt(0);return we>=48&&we<=57||we>=65&&we<=70||we>=97&&we<=102})}function L(Y){let X="",re="";for(;X=j(Y);)re+=X;return re}function U(Y){k(Y);const X=Y.currentChar();return X!=="%"&&f(bt.EXPECTED_TOKEN,r(),0,X),Y.next(),"%"}function ee(Y){let X="";for(;;){const re=Y.currentChar();if(re==="{"||re==="}"||re==="@"||re==="|"||!re)break;if(re==="%")if(P(Y))X+=re,Y.next();else break;else if(re===wa||re===lo)if(P(Y))X+=re,Y.next();else{if(B(Y))break;X+=re,Y.next()}else X+=re,Y.next()}return X}function G(Y){k(Y);let X="",re="";for(;X=H(Y);)re+=X;return Y.currentChar()===Ga&&f(bt.UNTERMINATED_CLOSING_BRACE,r(),0),re}function W(Y){k(Y);let X="";return Y.currentChar()==="-"?(Y.next(),X+=`-${L(Y)}`):X+=L(Y),Y.currentChar()===Ga&&f(bt.UNTERMINATED_CLOSING_BRACE,r(),0),X}function ae(Y){k(Y),b(Y,"'");let X="",re="";const we=ge=>ge!==Fh&&ge!==lo;for(;X=z(Y,we);)X==="\\"?re+=ue(Y):re+=X;const Ce=Y.currentChar();return Ce===lo||Ce===Ga?(f(bt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),Ce===lo&&(Y.next(),b(Y,"'")),re):(b(Y,"'"),re)}function ue(Y){const X=Y.currentChar();switch(X){case"\\":case"'":return Y.next(),`\\${X}`;case"u":return ce(Y,X,4);case"U":return ce(Y,X,6);default:return f(bt.UNKNOWN_ESCAPE_SEQUENCE,r(),0,X),""}}function ce(Y,X,re){b(Y,X);let we="";for(let Ce=0;Ce<re;Ce++){const ge=N(Y);if(!ge){f(bt.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${X}${we}${Y.currentChar()}`);break}we+=ge}return`\\${X}${we}`}function oe(Y){k(Y);let X="",re="";const we=Ce=>Ce!=="{"&&Ce!=="}"&&Ce!==wa&&Ce!==lo;for(;X=z(Y,we);)re+=X;return re}function ie(Y){let X="",re="";for(;X=H(Y);)re+=X;return re}function Q(Y){const X=(re=!1,we)=>{const Ce=Y.currentChar();return Ce==="{"||Ce==="%"||Ce==="@"||Ce==="|"||Ce==="("||Ce===")"||!Ce||Ce===wa?we:Ce===lo||Ce===R4?(we+=Ce,Y.next(),X(re,we)):(we+=Ce,Y.next(),X(!0,we))};return X(!1,"")}function se(Y){k(Y);const X=b(Y,"|");return k(Y),X}function me(Y,X){let re=null;switch(Y.currentChar()){case"{":return X.braceNest>=1&&f(bt.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),Y.next(),re=v(X,2,"{"),k(Y),X.braceNest++,re;case"}":return X.braceNest>0&&X.currentType===2&&f(bt.EMPTY_PLACEHOLDER,r(),0),Y.next(),re=v(X,3,"}"),X.braceNest--,X.braceNest>0&&k(Y),X.inLinked&&X.braceNest===0&&(X.inLinked=!1),re;case"@":return X.braceNest>0&&f(bt.UNTERMINATED_CLOSING_BRACE,r(),0),re=xe(Y,X)||y(X),X.braceNest=0,re;default:{let Ce=!0,ge=!0,Re=!0;if(B(Y))return X.braceNest>0&&f(bt.UNTERMINATED_CLOSING_BRACE,r(),0),re=v(X,1,se(Y)),X.braceNest=0,X.inLinked=!1,re;if(X.braceNest>0&&(X.currentType===5||X.currentType===6||X.currentType===7))return f(bt.UNTERMINATED_CLOSING_BRACE,r(),0),X.braceNest=0,de(Y,X);if(Ce=C(Y,X))return re=v(X,5,G(Y)),k(Y),re;if(ge=S(Y,X))return re=v(X,6,W(Y)),k(Y),re;if(Re=T(Y,X))return re=v(X,7,ae(Y)),k(Y),re;if(!Ce&&!ge&&!Re)return re=v(X,13,oe(Y)),f(bt.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,re.value),k(Y),re;break}}return re}function xe(Y,X){const{currentType:re}=X;let we=null;const Ce=Y.currentChar();switch((re===8||re===9||re===12||re===10)&&(Ce===lo||Ce===wa)&&f(bt.INVALID_LINKED_FORMAT,r(),0),Ce){case"@":return Y.next(),we=v(X,8,"@"),X.inLinked=!0,we;case".":return k(Y),Y.next(),v(X,9,".");case":":return k(Y),Y.next(),v(X,10,":");default:return B(Y)?(we=v(X,1,se(Y)),X.braceNest=0,X.inLinked=!1,we):E(Y,X)||F(Y,X)?(k(Y),xe(Y,X)):$(Y,X)?(k(Y),v(X,12,ie(Y))):R(Y,X)?(k(Y),Ce==="{"?me(Y,X)||we:v(X,11,Q(Y))):(re===8&&f(bt.INVALID_LINKED_FORMAT,r(),0),X.braceNest=0,X.inLinked=!1,de(Y,X))}}function de(Y,X){let re={type:14};if(X.braceNest>0)return me(Y,X)||y(X);if(X.inLinked)return xe(Y,X)||y(X);switch(Y.currentChar()){case"{":return me(Y,X)||y(X);case"}":return f(bt.UNBALANCED_CLOSING_BRACE,r(),0),Y.next(),v(X,3,"}");case"@":return xe(Y,X)||y(X);default:{if(B(Y))return re=v(X,1,se(Y)),X.braceNest=0,X.inLinked=!1,re;const{isModulo:Ce,hasSpace:ge}=V(Y);if(Ce)return ge?v(X,0,ee(Y)):v(X,4,U(Y));if(P(Y))return v(X,0,ee(Y));break}}return re}function he(){const{currentType:Y,offset:X,startLoc:re,endLoc:we}=u;return u.lastType=Y,u.lastOffset=X,u.lastStartLoc=re,u.lastEndLoc=we,u.offset=a(),u.startLoc=r(),o.currentChar()===Ga?v(u,14):de(o,u)}return{nextToken:he,currentOffset:a,currentPosition:r,context:c}}const B4="parser",N4=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function P4(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(t||n,16);return o<=55295||o>=57344?String.fromCodePoint(o):"�"}}}function M4(e={}){const t=e.location!==!1,{onError:n}=e;function o(x,I,C,S,...T){const E=x.currentPosition();if(E.offset+=S,E.column+=S,n){const $=t?jm(C,E):null,F=Kl(I,$,{domain:B4,args:T});n(F)}}function a(x,I,C){const S={type:x};return t&&(S.start=I,S.end=I,S.loc={start:C,end:C}),S}function r(x,I,C,S){S&&(x.type=S),t&&(x.end=I,x.loc&&(x.loc.end=C))}function s(x,I){const C=x.context(),S=a(3,C.offset,C.startLoc);return S.value=I,r(S,x.currentOffset(),x.currentPosition()),S}function i(x,I){const C=x.context(),{lastOffset:S,lastStartLoc:T}=C,E=a(5,S,T);return E.index=parseInt(I,10),x.nextToken(),r(E,x.currentOffset(),x.currentPosition()),E}function u(x,I){const C=x.context(),{lastOffset:S,lastStartLoc:T}=C,E=a(4,S,T);return E.key=I,x.nextToken(),r(E,x.currentOffset(),x.currentPosition()),E}function c(x,I){const C=x.context(),{lastOffset:S,lastStartLoc:T}=C,E=a(9,S,T);return E.value=I.replace(N4,P4),x.nextToken(),r(E,x.currentOffset(),x.currentPosition()),E}function m(x){const I=x.nextToken(),C=x.context(),{lastOffset:S,lastStartLoc:T}=C,E=a(8,S,T);return I.type!==12?(o(x,bt.UNEXPECTED_EMPTY_LINKED_MODIFIER,C.lastStartLoc,0),E.value="",r(E,S,T),{nextConsumeToken:I,node:E}):(I.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,sa(I)),E.value=I.value||"",r(E,x.currentOffset(),x.currentPosition()),{node:E})}function f(x,I){const C=x.context(),S=a(7,C.offset,C.startLoc);return S.value=I,r(S,x.currentOffset(),x.currentPosition()),S}function v(x){const I=x.context(),C=a(6,I.offset,I.startLoc);let S=x.nextToken();if(S.type===9){const T=m(x);C.modifier=T.node,S=T.nextConsumeToken||x.nextToken()}switch(S.type!==10&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(S)),S=x.nextToken(),S.type===2&&(S=x.nextToken()),S.type){case 11:S.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(S)),C.key=f(x,S.value||"");break;case 5:S.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(S)),C.key=u(x,S.value||"");break;case 6:S.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(S)),C.key=i(x,S.value||"");break;case 7:S.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(S)),C.key=c(x,S.value||"");break;default:{o(x,bt.UNEXPECTED_EMPTY_LINKED_KEY,I.lastStartLoc,0);const T=x.context(),E=a(7,T.offset,T.startLoc);return E.value="",r(E,T.offset,T.startLoc),C.key=E,r(C,T.offset,T.startLoc),{nextConsumeToken:S,node:C}}}return r(C,x.currentOffset(),x.currentPosition()),{node:C}}function y(x){const I=x.context(),C=I.currentType===1?x.currentOffset():I.offset,S=I.currentType===1?I.endLoc:I.startLoc,T=a(2,C,S);T.items=[];let E=null;do{const R=E||x.nextToken();switch(E=null,R.type){case 0:R.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(R)),T.items.push(s(x,R.value||""));break;case 6:R.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(R)),T.items.push(i(x,R.value||""));break;case 5:R.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(R)),T.items.push(u(x,R.value||""));break;case 7:R.value==null&&o(x,bt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,sa(R)),T.items.push(c(x,R.value||""));break;case 8:{const B=v(x);T.items.push(B.node),E=B.nextConsumeToken||null;break}}}while(I.currentType!==14&&I.currentType!==1);const $=I.currentType===1?I.lastOffset:x.currentOffset(),F=I.currentType===1?I.lastEndLoc:x.currentPosition();return r(T,$,F),T}function b(x,I,C,S){const T=x.context();let E=S.items.length===0;const $=a(1,I,C);$.cases=[],$.cases.push(S);do{const F=y(x);E||(E=F.items.length===0),$.cases.push(F)}while(T.currentType!==14);return E&&o(x,bt.MUST_HAVE_MESSAGES_IN_PLURAL,C,0),r($,x.currentOffset(),x.currentPosition()),$}function w(x){const I=x.context(),{offset:C,startLoc:S}=I,T=y(x);return I.currentType===14?T:b(x,C,S,T)}function k(x){const I=O4(x,ly({},e)),C=I.context(),S=a(0,C.offset,C.startLoc);return t&&S.loc&&(S.loc.source=x),S.body=w(I),e.onCacheKey&&(S.cacheKey=e.onCacheKey(x)),C.currentType!==14&&o(I,bt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,x[C.offset]||""),r(S,I.currentOffset(),I.currentPosition()),S}return{parse:k}}function sa(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function V4(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:r=>(n.helpers.add(r),r)}}function Ah(e,t){for(let n=0;n<e.length;n++)ap(e[n],t)}function ap(e,t){switch(e.type){case 1:Ah(e.cases,t),t.helper("plural");break;case 2:Ah(e.items,t);break;case 6:{ap(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function L4(e,t={}){const n=V4(e);n.helper("normalize"),e.body&&ap(e.body,n);const o=n.context();e.helpers=Array.from(o.helpers)}function q4(e){const t=e.body;return t.type===2?Rh(t):t.cases.forEach(n=>Rh(n)),e}function Rh(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const o=e.items[n];if(!(o.type===3||o.type===9)||o.value==null)break;t.push(o.value)}if(t.length===e.items.length){e.static=sy(t);for(let n=0;n<e.items.length;n++){const o=e.items[n];(o.type===3||o.type===9)&&delete o.value}}}}const U4="minifier";function ul(e){switch(e.t=e.type,e.type){case 0:{const t=e;ul(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let o=0;o<n.length;o++)ul(n[o]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let o=0;o<n.length;o++)ul(n[o]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;ul(t.key),t.k=t.key,delete t.key,t.modifier&&(ul(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw Kl(bt.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:U4,args:[e.type]})}delete e.type}const j4="parser";function z4(e,t){const{sourceMap:n,filename:o,breakLineCode:a,needIndent:r}=t,s=t.location!==!1,i={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:a,needIndent:r,indentLevel:0};s&&e.loc&&(i.source=e.loc.source);const u=()=>i;function c(k,x){i.code+=k}function m(k,x=!0){const I=x?a:"";c(r?I+"  ".repeat(k):I)}function f(k=!0){const x=++i.indentLevel;k&&m(x)}function v(k=!0){const x=--i.indentLevel;k&&m(x)}function y(){m(i.indentLevel)}return{context:u,push:c,indent:f,deindent:v,newline:y,helper:k=>`_${k}`,needIndent:()=>i.needIndent}}function H4(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Cl(e,t.key),t.modifier?(e.push(", "),Cl(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function W4(e,t){const{helper:n,needIndent:o}=e;e.push(`${n("normalize")}([`),e.indent(o());const a=t.items.length;for(let r=0;r<a&&(Cl(e,t.items[r]),r!==a-1);r++)e.push(", ");e.deindent(o()),e.push("])")}function G4(e,t){const{helper:n,needIndent:o}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(o());const a=t.cases.length;for(let r=0;r<a&&(Cl(e,t.cases[r]),r!==a-1);r++)e.push(", ");e.deindent(o()),e.push("])")}}function K4(e,t){t.body?Cl(e,t.body):e.push("null")}function Cl(e,t){const{helper:n}=e;switch(t.type){case 0:K4(e,t);break;case 1:G4(e,t);break;case 2:W4(e,t);break;case 6:H4(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw Kl(bt.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:j4,args:[t.type]})}}const Z4=(e,t={})=>{const n=Eh(t.mode)?t.mode:"normal",o=Eh(t.filename)?t.filename:"message.intl",a=!!t.sourceMap,r=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,s=t.needIndent?t.needIndent:n!=="arrow",i=e.helpers||[],u=z4(e,{mode:n,filename:o,sourceMap:a,breakLineCode:r,needIndent:s});u.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),u.indent(s),i.length>0&&(u.push(`const { ${sy(i.map(f=>`${f}: _${f}`),", ")} } = ctx`),u.newline()),u.push("return "),Cl(u,e),u.deindent(s),u.push("}"),delete e.helpers;const{code:c,map:m}=u.context();return{ast:e,code:c,map:m?m.toJSON():void 0}};function Y4(e,t={}){const n=ly({},t),o=!!n.jit,a=!!n.minify,r=n.optimize==null?!0:n.optimize,i=M4(n).parse(e);return o?(r&&q4(i),a&&ul(i),{ast:i,code:""}):(L4(i,n),Z4(i,n))}/*!
  * core-base v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function X4(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ta().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Ta().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Ta().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const vr=[];vr[0]={w:[0],i:[3,0],"[":[4],o:[7]};vr[1]={w:[1],".":[2],"[":[4],o:[7]};vr[2]={w:[2],i:[3,0],0:[3,0]};vr[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};vr[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};vr[5]={"'":[4,0],o:8,l:[5,0]};vr[6]={'"':[4,0],o:8,l:[6,0]};const Q4=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function J4(e){return Q4.test(e)}function eE(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function tE(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function nE(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:J4(t)?eE(t):"*"+t}function oE(e){const t=[];let n=-1,o=0,a=0,r,s,i,u,c,m,f;const v=[];v[0]=()=>{s===void 0?s=i:s+=i},v[1]=()=>{s!==void 0&&(t.push(s),s=void 0)},v[2]=()=>{v[0](),a++},v[3]=()=>{if(a>0)a--,o=4,v[0]();else{if(a=0,s===void 0||(s=nE(s),s===!1))return!1;v[1]()}};function y(){const b=e[n+1];if(o===5&&b==="'"||o===6&&b==='"')return n++,i="\\"+b,v[0](),!0}for(;o!==null;)if(n++,r=e[n],!(r==="\\"&&y())){if(u=tE(r),f=vr[o],c=f[u]||f.l||8,c===8||(o=c[0],c[1]!==void 0&&(m=v[c[1]],m&&(i=r,m()===!1))))return;if(o===7)return t}}const Dh=new Map;function aE(e,t){return an(e)?e[t]:null}function iy(e,t){if(!an(e))return null;let n=Dh.get(t);if(n||(n=oE(t),n&&Dh.set(t,n)),!n)return null;const o=n.length;let a=e,r=0;for(;r<o;){const s=a[n[r]];if(s===void 0||gn(a))return null;a=s,r++}return a}const rE=e=>e,lE=e=>"",sE="text",iE=e=>e.length===0?"":_4(e),uE=y4;function Oh(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function cE(e){const t=zn(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(zn(e.named.count)||zn(e.named.n))?zn(e.named.count)?e.named.count:zn(e.named.n)?e.named.n:t:t}function dE(e,t){t.count||(t.count=e),t.n||(t.n=e)}function mE(e={}){const t=e.locale,n=cE(e),o=an(e.pluralRules)&&nt(t)&&gn(e.pluralRules[t])?e.pluralRules[t]:Oh,a=an(e.pluralRules)&&nt(t)&&gn(e.pluralRules[t])?Oh:void 0,r=x=>x[o(n,x.length,a)],s=e.list||[],i=x=>s[x],u=e.named||{};zn(e.pluralIndex)&&dE(n,u);const c=x=>u[x];function m(x){const I=gn(e.messages)?e.messages(x):an(e.messages)?e.messages[x]:!1;return I||(e.parent?e.parent.message(x):lE)}const f=x=>e.modifiers?e.modifiers[x]:rE,v=wt(e.processor)&&gn(e.processor.normalize)?e.processor.normalize:iE,y=wt(e.processor)&&gn(e.processor.interpolate)?e.processor.interpolate:uE,b=wt(e.processor)&&nt(e.processor.type)?e.processor.type:sE,k={list:i,named:c,plural:r,linked:(x,...I)=>{const[C,S]=I;let T="text",E="";I.length===1?an(C)?(E=C.modifier||E,T=C.type||T):nt(C)&&(E=C||E):I.length===2&&(nt(C)&&(E=C||E),nt(S)&&(T=S||T));const $=m(x)(k),F=T==="vnode"&&wn($)&&E?$[0]:$;return E?f(E)(F,T):F},message:m,type:b,interpolate:y,normalize:v,values:Xn({},s,u)};return k}let qs=null;function fE(e){qs=e}function pE(e,t,n){qs&&qs.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const vE=hE("function:translate");function hE(e){return t=>qs&&qs.emit(e,t)}const gE={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},uy=bt.__EXTEND_POINT__,xr=op(uy),Go={INVALID_ARGUMENT:uy,INVALID_DATE_ARGUMENT:xr(),INVALID_ISO_DATE_ARGUMENT:xr(),NOT_SUPPORT_NON_STRING_MESSAGE:xr(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:xr(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:xr(),NOT_SUPPORT_LOCALE_TYPE:xr(),__EXTEND_POINT__:xr()};function ca(e){return Kl(e,null,void 0)}function rp(e,t){return t.locale!=null?Bh(t.locale):Bh(e.locale)}let Ud;function Bh(e){if(nt(e))return e;if(gn(e)){if(e.resolvedOnce&&Ud!=null)return Ud;if(e.constructor.name==="Function"){const t=e();if(b4(t))throw ca(Go.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ud=t}else throw ca(Go.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ca(Go.NOT_SUPPORT_LOCALE_TYPE)}function bE(e,t,n){return[...new Set([n,...wn(t)?t:an(t)?Object.keys(t):nt(t)?[t]:[n]])]}function cy(e,t,n){const o=nt(n)?n:Sl,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let r=a.__localeChainCache.get(o);if(!r){r=[];let s=[n];for(;wn(s);)s=Nh(r,s,t);const i=wn(t)||!wt(t)?t:t.default?t.default:null;s=nt(i)?[i]:i,wn(s)&&Nh(r,s,!1),a.__localeChainCache.set(o,r)}return r}function Nh(e,t,n){let o=!0;for(let a=0;a<t.length&&Mt(o);a++){const r=t[a];nt(r)&&(o=yE(e,t[a],n))}return o}function yE(e,t,n){let o;const a=t.split("-");do{const r=a.join("-");o=_E(e,r,n),a.splice(-1,1)}while(a.length&&o===!0);return o}function _E(e,t,n){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(wn(n)||wt(n))&&n[a]&&(o=n[a])}return o}const IE="9.10.2",$c=-1,Sl="en-US",Ph="",Mh=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function wE(){return{upper:(e,t)=>t==="text"&&nt(e)?e.toUpperCase():t==="vnode"&&an(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&nt(e)?e.toLowerCase():t==="vnode"&&an(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&nt(e)?Mh(e):t==="vnode"&&an(e)&&"__v_isVNode"in e?Mh(e.children):e}}let dy;function Vh(e){dy=e}let my;function xE(e){my=e}let fy;function kE(e){fy=e}let py=null;const $E=e=>{py=e},CE=()=>py;let vy=null;const Lh=e=>{vy=e},SE=()=>vy;let qh=0;function TE(e={}){const t=gn(e.onWarn)?e.onWarn:I4,n=nt(e.version)?e.version:IE,o=nt(e.locale)||gn(e.locale)?e.locale:Sl,a=gn(o)?Sl:o,r=wn(e.fallbackLocale)||wt(e.fallbackLocale)||nt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,s=wt(e.messages)?e.messages:{[a]:{}},i=wt(e.datetimeFormats)?e.datetimeFormats:{[a]:{}},u=wt(e.numberFormats)?e.numberFormats:{[a]:{}},c=Xn({},e.modifiers||{},wE()),m=e.pluralRules||{},f=gn(e.missing)?e.missing:null,v=Mt(e.missingWarn)||ur(e.missingWarn)?e.missingWarn:!0,y=Mt(e.fallbackWarn)||ur(e.fallbackWarn)?e.fallbackWarn:!0,b=!!e.fallbackFormat,w=!!e.unresolving,k=gn(e.postTranslation)?e.postTranslation:null,x=wt(e.processor)?e.processor:null,I=Mt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,C=!!e.escapeParameter,S=gn(e.messageCompiler)?e.messageCompiler:dy,T=gn(e.messageResolver)?e.messageResolver:my||aE,E=gn(e.localeFallbacker)?e.localeFallbacker:fy||bE,$=an(e.fallbackContext)?e.fallbackContext:void 0,F=e,R=an(F.__datetimeFormatters)?F.__datetimeFormatters:new Map,B=an(F.__numberFormatters)?F.__numberFormatters:new Map,V=an(F.__meta)?F.__meta:{};qh++;const P={version:n,cid:qh,locale:o,fallbackLocale:r,messages:s,modifiers:c,pluralRules:m,missing:f,missingWarn:v,fallbackWarn:y,fallbackFormat:b,unresolving:w,postTranslation:k,processor:x,warnHtmlMessage:I,escapeParameter:C,messageCompiler:S,messageResolver:T,localeFallbacker:E,fallbackContext:$,onWarn:t,__meta:V};return P.datetimeFormats=i,P.numberFormats=u,P.__datetimeFormatters=R,P.__numberFormatters=B,__INTLIFY_PROD_DEVTOOLS__&&pE(P,n,V),P}function lp(e,t,n,o,a){const{missing:r,onWarn:s}=e;if(r!==null){const i=r(e,n,t,a);return nt(i)?i:t}else return t}function ws(e,t,n){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function jd(e){return n=>EE(n,e)}function EE(e,t){const n=t.b||t.body;if((n.t||n.type)===1){const o=n,a=o.c||o.cases;return e.plural(a.reduce((r,s)=>[...r,Uh(e,s)],[]))}else return Uh(e,n)}function Uh(e,t){const n=t.s||t.static;if(n)return e.type==="text"?n:e.normalize([n]);{const o=(t.i||t.items).reduce((a,r)=>[...a,zm(e,r)],[]);return e.normalize(o)}}function zm(e,t){const n=t.t||t.type;switch(n){case 3:{const o=t;return o.v||o.value}case 9:{const o=t;return o.v||o.value}case 4:{const o=t;return e.interpolate(e.named(o.k||o.key))}case 5:{const o=t;return e.interpolate(e.list(o.i!=null?o.i:o.index))}case 6:{const o=t,a=o.m||o.modifier;return e.linked(zm(e,o.k||o.key),a?zm(e,a):void 0,e.type)}case 7:{const o=t;return o.v||o.value}case 8:{const o=t;return o.v||o.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const hy=e=>e;let pl=Object.create(null);const Tl=e=>an(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function gy(e,t={}){let n=!1;const o=t.onError||S4;return t.onError=a=>{n=!0,o(a)},{...Y4(e,t),detectError:n}}const FE=(e,t)=>{if(!nt(e))throw ca(Go.NOT_SUPPORT_NON_STRING_MESSAGE);{Mt(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||hy)(e),a=pl[o];if(a)return a;const{code:r,detectError:s}=gy(e,t),i=new Function(`return ${r}`)();return s?i:pl[o]=i}};function AE(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&nt(e)){Mt(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||hy)(e),a=pl[o];if(a)return a;const{ast:r,detectError:s}=gy(e,{...t,location:!1,jit:!0}),i=jd(r);return s?i:pl[o]=i}else{const n=e.cacheKey;if(n){const o=pl[n];return o||(pl[n]=jd(e))}else return jd(e)}}const jh=()=>"",Oo=e=>gn(e);function zh(e,...t){const{fallbackFormat:n,postTranslation:o,unresolving:a,messageCompiler:r,fallbackLocale:s,messages:i}=e,[u,c]=Hm(...t),m=Mt(c.missingWarn)?c.missingWarn:e.missingWarn,f=Mt(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,v=Mt(c.escapeParameter)?c.escapeParameter:e.escapeParameter,y=!!c.resolvedMessage,b=nt(c.default)||Mt(c.default)?Mt(c.default)?r?u:()=>u:c.default:n?r?u:()=>u:"",w=n||b!=="",k=rp(e,c);v&&RE(c);let[x,I,C]=y?[u,k,i[k]||{}]:by(e,u,k,s,f,m),S=x,T=u;if(!y&&!(nt(S)||Tl(S)||Oo(S))&&w&&(S=b,T=S),!y&&(!(nt(S)||Tl(S)||Oo(S))||!nt(I)))return a?$c:u;let E=!1;const $=()=>{E=!0},F=Oo(S)?S:yy(e,u,I,S,T,$);if(E)return S;const R=BE(e,I,C,c),B=mE(R),V=DE(e,F,B),P=o?o(V,u):V;if(__INTLIFY_PROD_DEVTOOLS__){const z={timestamp:Date.now(),key:nt(u)?u:Oo(S)?S.key:"",locale:I||(Oo(S)?S.locale:""),format:nt(S)?S:Oo(S)?S.source:"",message:P};z.meta=Xn({},e.__meta,CE()||{}),vE(z)}return P}function RE(e){wn(e.list)?e.list=e.list.map(t=>nt(t)?Th(t):t):an(e.named)&&Object.keys(e.named).forEach(t=>{nt(e.named[t])&&(e.named[t]=Th(e.named[t]))})}function by(e,t,n,o,a,r){const{messages:s,onWarn:i,messageResolver:u,localeFallbacker:c}=e,m=c(e,o,n);let f={},v,y=null;const b="translate";for(let w=0;w<m.length&&(v=m[w],f=s[v]||{},(y=u(f,t))===null&&(y=f[t]),!(nt(y)||Tl(y)||Oo(y)));w++){const k=lp(e,t,v,r,b);k!==t&&(y=k)}return[y,v,f]}function yy(e,t,n,o,a,r){const{messageCompiler:s,warnHtmlMessage:i}=e;if(Oo(o)){const c=o;return c.locale=c.locale||n,c.key=c.key||t,c}if(s==null){const c=()=>o;return c.locale=n,c.key=t,c}const u=s(o,OE(e,n,a,o,i,r));return u.locale=n,u.key=t,u.source=o,u}function DE(e,t,n){return t(n)}function Hm(...e){const[t,n,o]=e,a={};if(!nt(t)&&!zn(t)&&!Oo(t)&&!Tl(t))throw ca(Go.INVALID_ARGUMENT);const r=zn(t)?String(t):(Oo(t),t);return zn(n)?a.plural=n:nt(n)?a.default=n:wt(n)&&!kc(n)?a.named=n:wn(n)&&(a.list=n),zn(o)?a.plural=o:nt(o)?a.default=o:wt(o)&&Xn(a,o),[r,a]}function OE(e,t,n,o,a,r){return{locale:t,key:n,warnHtmlMessage:a,onError:s=>{throw r&&r(s),s},onCacheKey:s=>p4(t,n,s)}}function BE(e,t,n,o){const{modifiers:a,pluralRules:r,messageResolver:s,fallbackLocale:i,fallbackWarn:u,missingWarn:c,fallbackContext:m}=e,v={locale:t,modifiers:a,pluralRules:r,messages:y=>{let b=s(n,y);if(b==null&&m){const[,,w]=by(m,y,t,i,u,c);b=s(w,y)}if(nt(b)||Tl(b)){let w=!1;const x=yy(e,y,t,b,y,()=>{w=!0});return w?jh:x}else return Oo(b)?b:jh}};return e.processor&&(v.processor=e.processor),o.list&&(v.list=o.list),o.named&&(v.named=o.named),zn(o.plural)&&(v.pluralIndex=o.plural),v}function Hh(e,...t){const{datetimeFormats:n,unresolving:o,fallbackLocale:a,onWarn:r,localeFallbacker:s}=e,{__datetimeFormatters:i}=e,[u,c,m,f]=Wm(...t),v=Mt(m.missingWarn)?m.missingWarn:e.missingWarn;Mt(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const y=!!m.part,b=rp(e,m),w=s(e,a,b);if(!nt(u)||u==="")return new Intl.DateTimeFormat(b,f).format(c);let k={},x,I=null;const C="datetime format";for(let E=0;E<w.length&&(x=w[E],k=n[x]||{},I=k[u],!wt(I));E++)lp(e,u,x,v,C);if(!wt(I)||!nt(x))return o?$c:u;let S=`${x}__${u}`;kc(f)||(S=`${S}__${JSON.stringify(f)}`);let T=i.get(S);return T||(T=new Intl.DateTimeFormat(x,Xn({},I,f)),i.set(S,T)),y?T.formatToParts(c):T.format(c)}const _y=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Wm(...e){const[t,n,o,a]=e,r={};let s={},i;if(nt(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw ca(Go.INVALID_ISO_DATE_ARGUMENT);const c=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();i=new Date(c);try{i.toISOString()}catch{throw ca(Go.INVALID_ISO_DATE_ARGUMENT)}}else if(h4(t)){if(isNaN(t.getTime()))throw ca(Go.INVALID_DATE_ARGUMENT);i=t}else if(zn(t))i=t;else throw ca(Go.INVALID_ARGUMENT);return nt(n)?r.key=n:wt(n)&&Object.keys(n).forEach(u=>{_y.includes(u)?s[u]=n[u]:r[u]=n[u]}),nt(o)?r.locale=o:wt(o)&&(s=o),wt(a)&&(s=a),[r.key||"",i,r,s]}function Wh(e,t,n){const o=e;for(const a in n){const r=`${t}__${a}`;o.__datetimeFormatters.has(r)&&o.__datetimeFormatters.delete(r)}}function Gh(e,...t){const{numberFormats:n,unresolving:o,fallbackLocale:a,onWarn:r,localeFallbacker:s}=e,{__numberFormatters:i}=e,[u,c,m,f]=Gm(...t),v=Mt(m.missingWarn)?m.missingWarn:e.missingWarn;Mt(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const y=!!m.part,b=rp(e,m),w=s(e,a,b);if(!nt(u)||u==="")return new Intl.NumberFormat(b,f).format(c);let k={},x,I=null;const C="number format";for(let E=0;E<w.length&&(x=w[E],k=n[x]||{},I=k[u],!wt(I));E++)lp(e,u,x,v,C);if(!wt(I)||!nt(x))return o?$c:u;let S=`${x}__${u}`;kc(f)||(S=`${S}__${JSON.stringify(f)}`);let T=i.get(S);return T||(T=new Intl.NumberFormat(x,Xn({},I,f)),i.set(S,T)),y?T.formatToParts(c):T.format(c)}const Iy=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Gm(...e){const[t,n,o,a]=e,r={};let s={};if(!zn(t))throw ca(Go.INVALID_ARGUMENT);const i=t;return nt(n)?r.key=n:wt(n)&&Object.keys(n).forEach(u=>{Iy.includes(u)?s[u]=n[u]:r[u]=n[u]}),nt(o)?r.locale=o:wt(o)&&(s=o),wt(a)&&(s=a),[r.key||"",i,r,s]}function Kh(e,t,n){const o=e;for(const a in n){const r=`${t}__${a}`;o.__numberFormatters.has(r)&&o.__numberFormatters.delete(r)}}X4();function NE(){return wy().__VUE_DEVTOOLS_GLOBAL_HOOK__}function wy(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const PE=typeof Proxy=="function",ME="devtools-plugin:setup",VE="plugin:settings:set";let el,Km;function LE(){var e;return el!==void 0||(typeof window<"u"&&window.performance?(el=!0,Km=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(el=!0,Km=globalThis.perf_hooks.performance):el=!1),el}function qE(){return LE()?Km.now():Date.now()}class UE{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const o={};if(t.settings)for(const s in t.settings){const i=t.settings[s];o[s]=i.defaultValue}const a=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},o);try{const s=localStorage.getItem(a),i=JSON.parse(s);Object.assign(r,i)}catch{}this.fallbacks={getSettings(){return r},setSettings(s){try{localStorage.setItem(a,JSON.stringify(s))}catch{}r=s},now(){return qE()}},n&&n.on(VE,(s,i)=>{s===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(s,i)=>this.target?this.target.on[i]:(...u)=>{this.onQueue.push({method:i,args:u})}}),this.proxiedTarget=new Proxy({},{get:(s,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...u)=>(this.targetQueue.push({method:i,args:u,resolve:()=>{}}),this.fallbacks[i](...u)):(...u)=>new Promise(c=>{this.targetQueue.push({method:i,args:u,resolve:c})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function jE(e,t){const n=e,o=wy(),a=NE(),r=PE&&n.enableEarlyProxy;if(a&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))a.emit(ME,e,t);else{const s=r?new UE(n,a):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
  * vue-i18n v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const zE="9.10.2";function HE(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Ta().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Ta().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Ta().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Ta().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ta().__INTLIFY_PROD_DEVTOOLS__=!1)}const xy=gE.__EXTEND_POINT__,xa=op(xy);xa(),xa(),xa(),xa(),xa(),xa(),xa(),xa(),xa();const ky=Go.__EXTEND_POINT__,co=op(ky),Hn={UNEXPECTED_RETURN_TYPE:ky,INVALID_ARGUMENT:co(),MUST_BE_CALL_SETUP_TOP:co(),NOT_INSTALLED:co(),NOT_AVAILABLE_IN_LEGACY_MODE:co(),REQUIRED_VALUE:co(),INVALID_VALUE:co(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:co(),NOT_INSTALLED_WITH_PROVIDE:co(),UNEXPECTED_ERROR:co(),NOT_COMPATIBLE_LEGACY_VUE_I18N:co(),BRIDGE_SUPPORT_VUE_2_ONLY:co(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:co(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:co(),__EXTEND_POINT__:co()};function Zn(e,...t){return Kl(e,null,void 0)}const Zm=pr("__translateVNode"),Ym=pr("__datetimeParts"),Xm=pr("__numberParts"),$y=pr("__setPluralRules"),Cy=pr("__injectWithOption"),Qm=pr("__dispose");function Us(e){if(!an(e))return e;for(const t in e)if(Pu(e,t))if(!t.includes("."))an(e[t])&&Us(e[t]);else{const n=t.split("."),o=n.length-1;let a=e,r=!1;for(let s=0;s<o;s++){if(n[s]in a||(a[n[s]]={}),!an(a[n[s]])){r=!0;break}a=a[n[s]]}r||(a[n[o]]=e[t],delete e[t]),an(a[n[o]])&&Us(a[n[o]])}return e}function Cc(e,t){const{messages:n,__i18n:o,messageResolver:a,flatJson:r}=t,s=wt(n)?n:wn(o)?{}:{[e]:{}};if(wn(o)&&o.forEach(i=>{if("locale"in i&&"resource"in i){const{locale:u,resource:c}=i;u?(s[u]=s[u]||{},$u(c,s[u])):$u(c,s)}else nt(i)&&$u(JSON.parse(i),s)}),a==null&&r)for(const i in s)Pu(s,i)&&Us(s[i]);return s}function Sy(e){return e.type}function Ty(e,t,n){let o=an(t.messages)?t.messages:{};"__i18nGlobal"in n&&(o=Cc(e.locale.value,{messages:o,__i18n:n.__i18nGlobal}));const a=Object.keys(o);a.length&&a.forEach(r=>{e.mergeLocaleMessage(r,o[r])});{if(an(t.datetimeFormats)){const r=Object.keys(t.datetimeFormats);r.length&&r.forEach(s=>{e.mergeDateTimeFormat(s,t.datetimeFormats[s])})}if(an(t.numberFormats)){const r=Object.keys(t.numberFormats);r.length&&r.forEach(s=>{e.mergeNumberFormat(s,t.numberFormats[s])})}}}function Zh(e){return l(Gf,null,e,0)}const Yh="__INTLIFY_META__",Xh=()=>[],WE=()=>!1;let Qh=0;function Jh(e){return(t,n,o,a)=>e(n,o,va()||void 0,a)}const GE=()=>{const e=va();let t=null;return e&&(t=Sy(e)[Yh])?{[Yh]:t}:null};function sp(e={},t){const{__root:n,__injectWithOption:o}=e,a=n===void 0,r=e.flatJson,s=Nu?M:Pt,i=!!e.translateExistCompatible;let u=Mt(e.inheritLocale)?e.inheritLocale:!0;const c=s(n&&u?n.locale.value:nt(e.locale)?e.locale:Sl),m=s(n&&u?n.fallbackLocale.value:nt(e.fallbackLocale)||wn(e.fallbackLocale)||wt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:c.value),f=s(Cc(c.value,e)),v=s(wt(e.datetimeFormats)?e.datetimeFormats:{[c.value]:{}}),y=s(wt(e.numberFormats)?e.numberFormats:{[c.value]:{}});let b=n?n.missingWarn:Mt(e.missingWarn)||ur(e.missingWarn)?e.missingWarn:!0,w=n?n.fallbackWarn:Mt(e.fallbackWarn)||ur(e.fallbackWarn)?e.fallbackWarn:!0,k=n?n.fallbackRoot:Mt(e.fallbackRoot)?e.fallbackRoot:!0,x=!!e.fallbackFormat,I=gn(e.missing)?e.missing:null,C=gn(e.missing)?Jh(e.missing):null,S=gn(e.postTranslation)?e.postTranslation:null,T=n?n.warnHtmlMessage:Mt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,E=!!e.escapeParameter;const $=n?n.modifiers:wt(e.modifiers)?e.modifiers:{};let F=e.pluralRules||n&&n.pluralRules,R;R=(()=>{a&&Lh(null);const _e={version:zE,locale:c.value,fallbackLocale:m.value,messages:f.value,modifiers:$,pluralRules:F,missing:C===null?void 0:C,missingWarn:b,fallbackWarn:w,fallbackFormat:x,unresolving:!0,postTranslation:S===null?void 0:S,warnHtmlMessage:T,escapeParameter:E,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};_e.datetimeFormats=v.value,_e.numberFormats=y.value,_e.__datetimeFormatters=wt(R)?R.__datetimeFormatters:void 0,_e.__numberFormatters=wt(R)?R.__numberFormatters:void 0;const Te=TE(_e);return a&&Lh(Te),Te})(),ws(R,c.value,m.value);function V(){return[c.value,m.value,f.value,v.value,y.value]}const P=O({get:()=>c.value,set:_e=>{c.value=_e,R.locale=c.value}}),z=O({get:()=>m.value,set:_e=>{m.value=_e,R.fallbackLocale=m.value,ws(R,c.value,_e)}}),H=O(()=>f.value),j=O(()=>v.value),N=O(()=>y.value);function L(){return gn(S)?S:null}function U(_e){S=_e,R.postTranslation=_e}function ee(){return I}function G(_e){_e!==null&&(C=Jh(_e)),I=_e,R.missing=C}const W=(_e,Te,Xe,Me,ke,We)=>{V();let $t;try{__INTLIFY_PROD_DEVTOOLS__,a||(R.fallbackContext=n?SE():void 0),$t=_e(R)}finally{__INTLIFY_PROD_DEVTOOLS__,a||(R.fallbackContext=void 0)}if(Xe!=="translate exists"&&zn($t)&&$t===$c||Xe==="translate exists"&&!$t){const[Yt,Fe]=Te();return n&&k?Me(n):ke(Yt)}else{if(We($t))return $t;throw Zn(Hn.UNEXPECTED_RETURN_TYPE)}};function ae(..._e){return W(Te=>Reflect.apply(zh,null,[Te,..._e]),()=>Hm(..._e),"translate",Te=>Reflect.apply(Te.t,Te,[..._e]),Te=>Te,Te=>nt(Te))}function ue(..._e){const[Te,Xe,Me]=_e;if(Me&&!an(Me))throw Zn(Hn.INVALID_ARGUMENT);return ae(Te,Xe,Xn({resolvedMessage:!0},Me||{}))}function ce(..._e){return W(Te=>Reflect.apply(Hh,null,[Te,..._e]),()=>Wm(..._e),"datetime format",Te=>Reflect.apply(Te.d,Te,[..._e]),()=>Ph,Te=>nt(Te))}function oe(..._e){return W(Te=>Reflect.apply(Gh,null,[Te,..._e]),()=>Gm(..._e),"number format",Te=>Reflect.apply(Te.n,Te,[..._e]),()=>Ph,Te=>nt(Te))}function ie(_e){return _e.map(Te=>nt(Te)||zn(Te)||Mt(Te)?Zh(String(Te)):Te)}const se={normalize:ie,interpolate:_e=>_e,type:"vnode"};function me(..._e){return W(Te=>{let Xe;const Me=Te;try{Me.processor=se,Xe=Reflect.apply(zh,null,[Me,..._e])}finally{Me.processor=null}return Xe},()=>Hm(..._e),"translate",Te=>Te[Zm](..._e),Te=>[Zh(Te)],Te=>wn(Te))}function xe(..._e){return W(Te=>Reflect.apply(Gh,null,[Te,..._e]),()=>Gm(..._e),"number format",Te=>Te[Xm](..._e),Xh,Te=>nt(Te)||wn(Te))}function de(..._e){return W(Te=>Reflect.apply(Hh,null,[Te,..._e]),()=>Wm(..._e),"datetime format",Te=>Te[Ym](..._e),Xh,Te=>nt(Te)||wn(Te))}function he(_e){F=_e,R.pluralRules=F}function Y(_e,Te){return W(()=>{if(!_e)return!1;const Xe=nt(Te)?Te:c.value,Me=we(Xe),ke=R.messageResolver(Me,_e);return i?ke!=null:Tl(ke)||Oo(ke)||nt(ke)},()=>[_e],"translate exists",Xe=>Reflect.apply(Xe.te,Xe,[_e,Te]),WE,Xe=>Mt(Xe))}function X(_e){let Te=null;const Xe=cy(R,m.value,c.value);for(let Me=0;Me<Xe.length;Me++){const ke=f.value[Xe[Me]]||{},We=R.messageResolver(ke,_e);if(We!=null){Te=We;break}}return Te}function re(_e){const Te=X(_e);return Te??(n?n.tm(_e)||{}:{})}function we(_e){return f.value[_e]||{}}function Ce(_e,Te){if(r){const Xe={[_e]:Te};for(const Me in Xe)Pu(Xe,Me)&&Us(Xe[Me]);Te=Xe[_e]}f.value[_e]=Te,R.messages=f.value}function ge(_e,Te){f.value[_e]=f.value[_e]||{};const Xe={[_e]:Te};if(r)for(const Me in Xe)Pu(Xe,Me)&&Us(Xe[Me]);Te=Xe[_e],$u(Te,f.value[_e]),R.messages=f.value}function Re(_e){return v.value[_e]||{}}function et(_e,Te){v.value[_e]=Te,R.datetimeFormats=v.value,Wh(R,_e,Te)}function kt(_e,Te){v.value[_e]=Xn(v.value[_e]||{},Te),R.datetimeFormats=v.value,Wh(R,_e,Te)}function lt(_e){return y.value[_e]||{}}function ft(_e,Te){y.value[_e]=Te,R.numberFormats=y.value,Kh(R,_e,Te)}function zt(_e,Te){y.value[_e]=Xn(y.value[_e]||{},Te),R.numberFormats=y.value,Kh(R,_e,Te)}Qh++,n&&Nu&&($e(n.locale,_e=>{u&&(c.value=_e,R.locale=_e,ws(R,c.value,m.value))}),$e(n.fallbackLocale,_e=>{u&&(m.value=_e,R.fallbackLocale=_e,ws(R,c.value,m.value))}));const De={id:Qh,locale:P,fallbackLocale:z,get inheritLocale(){return u},set inheritLocale(_e){u=_e,_e&&n&&(c.value=n.locale.value,m.value=n.fallbackLocale.value,ws(R,c.value,m.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:H,get modifiers(){return $},get pluralRules(){return F||{}},get isGlobal(){return a},get missingWarn(){return b},set missingWarn(_e){b=_e,R.missingWarn=b},get fallbackWarn(){return w},set fallbackWarn(_e){w=_e,R.fallbackWarn=w},get fallbackRoot(){return k},set fallbackRoot(_e){k=_e},get fallbackFormat(){return x},set fallbackFormat(_e){x=_e,R.fallbackFormat=x},get warnHtmlMessage(){return T},set warnHtmlMessage(_e){T=_e,R.warnHtmlMessage=_e},get escapeParameter(){return E},set escapeParameter(_e){E=_e,R.escapeParameter=_e},t:ae,getLocaleMessage:we,setLocaleMessage:Ce,mergeLocaleMessage:ge,getPostTranslationHandler:L,setPostTranslationHandler:U,getMissingHandler:ee,setMissingHandler:G,[$y]:he};return De.datetimeFormats=j,De.numberFormats=N,De.rt=ue,De.te=Y,De.tm=re,De.d=ce,De.n=oe,De.getDateTimeFormat=Re,De.setDateTimeFormat=et,De.mergeDateTimeFormat=kt,De.getNumberFormat=lt,De.setNumberFormat=ft,De.mergeNumberFormat=zt,De[Cy]=o,De[Zm]=me,De[Ym]=de,De[Xm]=xe,De}function KE(e){const t=nt(e.locale)?e.locale:Sl,n=nt(e.fallbackLocale)||wn(e.fallbackLocale)||wt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,o=gn(e.missing)?e.missing:void 0,a=Mt(e.silentTranslationWarn)||ur(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,r=Mt(e.silentFallbackWarn)||ur(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,s=Mt(e.fallbackRoot)?e.fallbackRoot:!0,i=!!e.formatFallbackMessages,u=wt(e.modifiers)?e.modifiers:{},c=e.pluralizationRules,m=gn(e.postTranslation)?e.postTranslation:void 0,f=nt(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,v=!!e.escapeParameterHtml,y=Mt(e.sync)?e.sync:!0;let b=e.messages;if(wt(e.sharedMessages)){const E=e.sharedMessages;b=Object.keys(E).reduce((F,R)=>{const B=F[R]||(F[R]={});return Xn(B,E[R]),F},b||{})}const{__i18n:w,__root:k,__injectWithOption:x}=e,I=e.datetimeFormats,C=e.numberFormats,S=e.flatJson,T=e.translateExistCompatible;return{locale:t,fallbackLocale:n,messages:b,flatJson:S,datetimeFormats:I,numberFormats:C,missing:o,missingWarn:a,fallbackWarn:r,fallbackRoot:s,fallbackFormat:i,modifiers:u,pluralRules:c,postTranslation:m,warnHtmlMessage:f,escapeParameter:v,messageResolver:e.messageResolver,inheritLocale:y,translateExistCompatible:T,__i18n:w,__root:k,__injectWithOption:x}}function Jm(e={},t){{const n=sp(KE(e)),{__extender:o}=e,a={id:n.id,get locale(){return n.locale.value},set locale(r){n.locale.value=r},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(r){n.fallbackLocale.value=r},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(r){},get missing(){return n.getMissingHandler()},set missing(r){n.setMissingHandler(r)},get silentTranslationWarn(){return Mt(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(r){n.missingWarn=Mt(r)?!r:r},get silentFallbackWarn(){return Mt(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(r){n.fallbackWarn=Mt(r)?!r:r},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(r){n.fallbackFormat=r},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(r){n.setPostTranslationHandler(r)},get sync(){return n.inheritLocale},set sync(r){n.inheritLocale=r},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(r){n.warnHtmlMessage=r!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(r){n.escapeParameter=r},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(r){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...r){const[s,i,u]=r,c={};let m=null,f=null;if(!nt(s))throw Zn(Hn.INVALID_ARGUMENT);const v=s;return nt(i)?c.locale=i:wn(i)?m=i:wt(i)&&(f=i),wn(u)?m=u:wt(u)&&(f=u),Reflect.apply(n.t,n,[v,m||f||{},c])},rt(...r){return Reflect.apply(n.rt,n,[...r])},tc(...r){const[s,i,u]=r,c={plural:1};let m=null,f=null;if(!nt(s))throw Zn(Hn.INVALID_ARGUMENT);const v=s;return nt(i)?c.locale=i:zn(i)?c.plural=i:wn(i)?m=i:wt(i)&&(f=i),nt(u)?c.locale=u:wn(u)?m=u:wt(u)&&(f=u),Reflect.apply(n.t,n,[v,m||f||{},c])},te(r,s){return n.te(r,s)},tm(r){return n.tm(r)},getLocaleMessage(r){return n.getLocaleMessage(r)},setLocaleMessage(r,s){n.setLocaleMessage(r,s)},mergeLocaleMessage(r,s){n.mergeLocaleMessage(r,s)},d(...r){return Reflect.apply(n.d,n,[...r])},getDateTimeFormat(r){return n.getDateTimeFormat(r)},setDateTimeFormat(r,s){n.setDateTimeFormat(r,s)},mergeDateTimeFormat(r,s){n.mergeDateTimeFormat(r,s)},n(...r){return Reflect.apply(n.n,n,[...r])},getNumberFormat(r){return n.getNumberFormat(r)},setNumberFormat(r,s){n.setNumberFormat(r,s)},mergeNumberFormat(r,s){n.mergeNumberFormat(r,s)},getChoiceIndex(r,s){return-1}};return a.__extender=o,a}}const ip={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function ZE({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((o,a)=>[...o,...a.type===fe?a.children:[a]],[]):t.reduce((n,o)=>{const a=e[o];return a&&(n[o]=a()),n},{})}function Ey(e){return fe}const YE=Le({name:"i18n-t",props:Xn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>zn(e)||!isNaN(e)}},ip),setup(e,t){const{slots:n,attrs:o}=t,a=e.i18n||Ee({useScope:e.scope,__useComponent:!0});return()=>{const r=Object.keys(n).filter(f=>f!=="_"),s={};e.locale&&(s.locale=e.locale),e.plural!==void 0&&(s.plural=nt(e.plural)?+e.plural:e.plural);const i=ZE(t,r),u=a[Zm](e.keypath,i,s),c=Xn({},o),m=nt(e.tag)||an(e.tag)?e.tag:Ey();return Ae(m,c,u)}}}),e0=YE;function XE(e){return wn(e)&&!nt(e[0])}function Fy(e,t,n,o){const{slots:a,attrs:r}=t;return()=>{const s={part:!0};let i={};e.locale&&(s.locale=e.locale),nt(e.format)?s.key=e.format:an(e.format)&&(nt(e.format.key)&&(s.key=e.format.key),i=Object.keys(e.format).reduce((v,y)=>n.includes(y)?Xn({},v,{[y]:e.format[y]}):v,{}));const u=o(e.value,s,i);let c=[s.key];wn(u)?c=u.map((v,y)=>{const b=a[v.type],w=b?b({[v.type]:v.value,index:y,parts:u}):[v.value];return XE(w)&&(w[0].key=`${v.type}-${y}`),w}):nt(u)&&(c=[u]);const m=Xn({},r),f=nt(e.tag)||an(e.tag)?e.tag:Ey();return Ae(f,m,c)}}const QE=Le({name:"i18n-n",props:Xn({value:{type:Number,required:!0},format:{type:[String,Object]}},ip),setup(e,t){const n=e.i18n||Ee({useScope:"parent",__useComponent:!0});return Fy(e,t,Iy,(...o)=>n[Xm](...o))}}),t0=QE,JE=Le({name:"i18n-d",props:Xn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},ip),setup(e,t){const n=e.i18n||Ee({useScope:"parent",__useComponent:!0});return Fy(e,t,_y,(...o)=>n[Ym](...o))}}),n0=JE;function eF(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const o=n.__getInstance(t);return o!=null?o.__composer:e.global.__composer}}function tF(e){const t=s=>{const{instance:i,modifiers:u,value:c}=s;if(!i||!i.$)throw Zn(Hn.UNEXPECTED_ERROR);const m=eF(e,i.$),f=o0(c);return[Reflect.apply(m.t,m,[...a0(f)]),m]};return{created:(s,i)=>{const[u,c]=t(i);Nu&&e.global===c&&(s.__i18nWatcher=$e(c.locale,()=>{i.instance&&i.instance.$forceUpdate()})),s.__composer=c,s.textContent=u},unmounted:s=>{Nu&&s.__i18nWatcher&&(s.__i18nWatcher(),s.__i18nWatcher=void 0,delete s.__i18nWatcher),s.__composer&&(s.__composer=void 0,delete s.__composer)},beforeUpdate:(s,{value:i})=>{if(s.__composer){const u=s.__composer,c=o0(i);s.textContent=Reflect.apply(u.t,u,[...a0(c)])}},getSSRProps:s=>{const[i]=t(s);return{textContent:i}}}}function o0(e){if(nt(e))return{path:e};if(wt(e)){if(!("path"in e))throw Zn(Hn.REQUIRED_VALUE,"path");return e}else throw Zn(Hn.INVALID_VALUE)}function a0(e){const{path:t,locale:n,args:o,choice:a,plural:r}=e,s={},i=o||{};return nt(n)&&(s.locale=n),zn(a)&&(s.plural=a),zn(r)&&(s.plural=r),[t,i,s]}function nF(e,t,...n){const o=wt(n[0])?n[0]:{},a=!!o.useI18nComponentName;(Mt(o.globalInstall)?o.globalInstall:!0)&&([a?"i18n":e0.name,"I18nT"].forEach(s=>e.component(s,e0)),[t0.name,"I18nN"].forEach(s=>e.component(s,t0)),[n0.name,"I18nD"].forEach(s=>e.component(s,n0))),e.directive("t",tF(t))}function oF(e,t,n){return{beforeCreate(){const o=va();if(!o)throw Zn(Hn.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const r=a.i18n;if(a.__i18n&&(r.__i18n=a.__i18n),r.__root=t,this===this.$root)this.$i18n=r0(e,r);else{r.__injectWithOption=!0,r.__extender=n.__vueI18nExtend,this.$i18n=Jm(r);const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=r0(e,a);else{this.$i18n=Jm({__i18n:a.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&Ty(t,a,a),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$tc=(...r)=>this.$i18n.tc(...r),this.$te=(r,s)=>this.$i18n.te(r,s),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),n.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=va();if(!o)throw Zn(Hn.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),n.__deleteInstance(o),delete this.$i18n}}}function r0(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[$y](t.pluralizationRules||e.pluralizationRules);const n=Cc(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(o=>e.mergeLocaleMessage(o,n[o])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,t.datetimeFormats[o])),t.numberFormats&&Object.keys(t.numberFormats).forEach(o=>e.mergeNumberFormat(o,t.numberFormats[o])),e}const aF=pr("global-vue-i18n");function rF(e={},t){const n=__VUE_I18N_LEGACY_API__&&Mt(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=Mt(e.globalInjection)?e.globalInjection:!0,a=__VUE_I18N_LEGACY_API__&&n?!!e.allowComposition:!0,r=new Map,[s,i]=lF(e,n),u=pr("");function c(v){return r.get(v)||null}function m(v,y){r.set(v,y)}function f(v){r.delete(v)}{const v={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return a},async install(y,...b){if(y.__VUE_I18N_SYMBOL__=u,y.provide(y.__VUE_I18N_SYMBOL__,v),wt(b[0])){const x=b[0];v.__composerExtend=x.__composerExtend,v.__vueI18nExtend=x.__vueI18nExtend}let w=null;!n&&o&&(w=vF(y,v.global)),__VUE_I18N_FULL_INSTALL__&&nF(y,v,...b),__VUE_I18N_LEGACY_API__&&n&&y.mixin(oF(i,i.__composer,v));const k=y.unmount;y.unmount=()=>{w&&w(),v.dispose(),k()}},get global(){return i},dispose(){s.stop()},__instances:r,__getInstance:c,__setInstance:m,__deleteInstance:f};return v}}function Ee(e={}){const t=va();if(t==null)throw Zn(Hn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Zn(Hn.NOT_INSTALLED);const n=sF(t),o=uF(n),a=Sy(t),r=iF(e,a);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!e.__useComponent){if(!n.allowComposition)throw Zn(Hn.NOT_AVAILABLE_IN_LEGACY_MODE);return fF(t,r,o,e)}if(r==="global")return Ty(o,e,a),o;if(r==="parent"){let u=cF(n,t,e.__useComponent);return u==null&&(u=o),u}const s=n;let i=s.__getInstance(t);if(i==null){const u=Xn({},e);"__i18n"in a&&(u.__i18n=a.__i18n),o&&(u.__root=o),i=sp(u),s.__composerExtend&&(i[Qm]=s.__composerExtend(i)),mF(s,t,i),s.__setInstance(t,i)}return i}function lF(e,t,n){const o=fc();{const a=__VUE_I18N_LEGACY_API__&&t?o.run(()=>Jm(e)):o.run(()=>sp(e));if(a==null)throw Zn(Hn.UNEXPECTED_ERROR);return[o,a]}}function sF(e){{const t=Pe(e.isCE?aF:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Zn(e.isCE?Hn.NOT_INSTALLED_WITH_PROVIDE:Hn.UNEXPECTED_ERROR);return t}}function iF(e,t){return kc(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function uF(e){return e.mode==="composition"?e.global:e.global.__composer}function cF(e,t,n=!1){let o=null;const a=t.root;let r=dF(t,n);for(;r!=null;){const s=e;if(e.mode==="composition")o=s.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const i=s.__getInstance(r);i!=null&&(o=i.__composer,n&&o&&!o[Cy]&&(o=null))}if(o!=null||a===r)break;r=r.parent}return o}function dF(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function mF(e,t,n){Je(()=>{},t),rn(()=>{const o=n;e.__deleteInstance(t);const a=o[Qm];a&&(a(),delete o[Qm])},t)}function fF(e,t,n,o={}){const a=t==="local",r=Pt(null);if(a&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw Zn(Hn.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const s=Mt(o.inheritLocale)?o.inheritLocale:!nt(o.locale),i=M(!a||s?n.locale.value:nt(o.locale)?o.locale:Sl),u=M(!a||s?n.fallbackLocale.value:nt(o.fallbackLocale)||wn(o.fallbackLocale)||wt(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:i.value),c=M(Cc(i.value,o)),m=M(wt(o.datetimeFormats)?o.datetimeFormats:{[i.value]:{}}),f=M(wt(o.numberFormats)?o.numberFormats:{[i.value]:{}}),v=a?n.missingWarn:Mt(o.missingWarn)||ur(o.missingWarn)?o.missingWarn:!0,y=a?n.fallbackWarn:Mt(o.fallbackWarn)||ur(o.fallbackWarn)?o.fallbackWarn:!0,b=a?n.fallbackRoot:Mt(o.fallbackRoot)?o.fallbackRoot:!0,w=!!o.fallbackFormat,k=gn(o.missing)?o.missing:null,x=gn(o.postTranslation)?o.postTranslation:null,I=a?n.warnHtmlMessage:Mt(o.warnHtmlMessage)?o.warnHtmlMessage:!0,C=!!o.escapeParameter,S=a?n.modifiers:wt(o.modifiers)?o.modifiers:{},T=o.pluralRules||a&&n.pluralRules;function E(){return[i.value,u.value,c.value,m.value,f.value]}const $=O({get:()=>r.value?r.value.locale.value:i.value,set:X=>{r.value&&(r.value.locale.value=X),i.value=X}}),F=O({get:()=>r.value?r.value.fallbackLocale.value:u.value,set:X=>{r.value&&(r.value.fallbackLocale.value=X),u.value=X}}),R=O(()=>r.value?r.value.messages.value:c.value),B=O(()=>m.value),V=O(()=>f.value);function P(){return r.value?r.value.getPostTranslationHandler():x}function z(X){r.value&&r.value.setPostTranslationHandler(X)}function H(){return r.value?r.value.getMissingHandler():k}function j(X){r.value&&r.value.setMissingHandler(X)}function N(X){return E(),X()}function L(...X){return r.value?N(()=>Reflect.apply(r.value.t,null,[...X])):N(()=>"")}function U(...X){return r.value?Reflect.apply(r.value.rt,null,[...X]):""}function ee(...X){return r.value?N(()=>Reflect.apply(r.value.d,null,[...X])):N(()=>"")}function G(...X){return r.value?N(()=>Reflect.apply(r.value.n,null,[...X])):N(()=>"")}function W(X){return r.value?r.value.tm(X):{}}function ae(X,re){return r.value?r.value.te(X,re):!1}function ue(X){return r.value?r.value.getLocaleMessage(X):{}}function ce(X,re){r.value&&(r.value.setLocaleMessage(X,re),c.value[X]=re)}function oe(X,re){r.value&&r.value.mergeLocaleMessage(X,re)}function ie(X){return r.value?r.value.getDateTimeFormat(X):{}}function Q(X,re){r.value&&(r.value.setDateTimeFormat(X,re),m.value[X]=re)}function se(X,re){r.value&&r.value.mergeDateTimeFormat(X,re)}function me(X){return r.value?r.value.getNumberFormat(X):{}}function xe(X,re){r.value&&(r.value.setNumberFormat(X,re),f.value[X]=re)}function de(X,re){r.value&&r.value.mergeNumberFormat(X,re)}const he={get id(){return r.value?r.value.id:-1},locale:$,fallbackLocale:F,messages:R,datetimeFormats:B,numberFormats:V,get inheritLocale(){return r.value?r.value.inheritLocale:s},set inheritLocale(X){r.value&&(r.value.inheritLocale=X)},get availableLocales(){return r.value?r.value.availableLocales:Object.keys(c.value)},get modifiers(){return r.value?r.value.modifiers:S},get pluralRules(){return r.value?r.value.pluralRules:T},get isGlobal(){return r.value?r.value.isGlobal:!1},get missingWarn(){return r.value?r.value.missingWarn:v},set missingWarn(X){r.value&&(r.value.missingWarn=X)},get fallbackWarn(){return r.value?r.value.fallbackWarn:y},set fallbackWarn(X){r.value&&(r.value.missingWarn=X)},get fallbackRoot(){return r.value?r.value.fallbackRoot:b},set fallbackRoot(X){r.value&&(r.value.fallbackRoot=X)},get fallbackFormat(){return r.value?r.value.fallbackFormat:w},set fallbackFormat(X){r.value&&(r.value.fallbackFormat=X)},get warnHtmlMessage(){return r.value?r.value.warnHtmlMessage:I},set warnHtmlMessage(X){r.value&&(r.value.warnHtmlMessage=X)},get escapeParameter(){return r.value?r.value.escapeParameter:C},set escapeParameter(X){r.value&&(r.value.escapeParameter=X)},t:L,getPostTranslationHandler:P,setPostTranslationHandler:z,getMissingHandler:H,setMissingHandler:j,rt:U,d:ee,n:G,tm:W,te:ae,getLocaleMessage:ue,setLocaleMessage:ce,mergeLocaleMessage:oe,getDateTimeFormat:ie,setDateTimeFormat:Q,mergeDateTimeFormat:se,getNumberFormat:me,setNumberFormat:xe,mergeNumberFormat:de};function Y(X){X.locale.value=i.value,X.fallbackLocale.value=u.value,Object.keys(c.value).forEach(re=>{X.mergeLocaleMessage(re,c.value[re])}),Object.keys(m.value).forEach(re=>{X.mergeDateTimeFormat(re,m.value[re])}),Object.keys(f.value).forEach(re=>{X.mergeNumberFormat(re,f.value[re])}),X.escapeParameter=C,X.fallbackFormat=w,X.fallbackRoot=b,X.fallbackWarn=y,X.missingWarn=v,X.warnHtmlMessage=I}return Pa(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw Zn(Hn.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const X=r.value=e.proxy.$i18n.__composer;t==="global"?(i.value=X.locale.value,u.value=X.fallbackLocale.value,c.value=X.messages.value,m.value=X.datetimeFormats.value,f.value=X.numberFormats.value):a&&Y(X)}),he}const pF=["locale","fallbackLocale","availableLocales"],l0=["t","rt","d","n","tm","te"];function vF(e,t){const n=Object.create(null);return pF.forEach(a=>{const r=Object.getOwnPropertyDescriptor(t,a);if(!r)throw Zn(Hn.UNEXPECTED_ERROR);const s=$n(r.value)?{get(){return r.value.value},set(i){r.value.value=i}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,a,s)}),e.config.globalProperties.$i18n=n,l0.forEach(a=>{const r=Object.getOwnPropertyDescriptor(t,a);if(!r||!r.value)throw Zn(Hn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,r)}),()=>{delete e.config.globalProperties.$i18n,l0.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}HE();__INTLIFY_JIT_COMPILATION__?Vh(AE):Vh(FE);xE(iy);kE(cy);if(__INTLIFY_PROD_DEVTOOLS__){const e=Ta();e.__INTLIFY__=!0,fE(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}function Ay(e,t=2){if(e===0)return"0 B";const n=1024,o=t<0?0:t,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(o))+" "+a[r]}/*!
 * Get the contrasting color for any hex color
 * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
 * Derived from work by Brian Suda, https://24ways.org/2010/calculating-color-contrast/
 * @param  {String} A hexcolor value
 * @return {String} The contrasting color (black or white)
 */function jr(e){e.slice(0,1)==="#"&&(e=e.slice(1)),e.length===3&&(e=e.split("").map(function(r){return r+r}).join(""));var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),a=(t*299+n*587+o*114)/1e3;return a<=150?"white":"black"}function Sc(e="en"){if(typeof config<"u")return config.locale||config.fallback_locale||e;if(typeof window<"u"){const{userLanguage:t,language:n}=window.navigator;return(t||n).substr(0,2)}return e}const js="a-f\\d",hF=`#?[${js}]{3}[${js}]?`,gF=`#?[${js}]{6}([${js}]{2})?`,bF=new RegExp(`[^#${js}]`,"gi"),yF=new RegExp(`^${hF}$|^${gF}$`,"i");function _F(e,t={}){if(typeof e!="string"||bF.test(e)||!yF.test(e))throw new TypeError("Expected a valid hex string");e=e.replace(/^#/,"");let n=1;e.length===8&&(n=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),e.length===4&&(n=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const o=Number.parseInt(e,16),a=o>>16,r=o>>8&255,s=o&255,i=typeof t.alpha=="number"?t.alpha:n;if(t.format==="array")return[a,r,s,i];if(t.format==="css"){const u=i===1?"":` / ${Number((i*100).toFixed(2))}%`;return`rgb(${a} ${r} ${s}${u})`}return{red:a,green:r,blue:s,alpha:i}}function Mu(e){const[t,n,o]=_F(e,{format:"array"});return t+", "+n+", "+o}var IF=Object.prototype;function wF(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||IF;return e===n}var Tc=wF;function xF(e,t){return function(n){return e(t(n))}}var Ry=xF,kF=Ry,$F=kF(Object.keys,Object),CF=$F,SF=Tc,TF=CF,EF=Object.prototype,FF=EF.hasOwnProperty;function AF(e){if(!SF(e))return TF(e);var t=[];for(var n in Object(e))FF.call(e,n)&&n!="constructor"&&t.push(n);return t}var Dy=AF,RF=Wr,DF=na,OF=RF(DF,"DataView"),BF=OF,NF=Wr,PF=na,MF=NF(PF,"Promise"),VF=MF,LF=Wr,qF=na,UF=LF(qF,"Set"),Oy=UF,jF=Wr,zF=na,HF=jF(zF,"WeakMap"),WF=HF,ef=BF,tf=Jf,nf=VF,of=Oy,af=WF,By=fr,Zl=X1,s0="[object Map]",GF="[object Object]",i0="[object Promise]",u0="[object Set]",c0="[object WeakMap]",d0="[object DataView]",KF=Zl(ef),ZF=Zl(tf),YF=Zl(nf),XF=Zl(of),QF=Zl(af),Er=By;(ef&&Er(new ef(new ArrayBuffer(1)))!=d0||tf&&Er(new tf)!=s0||nf&&Er(nf.resolve())!=i0||of&&Er(new of)!=u0||af&&Er(new af)!=c0)&&(Er=function(e){var t=By(e),n=t==GF?e.constructor:void 0,o=n?Zl(n):"";if(o)switch(o){case KF:return d0;case ZF:return s0;case YF:return i0;case XF:return u0;case QF:return c0}return t});var mi=Er,JF=fr,e6=oa,t6="[object Arguments]";function n6(e){return e6(e)&&JF(e)==t6}var o6=n6,m0=o6,a6=oa,Ny=Object.prototype,r6=Ny.hasOwnProperty,l6=Ny.propertyIsEnumerable,s6=m0(function(){return arguments}())?m0:function(e){return a6(e)&&r6.call(e,"callee")&&!l6.call(e,"callee")},fi=s6,i6=9007199254740991;function u6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=i6}var up=u6,c6=hc,d6=up;function m6(e){return e!=null&&d6(e.length)&&!c6(e)}var hr=m6,Vu={exports:{}};function f6(){return!1}var p6=f6;Vu.exports;(function(e,t){var n=na,o=p6,a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===a,i=s?n.Buffer:void 0,u=i?i.isBuffer:void 0,c=u||o;e.exports=c})(Vu,Vu.exports);var pi=Vu.exports,v6=fr,h6=up,g6=oa,b6="[object Arguments]",y6="[object Array]",_6="[object Boolean]",I6="[object Date]",w6="[object Error]",x6="[object Function]",k6="[object Map]",$6="[object Number]",C6="[object Object]",S6="[object RegExp]",T6="[object Set]",E6="[object String]",F6="[object WeakMap]",A6="[object ArrayBuffer]",R6="[object DataView]",D6="[object Float32Array]",O6="[object Float64Array]",B6="[object Int8Array]",N6="[object Int16Array]",P6="[object Int32Array]",M6="[object Uint8Array]",V6="[object Uint8ClampedArray]",L6="[object Uint16Array]",q6="[object Uint32Array]",In={};In[D6]=In[O6]=In[B6]=In[N6]=In[P6]=In[M6]=In[V6]=In[L6]=In[q6]=!0;In[b6]=In[y6]=In[A6]=In[_6]=In[R6]=In[I6]=In[w6]=In[x6]=In[k6]=In[$6]=In[C6]=In[S6]=In[T6]=In[E6]=In[F6]=!1;function U6(e){return g6(e)&&h6(e.length)&&!!In[v6(e)]}var j6=U6;function z6(e){return function(t){return e(t)}}var vi=z6,Lu={exports:{}};Lu.exports;(function(e,t){var n=Z1,o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,r=a&&a.exports===o,s=r&&n.process,i=function(){try{var u=a&&a.require&&a.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();e.exports=i})(Lu,Lu.exports);var cp=Lu.exports,H6=j6,W6=vi,f0=cp,p0=f0&&f0.isTypedArray,G6=p0?W6(p0):H6,Ec=G6,K6=Dy,Z6=mi,Y6=fi,X6=Fn,Q6=hr,J6=pi,eA=Tc,tA=Ec,nA="[object Map]",oA="[object Set]",aA=Object.prototype,rA=aA.hasOwnProperty;function lA(e){if(e==null)return!0;if(Q6(e)&&(X6(e)||typeof e=="string"||typeof e.splice=="function"||J6(e)||tA(e)||Y6(e)))return!e.length;var t=Z6(e);if(t==nA||t==oA)return!e.size;if(eA(e))return!K6(e).length;for(var n in e)if(rA.call(e,n))return!1;return!0}var sA=lA;const iA=Bt(sA);var uA=fr,cA=oa,dA="[object Number]";function mA(e){return typeof e=="number"||cA(e)&&uA(e)==dA}var Py=mA;const fA=Bt(Py);var pA=Py;function vA(e){return pA(e)&&e!=+e}var hA=vA;const gA=Bt(hA);function Gt(e){return iA(e)&&typeof e!="boolean"&&!fA(e)||gA(e)}function bA(e){return new RegExp("[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}","i").test(e)}function yA(e){return e.offsetWidth+e.offsetHeight>0}function _A(e,t){let n=!1;e[0]=="#"&&(e=e.slice(1),n=!0);let o=parseInt(e,16),a=(o>>16)+t;a>255?a=255:a<0&&(a=0);let r=(o>>8&255)+t;r>255?r=255:r<0&&(r=0);let s=(o&255)+t;return s>255?s=255:s<0&&(s=0),(n?"#":"")+(s|r<<8|a<<16).toString(16)}function v0(){if(Object.hasOwn(window,"__passiveEvt"))return window.__passiveEvt;let e=!1;try{const t=Object.defineProperty({},"passive",{get(){return e={passive:!0},!0}});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch{}return window.__passiveEvt=e,e}function $o(e=15){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function IA(e,t,n="..."){return e.substring(0,t)+n}var dp={};(function e(t,n,o,a){var r=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),s=typeof Path2D=="function"&&typeof DOMMatrix=="function",i=function(){if(!t.OffscreenCanvas)return!1;var G=new OffscreenCanvas(1,1),W=G.getContext("2d");W.fillRect(0,0,1,1);var ae=G.transferToImageBitmap();try{W.createPattern(ae,"no-repeat")}catch{return!1}return!0}();function u(){}function c(G){var W=n.exports.Promise,ae=W!==void 0?W:t.Promise;return typeof ae=="function"?new ae(G):(G(u,u),null)}var m=function(G,W){return{transform:function(ae){if(G)return ae;if(W.has(ae))return W.get(ae);var ue=new OffscreenCanvas(ae.width,ae.height),ce=ue.getContext("2d");return ce.drawImage(ae,0,0),W.set(ae,ue),ue},clear:function(){W.clear()}}}(i,new Map),f=function(){var G=Math.floor(16.666666666666668),W,ae,ue={},ce=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(W=function(oe){var ie=Math.random();return ue[ie]=requestAnimationFrame(function Q(se){ce===se||ce+G-1<se?(ce=se,delete ue[ie],oe()):ue[ie]=requestAnimationFrame(Q)}),ie},ae=function(oe){ue[oe]&&cancelAnimationFrame(ue[oe])}):(W=function(oe){return setTimeout(oe,G)},ae=function(oe){return clearTimeout(oe)}),{frame:W,cancel:ae}}(),v=function(){var G,W,ae={};function ue(ce){function oe(ie,Q){ce.postMessage({options:ie||{},callback:Q})}ce.init=function(Q){var se=Q.transferControlToOffscreen();ce.postMessage({canvas:se},[se])},ce.fire=function(Q,se,me){if(W)return oe(Q,null),W;var xe=Math.random().toString(36).slice(2);return W=c(function(de){function he(Y){Y.data.callback===xe&&(delete ae[xe],ce.removeEventListener("message",he),W=null,m.clear(),me(),de())}ce.addEventListener("message",he),oe(Q,xe),ae[xe]=he.bind(null,{data:{callback:xe}})}),W},ce.reset=function(){ce.postMessage({reset:!0});for(var Q in ae)ae[Q](),delete ae[Q]}}return function(){if(G)return G;if(!o&&r){var ce=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{G=new Worker(URL.createObjectURL(new Blob([ce])))}catch(oe){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",oe),null}ue(G)}return G}}(),y={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(G,W){return W?W(G):G}function w(G){return G!=null}function k(G,W,ae){return b(G&&w(G[W])?G[W]:y[W],ae)}function x(G){return G<0?0:Math.floor(G)}function I(G,W){return Math.floor(Math.random()*(W-G))+G}function C(G){return parseInt(G,16)}function S(G){return G.map(T)}function T(G){var W=String(G).replace(/[^0-9a-f]/gi,"");return W.length<6&&(W=W[0]+W[0]+W[1]+W[1]+W[2]+W[2]),{r:C(W.substring(0,2)),g:C(W.substring(2,4)),b:C(W.substring(4,6))}}function E(G){var W=k(G,"origin",Object);return W.x=k(W,"x",Number),W.y=k(W,"y",Number),W}function $(G){G.width=document.documentElement.clientWidth,G.height=document.documentElement.clientHeight}function F(G){var W=G.getBoundingClientRect();G.width=W.width,G.height=W.height}function R(G){var W=document.createElement("canvas");return W.style.position="fixed",W.style.top="0px",W.style.left="0px",W.style.pointerEvents="none",W.style.zIndex=G,W}function B(G,W,ae,ue,ce,oe,ie,Q,se){G.save(),G.translate(W,ae),G.rotate(oe),G.scale(ue,ce),G.arc(0,0,1,ie,Q,se),G.restore()}function V(G){var W=G.angle*(Math.PI/180),ae=G.spread*(Math.PI/180);return{x:G.x,y:G.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:G.startVelocity*.5+Math.random()*G.startVelocity,angle2D:-W+(.5*ae-Math.random()*ae),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:G.color,shape:G.shape,tick:0,totalTicks:G.ticks,decay:G.decay,drift:G.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:G.gravity*3,ovalScalar:.6,scalar:G.scalar,flat:G.flat}}function P(G,W){W.x+=Math.cos(W.angle2D)*W.velocity+W.drift,W.y+=Math.sin(W.angle2D)*W.velocity+W.gravity,W.velocity*=W.decay,W.flat?(W.wobble=0,W.wobbleX=W.x+10*W.scalar,W.wobbleY=W.y+10*W.scalar,W.tiltSin=0,W.tiltCos=0,W.random=1):(W.wobble+=W.wobbleSpeed,W.wobbleX=W.x+10*W.scalar*Math.cos(W.wobble),W.wobbleY=W.y+10*W.scalar*Math.sin(W.wobble),W.tiltAngle+=.1,W.tiltSin=Math.sin(W.tiltAngle),W.tiltCos=Math.cos(W.tiltAngle),W.random=Math.random()+2);var ae=W.tick++/W.totalTicks,ue=W.x+W.random*W.tiltCos,ce=W.y+W.random*W.tiltSin,oe=W.wobbleX+W.random*W.tiltCos,ie=W.wobbleY+W.random*W.tiltSin;if(G.fillStyle="rgba("+W.color.r+", "+W.color.g+", "+W.color.b+", "+(1-ae)+")",G.beginPath(),s&&W.shape.type==="path"&&typeof W.shape.path=="string"&&Array.isArray(W.shape.matrix))G.fill(L(W.shape.path,W.shape.matrix,W.x,W.y,Math.abs(oe-ue)*.1,Math.abs(ie-ce)*.1,Math.PI/10*W.wobble));else if(W.shape.type==="bitmap"){var Q=Math.PI/10*W.wobble,se=Math.abs(oe-ue)*.1,me=Math.abs(ie-ce)*.1,xe=W.shape.bitmap.width*W.scalar,de=W.shape.bitmap.height*W.scalar,he=new DOMMatrix([Math.cos(Q)*se,Math.sin(Q)*se,-Math.sin(Q)*me,Math.cos(Q)*me,W.x,W.y]);he.multiplySelf(new DOMMatrix(W.shape.matrix));var Y=G.createPattern(m.transform(W.shape.bitmap),"no-repeat");Y.setTransform(he),G.globalAlpha=1-ae,G.fillStyle=Y,G.fillRect(W.x-xe/2,W.y-de/2,xe,de),G.globalAlpha=1}else if(W.shape==="circle")G.ellipse?G.ellipse(W.x,W.y,Math.abs(oe-ue)*W.ovalScalar,Math.abs(ie-ce)*W.ovalScalar,Math.PI/10*W.wobble,0,2*Math.PI):B(G,W.x,W.y,Math.abs(oe-ue)*W.ovalScalar,Math.abs(ie-ce)*W.ovalScalar,Math.PI/10*W.wobble,0,2*Math.PI);else if(W.shape==="star")for(var X=Math.PI/2*3,re=4*W.scalar,we=8*W.scalar,Ce=W.x,ge=W.y,Re=5,et=Math.PI/Re;Re--;)Ce=W.x+Math.cos(X)*we,ge=W.y+Math.sin(X)*we,G.lineTo(Ce,ge),X+=et,Ce=W.x+Math.cos(X)*re,ge=W.y+Math.sin(X)*re,G.lineTo(Ce,ge),X+=et;else G.moveTo(Math.floor(W.x),Math.floor(W.y)),G.lineTo(Math.floor(W.wobbleX),Math.floor(ce)),G.lineTo(Math.floor(oe),Math.floor(ie)),G.lineTo(Math.floor(ue),Math.floor(W.wobbleY));return G.closePath(),G.fill(),W.tick<W.totalTicks}function z(G,W,ae,ue,ce){var oe=W.slice(),ie=G.getContext("2d"),Q,se,me=c(function(xe){function de(){Q=se=null,ie.clearRect(0,0,ue.width,ue.height),m.clear(),ce(),xe()}function he(){o&&!(ue.width===a.width&&ue.height===a.height)&&(ue.width=G.width=a.width,ue.height=G.height=a.height),!ue.width&&!ue.height&&(ae(G),ue.width=G.width,ue.height=G.height),ie.clearRect(0,0,ue.width,ue.height),oe=oe.filter(function(Y){return P(ie,Y)}),oe.length?Q=f.frame(he):de()}Q=f.frame(he),se=de});return{addFettis:function(xe){return oe=oe.concat(xe),me},canvas:G,promise:me,reset:function(){Q&&f.cancel(Q),se&&se()}}}function H(G,W){var ae=!G,ue=!!k(W||{},"resize"),ce=!1,oe=k(W,"disableForReducedMotion",Boolean),ie=r&&!!k(W||{},"useWorker"),Q=ie?v():null,se=ae?$:F,me=G&&Q?!!G.__confetti_initialized:!1,xe=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,de;function he(X,re,we){for(var Ce=k(X,"particleCount",x),ge=k(X,"angle",Number),Re=k(X,"spread",Number),et=k(X,"startVelocity",Number),kt=k(X,"decay",Number),lt=k(X,"gravity",Number),ft=k(X,"drift",Number),zt=k(X,"colors",S),De=k(X,"ticks",Number),_e=k(X,"shapes"),Te=k(X,"scalar"),Xe=!!k(X,"flat"),Me=E(X),ke=Ce,We=[],$t=G.width*Me.x,Yt=G.height*Me.y;ke--;)We.push(V({x:$t,y:Yt,angle:ge,spread:Re,startVelocity:et,color:zt[ke%zt.length],shape:_e[I(0,_e.length)],ticks:De,decay:kt,gravity:lt,drift:ft,scalar:Te,flat:Xe}));return de?de.addFettis(We):(de=z(G,We,se,re,we),de.promise)}function Y(X){var re=oe||k(X,"disableForReducedMotion",Boolean),we=k(X,"zIndex",Number);if(re&&xe)return c(function(et){et()});ae&&de?G=de.canvas:ae&&!G&&(G=R(we),document.body.appendChild(G)),ue&&!me&&se(G);var Ce={width:G.width,height:G.height};Q&&!me&&Q.init(G),me=!0,Q&&(G.__confetti_initialized=!0);function ge(){if(Q){var et={getBoundingClientRect:function(){if(!ae)return G.getBoundingClientRect()}};se(et),Q.postMessage({resize:{width:et.width,height:et.height}});return}Ce.width=Ce.height=null}function Re(){de=null,ue&&(ce=!1,t.removeEventListener("resize",ge)),ae&&G&&(document.body.removeChild(G),G=null,me=!1)}return ue&&!ce&&(ce=!0,t.addEventListener("resize",ge,!1)),Q?Q.fire(X,Ce,Re):he(X,Ce,Re)}return Y.reset=function(){Q&&Q.reset(),de&&de.reset()},Y}var j;function N(){return j||(j=H(null,{useWorker:!0,resize:!0})),j}function L(G,W,ae,ue,ce,oe,ie){var Q=new Path2D(G),se=new Path2D;se.addPath(Q,new DOMMatrix(W));var me=new Path2D;return me.addPath(se,new DOMMatrix([Math.cos(ie)*ce,Math.sin(ie)*ce,-Math.sin(ie)*oe,Math.cos(ie)*oe,ae,ue])),me}function U(G){if(!s)throw new Error("path confetti are not supported in this browser");var W,ae;typeof G=="string"?W=G:(W=G.path,ae=G.matrix);var ue=new Path2D(W),ce=document.createElement("canvas"),oe=ce.getContext("2d");if(!ae){for(var ie=1e3,Q=ie,se=ie,me=0,xe=0,de,he,Y=0;Y<ie;Y+=2)for(var X=0;X<ie;X+=2)oe.isPointInPath(ue,Y,X,"nonzero")&&(Q=Math.min(Q,Y),se=Math.min(se,X),me=Math.max(me,Y),xe=Math.max(xe,X));de=me-Q,he=xe-se;var re=10,we=Math.min(re/de,re/he);ae=[we,0,0,we,-Math.round(de/2+Q)*we,-Math.round(he/2+se)*we]}return{type:"path",path:W,matrix:ae}}function ee(G){var W,ae=1,ue="#000000",ce='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof G=="string"?W=G:(W=G.text,ae="scalar"in G?G.scalar:ae,ce="fontFamily"in G?G.fontFamily:ce,ue="color"in G?G.color:ue);var oe=10*ae,ie=""+oe+"px "+ce,Q=new OffscreenCanvas(oe,oe),se=Q.getContext("2d");se.font=ie;var me=se.measureText(W),xe=Math.ceil(me.actualBoundingBoxRight+me.actualBoundingBoxLeft),de=Math.ceil(me.actualBoundingBoxAscent+me.actualBoundingBoxDescent),he=2,Y=me.actualBoundingBoxLeft+he,X=me.actualBoundingBoxAscent+he;xe+=he+he,de+=he+he,Q=new OffscreenCanvas(xe,de),se=Q.getContext("2d"),se.font=ie,se.fillStyle=ue,se.fillText(W,Y,X);var re=1/ae;return{type:"bitmap",bitmap:Q.transferToImageBitmap(),matrix:[re,0,0,re,-xe*re/2,-de*re/2]}}n.exports=function(){return N().apply(this,arguments)},n.exports.reset=function(){N().reset()},n.exports.create=H,n.exports.shapeFromPath=U,n.exports.shapeFromText=ee})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),dp,!1);const wA=dp.exports;dp.exports.create;function mp(){var e=document.createElement("canvas");e.classList.add("absolute","bottom-0","w-full","h-full","confetti"),document.body.appendChild(e);var t=wA.create(e,{resize:!0});t({particleCount:300,spread:300,ticks:150,origin:{x:1}}).then(()=>{const n=e.cloneNode(!0);e.replaceWith(n),e.remove(),n.remove()})}class Gr extends Error{}class xA extends Gr{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class kA extends Gr{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class $A extends Gr{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class vl extends Gr{}class My extends Gr{constructor(t){super(`Invalid unit ${t}`)}}class mo extends Gr{}class Ka extends Gr{constructor(){super("Zone is an abstract class")}}const tt="numeric",Xo="short",xo="long",qu={year:tt,month:tt,day:tt},Vy={year:tt,month:Xo,day:tt},CA={year:tt,month:Xo,day:tt,weekday:Xo},Ly={year:tt,month:xo,day:tt},qy={year:tt,month:xo,day:tt,weekday:xo},Uy={hour:tt,minute:tt},jy={hour:tt,minute:tt,second:tt},zy={hour:tt,minute:tt,second:tt,timeZoneName:Xo},Hy={hour:tt,minute:tt,second:tt,timeZoneName:xo},Wy={hour:tt,minute:tt,hourCycle:"h23"},Gy={hour:tt,minute:tt,second:tt,hourCycle:"h23"},Ky={hour:tt,minute:tt,second:tt,hourCycle:"h23",timeZoneName:Xo},Zy={hour:tt,minute:tt,second:tt,hourCycle:"h23",timeZoneName:xo},Yy={year:tt,month:tt,day:tt,hour:tt,minute:tt},Xy={year:tt,month:tt,day:tt,hour:tt,minute:tt,second:tt},Qy={year:tt,month:Xo,day:tt,hour:tt,minute:tt},Jy={year:tt,month:Xo,day:tt,hour:tt,minute:tt,second:tt},SA={year:tt,month:Xo,day:tt,weekday:Xo,hour:tt,minute:tt},e_={year:tt,month:xo,day:tt,hour:tt,minute:tt,timeZoneName:Xo},t_={year:tt,month:xo,day:tt,hour:tt,minute:tt,second:tt,timeZoneName:Xo},n_={year:tt,month:xo,day:tt,weekday:xo,hour:tt,minute:tt,timeZoneName:xo},o_={year:tt,month:xo,day:tt,weekday:xo,hour:tt,minute:tt,second:tt,timeZoneName:xo};class hi{get type(){throw new Ka}get name(){throw new Ka}get ianaName(){return this.name}get isUniversal(){throw new Ka}offsetName(t,n){throw new Ka}formatOffset(t,n){throw new Ka}offset(t){throw new Ka}equals(t){throw new Ka}get isValid(){throw new Ka}}let zd=null;class Fc extends hi{static get instance(){return zd===null&&(zd=new Fc),zd}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:o}){return m_(t,n,o)}formatOffset(t,n){return Ns(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Cu={};function TA(e){return Cu[e]||(Cu[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Cu[e]}const EA={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function FA(e,t){const n=e.format(t).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,a,r,s,i,u,c,m]=o;return[s,a,r,i,u,c,m]}function AA(e,t){const n=e.formatToParts(t),o=[];for(let a=0;a<n.length;a++){const{type:r,value:s}=n[a],i=EA[r];r==="era"?o[i]=s:Ct(i)||(o[i]=parseInt(s,10))}return o}let nu={};class Ra extends hi{static create(t){return nu[t]||(nu[t]=new Ra(t)),nu[t]}static resetCache(){nu={},Cu={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ra.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:o}){return m_(t,n,o,this.name)}formatOffset(t,n){return Ns(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const o=TA(this.name);let[a,r,s,i,u,c,m]=o.formatToParts?AA(o,n):FA(o,n);i==="BC"&&(a=-Math.abs(a)+1);const v=Rc({year:a,month:r,day:s,hour:u===24?0:u,minute:c,second:m,millisecond:0});let y=+n;const b=y%1e3;return y-=b>=0?b:1e3+b,(v-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let h0={};function RA(e,t={}){const n=JSON.stringify([e,t]);let o=h0[n];return o||(o=new Intl.ListFormat(e,t),h0[n]=o),o}let rf={};function lf(e,t={}){const n=JSON.stringify([e,t]);let o=rf[n];return o||(o=new Intl.DateTimeFormat(e,t),rf[n]=o),o}let sf={};function DA(e,t={}){const n=JSON.stringify([e,t]);let o=sf[n];return o||(o=new Intl.NumberFormat(e,t),sf[n]=o),o}let uf={};function OA(e,t={}){const{base:n,...o}=t,a=JSON.stringify([e,o]);let r=uf[a];return r||(r=new Intl.RelativeTimeFormat(e,t),uf[a]=r),r}let Os=null;function BA(){return Os||(Os=new Intl.DateTimeFormat().resolvedOptions().locale,Os)}let g0={};function NA(e){let t=g0[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,g0[e]=t}return t}function PA(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let o,a;try{o=lf(e).resolvedOptions(),a=e}catch{const u=e.substring(0,n);o=lf(u).resolvedOptions(),a=u}const{numberingSystem:r,calendar:s}=o;return[a,r,s]}}function MA(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function VA(e){const t=[];for(let n=1;n<=12;n++){const o=dt.utc(2009,n,1);t.push(e(o))}return t}function LA(e){const t=[];for(let n=1;n<=7;n++){const o=dt.utc(2016,11,13+n);t.push(e(o))}return t}function ou(e,t,n,o){const a=e.listingMode();return a==="error"?null:a==="en"?n(t):o(t)}function qA(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class UA{constructor(t,n,o){this.padTo=o.padTo||0,this.floor=o.floor||!1;const{padTo:a,floor:r,...s}=o;if(!n||Object.keys(s).length>0){const i={useGrouping:!1,...o};o.padTo>0&&(i.minimumIntegerDigits=o.padTo),this.inf=DA(t,i)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):hp(t,3);return Mn(n,this.padTo)}}}class jA{constructor(t,n,o){this.opts=o,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const s=-1*(t.offset/60),i=s>=0?`Etc/GMT+${s}`:`Etc/GMT${s}`;t.offset!==0&&Ra.create(i).valid?(a=i,this.dt=t):(a="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,a=t.zone.name):(a="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||a,this.dtf=lf(n,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const o=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:o}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class zA{constructor(t,n,o){this.opts={style:"long",...o},!n&&c_()&&(this.rtf=OA(t,o))}format(t,n){return this.rtf?this.rtf.format(t,n):cR(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}const HA={firstDay:1,minimalDays:4,weekend:[6,7]};class mn{static fromOpts(t){return mn.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,n,o,a,r=!1){const s=t||kn.defaultLocale,i=s||(r?"en-US":BA()),u=n||kn.defaultNumberingSystem,c=o||kn.defaultOutputCalendar,m=cf(a)||kn.defaultWeekSettings;return new mn(i,u,c,m,s)}static resetCache(){Os=null,rf={},sf={},uf={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:o,weekSettings:a}={}){return mn.create(t,n,o,a)}constructor(t,n,o,a,r){const[s,i,u]=PA(t);this.locale=s,this.numberingSystem=n||i||null,this.outputCalendar=o||u||null,this.weekSettings=a,this.intl=MA(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=qA(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:mn.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,cf(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return ou(this,t,v_,()=>{const o=n?{month:t,day:"numeric"}:{month:t},a=n?"format":"standalone";return this.monthsCache[a][t]||(this.monthsCache[a][t]=VA(r=>this.extract(r,o,"month"))),this.monthsCache[a][t]})}weekdays(t,n=!1){return ou(this,t,b_,()=>{const o=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},a=n?"format":"standalone";return this.weekdaysCache[a][t]||(this.weekdaysCache[a][t]=LA(r=>this.extract(r,o,"weekday"))),this.weekdaysCache[a][t]})}meridiems(){return ou(this,void 0,()=>y_,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dt.utc(2016,11,13,9),dt.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ou(this,t,__,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[dt.utc(-40,1,1),dt.utc(2017,1,1)].map(o=>this.extract(o,n,"era"))),this.eraCache[t]})}extract(t,n,o){const a=this.dtFormatter(t,n),r=a.formatToParts(),s=r.find(i=>i.type.toLowerCase()===o);return s?s.value:null}numberFormatter(t={}){return new UA(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new jA(t,this.intl,n)}relFormatter(t={}){return new zA(this.intl,this.isEnglish(),t)}listFormatter(t={}){return RA(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:d_()?NA(this.locale):HA}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Hd=null;class so extends hi{static get utcInstance(){return Hd===null&&(Hd=new so(0)),Hd}static instance(t){return t===0?so.utcInstance:new so(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new so(Dc(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ns(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ns(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return Ns(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class WA extends hi{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function or(e,t){if(Ct(e)||e===null)return t;if(e instanceof hi)return e;if(ZA(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?Fc.instance:n==="utc"||n==="gmt"?so.utcInstance:so.parseSpecifier(n)||Ra.create(e)}else return Mr(e)?so.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new WA(e)}let b0=()=>Date.now(),y0="system",_0=null,I0=null,w0=null,x0=60,k0,$0=null;class kn{static get now(){return b0}static set now(t){b0=t}static set defaultZone(t){y0=t}static get defaultZone(){return or(y0,Fc.instance)}static get defaultLocale(){return _0}static set defaultLocale(t){_0=t}static get defaultNumberingSystem(){return I0}static set defaultNumberingSystem(t){I0=t}static get defaultOutputCalendar(){return w0}static set defaultOutputCalendar(t){w0=t}static get defaultWeekSettings(){return $0}static set defaultWeekSettings(t){$0=cf(t)}static get twoDigitCutoffYear(){return x0}static set twoDigitCutoffYear(t){x0=t%100}static get throwOnInvalid(){return k0}static set throwOnInvalid(t){k0=t}static resetCaches(){mn.resetCache(),Ra.resetCache()}}class Ko{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const a_=[0,31,59,90,120,151,181,212,243,273,304,334],r_=[0,31,60,91,121,152,182,213,244,274,305,335];function Bo(e,t){return new Ko("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function fp(e,t,n){const o=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const a=o.getUTCDay();return a===0?7:a}function l_(e,t,n){return n+(gi(e)?r_:a_)[t-1]}function s_(e,t){const n=gi(e)?r_:a_,o=n.findIndex(r=>r<t),a=t-n[o];return{month:o+1,day:a}}function pp(e,t){return(e-t+7)%7+1}function Uu(e,t=4,n=1){const{year:o,month:a,day:r}=e,s=l_(o,a,r),i=pp(fp(o,a,r),n);let u=Math.floor((s-i+14-t)/7),c;return u<1?(c=o-1,u=zs(c,t,n)):u>zs(o,t,n)?(c=o+1,u=1):c=o,{weekYear:c,weekNumber:u,weekday:i,...Oc(e)}}function C0(e,t=4,n=1){const{weekYear:o,weekNumber:a,weekday:r}=e,s=pp(fp(o,1,t),n),i=bl(o);let u=a*7+r-s-7+t,c;u<1?(c=o-1,u+=bl(c)):u>i?(c=o+1,u-=bl(o)):c=o;const{month:m,day:f}=s_(c,u);return{year:c,month:m,day:f,...Oc(e)}}function Wd(e){const{year:t,month:n,day:o}=e,a=l_(t,n,o);return{year:t,ordinal:a,...Oc(e)}}function S0(e){const{year:t,ordinal:n}=e,{month:o,day:a}=s_(t,n);return{year:t,month:o,day:a,...Oc(e)}}function T0(e,t){if(!Ct(e.localWeekday)||!Ct(e.localWeekNumber)||!Ct(e.localWeekYear)){if(!Ct(e.weekday)||!Ct(e.weekNumber)||!Ct(e.weekYear))throw new vl("Cannot mix locale-based week fields with ISO-based week fields");return Ct(e.localWeekday)||(e.weekday=e.localWeekday),Ct(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ct(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function GA(e,t=4,n=1){const o=Ac(e.weekYear),a=No(e.weekNumber,1,zs(e.weekYear,t,n)),r=No(e.weekday,1,7);return o?a?r?!1:Bo("weekday",e.weekday):Bo("week",e.weekNumber):Bo("weekYear",e.weekYear)}function KA(e){const t=Ac(e.year),n=No(e.ordinal,1,bl(e.year));return t?n?!1:Bo("ordinal",e.ordinal):Bo("year",e.year)}function i_(e){const t=Ac(e.year),n=No(e.month,1,12),o=No(e.day,1,ju(e.year,e.month));return t?n?o?!1:Bo("day",e.day):Bo("month",e.month):Bo("year",e.year)}function u_(e){const{hour:t,minute:n,second:o,millisecond:a}=e,r=No(t,0,23)||t===24&&n===0&&o===0&&a===0,s=No(n,0,59),i=No(o,0,59),u=No(a,0,999);return r?s?i?u?!1:Bo("millisecond",a):Bo("second",o):Bo("minute",n):Bo("hour",t)}function Ct(e){return typeof e>"u"}function Mr(e){return typeof e=="number"}function Ac(e){return typeof e=="number"&&e%1===0}function ZA(e){return typeof e=="string"}function YA(e){return Object.prototype.toString.call(e)==="[object Date]"}function c_(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function d_(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function XA(e){return Array.isArray(e)?e:[e]}function E0(e,t,n){if(e.length!==0)return e.reduce((o,a)=>{const r=[t(a),a];return o&&n(o[0],r[0])===o[0]?o:r},null)[1]}function QA(e,t){return t.reduce((n,o)=>(n[o]=e[o],n),{})}function El(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cf(e){if(e==null)return null;if(typeof e!="object")throw new mo("Week settings must be an object");if(!No(e.firstDay,1,7)||!No(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!No(t,1,7)))throw new mo("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function No(e,t,n){return Ac(e)&&e>=t&&e<=n}function JA(e,t){return e-t*Math.floor(e/t)}function Mn(e,t=2){const n=e<0;let o;return n?o="-"+(""+-e).padStart(t,"0"):o=(""+e).padStart(t,"0"),o}function tr(e){if(!(Ct(e)||e===null||e===""))return parseInt(e,10)}function kr(e){if(!(Ct(e)||e===null||e===""))return parseFloat(e)}function vp(e){if(!(Ct(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function hp(e,t,n=!1){const o=10**t;return(n?Math.trunc:Math.round)(e*o)/o}function gi(e){return e%4===0&&(e%100!==0||e%400===0)}function bl(e){return gi(e)?366:365}function ju(e,t){const n=JA(t-1,12)+1,o=e+(t-n)/12;return n===2?gi(o)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Rc(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function F0(e,t,n){return-pp(fp(e,1,t),n)+t-1}function zs(e,t=4,n=1){const o=F0(e,t,n),a=F0(e+1,t,n);return(bl(e)-o+a)/7}function df(e){return e>99?e:e>kn.twoDigitCutoffYear?1900+e:2e3+e}function m_(e,t,n,o=null){const a=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(r.timeZone=o);const s={timeZoneName:t,...r},i=new Intl.DateTimeFormat(n,s).formatToParts(a).find(u=>u.type.toLowerCase()==="timezonename");return i?i.value:null}function Dc(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const o=parseInt(t,10)||0,a=n<0||Object.is(n,-0)?-o:o;return n*60+a}function f_(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new mo(`Invalid unit value ${e}`);return t}function zu(e,t){const n={};for(const o in e)if(El(e,o)){const a=e[o];if(a==null)continue;n[t(o)]=f_(a)}return n}function Ns(e,t){const n=Math.trunc(Math.abs(e/60)),o=Math.trunc(Math.abs(e%60)),a=e>=0?"+":"-";switch(t){case"short":return`${a}${Mn(n,2)}:${Mn(o,2)}`;case"narrow":return`${a}${n}${o>0?`:${o}`:""}`;case"techie":return`${a}${Mn(n,2)}${Mn(o,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Oc(e){return QA(e,["hour","minute","second","millisecond"])}const eR=["January","February","March","April","May","June","July","August","September","October","November","December"],p_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tR=["J","F","M","A","M","J","J","A","S","O","N","D"];function v_(e){switch(e){case"narrow":return[...tR];case"short":return[...p_];case"long":return[...eR];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const h_=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],g_=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],nR=["M","T","W","T","F","S","S"];function b_(e){switch(e){case"narrow":return[...nR];case"short":return[...g_];case"long":return[...h_];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const y_=["AM","PM"],oR=["Before Christ","Anno Domini"],aR=["BC","AD"],rR=["B","A"];function __(e){switch(e){case"narrow":return[...rR];case"short":return[...aR];case"long":return[...oR];default:return null}}function lR(e){return y_[e.hour<12?0:1]}function sR(e,t){return b_(t)[e.weekday-1]}function iR(e,t){return v_(t)[e.month-1]}function uR(e,t){return __(t)[e.year<0?0:1]}function cR(e,t,n="always",o=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&r){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${a[e][0]}`;case-1:return f?"yesterday":`last ${a[e][0]}`;case 0:return f?"today":`this ${a[e][0]}`}}const s=Object.is(t,-0)||t<0,i=Math.abs(t),u=i===1,c=a[e],m=o?u?c[1]:c[2]||c[1]:u?a[e][0]:e;return s?`${i} ${m} ago`:`in ${i} ${m}`}function A0(e,t){let n="";for(const o of e)o.literal?n+=o.val:n+=t(o.val);return n}const dR={D:qu,DD:Vy,DDD:Ly,DDDD:qy,t:Uy,tt:jy,ttt:zy,tttt:Hy,T:Wy,TT:Gy,TTT:Ky,TTTT:Zy,f:Yy,ff:Qy,fff:e_,ffff:n_,F:Xy,FF:Jy,FFF:t_,FFFF:o_};class no{static create(t,n={}){return new no(t,n)}static parseFormat(t){let n=null,o="",a=!1;const r=[];for(let s=0;s<t.length;s++){const i=t.charAt(s);i==="'"?(o.length>0&&r.push({literal:a||/^\s+$/.test(o),val:o}),n=null,o="",a=!a):a||i===n?o+=i:(o.length>0&&r.push({literal:/^\s+$/.test(o),val:o}),o=i,n=i)}return o.length>0&&r.push({literal:a||/^\s+$/.test(o),val:o}),r}static macroTokenToFormatOpts(t){return dR[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Mn(t,n);const o={...this.opts};return n>0&&(o.padTo=n),this.loc.numberFormatter(o).format(t)}formatDateTimeFromString(t,n){const o=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(y,b)=>this.loc.extract(t,y,b),s=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",i=()=>o?lR(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(y,b)=>o?iR(t,y):r(b?{month:y}:{month:y,day:"numeric"},"month"),c=(y,b)=>o?sR(t,y):r(b?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),m=y=>{const b=no.macroTokenToFormatOpts(y);return b?this.formatWithSystemDefault(t,b):y},f=y=>o?uR(t,y):r({era:y},"era"),v=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return i();case"d":return a?r({day:"numeric"},"day"):this.num(t.day);case"dd":return a?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return a?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return a?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return a?r({month:"numeric"},"month"):this.num(t.month);case"MM":return a?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return a?r({year:"numeric"},"year"):this.num(t.year);case"yy":return a?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return a?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return a?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return m(y)}};return A0(no.parseFormat(n),v)}formatDurationFromString(t,n){const o=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=u=>c=>{const m=o(c);return m?this.num(u.get(m),c.length):c},r=no.parseFormat(n),s=r.reduce((u,{literal:c,val:m})=>c?u:u.concat(m),[]),i=t.shiftTo(...s.map(o).filter(u=>u));return A0(r,a(i))}}const I_=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Yl(...e){const t=e.reduce((n,o)=>n+o.source,"");return RegExp(`^${t}$`)}function Xl(...e){return t=>e.reduce(([n,o,a],r)=>{const[s,i,u]=r(t,a);return[{...n,...s},i||o,u]},[{},null,1]).slice(0,2)}function Ql(e,...t){if(e==null)return[null,null];for(const[n,o]of t){const a=n.exec(e);if(a)return o(a)}return[null,null]}function w_(...e){return(t,n)=>{const o={};let a;for(a=0;a<e.length;a++)o[e[a]]=tr(t[n+a]);return[o,null,n+a]}}const x_=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mR=`(?:${x_.source}?(?:\\[(${I_.source})\\])?)?`,gp=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,k_=RegExp(`${gp.source}${mR}`),bp=RegExp(`(?:T${k_.source})?`),fR=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,pR=/(\d{4})-?W(\d\d)(?:-?(\d))?/,vR=/(\d{4})-?(\d{3})/,hR=w_("weekYear","weekNumber","weekDay"),gR=w_("year","ordinal"),bR=/(\d{4})-(\d\d)-(\d\d)/,$_=RegExp(`${gp.source} ?(?:${x_.source}|(${I_.source}))?`),yR=RegExp(`(?: ${$_.source})?`);function yl(e,t,n){const o=e[t];return Ct(o)?n:tr(o)}function _R(e,t){return[{year:yl(e,t),month:yl(e,t+1,1),day:yl(e,t+2,1)},null,t+3]}function Jl(e,t){return[{hours:yl(e,t,0),minutes:yl(e,t+1,0),seconds:yl(e,t+2,0),milliseconds:vp(e[t+3])},null,t+4]}function bi(e,t){const n=!e[t]&&!e[t+1],o=Dc(e[t+1],e[t+2]),a=n?null:so.instance(o);return[{},a,t+3]}function yi(e,t){const n=e[t]?Ra.create(e[t]):null;return[{},n,t+1]}const IR=RegExp(`^T?${gp.source}$`),wR=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function xR(e){const[t,n,o,a,r,s,i,u,c]=e,m=t[0]==="-",f=u&&u[0]==="-",v=(y,b=!1)=>y!==void 0&&(b||y&&m)?-y:y;return[{years:v(kr(n)),months:v(kr(o)),weeks:v(kr(a)),days:v(kr(r)),hours:v(kr(s)),minutes:v(kr(i)),seconds:v(kr(u),u==="-0"),milliseconds:v(vp(c),f)}]}const kR={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function yp(e,t,n,o,a,r,s){const i={year:t.length===2?df(tr(t)):tr(t),month:p_.indexOf(n)+1,day:tr(o),hour:tr(a),minute:tr(r)};return s&&(i.second=tr(s)),e&&(i.weekday=e.length>3?h_.indexOf(e)+1:g_.indexOf(e)+1),i}const $R=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function CR(e){const[,t,n,o,a,r,s,i,u,c,m,f]=e,v=yp(t,a,o,n,r,s,i);let y;return u?y=kR[u]:c?y=0:y=Dc(m,f),[v,new so(y)]}function SR(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const TR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ER=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,FR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function R0(e){const[,t,n,o,a,r,s,i]=e;return[yp(t,a,o,n,r,s,i),so.utcInstance]}function AR(e){const[,t,n,o,a,r,s,i]=e;return[yp(t,i,n,o,a,r,s),so.utcInstance]}const RR=Yl(fR,bp),DR=Yl(pR,bp),OR=Yl(vR,bp),BR=Yl(k_),C_=Xl(_R,Jl,bi,yi),NR=Xl(hR,Jl,bi,yi),PR=Xl(gR,Jl,bi,yi),MR=Xl(Jl,bi,yi);function VR(e){return Ql(e,[RR,C_],[DR,NR],[OR,PR],[BR,MR])}function LR(e){return Ql(SR(e),[$R,CR])}function qR(e){return Ql(e,[TR,R0],[ER,R0],[FR,AR])}function UR(e){return Ql(e,[wR,xR])}const jR=Xl(Jl);function zR(e){return Ql(e,[IR,jR])}const HR=Yl(bR,yR),WR=Yl($_),GR=Xl(Jl,bi,yi);function KR(e){return Ql(e,[HR,C_],[WR,GR])}const D0="Invalid Duration",S_={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},ZR={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...S_},Ao=146097/400,tl=146097/4800,YR={years:{quarters:4,months:12,weeks:Ao/7,days:Ao,hours:Ao*24,minutes:Ao*24*60,seconds:Ao*24*60*60,milliseconds:Ao*24*60*60*1e3},quarters:{months:3,weeks:Ao/28,days:Ao/4,hours:Ao*24/4,minutes:Ao*24*60/4,seconds:Ao*24*60*60/4,milliseconds:Ao*24*60*60*1e3/4},months:{weeks:tl/7,days:tl,hours:tl*24,minutes:tl*24*60,seconds:tl*24*60*60,milliseconds:tl*24*60*60*1e3},...S_},Or=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],XR=Or.slice(0).reverse();function Za(e,t,n=!1){const o={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new qt(o)}function T_(e,t){let n=t.milliseconds??0;for(const o of XR.slice(1))t[o]&&(n+=t[o]*e[o].milliseconds);return n}function O0(e,t){const n=T_(e,t)<0?-1:1;Or.reduceRight((o,a)=>{if(Ct(t[a]))return o;if(o){const r=t[o]*n,s=e[a][o],i=Math.floor(r/s);t[a]+=i*n,t[o]-=i*s*n}return a},null),Or.reduce((o,a)=>{if(Ct(t[a]))return o;if(o){const r=t[o]%1;t[o]-=r,t[a]+=r*e[o][a]}return a},null)}function QR(e){const t={};for(const[n,o]of Object.entries(e))o!==0&&(t[n]=o);return t}class qt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let o=n?YR:ZR;t.matrix&&(o=t.matrix),this.values=t.values,this.loc=t.loc||mn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=o,this.isLuxonDuration=!0}static fromMillis(t,n){return qt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new mo(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new qt({values:zu(t,qt.normalizeUnit),loc:mn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Mr(t))return qt.fromMillis(t);if(qt.isDuration(t))return t;if(typeof t=="object")return qt.fromObject(t);throw new mo(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[o]=UR(t);return o?qt.fromObject(o,n):qt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[o]=zR(t);return o?qt.fromObject(o,n):qt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new mo("need to specify a reason the Duration is invalid");const o=t instanceof Ko?t:new Ko(t,n);if(kn.throwOnInvalid)throw new $A(o);return new qt({invalid:o})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new My(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const o={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?no.create(this.loc,o).formatDurationFromString(this,t):D0}toHuman(t={}){if(!this.isValid)return D0;const n=Or.map(o=>{const a=this.values[o];return Ct(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:o.slice(0,-1)}).format(a)}).filter(o=>o);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=hp(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},dt.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?T_(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=qt.fromDurationLike(t),o={};for(const a of Or)(El(n.values,a)||El(this.values,a))&&(o[a]=n.get(a)+this.get(a));return Za(this,{values:o},!0)}minus(t){if(!this.isValid)return this;const n=qt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const o of Object.keys(this.values))n[o]=f_(t(this.values[o],o));return Za(this,{values:n},!0)}get(t){return this[qt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...zu(t,qt.normalizeUnit)};return Za(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:o,matrix:a}={}){const s={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:a,conversionAccuracy:o};return Za(this,s)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return O0(this.matrix,t),Za(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=QR(this.normalize().shiftToAll().toObject());return Za(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(s=>qt.normalizeUnit(s));const n={},o={},a=this.toObject();let r;for(const s of Or)if(t.indexOf(s)>=0){r=s;let i=0;for(const c in o)i+=this.matrix[c][s]*o[c],o[c]=0;Mr(a[s])&&(i+=a[s]);const u=Math.trunc(i);n[s]=u,o[s]=(i*1e3-u*1e3)/1e3}else Mr(a[s])&&(o[s]=a[s]);for(const s in o)o[s]!==0&&(n[r]+=s===r?o[s]:o[s]/this.matrix[r][s]);return O0(this.matrix,n),Za(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return Za(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(o,a){return o===void 0||o===0?a===void 0||a===0:o===a}for(const o of Or)if(!n(this.values[o],t.values[o]))return!1;return!0}}const nl="Invalid Interval";function JR(e,t){return!e||!e.isValid?On.invalid("missing or invalid start"):!t||!t.isValid?On.invalid("missing or invalid end"):t<e?On.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class On{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new mo("need to specify a reason the Interval is invalid");const o=t instanceof Ko?t:new Ko(t,n);if(kn.throwOnInvalid)throw new kA(o);return new On({invalid:o})}static fromDateTimes(t,n){const o=ks(t),a=ks(n),r=JR(o,a);return r??new On({start:o,end:a})}static after(t,n){const o=qt.fromDurationLike(n),a=ks(t);return On.fromDateTimes(a,a.plus(o))}static before(t,n){const o=qt.fromDurationLike(n),a=ks(t);return On.fromDateTimes(a.minus(o),a)}static fromISO(t,n){const[o,a]=(t||"").split("/",2);if(o&&a){let r,s;try{r=dt.fromISO(o,n),s=r.isValid}catch{s=!1}let i,u;try{i=dt.fromISO(a,n),u=i.isValid}catch{u=!1}if(s&&u)return On.fromDateTimes(r,i);if(s){const c=qt.fromISO(a,n);if(c.isValid)return On.after(r,c)}else if(u){const c=qt.fromISO(o,n);if(c.isValid)return On.before(i,c)}}return On.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",n){if(!this.isValid)return NaN;const o=this.start.startOf(t,n);let a;return n!=null&&n.useLocaleWeeks?a=this.end.reconfigure({locale:o.locale}):a=this.end,a=a.startOf(t,n),Math.floor(a.diff(o,t).get(t))+(a.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?On.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(ks).filter(s=>this.contains(s)).sort((s,i)=>s.toMillis()-i.toMillis()),o=[];let{s:a}=this,r=0;for(;a<this.e;){const s=n[r]||this.e,i=+s>+this.e?this.e:s;o.push(On.fromDateTimes(a,i)),a=i,r+=1}return o}splitBy(t){const n=qt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:o}=this,a=1,r;const s=[];for(;o<this.e;){const i=this.start.plus(n.mapUnits(u=>u*a));r=+i>+this.e?this.e:i,s.push(On.fromDateTimes(o,r)),o=r,a+=1}return s}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,o=this.e<t.e?this.e:t.e;return n>=o?null:On.fromDateTimes(n,o)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,o=this.e>t.e?this.e:t.e;return On.fromDateTimes(n,o)}static merge(t){const[n,o]=t.sort((a,r)=>a.s-r.s).reduce(([a,r],s)=>r?r.overlaps(s)||r.abutsStart(s)?[a,r.union(s)]:[a.concat([r]),s]:[a,s],[[],null]);return o&&n.push(o),n}static xor(t){let n=null,o=0;const a=[],r=t.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),s=Array.prototype.concat(...r),i=s.sort((u,c)=>u.time-c.time);for(const u of i)o+=u.type==="s"?1:-1,o===1?n=u.time:(n&&+n!=+u.time&&a.push(On.fromDateTimes(n,u.time)),n=null);return On.merge(a)}difference(...t){return On.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:nl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=qu,n={}){return this.isValid?no.create(this.s.loc.clone(n),t).formatInterval(this):nl}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:nl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:nl}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:nl}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:nl}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):qt.invalid(this.invalidReason)}mapEndpoints(t){return On.fromDateTimes(t(this.s),t(this.e))}}class au{static hasDST(t=kn.defaultZone){const n=dt.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Ra.isValidZone(t)}static normalizeZone(t){return or(t,kn.defaultZone)}static getStartOfWeek({locale:t=null,locObj:n=null}={}){return(n||mn.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:n=null}={}){return(n||mn.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:n=null}={}){return(n||mn.create(t)).getWeekendDays().slice()}static months(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null,outputCalendar:r="gregory"}={}){return(a||mn.create(n,o,r)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null,outputCalendar:r="gregory"}={}){return(a||mn.create(n,o,r)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null}={}){return(a||mn.create(n,o,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null}={}){return(a||mn.create(n,o,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return mn.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return mn.create(n,null,"gregory").eras(t)}static features(){return{relative:c_(),localeWeek:d_()}}}function B0(e,t){const n=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=n(t)-n(e);return Math.floor(qt.fromMillis(o).as("days"))}function eD(e,t,n){const o=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{const m=B0(u,c);return(m-m%7)/7}],["days",B0]],a={},r=e;let s,i;for(const[u,c]of o)n.indexOf(u)>=0&&(s=u,a[u]=c(e,t),i=r.plus(a),i>t?(a[u]--,e=r.plus(a),e>t&&(i=e,a[u]--,e=r.plus(a))):e=i);return[e,a,i,s]}function tD(e,t,n,o){let[a,r,s,i]=eD(e,t,n);const u=t-a,c=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(s<t&&(s=a.plus({[i]:1})),s!==a&&(r[i]=(r[i]||0)+u/(s-a)));const m=qt.fromObject(r,o);return c.length>0?qt.fromMillis(u,o).shiftTo(...c).plus(m):m}const _p={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},N0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},nD=_p.hanidec.replace(/[\[|\]]/g,"").split("");function oD(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(e[n].search(_p.hanidec)!==-1)t+=nD.indexOf(e[n]);else for(const a in N0){const[r,s]=N0[a];o>=r&&o<=s&&(t+=o-r)}}return parseInt(t,10)}else return t}function Uo({numberingSystem:e},t=""){return new RegExp(`${_p[e||"latn"]}${t}`)}const aD="missing Intl.DateTimeFormat.formatToParts support";function nn(e,t=n=>n){return{regex:e,deser:([n])=>t(oD(n))}}const rD=" ",E_=`[ ${rD}]`,F_=new RegExp(E_,"g");function lD(e){return e.replace(/\./g,"\\.?").replace(F_,E_)}function P0(e){return e.replace(/\./g,"").replace(F_," ").toLowerCase()}function jo(e,t){return e===null?null:{regex:RegExp(e.map(lD).join("|")),deser:([n])=>e.findIndex(o=>P0(n)===P0(o))+t}}function M0(e,t){return{regex:e,deser:([,n,o])=>Dc(n,o),groups:t}}function ru(e){return{regex:e,deser:([t])=>t}}function sD(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function iD(e,t){const n=Uo(t),o=Uo(t,"{2}"),a=Uo(t,"{3}"),r=Uo(t,"{4}"),s=Uo(t,"{6}"),i=Uo(t,"{1,2}"),u=Uo(t,"{1,3}"),c=Uo(t,"{1,6}"),m=Uo(t,"{1,9}"),f=Uo(t,"{2,4}"),v=Uo(t,"{4,6}"),y=k=>({regex:RegExp(sD(k.val)),deser:([x])=>x,literal:!0}),w=(k=>{if(e.literal)return y(k);switch(k.val){case"G":return jo(t.eras("short"),0);case"GG":return jo(t.eras("long"),0);case"y":return nn(c);case"yy":return nn(f,df);case"yyyy":return nn(r);case"yyyyy":return nn(v);case"yyyyyy":return nn(s);case"M":return nn(i);case"MM":return nn(o);case"MMM":return jo(t.months("short",!0),1);case"MMMM":return jo(t.months("long",!0),1);case"L":return nn(i);case"LL":return nn(o);case"LLL":return jo(t.months("short",!1),1);case"LLLL":return jo(t.months("long",!1),1);case"d":return nn(i);case"dd":return nn(o);case"o":return nn(u);case"ooo":return nn(a);case"HH":return nn(o);case"H":return nn(i);case"hh":return nn(o);case"h":return nn(i);case"mm":return nn(o);case"m":return nn(i);case"q":return nn(i);case"qq":return nn(o);case"s":return nn(i);case"ss":return nn(o);case"S":return nn(u);case"SSS":return nn(a);case"u":return ru(m);case"uu":return ru(i);case"uuu":return nn(n);case"a":return jo(t.meridiems(),0);case"kkkk":return nn(r);case"kk":return nn(f,df);case"W":return nn(i);case"WW":return nn(o);case"E":case"c":return nn(n);case"EEE":return jo(t.weekdays("short",!1),1);case"EEEE":return jo(t.weekdays("long",!1),1);case"ccc":return jo(t.weekdays("short",!0),1);case"cccc":return jo(t.weekdays("long",!0),1);case"Z":case"ZZ":return M0(new RegExp(`([+-]${i.source})(?::(${o.source}))?`),2);case"ZZZ":return M0(new RegExp(`([+-]${i.source})(${o.source})?`),2);case"z":return ru(/[a-z_+-/]{1,256}?/i);case" ":return ru(/[^\S\n\r]/);default:return y(k)}})(e)||{invalidReason:aD};return w.token=e,w}const uD={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function cD(e,t,n){const{type:o,value:a}=e;if(o==="literal"){const u=/^\s+$/.test(a);return{literal:!u,val:u?" ":a}}const r=t[o];let s=o;o==="hour"&&(t.hour12!=null?s=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?s="hour12":s="hour24":s=n.hour12?"hour12":"hour24");let i=uD[s];if(typeof i=="object"&&(i=i[r]),i)return{literal:!1,val:i}}function dD(e){return[`^${e.map(n=>n.regex).reduce((n,o)=>`${n}(${o.source})`,"")}$`,e]}function mD(e,t,n){const o=e.match(t);if(o){const a={};let r=1;for(const s in n)if(El(n,s)){const i=n[s],u=i.groups?i.groups+1:1;!i.literal&&i.token&&(a[i.token.val[0]]=i.deser(o.slice(r,r+u))),r+=u}return[o,a]}else return[o,{}]}function fD(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,o;return Ct(e.z)||(n=Ra.create(e.z)),Ct(e.Z)||(n||(n=new so(e.Z)),o=e.Z),Ct(e.q)||(e.M=(e.q-1)*3+1),Ct(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ct(e.u)||(e.S=vp(e.u)),[Object.keys(e).reduce((r,s)=>{const i=t(s);return i&&(r[i]=e[s]),r},{}),n,o]}let Gd=null;function pD(){return Gd||(Gd=dt.fromMillis(1555555555555)),Gd}function vD(e,t){if(e.literal)return e;const n=no.macroTokenToFormatOpts(e.val),o=D_(n,t);return o==null||o.includes(void 0)?e:o}function A_(e,t){return Array.prototype.concat(...e.map(n=>vD(n,t)))}function R_(e,t,n){const o=A_(no.parseFormat(n),e),a=o.map(s=>iD(s,e)),r=a.find(s=>s.invalidReason);if(r)return{input:t,tokens:o,invalidReason:r.invalidReason};{const[s,i]=dD(a),u=RegExp(s,"i"),[c,m]=mD(t,u,i),[f,v,y]=m?fD(m):[null,null,void 0];if(El(m,"a")&&El(m,"H"))throw new vl("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:o,regex:u,rawMatches:c,matches:m,result:f,zone:v,specificOffset:y}}}function hD(e,t,n){const{result:o,zone:a,specificOffset:r,invalidReason:s}=R_(e,t,n);return[o,a,r,s]}function D_(e,t){if(!e)return null;const o=no.create(t,e).dtFormatter(pD()),a=o.formatToParts(),r=o.resolvedOptions();return a.map(s=>cD(s,e,r))}const Kd="Invalid DateTime",V0=864e13;function lu(e){return new Ko("unsupported zone",`the zone "${e.name}" is not supported`)}function Zd(e){return e.weekData===null&&(e.weekData=Uu(e.c)),e.weekData}function Yd(e){return e.localWeekData===null&&(e.localWeekData=Uu(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function $r(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new dt({...n,...t,old:n})}function O_(e,t,n){let o=e-t*60*1e3;const a=n.offset(o);if(t===a)return[o,t];o-=(a-t)*60*1e3;const r=n.offset(o);return a===r?[o,a]:[e-Math.min(a,r)*60*1e3,Math.max(a,r)]}function su(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Su(e,t,n){return O_(Rc(e),t,n)}function L0(e,t){const n=e.o,o=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:o,month:a,day:Math.min(e.c.day,ju(o,a))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},s=qt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),i=Rc(r);let[u,c]=O_(i,n,e.zone);return s!==0&&(u+=s,c=e.zone.offset(u)),{ts:u,o:c}}function xs(e,t,n,o,a,r){const{setZone:s,zone:i}=n;if(e&&Object.keys(e).length!==0||t){const u=t||i,c=dt.fromObject(e,{...n,zone:u,specificOffset:r});return s?c:c.setZone(i)}else return dt.invalid(new Ko("unparsable",`the input "${a}" can't be parsed as ${o}`))}function iu(e,t,n=!0){return e.isValid?no.create(mn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Xd(e,t){const n=e.c.year>9999||e.c.year<0;let o="";return n&&e.c.year>=0&&(o+="+"),o+=Mn(e.c.year,n?6:4),t?(o+="-",o+=Mn(e.c.month),o+="-",o+=Mn(e.c.day)):(o+=Mn(e.c.month),o+=Mn(e.c.day)),o}function q0(e,t,n,o,a,r){let s=Mn(e.c.hour);return t?(s+=":",s+=Mn(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(s+=":")):s+=Mn(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(s+=Mn(e.c.second),(e.c.millisecond!==0||!o)&&(s+=".",s+=Mn(e.c.millisecond,3))),a&&(e.isOffsetFixed&&e.offset===0&&!r?s+="Z":e.o<0?(s+="-",s+=Mn(Math.trunc(-e.o/60)),s+=":",s+=Mn(Math.trunc(-e.o%60))):(s+="+",s+=Mn(Math.trunc(e.o/60)),s+=":",s+=Mn(Math.trunc(e.o%60)))),r&&(s+="["+e.zone.ianaName+"]"),s}const B_={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},gD={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},bD={ordinal:1,hour:0,minute:0,second:0,millisecond:0},N_=["year","month","day","hour","minute","second","millisecond"],yD=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],_D=["year","ordinal","hour","minute","second","millisecond"];function ID(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new My(e);return t}function U0(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return ID(e)}}function j0(e,t){const n=or(t.zone,kn.defaultZone),o=mn.fromObject(t),a=kn.now();let r,s;if(Ct(e.year))r=a;else{for(const c of N_)Ct(e[c])&&(e[c]=B_[c]);const i=i_(e)||u_(e);if(i)return dt.invalid(i);const u=n.offset(a);[r,s]=Su(e,u,n)}return new dt({ts:r,zone:n,loc:o,o:s})}function z0(e,t,n){const o=Ct(n.round)?!0:n.round,a=(s,i)=>(s=hp(s,o||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(s,i)),r=s=>n.calendary?t.hasSame(e,s)?0:t.startOf(s).diff(e.startOf(s),s).get(s):t.diff(e,s).get(s);if(n.unit)return a(r(n.unit),n.unit);for(const s of n.units){const i=r(s);if(Math.abs(i)>=1)return a(i,s)}return a(e>t?-0:0,n.units[n.units.length-1])}function H0(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class dt{constructor(t){const n=t.zone||kn.defaultZone;let o=t.invalid||(Number.isNaN(t.ts)?new Ko("invalid input"):null)||(n.isValid?null:lu(n));this.ts=Ct(t.ts)?kn.now():t.ts;let a=null,r=null;if(!o)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[a,r]=[t.old.c,t.old.o];else{const i=n.offset(this.ts);a=su(this.ts,i),o=Number.isNaN(a.year)?new Ko("invalid input"):null,a=o?null:a,r=o?null:i}this._zone=n,this.loc=t.loc||mn.create(),this.invalid=o,this.weekData=null,this.localWeekData=null,this.c=a,this.o=r,this.isLuxonDateTime=!0}static now(){return new dt({})}static local(){const[t,n]=H0(arguments),[o,a,r,s,i,u,c]=n;return j0({year:o,month:a,day:r,hour:s,minute:i,second:u,millisecond:c},t)}static utc(){const[t,n]=H0(arguments),[o,a,r,s,i,u,c]=n;return t.zone=so.utcInstance,j0({year:o,month:a,day:r,hour:s,minute:i,second:u,millisecond:c},t)}static fromJSDate(t,n={}){const o=YA(t)?t.valueOf():NaN;if(Number.isNaN(o))return dt.invalid("invalid input");const a=or(n.zone,kn.defaultZone);return a.isValid?new dt({ts:o,zone:a,loc:mn.fromObject(n)}):dt.invalid(lu(a))}static fromMillis(t,n={}){if(Mr(t))return t<-V0||t>V0?dt.invalid("Timestamp out of range"):new dt({ts:t,zone:or(n.zone,kn.defaultZone),loc:mn.fromObject(n)});throw new mo(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Mr(t))return new dt({ts:t*1e3,zone:or(n.zone,kn.defaultZone),loc:mn.fromObject(n)});throw new mo("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const o=or(n.zone,kn.defaultZone);if(!o.isValid)return dt.invalid(lu(o));const a=mn.fromObject(n),r=zu(t,U0),{minDaysInFirstWeek:s,startOfWeek:i}=T0(r,a),u=kn.now(),c=Ct(n.specificOffset)?o.offset(u):n.specificOffset,m=!Ct(r.ordinal),f=!Ct(r.year),v=!Ct(r.month)||!Ct(r.day),y=f||v,b=r.weekYear||r.weekNumber;if((y||m)&&b)throw new vl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&m)throw new vl("Can't mix ordinal dates with month/day");const w=b||r.weekday&&!y;let k,x,I=su(u,c);w?(k=yD,x=gD,I=Uu(I,s,i)):m?(k=_D,x=bD,I=Wd(I)):(k=N_,x=B_);let C=!1;for(const B of k){const V=r[B];Ct(V)?C?r[B]=x[B]:r[B]=I[B]:C=!0}const S=w?GA(r,s,i):m?KA(r):i_(r),T=S||u_(r);if(T)return dt.invalid(T);const E=w?C0(r,s,i):m?S0(r):r,[$,F]=Su(E,c,o),R=new dt({ts:$,zone:o,o:F,loc:a});return r.weekday&&y&&t.weekday!==R.weekday?dt.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${R.toISO()}`):R}static fromISO(t,n={}){const[o,a]=VR(t);return xs(o,a,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[o,a]=LR(t);return xs(o,a,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[o,a]=qR(t);return xs(o,a,n,"HTTP",n)}static fromFormat(t,n,o={}){if(Ct(t)||Ct(n))throw new mo("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:r=null}=o,s=mn.fromOpts({locale:a,numberingSystem:r,defaultToEN:!0}),[i,u,c,m]=hD(s,t,n);return m?dt.invalid(m):xs(i,u,o,`format ${n}`,t,c)}static fromString(t,n,o={}){return dt.fromFormat(t,n,o)}static fromSQL(t,n={}){const[o,a]=KR(t);return xs(o,a,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new mo("need to specify a reason the DateTime is invalid");const o=t instanceof Ko?t:new Ko(t,n);if(kn.throwOnInvalid)throw new xA(o);return new dt({invalid:o})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const o=D_(t,mn.fromObject(n));return o?o.map(a=>a?a.val:null).join(""):null}static expandFormat(t,n={}){return A_(no.parseFormat(t),mn.fromObject(n)).map(a=>a.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Zd(this).weekYear:NaN}get weekNumber(){return this.isValid?Zd(this).weekNumber:NaN}get weekday(){return this.isValid?Zd(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Yd(this).weekday:NaN}get localWeekNumber(){return this.isValid?Yd(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Yd(this).weekYear:NaN}get ordinal(){return this.isValid?Wd(this.c).ordinal:NaN}get monthShort(){return this.isValid?au.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?au.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?au.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?au.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,o=Rc(this.c),a=this.zone.offset(o-t),r=this.zone.offset(o+t),s=this.zone.offset(o-a*n),i=this.zone.offset(o-r*n);if(s===i)return[this];const u=o-s*n,c=o-i*n,m=su(u,s),f=su(c,i);return m.hour===f.hour&&m.minute===f.minute&&m.second===f.second&&m.millisecond===f.millisecond?[$r(this,{ts:u}),$r(this,{ts:c})]:[this]}get isInLeapYear(){return gi(this.year)}get daysInMonth(){return ju(this.year,this.month)}get daysInYear(){return this.isValid?bl(this.year):NaN}get weeksInWeekYear(){return this.isValid?zs(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?zs(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:o,calendar:a}=no.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:o,outputCalendar:a}}toUTC(t=0,n={}){return this.setZone(so.instance(t),n)}toLocal(){return this.setZone(kn.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:o=!1}={}){if(t=or(t,kn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let a=this.ts;if(n||o){const r=t.offset(this.ts),s=this.toObject();[a]=Su(s,r,t)}return $r(this,{ts:a,zone:t})}else return dt.invalid(lu(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:o}={}){const a=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:o});return $r(this,{loc:a})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=zu(t,U0),{minDaysInFirstWeek:o,startOfWeek:a}=T0(n,this.loc),r=!Ct(n.weekYear)||!Ct(n.weekNumber)||!Ct(n.weekday),s=!Ct(n.ordinal),i=!Ct(n.year),u=!Ct(n.month)||!Ct(n.day),c=i||u,m=n.weekYear||n.weekNumber;if((c||s)&&m)throw new vl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&s)throw new vl("Can't mix ordinal dates with month/day");let f;r?f=C0({...Uu(this.c,o,a),...n},o,a):Ct(n.ordinal)?(f={...this.toObject(),...n},Ct(n.day)&&(f.day=Math.min(ju(f.year,f.month),f.day))):f=S0({...Wd(this.c),...n});const[v,y]=Su(f,this.o,this.zone);return $r(this,{ts:v,o:y})}plus(t){if(!this.isValid)return this;const n=qt.fromDurationLike(t);return $r(this,L0(this,n))}minus(t){if(!this.isValid)return this;const n=qt.fromDurationLike(t).negate();return $r(this,L0(this,n))}startOf(t,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const o={},a=qt.normalizeUnit(t);switch(a){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(a==="weeks")if(n){const r=this.loc.getStartOfWeek(),{weekday:s}=this;s<r&&(o.weekNumber=this.weekNumber-1),o.weekday=r}else o.weekday=1;if(a==="quarters"){const r=Math.ceil(this.month/3);o.month=(r-1)*3+1}return this.set(o)}endOf(t,n){return this.isValid?this.plus({[t]:1}).startOf(t,n).minus(1):this}toFormat(t,n={}){return this.isValid?no.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):Kd}toLocaleString(t=qu,n={}){return this.isValid?no.create(this.loc.clone(n),t).formatDateTime(this):Kd}toLocaleParts(t={}){return this.isValid?no.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:o=!1,includeOffset:a=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const s=t==="extended";let i=Xd(this,s);return i+="T",i+=q0(this,s,n,o,a,r),i}toISODate({format:t="extended"}={}){return this.isValid?Xd(this,t==="extended"):null}toISOWeekDate(){return iu(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:o=!0,includePrefix:a=!1,extendedZone:r=!1,format:s="extended"}={}){return this.isValid?(a?"T":"")+q0(this,s==="extended",n,t,o,r):null}toRFC2822(){return iu(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return iu(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xd(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:o=!0}={}){let a="HH:mm:ss.SSS";return(n||t)&&(o&&(a+=" "),n?a+="z":t&&(a+="ZZ")),iu(this,a,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Kd}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",o={}){if(!this.isValid||!t.isValid)return qt.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...o},r=XA(n).map(qt.normalizeUnit),s=t.valueOf()>this.valueOf(),i=s?this:t,u=s?t:this,c=tD(i,u,r,a);return s?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(dt.now(),t,n)}until(t){return this.isValid?On.fromDateTimes(this,t):this}hasSame(t,n,o){if(!this.isValid)return!1;const a=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n,o)<=a&&a<=r.endOf(n,o)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||dt.fromObject({},{zone:this.zone}),o=t.padding?this<n?-t.padding:t.padding:0;let a=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(a=t.unit,r=void 0),z0(n,this.plus(o),{...t,numeric:"always",units:a,unit:r})}toRelativeCalendar(t={}){return this.isValid?z0(t.base||dt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(dt.isDateTime))throw new mo("min requires all arguments be DateTimes");return E0(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(dt.isDateTime))throw new mo("max requires all arguments be DateTimes");return E0(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,o={}){const{locale:a=null,numberingSystem:r=null}=o,s=mn.fromOpts({locale:a,numberingSystem:r,defaultToEN:!0});return R_(s,t,n)}static fromStringExplain(t,n,o={}){return dt.fromFormatExplain(t,n,o)}static get DATE_SHORT(){return qu}static get DATE_MED(){return Vy}static get DATE_MED_WITH_WEEKDAY(){return CA}static get DATE_FULL(){return Ly}static get DATE_HUGE(){return qy}static get TIME_SIMPLE(){return Uy}static get TIME_WITH_SECONDS(){return jy}static get TIME_WITH_SHORT_OFFSET(){return zy}static get TIME_WITH_LONG_OFFSET(){return Hy}static get TIME_24_SIMPLE(){return Wy}static get TIME_24_WITH_SECONDS(){return Gy}static get TIME_24_WITH_SHORT_OFFSET(){return Ky}static get TIME_24_WITH_LONG_OFFSET(){return Zy}static get DATETIME_SHORT(){return Yy}static get DATETIME_SHORT_WITH_SECONDS(){return Xy}static get DATETIME_MED(){return Qy}static get DATETIME_MED_WITH_SECONDS(){return Jy}static get DATETIME_MED_WITH_WEEKDAY(){return SA}static get DATETIME_FULL(){return e_}static get DATETIME_FULL_WITH_SECONDS(){return t_}static get DATETIME_HUGE(){return n_}static get DATETIME_HUGE_WITH_SECONDS(){return o_}}function ks(e){if(dt.isDateTime(e))return e;if(e&&e.valueOf&&Mr(e.valueOf()))return dt.fromJSDate(e);if(e&&typeof e=="object")return dt.fromObject(e);throw new mo(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const mf=(e,t,n,o=null)=>{const a=qt.fromObject({days:1}),r=qt.fromObject({[n]:t}),s=a.as(n)/t,i=[];let u=dt.fromFormat(e,"hh:mm");o&&(o=dt.fromFormat(o+":00","HH:mm"));for(let c=0;c<s;c++)c!==0&&(u=u.plus(r)),(!o||o&&u<=o.startOf("hour"))&&i.push(u.toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}));return i};var wD=na,xD=function(){return wD.Date.now()},kD=xD,$D=/\s/;function CD(e){for(var t=e.length;t--&&$D.test(e.charAt(t)););return t}var SD=CD,TD=SD,ED=/^\s+/;function FD(e){return e&&e.slice(0,TD(e)+1).replace(ED,"")}var AD=FD,RD=AD,W0=ho,DD=ui,G0=NaN,OD=/^[-+]0x[0-9a-f]+$/i,BD=/^0b[01]+$/i,ND=/^0o[0-7]+$/i,PD=parseInt;function MD(e){if(typeof e=="number")return e;if(DD(e))return G0;if(W0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=W0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=RD(e);var n=BD.test(e);return n||ND.test(e)?PD(e.slice(2),n?2:8):OD.test(e)?G0:+e}var P_=MD,VD=ho,Qd=kD,K0=P_,LD="Expected a function",qD=Math.max,UD=Math.min;function jD(e,t,n){var o,a,r,s,i,u,c=0,m=!1,f=!1,v=!0;if(typeof e!="function")throw new TypeError(LD);t=K0(t)||0,VD(n)&&(m=!!n.leading,f="maxWait"in n,r=f?qD(K0(n.maxWait)||0,t):r,v="trailing"in n?!!n.trailing:v);function y(E){var $=o,F=a;return o=a=void 0,c=E,s=e.apply(F,$),s}function b(E){return c=E,i=setTimeout(x,t),m?y(E):s}function w(E){var $=E-u,F=E-c,R=t-$;return f?UD(R,r-F):R}function k(E){var $=E-u,F=E-c;return u===void 0||$>=t||$<0||f&&F>=r}function x(){var E=Qd();if(k(E))return I(E);i=setTimeout(x,w(E))}function I(E){return i=void 0,v&&o?y(E):(o=a=void 0,s)}function C(){i!==void 0&&clearTimeout(i),c=0,o=u=a=i=void 0}function S(){return i===void 0?s:I(Qd())}function T(){var E=Qd(),$=k(E);if(o=arguments,a=this,u=E,$){if(i===void 0)return b(u);if(f)return clearTimeout(i),i=setTimeout(x,t),y(u)}return i===void 0&&(i=setTimeout(x,t)),s}return T.cancel=C,T.flush=S,T}var M_=jD;const zD=Bt(M_),Z0=600;function HD(e){return e===!1||typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"?0:e===!0?Z0:typeof e=="string"?e?parseInt(e,10):Z0:e}function ga(e,t=0,n={}){return zD(e,HD(t),n)}function ff(e,t){let o=(ff.canvas||(ff.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,o.measureText(e).width}function Ip(e){return e<59?"minutes":e>=10080?"weeks":e>=1440?"days":"hours"}function V_(e){const t=Ip(e);if(t==="minutes")return e;if(t==="hours")return e/60;if(t==="days")return e/1440;if(t==="weeks")return e/10080}function WD(e,t){return iy(e,t.replace("::","."))}const wp=rF({legacy:!1,globalInjection:!0,locale:Sc(),fallbackLocale:"en",messageResolver:WD,messages:lang}),GD=wp.global.t,at=wp.global.t;/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const cl=typeof document<"u";function KD(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const sn=Object.assign;function Jd(e,t){const n={};for(const o in t){const a=t[o];n[o]=Qo(a)?a.map(e):e(a)}return n}const Ps=()=>{},Qo=Array.isArray,L_=/#/g,ZD=/&/g,YD=/\//g,XD=/=/g,QD=/\?/g,q_=/\+/g,JD=/%5B/g,eO=/%5D/g,U_=/%5E/g,tO=/%60/g,j_=/%7B/g,nO=/%7C/g,z_=/%7D/g,oO=/%20/g;function xp(e){return encodeURI(""+e).replace(nO,"|").replace(JD,"[").replace(eO,"]")}function aO(e){return xp(e).replace(j_,"{").replace(z_,"}").replace(U_,"^")}function pf(e){return xp(e).replace(q_,"%2B").replace(oO,"+").replace(L_,"%23").replace(ZD,"%26").replace(tO,"`").replace(j_,"{").replace(z_,"}").replace(U_,"^")}function rO(e){return pf(e).replace(XD,"%3D")}function lO(e){return xp(e).replace(L_,"%23").replace(QD,"%3F")}function sO(e){return e==null?"":lO(e).replace(YD,"%2F")}function Hs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const iO=/\/$/,uO=e=>e.replace(iO,"");function em(e,t,n="/"){let o,a={},r="",s="";const i=t.indexOf("#");let u=t.indexOf("?");return i<u&&i>=0&&(u=-1),u>-1&&(o=t.slice(0,u),r=t.slice(u+1,i>-1?i:t.length),a=e(r)),i>-1&&(o=o||t.slice(0,i),s=t.slice(i,t.length)),o=fO(o??t,n),{fullPath:o+(r&&"?")+r+s,path:o,query:a,hash:Hs(s)}}function cO(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Y0(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function dO(e,t,n){const o=t.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&Fl(t.matched[o],n.matched[a])&&H_(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Fl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function H_(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!mO(e[n],t[n]))return!1;return!0}function mO(e,t){return Qo(e)?X0(e,t):Qo(t)?X0(t,e):e===t}function X0(e,t){return Qo(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function fO(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),a=o[o.length-1];(a===".."||a===".")&&o.push("");let r=n.length-1,s,i;for(s=0;s<o.length;s++)if(i=o[s],i!==".")if(i==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(s).join("/")}var Ws;(function(e){e.pop="pop",e.push="push"})(Ws||(Ws={}));var Ms;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ms||(Ms={}));function pO(e){if(!e)if(cl){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),uO(e)}const vO=/^[^#]+#/;function hO(e,t){return e.replace(vO,"#")+t}function gO(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const Bc=()=>({left:window.scrollX,top:window.scrollY});function bO(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=gO(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Q0(e,t){return(history.state?history.state.position-t:-1)+e}const vf=new Map;function yO(e,t){vf.set(e,t)}function _O(e){const t=vf.get(e);return vf.delete(e),t}let IO=()=>location.protocol+"//"+location.host;function W_(e,t){const{pathname:n,search:o,hash:a}=t,r=e.indexOf("#");if(r>-1){let i=a.includes(e.slice(r))?e.slice(r).length:1,u=a.slice(i);return u[0]!=="/"&&(u="/"+u),Y0(u,"")}return Y0(n,e)+o+a}function wO(e,t,n,o){let a=[],r=[],s=null;const i=({state:v})=>{const y=W_(e,location),b=n.value,w=t.value;let k=0;if(v){if(n.value=y,t.value=v,s&&s===b){s=null;return}k=w?v.position-w.position:0}else o(y);a.forEach(x=>{x(n.value,b,{delta:k,type:Ws.pop,direction:k?k>0?Ms.forward:Ms.back:Ms.unknown})})};function u(){s=n.value}function c(v){a.push(v);const y=()=>{const b=a.indexOf(v);b>-1&&a.splice(b,1)};return r.push(y),y}function m(){const{history:v}=window;v.state&&v.replaceState(sn({},v.state,{scroll:Bc()}),"")}function f(){for(const v of r)v();r=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:u,listen:c,destroy:f}}function J0(e,t,n,o=!1,a=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:a?Bc():null}}function xO(e){const{history:t,location:n}=window,o={value:W_(e,n)},a={value:t.state};a.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(u,c,m){const f=e.indexOf("#"),v=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+u:IO()+e+u;try{t[m?"replaceState":"pushState"](c,"",v),a.value=c}catch(y){console.error(y),n[m?"replace":"assign"](v)}}function s(u,c){const m=sn({},t.state,J0(a.value.back,u,a.value.forward,!0),c,{position:a.value.position});r(u,m,!0),o.value=u}function i(u,c){const m=sn({},a.value,t.state,{forward:u,scroll:Bc()});r(m.current,m,!0);const f=sn({},J0(o.value,u,null),{position:m.position+1},c);r(u,f,!1),o.value=u}return{location:o,state:a,push:i,replace:s}}function kO(e){e=pO(e);const t=xO(e),n=wO(e,t.state,t.location,t.replace);function o(r,s=!0){s||n.pauseListeners(),history.go(r)}const a=sn({location:"",base:e,go:o,createHref:hO.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function $O(e){return typeof e=="string"||e&&typeof e=="object"}function G_(e){return typeof e=="string"||typeof e=="symbol"}const Ya={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},K_=Symbol("");var eg;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(eg||(eg={}));function Al(e,t){return sn(new Error,{type:e,[K_]:!0},t)}function ka(e,t){return e instanceof Error&&K_ in e&&(t==null||!!(e.type&t))}const tg="[^/]+?",CO={sensitive:!1,strict:!1,start:!0,end:!0},SO=/[.+*?^${}()[\]/\\]/g;function TO(e,t){const n=sn({},CO,t),o=[];let a=n.start?"^":"";const r=[];for(const c of e){const m=c.length?[]:[90];n.strict&&!c.length&&(a+="/");for(let f=0;f<c.length;f++){const v=c[f];let y=40+(n.sensitive?.25:0);if(v.type===0)f||(a+="/"),a+=v.value.replace(SO,"\\$&"),y+=40;else if(v.type===1){const{value:b,repeatable:w,optional:k,regexp:x}=v;r.push({name:b,repeatable:w,optional:k});const I=x||tg;if(I!==tg){y+=10;try{new RegExp(`(${I})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${b}" (${I}): `+S.message)}}let C=w?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;f||(C=k&&c.length<2?`(?:/${C})`:"/"+C),k&&(C+="?"),a+=C,y+=20,k&&(y+=-8),w&&(y+=-20),I===".*"&&(y+=-50)}m.push(y)}o.push(m)}if(n.strict&&n.end){const c=o.length-1;o[c][o[c].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const s=new RegExp(a,n.sensitive?"":"i");function i(c){const m=c.match(s),f={};if(!m)return null;for(let v=1;v<m.length;v++){const y=m[v]||"",b=r[v-1];f[b.name]=y&&b.repeatable?y.split("/"):y}return f}function u(c){let m="",f=!1;for(const v of e){(!f||!m.endsWith("/"))&&(m+="/"),f=!1;for(const y of v)if(y.type===0)m+=y.value;else if(y.type===1){const{value:b,repeatable:w,optional:k}=y,x=b in c?c[b]:"";if(Qo(x)&&!w)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const I=Qo(x)?x.join("/"):x;if(!I)if(k)v.length<2&&(m.endsWith("/")?m=m.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);m+=I}}return m||"/"}return{re:s,score:o,keys:r,parse:i,stringify:u}}function EO(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function FO(e,t){let n=0;const o=e.score,a=t.score;for(;n<o.length&&n<a.length;){const r=EO(o[n],a[n]);if(r)return r;n++}if(Math.abs(a.length-o.length)===1){if(ng(o))return 1;if(ng(a))return-1}return a.length-o.length}function ng(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const AO={type:0,value:""},RO=/[a-zA-Z0-9_]/;function DO(e){if(!e)return[[]];if(e==="/")return[[AO]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${c}": ${y}`)}let n=0,o=n;const a=[];let r;function s(){r&&a.push(r),r=[]}let i=0,u,c="",m="";function f(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:m,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function v(){c+=u}for(;i<e.length;){if(u=e[i++],u==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:u==="/"?(c&&f(),s()):u===":"?(f(),n=1):v();break;case 4:v(),n=o;break;case 1:u==="("?n=2:RO.test(u)?v():(f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&i--);break;case 2:u===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+u:n=3:m+=u;break;case 3:f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&i--,m="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),s(),a}function OO(e,t,n){const o=TO(DO(e.path),n),a=sn(o,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function BO(e,t){const n=[],o=new Map;t=rg({strict:!1,end:!0,sensitive:!1},t);function a(m){return o.get(m)}function r(m,f,v){const y=!v,b=NO(m);b.aliasOf=v&&v.record;const w=rg(t,m),k=[b];if("alias"in m){const C=typeof m.alias=="string"?[m.alias]:m.alias;for(const S of C)k.push(sn({},b,{components:v?v.record.components:b.components,path:S,aliasOf:v?v.record:b}))}let x,I;for(const C of k){const{path:S}=C;if(f&&S[0]!=="/"){const T=f.record.path,E=T[T.length-1]==="/"?"":"/";C.path=f.record.path+(S&&E+S)}if(x=OO(C,f,w),v?v.alias.push(x):(I=I||x,I!==x&&I.alias.push(x),y&&m.name&&!ag(x)&&s(m.name)),b.children){const T=b.children;for(let E=0;E<T.length;E++)r(T[E],x,v&&v.children[E])}v=v||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&u(x)}return I?()=>{s(I)}:Ps}function s(m){if(G_(m)){const f=o.get(m);f&&(o.delete(m),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(m);f>-1&&(n.splice(f,1),m.record.name&&o.delete(m.record.name),m.children.forEach(s),m.alias.forEach(s))}}function i(){return n}function u(m){let f=0;for(;f<n.length&&FO(m,n[f])>=0&&(m.record.path!==n[f].record.path||!Z_(m,n[f]));)f++;n.splice(f,0,m),m.record.name&&!ag(m)&&o.set(m.record.name,m)}function c(m,f){let v,y={},b,w;if("name"in m&&m.name){if(v=o.get(m.name),!v)throw Al(1,{location:m});w=v.record.name,y=sn(og(f.params,v.keys.filter(I=>!I.optional).concat(v.parent?v.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),m.params&&og(m.params,v.keys.map(I=>I.name))),b=v.stringify(y)}else if(m.path!=null)b=m.path,v=n.find(I=>I.re.test(b)),v&&(y=v.parse(b),w=v.record.name);else{if(v=f.name?o.get(f.name):n.find(I=>I.re.test(f.path)),!v)throw Al(1,{location:m,currentLocation:f});w=v.record.name,y=sn({},f.params,m.params),b=v.stringify(y)}const k=[];let x=v;for(;x;)k.unshift(x.record),x=x.parent;return{name:w,path:b,params:y,matched:k,meta:MO(k)}}return e.forEach(m=>r(m)),{addRoute:r,resolve:c,removeRoute:s,getRoutes:i,getRecordMatcher:a}}function og(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function NO(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:PO(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function PO(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function ag(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function MO(e){return e.reduce((t,n)=>sn(t,n.meta),{})}function rg(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function Z_(e,t){return t.children.some(n=>n===e||Z_(e,n))}function VO(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<o.length;++a){const r=o[a].replace(q_," "),s=r.indexOf("="),i=Hs(s<0?r:r.slice(0,s)),u=s<0?null:Hs(r.slice(s+1));if(i in t){let c=t[i];Qo(c)||(c=t[i]=[c]),c.push(u)}else t[i]=u}return t}function lg(e){let t="";for(let n in e){const o=e[n];if(n=rO(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(Qo(o)?o.map(r=>r&&pf(r)):[o&&pf(o)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function LO(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=Qo(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return t}const kp=Symbol(""),sg=Symbol(""),Nc=Symbol(""),$p=Symbol(""),hf=Symbol("");function $s(){let e=[];function t(o){return e.push(o),()=>{const a=e.indexOf(o);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Y_(e,t,n){const o=()=>{e[t].delete(n)};rn(o),Yf(o),Zf(()=>{e[t].add(n)}),e[t].add(n)}function X_(e){const t=Pe(kp,{}).value;t&&Y_(t,"leaveGuards",e)}function Va(e){const t=Pe(kp,{}).value;t&&Y_(t,"updateGuards",e)}function nr(e,t,n,o,a,r=s=>s()){const s=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((i,u)=>{const c=v=>{v===!1?u(Al(4,{from:n,to:t})):v instanceof Error?u(v):$O(v)?u(Al(2,{from:t,to:v})):(s&&o.enterCallbacks[a]===s&&typeof v=="function"&&s.push(v),i())},m=r(()=>e.call(o&&o.instances[a],t,n,c));let f=Promise.resolve(m);e.length<3&&(f=f.then(c)),f.catch(v=>u(v))})}function tm(e,t,n,o,a=r=>r()){const r=[];for(const s of e)for(const i in s.components){let u=s.components[i];if(!(t!=="beforeRouteEnter"&&!s.instances[i]))if(qO(u)){const m=(u.__vccOpts||u)[t];m&&r.push(nr(m,n,o,s,i,a))}else{let c=u();r.push(()=>c.then(m=>{if(!m)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${s.path}"`));const f=KD(m)?m.default:m;s.components[i]=f;const y=(f.__vccOpts||f)[t];return y&&nr(y,n,o,s,i,a)()}))}}return r}function qO(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ig(e){const t=Pe(Nc),n=Pe($p),o=O(()=>t.resolve(h(e.to))),a=O(()=>{const{matched:u}=o.value,{length:c}=u,m=u[c-1],f=n.matched;if(!m||!f.length)return-1;const v=f.findIndex(Fl.bind(null,m));if(v>-1)return v;const y=ug(u[c-2]);return c>1&&ug(m)===y&&f[f.length-1].path!==y?f.findIndex(Fl.bind(null,u[c-2])):v}),r=O(()=>a.value>-1&&HO(n.params,o.value.params)),s=O(()=>a.value>-1&&a.value===n.matched.length-1&&H_(n.params,o.value.params));function i(u={}){return zO(u)?t[h(e.replace)?"replace":"push"](h(e.to)).catch(Ps):Promise.resolve()}return{route:o,href:O(()=>o.value.href),isActive:r,isExactActive:s,navigate:i}}const UO=Le({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ig,setup(e,{slots:t}){const n=uo(ig(e)),{options:o}=Pe(Nc),a=O(()=>({[cg(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[cg(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:Ae("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},r)}}}),jO=UO;function zO(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function HO(e,t){for(const n in t){const o=t[n],a=e[n];if(typeof o=="string"){if(o!==a)return!1}else if(!Qo(a)||a.length!==o.length||o.some((r,s)=>r!==a[s]))return!1}return!0}function ug(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const cg=(e,t,n)=>e??t??n,WO=Le({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=Pe(hf),a=O(()=>e.route||o.value),r=Pe(sg,0),s=O(()=>{let c=h(r);const{matched:m}=a.value;let f;for(;(f=m[c])&&!f.components;)c++;return c}),i=O(()=>a.value.matched[s.value]);st(sg,O(()=>s.value+1)),st(kp,i),st(hf,a);const u=M();return $e(()=>[u.value,i.value,e.name],([c,m,f],[v,y,b])=>{m&&(m.instances[f]=c,y&&y!==m&&c&&c===v&&(m.leaveGuards.size||(m.leaveGuards=y.leaveGuards),m.updateGuards.size||(m.updateGuards=y.updateGuards))),c&&m&&(!y||!Fl(m,y)||!v)&&(m.enterCallbacks[f]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=a.value,m=e.name,f=i.value,v=f&&f.components[m];if(!v)return dg(n.default,{Component:v,route:c});const y=f.props[m],b=y?y===!0?c.params:typeof y=="function"?y(c):y:null,k=Ae(v,sn({},b,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[m]=null)},ref:u}));return dg(n.default,{Component:k,route:c})||k}}});function dg(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const GO=WO;function KO(e){const t=BO(e.routes,e),n=e.parseQuery||VO,o=e.stringifyQuery||lg,a=e.history,r=$s(),s=$s(),i=$s(),u=Pt(Ya);let c=Ya;cl&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=Jd.bind(null,Q=>""+Q),f=Jd.bind(null,sO),v=Jd.bind(null,Hs);function y(Q,se){let me,xe;return G_(Q)?(me=t.getRecordMatcher(Q),xe=se):xe=Q,t.addRoute(xe,me)}function b(Q){const se=t.getRecordMatcher(Q);se&&t.removeRoute(se)}function w(){return t.getRoutes().map(Q=>Q.record)}function k(Q){return!!t.getRecordMatcher(Q)}function x(Q,se){if(se=sn({},se||u.value),typeof Q=="string"){const X=em(n,Q,se.path),re=t.resolve({path:X.path},se),we=a.createHref(X.fullPath);return sn(X,re,{params:v(re.params),hash:Hs(X.hash),redirectedFrom:void 0,href:we})}let me;if(Q.path!=null)me=sn({},Q,{path:em(n,Q.path,se.path).path});else{const X=sn({},Q.params);for(const re in X)X[re]==null&&delete X[re];me=sn({},Q,{params:f(X)}),se.params=f(se.params)}const xe=t.resolve(me,se),de=Q.hash||"";xe.params=m(v(xe.params));const he=cO(o,sn({},Q,{hash:aO(de),path:xe.path})),Y=a.createHref(he);return sn({fullPath:he,hash:de,query:o===lg?LO(Q.query):Q.query||{}},xe,{redirectedFrom:void 0,href:Y})}function I(Q){return typeof Q=="string"?em(n,Q,u.value.path):sn({},Q)}function C(Q,se){if(c!==Q)return Al(8,{from:se,to:Q})}function S(Q){return $(Q)}function T(Q){return S(sn(I(Q),{replace:!0}))}function E(Q){const se=Q.matched[Q.matched.length-1];if(se&&se.redirect){const{redirect:me}=se;let xe=typeof me=="function"?me(Q):me;return typeof xe=="string"&&(xe=xe.includes("?")||xe.includes("#")?xe=I(xe):{path:xe},xe.params={}),sn({query:Q.query,hash:Q.hash,params:xe.path!=null?{}:Q.params},xe)}}function $(Q,se){const me=c=x(Q),xe=u.value,de=Q.state,he=Q.force,Y=Q.replace===!0,X=E(me);if(X)return $(sn(I(X),{state:typeof X=="object"?sn({},de,X.state):de,force:he,replace:Y}),se||me);const re=me;re.redirectedFrom=se;let we;return!he&&dO(o,xe,me)&&(we=Al(16,{to:re,from:xe}),W(xe,xe,!0,!1)),(we?Promise.resolve(we):B(re,xe)).catch(Ce=>ka(Ce)?ka(Ce,2)?Ce:G(Ce):U(Ce,re,xe)).then(Ce=>{if(Ce){if(ka(Ce,2))return $(sn({replace:Y},I(Ce.to),{state:typeof Ce.to=="object"?sn({},de,Ce.to.state):de,force:he}),se||re)}else Ce=P(re,xe,!0,Y,de);return V(re,xe,Ce),Ce})}function F(Q,se){const me=C(Q,se);return me?Promise.reject(me):Promise.resolve()}function R(Q){const se=ce.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(Q):Q()}function B(Q,se){let me;const[xe,de,he]=ZO(Q,se);me=tm(xe.reverse(),"beforeRouteLeave",Q,se);for(const X of xe)X.leaveGuards.forEach(re=>{me.push(nr(re,Q,se))});const Y=F.bind(null,Q,se);return me.push(Y),ie(me).then(()=>{me=[];for(const X of r.list())me.push(nr(X,Q,se));return me.push(Y),ie(me)}).then(()=>{me=tm(de,"beforeRouteUpdate",Q,se);for(const X of de)X.updateGuards.forEach(re=>{me.push(nr(re,Q,se))});return me.push(Y),ie(me)}).then(()=>{me=[];for(const X of he)if(X.beforeEnter)if(Qo(X.beforeEnter))for(const re of X.beforeEnter)me.push(nr(re,Q,se));else me.push(nr(X.beforeEnter,Q,se));return me.push(Y),ie(me)}).then(()=>(Q.matched.forEach(X=>X.enterCallbacks={}),me=tm(he,"beforeRouteEnter",Q,se,R),me.push(Y),ie(me))).then(()=>{me=[];for(const X of s.list())me.push(nr(X,Q,se));return me.push(Y),ie(me)}).catch(X=>ka(X,8)?X:Promise.reject(X))}function V(Q,se,me){i.list().forEach(xe=>R(()=>xe(Q,se,me)))}function P(Q,se,me,xe,de){const he=C(Q,se);if(he)return he;const Y=se===Ya,X=cl?history.state:{};me&&(xe||Y?a.replace(Q.fullPath,sn({scroll:Y&&X&&X.scroll},de)):a.push(Q.fullPath,de)),u.value=Q,W(Q,se,me,Y),G()}let z;function H(){z||(z=a.listen((Q,se,me)=>{if(!oe.listening)return;const xe=x(Q),de=E(xe);if(de){$(sn(de,{replace:!0}),xe).catch(Ps);return}c=xe;const he=u.value;cl&&yO(Q0(he.fullPath,me.delta),Bc()),B(xe,he).catch(Y=>ka(Y,12)?Y:ka(Y,2)?($(Y.to,xe).then(X=>{ka(X,20)&&!me.delta&&me.type===Ws.pop&&a.go(-1,!1)}).catch(Ps),Promise.reject()):(me.delta&&a.go(-me.delta,!1),U(Y,xe,he))).then(Y=>{Y=Y||P(xe,he,!1),Y&&(me.delta&&!ka(Y,8)?a.go(-me.delta,!1):me.type===Ws.pop&&ka(Y,20)&&a.go(-1,!1)),V(xe,he,Y)}).catch(Ps)}))}let j=$s(),N=$s(),L;function U(Q,se,me){G(Q);const xe=N.list();return xe.length?xe.forEach(de=>de(Q,se,me)):console.error(Q),Promise.reject(Q)}function ee(){return L&&u.value!==Ya?Promise.resolve():new Promise((Q,se)=>{j.add([Q,se])})}function G(Q){return L||(L=!Q,H(),j.list().forEach(([se,me])=>Q?me(Q):se()),j.reset()),Q}function W(Q,se,me,xe){const{scrollBehavior:de}=e;if(!cl||!de)return Promise.resolve();const he=!me&&_O(Q0(Q.fullPath,0))||(xe||!me)&&history.state&&history.state.scroll||null;return ze().then(()=>de(Q,se,he)).then(Y=>Y&&bO(Y)).catch(Y=>U(Y,Q,se))}const ae=Q=>a.go(Q);let ue;const ce=new Set,oe={currentRoute:u,listening:!0,addRoute:y,removeRoute:b,hasRoute:k,getRoutes:w,resolve:x,options:e,push:S,replace:T,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:r.add,beforeResolve:s.add,afterEach:i.add,onError:N.add,isReady:ee,install(Q){const se=this;Q.component("RouterLink",jO),Q.component("RouterView",GO),Q.config.globalProperties.$router=se,Object.defineProperty(Q.config.globalProperties,"$route",{enumerable:!0,get:()=>h(u)}),cl&&!ue&&u.value===Ya&&(ue=!0,S(a.location).catch(de=>{}));const me={};for(const de in Ya)Object.defineProperty(me,de,{get:()=>u.value[de],enumerable:!0});Q.provide(Nc,se),Q.provide($p,vc(me)),Q.provide(hf,u);const xe=Q.unmount;ce.add(Q),Q.unmount=function(){ce.delete(Q),ce.size<1&&(c=Ya,z&&z(),z=null,u.value=Ya,ue=!1,L=!1),xe()}}};function ie(Q){return Q.reduce((se,me)=>se.then(()=>R(me)),Promise.resolve())}return oe}function ZO(e,t){const n=[],o=[],a=[],r=Math.max(t.matched.length,e.matched.length);for(let s=0;s<r;s++){const i=t.matched[s];i&&(e.matched.find(c=>Fl(c,i))?o.push(i):n.push(i));const u=e.matched[s];u&&(t.matched.find(c=>Fl(c,u))||a.push(u))}return[n,o,a]}function _t(){return Pe(Nc)}function It(){return Pe($p)}function YO(e,t,n){return n||(e.hash?{el:e.hash}:e.meta&&e.meta.scrollToTop===!1?{}:{left:0,top:0})}const mg=KO({scrollBehavior:YO,history:kO(),routes:[]});function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}function Qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Jn(e,t,n){return t&&fg(e.prototype,t),n&&fg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gs(){return Gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gs.apply(this,arguments)}function Co(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bf(e,t)}function Hu(e){return Hu=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Hu(e)}function bf(e,t){return bf=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},bf(e,t)}function XO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function QO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JO(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QO(e)}function So(e){var t=XO();return function(){var o=Hu(e),a;if(t){var r=Hu(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return JO(this,a)}}var Cp=function(){function e(){Qn(this,e)}return Jn(e,[{key:"listenForWhisper",value:function(n,o){return this.listen(".client-"+n,o)}},{key:"notification",value:function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)}},{key:"stopListeningForWhisper",value:function(n,o){return this.stopListening(".client-"+n,o)}}]),e}(),Q_=function(){function e(t){Qn(this,e),this.namespace=t}return Jn(e,[{key:"format",value:function(n){return n.charAt(0)==="."||n.charAt(0)==="\\"?n.substr(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(n){this.namespace=n}}]),e}(),Pc=function(e){Co(n,e);var t=So(n);function n(o,a,r){var s;return Qn(this,n),s=t.call(this),s.name=a,s.pusher=o,s.options=r,s.eventFormatter=new Q_(s.options.namespace),s.subscribe(),s}return Jn(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(a,r){return this.on(this.eventFormatter.format(a),r),this}},{key:"listenToAll",value:function(a){var r=this;return this.subscription.bind_global(function(s,i){if(!s.startsWith("pusher:")){var u=r.options.namespace.replace(/\./g,"\\"),c=s.startsWith(u)?s.substring(u.length+1):"."+s;a(c,i)}}),this}},{key:"stopListening",value:function(a,r){return r?this.subscription.unbind(this.eventFormatter.format(a),r):this.subscription.unbind(this.eventFormatter.format(a)),this}},{key:"stopListeningToAll",value:function(a){return a?this.subscription.unbind_global(a):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(a){return this.on("pusher:subscription_succeeded",function(){a()}),this}},{key:"error",value:function(a){return this.on("pusher:subscription_error",function(r){a(r)}),this}},{key:"on",value:function(a,r){return this.subscription.bind(a,r),this}}]),n}(Cp),e9=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"whisper",value:function(a,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),r),this}}]),n}(Pc),t9=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"whisper",value:function(a,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),r),this}}]),n}(Pc),n9=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"here",value:function(a){return this.on("pusher:subscription_succeeded",function(r){a(Object.keys(r.members).map(function(s){return r.members[s]}))}),this}},{key:"joining",value:function(a){return this.on("pusher:member_added",function(r){a(r.info)}),this}},{key:"whisper",value:function(a,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),r),this}},{key:"leaving",value:function(a){return this.on("pusher:member_removed",function(r){a(r.info)}),this}}]),n}(Pc),J_=function(e){Co(n,e);var t=So(n);function n(o,a,r){var s;return Qn(this,n),s=t.call(this),s.events={},s.listeners={},s.name=a,s.socket=o,s.options=r,s.eventFormatter=new Q_(s.options.namespace),s.subscribe(),s}return Jn(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(a,r){return this.on(this.eventFormatter.format(a),r),this}},{key:"stopListening",value:function(a,r){return this.unbindEvent(this.eventFormatter.format(a),r),this}},{key:"subscribed",value:function(a){return this.on("connect",function(r){a(r)}),this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,r){var s=this;return this.listeners[a]=this.listeners[a]||[],this.events[a]||(this.events[a]=function(i,u){s.name===i&&s.listeners[a]&&s.listeners[a].forEach(function(c){return c(u)})},this.socket.on(a,this.events[a])),this.listeners[a].push(r),this}},{key:"unbind",value:function(){var a=this;Object.keys(this.events).forEach(function(r){a.unbindEvent(r)})}},{key:"unbindEvent",value:function(a,r){this.listeners[a]=this.listeners[a]||[],r&&(this.listeners[a]=this.listeners[a].filter(function(s){return s!==r})),(!r||this.listeners[a].length===0)&&(this.events[a]&&(this.socket.removeListener(a,this.events[a]),delete this.events[a]),delete this.listeners[a])}}]),n}(Cp),e2=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"whisper",value:function(a,r){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:r}),this}}]),n}(J_),o9=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"here",value:function(a){return this.on("presence:subscribed",function(r){a(r.map(function(s){return s.user_info}))}),this}},{key:"joining",value:function(a){return this.on("presence:joining",function(r){return a(r.user_info)}),this}},{key:"whisper",value:function(a,r){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:r}),this}},{key:"leaving",value:function(a){return this.on("presence:leaving",function(r){return a(r.user_info)}),this}}]),n}(e2),Wu=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(a,r){return this}},{key:"listenToAll",value:function(a){return this}},{key:"stopListening",value:function(a,r){return this}},{key:"subscribed",value:function(a){return this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,r){return this}}]),n}(Cp),pg=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"whisper",value:function(a,r){return this}}]),n}(Wu),a9=function(e){Co(n,e);var t=So(n);function n(){return Qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"here",value:function(a){return this}},{key:"joining",value:function(a){return this}},{key:"whisper",value:function(a,r){return this}},{key:"leaving",value:function(a){return this}}]),n}(Wu),Sp=function(){function e(t){Qn(this,e),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return Jn(e,[{key:"setOptions",value:function(n){this.options=Gs(this._defaultOptions,n);var o=this.csrfToken();return o&&(this.options.auth.headers["X-CSRF-TOKEN"]=o,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=o),o=this.options.bearerToken,o&&(this.options.auth.headers.Authorization="Bearer "+o,this.options.userAuthentication.headers.Authorization="Bearer "+o),n}},{key:"csrfToken",value:function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):null}}]),e}(),vg=function(e){Co(n,e);var t=So(n);function n(){var o;return Qn(this,n),o=t.apply(this,arguments),o.channels={},o}return Jn(n,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(a,r,s){return this.channel(a).listen(r,s)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new Pc(this.pusher,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new e9(this.pusher,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"encryptedPrivateChannel",value:function(a){return this.channels["private-encrypted-"+a]||(this.channels["private-encrypted-"+a]=new t9(this.pusher,"private-encrypted-"+a,this.options)),this.channels["private-encrypted-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new n9(this.pusher,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var r=this,s=[a,"private-"+a,"private-encrypted-"+a,"presence-"+a];s.forEach(function(i,u){r.leaveChannel(i)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(Sp),r9=function(e){Co(n,e);var t=So(n);function n(){var o;return Qn(this,n),o=t.apply(this,arguments),o.channels={},o}return Jn(n,[{key:"connect",value:function(){var a=this,r=this.getSocketIO();return this.socket=r(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(a.channels).forEach(function(s){s.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(a,r,s){return this.channel(a).listen(r,s)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new J_(this.socket,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new e2(this.socket,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new o9(this.socket,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var r=this,s=[a,"private-"+a,"presence-"+a];s.forEach(function(i){r.leaveChannel(i)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(Sp),l9=function(e){Co(n,e);var t=So(n);function n(){var o;return Qn(this,n),o=t.apply(this,arguments),o.channels={},o}return Jn(n,[{key:"connect",value:function(){}},{key:"listen",value:function(a,r,s){return new Wu}},{key:"channel",value:function(a){return new Wu}},{key:"privateChannel",value:function(a){return new pg}},{key:"encryptedPrivateChannel",value:function(a){return new pg}},{key:"presenceChannel",value:function(a){return new a9}},{key:"leave",value:function(a){}},{key:"leaveChannel",value:function(a){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(Sp),s9=function(){function e(t){Qn(this,e),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Jn(e,[{key:"channel",value:function(n){return this.connector.channel(n)}},{key:"connect",value:function(){this.options.broadcaster=="reverb"?this.connector=new vg(Gs(Gs({},this.options),{cluster:""})):this.options.broadcaster=="pusher"?this.connector=new vg(this.options):this.options.broadcaster=="socket.io"?this.connector=new r9(this.options):this.options.broadcaster=="null"?this.connector=new l9(this.options):typeof this.options.broadcaster=="function"&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(n){return this.connector.presenceChannel(n)}},{key:"leave",value:function(n){this.connector.leave(n)}},{key:"leaveChannel",value:function(n){this.connector.leaveChannel(n)}},{key:"leaveAllChannels",value:function(){for(var n in this.connector.channels)this.leaveChannel(n)}},{key:"listen",value:function(n,o,a){return this.connector.listen(n,o,a)}},{key:"private",value:function(n){return this.connector.privateChannel(n)}},{key:"encryptedPrivate",value:function(n){return this.connector.encryptedPrivateChannel(n)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":gf(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var n=this;Vue.http.interceptors.push(function(o,a){n.socketId()&&o.headers.set("X-Socket-ID",n.socketId()),a()})}},{key:"registerAxiosRequestInterceptor",value:function(){var n=this;axios.interceptors.request.use(function(o){return n.socketId()&&(o.headers["X-Socket-Id"]=n.socketId()),o})}},{key:"registerjQueryAjaxSetup",value:function(){var n=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(o,a,r){n.socketId()&&r.setRequestHeader("X-Socket-Id",n.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var n=this;document.addEventListener("turbo:before-fetch-request",function(o){o.detail.fetchOptions.headers["X-Socket-Id"]=n.socketId()})}}]),e}(),t2={exports:{}};/*!
 * Pusher JavaScript Library v8.3.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(e,t){(function(o,a){e.exports=a()})(window,function(){return function(n){var o={};function a(r){if(o[r])return o[r].exports;var s=o[r]={i:r,l:!1,exports:{}};return n[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=o,a.d=function(r,s,i){a.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:i})},a.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},a.t=function(r,s){if(s&1&&(r=a(r)),s&8||s&4&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),s&2&&typeof r!="string")for(var u in r)a.d(i,u,(function(c){return r[c]}).bind(null,u));return i},a.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(s,"a",s),s},a.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},a.p="",a(a.s=2)}([function(n,o,a){var r=this&&this.__extends||function(){var w=function(k,x){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var S in C)C.hasOwnProperty(S)&&(I[S]=C[S])},w(k,x)};return function(k,x){w(k,x);function I(){this.constructor=k}k.prototype=x===null?Object.create(x):(I.prototype=x.prototype,new I)}}();Object.defineProperty(o,"__esModule",{value:!0});var s=256,i=function(){function w(k){k===void 0&&(k="="),this._paddingCharacter=k}return w.prototype.encodedLength=function(k){return this._paddingCharacter?(k+2)/3*4|0:(k*8+5)/6|0},w.prototype.encode=function(k){for(var x="",I=0;I<k.length-2;I+=3){var C=k[I]<<16|k[I+1]<<8|k[I+2];x+=this._encodeByte(C>>>3*6&63),x+=this._encodeByte(C>>>2*6&63),x+=this._encodeByte(C>>>1*6&63),x+=this._encodeByte(C>>>0*6&63)}var S=k.length-I;if(S>0){var C=k[I]<<16|(S===2?k[I+1]<<8:0);x+=this._encodeByte(C>>>3*6&63),x+=this._encodeByte(C>>>2*6&63),S===2?x+=this._encodeByte(C>>>1*6&63):x+=this._paddingCharacter||"",x+=this._paddingCharacter||""}return x},w.prototype.maxDecodedLength=function(k){return this._paddingCharacter?k/4*3|0:(k*6+7)/8|0},w.prototype.decodedLength=function(k){return this.maxDecodedLength(k.length-this._getPaddingLength(k))},w.prototype.decode=function(k){if(k.length===0)return new Uint8Array(0);for(var x=this._getPaddingLength(k),I=k.length-x,C=new Uint8Array(this.maxDecodedLength(I)),S=0,T=0,E=0,$=0,F=0,R=0,B=0;T<I-4;T+=4)$=this._decodeChar(k.charCodeAt(T+0)),F=this._decodeChar(k.charCodeAt(T+1)),R=this._decodeChar(k.charCodeAt(T+2)),B=this._decodeChar(k.charCodeAt(T+3)),C[S++]=$<<2|F>>>4,C[S++]=F<<4|R>>>2,C[S++]=R<<6|B,E|=$&s,E|=F&s,E|=R&s,E|=B&s;if(T<I-1&&($=this._decodeChar(k.charCodeAt(T)),F=this._decodeChar(k.charCodeAt(T+1)),C[S++]=$<<2|F>>>4,E|=$&s,E|=F&s),T<I-2&&(R=this._decodeChar(k.charCodeAt(T+2)),C[S++]=F<<4|R>>>2,E|=R&s),T<I-3&&(B=this._decodeChar(k.charCodeAt(T+3)),C[S++]=R<<6|B,E|=B&s),E!==0)throw new Error("Base64Coder: incorrect characters for decoding");return C},w.prototype._encodeByte=function(k){var x=k;return x+=65,x+=25-k>>>8&6,x+=51-k>>>8&-75,x+=61-k>>>8&-15,x+=62-k>>>8&3,String.fromCharCode(x)},w.prototype._decodeChar=function(k){var x=s;return x+=(42-k&k-44)>>>8&-s+k-43+62,x+=(46-k&k-48)>>>8&-s+k-47+63,x+=(47-k&k-58)>>>8&-s+k-48+52,x+=(64-k&k-91)>>>8&-s+k-65+0,x+=(96-k&k-123)>>>8&-s+k-97+26,x},w.prototype._getPaddingLength=function(k){var x=0;if(this._paddingCharacter){for(var I=k.length-1;I>=0&&k[I]===this._paddingCharacter;I--)x++;if(k.length<4||x>2)throw new Error("Base64Coder: incorrect padding")}return x},w}();o.Coder=i;var u=new i;function c(w){return u.encode(w)}o.encode=c;function m(w){return u.decode(w)}o.decode=m;var f=function(w){r(k,w);function k(){return w!==null&&w.apply(this,arguments)||this}return k.prototype._encodeByte=function(x){var I=x;return I+=65,I+=25-x>>>8&6,I+=51-x>>>8&-75,I+=61-x>>>8&-13,I+=62-x>>>8&49,String.fromCharCode(I)},k.prototype._decodeChar=function(x){var I=s;return I+=(44-x&x-46)>>>8&-s+x-45+62,I+=(94-x&x-96)>>>8&-s+x-95+63,I+=(47-x&x-58)>>>8&-s+x-48+52,I+=(64-x&x-91)>>>8&-s+x-65+0,I+=(96-x&x-123)>>>8&-s+x-97+26,I},k}(i);o.URLSafeCoder=f;var v=new f;function y(w){return v.encode(w)}o.encodeURLSafe=y;function b(w){return v.decode(w)}o.decodeURLSafe=b,o.encodedLength=function(w){return u.encodedLength(w)},o.maxDecodedLength=function(w){return u.maxDecodedLength(w)},o.decodedLength=function(w){return u.decodedLength(w)}},function(n,o,a){Object.defineProperty(o,"__esModule",{value:!0});var r="utf8: invalid string",s="utf8: invalid source encoding";function i(m){for(var f=new Uint8Array(u(m)),v=0,y=0;y<m.length;y++){var b=m.charCodeAt(y);b<128?f[v++]=b:b<2048?(f[v++]=192|b>>6,f[v++]=128|b&63):b<55296?(f[v++]=224|b>>12,f[v++]=128|b>>6&63,f[v++]=128|b&63):(y++,b=(b&1023)<<10,b|=m.charCodeAt(y)&1023,b+=65536,f[v++]=240|b>>18,f[v++]=128|b>>12&63,f[v++]=128|b>>6&63,f[v++]=128|b&63)}return f}o.encode=i;function u(m){for(var f=0,v=0;v<m.length;v++){var y=m.charCodeAt(v);if(y<128)f+=1;else if(y<2048)f+=2;else if(y<55296)f+=3;else if(y<=57343){if(v>=m.length-1)throw new Error(r);v++,f+=4}else throw new Error(r)}return f}o.encodedLength=u;function c(m){for(var f=[],v=0;v<m.length;v++){var y=m[v];if(y&128){var b=void 0;if(y<224){if(v>=m.length)throw new Error(s);var w=m[++v];if((w&192)!==128)throw new Error(s);y=(y&31)<<6|w&63,b=128}else if(y<240){if(v>=m.length-1)throw new Error(s);var w=m[++v],k=m[++v];if((w&192)!==128||(k&192)!==128)throw new Error(s);y=(y&15)<<12|(w&63)<<6|k&63,b=2048}else if(y<248){if(v>=m.length-2)throw new Error(s);var w=m[++v],k=m[++v],x=m[++v];if((w&192)!==128||(k&192)!==128||(x&192)!==128)throw new Error(s);y=(y&15)<<18|(w&63)<<12|(k&63)<<6|x&63,b=65536}else throw new Error(s);if(y<b||y>=55296&&y<=57343)throw new Error(s);if(y>=65536){if(y>1114111)throw new Error(s);y-=65536,f.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}f.push(String.fromCharCode(y))}return f.join("")}o.decode=c},function(n,o,a){n.exports=a(3).default},function(n,o,a){a.r(o);class r{constructor(q,J){this.lastId=0,this.prefix=q,this.name=J}create(q){this.lastId++;var J=this.lastId,ve=this.prefix+J,ye=this.name+"["+J+"]",Oe=!1,Ye=function(){Oe||(q.apply(null,arguments),Oe=!0)};return this[J]=Ye,{number:J,id:ve,name:ye,callback:Ye}}remove(q){delete this[q.number]}}var s=new r("_pusher_script_","Pusher.ScriptReceivers"),i={VERSION:"8.3.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},u=i;class c{constructor(q){this.options=q,this.receivers=q.receivers||s,this.loading={}}load(q,J,ve){var ye=this;if(ye.loading[q]&&ye.loading[q].length>0)ye.loading[q].push(ve);else{ye.loading[q]=[ve];var Oe=Ft.createScriptRequest(ye.getPath(q,J)),Ye=ye.receivers.create(function(mt){if(ye.receivers.remove(Ye),ye.loading[q]){var St=ye.loading[q];delete ye.loading[q];for(var Qt=function(Pn){Pn||Oe.cleanup()},ln=0;ln<St.length;ln++)St[ln](mt,Qt)}});Oe.send(Ye)}}getRoot(q){var J,ve=Ft.getDocument().location.protocol;return q&&q.useTLS||ve==="https:"?J=this.options.cdn_https:J=this.options.cdn_http,J.replace(/\/*$/,"")+"/"+this.options.version}getPath(q,J){return this.getRoot(J)+"/"+q+this.options.suffix+".js"}}var m=new r("_pusher_dependencies","Pusher.DependenciesReceivers"),f=new c({cdn_http:u.cdn_http,cdn_https:u.cdn_https,version:u.VERSION,suffix:u.dependency_suffix,receivers:m});const v={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var b={buildLogSuffix:function(te){const q="See:",J=v.urls[te];if(!J)return"";let ve;return J.fullUrl?ve=J.fullUrl:J.path&&(ve=v.baseUrl+J.path),ve?`${q} ${ve}`:""}},w;(function(te){te.UserAuthentication="user-authentication",te.ChannelAuthorization="channel-authorization"})(w||(w={}));class k extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class I extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class $ extends Error{constructor(q){super(q),Object.setPrototypeOf(this,new.target.prototype)}}class F extends Error{constructor(q,J){super(J),this.status=q,Object.setPrototypeOf(this,new.target.prototype)}}var B=function(te,q,J,ve,ye){const Oe=Ft.createXHR();Oe.open("POST",J.endpoint,!0),Oe.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var Ye in J.headers)Oe.setRequestHeader(Ye,J.headers[Ye]);if(J.headersProvider!=null){let mt=J.headersProvider();for(var Ye in mt)Oe.setRequestHeader(Ye,mt[Ye])}return Oe.onreadystatechange=function(){if(Oe.readyState===4)if(Oe.status===200){let mt,St=!1;try{mt=JSON.parse(Oe.responseText),St=!0}catch{ye(new F(200,`JSON returned from ${ve.toString()} endpoint was invalid, yet status code was 200. Data was: ${Oe.responseText}`),null)}St&&ye(null,mt)}else{let mt="";switch(ve){case w.UserAuthentication:mt=b.buildLogSuffix("authenticationEndpoint");break;case w.ChannelAuthorization:mt=`Clients must be authorized to join private or presence channels. ${b.buildLogSuffix("authorizationEndpoint")}`;break}ye(new F(Oe.status,`Unable to retrieve auth string from ${ve.toString()} endpoint - received status: ${Oe.status} from ${J.endpoint}. ${mt}`),null)}},Oe.send(q),Oe};function V(te){return L(j(te))}var P=String.fromCharCode,z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H=function(te){var q=te.charCodeAt(0);return q<128?te:q<2048?P(192|q>>>6)+P(128|q&63):P(224|q>>>12&15)+P(128|q>>>6&63)+P(128|q&63)},j=function(te){return te.replace(/[^\x00-\x7F]/g,H)},N=function(te){var q=[0,2,1][te.length%3],J=te.charCodeAt(0)<<16|(te.length>1?te.charCodeAt(1):0)<<8|(te.length>2?te.charCodeAt(2):0),ve=[z.charAt(J>>>18),z.charAt(J>>>12&63),q>=2?"=":z.charAt(J>>>6&63),q>=1?"=":z.charAt(J&63)];return ve.join("")},L=window.btoa||function(te){return te.replace(/[\s\S]{1,3}/g,N)};class U{constructor(q,J,ve,ye){this.clear=J,this.timer=q(()=>{this.timer&&(this.timer=ye(this.timer))},ve)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var ee=U;function G(te){window.clearTimeout(te)}function W(te){window.clearInterval(te)}class ae extends ee{constructor(q,J){super(setTimeout,G,q,function(ve){return J(),null})}}class ue extends ee{constructor(q,J){super(setInterval,W,q,function(ve){return J(),ve})}}var ce={now(){return Date.now?Date.now():new Date().valueOf()},defer(te){return new ae(0,te)},method(te,...q){var J=Array.prototype.slice.call(arguments,1);return function(ve){return ve[te].apply(ve,J.concat(arguments))}}},oe=ce;function ie(te,...q){for(var J=0;J<q.length;J++){var ve=q[J];for(var ye in ve)ve[ye]&&ve[ye].constructor&&ve[ye].constructor===Object?te[ye]=ie(te[ye]||{},ve[ye]):te[ye]=ve[ye]}return te}function Q(){for(var te=["Pusher"],q=0;q<arguments.length;q++)typeof arguments[q]=="string"?te.push(arguments[q]):te.push(ft(arguments[q]));return te.join(" : ")}function se(te,q){var J=Array.prototype.indexOf;if(te===null)return-1;if(J&&te.indexOf===J)return te.indexOf(q);for(var ve=0,ye=te.length;ve<ye;ve++)if(te[ve]===q)return ve;return-1}function me(te,q){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&q(te[J],J,te)}function xe(te){var q=[];return me(te,function(J,ve){q.push(ve)}),q}function de(te){var q=[];return me(te,function(J){q.push(J)}),q}function he(te,q,J){for(var ve=0;ve<te.length;ve++)q.call(J||window,te[ve],ve,te)}function Y(te,q){for(var J=[],ve=0;ve<te.length;ve++)J.push(q(te[ve],ve,te,J));return J}function X(te,q){var J={};return me(te,function(ve,ye){J[ye]=q(ve)}),J}function re(te,q){q=q||function(ye){return!!ye};for(var J=[],ve=0;ve<te.length;ve++)q(te[ve],ve,te,J)&&J.push(te[ve]);return J}function we(te,q){var J={};return me(te,function(ve,ye){(q&&q(ve,ye,te,J)||ve)&&(J[ye]=ve)}),J}function Ce(te){var q=[];return me(te,function(J,ve){q.push([ve,J])}),q}function ge(te,q){for(var J=0;J<te.length;J++)if(q(te[J],J,te))return!0;return!1}function Re(te,q){for(var J=0;J<te.length;J++)if(!q(te[J],J,te))return!1;return!0}function et(te){return X(te,function(q){return typeof q=="object"&&(q=ft(q)),encodeURIComponent(V(q.toString()))})}function kt(te){var q=we(te,function(ve){return ve!==void 0}),J=Y(Ce(et(q)),oe.method("join","=")).join("&");return J}function lt(te){var q=[],J=[];return function ve(ye,Oe){var Ye,mt,St;switch(typeof ye){case"object":if(!ye)return null;for(Ye=0;Ye<q.length;Ye+=1)if(q[Ye]===ye)return{$ref:J[Ye]};if(q.push(ye),J.push(Oe),Object.prototype.toString.apply(ye)==="[object Array]")for(St=[],Ye=0;Ye<ye.length;Ye+=1)St[Ye]=ve(ye[Ye],Oe+"["+Ye+"]");else{St={};for(mt in ye)Object.prototype.hasOwnProperty.call(ye,mt)&&(St[mt]=ve(ye[mt],Oe+"["+JSON.stringify(mt)+"]"))}return St;case"number":case"string":case"boolean":return ye}}(te,"$")}function ft(te){try{return JSON.stringify(te)}catch{return JSON.stringify(lt(te))}}class zt{constructor(){this.globalLog=q=>{window.console&&window.console.log&&window.console.log(q)}}debug(...q){this.log(this.globalLog,q)}warn(...q){this.log(this.globalLogWarn,q)}error(...q){this.log(this.globalLogError,q)}globalLogWarn(q){window.console&&window.console.warn?window.console.warn(q):this.globalLog(q)}globalLogError(q){window.console&&window.console.error?window.console.error(q):this.globalLogWarn(q)}log(q,...J){var ve=Q.apply(this,arguments);Pd.log?Pd.log(ve):Pd.logToConsole&&q.bind(this)(ve)}}var De=new zt,_e=function(te,q,J,ve,ye){(J.headers!==void 0||J.headersProvider!=null)&&De.warn(`To send headers with the ${ve.toString()} request, you must use AJAX, rather than JSONP.`);var Oe=te.nextAuthCallbackID.toString();te.nextAuthCallbackID++;var Ye=te.getDocument(),mt=Ye.createElement("script");te.auth_callbacks[Oe]=function(ln){ye(null,ln)};var St="Pusher.auth_callbacks['"+Oe+"']";mt.src=J.endpoint+"?callback="+encodeURIComponent(St)+"&"+q;var Qt=Ye.getElementsByTagName("head")[0]||Ye.documentElement;Qt.insertBefore(mt,Qt.firstChild)},Te=_e;class Xe{constructor(q){this.src=q}send(q){var J=this,ve="Error loading "+J.src;J.script=document.createElement("script"),J.script.id=q.id,J.script.src=J.src,J.script.type="text/javascript",J.script.charset="UTF-8",J.script.addEventListener?(J.script.onerror=function(){q.callback(ve)},J.script.onload=function(){q.callback(null)}):J.script.onreadystatechange=function(){(J.script.readyState==="loaded"||J.script.readyState==="complete")&&q.callback(null)},J.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(J.errorScript=document.createElement("script"),J.errorScript.id=q.id+"_error",J.errorScript.text=q.name+"('"+ve+"');",J.script.async=J.errorScript.async=!1):J.script.async=!0;var ye=document.getElementsByTagName("head")[0];ye.insertBefore(J.script,ye.firstChild),J.errorScript&&ye.insertBefore(J.errorScript,J.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Me{constructor(q,J){this.url=q,this.data=J}send(q){if(!this.request){var J=kt(this.data),ve=this.url+"/"+q.number+"?"+J;this.request=Ft.createScriptRequest(ve),this.request.send(q)}}cleanup(){this.request&&this.request.cleanup()}}var ke=function(te,q){return function(J,ve){var ye="http"+(q?"s":"")+"://",Oe=ye+(te.host||te.options.host)+te.options.path,Ye=Ft.createJSONPRequest(Oe,J),mt=Ft.ScriptReceivers.create(function(St,Qt){s.remove(mt),Ye.cleanup(),Qt&&Qt.host&&(te.host=Qt.host),ve&&ve(St,Qt)});Ye.send(mt)}},We={name:"jsonp",getAgent:ke},$t=We;function Yt(te,q,J){var ve=te+(q.useTLS?"s":""),ye=q.useTLS?q.hostTLS:q.hostNonTLS;return ve+"://"+ye+J}function Fe(te,q){var J="/app/"+te,ve="?protocol="+u.PROTOCOL+"&client=js&version="+u.VERSION+(q?"&"+q:"");return J+ve}var Ge={getInitial:function(te,q){var J=(q.httpPath||"")+Fe(te,"flash=false");return Yt("ws",q,J)}},ht={getInitial:function(te,q){var J=(q.httpPath||"/pusher")+Fe(te);return Yt("http",q,J)}},Xt={getInitial:function(te,q){return Yt("http",q,q.httpPath||"/pusher")},getPath:function(te,q){return Fe(te)}};class Ke{constructor(){this._callbacks={}}get(q){return this._callbacks[He(q)]}add(q,J,ve){var ye=He(q);this._callbacks[ye]=this._callbacks[ye]||[],this._callbacks[ye].push({fn:J,context:ve})}remove(q,J,ve){if(!q&&!J&&!ve){this._callbacks={};return}var ye=q?[He(q)]:xe(this._callbacks);J||ve?this.removeCallback(ye,J,ve):this.removeAllCallbacks(ye)}removeCallback(q,J,ve){he(q,function(ye){this._callbacks[ye]=re(this._callbacks[ye]||[],function(Oe){return J&&J!==Oe.fn||ve&&ve!==Oe.context}),this._callbacks[ye].length===0&&delete this._callbacks[ye]},this)}removeAllCallbacks(q){he(q,function(J){delete this._callbacks[J]},this)}}function He(te){return"_"+te}class vt{constructor(q){this.callbacks=new Ke,this.global_callbacks=[],this.failThrough=q}bind(q,J,ve){return this.callbacks.add(q,J,ve),this}bind_global(q){return this.global_callbacks.push(q),this}unbind(q,J,ve){return this.callbacks.remove(q,J,ve),this}unbind_global(q){return q?(this.global_callbacks=re(this.global_callbacks||[],J=>J!==q),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(q,J,ve){for(var ye=0;ye<this.global_callbacks.length;ye++)this.global_callbacks[ye](q,J);var Oe=this.callbacks.get(q),Ye=[];if(ve?Ye.push(J,ve):J&&Ye.push(J),Oe&&Oe.length>0)for(var ye=0;ye<Oe.length;ye++)Oe[ye].fn.apply(Oe[ye].context||window,Ye);else this.failThrough&&this.failThrough(q,J);return this}}class pn extends vt{constructor(q,J,ve,ye,Oe){super(),this.initialize=Ft.transportConnectionInitializer,this.hooks=q,this.name=J,this.priority=ve,this.key=ye,this.options=Oe,this.state="new",this.timeline=Oe.timeline,this.activityTimeout=Oe.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var q=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(q,this.options)}catch(J){return oe.defer(()=>{this.onError(J),this.changeState("closed")}),!1}return this.bindListeners(),De.debug("Connecting",{transport:this.name,url:q}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(q){return this.state==="open"?(oe.defer(()=>{this.socket&&this.socket.send(q)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(q){this.emit("error",{type:"WebSocketError",error:q}),this.timeline.error(this.buildTimelineMessage({error:q.toString()}))}onClose(q){q?this.changeState("closed",{code:q.code,reason:q.reason,wasClean:q.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(q){this.emit("message",q)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=q=>{this.onError(q)},this.socket.onclose=q=>{this.onClose(q)},this.socket.onmessage=q=>{this.onMessage(q)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(q,J){this.state=q,this.timeline.info(this.buildTimelineMessage({state:q,params:J})),this.emit(q,J)}buildTimelineMessage(q){return ie({cid:this.id},q)}}class Dn{constructor(q){this.hooks=q}isSupported(q){return this.hooks.isSupported(q)}createConnection(q,J,ve,ye){return new pn(this.hooks,q,J,ve,ye)}}var _o=new Dn({urls:Ge,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!Ft.getWebSocketAPI()},isSupported:function(){return!!Ft.getWebSocketAPI()},getSocket:function(te){return Ft.createWebSocket(te)}}),Eo={urls:ht,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},jt=ie({getSocket:function(te){return Ft.HTTPFactory.createStreamingSocket(te)}},Eo),xn=ie({getSocket:function(te){return Ft.HTTPFactory.createPollingSocket(te)}},Eo),Ht={isSupported:function(){return Ft.isXHRSupported()}},ct=new Dn(ie({},jt,Ht)),jn=new Dn(ie({},xn,Ht)),Lt={ws:_o,xhr_streaming:ct,xhr_polling:jn},it=Lt,Wt=new Dn({file:"sockjs",urls:Xt,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(te,q){return new window.SockJS(te,null,{js_path:f.getPath("sockjs",{useTLS:q.useTLS}),ignore_null_origin:q.ignoreNullOrigin})},beforeOpen:function(te,q){te.send(JSON.stringify({path:q}))}}),Fo={isSupported:function(te){var q=Ft.isXDRSupported(te.useTLS);return q}},Jr=new Dn(ie({},jt,Fo)),Ed=new Dn(ie({},xn,Fo));it.xdr_streaming=Jr,it.xdr_polling=Ed,it.sockjs=Wt;var F5=it;class A5 extends vt{constructor(){super();var q=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){q.emit("online")},!1),window.addEventListener("offline",function(){q.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var R5=new A5;class D5{constructor(q,J,ve){this.manager=q,this.transport=J,this.minPingDelay=ve.minPingDelay,this.maxPingDelay=ve.maxPingDelay,this.pingDelay=void 0}createConnection(q,J,ve,ye){ye=ie({},ye,{activityTimeout:this.pingDelay});var Oe=this.transport.createConnection(q,J,ve,ye),Ye=null,mt=function(){Oe.unbind("open",mt),Oe.bind("closed",St),Ye=oe.now()},St=Qt=>{if(Oe.unbind("closed",St),Qt.code===1002||Qt.code===1003)this.manager.reportDeath();else if(!Qt.wasClean&&Ye){var ln=oe.now()-Ye;ln<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(ln/2,this.minPingDelay))}};return Oe.bind("open",mt),Oe}isSupported(q){return this.manager.isAlive()&&this.transport.isSupported(q)}}const th={decodeMessage:function(te){try{var q=JSON.parse(te.data),J=q.data;if(typeof J=="string")try{J=JSON.parse(q.data)}catch{}var ve={event:q.event,channel:q.channel,data:J};return q.user_id&&(ve.user_id=q.user_id),ve}catch(ye){throw{type:"MessageParseError",error:ye,data:te.data}}},encodeMessage:function(te){return JSON.stringify(te)},processHandshake:function(te){var q=th.decodeMessage(te);if(q.event==="pusher:connection_established"){if(!q.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:q.data.socket_id,activityTimeout:q.data.activity_timeout*1e3}}else{if(q.event==="pusher:error")return{action:this.getCloseAction(q.data),error:this.getCloseError(q.data)};throw"Invalid handshake"}},getCloseAction:function(te){return te.code<4e3?te.code>=1002&&te.code<=1004?"backoff":null:te.code===4e3?"tls_only":te.code<4100?"refused":te.code<4200?"backoff":te.code<4300?"retry":"refused"},getCloseError:function(te){return te.code!==1e3&&te.code!==1001?{type:"PusherError",data:{code:te.code,message:te.reason||te.message}}:null}};var _r=th;class O5 extends vt{constructor(q,J){super(),this.id=q,this.transport=J,this.activityTimeout=J.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(q){return this.transport.send(q)}send_event(q,J,ve){var ye={event:q,data:J};return ve&&(ye.channel=ve),De.debug("Event sent",ye),this.send(_r.encodeMessage(ye))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var q={message:ve=>{var ye;try{ye=_r.decodeMessage(ve)}catch(Oe){this.emit("error",{type:"MessageParseError",error:Oe,data:ve.data})}if(ye!==void 0){switch(De.debug("Event recd",ye),ye.event){case"pusher:error":this.emit("error",{type:"PusherError",data:ye.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",ye)}},activity:()=>{this.emit("activity")},error:ve=>{this.emit("error",ve)},closed:ve=>{J(),ve&&ve.code&&this.handleCloseEvent(ve),this.transport=null,this.emit("closed")}},J=()=>{me(q,(ve,ye)=>{this.transport.unbind(ye,ve)})};me(q,(ve,ye)=>{this.transport.bind(ye,ve)})}handleCloseEvent(q){var J=_r.getCloseAction(q),ve=_r.getCloseError(q);ve&&this.emit("error",ve),J&&this.emit(J,{action:J,error:ve})}}class B5{constructor(q,J){this.transport=q,this.callback=J,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=q=>{this.unbindListeners();var J;try{J=_r.processHandshake(q)}catch(ve){this.finish("error",{error:ve}),this.transport.close();return}J.action==="connected"?this.finish("connected",{connection:new O5(J.id,this.transport),activityTimeout:J.activityTimeout}):(this.finish(J.action,{error:J.error}),this.transport.close())},this.onClosed=q=>{this.unbindListeners();var J=_r.getCloseAction(q)||"backoff",ve=_r.getCloseError(q);this.finish(J,{error:ve})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(q,J){this.callback(ie({transport:this.transport,action:q},J))}}class N5{constructor(q,J){this.timeline=q,this.options=J||{}}send(q,J){this.timeline.isEmpty()||this.timeline.send(Ft.TimelineTransport.getAgent(this,q),J)}}class Fd extends vt{constructor(q,J){super(function(ve,ye){De.debug("No callbacks on "+q+" for "+ve)}),this.name=q,this.pusher=J,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(q,J){return J(null,{auth:""})}trigger(q,J){if(q.indexOf("client-")!==0)throw new k("Event '"+q+"' does not start with 'client-'");if(!this.subscribed){var ve=b.buildLogSuffix("triggeringClientEvents");De.warn(`Client event triggered before channel 'subscription_succeeded' event . ${ve}`)}return this.pusher.send_event(q,J,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(q){var J=q.event,ve=q.data;if(J==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(q);else if(J==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(q);else if(J.indexOf("pusher_internal:")!==0){var ye={};this.emit(J,ve,ye)}}handleSubscriptionSucceededEvent(q){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",q.data)}handleSubscriptionCountEvent(q){q.data.subscription_count&&(this.subscriptionCount=q.data.subscription_count),this.emit("pusher:subscription_count",q.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(q,J)=>{q?(this.subscriptionPending=!1,De.error(q.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:q.message},q instanceof F?{status:q.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:J.auth,channel_data:J.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Ad extends Fd{authorize(q,J){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:q},J)}}class P5{constructor(){this.reset()}get(q){return Object.prototype.hasOwnProperty.call(this.members,q)?{id:q,info:this.members[q]}:null}each(q){me(this.members,(J,ve)=>{q(this.get(ve))})}setMyID(q){this.myID=q}onSubscription(q){this.members=q.presence.hash,this.count=q.presence.count,this.me=this.get(this.myID)}addMember(q){return this.get(q.user_id)===null&&this.count++,this.members[q.user_id]=q.user_info,this.get(q.user_id)}removeMember(q){var J=this.get(q.user_id);return J&&(delete this.members[q.user_id],this.count--),J}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var M5=function(te,q,J,ve){function ye(Oe){return Oe instanceof J?Oe:new J(function(Ye){Ye(Oe)})}return new(J||(J=Promise))(function(Oe,Ye){function mt(ln){try{Qt(ve.next(ln))}catch(Pn){Ye(Pn)}}function St(ln){try{Qt(ve.throw(ln))}catch(Pn){Ye(Pn)}}function Qt(ln){ln.done?Oe(ln.value):ye(ln.value).then(mt,St)}Qt((ve=ve.apply(te,q||[])).next())})};class V5 extends Ad{constructor(q,J){super(q,J),this.members=new P5}authorize(q,J){super.authorize(q,(ve,ye)=>M5(this,void 0,void 0,function*(){if(!ve)if(ye=ye,ye.channel_data!=null){var Oe=JSON.parse(ye.channel_data);this.members.setMyID(Oe.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let Ye=b.buildLogSuffix("authorizationEndpoint");De.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${Ye}, or the user should be signed in.`),J("Invalid auth response");return}J(ve,ye)}))}handleEvent(q){var J=q.event;if(J.indexOf("pusher_internal:")===0)this.handleInternalEvent(q);else{var ve=q.data,ye={};q.user_id&&(ye.user_id=q.user_id),this.emit(J,ve,ye)}}handleInternalEvent(q){var J=q.event,ve=q.data;switch(J){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(q);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(q);break;case"pusher_internal:member_added":var ye=this.members.addMember(ve);this.emit("pusher:member_added",ye);break;case"pusher_internal:member_removed":var Oe=this.members.removeMember(ve);Oe&&this.emit("pusher:member_removed",Oe);break}}handleSubscriptionSucceededEvent(q){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(q.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var L5=a(1),Rd=a(0);class q5 extends Ad{constructor(q,J,ve){super(q,J),this.key=null,this.nacl=ve}authorize(q,J){super.authorize(q,(ve,ye)=>{if(ve){J(ve,ye);return}let Oe=ye.shared_secret;if(!Oe){J(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Rd.decode)(Oe),delete ye.shared_secret,J(null,ye)})}trigger(q,J){throw new T("Client events are not currently supported for encrypted channels")}handleEvent(q){var J=q.event,ve=q.data;if(J.indexOf("pusher_internal:")===0||J.indexOf("pusher:")===0){super.handleEvent(q);return}this.handleEncryptedEvent(J,ve)}handleEncryptedEvent(q,J){if(!this.key){De.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!J.ciphertext||!J.nonce){De.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+J);return}let ve=Object(Rd.decode)(J.ciphertext);if(ve.length<this.nacl.secretbox.overheadLength){De.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${ve.length}`);return}let ye=Object(Rd.decode)(J.nonce);if(ye.length<this.nacl.secretbox.nonceLength){De.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${ye.length}`);return}let Oe=this.nacl.secretbox.open(ve,ye,this.key);if(Oe===null){De.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(Ye,mt)=>{if(Ye){De.error(`Failed to make a request to the authEndpoint: ${mt}. Unable to fetch new key, so dropping encrypted event`);return}if(Oe=this.nacl.secretbox.open(ve,ye,this.key),Oe===null){De.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(q,this.getDataToEmit(Oe))});return}this.emit(q,this.getDataToEmit(Oe))}getDataToEmit(q){let J=Object(L5.decode)(q);try{return JSON.parse(J)}catch{return J}}}class U5 extends vt{constructor(q,J){super(),this.state="initialized",this.connection=null,this.key=q,this.options=J,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var ve=Ft.getNetwork();ve.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),ve.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(q){return this.connection?this.connection.send(q):!1}send_event(q,J,ve){return this.connection?this.connection.send_event(q,J,ve):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var q=(J,ve)=>{J?this.runner=this.strategy.connect(0,q):ve.action==="error"?(this.emit("error",{type:"HandshakeError",error:ve.error}),this.timeline.error({handshakeError:ve.error})):(this.abortConnecting(),this.handshakeCallbacks[ve.action](ve))};this.runner=this.strategy.connect(0,q)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var q=this.abandonConnection();q.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(q){this.timeline.info({action:"retry",delay:q}),q>0&&this.emit("connecting_in",Math.round(q/1e3)),this.retryTimer=new ae(q||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new ae(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ae(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ae(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(q){return ie({},q,{message:J=>{this.resetActivityCheck(),this.emit("message",J)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:J=>{this.emit("error",J)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(q){return ie({},q,{connected:J=>{this.activityTimeout=Math.min(this.options.activityTimeout,J.activityTimeout,J.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(J.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let q=J=>ve=>{ve.error&&this.emit("error",{type:"WebSocketError",error:ve.error}),J(ve)};return{tls_only:q(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:q(()=>{this.disconnect()}),backoff:q(()=>{this.retryIn(1e3)}),retry:q(()=>{this.retryIn(0)})}}setConnection(q){this.connection=q;for(var J in this.connectionCallbacks)this.connection.bind(J,this.connectionCallbacks[J]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var q in this.connectionCallbacks)this.connection.unbind(q,this.connectionCallbacks[q]);var J=this.connection;return this.connection=null,J}}updateState(q,J){var ve=this.state;if(this.state=q,ve!==q){var ye=q;ye==="connected"&&(ye+=" with new socket ID "+J.socket_id),De.debug("State changed",ve+" -> "+ye),this.timeline.info({state:q,params:J}),this.emit("state_change",{previous:ve,current:q}),this.emit(q,J)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class j5{constructor(){this.channels={}}add(q,J){return this.channels[q]||(this.channels[q]=z5(q,J)),this.channels[q]}all(){return de(this.channels)}find(q){return this.channels[q]}remove(q){var J=this.channels[q];return delete this.channels[q],J}disconnect(){me(this.channels,function(q){q.disconnect()})}}function z5(te,q){if(te.indexOf("private-encrypted-")===0){if(q.config.nacl)return Ia.createEncryptedChannel(te,q,q.config.nacl);let J="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",ve=b.buildLogSuffix("encryptedChannelSupport");throw new T(`${J}. ${ve}`)}else{if(te.indexOf("private-")===0)return Ia.createPrivateChannel(te,q);if(te.indexOf("presence-")===0)return Ia.createPresenceChannel(te,q);if(te.indexOf("#")===0)throw new x('Cannot create a channel with name "'+te+'".');return Ia.createChannel(te,q)}}var H5={createChannels(){return new j5},createConnectionManager(te,q){return new U5(te,q)},createChannel(te,q){return new Fd(te,q)},createPrivateChannel(te,q){return new Ad(te,q)},createPresenceChannel(te,q){return new V5(te,q)},createEncryptedChannel(te,q,J){return new q5(te,q,J)},createTimelineSender(te,q){return new N5(te,q)},createHandshake(te,q){return new B5(te,q)},createAssistantToTheTransportManager(te,q,J){return new D5(te,q,J)}},Ia=H5;class nh{constructor(q){this.options=q||{},this.livesLeft=this.options.lives||1/0}getAssistant(q){return Ia.createAssistantToTheTransportManager(this,q,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Ir{constructor(q,J){this.strategies=q,this.loop=!!J.loop,this.failFast=!!J.failFast,this.timeout=J.timeout,this.timeoutLimit=J.timeoutLimit}isSupported(){return ge(this.strategies,oe.method("isSupported"))}connect(q,J){var ve=this.strategies,ye=0,Oe=this.timeout,Ye=null,mt=(St,Qt)=>{Qt?J(null,Qt):(ye=ye+1,this.loop&&(ye=ye%ve.length),ye<ve.length?(Oe&&(Oe=Oe*2,this.timeoutLimit&&(Oe=Math.min(Oe,this.timeoutLimit))),Ye=this.tryStrategy(ve[ye],q,{timeout:Oe,failFast:this.failFast},mt)):J(!0))};return Ye=this.tryStrategy(ve[ye],q,{timeout:Oe,failFast:this.failFast},mt),{abort:function(){Ye.abort()},forceMinPriority:function(St){q=St,Ye&&Ye.forceMinPriority(St)}}}tryStrategy(q,J,ve,ye){var Oe=null,Ye=null;return ve.timeout>0&&(Oe=new ae(ve.timeout,function(){Ye.abort(),ye(!0)})),Ye=q.connect(J,function(mt,St){mt&&Oe&&Oe.isRunning()&&!ve.failFast||(Oe&&Oe.ensureAborted(),ye(mt,St))}),{abort:function(){Oe&&Oe.ensureAborted(),Ye.abort()},forceMinPriority:function(mt){Ye.forceMinPriority(mt)}}}}class Dd{constructor(q){this.strategies=q}isSupported(){return ge(this.strategies,oe.method("isSupported"))}connect(q,J){return W5(this.strategies,q,function(ve,ye){return function(Oe,Ye){if(ye[ve].error=Oe,Oe){G5(ye)&&J(!0);return}he(ye,function(mt){mt.forceMinPriority(Ye.transport.priority)}),J(null,Ye)}})}}function W5(te,q,J){var ve=Y(te,function(ye,Oe,Ye,mt){return ye.connect(q,J(Oe,mt))});return{abort:function(){he(ve,K5)},forceMinPriority:function(ye){he(ve,function(Oe){Oe.forceMinPriority(ye)})}}}function G5(te){return Re(te,function(q){return!!q.error})}function K5(te){!te.error&&!te.aborted&&(te.abort(),te.aborted=!0)}class Z5{constructor(q,J,ve){this.strategy=q,this.transports=J,this.ttl=ve.ttl||1800*1e3,this.usingTLS=ve.useTLS,this.timeline=ve.timeline}isSupported(){return this.strategy.isSupported()}connect(q,J){var ve=this.usingTLS,ye=Y5(ve),Oe=ye&&ye.cacheSkipCount?ye.cacheSkipCount:0,Ye=[this.strategy];if(ye&&ye.timestamp+this.ttl>=oe.now()){var mt=this.transports[ye.transport];mt&&(["ws","wss"].includes(ye.transport)||Oe>3?(this.timeline.info({cached:!0,transport:ye.transport,latency:ye.latency}),Ye.push(new Ir([mt],{timeout:ye.latency*2+1e3,failFast:!0}))):Oe++)}var St=oe.now(),Qt=Ye.pop().connect(q,function ln(Pn,eu){Pn?(oh(ve),Ye.length>0?(St=oe.now(),Qt=Ye.pop().connect(q,ln)):J(Pn)):(X5(ve,eu.transport.name,oe.now()-St,Oe),J(null,eu))});return{abort:function(){Qt.abort()},forceMinPriority:function(ln){q=ln,Qt&&Qt.forceMinPriority(ln)}}}}function Od(te){return"pusherTransport"+(te?"TLS":"NonTLS")}function Y5(te){var q=Ft.getLocalStorage();if(q)try{var J=q[Od(te)];if(J)return JSON.parse(J)}catch{oh(te)}return null}function X5(te,q,J,ve){var ye=Ft.getLocalStorage();if(ye)try{ye[Od(te)]=ft({timestamp:oe.now(),transport:q,latency:J,cacheSkipCount:ve})}catch{}}function oh(te){var q=Ft.getLocalStorage();if(q)try{delete q[Od(te)]}catch{}}class Qi{constructor(q,{delay:J}){this.strategy=q,this.options={delay:J}}isSupported(){return this.strategy.isSupported()}connect(q,J){var ve=this.strategy,ye,Oe=new ae(this.options.delay,function(){ye=ve.connect(q,J)});return{abort:function(){Oe.ensureAborted(),ye&&ye.abort()},forceMinPriority:function(Ye){q=Ye,ye&&ye.forceMinPriority(Ye)}}}}class ys{constructor(q,J,ve){this.test=q,this.trueBranch=J,this.falseBranch=ve}isSupported(){var q=this.test()?this.trueBranch:this.falseBranch;return q.isSupported()}connect(q,J){var ve=this.test()?this.trueBranch:this.falseBranch;return ve.connect(q,J)}}class Q5{constructor(q){this.strategy=q}isSupported(){return this.strategy.isSupported()}connect(q,J){var ve=this.strategy.connect(q,function(ye,Oe){Oe&&ve.abort(),J(ye,Oe)});return ve}}function _s(te){return function(){return te.isSupported()}}var J5=function(te,q,J){var ve={};function ye(ph,Q$,J$,eC,tC){var vh=J(te,ph,Q$,J$,eC,tC);return ve[ph]=vh,vh}var Oe=Object.assign({},q,{hostNonTLS:te.wsHost+":"+te.wsPort,hostTLS:te.wsHost+":"+te.wssPort,httpPath:te.wsPath}),Ye=Object.assign({},Oe,{useTLS:!0}),mt=Object.assign({},q,{hostNonTLS:te.httpHost+":"+te.httpPort,hostTLS:te.httpHost+":"+te.httpsPort,httpPath:te.httpPath}),St={loop:!0,timeout:15e3,timeoutLimit:6e4},Qt=new nh({minPingDelay:1e4,maxPingDelay:te.activityTimeout}),ln=new nh({lives:2,minPingDelay:1e4,maxPingDelay:te.activityTimeout}),Pn=ye("ws","ws",3,Oe,Qt),eu=ye("wss","ws",3,Ye,Qt),G$=ye("sockjs","sockjs",1,mt),ih=ye("xhr_streaming","xhr_streaming",1,mt,ln),K$=ye("xdr_streaming","xdr_streaming",1,mt,ln),uh=ye("xhr_polling","xhr_polling",1,mt),Z$=ye("xdr_polling","xdr_polling",1,mt),ch=new Ir([Pn],St),Y$=new Ir([eu],St),X$=new Ir([G$],St),dh=new Ir([new ys(_s(ih),ih,K$)],St),mh=new Ir([new ys(_s(uh),uh,Z$)],St),fh=new Ir([new ys(_s(dh),new Dd([dh,new Qi(mh,{delay:4e3})]),mh)],St),Md=new ys(_s(fh),fh,X$),Vd;return q.useTLS?Vd=new Dd([ch,new Qi(Md,{delay:2e3})]):Vd=new Dd([ch,new Qi(Y$,{delay:2e3}),new Qi(Md,{delay:5e3})]),new Z5(new Q5(new ys(_s(Pn),Vd,Md)),ve,{ttl:18e5,timeline:q.timeline,useTLS:q.useTLS})},e$=J5,t$=function(){var te=this;te.timeline.info(te.buildTimelineMessage({transport:te.name+(te.options.useTLS?"s":"")})),te.hooks.isInitialized()?te.changeState("initialized"):te.hooks.file?(te.changeState("initializing"),f.load(te.hooks.file,{useTLS:te.options.useTLS},function(q,J){te.hooks.isInitialized()?(te.changeState("initialized"),J(!0)):(q&&te.onError(q),te.onClose(),J(!1))})):te.onClose()},n$={getRequest:function(te){var q=new window.XDomainRequest;return q.ontimeout=function(){te.emit("error",new I),te.close()},q.onerror=function(J){te.emit("error",J),te.close()},q.onprogress=function(){q.responseText&&q.responseText.length>0&&te.onChunk(200,q.responseText)},q.onload=function(){q.responseText&&q.responseText.length>0&&te.onChunk(200,q.responseText),te.emit("finished",200),te.close()},q},abortRequest:function(te){te.ontimeout=te.onerror=te.onprogress=te.onload=null,te.abort()}},o$=n$;const a$=256*1024;class r$ extends vt{constructor(q,J,ve){super(),this.hooks=q,this.method=J,this.url=ve}start(q){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},Ft.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(q)}close(){this.unloader&&(Ft.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(q,J){for(;;){var ve=this.advanceBuffer(J);if(ve)this.emit("chunk",{status:q,data:ve});else break}this.isBufferTooLong(J)&&this.emit("buffer_too_long")}advanceBuffer(q){var J=q.slice(this.position),ve=J.indexOf(`
`);return ve!==-1?(this.position+=ve+1,J.slice(0,ve)):null}isBufferTooLong(q){return this.position===q.length&&q.length>a$}}var Bd;(function(te){te[te.CONNECTING=0]="CONNECTING",te[te.OPEN=1]="OPEN",te[te.CLOSED=3]="CLOSED"})(Bd||(Bd={}));var wr=Bd,l$=1;class s${constructor(q,J){this.hooks=q,this.session=rh(1e3)+"/"+d$(8),this.location=i$(J),this.readyState=wr.CONNECTING,this.openStream()}send(q){return this.sendRaw(JSON.stringify([q]))}ping(){this.hooks.sendHeartbeat(this)}close(q,J){this.onClose(q,J,!0)}sendRaw(q){if(this.readyState===wr.OPEN)try{return Ft.createSocketRequest("POST",ah(u$(this.location,this.session))).start(q),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(q,J,ve){this.closeStream(),this.readyState=wr.CLOSED,this.onclose&&this.onclose({code:q,reason:J,wasClean:ve})}onChunk(q){if(q.status===200){this.readyState===wr.OPEN&&this.onActivity();var J,ve=q.data.slice(0,1);switch(ve){case"o":J=JSON.parse(q.data.slice(1)||"{}"),this.onOpen(J);break;case"a":J=JSON.parse(q.data.slice(1)||"[]");for(var ye=0;ye<J.length;ye++)this.onEvent(J[ye]);break;case"m":J=JSON.parse(q.data.slice(1)||"null"),this.onEvent(J);break;case"h":this.hooks.onHeartbeat(this);break;case"c":J=JSON.parse(q.data.slice(1)||"[]"),this.onClose(J[0],J[1],!0);break}}}onOpen(q){this.readyState===wr.CONNECTING?(q&&q.hostname&&(this.location.base=c$(this.location.base,q.hostname)),this.readyState=wr.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(q){this.readyState===wr.OPEN&&this.onmessage&&this.onmessage({data:q})}onActivity(){this.onactivity&&this.onactivity()}onError(q){this.onerror&&this.onerror(q)}openStream(){this.stream=Ft.createSocketRequest("POST",ah(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",q=>{this.onChunk(q)}),this.stream.bind("finished",q=>{this.hooks.onFinished(this,q)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(q){oe.defer(()=>{this.onError(q),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function i$(te){var q=/([^\?]*)\/*(\??.*)/.exec(te);return{base:q[1],queryString:q[2]}}function u$(te,q){return te.base+"/"+q+"/xhr_send"}function ah(te){var q=te.indexOf("?")===-1?"?":"&";return te+q+"t="+ +new Date+"&n="+l$++}function c$(te,q){var J=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(te);return J[1]+q+J[3]}function rh(te){return Ft.randomInt(te)}function d$(te){for(var q=[],J=0;J<te;J++)q.push(rh(32).toString(32));return q.join("")}var m$=s$,f$={getReceiveURL:function(te,q){return te.base+"/"+q+"/xhr_streaming"+te.queryString},onHeartbeat:function(te){te.sendRaw("[]")},sendHeartbeat:function(te){te.sendRaw("[]")},onFinished:function(te,q){te.onClose(1006,"Connection interrupted ("+q+")",!1)}},p$=f$,v$={getReceiveURL:function(te,q){return te.base+"/"+q+"/xhr"+te.queryString},onHeartbeat:function(){},sendHeartbeat:function(te){te.sendRaw("[]")},onFinished:function(te,q){q===200?te.reconnect():te.onClose(1006,"Connection interrupted ("+q+")",!1)}},h$=v$,g$={getRequest:function(te){var q=Ft.getXHRAPI(),J=new q;return J.onreadystatechange=J.onprogress=function(){switch(J.readyState){case 3:J.responseText&&J.responseText.length>0&&te.onChunk(J.status,J.responseText);break;case 4:J.responseText&&J.responseText.length>0&&te.onChunk(J.status,J.responseText),te.emit("finished",J.status),te.close();break}},J},abortRequest:function(te){te.onreadystatechange=null,te.abort()}},b$=g$,y$={createStreamingSocket(te){return this.createSocket(p$,te)},createPollingSocket(te){return this.createSocket(h$,te)},createSocket(te,q){return new m$(te,q)},createXHR(te,q){return this.createRequest(b$,te,q)},createRequest(te,q,J){return new r$(te,q,J)}},lh=y$;lh.createXDR=function(te,q){return this.createRequest(o$,te,q)};var _$=lh,I$={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:s,DependenciesReceivers:m,getDefaultStrategy:e$,Transports:F5,transportConnectionInitializer:t$,HTTPFactory:_$,TimelineTransport:$t,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(te){window.Pusher=te;var q=()=>{this.onDocumentBody(te.ready)};window.JSON?q():f.load("json2",{},q)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:B,jsonp:Te}},onDocumentBody(te){document.body?te():setTimeout(()=>{this.onDocumentBody(te)},0)},createJSONPRequest(te,q){return new Me(te,q)},createScriptRequest(te){return new Xe(te)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var te=this.getXHRAPI();return new te},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return R5},createWebSocket(te){var q=this.getWebSocketAPI();return new q(te)},createSocketRequest(te,q){if(this.isXHRSupported())return this.HTTPFactory.createXHR(te,q);if(this.isXDRSupported(q.indexOf("https:")===0))return this.HTTPFactory.createXDR(te,q);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var te=this.getXHRAPI();return!!te&&new te().withCredentials!==void 0},isXDRSupported(te){var q=te?"https:":"http:",J=this.getProtocol();return!!window.XDomainRequest&&J===q},addUnloadListener(te){window.addEventListener!==void 0?window.addEventListener("unload",te,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",te)},removeUnloadListener(te){window.addEventListener!==void 0?window.removeEventListener("unload",te,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",te)},randomInt(te){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*te)}},Ft=I$,Nd;(function(te){te[te.ERROR=3]="ERROR",te[te.INFO=6]="INFO",te[te.DEBUG=7]="DEBUG"})(Nd||(Nd={}));var Ji=Nd;class w${constructor(q,J,ve){this.key=q,this.session=J,this.events=[],this.options=ve||{},this.sent=0,this.uniqueID=0}log(q,J){q<=this.options.level&&(this.events.push(ie({},J,{timestamp:oe.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(q){this.log(Ji.ERROR,q)}info(q){this.log(Ji.INFO,q)}debug(q){this.log(Ji.DEBUG,q)}isEmpty(){return this.events.length===0}send(q,J){var ve=ie({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],q(ve,(ye,Oe)=>{ye||this.sent++,J&&J(ye,Oe)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class x${constructor(q,J,ve,ye){this.name=q,this.priority=J,this.transport=ve,this.options=ye||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(q,J){if(this.isSupported()){if(this.priority<q)return sh(new C,J)}else return sh(new $,J);var ve=!1,ye=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),Oe=null,Ye=function(){ye.unbind("initialized",Ye),ye.connect()},mt=function(){Oe=Ia.createHandshake(ye,function(Pn){ve=!0,ln(),J(null,Pn)})},St=function(Pn){ln(),J(Pn)},Qt=function(){ln();var Pn;Pn=ft(ye),J(new S(Pn))},ln=function(){ye.unbind("initialized",Ye),ye.unbind("open",mt),ye.unbind("error",St),ye.unbind("closed",Qt)};return ye.bind("initialized",Ye),ye.bind("open",mt),ye.bind("error",St),ye.bind("closed",Qt),ye.initialize(),{abort:()=>{ve||(ln(),Oe?Oe.close():ye.close())},forceMinPriority:Pn=>{ve||this.priority<Pn&&(Oe?Oe.close():ye.close())}}}}function sh(te,q){return oe.defer(function(){q(te)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:k$}=Ft;var $$=function(te,q,J,ve,ye,Oe){var Ye=k$[J];if(!Ye)throw new E(J);var mt=(!te.enabledTransports||se(te.enabledTransports,q)!==-1)&&(!te.disabledTransports||se(te.disabledTransports,q)===-1),St;return mt?(ye=Object.assign({ignoreNullOrigin:te.ignoreNullOrigin},ye),St=new x$(q,ve,Oe?Oe.getAssistant(Ye):Ye,ye)):St=C$,St},C$={isSupported:function(){return!1},connect:function(te,q){var J=oe.defer(function(){q(new $)});return{abort:function(){J.ensureAborted()},forceMinPriority:function(){}}}};function S$(te){if(te==null)throw"You must pass an options object";if(te.cluster==null)throw"Options object must provide a cluster";"disableStats"in te&&De.warn("The disableStats option is deprecated in favor of enableStats")}const T$=(te,q)=>{var J="socket_id="+encodeURIComponent(te.socketId);for(var ve in q.params)J+="&"+encodeURIComponent(ve)+"="+encodeURIComponent(q.params[ve]);if(q.paramsProvider!=null){let ye=q.paramsProvider();for(var ve in ye)J+="&"+encodeURIComponent(ve)+"="+encodeURIComponent(ye[ve])}return J};var E$=te=>{if(typeof Ft.getAuthorizers()[te.transport]>"u")throw`'${te.transport}' is not a recognized auth transport`;return(q,J)=>{const ve=T$(q,te);Ft.getAuthorizers()[te.transport](Ft,ve,te,w.UserAuthentication,J)}};const F$=(te,q)=>{var J="socket_id="+encodeURIComponent(te.socketId);J+="&channel_name="+encodeURIComponent(te.channelName);for(var ve in q.params)J+="&"+encodeURIComponent(ve)+"="+encodeURIComponent(q.params[ve]);if(q.paramsProvider!=null){let ye=q.paramsProvider();for(var ve in ye)J+="&"+encodeURIComponent(ve)+"="+encodeURIComponent(ye[ve])}return J};var A$=te=>{if(typeof Ft.getAuthorizers()[te.transport]>"u")throw`'${te.transport}' is not a recognized auth transport`;return(q,J)=>{const ve=F$(q,te);Ft.getAuthorizers()[te.transport](Ft,ve,te,w.ChannelAuthorization,J)}};const R$=(te,q,J)=>{const ve={authTransport:q.transport,authEndpoint:q.endpoint,auth:{params:q.params,headers:q.headers}};return(ye,Oe)=>{const Ye=te.channel(ye.channelName);J(Ye,ve).authorize(ye.socketId,Oe)}};function D$(te,q){let J={activityTimeout:te.activityTimeout||u.activityTimeout,cluster:te.cluster,httpPath:te.httpPath||u.httpPath,httpPort:te.httpPort||u.httpPort,httpsPort:te.httpsPort||u.httpsPort,pongTimeout:te.pongTimeout||u.pongTimeout,statsHost:te.statsHost||u.stats_host,unavailableTimeout:te.unavailableTimeout||u.unavailableTimeout,wsPath:te.wsPath||u.wsPath,wsPort:te.wsPort||u.wsPort,wssPort:te.wssPort||u.wssPort,enableStats:M$(te),httpHost:O$(te),useTLS:P$(te),wsHost:B$(te),userAuthenticator:V$(te),channelAuthorizer:q$(te,q)};return"disabledTransports"in te&&(J.disabledTransports=te.disabledTransports),"enabledTransports"in te&&(J.enabledTransports=te.enabledTransports),"ignoreNullOrigin"in te&&(J.ignoreNullOrigin=te.ignoreNullOrigin),"timelineParams"in te&&(J.timelineParams=te.timelineParams),"nacl"in te&&(J.nacl=te.nacl),J}function O$(te){return te.httpHost?te.httpHost:te.cluster?`sockjs-${te.cluster}.pusher.com`:u.httpHost}function B$(te){return te.wsHost?te.wsHost:N$(te.cluster)}function N$(te){return`ws-${te}.pusher.com`}function P$(te){return Ft.getProtocol()==="https:"?!0:te.forceTLS!==!1}function M$(te){return"enableStats"in te?te.enableStats:"disableStats"in te?!te.disableStats:!1}function V$(te){const q=Object.assign(Object.assign({},u.userAuthentication),te.userAuthentication);return"customHandler"in q&&q.customHandler!=null?q.customHandler:E$(q)}function L$(te,q){let J;return"channelAuthorization"in te?J=Object.assign(Object.assign({},u.channelAuthorization),te.channelAuthorization):(J={transport:te.authTransport||u.authTransport,endpoint:te.authEndpoint||u.authEndpoint},"auth"in te&&("params"in te.auth&&(J.params=te.auth.params),"headers"in te.auth&&(J.headers=te.auth.headers)),"authorizer"in te&&(J.customHandler=R$(q,J,te.authorizer))),J}function q$(te,q){const J=L$(te,q);return"customHandler"in J&&J.customHandler!=null?J.customHandler:A$(J)}class U$ extends vt{constructor(q){super(function(J,ve){De.debug(`No callbacks on watchlist events for ${J}`)}),this.pusher=q,this.bindWatchlistInternalEvent()}handleEvent(q){q.data.events.forEach(J=>{this.emit(J.name,J)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",q=>{var J=q.event;J==="pusher_internal:watchlist_events"&&this.handleEvent(q)})}}function j$(){let te,q;return{promise:new Promise((ve,ye)=>{te=ve,q=ye}),resolve:te,reject:q}}var z$=j$;class H$ extends vt{constructor(q){super(function(J,ve){De.debug("No callbacks on user for "+J)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(J,ve)=>{if(J){De.warn(`Error during signin: ${J}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:ve.auth,user_data:ve.user_data})},this.pusher=q,this.pusher.connection.bind("state_change",({previous:J,current:ve})=>{J!=="connected"&&ve==="connected"&&this._signin(),J==="connected"&&ve!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new U$(q),this.pusher.connection.bind("message",J=>{var ve=J.event;ve==="pusher:signin_success"&&this._onSigninSuccess(J.data),this.serverToUserChannel&&this.serverToUserChannel.name===J.channel&&this.serverToUserChannel.handleEvent(J)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(q){try{this.user_data=JSON.parse(q.user_data)}catch{De.error(`Failed parsing user data after signin: ${q.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){De.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const q=J=>{J.subscriptionPending&&J.subscriptionCancelled?J.reinstateSubscription():!J.subscriptionPending&&this.pusher.connection.state==="connected"&&J.subscribe()};this.serverToUserChannel=new Fd(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((J,ve)=>{J.indexOf("pusher_internal:")===0||J.indexOf("pusher:")===0||this.emit(J,ve)}),q(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:q,resolve:J,reject:ve}=z$();q.done=!1;const ye=()=>{q.done=!0};q.then(ye).catch(ye),this.signinDonePromise=q,this._signinDoneResolve=J}}class Yn{static ready(){Yn.isReady=!0;for(var q=0,J=Yn.instances.length;q<J;q++)Yn.instances[q].connect()}static getClientFeatures(){return xe(we({ws:Ft.Transports.ws},function(q){return q.isSupported({})}))}constructor(q,J){W$(q),S$(J),this.key=q,this.config=D$(J,this),this.channels=Ia.createChannels(),this.global_emitter=new vt,this.sessionID=Ft.randomInt(1e9),this.timeline=new w$(this.key,this.sessionID,{cluster:this.config.cluster,features:Yn.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ji.INFO,version:u.VERSION}),this.config.enableStats&&(this.timelineSender=Ia.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Ft.TimelineTransport.name}));var ve=ye=>Ft.getDefaultStrategy(this.config,ye,$$);this.connection=Ia.createConnectionManager(this.key,{getStrategy:ve,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",ye=>{var Oe=ye.event,Ye=Oe.indexOf("pusher_internal:")===0;if(ye.channel){var mt=this.channel(ye.channel);mt&&mt.handleEvent(ye)}Ye||this.global_emitter.emit(ye.event,ye.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",ye=>{De.warn(ye)}),Yn.instances.push(this),this.timeline.info({instances:Yn.instances.length}),this.user=new H$(this),Yn.isReady&&this.connect()}channel(q){return this.channels.find(q)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var q=this.connection.isUsingTLS(),J=this.timelineSender;this.timelineSenderTimer=new ue(6e4,function(){J.send(q)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(q,J,ve){return this.global_emitter.bind(q,J,ve),this}unbind(q,J,ve){return this.global_emitter.unbind(q,J,ve),this}bind_global(q){return this.global_emitter.bind_global(q),this}unbind_global(q){return this.global_emitter.unbind_global(q),this}unbind_all(q){return this.global_emitter.unbind_all(),this}subscribeAll(){var q;for(q in this.channels.channels)this.channels.channels.hasOwnProperty(q)&&this.subscribe(q)}subscribe(q){var J=this.channels.add(q,this);return J.subscriptionPending&&J.subscriptionCancelled?J.reinstateSubscription():!J.subscriptionPending&&this.connection.state==="connected"&&J.subscribe(),J}unsubscribe(q){var J=this.channels.find(q);J&&J.subscriptionPending?J.cancelSubscription():(J=this.channels.remove(q),J&&J.subscribed&&J.unsubscribe())}send_event(q,J,ve){return this.connection.send_event(q,J,ve)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Yn.instances=[],Yn.isReady=!1,Yn.logToConsole=!1,Yn.Runtime=Ft,Yn.ScriptReceivers=Ft.ScriptReceivers,Yn.DependenciesReceivers=Ft.DependenciesReceivers,Yn.auth_callbacks=Ft.auth_callbacks;var Pd=o.default=Yn;function W$(te){if(te==null)throw"You must pass your app key when you instantiate Pusher."}Ft.setup(Yn)}])})})(t2);var i9=t2.exports;const u9=Bt(i9);window.Pusher=u9;class c9{constructor(t){this.config=t,this.hasDriver()&&this.configure()}configure(){window.Echo=new s9(this.getDriverConfig())}getDriverConfig(){return{broadcaster:this.config.default,...this.getConfigByDriver(this.config.default)}}hasDriver(){return this.config.default&&this.config.default!=="log"&&this.config.default!=="null"}getConfigByDriver(t){if(t==="pusher")return{key:this.config.connection.key,cluster:this.config.connection.options.cluster,encrypted:this.config.connection.options.encrypted,authorizer:(n,o)=>({authorize:(a,r)=>{Innoclapps.request().post("/broadcasting/auth",{socket_id:a,channel_name:n.name}).then(s=>{r(!1,s.data)}).catch(s=>{r(!0,s)})}})}}}function n2(e,t){return function(){return e.apply(t,arguments)}}const{toString:d9}=Object.prototype,{getPrototypeOf:Tp}=Object,Mc=(e=>t=>{const n=d9.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ba=e=>(e=e.toLowerCase(),t=>Mc(t)===e),Vc=e=>t=>typeof t===e,{isArray:es}=Array,Ks=Vc("undefined");function m9(e){return e!==null&&!Ks(e)&&e.constructor!==null&&!Ks(e.constructor)&&Po(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const o2=ba("ArrayBuffer");function f9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&o2(e.buffer),t}const p9=Vc("string"),Po=Vc("function"),a2=Vc("number"),Lc=e=>e!==null&&typeof e=="object",v9=e=>e===!0||e===!1,Tu=e=>{if(Mc(e)!=="object")return!1;const t=Tp(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},h9=ba("Date"),g9=ba("File"),b9=ba("Blob"),y9=ba("FileList"),_9=e=>Lc(e)&&Po(e.pipe),I9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Po(e.append)&&((t=Mc(e))==="formdata"||t==="object"&&Po(e.toString)&&e.toString()==="[object FormData]"))},w9=ba("URLSearchParams"),x9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _i(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,a;if(typeof e!="object"&&(e=[e]),es(e))for(o=0,a=e.length;o<a;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let i;for(o=0;o<s;o++)i=r[o],t.call(null,e[i],i,e)}}function r2(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,a;for(;o-- >0;)if(a=n[o],t===a.toLowerCase())return a;return null}const l2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s2=e=>!Ks(e)&&e!==l2;function yf(){const{caseless:e}=s2(this)&&this||{},t={},n=(o,a)=>{const r=e&&r2(t,a)||a;Tu(t[r])&&Tu(o)?t[r]=yf(t[r],o):Tu(o)?t[r]=yf({},o):es(o)?t[r]=o.slice():t[r]=o};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&_i(arguments[o],n);return t}const k9=(e,t,n,{allOwnKeys:o}={})=>(_i(t,(a,r)=>{n&&Po(a)?e[r]=n2(a,n):e[r]=a},{allOwnKeys:o}),e),$9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),C9=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},S9=(e,t,n,o)=>{let a,r,s;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)s=a[r],(!o||o(s,e,t))&&!i[s]&&(t[s]=e[s],i[s]=!0);e=n!==!1&&Tp(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},T9=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},E9=e=>{if(!e)return null;if(es(e))return e;let t=e.length;if(!a2(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},F9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Tp(Uint8Array)),A9=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=o.next())&&!a.done;){const r=a.value;t.call(e,r[0],r[1])}},R9=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},D9=ba("HTMLFormElement"),O9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),hg=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),B9=ba("RegExp"),i2=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};_i(n,(a,r)=>{let s;(s=t(a,r,e))!==!1&&(o[r]=s||a)}),Object.defineProperties(e,o)},N9=e=>{i2(e,(t,n)=>{if(Po(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(Po(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},P9=(e,t)=>{const n={},o=a=>{a.forEach(r=>{n[r]=!0})};return es(e)?o(e):o(String(e).split(t)),n},M9=()=>{},V9=(e,t)=>(e=+e,Number.isFinite(e)?e:t),nm="abcdefghijklmnopqrstuvwxyz",gg="0123456789",u2={DIGIT:gg,ALPHA:nm,ALPHA_DIGIT:nm+nm.toUpperCase()+gg},L9=(e=16,t=u2.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function q9(e){return!!(e&&Po(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const U9=e=>{const t=new Array(10),n=(o,a)=>{if(Lc(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[a]=o;const r=es(o)?[]:{};return _i(o,(s,i)=>{const u=n(s,a+1);!Ks(u)&&(r[i]=u)}),t[a]=void 0,r}}return o};return n(e,0)},j9=ba("AsyncFunction"),z9=e=>e&&(Lc(e)||Po(e))&&Po(e.then)&&Po(e.catch),Be={isArray:es,isArrayBuffer:o2,isBuffer:m9,isFormData:I9,isArrayBufferView:f9,isString:p9,isNumber:a2,isBoolean:v9,isObject:Lc,isPlainObject:Tu,isUndefined:Ks,isDate:h9,isFile:g9,isBlob:b9,isRegExp:B9,isFunction:Po,isStream:_9,isURLSearchParams:w9,isTypedArray:F9,isFileList:y9,forEach:_i,merge:yf,extend:k9,trim:x9,stripBOM:$9,inherits:C9,toFlatObject:S9,kindOf:Mc,kindOfTest:ba,endsWith:T9,toArray:E9,forEachEntry:A9,matchAll:R9,isHTMLForm:D9,hasOwnProperty:hg,hasOwnProp:hg,reduceDescriptors:i2,freezeMethods:N9,toObjectSet:P9,toCamelCase:O9,noop:M9,toFiniteNumber:V9,findKey:r2,global:l2,isContextDefined:s2,ALPHABET:u2,generateString:L9,isSpecCompliantForm:q9,toJSONObject:U9,isAsyncFn:j9,isThenable:z9};function Kt(e,t,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a)}Be.inherits(Kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const c2=Kt.prototype,d2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{d2[e]={value:e}});Object.defineProperties(Kt,d2);Object.defineProperty(c2,"isAxiosError",{value:!0});Kt.from=(e,t,n,o,a,r)=>{const s=Object.create(c2);return Be.toFlatObject(e,s,function(u){return u!==Error.prototype},i=>i!=="isAxiosError"),Kt.call(s,e.message,t,n,o,a),s.cause=e,s.name=e.name,r&&Object.assign(s,r),s};const H9=null;function _f(e){return Be.isPlainObject(e)||Be.isArray(e)}function m2(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function bg(e,t,n){return e?e.concat(t).map(function(a,r){return a=m2(a),!n&&r?"["+a+"]":a}).join(n?".":""):t}function W9(e){return Be.isArray(e)&&!e.some(_f)}const G9=Be.toFlatObject(Be,{},null,function(t){return/^is[A-Z]/.test(t)});function qc(e,t,n){if(!Be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,k){return!Be.isUndefined(k[w])});const o=n.metaTokens,a=n.visitor||m,r=n.dots,s=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(t);if(!Be.isFunction(a))throw new TypeError("visitor must be a function");function c(b){if(b===null)return"";if(Be.isDate(b))return b.toISOString();if(!u&&Be.isBlob(b))throw new Kt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(b)||Be.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,w,k){let x=b;if(b&&!k&&typeof b=="object"){if(Be.endsWith(w,"{}"))w=o?w:w.slice(0,-2),b=JSON.stringify(b);else if(Be.isArray(b)&&W9(b)||(Be.isFileList(b)||Be.endsWith(w,"[]"))&&(x=Be.toArray(b)))return w=m2(w),x.forEach(function(C,S){!(Be.isUndefined(C)||C===null)&&t.append(s===!0?bg([w],S,r):s===null?w:w+"[]",c(C))}),!1}return _f(b)?!0:(t.append(bg(k,w,r),c(b)),!1)}const f=[],v=Object.assign(G9,{defaultVisitor:m,convertValue:c,isVisitable:_f});function y(b,w){if(!Be.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(b),Be.forEach(b,function(x,I){(!(Be.isUndefined(x)||x===null)&&a.call(t,x,Be.isString(I)?I.trim():I,w,v))===!0&&y(x,w?w.concat(I):[I])}),f.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return y(e),t}function yg(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Ep(e,t){this._pairs=[],e&&qc(e,this,t)}const f2=Ep.prototype;f2.append=function(t,n){this._pairs.push([t,n])};f2.toString=function(t){const n=t?function(o){return t.call(this,o,yg)}:yg;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function K9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function p2(e,t,n){if(!t)return e;const o=n&&n.encode||K9,a=n&&n.serialize;let r;if(a?r=a(t,n):r=Be.isURLSearchParams(t)?t.toString():new Ep(t,n).toString(o),r){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class _g{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Be.forEach(this.handlers,function(o){o!==null&&t(o)})}}const v2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z9=typeof URLSearchParams<"u"?URLSearchParams:Ep,Y9=typeof FormData<"u"?FormData:null,X9=typeof Blob<"u"?Blob:null,Q9={isBrowser:!0,classes:{URLSearchParams:Z9,FormData:Y9,Blob:X9},protocols:["http","https","file","blob","url","data"]},h2=typeof window<"u"&&typeof document<"u",J9=(e=>h2&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),e7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",t7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:h2,hasStandardBrowserEnv:J9,hasStandardBrowserWebWorkerEnv:e7},Symbol.toStringTag,{value:"Module"})),da={...t7,...Q9};function n7(e,t){return qc(e,new da.classes.URLSearchParams,Object.assign({visitor:function(n,o,a,r){return da.isNode&&Be.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function o7(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function a7(e){const t={},n=Object.keys(e);let o;const a=n.length;let r;for(o=0;o<a;o++)r=n[o],t[r]=e[r];return t}function g2(e){function t(n,o,a,r){let s=n[r++];if(s==="__proto__")return!0;const i=Number.isFinite(+s),u=r>=n.length;return s=!s&&Be.isArray(a)?a.length:s,u?(Be.hasOwnProp(a,s)?a[s]=[a[s],o]:a[s]=o,!i):((!a[s]||!Be.isObject(a[s]))&&(a[s]=[]),t(n,o,a[s],r)&&Be.isArray(a[s])&&(a[s]=a7(a[s])),!i)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const n={};return Be.forEachEntry(e,(o,a)=>{t(o7(o),a,n,0)}),n}return null}function r7(e,t,n){if(Be.isString(e))try{return(t||JSON.parse)(e),Be.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Fp={transitional:v2,adapter:["xhr","http"],transformRequest:[function(t,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,r=Be.isObject(t);if(r&&Be.isHTMLForm(t)&&(t=new FormData(t)),Be.isFormData(t))return a?JSON.stringify(g2(t)):t;if(Be.isArrayBuffer(t)||Be.isBuffer(t)||Be.isStream(t)||Be.isFile(t)||Be.isBlob(t))return t;if(Be.isArrayBufferView(t))return t.buffer;if(Be.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return n7(t,this.formSerializer).toString();if((i=Be.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return qc(i?{"files[]":t}:t,u&&new u,this.formSerializer)}}return r||a?(n.setContentType("application/json",!1),r7(t)):t}],transformResponse:[function(t){const n=this.transitional||Fp.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&Be.isString(t)&&(o&&!this.responseType||a)){const s=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(i){if(s)throw i.name==="SyntaxError"?Kt.from(i,Kt.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:da.classes.FormData,Blob:da.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{Fp.headers[e]={}});const Ap=Fp,l7=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),s7=e=>{const t={};let n,o,a;return e&&e.split(`
`).forEach(function(s){a=s.indexOf(":"),n=s.substring(0,a).trim().toLowerCase(),o=s.substring(a+1).trim(),!(!n||t[n]&&l7[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},Ig=Symbol("internals");function Cs(e){return e&&String(e).trim().toLowerCase()}function Eu(e){return e===!1||e==null?e:Be.isArray(e)?e.map(Eu):String(e)}function i7(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const u7=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function om(e,t,n,o,a){if(Be.isFunction(o))return o.call(this,t,n);if(a&&(t=n),!!Be.isString(t)){if(Be.isString(o))return t.indexOf(o)!==-1;if(Be.isRegExp(o))return o.test(t)}}function c7(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function d7(e,t){const n=Be.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(a,r,s){return this[o].call(this,t,a,r,s)},configurable:!0})})}class Uc{constructor(t){t&&this.set(t)}set(t,n,o){const a=this;function r(i,u,c){const m=Cs(u);if(!m)throw new Error("header name must be a non-empty string");const f=Be.findKey(a,m);(!f||a[f]===void 0||c===!0||c===void 0&&a[f]!==!1)&&(a[f||u]=Eu(i))}const s=(i,u)=>Be.forEach(i,(c,m)=>r(c,m,u));return Be.isPlainObject(t)||t instanceof this.constructor?s(t,n):Be.isString(t)&&(t=t.trim())&&!u7(t)?s(s7(t),n):t!=null&&r(n,t,o),this}get(t,n){if(t=Cs(t),t){const o=Be.findKey(this,t);if(o){const a=this[o];if(!n)return a;if(n===!0)return i7(a);if(Be.isFunction(n))return n.call(this,a,o);if(Be.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Cs(t),t){const o=Be.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||om(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let a=!1;function r(s){if(s=Cs(s),s){const i=Be.findKey(o,s);i&&(!n||om(o,o[i],i,n))&&(delete o[i],a=!0)}}return Be.isArray(t)?t.forEach(r):r(t),a}clear(t){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const r=n[o];(!t||om(this,this[r],r,t,!0))&&(delete this[r],a=!0)}return a}normalize(t){const n=this,o={};return Be.forEach(this,(a,r)=>{const s=Be.findKey(o,r);if(s){n[s]=Eu(a),delete n[r];return}const i=t?c7(r):String(r).trim();i!==r&&delete n[r],n[i]=Eu(a),o[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Be.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=t&&Be.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(a=>o.set(a)),o}static accessor(t){const o=(this[Ig]=this[Ig]={accessors:{}}).accessors,a=this.prototype;function r(s){const i=Cs(s);o[i]||(d7(a,s),o[i]=!0)}return Be.isArray(t)?t.forEach(r):r(t),this}}Uc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(Uc.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});Be.freezeMethods(Uc);const Fa=Uc;function am(e,t){const n=this||Ap,o=t||n,a=Fa.from(o.headers);let r=o.data;return Be.forEach(e,function(i){r=i.call(n,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function b2(e){return!!(e&&e.__CANCEL__)}function Ii(e,t,n){Kt.call(this,e??"canceled",Kt.ERR_CANCELED,t,n),this.name="CanceledError"}Be.inherits(Ii,Kt,{__CANCEL__:!0});function m7(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Kt("Request failed with status code "+n.status,[Kt.ERR_BAD_REQUEST,Kt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const f7=da.hasStandardBrowserEnv?{write(e,t,n,o,a,r){const s=[e+"="+encodeURIComponent(t)];Be.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Be.isString(o)&&s.push("path="+o),Be.isString(a)&&s.push("domain="+a),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function p7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function v7(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function y2(e,t){return e&&!p7(t)?v7(e,t):t}const h7=da.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let o;function a(r){let s=r;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=a(window.location.href),function(s){const i=Be.isString(s)?a(s):s;return i.protocol===o.protocol&&i.host===o.host}}():function(){return function(){return!0}}();function g7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function b7(e,t){e=e||10;const n=new Array(e),o=new Array(e);let a=0,r=0,s;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),m=o[r];s||(s=c),n[a]=u,o[a]=c;let f=r,v=0;for(;f!==a;)v+=n[f++],f=f%e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),c-s<t)return;const y=m&&c-m;return y?Math.round(v*1e3/y):void 0}}function wg(e,t){let n=0;const o=b7(50,250);return a=>{const r=a.loaded,s=a.lengthComputable?a.total:void 0,i=r-n,u=o(i),c=r<=s;n=r;const m={loaded:r,total:s,progress:s?r/s:void 0,bytes:i,rate:u||void 0,estimated:u&&s&&c?(s-r)/u:void 0,event:a};m[t?"download":"upload"]=!0,e(m)}}const y7=typeof XMLHttpRequest<"u",_7=y7&&function(e){return new Promise(function(n,o){let a=e.data;const r=Fa.from(e.headers).normalize();let{responseType:s,withXSRFToken:i}=e,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}let m;if(Be.isFormData(a)){if(da.hasStandardBrowserEnv||da.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((m=r.getContentType())!==!1){const[w,...k]=m?m.split(";").map(x=>x.trim()).filter(Boolean):[];r.setContentType([w||"multipart/form-data",...k].join("; "))}}let f=new XMLHttpRequest;if(e.auth){const w=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(w+":"+k))}const v=y2(e.baseURL,e.url);f.open(e.method.toUpperCase(),p2(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function y(){if(!f)return;const w=Fa.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),x={data:!s||s==="text"||s==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:w,config:e,request:f};m7(function(C){n(C),c()},function(C){o(C),c()},x),f=null}if("onloadend"in f?f.onloadend=y:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(y)},f.onabort=function(){f&&(o(new Kt("Request aborted",Kt.ECONNABORTED,e,f)),f=null)},f.onerror=function(){o(new Kt("Network Error",Kt.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let k=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const x=e.transitional||v2;e.timeoutErrorMessage&&(k=e.timeoutErrorMessage),o(new Kt(k,x.clarifyTimeoutError?Kt.ETIMEDOUT:Kt.ECONNABORTED,e,f)),f=null},da.hasStandardBrowserEnv&&(i&&Be.isFunction(i)&&(i=i(e)),i||i!==!1&&h7(v))){const w=e.xsrfHeaderName&&e.xsrfCookieName&&f7.read(e.xsrfCookieName);w&&r.set(e.xsrfHeaderName,w)}a===void 0&&r.setContentType(null),"setRequestHeader"in f&&Be.forEach(r.toJSON(),function(k,x){f.setRequestHeader(x,k)}),Be.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),s&&s!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",wg(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",wg(e.onUploadProgress)),(e.cancelToken||e.signal)&&(u=w=>{f&&(o(!w||w.type?new Ii(null,e,f):w),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u)));const b=g7(v);if(b&&da.protocols.indexOf(b)===-1){o(new Kt("Unsupported protocol "+b+":",Kt.ERR_BAD_REQUEST,e));return}f.send(a||null)})},If={http:H9,xhr:_7};Be.forEach(If,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const xg=e=>`- ${e}`,I7=e=>Be.isFunction(e)||e===null||e===!1,_2={getAdapter:e=>{e=Be.isArray(e)?e:[e];const{length:t}=e;let n,o;const a={};for(let r=0;r<t;r++){n=e[r];let s;if(o=n,!I7(n)&&(o=If[(s=String(n)).toLowerCase()],o===void 0))throw new Kt(`Unknown adapter '${s}'`);if(o)break;a[s||"#"+r]=o}if(!o){const r=Object.entries(a).map(([i,u])=>`adapter ${i} `+(u===!1?"is not supported by the environment":"is not available in the build"));let s=t?r.length>1?`since :
`+r.map(xg).join(`
`):" "+xg(r[0]):"as no adapter specified";throw new Kt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:If};function rm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ii(null,e)}function kg(e){return rm(e),e.headers=Fa.from(e.headers),e.data=am.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_2.getAdapter(e.adapter||Ap.adapter)(e).then(function(o){return rm(e),o.data=am.call(e,e.transformResponse,o),o.headers=Fa.from(o.headers),o},function(o){return b2(o)||(rm(e),o&&o.response&&(o.response.data=am.call(e,e.transformResponse,o.response),o.response.headers=Fa.from(o.response.headers))),Promise.reject(o)})}const $g=e=>e instanceof Fa?{...e}:e;function Rl(e,t){t=t||{};const n={};function o(c,m,f){return Be.isPlainObject(c)&&Be.isPlainObject(m)?Be.merge.call({caseless:f},c,m):Be.isPlainObject(m)?Be.merge({},m):Be.isArray(m)?m.slice():m}function a(c,m,f){if(Be.isUndefined(m)){if(!Be.isUndefined(c))return o(void 0,c,f)}else return o(c,m,f)}function r(c,m){if(!Be.isUndefined(m))return o(void 0,m)}function s(c,m){if(Be.isUndefined(m)){if(!Be.isUndefined(c))return o(void 0,c)}else return o(void 0,m)}function i(c,m,f){if(f in t)return o(c,m);if(f in e)return o(void 0,c)}const u={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(c,m)=>a($g(c),$g(m),!0)};return Be.forEach(Object.keys(Object.assign({},e,t)),function(m){const f=u[m]||a,v=f(e[m],t[m],m);Be.isUndefined(v)&&f!==i||(n[m]=v)}),n}const I2="1.6.8",Rp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Rp[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const Cg={};Rp.transitional=function(t,n,o){function a(r,s){return"[Axios v"+I2+"] Transitional option '"+r+"'"+s+(o?". "+o:"")}return(r,s,i)=>{if(t===!1)throw new Kt(a(s," has been removed"+(n?" in "+n:"")),Kt.ERR_DEPRECATED);return n&&!Cg[s]&&(Cg[s]=!0,console.warn(a(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,s,i):!0}};function w7(e,t,n){if(typeof e!="object")throw new Kt("options must be an object",Kt.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let a=o.length;for(;a-- >0;){const r=o[a],s=t[r];if(s){const i=e[r],u=i===void 0||s(i,r,e);if(u!==!0)throw new Kt("option "+r+" must be "+u,Kt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Kt("Unknown option "+r,Kt.ERR_BAD_OPTION)}}const wf={assertOptions:w7,validators:Rp},Xa=wf.validators;class Gu{constructor(t){this.defaults=t,this.interceptors={request:new _g,response:new _g}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let a;Error.captureStackTrace?Error.captureStackTrace(a={}):a=new Error;const r=a.stack?a.stack.replace(/^.+\n/,""):"";o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Rl(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:r}=n;o!==void 0&&wf.assertOptions(o,{silentJSONParsing:Xa.transitional(Xa.boolean),forcedJSONParsing:Xa.transitional(Xa.boolean),clarifyTimeoutError:Xa.transitional(Xa.boolean)},!1),a!=null&&(Be.isFunction(a)?n.paramsSerializer={serialize:a}:wf.assertOptions(a,{encode:Xa.function,serialize:Xa.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=r&&Be.merge(r.common,r[n.method]);r&&Be.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),n.headers=Fa.concat(s,r);const i=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,i.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let m,f=0,v;if(!u){const b=[kg.bind(this),void 0];for(b.unshift.apply(b,i),b.push.apply(b,c),v=b.length,m=Promise.resolve(n);f<v;)m=m.then(b[f++],b[f++]);return m}v=i.length;let y=n;for(f=0;f<v;){const b=i[f++],w=i[f++];try{y=b(y)}catch(k){w.call(this,k);break}}try{m=kg.call(this,y)}catch(b){return Promise.reject(b)}for(f=0,v=c.length;f<v;)m=m.then(c[f++],c[f++]);return m}getUri(t){t=Rl(this.defaults,t);const n=y2(t.baseURL,t.url);return p2(n,t.params,t.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(t){Gu.prototype[t]=function(n,o){return this.request(Rl(o||{},{method:t,url:n,data:(o||{}).data}))}});Be.forEach(["post","put","patch"],function(t){function n(o){return function(r,s,i){return this.request(Rl(i||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Gu.prototype[t]=n(),Gu.prototype[t+"Form"]=n(!0)});const Fu=Gu;let x7=class w2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(a=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](a);o._listeners=null}),this.promise.then=a=>{let r;const s=new Promise(i=>{o.subscribe(i),r=i}).then(a);return s.cancel=function(){o.unsubscribe(r)},s},t(function(r,s,i){o.reason||(o.reason=new Ii(r,s,i),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new w2(function(a){t=a}),cancel:t}}};const k7=x7;function $7(e){return function(n){return e.apply(null,n)}}function C7(e){return Be.isObject(e)&&e.isAxiosError===!0}const xf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xf).forEach(([e,t])=>{xf[t]=e});const S7=xf;function x2(e){const t=new Fu(e),n=n2(Fu.prototype.request,t);return Be.extend(n,Fu.prototype,t,{allOwnKeys:!0}),Be.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return x2(Rl(e,a))},n}const Cn=x2(Ap);Cn.Axios=Fu;Cn.CanceledError=Ii;Cn.CancelToken=k7;Cn.isCancel=b2;Cn.VERSION=I2;Cn.toFormData=qc;Cn.AxiosError=Kt;Cn.Cancel=Cn.CanceledError;Cn.all=function(t){return Promise.all(t)};Cn.spread=$7;Cn.isAxiosError=C7;Cn.mergeConfig=Rl;Cn.AxiosHeaders=Fa;Cn.formToJSON=e=>g2(Be.isHTMLForm(e)?new FormData(e):e);Cn.getAdapter=_2.getAdapter;Cn.HttpStatusCode=S7;Cn.default=Cn;var T7=Fn;function E7(){if(!arguments.length)return[];var e=arguments[0];return T7(e)?e:[e]}var F7=E7;const qn=Bt(F7);function Ut(e,t){qn(e).forEach(n=>{Innoclapps.$on(n,t),rn(()=>{Innoclapps.$off(n,t)})})}function At(...e){Innoclapps.$emit(...e)}const ts=Cn.create({transformRequest:[(e,t)=>(e instanceof FormData&&A7(e)&&(t["Content-Type"]="multipart/form-data"),e),...Cn.defaults.transformRequest]});ts.defaults.withCredentials=!0;ts.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";ts.defaults.headers.common["Content-Type"]="application/json";ts.interceptors.request.use(e=>(window.Echo&&window.Echo.socketId()&&(e.headers["X-Socket-ID"]=window.Echo.socketId()),e));ts.interceptors.response.use(e=>e,e=>{if(Cn.isCancel(e))return e;e.isValidationError=()=>!1;const t=e.response.status;return t===404?At("error-404"):t===403?At("error-403",e):t===401?window.location.href=Innoclapps.scriptConfig("url")+"/login":t===409?At("conflict",e.response.data.message):t===419?At("token-expired",e):t===422?(e.isValidationError=()=>!0,At("form-validation-errors",e.response.data.errors)):t===429?At("too-many-requests",e):t===503?At("maintenance-mode",e.response.data.message):t>=500&&At("error",e.response.data.message),Promise.reject(e)});function A7(e){function t(n){if(n instanceof File)return!0;if(n instanceof Blob)return!1;if(Array.isArray(n)){for(const o of n)if(t(o))return!0}else if(typeof n=="object"&&n!==null){for(const o of Object.values(n))if(t(o))return!0}return!1}for(const[n,o]of e.entries())if(t(o))return!0;return!1}const Kr=Cn.CancelToken;/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var k2="store";function cn(e){return e===void 0&&(e=null),Pe(e!==null?e:k2)}function ns(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function R7(e){return e!==null&&typeof e=="object"}function D7(e){return e&&typeof e.then=="function"}function O7(e,t){return function(){return e(t)}}function $2(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var o=t.indexOf(e);o>-1&&t.splice(o,1)}}function C2(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;jc(e,n,[],e._modules.root,!0),Dp(e,n,t)}function Dp(e,t,n){var o=e._state,a=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={},i={},u=fc(!0);u.run(function(){ns(r,function(c,m){s[m]=O7(c,e),i[m]=O(function(){return s[m]()}),Object.defineProperty(e.getters,m,{get:function(){return i[m].value},enumerable:!0})})}),e._state=uo({data:t}),e._scope=u,e.strict&&V7(e),o&&n&&e._withCommit(function(){o.data=null}),a&&a.stop()}function jc(e,t,n,o,a){var r=!n.length,s=e._modules.getNamespace(n);if(o.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=o),!r&&!a){var i=Op(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit(function(){i[u]=o.state})}var c=o.context=B7(e,s,n);o.forEachMutation(function(m,f){var v=s+f;N7(e,v,m,c)}),o.forEachAction(function(m,f){var v=m.root?f:s+f,y=m.handler||m;P7(e,v,y,c)}),o.forEachGetter(function(m,f){var v=s+f;M7(e,v,m,c)}),o.forEachChild(function(m,f){jc(e,t,n.concat(f),m,a)})}function B7(e,t,n){var o=t==="",a={dispatch:o?e.dispatch:function(r,s,i){var u=Ku(r,s,i),c=u.payload,m=u.options,f=u.type;return(!m||!m.root)&&(f=t+f),e.dispatch(f,c)},commit:o?e.commit:function(r,s,i){var u=Ku(r,s,i),c=u.payload,m=u.options,f=u.type;(!m||!m.root)&&(f=t+f),e.commit(f,c,m)}};return Object.defineProperties(a,{getters:{get:o?function(){return e.getters}:function(){return S2(e,t)}},state:{get:function(){return Op(e.state,n)}}}),a}function S2(e,t){if(!e._makeLocalGettersCache[t]){var n={},o=t.length;Object.keys(e.getters).forEach(function(a){if(a.slice(0,o)===t){var r=a.slice(o);Object.defineProperty(n,r,{get:function(){return e.getters[a]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function N7(e,t,n,o){var a=e._mutations[t]||(e._mutations[t]=[]);a.push(function(s){n.call(e,o.state,s)})}function P7(e,t,n,o){var a=e._actions[t]||(e._actions[t]=[]);a.push(function(s){var i=n.call(e,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:e.getters,rootState:e.state},s);return D7(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch(function(u){throw e._devtoolHook.emit("vuex:error",u),u}):i})}function M7(e,t,n,o){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(r){return n(o.state,o.getters,r.state,r.getters)})}function V7(e){$e(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Op(e,t){return t.reduce(function(n,o){return n[o]},e)}function Ku(e,t,n){return R7(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var L7="vuex bindings",Sg="vuex:mutations",lm="vuex:actions",ol="vuex",q7=0;function U7(e,t){jE({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[L7]},function(n){n.addTimelineLayer({id:Sg,label:"Vuex Mutations",color:Tg}),n.addTimelineLayer({id:lm,label:"Vuex Actions",color:Tg}),n.addInspector({id:ol,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(o){if(o.app===e&&o.inspectorId===ol)if(o.filter){var a=[];A2(a,t._modules.root,o.filter,""),o.rootNodes=a}else o.rootNodes=[F2(t._modules.root,"")]}),n.on.getInspectorState(function(o){if(o.app===e&&o.inspectorId===ol){var a=o.nodeId;S2(t,a),o.state=H7(G7(t._modules,a),a==="root"?t.getters:t._makeLocalGettersCache,a)}}),n.on.editInspectorState(function(o){if(o.app===e&&o.inspectorId===ol){var a=o.nodeId,r=o.path;a!=="root"&&(r=a.split("/").filter(Boolean).concat(r)),t._withCommit(function(){o.set(t._state.data,r,o.state.value)})}}),t.subscribe(function(o,a){var r={};o.payload&&(r.payload=o.payload),r.state=a,n.notifyComponentUpdate(),n.sendInspectorTree(ol),n.sendInspectorState(ol),n.addTimelineEvent({layerId:Sg,event:{time:Date.now(),title:o.type,data:r}})}),t.subscribeAction({before:function(o,a){var r={};o.payload&&(r.payload=o.payload),o._id=q7++,o._time=Date.now(),r.state=a,n.addTimelineEvent({layerId:lm,event:{time:o._time,title:o.type,groupId:o._id,subtitle:"start",data:r}})},after:function(o,a){var r={},s=Date.now()-o._time;r.duration={_custom:{type:"duration",display:s+"ms",tooltip:"Action duration",value:s}},o.payload&&(r.payload=o.payload),r.state=a,n.addTimelineEvent({layerId:lm,event:{time:Date.now(),title:o.type,groupId:o._id,subtitle:"end",data:r}})}})})}var Tg=8702998,j7=6710886,z7=16777215,T2={label:"namespaced",textColor:z7,backgroundColor:j7};function E2(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function F2(e,t){return{id:t||"root",label:E2(t),tags:e.namespaced?[T2]:[],children:Object.keys(e._children).map(function(n){return F2(e._children[n],t+n+"/")})}}function A2(e,t,n,o){o.includes(n)&&e.push({id:o||"root",label:o.endsWith("/")?o.slice(0,o.length-1):o||"Root",tags:t.namespaced?[T2]:[]}),Object.keys(t._children).forEach(function(a){A2(e,t._children[a],n,o+a+"/")})}function H7(e,t,n){t=n==="root"?t:t[n];var o=Object.keys(t),a={state:Object.keys(e.state).map(function(s){return{key:s,editable:!0,value:e.state[s]}})};if(o.length){var r=W7(t);a.getters=Object.keys(r).map(function(s){return{key:s.endsWith("/")?E2(s):s,editable:!1,value:kf(function(){return r[s]})}})}return a}function W7(e){var t={};return Object.keys(e).forEach(function(n){var o=n.split("/");if(o.length>1){var a=t,r=o.pop();o.forEach(function(s){a[s]||(a[s]={_custom:{value:{},display:s,tooltip:"Module",abstract:!0}}),a=a[s]._custom.value}),a[r]=kf(function(){return e[n]})}else t[n]=kf(function(){return e[n]})}),t}function G7(e,t){var n=t.split("/").filter(function(o){return o});return n.reduce(function(o,a,r){var s=o[a];if(!s)throw new Error('Missing module "'+a+'" for path "'+t+'".');return r===n.length-1?s:s._children},t==="root"?e:e.root._children)}function kf(e){try{return e()}catch(t){return t}}var aa=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var o=t.state;this.state=(typeof o=="function"?o():o)||{}},R2={namespaced:{configurable:!0}};R2.namespaced.get=function(){return!!this._rawModule.namespaced};aa.prototype.addChild=function(t,n){this._children[t]=n};aa.prototype.removeChild=function(t){delete this._children[t]};aa.prototype.getChild=function(t){return this._children[t]};aa.prototype.hasChild=function(t){return t in this._children};aa.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};aa.prototype.forEachChild=function(t){ns(this._children,t)};aa.prototype.forEachGetter=function(t){this._rawModule.getters&&ns(this._rawModule.getters,t)};aa.prototype.forEachAction=function(t){this._rawModule.actions&&ns(this._rawModule.actions,t)};aa.prototype.forEachMutation=function(t){this._rawModule.mutations&&ns(this._rawModule.mutations,t)};Object.defineProperties(aa.prototype,R2);var Zr=function(t){this.register([],t,!1)};Zr.prototype.get=function(t){return t.reduce(function(n,o){return n.getChild(o)},this.root)};Zr.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(o,a){return n=n.getChild(a),o+(n.namespaced?a+"/":"")},"")};Zr.prototype.update=function(t){D2([],this.root,t)};Zr.prototype.register=function(t,n,o){var a=this;o===void 0&&(o=!0);var r=new aa(n,o);if(t.length===0)this.root=r;else{var s=this.get(t.slice(0,-1));s.addChild(t[t.length-1],r)}n.modules&&ns(n.modules,function(i,u){a.register(t.concat(u),i,o)})};Zr.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),o=t[t.length-1],a=n.getChild(o);a&&a.runtime&&n.removeChild(o)};Zr.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),o=t[t.length-1];return n?n.hasChild(o):!1};function D2(e,t,n){if(t.update(n),n.modules)for(var o in n.modules){if(!t.getChild(o))return;D2(e.concat(o),t.getChild(o),n.modules[o])}}function K7(e){return new go(e)}var go=function(t){var n=this;t===void 0&&(t={});var o=t.plugins;o===void 0&&(o=[]);var a=t.strict;a===void 0&&(a=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Zr(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var s=this,i=this,u=i.dispatch,c=i.commit;this.dispatch=function(v,y){return u.call(s,v,y)},this.commit=function(v,y,b){return c.call(s,v,y,b)},this.strict=a;var m=this._modules.root.state;jc(this,m,[],this._modules.root),Dp(this,m),o.forEach(function(f){return f(n)})},Bp={state:{configurable:!0}};go.prototype.install=function(t,n){t.provide(n||k2,this),t.config.globalProperties.$store=this;var o=this._devtools!==void 0?this._devtools:!1;o&&U7(t,this)};Bp.state.get=function(){return this._state.data};Bp.state.set=function(e){};go.prototype.commit=function(t,n,o){var a=this,r=Ku(t,n,o),s=r.type,i=r.payload,u={type:s,payload:i},c=this._mutations[s];c&&(this._withCommit(function(){c.forEach(function(f){f(i)})}),this._subscribers.slice().forEach(function(m){return m(u,a.state)}))};go.prototype.dispatch=function(t,n){var o=this,a=Ku(t,n),r=a.type,s=a.payload,i={type:r,payload:s},u=this._actions[r];if(u){try{this._actionSubscribers.slice().filter(function(m){return m.before}).forEach(function(m){return m.before(i,o.state)})}catch{}var c=u.length>1?Promise.all(u.map(function(m){return m(s)})):u[0](s);return new Promise(function(m,f){c.then(function(v){try{o._actionSubscribers.filter(function(y){return y.after}).forEach(function(y){return y.after(i,o.state)})}catch{}m(v)},function(v){try{o._actionSubscribers.filter(function(y){return y.error}).forEach(function(y){return y.error(i,o.state,v)})}catch{}f(v)})})}};go.prototype.subscribe=function(t,n){return $2(t,this._subscribers,n)};go.prototype.subscribeAction=function(t,n){var o=typeof t=="function"?{before:t}:t;return $2(o,this._actionSubscribers,n)};go.prototype.watch=function(t,n,o){var a=this;return $e(function(){return t(a.state,a.getters)},n,Object.assign({},o))};go.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};go.prototype.registerModule=function(t,n,o){o===void 0&&(o={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),jc(this,this.state,t,this._modules.get(t),o.preserveState),Dp(this,this.state)};go.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var o=Op(n.state,t.slice(0,-1));delete o[t[t.length-1]]}),C2(this)};go.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};go.prototype.hotUpdate=function(t){this._modules.update(t),C2(this,!0)};go.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(go.prototype,Bp);function Z7(e,t,n,o){for(var a=e.length,r=n+(o?1:-1);o?r--:++r<a;)if(t(e[r],r,e))return r;return-1}var O2=Z7,Y7=yc;function X7(){this.__data__=new Y7,this.size=0}var Q7=X7;function J7(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var eB=J7;function tB(e){return this.__data__.get(e)}var nB=tB;function oB(e){return this.__data__.has(e)}var aB=oB,rB=yc,lB=Jf,sB=ep,iB=200;function uB(e,t){var n=this.__data__;if(n instanceof rB){var o=n.__data__;if(!lB||o.length<iB-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new sB(o)}return n.set(e,t),this.size=n.size,this}var cB=uB,dB=yc,mB=Q7,fB=eB,pB=nB,vB=aB,hB=cB;function os(e){var t=this.__data__=new dB(e);this.size=t.size}os.prototype.clear=mB;os.prototype.delete=fB;os.prototype.get=pB;os.prototype.has=vB;os.prototype.set=hB;var zc=os,gB="__lodash_hash_undefined__";function bB(e){return this.__data__.set(e,gB),this}var yB=bB;function _B(e){return this.__data__.has(e)}var IB=_B,wB=ep,xB=yB,kB=IB;function Zu(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new wB;++t<n;)this.add(e[t])}Zu.prototype.add=Zu.prototype.push=xB;Zu.prototype.has=kB;var Np=Zu;function $B(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}var CB=$B;function SB(e,t){return e.has(t)}var Pp=SB,TB=Np,EB=CB,FB=Pp,AB=1,RB=2;function DB(e,t,n,o,a,r){var s=n&AB,i=e.length,u=t.length;if(i!=u&&!(s&&u>i))return!1;var c=r.get(e),m=r.get(t);if(c&&m)return c==t&&m==e;var f=-1,v=!0,y=n&RB?new TB:void 0;for(r.set(e,t),r.set(t,e);++f<i;){var b=e[f],w=t[f];if(o)var k=s?o(w,b,f,t,e,r):o(b,w,f,e,t,r);if(k!==void 0){if(k)continue;v=!1;break}if(y){if(!EB(t,function(x,I){if(!FB(y,I)&&(b===x||a(b,x,n,o,r)))return y.push(I)})){v=!1;break}}else if(!(b===w||a(b,w,n,o,r))){v=!1;break}}return r.delete(e),r.delete(t),v}var B2=DB,OB=na,BB=OB.Uint8Array,N2=BB;function NB(e){var t=-1,n=Array(e.size);return e.forEach(function(o,a){n[++t]=[a,o]}),n}var PB=NB;function MB(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var Mp=MB,Eg=ql,Fg=N2,VB=ci,LB=B2,qB=PB,UB=Mp,jB=1,zB=2,HB="[object Boolean]",WB="[object Date]",GB="[object Error]",KB="[object Map]",ZB="[object Number]",YB="[object RegExp]",XB="[object Set]",QB="[object String]",JB="[object Symbol]",eN="[object ArrayBuffer]",tN="[object DataView]",Ag=Eg?Eg.prototype:void 0,sm=Ag?Ag.valueOf:void 0;function nN(e,t,n,o,a,r,s){switch(n){case tN:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case eN:return!(e.byteLength!=t.byteLength||!r(new Fg(e),new Fg(t)));case HB:case WB:case ZB:return VB(+e,+t);case GB:return e.name==t.name&&e.message==t.message;case YB:case QB:return e==t+"";case KB:var i=qB;case XB:var u=o&jB;if(i||(i=UB),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;o|=zB,s.set(e,t);var m=LB(i(e),i(t),o,a,r,s);return s.delete(e),m;case JB:if(sm)return sm.call(e)==sm.call(t)}return!1}var oN=nN;function aN(e,t){for(var n=-1,o=t.length,a=e.length;++n<o;)e[a+n]=t[n];return e}var Vp=aN,rN=Vp,lN=Fn;function sN(e,t,n){var o=t(e);return lN(e)?o:rN(o,n(e))}var P2=sN;function iN(e,t){for(var n=-1,o=e==null?0:e.length,a=0,r=[];++n<o;){var s=e[n];t(s,n,e)&&(r[a++]=s)}return r}var Lp=iN;function uN(){return[]}var M2=uN,cN=Lp,dN=M2,mN=Object.prototype,fN=mN.propertyIsEnumerable,Rg=Object.getOwnPropertySymbols,pN=Rg?function(e){return e==null?[]:(e=Object(e),cN(Rg(e),function(t){return fN.call(e,t)}))}:dN,qp=pN;function vN(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var hN=vN,gN=hN,bN=fi,yN=Fn,_N=pi,IN=wc,wN=Ec,xN=Object.prototype,kN=xN.hasOwnProperty;function $N(e,t){var n=yN(e),o=!n&&bN(e),a=!n&&!o&&_N(e),r=!n&&!o&&!a&&wN(e),s=n||o||a||r,i=s?gN(e.length,String):[],u=i.length;for(var c in e)(t||kN.call(e,c))&&!(s&&(c=="length"||a&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||IN(c,u)))&&i.push(c);return i}var V2=$N,CN=V2,SN=Dy,TN=hr;function EN(e){return TN(e)?CN(e):SN(e)}var as=EN,FN=P2,AN=qp,RN=as;function DN(e){return FN(e,RN,AN)}var L2=DN,Dg=L2,ON=1,BN=Object.prototype,NN=BN.hasOwnProperty;function PN(e,t,n,o,a,r){var s=n&ON,i=Dg(e),u=i.length,c=Dg(t),m=c.length;if(u!=m&&!s)return!1;for(var f=u;f--;){var v=i[f];if(!(s?v in t:NN.call(t,v)))return!1}var y=r.get(e),b=r.get(t);if(y&&b)return y==t&&b==e;var w=!0;r.set(e,t),r.set(t,e);for(var k=s;++f<u;){v=i[f];var x=e[v],I=t[v];if(o)var C=s?o(I,x,v,t,e,r):o(x,I,v,e,t,r);if(!(C===void 0?x===I||a(x,I,n,o,r):C)){w=!1;break}k||(k=v=="constructor")}if(w&&!k){var S=e.constructor,T=t.constructor;S!=T&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof T=="function"&&T instanceof T)&&(w=!1)}return r.delete(e),r.delete(t),w}var MN=PN,im=zc,VN=B2,LN=oN,qN=MN,Og=mi,Bg=Fn,Ng=pi,UN=Ec,jN=1,Pg="[object Arguments]",Mg="[object Array]",uu="[object Object]",zN=Object.prototype,Vg=zN.hasOwnProperty;function HN(e,t,n,o,a,r){var s=Bg(e),i=Bg(t),u=s?Mg:Og(e),c=i?Mg:Og(t);u=u==Pg?uu:u,c=c==Pg?uu:c;var m=u==uu,f=c==uu,v=u==c;if(v&&Ng(e)){if(!Ng(t))return!1;s=!0,m=!1}if(v&&!m)return r||(r=new im),s||UN(e)?VN(e,t,n,o,a,r):LN(e,t,u,n,o,a,r);if(!(n&jN)){var y=m&&Vg.call(e,"__wrapped__"),b=f&&Vg.call(t,"__wrapped__");if(y||b){var w=y?e.value():e,k=b?t.value():t;return r||(r=new im),a(w,k,n,o,r)}}return v?(r||(r=new im),qN(e,t,n,o,a,r)):!1}var WN=HN,GN=WN,Lg=oa;function q2(e,t,n,o,a){return e===t?!0:e==null||t==null||!Lg(e)&&!Lg(t)?e!==e&&t!==t:GN(e,t,n,o,q2,a)}var Up=q2,KN=zc,ZN=Up,YN=1,XN=2;function QN(e,t,n,o){var a=n.length,r=a,s=!o;if(e==null)return!r;for(e=Object(e);a--;){var i=n[a];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++a<r;){i=n[a];var u=i[0],c=e[u],m=i[1];if(s&&i[2]){if(c===void 0&&!(u in e))return!1}else{var f=new KN;if(o)var v=o(c,m,u,e,t,f);if(!(v===void 0?ZN(m,c,YN|XN,o,f):v))return!1}}return!0}var JN=QN,eP=ho;function tP(e){return e===e&&!eP(e)}var U2=tP,nP=U2,oP=as;function aP(e){for(var t=oP(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,nP(a)]}return t}var rP=aP;function lP(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var j2=lP,sP=JN,iP=rP,uP=j2;function cP(e){var t=iP(e);return t.length==1&&t[0][2]?uP(t[0][0],t[0][1]):function(n){return n===e||sP(n,e,t)}}var dP=cP;function mP(e,t){return e!=null&&t in Object(e)}var fP=mP,pP=Wl,vP=fi,hP=Fn,gP=wc,bP=up,yP=Gl;function _P(e,t,n){t=pP(t,e);for(var o=-1,a=t.length,r=!1;++o<a;){var s=yP(t[o]);if(!(r=e!=null&&n(e,s)))break;e=e[s]}return r||++o!=a?r:(a=e==null?0:e.length,!!a&&bP(a)&&gP(s,a)&&(hP(e)||vP(e)))}var IP=_P,wP=fP,xP=IP;function kP(e,t){return e!=null&&xP(e,t,wP)}var z2=kP,$P=Up,CP=ey,SP=z2,TP=Qf,EP=U2,FP=j2,AP=Gl,RP=1,DP=2;function OP(e,t){return TP(e)&&EP(t)?FP(AP(e),t):function(n){var o=CP(n,e);return o===void 0&&o===t?SP(n,e):$P(t,o,RP|DP)}}var BP=OP;function NP(e){return e}var wi=NP;function PP(e){return function(t){return t==null?void 0:t[e]}}var MP=PP,VP=di;function LP(e){return function(t){return VP(t,e)}}var qP=LP,UP=MP,jP=qP,zP=Qf,HP=Gl;function WP(e){return zP(e)?UP(HP(e)):jP(e)}var GP=WP,KP=dP,ZP=BP,YP=wi,XP=Fn,QP=GP;function JP(e){return typeof e=="function"?e:e==null?YP:typeof e=="object"?XP(e)?ZP(e[0],e[1]):KP(e):QP(e)}var ra=JP,eM=P_,qg=1/0,tM=17976931348623157e292;function nM(e){if(!e)return e===0?e:0;if(e=eM(e),e===qg||e===-qg){var t=e<0?-1:1;return t*tM}return e===e?e:0}var oM=nM,aM=oM;function rM(e){var t=aM(e),n=t%1;return t===t?n?t-n:t:0}var lM=rM,sM=O2,iM=ra,uM=lM,cM=Math.max;function dM(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var a=n==null?0:uM(n);return a<0&&(a=cM(o+a,0)),sM(e,iM(t),a)}var H2=dM;const Et=Bt(H2),cu=K7({state:{sidebarMenuItems:[],sidebarOpen:!1,settings:{}},mutations:{SET_SETTINGS(e,t){Object.keys(t).forEach(n=>{e.settings[n]=t[n]})},SET_SIDEBAR_OPEN(e,t){e.sidebarOpen=t},SET_SIDEBAR_MENU_ITEMS(e,t){e.sidebarMenuItems=t},UPDATE_SIDEBAR_MENU_ITEM(e,t){const n=Et(e.sidebarMenuItems,["id",t.id]);e.sidebarMenuItems[n]=Object.assign({},e.sidebarMenuItems[n],t.data)}},getters:{getSidebarMenuItem:e=>t=>e.sidebarMenuItems[Et(e.sidebarMenuItems,["id",t])]},modules:{},strict:!1});Element.prototype.parents=function(e){for(var t=[],n=this,o=e!==void 0;(n=n.parentElement)!==null;)n.nodeType===Node.ELEMENT_NODE&&(!o||n.matches(e))&&t.push(n);return t};const $f=gt((document==null?void 0:document.title)??null);$e($f,e=>{e&&(document.title=e)});function bo(e=null){const t=gt(e);return $e(t,n=>{n&&($f.value=n)},{immediate:!0}),$f}function Ne(){const e=cn(),t=M(document.documentElement.classList.contains("dark"));let n=new MutationObserver(x=>{x.forEach(I=>{I.type==="attributes"&&I.attributeName==="class"&&(t.value=document.documentElement.classList.contains("dark"))})});n.observe(document.documentElement,{attributes:!0}),rn(()=>{n.disconnect(),n=null});const o=O(()=>e.state.sidebarMenuItems),a=O({get(){return e.state.sidebarOpen},set(x){e.commit("SET_SIDEBAR_OPEN",x)}}),r=O(()=>b("locales")),s=b("url"),i=O(()=>Sc()),u=O(()=>e.getters["users/current"]),c=O(()=>e.state.users.collection);function m(x){return e.getters["users/getById"](x)}function f(){let x=Innoclapps.scriptConfig("url");Innoclapps.request({baseURL:x,method:"POST",url:"/logout"}).then(()=>{window.location.href=x+"/login"})}function v(x){return Ma(e.state.settings,x)}function y(){e.commit("table/RESET_SETTINGS"),e.commit("fields/RESET")}function b(...x){return Innoclapps.scriptConfig(...x)}function w(){return!!b("integrations.microsoft.client_id")}function k(){return!!b("integrations.google.client_id")}return{appUrl:s,locale:i,locales:r,currentUser:u,users:c,sidebarOpen:a,sidebarItems:o,findUserById:m,logout:f,isDarkMode:ii(t),setting:v,resetStoreState:y,isGoogleApiConfigured:k,isMicrosoftGraphConfigured:w,scriptConfig:b}}function mM(e,t){let n,o,a;const r=M(!0),s=()=>{r.value=!0,a()};$e(e,s,{flush:"sync"});const i=typeof t=="function"?t:t.get,u=typeof t=="function"?void 0:t.set,c=j1((m,f)=>(o=m,a=f,{get(){return r.value&&(n=i(),r.value=!1),o(),n},set(v){u==null||u(v)}}));return Object.isExtensible(c)&&(c.trigger=s),c}function W2(e){return Kf()?(Xf(e),!0):!1}function rs(e){let t=!1,n;const o=fc(!0);return(...a)=>(t||(n=o.run(()=>e(...a)),t=!0),n)}function Da(e){return typeof e=="function"?e():h(e)}const Hc=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fM=Object.prototype.toString,pM=e=>fM.call(e)==="[object Object]",Vr=()=>{},vM=hM();function hM(){var e,t;return Hc&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function gM(e,t){function n(...o){return new Promise((a,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(a).catch(r)})}return n}const G2=e=>e();function bM(e,t={}){let n,o,a=Vr;const r=i=>{clearTimeout(i),a(),a=Vr};return i=>{const u=Da(e),c=Da(t.maxWait);return n&&r(n),u<=0||c!==void 0&&c<=0?(o&&(r(o),o=null),Promise.resolve(i())):new Promise((m,f)=>{a=t.rejectOnCancel?f:m,c&&!o&&(o=setTimeout(()=>{n&&r(n),o=null,m(i())},c)),n=setTimeout(()=>{o&&r(o),o=null,m(i())},u)})}}function yM(e=G2){const t=M(!0);function n(){t.value=!1}function o(){t.value=!0}const a=(...r)=>{t.value&&e(...r)};return{isActive:ii(t),pause:n,resume:o,eventFilter:a}}function _M(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const o=t;t=void 0,o&&await o},n}function K2(e){return e||va()}function Z2(e,t,n={}){const{eventFilter:o=G2,...a}=n;return $e(e,gM(o,t),a)}function IM(e,t,n={}){const{eventFilter:o,...a}=n,{eventFilter:r,pause:s,resume:i,isActive:u}=yM(o);return{stop:Z2(e,t,{...a,eventFilter:r}),pause:s,resume:i,isActive:u}}function wM(e,t){K2(t)&&En(e,t)}function Y2(e,t=!0,n){K2()?Je(e,n):t?e():ze(e)}function Gn(e,t,n={}){const{immediate:o=!0}=n,a=M(!1);let r=null;function s(){r&&(clearTimeout(r),r=null)}function i(){a.value=!1,s()}function u(...c){s(),a.value=!0,r=setTimeout(()=>{a.value=!1,r=null,e(...c)},Da(t))}return o&&(a.value=!0,Hc&&u()),W2(i),{isPending:ii(a),start:u,stop:i}}function xM(e,t,n){let o=n!=null&&n.immediate?[]:[...e instanceof Function?e():Array.isArray(e)?e:Da(e)];return $e(e,(a,r,s)=>{const i=Array.from({length:o.length}),u=[];for(const m of a){let f=!1;for(let v=0;v<o.length;v++)if(!i[v]&&m===o[v]){i[v]=!0,f=!0;break}f||u.push(m)}const c=o.filter((m,f)=>!i[f]);t(a,o,u,c,s),o=[...a]},n)}function ma(e,t,n={}){const{debounce:o=0,maxWait:a=void 0,...r}=n;return Z2(e,t,{...r,eventFilter:bM(o,{maxWait:a})})}function Yr(e,t,n){const o=$e(e,(...a)=>(ze(()=>o()),t(...a)),n);return o}function La(e,t,n){const o=$e(e,(a,r,s)=>{a&&(n!=null&&n.once&&ze(()=>o()),t(a,r,s))},{...n,once:!1});return o}function X2(e,t,n){let o;$n(n)?o={evaluating:n}:o=n||{};const{lazy:a=!1,evaluating:r=void 0,shallow:s=!0,onError:i=Vr}=o,u=M(!a),c=s?Pt(t):M(t);let m=0;return on(async f=>{if(!u.value)return;m++;const v=m;let y=!1;r&&Promise.resolve().then(()=>{r.value=!0});try{const b=await e(w=>{f(()=>{r&&(r.value=!1),y||w()})});v===m&&(c.value=b)}catch(b){i(b)}finally{r&&v===m&&(r.value=!1),y=!0}}),a?O(()=>(u.value=!0,c.value)):c}function Br(e){var t;const n=Da(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Zs=Hc?window:void 0,Q2=Hc?window.navigator:void 0;function Yo(...e){let t,n,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,a]=e,t=Zs):[t,n,o,a]=e,!t)return Vr;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],s=()=>{r.forEach(m=>m()),r.length=0},i=(m,f,v,y)=>(m.addEventListener(f,v,y),()=>m.removeEventListener(f,v,y)),u=$e(()=>[Br(t),Da(a)],([m,f])=>{if(s(),!m)return;const v=pM(f)?{...f}:f;r.push(...n.flatMap(y=>o.map(b=>i(m,y,b,v))))},{immediate:!0,flush:"post"}),c=()=>{u(),s()};return W2(c),c}let Ug=!1;function J2(e,t,n={}){const{window:o=Zs,ignore:a=[],capture:r=!0,detectIframe:s=!1}=n;if(!o)return Vr;vM&&!Ug&&(Ug=!0,Array.from(o.document.body.children).forEach(v=>v.addEventListener("click",Vr)),o.document.documentElement.addEventListener("click",Vr));let i=!0;const u=v=>a.some(y=>{if(typeof y=="string")return Array.from(o.document.querySelectorAll(y)).some(b=>b===v.target||v.composedPath().includes(b));{const b=Br(y);return b&&(v.target===b||v.composedPath().includes(b))}}),m=[Yo(o,"click",v=>{const y=Br(e);if(!(!y||y===v.target||v.composedPath().includes(y))){if(v.detail===0&&(i=!u(v)),!i){i=!0;return}t(v)}},{passive:!0,capture:r}),Yo(o,"pointerdown",v=>{const y=Br(e);i=!u(v)&&!!(y&&!v.composedPath().includes(y))},{passive:!0}),s&&Yo(o,"blur",v=>{setTimeout(()=>{var y;const b=Br(e);((y=o.document.activeElement)==null?void 0:y.tagName)==="IFRAME"&&!(b!=null&&b.contains(o.document.activeElement))&&t(v)},0)})].filter(Boolean);return()=>m.forEach(v=>v())}function eI(e={}){var t;const{window:n=Zs,deep:o=!0}=e,a=(t=e.document)!=null?t:n==null?void 0:n.document,r=()=>{var u;let c=a==null?void 0:a.activeElement;if(o)for(;c!=null&&c.shadowRoot;)c=(u=c==null?void 0:c.shadowRoot)==null?void 0:u.activeElement;return c},s=M(),i=()=>{s.value=r()};return n&&(Yo(n,"blur",u=>{u.relatedTarget===null&&i()},!0),Yo(n,"focus",i,!0)),i(),s}function kM(){const e=M(!1),t=va();return t&&Je(()=>{e.value=!0},t),e}function tI(e){const t=kM();return O(()=>(t.value,!!e()))}function jg(e,t={}){const{controls:n=!1,navigator:o=Q2}=t,a=tI(()=>o&&"permissions"in o);let r;const s=typeof e=="string"?{name:e}:e,i=M(),u=()=>{r&&(i.value=r.state)},c=_M(async()=>{if(a.value){if(!r)try{r=await o.permissions.query(s),Yo(r,"change",u),u()}catch{i.value="prompt"}return r}});return c(),n?{state:i,isSupported:a,query:c}:i}function nI(e={}){const{navigator:t=Q2,read:n=!1,source:o,copiedDuring:a=1500,legacy:r=!1}=e,s=tI(()=>t&&"clipboard"in t),i=jg("clipboard-read"),u=jg("clipboard-write"),c=O(()=>s.value||r),m=M(""),f=M(!1),v=Gn(()=>f.value=!1,a);function y(){s.value&&x(i.value)?t.clipboard.readText().then(I=>{m.value=I}):m.value=k()}c.value&&n&&Yo(["copy","cut"],y);async function b(I=Da(o)){c.value&&I!=null&&(s.value&&x(u.value)?await t.clipboard.writeText(I):w(I),m.value=I,f.value=!0,v.start())}function w(I){const C=document.createElement("textarea");C.value=I??"",C.style.position="absolute",C.style.opacity="0",document.body.appendChild(C),C.select(),document.execCommand("copy"),C.remove()}function k(){var I,C,S;return(S=(C=(I=document==null?void 0:document.getSelection)==null?void 0:I.call(document))==null?void 0:C.toString())!=null?S:""}function x(I){return I==="granted"||I==="prompt"}return{isSupported:c,text:m,copied:f,copy:b}}const du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mu="__vueuse_ssr_handlers__",$M=CM();function CM(){return mu in du||(du[mu]=du[mu]||{}),du[mu]}function SM(e,t){return $M[e]||t}function TM(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const EM={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},zg="vueuse-storage";function xi(e,t,n,o={}){var a;const{flush:r="pre",deep:s=!0,listenToStorageChanges:i=!0,writeDefaults:u=!0,mergeDefaults:c=!1,shallow:m,window:f=Zs,eventFilter:v,onError:y=B=>{console.error(B)},initOnMounted:b}=o,w=(m?Pt:M)(typeof t=="function"?t():t);if(!n)try{n=SM("getDefaultStorage",()=>{var B;return(B=Zs)==null?void 0:B.localStorage})()}catch(B){y(B)}if(!n)return w;const k=Da(t),x=TM(k),I=(a=o.serializer)!=null?a:EM[x],{pause:C,resume:S}=IM(w,()=>E(w.value),{flush:r,deep:s,eventFilter:v});f&&i&&Y2(()=>{Yo(f,"storage",F),Yo(f,zg,R),b&&F()}),b||F();function T(B,V){f&&f.dispatchEvent(new CustomEvent(zg,{detail:{key:e,oldValue:B,newValue:V,storageArea:n}}))}function E(B){try{const V=n.getItem(e);if(B==null)T(V,null),n.removeItem(e);else{const P=I.write(B);V!==P&&(n.setItem(e,P),T(V,P))}}catch(V){y(V)}}function $(B){const V=B?B.newValue:n.getItem(e);if(V==null)return u&&k!=null&&n.setItem(e,I.write(k)),k;if(!B&&c){const P=I.read(V);return typeof c=="function"?c(P,k):x==="object"&&!Array.isArray(P)?{...k,...P}:P}else return typeof V!="string"?V:I.read(V)}function F(B){if(!(B&&B.storageArea!==n)){if(B&&B.key==null){w.value=k;return}if(!(B&&B.key!==e)){C();try{(B==null?void 0:B.newValue)!==I.write(w.value)&&(w.value=$(B))}catch(V){y(V)}finally{B?ze(S):S()}}}}function R(B){F(B.detail)}return w}function FM(e){const t=va(),n=mM(()=>null,()=>e?Br(e):t.proxy.$el);return Ll(n.trigger),Je(n.trigger),n}function jp(e=FM()){const t=Pt(),n=()=>{const o=Br(e);o&&(t.value=o.parentElement)};return Y2(n),$e(()=>Da(e),n),t}function AM(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e}var oI=AM,RM=np,DM=Ic;function OM(e,t,n,o){var a=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var i=t[r],u=o?o(n[i],e[i],i,n,e):void 0;u===void 0&&(u=e[i]),a?DM(n,i,u):RM(n,i,u)}return n}var ls=OM,BM=ls,NM=as;function PM(e,t){return e&&BM(t,NM(t),e)}var MM=PM;function VM(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var LM=VM,qM=ho,UM=Tc,jM=LM,zM=Object.prototype,HM=zM.hasOwnProperty;function WM(e){if(!qM(e))return jM(e);var t=UM(e),n=[];for(var o in e)o=="constructor"&&(t||!HM.call(e,o))||n.push(o);return n}var GM=WM,KM=V2,ZM=GM,YM=hr;function XM(e){return YM(e)?KM(e,!0):ZM(e)}var ki=XM,QM=ls,JM=ki;function eV(e,t){return e&&QM(t,JM(t),e)}var tV=eV,Yu={exports:{}};Yu.exports;(function(e,t){var n=na,o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,r=a&&a.exports===o,s=r?n.Buffer:void 0,i=s?s.allocUnsafe:void 0;function u(c,m){if(m)return c.slice();var f=c.length,v=i?i(f):new c.constructor(f);return c.copy(v),v}e.exports=u})(Yu,Yu.exports);var aI=Yu.exports;function nV(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}var rI=nV,oV=ls,aV=qp;function rV(e,t){return oV(e,aV(e),t)}var lV=rV,sV=Ry,iV=sV(Object.getPrototypeOf,Object),zp=iV,uV=Vp,cV=zp,dV=qp,mV=M2,fV=Object.getOwnPropertySymbols,pV=fV?function(e){for(var t=[];e;)uV(t,dV(e)),e=cV(e);return t}:mV,lI=pV,vV=ls,hV=lI;function gV(e,t){return vV(e,hV(e),t)}var bV=gV,yV=P2,_V=lI,IV=ki;function wV(e){return yV(e,IV,_V)}var Hp=wV,xV=Object.prototype,kV=xV.hasOwnProperty;function $V(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&kV.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var CV=$V,Hg=N2;function SV(e){var t=new e.constructor(e.byteLength);return new Hg(t).set(new Hg(e)),t}var Wp=SV,TV=Wp;function EV(e,t){var n=t?TV(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var FV=EV,AV=/\w*$/;function RV(e){var t=new e.constructor(e.source,AV.exec(e));return t.lastIndex=e.lastIndex,t}var DV=RV,Wg=ql,Gg=Wg?Wg.prototype:void 0,Kg=Gg?Gg.valueOf:void 0;function OV(e){return Kg?Object(Kg.call(e)):{}}var BV=OV,NV=Wp;function PV(e,t){var n=t?NV(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var sI=PV,MV=Wp,VV=FV,LV=DV,qV=BV,UV=sI,jV="[object Boolean]",zV="[object Date]",HV="[object Map]",WV="[object Number]",GV="[object RegExp]",KV="[object Set]",ZV="[object String]",YV="[object Symbol]",XV="[object ArrayBuffer]",QV="[object DataView]",JV="[object Float32Array]",eL="[object Float64Array]",tL="[object Int8Array]",nL="[object Int16Array]",oL="[object Int32Array]",aL="[object Uint8Array]",rL="[object Uint8ClampedArray]",lL="[object Uint16Array]",sL="[object Uint32Array]";function iL(e,t,n){var o=e.constructor;switch(t){case XV:return MV(e);case jV:case zV:return new o(+e);case QV:return VV(e,n);case JV:case eL:case tL:case nL:case oL:case aL:case rL:case lL:case sL:return UV(e,n);case HV:return new o;case WV:case ZV:return new o(e);case GV:return LV(e);case KV:return new o;case YV:return qV(e)}}var uL=iL,cL=ho,Zg=Object.create,dL=function(){function e(){}return function(t){if(!cL(t))return{};if(Zg)return Zg(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),mL=dL,fL=mL,pL=zp,vL=Tc;function hL(e){return typeof e.constructor=="function"&&!vL(e)?fL(pL(e)):{}}var iI=hL,gL=mi,bL=oa,yL="[object Map]";function _L(e){return bL(e)&&gL(e)==yL}var IL=_L,wL=IL,xL=vi,Yg=cp,Xg=Yg&&Yg.isMap,kL=Xg?xL(Xg):wL,$L=kL,CL=mi,SL=oa,TL="[object Set]";function EL(e){return SL(e)&&CL(e)==TL}var FL=EL,AL=FL,RL=vi,Qg=cp,Jg=Qg&&Qg.isSet,DL=Jg?RL(Jg):AL,OL=DL,BL=zc,NL=oI,PL=np,ML=MM,VL=tV,LL=aI,qL=rI,UL=lV,jL=bV,zL=L2,HL=Hp,WL=mi,GL=CV,KL=uL,ZL=iI,YL=Fn,XL=pi,QL=$L,JL=ho,eq=OL,tq=as,nq=ki,oq=1,aq=2,rq=4,uI="[object Arguments]",lq="[object Array]",sq="[object Boolean]",iq="[object Date]",uq="[object Error]",cI="[object Function]",cq="[object GeneratorFunction]",dq="[object Map]",mq="[object Number]",dI="[object Object]",fq="[object RegExp]",pq="[object Set]",vq="[object String]",hq="[object Symbol]",gq="[object WeakMap]",bq="[object ArrayBuffer]",yq="[object DataView]",_q="[object Float32Array]",Iq="[object Float64Array]",wq="[object Int8Array]",xq="[object Int16Array]",kq="[object Int32Array]",$q="[object Uint8Array]",Cq="[object Uint8ClampedArray]",Sq="[object Uint16Array]",Tq="[object Uint32Array]",hn={};hn[uI]=hn[lq]=hn[bq]=hn[yq]=hn[sq]=hn[iq]=hn[_q]=hn[Iq]=hn[wq]=hn[xq]=hn[kq]=hn[dq]=hn[mq]=hn[dI]=hn[fq]=hn[pq]=hn[vq]=hn[hq]=hn[$q]=hn[Cq]=hn[Sq]=hn[Tq]=!0;hn[uq]=hn[cI]=hn[gq]=!1;function Au(e,t,n,o,a,r){var s,i=t&oq,u=t&aq,c=t&rq;if(n&&(s=a?n(e,o,a,r):n(e)),s!==void 0)return s;if(!JL(e))return e;var m=YL(e);if(m){if(s=GL(e),!i)return qL(e,s)}else{var f=WL(e),v=f==cI||f==cq;if(XL(e))return LL(e,i);if(f==dI||f==uI||v&&!a){if(s=u||v?{}:ZL(e),!i)return u?jL(e,VL(s,e)):UL(e,ML(s,e))}else{if(!hn[f])return a?e:{};s=KL(e,f,i)}}r||(r=new BL);var y=r.get(e);if(y)return y;r.set(e,s),eq(e)?e.forEach(function(k){s.add(Au(k,t,n,k,e,r))}):QL(e)&&e.forEach(function(k,x){s.set(x,Au(k,t,n,x,e,r))});var b=c?u?HL:zL:u?nq:tq,w=m?void 0:b(e);return NL(w||e,function(k,x){w&&(x=k,k=e[x]),PL(s,x,Au(k,t,n,x,e,r))}),s}var mI=Au,Eq=mI,Fq=1,Aq=4;function Rq(e){return Eq(e,Fq|Aq)}var Dq=Rq;const Mo=Bt(Dq);var Oq=Up;function Bq(e,t){return Oq(e,t)}var Nq=Bq;const fa=Bt(Nq);var Pq=Ic,Mq=ci;function Vq(e,t,n){(n!==void 0&&!Mq(e[t],n)||n===void 0&&!(t in e))&&Pq(e,t,n)}var fI=Vq;function Lq(e){return function(t,n,o){for(var a=-1,r=Object(t),s=o(t),i=s.length;i--;){var u=s[e?i:++a];if(n(r[u],u,r)===!1)break}return t}}var qq=Lq,Uq=qq,jq=Uq(),pI=jq,zq=hr,Hq=oa;function Wq(e){return Hq(e)&&zq(e)}var Gp=Wq,Gq=fr,Kq=zp,Zq=oa,Yq="[object Object]",Xq=Function.prototype,Qq=Object.prototype,vI=Xq.toString,Jq=Qq.hasOwnProperty,eU=vI.call(Object);function tU(e){if(!Zq(e)||Gq(e)!=Yq)return!1;var t=Kq(e);if(t===null)return!0;var n=Jq.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&vI.call(n)==eU}var hI=tU;function nU(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var gI=nU,oU=ls,aU=ki;function rU(e){return oU(e,aU(e))}var lU=rU,eb=fI,sU=aI,iU=sI,uU=rI,cU=iI,tb=fi,nb=Fn,dU=Gp,mU=pi,fU=hc,pU=ho,vU=hI,hU=Ec,ob=gI,gU=lU;function bU(e,t,n,o,a,r,s){var i=ob(e,n),u=ob(t,n),c=s.get(u);if(c){eb(e,n,c);return}var m=r?r(i,u,n+"",e,t,s):void 0,f=m===void 0;if(f){var v=nb(u),y=!v&&mU(u),b=!v&&!y&&hU(u);m=u,v||y||b?nb(i)?m=i:dU(i)?m=uU(i):y?(f=!1,m=sU(u,!0)):b?(f=!1,m=iU(u,!0)):m=[]:vU(u)||tb(u)?(m=i,tb(i)?m=gU(i):(!pU(i)||fU(i))&&(m=cU(u))):f=!1}f&&(s.set(u,m),a(m,u,o,r,s),s.delete(u)),eb(e,n,m)}var yU=bU,_U=zc,IU=fI,wU=pI,xU=yU,kU=ho,$U=ki,CU=gI;function bI(e,t,n,o,a){e!==t&&wU(t,function(r,s){if(a||(a=new _U),kU(r))xU(e,t,s,n,bI,o,a);else{var i=o?o(CU(e,s),r,s+"",e,t,a):void 0;i===void 0&&(i=r),IU(e,s,i)}},$U)}var SU=bI;function TU(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var EU=TU,FU=EU,ab=Math.max;function AU(e,t,n){return t=ab(t===void 0?e.length-1:t,0),function(){for(var o=arguments,a=-1,r=ab(o.length-t,0),s=Array(r);++a<r;)s[a]=o[t+a];a=-1;for(var i=Array(t+1);++a<t;)i[a]=o[a];return i[t]=n(s),FU(e,this,i)}}var yI=AU;function RU(e){return function(){return e}}var DU=RU,OU=DU,rb=ty,BU=wi,NU=rb?function(e,t){return rb(e,"toString",{configurable:!0,enumerable:!1,value:OU(t),writable:!0})}:BU,PU=NU,MU=800,VU=16,LU=Date.now;function qU(e){var t=0,n=0;return function(){var o=LU(),a=VU-(o-n);if(n=o,a>0){if(++t>=MU)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var UU=qU,jU=PU,zU=UU,HU=zU(jU),_I=HU,WU=wi,GU=yI,KU=_I;function ZU(e,t){return KU(GU(e,t,WU),e+"")}var Wc=ZU,YU=ci,XU=hr,QU=wc,JU=ho;function ej(e,t,n){if(!JU(n))return!1;var o=typeof t;return(o=="number"?XU(n)&&QU(t,n.length):o=="string"&&t in n)?YU(n[t],e):!1}var II=ej,tj=Wc,nj=II;function oj(e){return tj(function(t,n){var o=-1,a=n.length,r=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(r=e.length>3&&typeof r=="function"?(a--,r):void 0,s&&nj(n[0],n[1],s)&&(r=a<3?void 0:r,a=1),t=Object(t);++o<a;){var i=n[o];i&&e(t,i,o,r)}return t})}var aj=oj,rj=SU,lj=aj,sj=lj(function(e,t,n){rj(e,t,n)}),ij=sj;const Ru=Bt(ij);class uj{constructor(){this.errors={}}set(t,n){typeof t=="object"?this.errors=t:this.set({...this.errors,[t]:qn(n)})}all(){return this.errors}has(t){return Object.hasOwn(this.errors,t)}hasAny(...t){return t.some(n=>this.has(n))}any(){return Object.keys(this.errors).length>0}first(t){if(this.has(t))return this.getAll(t)[0]}getAll(t){return qn(this.errors[t]||[])}clear(t){const n={};t&&Object.keys(this.errors).forEach(o=>{o!==t&&(n[o]=this.errors[o])}),this.set(n)}groupByField(){const t={},n=this.all();return Object.keys(n).forEach(o=>{const a=o.match(/(.*?)\.\d+\..+/);if(a){const r=a[1];t[r]||(t[r]={messages:[],array:{}}),t[r].array[o]=n[o][0]}else t[o]||(t[o]={messages:[]}),t[o].messages.push(...n[o])}),t}}function cj(e){return e instanceof File||e instanceof FileList}function wI(e,t=new FormData,n=null){if(e===null||e==="undefined"||e.length===0)return t.append(n,e);for(const o in e)Object.hasOwn(e,o)&&mj(t,dj(n,o),e[o]);return t}function dj(e,t){return e?e+"["+t+"]":t}function mj(e,t,n){if(n instanceof Date)return e.append(t,n.toISOString());if(n instanceof File)return e.append(t,n,n.name);if(typeof n=="boolean")return e.append(t,n?"1":"0");if(n===null)return e.append(t,"");if(typeof n!="object")return e.append(t,n);wI(n,e,t)}class Gc{constructor(t={},n={}){this.busy=!1,this.recentlySuccessful=!1,this.errors=new uj,this.queryString={},this.withData(t).withOptions(n)}isDirty(){return!fa(this.originalData,this.data())}withData(t){this.successful=!1,this.setInitialData(t);for(const n in t)this[n]=t[n];return this}setInitialData(t){this.originalData=Mo(t)}withOptions(t){return this.__options={resetOnSuccess:!1,...t},this}populate(t){return this.keys().forEach(n=>{this[n]=t[n]}),this}set(t,n=null){return typeof t=="object"?Object.entries(t).forEach(([o,a])=>this.set(o,a)):(this.fill(t,n),fa(this.originalData[t],n)||(this.originalData[t]=Mo(n))),this}fill(t,n=null){return typeof t=="object"?Object.entries(t).forEach(([o,a])=>this.fill(o,a)):fa(this[t],n)||(this[t]=n),this}withQueryString(t){return this.queryString={...this.queryString,...t},this}data(){return this.keys().reduce((t,n)=>({...t,[n]:this[n]}),{})}keys(){return Object.keys(this).filter(t=>!this.ignore.includes(t))}startProcessing(){this.errors.clear(),this.busy=!0,this.successful=!1}finishProcessing(t){this.busy=!1,this.successful=!0,this.recentlySuccessful=!0,this.__options.resetOnSuccess&&this.reset(),typeof this.__options.onSuccess=="function"&&this.__options.onSuccess(t),setTimeout(()=>this.recentlySuccessful=!1,3e3)}clear(){return this.keys().forEach(t=>{delete this[t]}),this.successful=!1,this.errors.clear(),this.queryString={},this.setInitialData({}),this}reset(){return this.keys().forEach(t=>{this[t]=Mo(this.originalData[t])}),this}getError(t){return this.errors.first(t)}get(t,n={}){return this.submit("get",t,n)}post(t,n={}){return this.submit("post",t,n)}patch(t,n={}){return this.submit("patch",t,n)}put(t,n={}){return this.submit("put",t,n)}delete(t,n={}){return this.submit("delete",t,n)}submit(t,n,o={}){this.startProcessing();let a=this.createQueryStringParams(n);const r=t==="get"?{params:Ru(a.queryString,this.data())}:this.hasFiles()?wI(this.data()):this.data();return new Promise((s,i)=>{Innoclapps.request()[t](a.uri,r,Ru({params:a.queryString},o)).then(u=>{s(u.data),this.finishProcessing(u)}).catch(u=>{this.busy=!1,u.response&&this.errors.set(this.extractErrors(u.response)),i(u)})})}extractErrors(t){return!t.data||typeof t.data!="object"?{error:Gc.errorMessage}:t.data.errors?{...t.data.errors}:t.data.message?{error:t.data.message}:{...t.data}}createQueryStringParams(t){let n=t.split("?"),o=n[1]?Object.fromEntries(new URLSearchParams(n[1])):{};return{uri:n[0],queryString:Ru(o,this.queryString)}}hasFiles(){for(const t in this.originalData)if(this.hasFilesDeep(this[t]))return!0;return!1}hasFilesDeep(t){if(t===null)return!1;if(typeof t=="object"){for(const n in t)if(Object.hasOwn(t,n)&&this.hasFilesDeep(t[n]))return!0}if(Array.isArray(t)){for(const n in t)if(Object.hasOwn(t,n))return this.hasFilesDeep(t[n])}return cj(t)}get ignore(){return["__options","busy","successful","recentlySuccessful","errors","originalData","queryString"]}}Gc.errorMessage="Something went wrong. Please try again.";function Ze(e={},t={}){const n=t.autoClearErrors!==!1;delete t.autoClearErrors;const o=uo(new Gc(e,t));if(n){let s=function(){const i=o.data();o.keys().forEach(u=>{const c=r[u],m=i[u];if(!Array.isArray(m)){m!=c&&o.errors.clear(u);return}fa(m,c)||(o.errors.clear(u),Array.isArray(c)&&(m.forEach(v=>{$l(v)&&_l(v)}),c.some(v=>v&&v._formUniqueId)?o.errors.set(fj(u,c,m,o.errors.all())):c.forEach((v,y)=>{v!==m[y]&&o.errors.clear(`${u}.${y}`)})))}),r=xI(i)},r={};ma(()=>o.data(),()=>s(),{debounce:250,deep:!0,immediate:!0})}return{form:o}}function xI(e,t={}){let n=Ru({},Mo(e),t);return"_formUniqueId"in e&&_l(n,e._formUniqueId),Object.keys(n).forEach(o=>{R8(n[o])&&(n[o]=e[o].map(a=>{if($l(a)){let r=Mo(a);return"_formUniqueId"in a&&_l(r,a._formUniqueId),r}return a}))}),n}function _l(e,t){return"_formUniqueId"in e||Object.defineProperty(e,"_formUniqueId",{enumerable:!1,configurable:!1,writable:!1,value:t||Symbol()}),e}function fj(e,t,n,o){let a={...o};const r={},s=new Map(n.map(i=>[i._formUniqueId,i]));return t.forEach(i=>{const u=t.findIndex(b=>b._formUniqueId===i._formUniqueId),c=s.get(i._formUniqueId),m=n.findIndex(b=>b&&b._formUniqueId===i._formUniqueId),f=!c,v=!f&&!fa(i,c),y=m!==u;Object.keys(a).forEach(b=>{const w=new RegExp(`^${e}\\.(${u})(\\.|$)`);if(w.test(b)){if(f||v&&!y)delete a[b];else if(y){const k=b.replace(w,`${e}.${m}$2`);r[b]=k}}})}),Object.entries(r).forEach(([i,u])=>{a[u]=a[i],delete a[i]}),a}function To(){const e=cn(),{t}=Ee(),{form:n}=Ze(),{scriptConfig:o}=Ne(),a=M(!1),r=Pt({});async function s(){const{data:m}=await Innoclapps.request("/settings");n.set(m),r.value=m,a.value=!0}function i(m){for(let f in m){let v=`settings.${f}`;o(v)!==void 0&&(o(v,m[f]),e.commit("SET_SETTINGS",{[f]:m[f]}))}}function u(m){n.post("settings").then(f=>{Innoclapps.success(t("core::settings.updated")),typeof m=="function"&&m(n,f),i(n.data())})}async function c(m){await ze(),u(m)}return s(),{isReady:a,submit:c,saveSettings:u,originalSettings:ii(r),form:n}}const pj={class:"lg:flex lg:space-x-4"},vj={class:"mt-4 rounded-lg border border-primary-100 bg-gradient-to-tr from-primary-50/40 from-25% to-primary-100 px-10 py-6 dark:border-neutral-800 dark:bg-gradient-to-tl dark:from-neutral-600 dark:to-neutral-900 md:flex md:items-center"},hj=_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"size-14 fill-primary-700 dark:fill-neutral-200"},[_("path",{d:"M11.5 10.9c-4 0-7.9.9-11.5 2.8h22.9c-3.6-1.9-7.4-2.8-11.4-2.8zM16.7 14.8c-1.7 0-3.1 1.1-3.6 2.6-1-.3-1.9-.3-2.8-.1-.6-1.4-1.9-2.4-3.6-2.4-2.1 0-3.8 1.7-3.8 3.8 0 2.1 1.7 3.8 3.8 3.8s3.8-1.7 3.8-3.8v-.4c.8-.2 1.6-.1 2.4.2v.3c0 2.1 1.7 3.8 3.8 3.8 2.1 0 3.8-1.7 3.8-3.8 0-2.2-1.7-4-3.8-4zm-7.2 3.9c0 1.6-1.3 2.8-2.8 2.8-1.6 0-2.8-1.3-2.8-2.8s1.3-2.8 2.8-2.8c1.2 0 2.2.7 2.6 1.7.1.3.2.6.2 1.1 0-.1 0-.1 0 0zm7.2 2.8c-1.6 0-2.8-1.3-2.8-2.8s1.3-2.8 2.8-2.8 2.8 1.3 2.8 2.8-1.3 2.8-2.8 2.8zM16.7 2 9.9 3.1 6.6 2 4.4 8.7h14.5z"})],-1),gj={class:"mt-5 md:ml-8 md:mt-0"},bj={class:"mb-1 text-lg font-semibold text-primary-800 dark:text-neutral-100"},yj={class:"text-base/6 text-primary-700 dark:text-neutral-300 sm:text-sm/6 md:max-w-xl"},_j={__name:"SettingsRecaptcha",setup(e){const{scriptConfig:t}=Ne(),{form:n,submit:o,isReady:a}=To();function r(){o(s=>{t("reCaptcha.configured",s.recaptcha_secret_key!=""&&s.recaptcha_site_key!="")})}return(s,i)=>{const u=d("ICardHeading"),c=d("ILink"),m=d("ICardActions"),f=d("ICardHeader"),v=d("IFormInput"),y=d("IFormGroup"),b=d("IFormTextarea"),w=d("ICardBody"),k=d("IButton"),x=d("ICardFooter"),I=d("ICard"),C=Ve("t");return g(),D(fe,null,[l(f,null,{default:p(()=>[l(u,{text:s.$t("core::settings.recaptcha.recaptcha")},null,8,["text"]),l(m,null,{default:p(()=>[l(c,{href:"https://www.google.com/recaptcha/admin",text:"v2"})]),_:1})]),_:1}),l(I,{as:"form",overlay:!h(a),onSubmit:ot(r,["prevent"])},{default:p(()=>[l(w,null,{default:p(()=>[_("div",pj,[l(y,{class:"w-full","label-for":"recaptcha_site_key",label:s.$t("core::settings.recaptcha.site_key")},{default:p(()=>[l(v,{id:"recaptcha_site_key",modelValue:h(n).recaptcha_site_key,"onUpdate:modelValue":i[0]||(i[0]=S=>h(n).recaptcha_site_key=S)},null,8,["modelValue"])]),_:1},8,["label"]),l(y,{class:"w-full","label-for":"recaptcha_secret_key",label:s.$t("core::settings.recaptcha.secret_key")},{default:p(()=>[l(v,{id:"recaptcha_secret_key",modelValue:h(n).recaptcha_secret_key,"onUpdate:modelValue":i[1]||(i[1]=S=>h(n).recaptcha_secret_key=S)},null,8,["modelValue"])]),_:1},8,["label"])]),l(y,{"label-for":"recaptcha_ignored_ips",description:s.$t("core::settings.recaptcha.ignored_ips_info"),label:s.$t("core::settings.recaptcha.ignored_ips")},{default:p(()=>[l(b,{id:"recaptcha_ignored_ips",modelValue:h(n).recaptcha_ignored_ips,"onUpdate:modelValue":i[2]||(i[2]=S=>h(n).recaptcha_ignored_ips=S)},null,8,["modelValue"])]),_:1},8,["description","label"]),_("div",vj,[hj,_("div",gj,[ne(_("h4",bj,null,512),[[C,"core::settings.recaptcha.dont_get_locked"]]),ne(_("p",yj,null,512),[[C,"core::settings.recaptcha.ensure_recaptcha_works"]])])])]),_:1}),l(x,{class:"text-right"},{default:p(()=>[l(k,{type:"submit",variant:"primary",disabled:h(n).busy,text:s.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},Ij={__name:"SettingsSecurity",setup(e){const{form:t,submit:n,isReady:o}=To();return(a,r)=>{const s=d("ICardHeading"),i=d("ICardHeader"),u=d("IFormSwitchLabel"),c=d("IFormSwitchDescription"),m=d("IFormSwitch"),f=d("IFormSwitchField"),v=d("IFormSwitchGroup"),y=d("ICardBody"),b=d("ICard");return g(),D(fe,null,[l(i,null,{default:p(()=>[l(s,{text:a.$t("core::settings.security.security")},null,8,["text"])]),_:1}),l(b,{overlay:!h(o)},{default:p(()=>[l(y,null,{default:p(()=>[l(v,null,{default:p(()=>[l(f,null,{default:p(()=>[l(u,{text:a.$t("core::settings.security.disable_password_forgot")},null,8,["text"]),l(c,{text:a.$t("core::settings.security.disable_password_forgot_info")},null,8,["text"]),l(m,{modelValue:h(t).disable_password_forgot,"onUpdate:modelValue":r[0]||(r[0]=w=>h(t).disable_password_forgot=w),onChange:h(n)},null,8,["modelValue","onChange"])]),_:1}),l(f,null,{default:p(()=>[l(u,{text:a.$t("core::settings.security.block_bad_visitors")},null,8,["text"]),l(c,{text:a.$t("core::settings.security.block_bad_visitors_info")},null,8,["text"]),l(m,{modelValue:h(t).block_bad_visitors,"onUpdate:modelValue":r[1]||(r[1]=w=>h(t).block_bad_visitors=w),onChange:h(n)},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1})]),_:1},8,["overlay"])],64)}}};function ss(){return{gate:Innoclapps.app.config.globalProperties.$gate}}const wj={__name:"SettingsMenu",setup(e){const{scriptConfig:t}=Ne(),n=t("menu.settings");return(o,a)=>{const r=d("Icon"),s=d("IVerticalNavigationItem"),i=d("IVerticalNavigationCollapsible"),u=d("IVerticalNavigation");return g(),A(u,{class:"mb-4 sm:sticky sm:top-10 lg:mb-0"},{default:p(()=>[l(s,{icon:"Cog",href:"/settings/general",active:o.$route.path==="/settings",to:{name:"settings-general"}},{default:p(()=>[l(r,{icon:"Cog"}),le(" "+Z(o.$t("core::settings.general")),1)]),_:1},8,["active"]),(g(!0),D(fe,null,Ie(h(n),c=>(g(),A(i,{key:c.id},{default:p(()=>[l(s,{to:c.route,href:c.route?o.$router.resolve(c.route).href:void 0},{default:p(()=>[l(r,{icon:c.icon},null,8,["icon"]),le(" "+Z(c.title),1)]),_:2},1032,["to","href"]),(g(!0),D(fe,null,Ie(c.children,m=>(g(),A(s,{key:c.id+"-"+m.id,to:m.route,href:m.route?o.$router.resolve(m.route).href:void 0},{default:p(()=>[l(r,{icon:m.icon},null,8,["icon"]),le(" "+Z(m.title),1)]),_:2},1032,["to","href"]))),128))]),_:2},1024))),128))]),_:1})}}},xj={class:"mx-auto max-w-7xl"},kj={class:"lg:grid lg:grid-cols-12 lg:gap-x-5"},$j={class:"lg:col-span-3"},Cj={class:"lg:col-span-9"},Sj={__name:"Settings",setup(e){const t=_t(),{gate:n}=ss(),o=M(null);return Va((a,r,s)=>{a.matched&&a.matched[0]&&a.matched[0].name==="settings"&&document.getElementById("main").scrollTo({top:o.value.getBoundingClientRect().top,behavior:"smooth"}),s()}),Pa(()=>{n.isRegularUser()&&t.push({path:"/403"})}),(a,r)=>{const s=d("RouterView"),i=d("MainLayout");return g(),A(i,null,{default:p(()=>[_("div",xj,[_("div",kj,[_("aside",$j,[l(wj)]),_("div",{ref_key:"settingsViewRef",ref:o,class:"sm:hidden"},null,512),_("div",Cj,[l(s)])])])]),_:1})}}};var Tj=ra,Ej=hr,Fj=as;function Aj(e){return function(t,n,o){var a=Object(t);if(!Ej(t)){var r=Tj(n);t=Fj(t),n=function(i){return r(a[i],i,a)}}var s=e(t,n,o);return s>-1?a[r?t[s]:s]:void 0}}var Rj=Aj,Dj=Rj,Oj=H2,Bj=Dj(Oj),Nj=Bj;const ut=Bt(Nj);var Pj=pI,Mj=as;function Vj(e,t){return e&&Pj(e,t,Mj)}var Lj=Vj,qj=hr;function Uj(e,t){return function(n,o){if(n==null)return n;if(!qj(n))return e(n,o);for(var a=n.length,r=t?a:-1,s=Object(n);(t?r--:++r<a)&&o(s[r],r,s)!==!1;);return n}}var jj=Uj,zj=Lj,Hj=jj,Wj=Hj(zj),$i=Wj,Gj=$i,Kj=hr;function Zj(e,t){var n=-1,o=Kj(e)?Array(e.length):[];return Gj(e,function(a,r,s){o[++n]=t(a,r,s)}),o}var kI=Zj,Yj=Hl,Xj=ra,Qj=kI,Jj=Fn;function ez(e,t){var n=Jj(e)?Yj:Qj;return n(e,Xj(t))}var tz=ez;const Tn=Bt(tz),nz={class:"-mb-1.5 flex"},oz={key:0,class:"mt-2"},az={class:"mt-1 flex items-center justify-end divide-x divide-neutral-200 text-right text-base/6 sm:text-sm/6"},rz={class:"relative mt-3"},lz={class:"group -mx-6 px-6"},sz={class:"option-draggable-handle absolute -left-5 top-2 z-20 hidden focus-within:block group-hover:block hover:block"},iz={class:"relative"},uz={__name:"CustomFieldsFormOptions",props:{form:{required:!0,type:Object},options:{required:!0}},emits:["update:options"],setup(e,{emit:t}){const n=e,o=t,a=M(null),r=M(null),s=M(!1),i=M("");function u(){return Mo(Vn(n.options||[]))}function c(){x(u().map((I,C)=>(I.display_order=C+1,I)))}function m(){s.value=!0,ze(r.value.focus)}function f(I,C,S){let T=u();T[I][C]=S,x(T)}function v(){y(),ze(()=>{a.value.focus()})}function y(I=null){x([...n.options,{name:I,display_order:n.options.length+1,swatch_color:null}])}function b(){s.value=!1}function w(){if(!i.value)return;let I=u();i.value.split(`
`).filter(C=>C).forEach(C=>I.push({name:C,display_order:I.length+1,swatch_color:null})),x(I),b()}async function k(I){n.options[I].id&&await Innoclapps.confirm();let C=u();C.splice(I,1),x(C)}function x(I){o("update:options",I)}return(I,C)=>{const S=d("IFormLabel"),T=d("IButton"),E=d("Icon"),$=d("I18nT"),F=d("ILink"),R=d("IAlertBody"),B=d("IAlert"),V=d("IFormTextarea"),P=d("ITextBlock"),z=d("IFormInput"),H=d("IPopoverButton"),j=d("IColorSwatch"),N=d("IPopoverBody"),L=d("IPopoverPanel"),U=d("IPopover"),ee=d("SortableDraggable"),G=d("IFormError"),W=d("IFormGroup"),ae=Ve("i-tooltip");return g(),A(W,null,{default:p(()=>[_("div",nz,[l(S,{class:"mt-1.5 grow text-neutral-900 dark:text-neutral-100",label:I.$t("core::fields.options"),required:""},null,8,["label"]),ne(l(T,{icon:"PlusSolid",basic:"",small:"",onClick:v},null,512),[[pe,!s.value],[ae,I.$t("core::app.add_another")]])]),e.options&&e.options.length===0&&!s.value?(g(),D("div",oz,[l(B,null,{default:p(()=>[l(R,null,{default:p(()=>[l($,{scope:"global",tag:"div",class:"flex items-center",keypath:"core::fields.custom.create_option_icon"},{icon:p(()=>[l(E,{icon:"PlusSolid",class:"mx-1 size-5 cursor-pointer",onClick:v})]),_:1},8,["keypath"]),l(F,{class:"underline underline-offset-4",variant:"info",text:I.$t("core::fields.custom.or_add_options_via_text"),onClick:m},null,8,["text"])]),_:1})]),_:1})])):K("",!0),ne(_("div",null,[l(V,{ref_key:"optionsTextareaRef",ref:r,modelValue:i.value,"onUpdate:modelValue":C[0]||(C[0]=ue=>i.value=ue),class:"mt-3.5",placeholder:I.$t("core::fields.custom.text_options_each_on_new_line")},null,8,["modelValue","placeholder"]),_("div",az,[l(F,{text:I.$t("core::fields.custom.convert_text_to_options"),onClick:w},null,8,["text"]),l(F,{class:"ml-2 pl-2",text:I.$t("core::app.cancel"),onClick:b},null,8,["text"])])],512),[[pe,s.value]]),l(ee,Ue(I.$draggable.common,{handle:".option-draggable-handle","model-value":e.options,"item-key":(ue,ce)=>ce,"onUpdate:modelValue":C[1]||(C[1]=ue=>x(ue)),onSort:c}),{item:p(({element:ue,index:ce})=>[_("div",rz,[_("div",lz,[_("div",sz,[l(E,{icon:"Selector",class:"size-5 cursor-move text-neutral-400"})]),_("div",iz,[ue.id?(g(),A(P,{key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",text:I.$t("core::app.id")+": "+ue.id},null,8,["text"])):K("",!0),l(z,{ref_key:"optionNameRef",ref:a,"model-value":ue.name,class:be(["!pr-20",{"!pl-14":ue.id}]),"onUpdate:modelValue":oe=>f(ce,"name",oe),onKeydown:fo(ot(v,["prevent","stop"]),["enter"])},null,8,["model-value","class","onUpdate:modelValue","onKeydown"]),l(U,{offset:0},{default:p(()=>[l(H,{icon:"ColorSwatch",class:"absolute right-9 top-1.5 sm:top-1",style:Nt({color:ue.swatch_color}),basic:"",small:""},null,8,["style"]),l(L,{class:"w-56"},{default:p(()=>[l(N,null,{default:p(()=>[l(j,{"model-value":ue.swatch_color,swatches:I.$scriptConfig("favourite_colors"),"onUpdate:modelValue":oe=>f(ce,"swatch_color",oe)},null,8,["model-value","swatches","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(T,{icon:"XSolid",class:"absolute right-1.5 top-1.5 sm:top-1",basic:"",small:"",onClick:oe=>k(ce)},null,8,["onClick"])])])])]),_:1},16,["model-value","item-key"]),l(G,{error:e.form.getError("options")},null,8,["error"])]),_:1})}}},cz={class:"flex"},dz={class:"relative"},mz={class:"text-danger-600 dark:text-danger-500"},$I={__name:"CustomFieldsForm",props:{form:{required:!0,type:Object},fieldType:{required:!0,type:String},label:{required:!0,type:String},fieldId:{required:!0,type:String},resourceName:{required:!0,type:String},isUnique:{required:!0},options:{required:!0},inEditMode:Boolean},emits:["update:fieldType","update:label","update:fieldId","update:isUnique","update:options"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),r=Innoclapps.resources(),s=a("fields.custom_fields"),i=a("fields.custom_field_prefix"),u=M(n.fieldId||null),c=n.isUnique,m=O(()=>Tn(s,"type")),f=O(()=>!!ut(s,{type:n.fieldType,optionable:!0})),v=O(()=>!!ut(s,{type:n.fieldType,uniqueable:!0})&&!!ut(r,{acceptsUniqueCustomFields:!0,name:n.resourceName}));return $e(v,y=>{o("update:isUnique",y?n.isUnique!==null?n.isUnique:!1:null)}),ma(u,y=>{n.inEditMode||o("update:fieldId",y?`${i}${y}`:null)},{debounce:250}),$e(f,(y,b)=>{!y&&b?o("update:options",null):y&&o("update:options",[])}),(y,b)=>{const w=d("ICustomSelect"),k=d("IFormError"),x=d("IFormGroup"),I=d("IFormInput"),C=d("IFormLabel"),S=d("IButtonCopy"),T=d("ITextBlockDark"),E=d("IFormCheckbox"),$=d("IFormCheckboxLabel"),F=d("IFormCheckboxDescription"),R=d("IFormCheckboxField");return g(),D(fe,null,[l(x,{"label-for":"field_type",label:y.$t("core::fields.custom.type"),required:""},{default:p(()=>[l(w,{"model-value":e.fieldType,options:m.value,clearable:!1,disabled:e.inEditMode,"onUpdate:modelValue":b[0]||(b[0]=B=>y.$emit("update:fieldType",B)),onOptionSelected:b[1]||(b[1]=B=>e.label?"":y.$refs.labelRef.focus())},null,8,["model-value","options","disabled"]),l(k,{error:e.form.getError("field_type")},null,8,["error"])]),_:1},8,["label"]),l(x,{"label-for":"label",label:y.$t("core::fields.label"),required:""},{default:p(()=>[l(I,{id:"label",ref:"labelRef","model-value":e.label,"onUpdate:modelValue":b[2]||(b[2]=B=>y.$emit("update:label",B))},null,8,["model-value"]),l(k,{error:e.form.getError("label")},null,8,["error"])]),_:1},8,["label"]),f.value?(g(),A(uz,{key:0,options:e.options,form:e.form,"onUpdate:options":b[3]||(b[3]=B=>y.$emit("update:options",B))},null,8,["options","form"])):K("",!0),l(x,{class:"mt-4",description:y.$t("core::fields.custom.id_info")},{label:p(()=>[_("div",cz,[l(C,{class:"mb-1 grow",for:"field_id",label:y.$t("core::fields.custom.id"),required:""},null,8,["label"]),ne(l(S,{class:"-mt-1.5 mb-0.5",text:e.fieldId,"success-message":y.$t("core::app.copied"),small:"",basic:""},{default:p(()=>[le(Z(y.$t("core::app.copy")),1)]),_:1},8,["text","success-message"]),[[pe,e.fieldId]])])]),default:p(()=>[_("div",dz,[e.inEditMode?K("",!0):(g(),A(T,{key:0,class:"pointer-events-none absolute inset-y-0 flex items-center pl-3 opacity-80"},{default:p(()=>[le(Z(h(i)),1)]),_:1})),l(I,{id:"field_id",modelValue:u.value,"onUpdate:modelValue":b[4]||(b[4]=B=>u.value=B),disabled:e.inEditMode,class:be({"!pl-8":!e.inEditMode})},null,8,["modelValue","disabled","class"])]),l(k,{error:e.form.getError("field_id")},null,8,["error"])]),_:1},8,["description"]),v.value?(g(),A(x,{key:1},{default:p(()=>[l(R,null,{default:p(()=>[l(E,{checked:e.isUnique,disabled:e.inEditMode&&!e.isUnique&&!h(c),"onUpdate:checked":b[5]||(b[5]=B=>y.$emit("update:isUnique",B))},null,8,["checked","disabled"]),l($,{text:y.$t("core::fields.mark_as_unique")},null,8,["text"]),e.inEditMode&&e.isUnique===!1&&h(c)?(g(),A(F,{key:0},{default:p(()=>[_("span",mz,Z(y.$t("core::fields.unmark_as_unique_change_info")),1)]),_:1})):!e.inEditMode||e.inEditMode&&!e.isUnique?(g(),A(F,{key:1,text:y.$t("core::fields.mark_as_unique_change_info")},null,8,["text"])):K("",!0)]),_:1}),l(k,{error:e.form.getError("is_unique")},null,8,["error"])]),_:1})):K("",!0)],64)}}},fz={__name:"CustomFieldsCreate",props:{resourceName:{type:String,required:!0}},emits:["created"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{form:r}=Ze({label:"",field_type:"Text",field_id:"",resource_name:"",options:[],is_unique:null},{resetOnSuccess:!0});function s(){r.fill("resource_name",n.resourceName)}async function i(){let c=await r.post("/custom-fields");o("created",c),Innoclapps.dialog().hide("newCustomFieldModal"),Innoclapps.success(a("core::fields.custom.created"))}function u(){r.reset(),r.errors.clear()}return(c,m)=>{const f=d("IModal");return g(),A(f,{id:"newCustomFieldModal",size:"sm","ok-text":c.$t("core::app.save"),"ok-disabled":h(r).busy,title:c.$t("core::fields.custom.create"),"static-backdrop":"",form:"",onHidden:u,onSubmit:i,onShow:s},{default:p(()=>[l($I,{"field-type":h(r).field_type,"onUpdate:fieldType":m[0]||(m[0]=v=>h(r).field_type=v),label:h(r).label,"onUpdate:label":m[1]||(m[1]=v=>h(r).label=v),"field-id":h(r).field_id,"onUpdate:fieldId":m[2]||(m[2]=v=>h(r).field_id=v),"is-unique":h(r).is_unique,"onUpdate:isUnique":m[3]||(m[3]=v=>h(r).is_unique=v),options:h(r).options,"onUpdate:options":m[4]||(m[4]=v=>h(r).options=v),"resource-name":h(r).resource_name,form:h(r)},null,8,["field-type","label","field-id","is-unique","options","resource-name","form"])]),_:1},8,["ok-text","ok-disabled","title"])}}},pz={__name:"CustomFieldsEdit",props:{customFieldId:{type:Number,required:!0},label:{type:String,required:!0},fieldType:{type:String,required:!0},fieldId:{type:String,required:!0},resourceName:{type:String,required:!0},options:Array,isUnique:Boolean},emits:["updated"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{form:r}=Ze({label:"",field_type:"Text",field_id:"",resource_name:"",options:[],is_unique:null},{resetOnSuccess:!0});function s(){r.fill("id",n.customFieldId),r.fill("label",n.label),r.fill("field_type",n.fieldType),r.fill("field_id",n.fieldId),r.fill("is_unique",n.isUnique),r.fill("resource_name",n.resourceName),r.fill("options",structuredClone(Vn(n.options||[])))}async function i(){let c=await r.put(`/custom-fields/${r.id}`);o("updated",c),Innoclapps.dialog().hide("editCustomFieldModal"),Innoclapps.success(a("core::fields.custom.updated"))}function u(){r.reset(),r.errors.clear()}return(c,m)=>{const f=d("IModal");return g(),A(f,{id:"editCustomFieldModal",size:"sm","ok-text":c.$t("core::app.save"),"ok-disabled":h(r).busy,title:c.$t("core::fields.custom.update"),"static-backdrop":"",form:"",onSubmit:i,onHidden:u,onShow:s},{default:p(()=>[l($I,{"field-type":h(r).field_type,"onUpdate:fieldType":m[0]||(m[0]=v=>h(r).field_type=v),label:h(r).label,"onUpdate:label":m[1]||(m[1]=v=>h(r).label=v),"field-id":h(r).field_id,"onUpdate:fieldId":m[2]||(m[2]=v=>h(r).field_id=v),"is-unique":h(r).is_unique,"onUpdate:isUnique":m[3]||(m[3]=v=>h(r).is_unique=v),options:h(r).options,"onUpdate:options":m[4]||(m[4]=v=>h(r).options=v),"resource-name":h(r).resource_name,form:h(r),"in-edit-mode":""},null,8,["field-type","label","field-id","is-unique","options","resource-name","form"])]),_:1},8,["ok-text","ok-disabled","title"])}}};function ao(){const e=_t(),t=It();function n({resourceName:r,resourceId:s,mode:i}){e.push({query:{...t.query,floating_resource:r,floating_resource_id:s,mode:i}})}function o(r){n({...r,mode:"detail"})}function a(r){n({...r,mode:"edit"})}return{floatResource:n,floatResourceInEditMode:a,floatResourceInDetailMode:o}}function An(e=!1){const t=M(e);function n(o=!0){t.value=o}return{setLoading:n,isLoading:t}}function CI(){let e=new WeakMap;const t=function(){e=new WeakMap},n=function(o,a,r=!0){if(o.tagName=="HTML")return!0;let s=a.getBoundingClientRect(),i,u;if(e.has(o)){const c=e.get(o);i=c.rect,u=c.parentNode}else i=arguments[3]||o.getBoundingClientRect(),u=o.parentNode,e.set(o,{rect:i,parentNode:u});return(r?i.left>=s.left:i.right>s.left)&&(r?i.right<=s.right:i.left<s.right)};return En(t),{isColumnVisible:n,clearCache:t}}const lb={data:[],current_page:1,per_page:25,per_page_options:[25,50,100],total:0,last_page:1,from:1,to:1};class vz{constructor(t={}){this.state=Object.assign({},lb,t)}get pagination(){return this.buildLinks(this.currentPage,this.lastPage)}get items(){return this.state.data}get currentPage(){return this.getPaginationAttribute("current_page")}set currentPage(t){this.setPaginationAttribute("current_page",t)}get from(){return this.getPaginationAttribute("from")}get to(){return this.getPaginationAttribute("to")}get lastPage(){return this.getPaginationAttribute("last_page")}get perPage(){return this.getPaginationAttribute("per_page")}set perPage(t){this.setPaginationAttribute("per_page",t),this.currentPage=1}get total(){return this.getPaginationAttribute("total")}get perPageOptions(){let t=this.state.per_page_options,n=parseInt(this.perPage);return t.includes(n)||(t.push(n),t.sort(function(o,a){return o-a})),t}set perPageOptions(t){this.state.per_page_options=t}get hasPagination(){return this.lastPage>1}get shouldRenderLinks(){return this.pagination.includes(this.currentPage)}get hasNextPage(){return this.currentPage+1<=this.lastPage}get hasPreviousPage(){return this.currentPage-1>=1}isNotEmpty(){return this.items.length>0}isEmpty(){return!this.isNotEmpty()}previousPage(){this.page(this.currentPage-1)}nextPage(){this.page(this.currentPage+1)}page(t){this.currentPage=t}isCurrentPage(t){return this.currentPage===t}buildLinks(t,n,o=3){let a=[];for(let r=Math.max(2,t-o);r<=Math.min(n-1,t+o);r++)a.push(r);return t-o>2&&a.unshift("..."),t+o<n-1&&a.push("..."),a.unshift(1),a.push(n),a}getPaginationAttribute(t){return this.state[t]}setPaginationAttribute(t,n){return this.state[t]&&(this.state[t]=n),this}setState(t){this.state=Object.assign({},this.state,t)}flush(){this.state=lb}}const sb={data:[],meta:{current_page:1,from:1,last_page:1,per_page:25,total:0,to:1},per_page_options:[25,50,100]};class SI extends vz{constructor(t={}){super(),this.state=Object.assign({},sb,t)}getPaginationAttribute(t){return this.state.meta[t]}setPaginationAttribute(t,n){return this.state.meta&&(this.state.meta[t]=n),this}flush(){this.state=sb}}const hz={__name:"AsyncTableCell",props:{field:{type:Object,required:!0},item:{type:Object,required:!0},formatter:{type:Function,required:!0}},setup(e){const t=e,n=O(()=>({row:t.item,column:t.field,formatted:o.value})),o=O(()=>t.formatter(t.item,t.field));return(a,r)=>{const s=d("ITableCell");return g(),A(s,{class:be([e.item.tdClass,e.field.tdClass])},{default:p(()=>[Se(a.$slots,"default",en(un(n.value)))]),_:3},8,["class"])}}},gz=["textContent"],bz={__name:"AsyncTableHeader",props:{isSortable:Boolean,heading:String,headingKey:{type:String,required:!0},ctx:{type:Object,required:!0}},emits:["update:ctx"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=M(null),s=O(()=>o.ctx.sortBy===o.headingKey),i=O(()=>o.ctx.direction==="asc"&&s.value);function u(){const c={};s.value?(c.sortBy=o.headingKey,c.direction=o.ctx.direction==="desc"?"asc":"desc"):(c.sortBy=o.headingKey,c.direction="desc"),a("update:ctx",Object.assign({},o.ctx,c))}return t({header:r}),(c,m)=>{const f=d("Icon"),v=d("ILink"),y=d("ITableHeader");return g(),A(y,{ref_key:"headerRef",ref:r,class:"group bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[e.isSortable?(g(),A(v,{key:0,class:"inline-flex w-full items-center hover:text-neutral-700 focus:outline-none dark:hover:text-neutral-400",plain:"",onClick:u},{default:p(()=>[le(Z(e.heading)+" ",1),l(f,{icon:i.value?"ChevronUpSolid":"ChevronDownSolid",class:be(["ml-1.5 size-5 sm:size-4",s.value?"opacity-100":"opacity-0 group-hover:opacity-100"])},null,8,["icon","class"])]),_:1})):(g(),D("span",{key:1,textContent:Z(e.heading)},null,8,gz))]),_:1},512)}}},yz={class:"flex items-center justify-between"},_z={class:"flex flex-1 justify-between sm:hidden"},Iz={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},wz={class:"flex items-center gap-x-2","aria-label":"Pagination"},xz={class:"flex items-center gap-x-2"},kz={key:0,"aria-hidden":"true",class:"w-[2.25rem] select-none text-center text-sm/6 font-semibold text-neutral-900 dark:text-white",textContent:"…"},TI={__name:"TablePagination",props:{loading:{type:Boolean,required:!1},isCurrentPageCheck:{type:Function,required:!0},renderLinks:{type:Boolean,required:!0},links:{type:Array},hasNextPage:{type:Boolean,required:!0},hasPreviousPage:{type:Boolean,required:!0},from:{type:Number,required:!0},to:{type:Number,required:!0},total:{type:Number,required:!0}},emits:["goToPrevious","goToNext","goToPage"],setup(e){return(t,n)=>{const o=d("IButton"),a=d("Icon"),r=d("IText");return g(),D("div",yz,[_("div",_z,[l(o,{class:"gap-x-4",icon:"ArrowLeft",disabled:!e.hasPreviousPage||e.loading,text:t.$t("pagination.previous"),basic:"",onClick:n[0]||(n[0]=s=>t.$emit("goToPrevious"))},null,8,["disabled","text"]),l(o,{class:"gap-x-4",disabled:!e.hasNextPage||e.loading,basic:"",onClick:n[1]||(n[1]=s=>t.$emit("goToNext"))},{default:p(()=>[le(Z(t.$t("pagination.next"))+" ",1),l(a,{icon:"ArrowRight"})]),_:1},8,["disabled"])]),_("div",Iz,[l(r,{text:t.$t("core::table.info",{from:e.from,to:e.to,total:e.total})},null,8,["text"]),_("nav",wz,[e.renderLinks?(g(),D(fe,{key:0},[l(o,{"aria-label":"Previous page",class:"min-w-9",icon:"ChevronLeftSolid",disabled:!e.hasPreviousPage||e.loading,basic:"",onClick:n[2]||(n[2]=s=>t.$emit("goToPrevious"))},null,8,["disabled"]),_("div",xz,[(g(!0),D(fe,null,Ie(e.links,(s,i)=>(g(),D(fe,{key:i},[s==="..."?(g(),D("div",kz)):(g(),A(o,{key:1,"aria-current":"page",class:"min-w-9","aria-label":"Page "+s,text:s,active:e.isCurrentPageCheck(s),disabled:e.loading,basic:"",onClick:u=>e.isCurrentPageCheck(s)?void 0:t.$emit("goToPage",s)},null,8,["aria-label","text","active","disabled","onClick"]))],64))),128))]),l(o,{"aria-label":"Next page",class:"min-w-9",icon:"ChevronRightSolid",disabled:!e.hasNextPage||e.loading,basic:"",onClick:n[3]||(n[3]=s=>t.$emit("goToNext"))},null,8,["disabled"])],64)):K("",!0)])])])}}},$z={class:"flex items-center space-x-1 text-base text-neutral-600 dark:text-white sm:text-sm"},Cz={__name:"TablePerPageOptions",props:{disabled:Boolean,perPage:Number,perPageOptions:Array},emits:["change","update:perPage"],setup(e,{emit:t}){const n=t;function o(a){n("update:perPage",a),n("change",a)}return(a,r)=>{const s=d("IDropdownButton"),i=d("IDropdownItem"),u=d("IDropdownMenu"),c=d("IDropdown"),m=Ve("t");return g(),D("div",$z,[ne(_("span",null,null,512),[[m,"core::table.length_menu.show"]]),l(c,null,{default:p(()=>[l(s,{disabled:e.disabled,text:e.perPage||"--",basic:""},null,8,["disabled","text"]),l(u,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.perPageOptions,f=>(g(),A(i,{key:f,active:e.perPage==f,text:f,onClick:v=>o(f)},null,8,["active","text","onClick"]))),128))]),_:1})]),_:1}),ne(_("span",null,null,512),[[m,"core::table.length_menu.entries"]])])}}},Sz={class:"mt-2 flex items-center font-normal"},Tz={class:"mr-1 font-medium text-neutral-800 dark:text-neutral-100"},Ez={__name:"TableStackedCell",props:{field:{type:Object,required:!0},item:{type:Object,required:!0},formatter:{type:Function,required:!0}},setup(e){const t=e,n=O(()=>({row:t.item,column:t.field,formatted:o.value})),o=O(()=>t.formatter(t.item,t.field));return(a,r)=>(g(),D("div",Sz,[_("span",Tz,Z(e.field.label)+": ",1),Se(a.$slots,"default",en(un(n.value)))]))}},Fz={class:"flex flex-col items-center justify-between px-6 py-3 md:flex-row","data-slot":"header"},Az={key:0,class:"w-full md:w-auto"},Rz=["textContent"],Dz={class:"text-neutral-700 dark:text-neutral-300"},Kp=Object.assign({inheritAttrs:!1},{__name:"AsyncTable",props:{stackable:Boolean,sticky:Boolean,wrapperClass:[String,Array,Object],requestUri:{required:!0,type:String},requestQueryString:Object,tableId:{required:!0,type:String},floatFirst:Object,actionColumn:Boolean,initialData:Object,fields:Array,searchable:{type:Boolean,default:!0},sortBy:String},emits:["dataLoaded"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),{setLoading:s,isLoading:i}=An(),{floatResource:u}=ao(),{isColumnVisible:c}=CI(),m=M(null),f=M(""),v=M(!1);let y=null;const b=M(new SI),w=M(null),k=uo({}),x=M({sortBy:null,direction:null}),I=M([]),C=O(()=>b.value.isNotEmpty()?"":i.value?"...":f.value?r("core::app.no_search_results"):r("core::table.empty")),S=O(()=>o.fields.filter(H=>k[H.key])),T=O(()=>o.fields.length),E=O(()=>({page:b.value.currentPage,per_page:b.value.perPage,q:f.value,order:[{field:x.value.sortBy||o.sortBy,direction:x.value.direction||"asc"}],...o.requestQueryString||{}}));$e(()=>b.value.currentPage,V,{immediate:!0});function $(H,j){return j.formatter?j.formatter(H[j.key],j.key,H):H[j.key]}function F(H){w.value=H,R()}function R(){V()}async function B(){P(),s(!0);let{data:H}=await Innoclapps.request(`/${o.requestUri}`,{params:E.value,cancelToken:new Kr(j=>y=j)});b.value.setState(H.value?H.value:H),a("dataLoaded",{items:b.value.items,requestQueryString:E.value}),o.stackable&&ze(z),s(!1)}function V(){!v.value&&o.initialData?(v.value=!0,b.value.setState(o.initialData),o.stackable&&ze(z)):w.value!==null?(b.value.setState(w.value),w.value=null,o.stackable&&ze(z)):B()}function P(){y&&y()}function z(){o.fields.forEach((H,j)=>{j>0&&I.value[j]&&(k[H.key]=!c(I.value[j].header.$el,m.value.$wrapperEl))})}return o.stackable&&Yo(window,"resize",z),rn(()=>{b.value.flush()}),t({reload:R,replaceCollection:F}),(H,j)=>{const N=d("SearchInput"),L=d("ITableRow"),U=d("ITableHead"),ee=d("ILink"),G=d("IText"),W=d("ITableCell"),ae=d("ITableBody"),ue=d("ITable"),ce=d("IOverlay");return g(),D(fe,null,[_("div",Fz,[l(Cz,{"per-page":b.value.perPage,"onUpdate:perPage":j[0]||(j[0]=oe=>b.value.perPage=oe),class:"mb-2 md:mb-0","per-page-options":b.value.perPageOptions,disabled:h(i),onChange:V},null,8,["per-page","per-page-options","disabled"]),e.searchable?(g(),D("div",Az,[l(N,{modelValue:f.value,"onUpdate:modelValue":[j[1]||(j[1]=oe=>f.value=oe),V]},null,8,["modelValue"])])):K("",!0)]),l(ce,{show:h(i)},{default:p(()=>[_("div",{class:be(e.wrapperClass)},[l(ue,Ue({id:e.tableId},H.$attrs,{ref_key:"tableRef",ref:m}),{default:p(()=>[l(U,null,{default:p(()=>[l(L,{class:be(e.sticky&&"[&>th]:sticky [&>th]:top-0 [&>th]:z-10 [&>th]:bg-opacity-75 [&>th]:backdrop-blur-sm [&>th]:backdrop-filter")},{default:p(()=>[(g(!0),D(fe,null,Ie(e.fields,oe=>(g(),A(bz,{key:"th-"+oe.key,ref_for:!0,ref_key:"tableHeadingsRef",ref:I,ctx:x.value,"onUpdate:ctx":[j[2]||(j[2]=ie=>x.value=ie),V],width:oe.width,class:be({hidden:k[oe.key]}),"is-sortable":oe.sortable,heading:oe.label,"heading-key":oe.key},null,8,["ctx","width","class","is-sortable","heading","heading-key"]))),128))]),_:1},8,["class"])]),_:1}),l(ae,null,{default:p(()=>[(g(!0),D(fe,null,Ie(b.value.items,oe=>(g(),D(fe,{key:"tr-"+oe.id},[Se(H.$slots,"before-row",{row:oe}),l(L,{class:be([oe.trClass?oe.trClass:null])},{default:p(()=>[(g(!0),D(fe,null,Ie(e.fields,ie=>(g(),A(hz,{key:"td-"+ie.key,class:be(["first:font-medium",{hidden:k[ie.key]}]),field:ie,item:oe,formatter:$},{default:p(Q=>[Se(H.$slots,ie.key,en(un(Q)),()=>[e.floatFirst&&ie.key===e.fields[0].key?(g(),A(ee,{key:0,text:Q.formatted,onClick:se=>h(u)({resourceName:e.floatFirst.resourceName,resourceId:oe.id,mode:e.floatFirst.mode})},null,8,["text","onClick"])):ie.key===e.fields[0].key&&oe.path?(g(),A(ee,{key:1,to:oe.path,text:Q.formatted},null,8,["to","text"])):(g(),D("span",{key:2,textContent:Z(Q.formatted)},null,8,Rz))]),ie.key===e.fields[0].key?(g(!0),D(fe,{key:0},Ie(S.value,se=>(g(),A(Ez,{key:"stacked-"+se.key,field:se,item:oe,formatter:$},{default:p(me=>[Se(H.$slots,se.key,en(un(me)),()=>[_("span",Dz,Z(me.formatted),1)])]),_:2},1032,["field","item"]))),128)):K("",!0)]),_:2},1032,["field","item","class"]))),128))]),_:2},1032,["class"]),Se(H.$slots,"after-row",{row:oe})],64))),128)),b.value.isEmpty()?(g(),A(L,{key:0},{default:p(()=>[l(W,{colspan:T.value},{default:p(()=>[Se(H.$slots,"empty",{text:C.value,loading:h(i),search:f.value},()=>[l(G,null,{default:p(()=>[le(Z(C.value),1)]),_:1})])]),_:3},8,["colspan"])]),_:3})):K("",!0)]),_:3})]),_:3},16,["id"])],2)]),_:3},8,["show"]),b.value.hasPagination?(g(),A(TI,{key:0,class:"mt-1.5 px-6 py-3","is-current-page-check":oe=>b.value.isCurrentPage(oe),"has-next-page":b.value.hasNextPage,"has-previous-page":b.value.hasPreviousPage,links:b.value.pagination,"render-links":b.value.shouldRenderLinks,from:b.value.from,to:b.value.to,total:b.value.total,loading:h(i),onGoToNext:j[3]||(j[3]=oe=>b.value.nextPage()),onGoToPrevious:j[4]||(j[4]=oe=>b.value.previousPage()),onGoToPage:j[5]||(j[5]=oe=>b.value.page(oe))},null,8,["is-current-page-check","has-next-page","has-previous-page","links","render-links","from","to","total","loading"])):K("",!0)],64)}}});var Oz=wi;function Bz(e){return typeof e=="function"?e:Oz}var Nz=Bz,Pz=oI,Mz=$i,Vz=Nz,Lz=Fn;function qz(e,t){var n=Lz(e)?Pz:Mz;return n(e,Vz(t))}var Uz=qz,jz=Uz;const Aa=Bt(jz);function yn(e=[]){const t=cn(),{scriptConfig:n}=Ne(),o=M(structuredClone(Vn(pt(e)||[])));let a=null,r=null;const s=O(()=>o.value.length>0),i=O(()=>o.value.filter(S=>S.collapsed).length);function u(S){return o.value.find(T=>T.attribute===S)}function c(S){if(!$n(S))return console.error("The resource must be a ref.");m(S),a=S,y(S.value)}function m(S){r&&r(),r=$e(()=>S.value._sync_timestamp,()=>{y(a.value)})}function f(S,T){let E=u(S);if(!E){console.trace(`Cannot update "${S}" field. [FIELD NOT FOUND].`);return}Aa(T,($,F)=>E[F]=$)}function v(S,T){f(S,{value:T})}function y(S){o.value.forEach(T=>{let E=b(T,S);E!==void 0&&(T.value=E)})}function b(S,T){return S.belongsToRelation?Object.hasOwn(T,S.belongsToRelation)?T[S.belongsToRelation]:void 0:S.hasManyRelationship?Object.hasOwn(T,S.hasManyRelationship)?T[S.hasManyRelationship]:void 0:S.morphManyRelationship?Object.hasOwn(T,S.morphManyRelationship)?T[S.morphManyRelationship]:void 0:S.morphToManyRelationship?Object.hasOwn(T,S.morphToManyRelationship)?T[S.morphToManyRelationship]:void 0:S.attribute&&Object.hasOwn(T,S.attribute)?T[S.attribute]:void 0}async function w(S,T,E={}){let $=structuredClone(await t.dispatch("fields/getForResource",{resourceName:pt(S),view:T,...E}));return $.forEach((F,R)=>{F.component==="timezone-field"?$[R].timezones=Object.freeze(F.timezones):(F.attribute==="country_id"||F.attribute==="industry_id")&&($[R].options=Object.freeze(F.options))}),$}async function k(S,T={}){return await w(S,n("fields.views.create"),T)}async function x(S,T,E={}){return await w(S,n("fields.views.detail"),{...E,resourceId:T})}async function I(S,T,E={}){return await w(S,n("fields.views.update"),{...E,resourceId:T})}async function C(S,T={}){return await w(S,n("fields.views.index"),T)}return{fields:o,hasFields:s,hydrateFields:y,setResource:c,findField:u,updateField:f,updateFieldValue:v,totalCollapsable:i,getCreateFields:k,getUpdateFields:I,getDetailFields:x,getIndexFields:C}}function Dt(e){let t=null,n=Pt({});$n(e)?$e(e,I=>{t=I,I&&(n.value=Innoclapps.resource(I))},{immediate:!0,flush:"post"}):(t=pt(e),n.value=Innoclapps.resource(t)||{});const o=M(!1),a=M(!1),r=M(!1),s=M(!1),i=M(!1),u=M(!1),c=O(()=>n.value.singularName);function m(){return t}async function f(I){s.value=!0;try{let{data:C}=await Innoclapps.request(`/${m()}/${I}`);return C}finally{s.value=!1}}async function v(I,C,S={}){let T;typeof I.put!="function"?T=Ze(I).form:T=I,r.value=!0;try{const E=await T.put(`/${t}/${C}`,S);return At("resource-updated",{resourceName:t,resourceId:C,resource:E}),At(`${t}-updated`,E),E}finally{r.value=!1}}async function y(I){let C;typeof I.post!="function"?C=Ze(I).form:C=I,o.value=!0;try{const S=await C.post(`/${t}`);return At("resource-updated",{resourceName:t,resourceId:S.id,resource:S}),At(`${t}-updated`,S),S}finally{o.value=!1}}async function b(I){a.value=!0;try{const C=await Innoclapps.request().delete(`/${t}/${I}`);return At("resource-deleted",{resourceName:t,resourceId:I}),At(`${t}-deleted`,C),C}finally{a.value=!1}}async function w(I){i.value=!0;try{const{data:C}=await Innoclapps.request().post(`/${t}/${I}/clone`);return At("resource-cloned",{resourceName:t,resourceId:I,clonedResource:C}),At(`${t}-cloned`,C),C}finally{i.value=!1}}async function k(I,C){u.value=!0;try{let{data:S}=await Innoclapps.request().post(`associations/${t}/${I}`,C);return S}finally{u.value=!1}}async function x(I,C){u.value=!0;try{const{data:S}=await Innoclapps.request().delete(`associations/${t}/${I}`,{data:C});return S}finally{u.value=!1}}return{retrieveResource:f,resourceBeingRetrieved:s,createResource:y,resourceBeingCreated:o,cloneResource:w,resourceBeingCloned:i,updateResource:v,resourceBeingUpdated:r,deleteResource:b,resourceBeingDeleted:a,detachAssociations:x,syncAssociations:k,associationsBeingSaved:u,resourceName:e,rawResourceName:t,getRawResourceName:m,resourceSingularName:c}}const fn=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},zz={class:"flex justify-between"},Hz={__name:"SimpleResourceCRUD",props:{resourceName:{required:!0,type:String},withCancel:{type:Boolean,default:!0}},emits:["cancel","updated","created","deleted"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{scriptConfig:r,resetStoreState:s}=Ne(),{fields:i,hydrateFields:u,getCreateFields:c,getUpdateFields:m}=yn(),{form:f}=Ze(),{updateResource:v,createResource:y,retrieveResource:b,deleteResource:w}=Dt(n.resourceName),k=M([{key:"id",label:a("core::app.id"),sortable:!0},{key:"name",label:a("core::fields.label"),sortable:!0},{key:"actions",label:"",width:"8%",tdClass:"text-right"}]),x=M(null),I=r(`resources.${n.resourceName}.singularLabel`),C=r(`resources.${n.resourceName}.label`);function S(){f.reset(),i.value=[]}function T(){o("cancel")}async function E(){let P=await c(n.resourceName);k.value[1].key=P[0].attribute,i.value=P,Innoclapps.dialog().show("createRecordModal")}async function $(P){let z=await m(n.resourceName,P),H=await b(P);k.value[1].key=z[0].attribute,f.fill("id",P),i.value=z,u(H),Innoclapps.dialog().show("updateRecordModal")}async function F(){await y(f),V("created"),Innoclapps.dialog().hide("createRecordModal")}async function R(){await v(f,f.id),V("updated"),Innoclapps.dialog().hide("updateRecordModal")}async function B(P){await w(P),V("deleted")}function V(P){Innoclapps.success(a("core::resource."+P)),x.value.reload(),s(),o(P)}return(P,z)=>{const H=d("FormFields"),j=d("IModal"),N=d("ICardHeading"),L=d("IButton"),U=d("ICardActions"),ee=d("ICardHeader"),G=d("ILink"),W=d("ITableRowAction"),ae=d("ITableRowActions"),ue=d("ICard"),ce=Ve("i-tooltip");return g(),D("div",null,[l(j,{id:"createRecordModal",size:"sm","ok-text":P.$t("core::app.create"),"ok-disabled":h(f).busy,title:P.$t("core::resource.create",{resource:h(I)}),"static-backdrop":"",form:"",onSubmit:F,onHidden:S},{default:p(()=>[l(H,{fields:h(i),form:h(f),"resource-name":e.resourceName,"is-floating":"","focus-first":"",onUpdateFieldValue:z[0]||(z[0]=oe=>h(f).fill(oe.attribute,oe.value)),onSetInitialValue:z[1]||(z[1]=oe=>h(f).set(oe.attribute,oe.value))},null,8,["fields","form","resource-name"])]),_:1},8,["ok-text","ok-disabled","title"]),l(j,{id:"updateRecordModal",size:"sm","ok-text":P.$t("core::app.save"),"ok-disabled":h(f).busy,title:P.$t("core::resource.edit",{resource:h(I)}),"static-backdrop":"",form:"",onHidden:S,onSubmit:R},{default:p(()=>[l(H,{fields:h(i),form:h(f),"resource-name":e.resourceName,"resource-id":h(f).id,"is-floating":"",onUpdateFieldValue:z[2]||(z[2]=oe=>h(f).fill(oe.attribute,oe.value)),onSetInitialValue:z[3]||(z[3]=oe=>h(f).set(oe.attribute,oe.value))},null,8,["fields","form","resource-name","resource-id"])]),_:1},8,["ok-text","ok-disabled","title"]),l(ee,null,{default:p(()=>[Se(P.$slots,"header",{},()=>[l(N,{text:h(C)},null,8,["text"])],!0),l(U,null,{default:p(()=>[ne(l(L,{text:P.$t("core::app.go_back"),basic:"",onClick:T},null,8,["text"]),[[pe,e.withCancel]]),l(L,{variant:"primary",icon:"PlusSolid",text:P.$t("core::resource.create",{resource:h(I)}),onClick:E},null,8,["text"])]),_:1})]),_:3}),l(ue,null,{default:p(()=>[l(Kp,{ref_key:"tableRef",ref:x,"wrapper-class":"px-6",class:"[--gutter:theme(spacing.6)]","sort-by":"name","table-id":e.resourceName,"request-uri":e.resourceName,fields:k.value,bleed:""},{name:p(({row:oe})=>[_("div",zz,[l(G,{class:"font-medium",text:oe.name,onClick:ie=>$(oe.id)},null,8,["text","onClick"])])]),actions:p(({row:oe})=>[l(ae,null,{default:p(()=>[l(W,{icon:"PencilAlt",text:P.$t("core::app.edit"),onClick:ie=>$(oe.id)},null,8,["text","onClick"]),ne((g(),D("span",null,[l(W,{icon:"Trash",disabled:oe.is_primary,text:P.$t("core::app.delete"),onClick:ie=>P.$confirm(()=>B(oe.id))},null,8,["disabled","text","onClick"])])),[[ce,oe.is_primary?P.$t("core::resource.primary_record_delete_info",{resource:h(I)}):null]])]),_:2},1024)]),_:1},8,["table-id","request-uri","fields"])]),_:1})])}}},Ci=fn(Hz,[["__scopeId","data-v-5af02994"]]),Wz={class:"lg:flex lg:items-center lg:justify-between"},Gz={class:"mb-0 mt-3"},Kz={class:"max-h-96 overflow-y-auto"},Zz={class:"flex items-center"},Yz={class:"grow"},Xz={class:"space-x-2"},Qz={class:"text-base/6 font-medium text-neutral-800 dark:text-white sm:text-sm/6"},Jz={class:"text-xs text-neutral-800 dark:text-white"},eH=_("br",null,null,-1),tH={key:0,class:"text-xs font-medium text-info-600 dark:text-white"},nH=_("br",null,null,-1),oH={class:"inline-flex items-center space-x-1 self-start"},aH={key:0,class:"mt-3"},um={__name:"SettingsFieldsCustomize",props:{group:{required:!0,type:String},view:{required:!0,type:String},heading:{type:String,required:!0},subHeading:{type:String,required:!0},collapseOption:{default:!0,type:Boolean},lazy:{default:!0,type:Boolean}},emits:["deleteRequested","updateRequested","saved"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),s=It(),{scriptConfig:i,resetStoreState:u}=Ne(),c=M(null),m=M(!1),f=M(!1),v=M([]),y=M(!1),b=M(!1),w=M(!1),k=O(()=>h(y)||h(b)||h(w)),x=O({set(H){v.value=H.map(j=>(j.isRequired&&(j[h(T)]=!0),!j.isUnique&&j.canUnmarkUnique&&(j.uniqueUnmarked=!0),j))},get(){return c.value?v.value.filter(H=>H.label.toLowerCase().includes(c.value.toLowerCase())):v.value}}),I=O(()=>o.view===i("fields.views.update")),C=O(()=>o.view===i("fields.views.detail")),S=O(()=>o.view===i("fields.views.create")),T=O(()=>S.value?"showOnCreation":I.value?"showOnUpdate":C.value?"showOnDetail":"");function E(){return"/fields/settings/"+o.group+"/"+o.view}function $(){let H={};return v.value.forEach((j,N)=>{let L={order:N+1,[h(T)]:j.isRequired?!0:j[h(T)],isRequired:j.isRequired};j.canUnmarkUnique&&(L.uniqueUnmarked=j.uniqueUnmarked||!1),o.collapseOption&&(L.collapsed=j.collapsed),H[j.attribute]=L}),H}function F(H){a("updateRequested",H)}function R(H){a("deleteRequested",H)}function B(H){y.value=!0,Innoclapps.request().post(E(),$(),{params:{intent:o.view}}).then(()=>{u(),H&&(Innoclapps.success(r("core::fields.configured")),a("saved"))}).finally(()=>y.value=!1)}function V(){o.lazy&&m.value===!1&&z(),f.value=!f.value}function P(){b.value=!0,Innoclapps.request().delete(E()+"/reset",{params:{intent:o.view}}).then(({data:H})=>{x.value=H,u(),Innoclapps.success(r("core::fields.reseted"))}).finally(()=>b.value=!1)}async function z(){w.value=!0;let{data:H}=await Innoclapps.request(E(),{params:{intent:o.view}});w.value=!1,x.value=H,m.value=!0}return o.lazy||z(),s.query.view&&s.query.view===o.view&&V(),$e(()=>o.group,z),t({fetch:z,submit:B}),(H,j)=>{const N=d("ICardHeading"),L=d("IButton"),U=d("ICardActions"),ee=d("ICardHeader"),G=d("IText"),W=d("SearchInput"),ae=d("ICardBody"),ue=d("IBadge"),ce=d("IButtonCopy"),oe=d("Icon"),ie=d("IFormCheckbox"),Q=d("IFormCheckboxLabel"),se=d("IFormCheckboxField"),me=d("IFormCheckboxDescription"),xe=d("SortableDraggable"),de=d("ICard"),he=Ve("i-tooltip");return g(),A(de,{class:"mh-96"},{default:p(()=>[l(ee,null,{default:p(()=>[l(N,{text:e.heading},null,8,["text"]),l(U,null,{default:p(()=>[ne(l(L,{variant:"primary",loading:y.value,disabled:k.value,text:H.$t("core::app.save"),small:"",onClick:j[0]||(j[0]=Y=>B(!0))},null,8,["loading","disabled","text"]),[[pe,f.value]]),ne(l(L,{variant:"secondary",loading:b.value,text:H.$t("core::app.reset"),disabled:k.value,"confirm-text":H.$t("core::app.confirm"),small:"",confirmable:"",onConfirmed:P},null,8,["loading","text","disabled","confirm-text"]),[[pe,f.value]]),ne(l(L,{variant:"secondary",icon:"ChevronUpSolid",loading:w.value,disabled:k.value,small:"",onClick:V},null,8,["loading","disabled"]),[[pe,f.value]])]),_:1})]),_:1}),l(ae,{class:"cursor-pointer"},{default:p(()=>[_("div",Wz,[l(G,{text:e.subHeading,onClick:V},null,8,["text"]),ne(l(L,{variant:"secondary",class:"mt-4 shrink-0 lg:ml-5 lg:mt-0",text:H.$t("core::fields.manage"),small:"",onClick:V},null,8,["text"]),[[pe,!f.value]])]),ne(_("div",Gz,[l(W,{modelValue:c.value,"onUpdate:modelValue":j[1]||(j[1]=Y=>c.value=Y)},null,8,["modelValue"])],512),[[pe,f.value]])]),_:1}),ne(_("ul",Kz,[l(xe,Ue(H.$draggable.scrollable,{handle:".field-draggable-handle",list:x.value,"item-key":Y=>e.view+" - "+Y.attribute,group:e.view}),{item:p(({element:Y})=>[_("li",{class:be(["border-b border-neutral-200 px-4 py-4 first:border-t dark:border-neutral-500/30 sm:px-6",{"bg-neutral-50 dark:bg-neutral-700/60":Y.primary,"opacity-60":!Y[T.value]}])},[_("div",Zz,[_("div",Yz,[_("div",Xz,[_("span",Qz,Z(Y.label),1),ne(l(ue,{variant:"info",text:H.$t("core::fields.custom.field")},null,8,["text"]),[[pe,Y.customField]]),ne(l(ue,{variant:"success",text:H.$t("core::fields.field_is_unique")},null,8,["text"]),[[pe,Y.isUnique]]),ne(l(ue,{variant:"warning",text:H.$t("core::fields.is_readonly")},null,8,["text"]),[[pe,Y.readonly]])]),ne(_("span",Jz,[eH,le(Z(Y.helpText),1)],512),[[pe,Y.helpText]]),Y.primary?(g(),D("span",tH,[nH,le(Z(H.$t("core::fields.primary")),1)])):K("",!0)]),_("div",oH,[ne(l(ce,{text:Y.attribute,small:""},null,8,["text"]),[[he,H.$t("core::app.copy_api_key")]]),Y.customField||Y.optionsViaResource?ne((g(),A(L,{key:0,icon:"PencilAlt",basic:"",small:"",onClick:X=>F(Y)},null,8,["onClick"])),[[he,H.$t("core::app.edit")]]):K("",!0),Y.customField?ne((g(),A(L,{key:1,icon:"Trash",basic:"",small:"",onClick:X=>R(Y.customField.id)},null,8,["onClick"])),[[he,H.$t("core::app.delete")]]):K("",!0),l(oe,{icon:"Selector",class:"field-draggable-handle ml-1.5 size-4 cursor-move text-neutral-500"})])]),Y.primary?K("",!0):(g(),D("div",aH,[l(se,null,{default:p(()=>[l(ie,{checked:Y[T.value],"onUpdate:checked":X=>Y[T.value]=X,disabled:Y.isRequired},null,8,["checked","onUpdate:checked","disabled"]),l(Q,{text:H.$t("core::fields.visible")},null,8,["text"])]),_:2},1024),Y.canUnmarkUnique?(g(),A(se,{key:0,class:"gap-y-0"},{default:p(()=>[l(ie,{checked:Y.isUnique&&!Y.uniqueUnmarked,onChange:X=>Y.uniqueUnmarked=!X},null,8,["checked","onChange"]),l(Q,{text:H.$t("core::fields.mark_as_unique")},null,8,["text"]),Y.uniqueUnmarked?(g(),A(me,{key:0},{default:p(()=>[le(Z(S.value?"":H.$t("core::fields.option_disabled_will_propagate",{view_name:I.value?H.$t("core::fields.settings.detail"):H.$t("core::fields.settings.update")})),1)]),_:1})):K("",!0)]),_:2},1024)):K("",!0),e.collapseOption?(g(),A(se,{key:1},{default:p(()=>[l(ie,{checked:Y.collapsed,"onUpdate:checked":X=>Y.collapsed=X},null,8,["checked","onUpdate:checked"]),l(Q,{text:H.$t("core::fields.collapsed_by_default")},null,8,["text"])]),_:2},1024)):K("",!0),!Y.isPrimary&&!Y.readonly?(g(),A(se,{key:2,class:"gap-y-0"},{default:p(()=>[l(ie,{checked:Y.isRequired,"onUpdate:checked":X=>Y.isRequired=X,onChange:X=>X?Y[T.value]=!0:""},null,8,["checked","onUpdate:checked","onChange"]),l(Q,{text:H.$t("core::fields.is_required")},null,8,["text"]),Y.isRequired?(g(),A(me,{key:0},{default:p(()=>[le(Z(S.value?"":H.$t("core::fields.option_enabled_will_propagate",{view_name:I.value?H.$t("core::fields.settings.detail"):H.$t("core::fields.settings.update")})),1)]),_:1})):K("",!0)]),_:2},1024)):K("",!0)]))],2)]),_:1},16,["list","item-key","group"])],512),[[pe,f.value]])]),_:1})}}},rH={class:"mb-3 flex items-center justify-between"},lH={__name:"SettingsFields",setup(e){const t=cn(),n=It(),{t:o}=Ee(),{scriptConfig:a}=Ne(),r=M(!1),s=M(null),i=M(null),u=M(null),c=M(null),m=M(null),f=O(()=>n.params.resourceName),v=O(()=>a(`resources.${f.value}`)),y=O(()=>v.value?o("core::resource.settings.fields",{resourceName:v.value.singularLabel}):null);bo(y),$e(f,()=>{m.value=null});function b(x){x.customField?s.value=x.customField:m.value=x.optionsViaResource}async function w(x){await Innoclapps.confirm(),Innoclapps.request().delete(`/custom-fields/${x}`).then(()=>{k(),Innoclapps.success(o("core::fields.custom.deleted"))})}function k(){t.commit("table/RESET_SETTINGS"),t.dispatch("filters/clearActive",{identifier:f.value,view:f.value});const x=[u,c,i].filter(I=>I.value!==null);Promise.all(x.map(I=>I.value.fetch())).then(()=>{ze(()=>x.forEach(I=>I.value.submit()))})}return(x,I)=>{const C=d("ITextDisplay"),S=d("IButton"),T=d("ICardHeading"),E=d("ICardHeader"),$=d("Icon"),F=d("I18nT"),R=d("ITextBlock"),B=d("ICardBody"),V=d("ICard");return g(),D("div",null,[l(fz,{visible:r.value,"onUpdate:visible":I[0]||(I[0]=P=>r.value=P),"resource-name":f.value,onCreated:k},null,8,["visible","resource-name"]),s.value!==null?(g(),A(pz,{key:0,visible:s.value!==null,"custom-field-id":s.value.id,label:s.value.label,"field-type":s.value.field_type,"field-id":s.value.field_id,"resource-name":s.value.resource_name,options:s.value.options,"is-unique":s.value.is_unique,onUpdated:k,onHidden:I[1]||(I[1]=P=>s.value=null)},null,8,["visible","custom-field-id","label","field-type","field-id","resource-name","options","is-unique"])):K("",!0),ne(_("div",rH,[l(C,{text:y.value},null,8,["text"]),l(S,{variant:"primary",icon:"PlusSolid",class:"ml-3",text:x.$t("core::fields.add"),onClick:I[2]||(I[2]=P=>r.value=!0)},null,8,["text"])],512),[[pe,!m.value]]),ne(_("div",null,[v.value.hasDetailView?(g(),A(um,{key:0,ref_key:"detailRef",ref:i,class:"mb-3",group:f.value,view:x.$scriptConfig("fields.views.detail"),heading:x.$t("core::fields.settings.detail"),"sub-heading":x.$t("core::fields.settings.detail_info"),onDeleteRequested:w,onUpdateRequested:b,onSaved:k},null,8,["group","view","heading","sub-heading"])):K("",!0),l(um,{ref_key:"createRef",ref:u,class:"mb-3",group:f.value,view:x.$scriptConfig("fields.views.create"),heading:x.$t("core::fields.settings.create"),"sub-heading":x.$t("core::fields.settings.create_info"),"collapse-option":!1,onDeleteRequested:w,onUpdateRequested:b,onSaved:k},null,8,["group","view","heading","sub-heading"]),l(um,{ref_key:"updateRef",ref:c,class:"mb-3",group:f.value,view:x.$scriptConfig("fields.views.update"),heading:x.$t("core::fields.settings.update"),"sub-heading":x.$t("core::fields.settings.update_info"),onDeleteRequested:w,onUpdateRequested:b,onSaved:k},null,8,["group","view","heading","sub-heading"]),l(V,null,{default:p(()=>[l(E,null,{default:p(()=>[l(T,{text:x.$t("core::fields.settings.list")},null,8,["text"])]),_:1}),l(B,null,{default:p(()=>[l(R,null,{default:p(()=>[l(F,{scope:"global",keypath:"core::fields.settings.list_info"},{icon:p(()=>[l($,{icon:"DotsHorizontal",class:"mx-1 inline size-5"})]),resourceName:p(()=>[le(Z(v.value.label),1)]),_:1})]),_:1})]),_:1})]),_:1})],512),[[pe,!m.value]]),m.value?(g(),A(Ci,{key:1,"resource-name":m.value,onCreated:k,onUpdated:k,onDeleted:k,onCancel:I[3]||(I[3]=P=>m.value=null)},null,8,["resource-name"])):K("",!0)])}}};function rt(){const{scriptConfig:e,currentUser:t,setting:n}=Ne(),{t:o}=Ee(),a=O(()=>{var $;return(($=t.value)==null?void 0:$.timezone)||C()}),r=O(()=>u.value.indexOf("H:i")===-1),s=O(()=>{var $;return(($=t.value)==null?void 0:$.date_format)||n("date_format")}),i=O(()=>[s.value,u.value].join(" ")),u=O(()=>{var $;return(($=t.value)==null?void 0:$.time_format)||n("time_format")}),c=O(()=>fu(u.value));function m($,F){if(!$)return $;F=F||i.value;const R=fu(F);let B;if(y($))B=dt.fromISO($);else if(b($))B=dt.fromFormat($,"yyyy-MM-dd HH:mm:ss");else if($ instanceof Date)B=dt.fromJSDate($);else return $;return E(B.setZone(a.value).toFormat(R),F)}function f($,F){if(!$)return $;const R=fu(F||s.value);let B;if(y($))B=dt.fromISO($);else if(b($))B=dt.fromFormat($,"yyyy-MM-dd HH:mm:ss");else if(w($))B=dt.fromFormat($,"yyyy-MM-dd");else if($ instanceof Date)B=dt.fromJSDate($);else return $;return B.setZone(a.value).toFormat(R)}function v($,F){if(!$)return $;F=F||u.value;const R=fu(F);let B;if(y($))B=dt.fromISO($);else if(b($))B=dt.fromFormat($,"yyyy-MM-dd HH:mm:ss");else if($ instanceof Date)B=dt.fromJSDate($);else return $;return E(B.setZone(a.value).toFormat(R),F)}function y($){return typeof $!="string"?!1:/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3,6}(Z|[+-]\d{2}:\d{2})/.test($)}function b($){return typeof $!="string"||![" ",":","-"].some(F=>$.indexOf(F)>-1)?!1:/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test($)}function w($){return typeof $!="string"||$.indexOf("-")===1?!1:/\d{4}-\d{2}-\d{2}$/.test($)}function k($){return/\d{4}-\d{2}-\d{2}[T\s]?00:00:00(\.\d{3,6}(Z|[+-]\d{2}:\d{2}))?/.test($)}function x($,F=null){return y($)?k($)?f($):m($):w($)?f($):b($)?m($):F}function I($){return/(\d{2}:\d{2}:\d{2})|(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})/.test($)}function C(){return dt.local().zoneName}function S($){const F=qt.fromObject({seconds:$});if($<60)return o("core::dates.duration.seconds");if($<3600){let R=Math.round(F.as("minutes"));return R+" "+o("core::dates.duration.minutes",R)}else if($<86400){let R=Math.round(F.as("hours"));return R+" "+o("core::dates.duration.hours",R)}else{let R=Math.round(F.as("days"));return R+" "+o("core::dates.duration.days",R)}}function T($,F){const R=$.getFullYear(),B=$.getMonth(),V=$.getDate(),P=F.getFullYear(),z=F.getMonth(),H=F.getDate();return R!==P||B!==z||V!==H}function E($,F){return F.includes("A")?$.replace(/AM|PM/,R=>R.toUpperCase()):F.includes("a")?$.replace(/AM|PM/,R=>R.toLowerCase()):$}try{kn.defaultLocale=Sc().replace("_","-"),kn.defaultZone=a.value,dt.now().toLocaleString()}catch($){$.message=="Incorrect locale information provided"&&(kn.defaultLocale=e("fallback_locale"))}return{DateTime:dt,UTCDateTimeInstance:dt.now().setZone(e("timezone")),LocalDateTimeInstance:dt.now(),localizedDate:f,localizedDateTime:m,localizedTime:v,userTimezone:a,usesTwelveHourTime:r,timeFormatForLuxon:c,humanizeDuration:S,localizeIfDate:x,guessTimezone:C,hasTime:I,isMidnight:k,isISODate:y,isStandardDateTime:b,isStandardDate:w,onDifferentDay:T}}function fu(e){const t={d:"dd",D:"ccc",j:"d",l:"cccc",N:"E",S:"o",w:"c",z:"o",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"kkkk",Y:"yyyy",y:"yy",a:"a",A:"a",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"z",I:"",O:"ZZ",P:"ZZZZ",T:"zz",Z:"",c:"yyyy-MM-dd'T'HH:mm:ssZZZZ",r:"EEE, dd MMM yyyy HH:mm:ss ZZ",U:"X",",":","," ":" ",".":".","/":"/","-":"-",":":":"};return e.split("").map(n=>t[n]||n).join("")}const sH=["value"],iH={__name:"DateFormatInput",setup(e){const{localizedDate:t}=rt(),{scriptConfig:n}=Ne(),o=n("date_formats");return(a,r)=>{const s=d("IFormSelect");return g(),A(s,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(o),i=>(g(),D("option",{key:i,value:i},Z(i)+" ["+Z(h(t)(new Date,i))+"] ",9,sH))),128))]),_:1})}}},uH=["value"],cH={__name:"TimeFormatInput",setup(e){const{scriptConfig:t}=Ne(),{localizedTime:n}=rt(),o=t("time_formats");return(a,r)=>{const s=d("IFormSelect");return g(),A(s,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(o),i=>(g(),D("option",{key:i,value:i},Z(i)+" ["+Z(h(n)(new Date,i))+"] ",9,uH))),128))]),_:1})}}},EI={__name:"TimezoneInput",props:yt({fieldId:{type:String,default:"timezone"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue"),{DateTime:n}=rt(),o=X2(async()=>await Innoclapps.timezones(),[]);function a(r){const i=n.now().setZone(r.label).offset,u=Math.floor(Math.abs(i)/60),c=Math.abs(i)%60;return"UTC/GMT "+((i>=0?"+":"-")+u.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0"))+" "+r.label}return(r,s)=>{const i=d("ICustomSelect");return g(),A(i,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value=u),"input-id":e.fieldId,options:h(o)},{option:p(u=>[le(Z(a(u)),1)]),_:1},8,["modelValue","input-id","options"])}}},Kc={__name:"LocalizationInputs",props:{timeFormat:{},dateFormat:{},locale:{},timezone:{},form:{required:!0,type:Object},exclude:{type:Array,default:()=>[]}},emits:["update:timeFormat","update:dateFormat","update:locale","update:timezone"],setup(e){const t=e,{locales:n}=Ne(),o=O(()=>t.exclude.indexOf("timezone")===-1),a=O(()=>t.exclude.indexOf("locale")===-1);return(r,s)=>{const i=d("IFormError"),u=d("IFormGroup"),c=d("ICustomSelect");return g(),D("div",null,[o.value?(g(),A(u,{key:0,"label-for":"timezone",label:r.$t("core::app.timezone")},{default:p(()=>[l(EI,{"model-value":e.form.timezone,"onUpdate:modelValue":s[0]||(s[0]=m=>r.$emit("update:timezone",m))},null,8,["model-value"]),l(i,{error:e.form.getError("timezone")},null,8,["error"])]),_:1},8,["label"])):K("",!0),a.value?(g(),A(u,{key:1,"label-for":"locale",label:r.$t("core::app.locale")},{default:p(()=>[l(c,{"input-id":"locale","model-value":e.form.locale,clearable:!1,options:h(n),"onUpdate:modelValue":s[1]||(s[1]=m=>r.$emit("update:locale",m))},null,8,["model-value","options"]),l(i,{error:e.form.getError("locale")},null,8,["error"])]),_:1},8,["label"])):K("",!0),l(u,{"label-for":"date_format",label:r.$t("core::settings.date_format")},{default:p(()=>[l(iH,{"model-value":e.form.date_format,"onUpdate:modelValue":s[2]||(s[2]=m=>r.$emit("update:dateFormat",m))},null,8,["model-value"]),l(i,{error:e.form.getError("date_format")},null,8,["error"])]),_:1},8,["label"]),l(u,{"label-for":"time_format",label:r.$t("core::settings.time_format")},{default:p(()=>[l(cH,{"model-value":e.form.time_format,"onUpdate:modelValue":s[3]||(s[3]=m=>r.$emit("update:timeFormat",m))},null,8,["model-value"]),l(i,{error:e.form.getError("time_format")},null,8,["error"])]),_:1},8,["label"])])}}};var dH=$i;function mH(e,t){var n=[];return dH(e,function(o,a,r){t(o,a,r)&&n.push(o)}),n}var FI=mH,fH=Lp,pH=FI,vH=ra,hH=Fn;function gH(e,t){var n=hH(e)?fH:pH;return n(e,vH(t))}var bH=gH;const Vo=Bt(bH);function yH(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var _H=yH,ib=ui;function IH(e,t){if(e!==t){var n=e!==void 0,o=e===null,a=e===e,r=ib(e),s=t!==void 0,i=t===null,u=t===t,c=ib(t);if(!i&&!c&&!r&&e>t||r&&s&&u&&!i&&!c||o&&s&&u||!n&&u||!a)return 1;if(!o&&!r&&!c&&e<t||c&&n&&a&&!o&&!r||i&&n&&a||!s&&a||!u)return-1}return 0}var wH=IH,xH=wH;function kH(e,t,n){for(var o=-1,a=e.criteria,r=t.criteria,s=a.length,i=n.length;++o<s;){var u=xH(a[o],r[o]);if(u){if(o>=i)return u;var c=n[o];return u*(c=="desc"?-1:1)}}return e.index-t.index}var $H=kH,cm=Hl,CH=di,SH=ra,TH=kI,EH=_H,FH=vi,AH=$H,RH=wi,DH=Fn;function OH(e,t,n){t.length?t=cm(t,function(r){return DH(r)?function(s){return CH(s,r.length===1?r[0]:r)}:r}):t=[RH];var o=-1;t=cm(t,FH(SH));var a=TH(e,function(r,s,i){var u=cm(t,function(c){return c(r)});return{criteria:u,index:++o,value:r}});return EH(a,function(r,s){return AH(r,s,n)})}var AI=OH,BH=AI,ub=Fn;function NH(e,t,n,o){return e==null?[]:(ub(t)||(t=t==null?[]:[t]),n=o?void 0:n,ub(n)||(n=n==null?[]:[n]),BH(e,t,n))}var PH=NH;const Vt=Bt(PH);function ya(){const e=cn(),{scriptConfig:t}=Ne(),n=M(!1),o=M(!1),a=O(()=>Vt(e.state.emailAccounts.collection,["is_primary","email"],["desc","asc"])),r=O(()=>Vo(e.state.emailAccounts.collection,["type","shared"])),s=O(()=>Vo(e.state.emailAccounts.collection,["type","personal"])),i=O(()=>Vt(a.value,v=>new Date(v.created_at),["desc"])[0]),u=O(()=>Vo(a.value,{is_primary:!0,is_sync_stopped:!1}).length>0);async function c(v){n.value=!0;let{data:y}=await Innoclapps.request(`/mail/accounts/${v}/sync`).finally(()=>n.value=!1);return y}async function m(){o.value=!0;try{return await e.dispatch("emailAccounts/fetch")}finally{o.value=!1}}function f(v,y){if(v=="Gmail")return`${t("url")}/mail/accounts/${y}/google/connect`;if(v=="Outlook")return`${t("url")}/mail/accounts/${y}/microsoft/connect`}return{emailAccountsBeingLoaded:o,emailAccountBeingSynced:n,emailAccounts:a,sharedEmailAccounts:r,personalEmailAccounts:s,latestEmailAccount:i,hasPrimaryEmailAccount:u,fetchEmailAccounts:m,syncEmailAccount:c,createOAuthConnectUrl:f}}const MH={class:"space-y-8"},VH={class:"mb-3 text-base font-medium text-neutral-700 dark:text-neutral-200 sm:text-sm"},LH=["src"],qH=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),UH={class:"mb-3 text-base font-medium text-neutral-700 dark:text-neutral-200 sm:text-sm"},jH=["src"],zH=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),HH={class:"w-auto xl:w-1/3"},WH=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),GH=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),KH={class:"my-4 block"},ZH={__name:"SettingsGeneral",setup(e){const{setting:t,resetStoreState:n}=Ne(),{form:o,submit:a,isReady:r,originalSettings:s}=To(),{emailAccounts:i,fetchEmailAccounts:u}=ya(),c=Pt([]),m=Pt([]),f=Pt(null),v=O(()=>t("logo_light")),y=O(()=>t("logo_dark")),b=O(()=>ut(i.value,["id",parseInt(o.system_email_account_id)])),w=O(()=>ut(i.value,["id",parseInt(s.value.system_email_account_id)])),k=O(()=>s.value.system_email_account_id&&w.value),x=O(()=>s.value.system_email_account_id&&!w.value);function I(){a(()=>{o.require_calling_prefix_on_phones!==s.value.require_calling_prefix_on_phones&&n(),o.currency!==s.value.currency&&C()})}function C(){window.location.reload()}function S($){const F="logo_"+$;o[F]&&Innoclapps.request().delete(`/logo/${$}`).then(C)}function T(){Innoclapps.request("currencies").then(({data:$})=>{c.value=Tn($,(F,R)=>R)})}function E(){Innoclapps.request("countries").then(({data:$})=>{m.value=$,o.company_country_id&&(f.value=ut(m.value,["id",parseInt(o.company_country_id)]))})}return u(),T(),E(),($,F)=>{const R=d("ICardHeading"),B=d("IText"),V=d("ICardHeader"),P=d("CropsAndUploadsImage"),z=d("ICustomSelect"),H=d("IFormError"),j=d("IFormGroup"),N=d("IFormText"),L=d("IFormTextarea"),U=d("IFormSwitchLabel"),ee=d("IFormSwitchDescription"),G=d("IFormSwitch"),W=d("IFormSwitchField"),ae=d("IAlertBody"),ue=d("IAlert"),ce=d("ICardBody"),oe=d("IButton"),ie=d("ICardFooter"),Q=d("ICard"),se=d("IFormInput"),me=d("Editor"),xe=Ve("t");return g(),D("form",{onSubmit:ot(I,["prevent"])},[_("div",MH,[_("div",null,[l(V,null,{default:p(()=>[_("div",null,[l(R,{text:$.$t("core::settings.general")},null,8,["text"]),l(B,{class:"block",text:$.$t("core::settings.general_settings")},null,8,["text"])])]),_:1}),l(Q,{overlay:!h(r)},{default:p(()=>[l(ce,null,{default:p(()=>[ne(_("p",VH,null,512),[[xe,"core::app.logo.dark"]]),l(P,{name:"logo_dark","upload-url":`${$.$scriptConfig("apiURL")}/logo/dark`,image:y.value,"show-delete":!!h(o).logo_dark,"cropper-options":{aspectRatio:null},"choose-text":y.value?$.$t("core::app.change"):$.$t("core::settings.choose_logo"),onCleared:F[0]||(F[0]=de=>S("dark")),onSuccess:C},{image:p(({src:de})=>[_("img",{class:"h-8 w-auto",src:de},null,8,LH)]),_:1},8,["upload-url","image","show-delete","choose-text"]),qH,ne(_("p",UH,null,512),[[xe,"core::app.logo.light"]]),l(P,{name:"logo_light","show-delete":!!h(o).logo_light,"upload-url":`${$.$scriptConfig("apiURL")}/logo/light`,image:v.value,"cropper-options":{aspectRatio:null},"choose-text":v.value?$.$t("core::app.change"):$.$t("core::settings.choose_logo"),onCleared:F[1]||(F[1]=de=>S("light")),onSuccess:C},{image:p(({src:de})=>[_("img",{class:"h-8 w-auto",src:de},null,8,jH)]),_:1},8,["show-delete","upload-url","image","choose-text"]),zH,l(j,{"label-for":"currency",class:"w-auto xl:w-1/3",label:$.$t("core::app.currency")},{default:p(()=>[l(z,{modelValue:h(o).currency,"onUpdate:modelValue":F[2]||(F[2]=de=>h(o).currency=de),"input-id":"currency",clearable:!1,options:c.value},null,8,["modelValue","options"]),l(H,{error:h(o).getError("currency")},null,8,["error"])]),_:1},8,["label"]),l(j,{"label-for":"system_email_account_id",label:$.$t("core::settings.system_email")},{default:p(()=>[_("div",HH,[l(z,{"input-id":"system_email_account_id",label:"email",placeholder:!k.value&&x.value?$.$t("core::settings.system_email_configured"):"","model-value":b.value,disabled:!k.value&&x.value,options:h(i),onOptionSelected:F[3]||(F[3]=de=>h(o).system_email_account_id=de.id),onCleared:F[4]||(F[4]=de=>h(o).system_email_account_id=null)},null,8,["placeholder","model-value","disabled","options"])]),l(N,{class:"mt-2 max-w-3xl",text:$.$t("core::settings.system_email_info")},null,8,["text"]),l(H,{error:h(o).getError("system_email_account_id")},null,8,["error"])]),_:1},8,["label"]),l(j,{"label-for":"allowed_extensions",label:$.$t("core::app.allowed_extensions"),description:$.$t("core::app.allowed_extensions_info")},{default:p(()=>[l(L,{id:"allowed_extensions",modelValue:h(o).allowed_extensions,"onUpdate:modelValue":F[5]||(F[5]=de=>h(o).allowed_extensions=de),rows:"2"},null,8,["modelValue"]),l(H,{error:h(o).getError("allowed_extensions")},null,8,["error"])]),_:1},8,["label","description"]),WH,l(W,null,{default:p(()=>[l(U,{text:$.$t("core::settings.phones.require_calling_prefix")},null,8,["text"]),l(ee,{text:$.$t("core::settings.phones.require_calling_prefix_info")},null,8,["text"]),l(G,{modelValue:h(o).require_calling_prefix_on_phones,"onUpdate:modelValue":F[6]||(F[6]=de=>h(o).require_calling_prefix_on_phones=de),onChange:h(a)},null,8,["modelValue","onChange"])]),_:1}),GH,_("div",KH,[l(ue,{class:"mb-5"},{default:p(()=>[l(ae,null,{default:p(()=>[le(Z($.$t("core::settings.update_user_account_info")),1)]),_:1})]),_:1}),l(Kc,{class:"w-auto xl:w-1/3",exclude:["timezone","locale"],form:h(o),"onUpdate:timeFormat":F[7]||(F[7]=de=>h(o).time_format=de),"onUpdate:dateFormat":F[8]||(F[8]=de=>h(o).date_format=de)},null,8,["form"])])]),_:1}),l(ie,{class:"text-right"},{default:p(()=>[l(oe,{type:"submit",variant:"primary",disabled:h(o).busy,text:$.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(V,null,{default:p(()=>[l(R,{text:$.$t("core::settings.company_information")},null,8,["text"])]),_:1}),l(Q,{overlay:!h(r)},{default:p(()=>[l(ce,null,{default:p(()=>[l(j,{class:"w-auto xl:w-1/3","label-for":"company_name",label:$.$t("core::app.company.name")},{default:p(()=>[l(se,{id:"company_name",modelValue:h(o).company_name,"onUpdate:modelValue":F[9]||(F[9]=de=>h(o).company_name=de)},null,8,["modelValue"])]),_:1},8,["label"]),l(j,{class:"w-auto xl:w-1/3","label-for":"company_country_id",label:$.$t("core::app.company.country")},{default:p(()=>[l(z,{modelValue:f.value,"onUpdate:modelValue":F[10]||(F[10]=de=>f.value=de),label:"name","input-id":"company_country_id",options:m.value,onOptionSelected:F[11]||(F[11]=de=>h(o).company_country_id=de.id),onCleared:F[12]||(F[12]=de=>h(o).company_country_id=null)},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),l(ie,{class:"text-right"},{default:p(()=>[l(oe,{type:"submit",variant:"primary",disabled:h(o).busy,text:$.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(V,null,{default:p(()=>[l(R,{text:$.$t("core::app.privacy_policy")},null,8,["text"])]),_:1}),l(Q,{overlay:!h(r)},{default:p(()=>[l(ce,null,{default:p(()=>[l(me,{modelValue:h(o).privacy_policy,"onUpdate:modelValue":F[13]||(F[13]=de=>h(o).privacy_policy=de),"with-image":!1},null,8,["modelValue"]),l(N,{class:"mt-2",text:$.$t("core::settings.privacy_policy_info",{url:$.$scriptConfig("privacyPolicyUrl")})},null,8,["text"])]),_:1}),l(ie,{class:"text-right"},{default:p(()=>[l(oe,{type:"submit",variant:"primary",disabled:h(o).busy,text:$.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])])])],32)}}},YH={class:"rounded-md border border-neutral-200 bg-neutral-50 p-4 dark:border-neutral-500 dark:bg-neutral-700"},XH={class:"max-h-96 overflow-y-auto"},QH={class:"select-all font-semibold"},RI={__name:"TextPlaceholders",props:{placeholders:Array},setup(e){return(t,n)=>{const o=d("ITextDark");return g(),D("div",YH,[_("div",XH,[(g(!0),D(fe,null,Ie(e.placeholders,a=>(g(),A(o,{key:a.tag,class:"mb-1"},{default:p(()=>[_("span",QH,Z(a.interpolation_start)+" "+Z(a.tag)+" "+Z(a.interpolation_end),1),ne(_("span",null," - "+Z(a.description),513),[[pe,a.description]])]),_:2},1024))),128))])])}}},JH={class:"flex items-center space-x-4"},eW={class:"flex items-center space-x-2"},tW=["textContent"],nW={class:"px-3 py-2 font-medium"},oW={class:"mb-2 flex items-center"},aW={__name:"SettingsMailableTemplates",setup(e){const{t}=Ee(),{setLoading:n,isLoading:o}=An(),{locales:a}=Ne(),r=M(!1),{form:s}=Ze(),i=M("HTML"),u=M([]),c=M({}),m=M("en");$e(m,b);const f=O(()=>i.value==="HTML"),v=O(()=>({id:"placeholders",trigger:"{",list:c.value.placeholders.filter(C=>C.tag!=="action_button").map(C=>({value:`${C.interpolation_start} ${C.tag} ${C.interpolation_end}`,text:`${C.interpolation_start} ${C.tag} ${C.interpolation_end} - ${C.description}`}))}));function y(){s.put(`/mailable-templates/${c.value.id}`).then(C=>{let S=Et(u.value,["id",parseInt(C.id)]);u.value[S]=C,k(C),Innoclapps.success(t("core::mail_template.updated"))})}function b(){n(!0),Innoclapps.request(`/mailable-templates/${m.value}/locale`).then(({data:C})=>{u.value=C,k(Object.keys(c.value).length===0?C[0]:ut(u.value,["name",c.value.name])),r.value=!0}).finally(()=>n(!1))}async function w(C){C!==m.value&&s.isDirty()&&await Innoclapps.confirm({message:t("core::mail_template.changes_not_saved_warning"),confirmText:t("core::app.discard_changes")}),m.value=C}async function k(C,S=!1){S&&C.id!==c.value.id&&s.isDirty()&&await Innoclapps.confirm({message:t("core::mail_template.changes_not_saved_warning"),confirmText:t("core::app.discard_changes")}),c.value=C,s.set({subject:C.subject,html_template:C.html_template,text_template:C.text_template})}function x(C,S,T,E){return C.indexOf("%7B%7B%20")>-1&&C.indexOf("%20%7D%7D")>-1&&(C=C.replace("%7B%7B%20","{").replace("%20%7D%7D","}")),C}function I(){b()}return I(),(C,S)=>{const T=d("ICardHeading"),E=d("ITextDark"),$=d("IDropdownButton"),F=d("IDropdownItem"),R=d("IDropdownMenu"),B=d("IDropdown"),V=d("IDropdownSeparator"),P=d("ICardActions"),z=d("ICardHeader"),H=d("IFormInput"),j=d("IFormError"),N=d("IFormGroup"),L=d("IFormLabel"),U=d("Editor"),ee=d("IFormTextarea"),G=d("ICardBody"),W=d("IButton"),ae=d("ICardFooter"),ue=d("ICard");return g(),D(fe,null,[l(z,null,{default:p(()=>[_("div",JH,[l(T,{text:C.$t("core::mail_template.mail_templates")},null,8,["text"]),_("div",eW,[l(E,{class:"font-medium",text:C.$t("core::app.locale")},null,8,["text"]),l(B,null,{default:p(()=>[l($,{text:m.value,basic:""},null,8,["text"]),l(R,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(a),ce=>(g(),A(F,{key:ce,text:ce,active:m.value===ce,condensed:"",onClick:oe=>w(ce)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])]),l(P,{class:"-mt-4 sm:-mt-0"},{default:p(()=>[l(B,{placement:"bottom-end"},{default:p(()=>[l($,{class:"-ml-3.5 sm:ml-0",basic:""},{default:p(()=>[_("span",{class:"max-w-[13rem] truncate",textContent:Z(c.value.name)},null,8,tW)]),_:1}),l(R,null,{default:p(()=>[_("div",nW,[l(E,{text:C.$t("core::mail_template.choose_to_edit")},null,8,["text"])]),l(V),(g(!0),D(fe,null,Ie(u.value,ce=>(g(),A(F,{key:ce.id,text:ce.name,active:c.value.id===ce.id,condensed:"",onClick:oe=>k(ce,!0)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(ue,{as:"form",overlay:h(o),onSubmit:ot(y,["prevent"])},{default:p(()=>[l(G,null,{default:p(()=>[l(N,{"label-for":"subject",label:C.$t("core::mail_template.subject"),required:""},{default:p(()=>[l(H,{id:"subject",modelValue:h(s).subject,"onUpdate:modelValue":S[0]||(S[0]=ce=>h(s).subject=ce),name:"subject"},null,8,["modelValue"]),l(j,{error:h(s).getError("subject")},null,8,["error"])]),_:1},8,["label"]),l(N,null,{default:p(()=>[_("div",oW,[l(L,{label:C.$t("core::mail_template.message"),required:""},null,8,["label"])]),ne(_("div",null,[r.value?(g(),A(U,{key:0,modelValue:h(s).html_template,"onUpdate:modelValue":S[1]||(S[1]=ce=>h(s).html_template=ce),config:{urlconverter_callback:x},"auto-completer":v.value,"absolute-urls":"",minimal:""},null,8,["modelValue","config","auto-completer"])):K("",!0)],512),[[pe,f.value]]),ne(_("div",null,[l(ee,{modelValue:h(s).text_template,"onUpdate:modelValue":S[2]||(S[2]=ce=>h(s).text_template=ce),name:"text_template",rows:8},null,8,["modelValue"])],512),[[pe,!f.value]]),l(j,{error:h(s).getError("html_template")},null,8,["error"]),l(j,{error:h(s).getError("text_template")},null,8,["error"])]),_:1}),c.value.placeholders&&c.value.placeholders.length>0?(g(),A(N,{key:0},{default:p(()=>[l(E,{class:"mb-1 font-medium",text:C.$t("core::mail_template.placeholders.placeholders")},null,8,["text"]),l(RI,{placeholders:c.value.placeholders},null,8,["placeholders"])]),_:1})):K("",!0)]),_:1}),l(ae,{class:"text-right"},{default:p(()=>[l(W,{type:"submit",variant:"primary",disabled:h(s).busy,text:C.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}};var rW=function(e,t,n,o){var a=typeof o<"u"?[o,e]:[e],r=new Blob(a,{type:n||"application/octet-stream"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(r,t);else{var s=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),i=document.createElement("a");i.style.display="none",i.href=s,i.setAttribute("download",t),typeof i.download>"u"&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)},200)}};const Ys=Bt(rW),lW={class:"px-6"},sW={__name:"SettingsSystemInfo",setup(e){const t=M({});function n(){Innoclapps.request("/system/info").then(({data:a})=>t.value=a)}function o(){Innoclapps.request().post("/system/info",{},{responseType:"blob"}).then(a=>{Ys(a.data,"system-info.xlsx")})}return n(),(a,r)=>{const s=d("ICardHeading"),i=d("IButton"),u=d("ICardActions"),c=d("ICardHeader"),m=d("ITableCell"),f=d("ITableRow"),v=d("ITableBody"),y=d("ITable"),b=d("ICard");return g(),D(fe,null,[l(c,null,{default:p(()=>[l(s,{text:a.$t("core::app.system_info")},null,8,["text"]),l(u,null,{default:p(()=>[l(i,{icon:"DocumentDownload",variant:"secondary",small:"",onClick:o})]),_:1})]),_:1}),l(b,null,{default:p(()=>[_("div",lW,[l(y,{class:"[--gutter:theme(spacing.6)]",bleed:"",grid:"",condensed:""},{default:p(()=>[l(v,null,{default:p(()=>[(g(!0),D(fe,null,Ie(t.value,(w,k)=>(g(),A(f,{key:k},{default:p(()=>[l(m,{class:"font-medium"},{default:p(()=>[le(Z(k),1)]),_:2},1024),l(m,{class:"whitespace-break-spaces"},{default:p(()=>[_("code",null,Z(w),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})],64)}}},iW=["value"],uW=["value"],cW={class:"px-6"},dW={class:"mb-3 flex justify-between py-1"},mW={class:"inline-flex items-center gap-x-2"},fW=["textContent"],pW={__name:"SettingsSystemLogs",setup(e){const t=It(),n=Pt({}),{UTCDateTimeInstance:o}=rt(),a=M(t.query.date||o.toISODate()),r=M(t.query.type||"ALL"),s=["ALL","INFO","EMERGENCY","CRITICAL","ALERT","ERROR","WARNING","NOTICE","DEBUG"],i={INFO:"info",DEBUG:"neutral",EMERGENCY:"danger",CRITICAL:"danger",NOTICE:"neutral",WARNING:"warning",ERROR:"danger",ALERT:"warning"};$e(a,f);const u=O(()=>n.value.logs?!r.value||r.value==="ALL"?m(n.value.logs):m(n.value.logs.filter(v=>v.type===r.value)):[]),c=O(()=>u.value&&u.value.length>0);function m(v){return v.sort(function(b,w){var k=new Date(b.timestamp),x=new Date(w.timestamp);return x-k})}function f(){Innoclapps.request("/system/logs",{params:{date:a.value}}).then(({data:v})=>{n.value=v,v.log_dates.indexOf(a.value)===-1&&n.value.log_dates.push(a.value)})}return f(),(v,y)=>{const b=d("ICardHeading"),w=d("IFormSelect"),k=d("ICardActions"),x=d("ICardHeader"),I=d("ITableHeader"),C=d("ITableRow"),S=d("ITableHead"),T=d("IBadge"),E=d("IButtonCopy"),$=d("TextCollapse"),F=d("ITableCell"),R=d("ITableBody"),B=d("ITable"),V=d("ICard");return g(),D(fe,null,[l(x,null,{default:p(()=>[l(b,{text:"Logs"}),l(k,null,{default:p(()=>[l(w,{modelValue:r.value,"onUpdate:modelValue":y[0]||(y[0]=P=>r.value=P),option:s,onInput:y[1]||(y[1]=P=>v.$router.replace({query:{type:P,date:a.value}}))},{default:p(()=>[(g(),D(fe,null,Ie(s,P=>_("option",{key:P,value:P},Z(P),9,iW)),64))]),_:1},8,["modelValue"]),l(w,{modelValue:a.value,"onUpdate:modelValue":y[2]||(y[2]=P=>a.value=P),onInput:y[3]||(y[3]=P=>v.$router.replace({query:{date:P,type:r.value}}))},{default:p(()=>[(g(!0),D(fe,null,Ie(n.value.log_dates,P=>(g(),D("option",{key:P,value:P},Z(P),9,uW))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(V,{header:"Logs"},{default:p(()=>[_("div",cW,[l(B,{class:"[--gutter:theme(spacing.6)]",bleed:"",condensed:""},{default:p(()=>[l(S,null,{default:p(()=>[l(C,null,{default:p(()=>[l(I,null,{default:p(()=>[le("Log")]),_:1})]),_:1})]),_:1}),l(R,null,{default:p(()=>[(g(!0),D(fe,null,Ie(u.value,(P,z)=>(g(),A(C,{key:z},{default:p(()=>[l(F,{width:"60%",class:"whitespace-pre-line break-all"},{default:p(()=>[_("div",dW,[_("div",mW,[l(T,{text:P.type,variant:i[P.type]},null,8,["text","variant"]),l(E,{text:P.message,small:""},null,8,["text"])]),_("p",{textContent:Z(P.timestamp)},null,8,fW)]),_("code",null,[l($,{text:P.message,length:500},null,8,["text"])])]),_:2},1024)]),_:2},1024))),128)),ne(l(F,{colspan:"4",class:"text-center"},{default:p(()=>[le(Z(n.value.message||"No logs to show."),1)]),_:1},512),[[pe,!c.value]])]),_:1})]),_:1})])]),_:1})],64)}}},vW={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},hW={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0"},gW={class:"grow"},bW={class:"shrink-0"},yW={__name:"SettingsTools",setup(e){const{t}=Ee(),{scriptConfig:n}=Ne(),o=n("tools"),a=M(null);async function r(s){a.value=s;try{await Innoclapps.request().post(`/tools/${s}`),Innoclapps.success(t("core::settings.tools.executed")),setTimeout(()=>window.location.reload(!0),1e3)}finally{a.value=null}}return(s,i)=>{const u=d("ICardHeading"),c=d("ICardHeader"),m=d("ITextDark"),f=d("IText"),v=d("IButton"),y=d("ICard");return g(),D(fe,null,[l(c,null,{default:p(()=>[l(u,{text:s.$t("core::settings.tools.tools")},null,8,["text"])]),_:1}),l(y,null,{default:p(()=>[_("ul",vW,[(g(!0),D(fe,null,Ie(h(o),(b,w)=>(g(),D("li",{key:w,class:"px-4 py-4 sm:px-6"},[_("div",hW,[_("div",gW,[l(m,{class:"font-medium",text:w},null,8,["text"]),l(f,{text:b.description},null,8,["text"])]),_("div",bW,[l(v,{variant:"secondary",loading:a.value===w,disabled:a.value!==null,text:s.$t("core::settings.tools.run"),small:"",onClick:k=>r(w)},null,8,["loading","disabled","text","onClick"])])])]))),128))])]),_:1})],64)}}},_W={class:"my-1 flex flex-col sm:flex-row sm:items-center"},IW={class:"flex grow space-x-2"},wW={key:0},xW={class:"flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0"},kW={class:"flex-1 rounded bg-warning-100 p-2 px-2 py-3 text-center text-warning-700"},$W={class:"font-medium"},CW=["textContent"],SW={class:"flex-1 rounded bg-success-100 p-2 px-2 py-3 text-center text-success-700"},TW={class:"font-medium"},EW=["textContent"],FW={key:1},AW={key:0,class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},RW={class:"flex items-center justify-between"},DW=_("br",null,null,-1),OW={class:"flex items-center"},BW={class:"inline-block",tabindex:"-1"},NW={__name:"SettingsUpdate",setup(e){const{t}=Ee(),{form:n,submit:o}=To(),{localizedDateTime:a}=rt(),{scriptConfig:r}=Ne(),s=r("requirements.zip"),i=M({}),u=M([]),c=M(!1),m=M(!1),f=M(!1),v=O(()=>Vt(u.value.map(E=>(E._date=new Date(E.date),E)),["isApplied","_date"],["asc","asc"])),y=O(()=>u.value.length>0),b=O(()=>c.value?t("core::update.update_in_progress"):t("core::update.perform")),w=O(()=>bA(i.value.purchase_key)),k=O(()=>i.value.is_new_version_available&&w.value&&s);function x(){n.purchase_key=i.value.purchase_key,o()}function I(E){E.data==="Incorrect files permissions."?window.location.href="/errors/permissions":Innoclapps.error(E.data)}function C(){c.value=!0,Innoclapps.request().post(`/update/${i.value.purchase_key}`).then(()=>window.location.reload()).catch(({response:E})=>I(E)).finally(()=>c.value=!1)}function S(E,$){m.value=$,Innoclapps.request().post(`/patches/${E}/${i.value.purchase_key}`).then(()=>window.location.reload()).catch(({response:F})=>I(F)).finally(()=>m.value=!1)}function T(){Promise.all([Innoclapps.request("/update"),Innoclapps.request("/patches")]).then(E=>{i.value=E[0].data,u.value=E[1].data}).catch(({response:E})=>I(E)).finally(()=>f.value=!0)}return T(),(E,$)=>{const F=d("IFormLabel"),R=d("IFormInput"),B=d("IButton"),V=d("ICardBody"),P=d("ICard"),z=d("ICardHeading"),H=d("ICardHeader"),j=d("Icon"),N=d("ITextDisplay"),L=d("IText"),U=d("IOverlay"),ee=d("ICardFooter"),G=d("ITextDark"),W=d("IBadge"),ae=d("ITextSmall"),ue=d("ILink"),ce=Ve("t"),oe=Ve("i-tooltip");return g(),D(fe,null,[l(P,{class:"mb-3"},{default:p(()=>[l(V,null,{default:p(()=>[_("div",_W,[l(F,{for:"purchase-key",class:"mb-1 shrink-0 sm:mb-0 sm:mr-4"},{default:p(()=>[le(Z(E.$t("core::app.purchase_key")),1)]),_:1}),_("div",IW,[l(R,{id:"purchase-key",modelValue:i.value.purchase_key,"onUpdate:modelValue":$[0]||($[0]=ie=>i.value.purchase_key=ie),placeholder:E.$t("core::app.enter_purchase_key"),class:be([f.value&&!w.value?"text-danger-900 placeholder-danger-400 focus:ring-danger-500 dark:placeholder-danger-300 dark:focus:ring-danger-400":""])},null,8,["modelValue","placeholder","class"]),l(B,{variant:"secondary",text:E.$t("core::app.save"),onClick:x},null,8,["text"])])])]),_:1})]),_:1}),l(U,{show:!h(s)&&f.value},bn({default:p(()=>[l(P,{class:"mb-3"},{default:p(()=>[l(H,null,{default:p(()=>[l(z,{text:E.$t("core::update.system")},null,8,["text"])]),_:1}),l(V,null,{default:p(()=>[l(U,{show:!f.value},{default:p(()=>[i.value.is_new_version_available?(g(),D("div",wW,[_("div",xW,[_("div",kW,[ne(_("h4",$W,null,512),[[ce,"core::update.installed_version"]]),_("h5",{textContent:Z(i.value.installed_version)},null,8,CW)]),_("div",SW,[ne(_("h4",TW,null,512),[[ce,"core::update.latest_version"]]),_("h5",{textContent:Z(i.value.latest_available_version)},null,8,EW)])])])):(g(),D("div",FW,[ne(l(N,{class:"text-center"},{default:p(()=>[l(j,{icon:"EmojiHappy",class:"m-auto mb-2 size-10 text-success-500"}),le(" "+Z(E.$t("core::update.not_available")),1)]),_:1},512),[[pe,f.value]]),ne(l(L,{class:"text-center",text:E.$t("core::update.using_latest_version")},null,8,["text"]),[[pe,f.value]])]))]),_:1},8,["show"])]),_:1}),l(ee,{class:"text-right"},{default:p(()=>[l(B,{variant:"success",text:b.value,disabled:!k.value||c.value||m.value!==!1,onClick:C},null,8,["text","disabled"])]),_:1})]),_:1})]),_:2},[h(s)?void 0:{name:"overlay",fn:p(()=>[le(Z(E.$t("core::update.update_zip_is_required")),1)]),key:"0"}]),1032,["show"]),l(U,{show:!h(s)&&f.value},bn({default:p(()=>[l(P,null,{default:p(()=>[l(H,null,{default:p(()=>[l(z,{text:E.$t("core::update.patches")},null,8,["text"])]),_:1}),l(U,{show:!f.value},{default:p(()=>[y.value?(g(),D("ul",AW,[(g(!0),D(fe,null,Ie(v.value,(ie,Q)=>(g(),D("li",{key:ie.token,class:"px-4 py-4 sm:px-6"},[_("div",RW,[_("div",null,[l(G,{class:"font-medium",innerHTML:ie.description},null,8,["innerHTML"]),ie.isApplied?(g(),A(W,{key:0,class:"mr-1",variant:"success",text:E.$t("core::update.patch_applied")},null,8,["text"])):K("",!0),l(W,{text:ie.token},null,8,["text"]),l(ae,{class:"ml-2.5 inline"},{default:p(()=>[le(Z(h(a)(ie.date)),1)]),_:2},1024),DW]),_("div",OW,[l(ue,{href:"/patches/"+ie.token+"/"+i.value.purchase_key,class:be(["mr-3",{"pointer-events-none opacity-70":Q>0||m.value!==!1||!w.value||!h(s)||c.value||ie.isApplied}])},{default:p(()=>[l(j,{icon:"DocumentDownload",class:"size-5"})]),_:2},1032,["href","class"]),ne((g(),D("span",BW,[l(B,{disabled:Q>0||m.value!==!1||!w.value||!h(s)||c.value||ie.isApplied,small:"",onClick:se=>S(ie.token,Q)},{default:p(()=>[le(Z(m.value===Q?E.$t("core::update.update_in_progress"):E.$t("core::app.apply")),1)]),_:2},1032,["disabled","onClick"])])),[[oe,Q===0||ie.isApplied?null:E.$t("core::update.apply_oldest_first")]])])])]))),128))])):(g(),A(V,{key:1},{default:p(()=>[ne(l(L,{class:"text-center",text:E.$t("core::update.no_patches")},null,8,["text"]),[[pe,f.value]])]),_:1}))]),_:1},8,["show"])]),_:1})]),_:2},[h(s)?void 0:{name:"overlay",fn:p(()=>[le(Z(E.$t("core::update.patch_zip_is_required")),1)]),key:"0"}]),1032,["show"])],64)}}},PW={class:"mx-auto max-w-2xl p-4"},MW=["textContent"],VW={key:1,class:"mt-3"},LW={class:"border-t border-neutral-200 bg-neutral-50 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-800"},qW={class:"flex items-center justify-end"},UW={__name:"WorkflowsForm",props:{show:Boolean,workflow:{required:!0,type:Object},triggers:{required:!0,type:Array}},emits:["update:workflow","deleteRequested","hide"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{fields:r,findField:s,hydrateFields:i}=yn(),{form:u}=Ze(),c=M(null),m=M(null);$e(m,(E,$)=>{if($&&$.fields){const F=f.value;$.fields.forEach(R=>{(!F||F&&R.attribute!==c.value.change_field.attribute)&&Et(r.value,["attribute",R.attribute])!==-1&&r.value.splice(Et(r.value,["attribute",R.attribute]),1)})}E&&E.fields&&E.fields.forEach(F=>{s(F.attribute)||r.value.push(Mo(F))})});const f=O(()=>c.value?!!c.value.change_field:!1),v=O(()=>m.value?m.value.fields.length>0:!1);function y(){u.put(`/workflows/${n.workflow.id}`).then(E=>{o("update:workflow",{...E,key:n.workflow.key}),o("hide"),Innoclapps.success(a("core::workflow.updated"))})}function b(){u.post("/workflows").then(E=>{o("update:workflow",{...E,key:n.workflow.key}),o("hide"),Innoclapps.success(a("core::workflow.created"))})}async function w(){await ze(),n.workflow.id?y():b()}function k(E){m.value=null,S({title:u.title,description:u.description,is_active:u.is_active}),r.value=f.value?[E.change_field]:[],u.fill("trigger_type",E.identifier)}function x(E){u.fill("action_type",E.identifier||null)}function I(){if(n.workflow.id){o("hide");return}C()}function C(){o("deleteRequested",n.workflow)}function S(E={}){u.clear().set({trigger_type:E.trigger||null,action_type:E.action||null,title:E.title||null,description:E.description||null,is_active:E.is_active||!0})}function T(){c.value=ut(n.triggers,["identifier",n.workflow.trigger_type]),m.value=ut(c.value.actions,["identifier",n.workflow.action_type]);let E=v.value?Mo(m.value.fields):[];f.value&&E.push(c.value.change_field),E=E.map($=>($.id=$.attribute+"-"+n.index,$)),r.value.length||(r.value=E),i(n.workflow.data)}return Je(()=>{S({title:n.workflow.title,description:n.workflow.description,is_active:n.workflow.is_active,trigger:n.workflow.trigger_type,action:n.workflow.action_type}),n.workflow.id&&T()}),(E,$)=>{const F=d("IFormInput"),R=d("IFormError"),B=d("IFormGroup"),V=d("IFormTextarea"),P=d("ICustomSelect"),z=d("FormFields"),H=d("ITextDark"),j=d("IFormSwitchLabel"),N=d("IFormSwitch"),L=d("IFormSwitchField"),U=d("IButton");return g(),D("form",{onSubmit:ot(w,["prevent"])},[_("div",PW,[_("h2",{class:"mb-4 text-lg font-medium text-neutral-700 dark:text-neutral-200",textContent:Z(e.workflow.title)},null,8,MW),l(B,{"label-for":"title",label:E.$t("core::workflow.title"),required:""},{default:p(()=>[l(F,{id:"title",modelValue:h(u).title,"onUpdate:modelValue":$[0]||($[0]=ee=>h(u).title=ee)},null,8,["modelValue"]),l(R,{error:h(u).getError("title")},null,8,["error"])]),_:1},8,["label"]),l(B,{class:"mb-4","label-for":"description",label:E.$t("core::workflow.description"),optional:""},{default:p(()=>[l(V,{id:"description",modelValue:h(u).description,"onUpdate:modelValue":$[1]||($[1]=ee=>h(u).description=ee),rows:"2"},null,8,["modelValue"]),l(R,{error:h(u).getError("description")},null,8,["error"])]),_:1},8,["label"]),l(B,{label:E.$t("core::workflow.when"),required:""},{default:p(()=>[l(P,{modelValue:c.value,"onUpdate:modelValue":$[2]||($[2]=ee=>c.value=ee),"input-id":"trigger",label:"name",clearable:!1,options:e.triggers,onOptionSelected:k},null,8,["modelValue","options"]),l(R,{error:h(u).getError("trigger_type")},null,8,["error"])]),_:1},8,["label"]),f.value?(g(),A(B,{key:0,label:E.$t("core::workflow.field_change_to"),required:""},{default:p(()=>[l(z,{fields:h(r),form:h(u),only:c.value.change_field.attribute,onUpdateFieldValue:$[3]||($[3]=ee=>h(u).fill(ee.attribute,ee.value)),onSetInitialValue:$[4]||($[4]=ee=>h(u).set(ee.attribute,ee.value))},null,8,["fields","form","only"])]),_:1},8,["label"])):K("",!0),c.value?(g(),A(B,{key:1,class:be({"mt-3":f.value}),label:E.$t("core::workflow.then"),required:""},{default:p(()=>{var ee;return[c.value?(g(),A(P,{key:0,modelValue:m.value,"onUpdate:modelValue":$[5]||($[5]=G=>m.value=G),"input-id":"action",label:"name",clearable:!1,options:c.value.actions,onOptionSelected:x},null,8,["modelValue","options"])):K("",!0),l(R,{error:h(u).getError("action_type")},null,8,["error"]),(ee=m.value)!=null&&ee.placeholders&&m.value.placeholders.length>0?(g(),D("div",VW,[l(H,{class:"mb-1 font-medium",text:E.$t("core::mail_template.placeholders.placeholders")},null,8,["text"]),l(RI,{placeholders:m.value.placeholders},null,8,["placeholders"])])):K("",!0)]}),_:1},8,["class","label"])):K("",!0),v.value?(g(),A(B,{key:2},{default:p(()=>[l(z,{fields:h(r),form:h(u),except:f.value?c.value.change_field.attribute:[],onUpdateFieldValue:$[6]||($[6]=ee=>h(u).fill(ee.attribute,ee.value)),onSetInitialValue:$[7]||($[7]=ee=>h(u).set(ee.attribute,ee.value))},null,8,["fields","form","except"])]),_:1})):K("",!0)]),_("div",LW,[_("div",qW,[l(L,{class:"mr-4 border-r border-neutral-200 pr-4 dark:border-neutral-500/30"},{default:p(()=>[l(j,{text:E.$t("core::app.active")},null,8,["text"]),l(N,{modelValue:h(u).is_active,"onUpdate:modelValue":$[8]||($[8]=ee=>h(u).is_active=ee)},null,8,["modelValue"])]),_:1}),l(U,{variant:"secondary",text:E.$t("core::app.cancel"),onClick:I},null,8,["text"]),l(U,{class:"ml-2",variant:"primary",disabled:h(u).busy,text:E.$t("core::app.save"),onClick:w},null,8,["disabled","text"])])])],32)}}},jW={class:"flex items-center px-4 py-5 sm:px-6"},zW={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},HW={class:"truncate"},WW={class:"flex"},GW={class:"sm:flex sm:items-center sm:space-x-4"},KW={class:"mt-2 shrink-0 sm:ml-5 sm:mt-0"},ZW={__name:"WorkflowsListItem",props:{triggers:{required:!0,type:Array},workflow:{required:!0,type:Object}},emits:["update:workflow","deleteRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{localizedDateTime:r}=rt(),s=M(!1);function i(c){Innoclapps.request().put(`/workflows/${n.workflow.id}`,{...n.workflow,data:{},...n.workflow.data,is_active:c}).then(({data:m})=>{o("update:workflow",{...m,key:n.workflow.key}),Innoclapps.success(a("core::workflow.updated"))})}function u(){o("deleteRequested",n.workflow)}return n.workflow.id||(s.value=!0),(c,m)=>{const f=d("Icon"),v=d("ILink"),y=d("ITextDark"),b=d("IText"),w=d("IFormSwitchLabel"),k=d("IFormSwitch"),x=d("IFormSwitchField"),I=d("IDropdownItem"),C=d("IDropdownMinimal");return g(),D(fe,null,[s.value?(g(),A(UW,{key:0,workflow:e.workflow,triggers:e.triggers,onHide:m[0]||(m[0]=S=>s.value=!1),"onUpdate:workflow":m[1]||(m[1]=S=>c.$emit("update:workflow",S)),onDeleteRequested:m[2]||(m[2]=S=>c.$emit("deleteRequested",S))},null,8,["workflow","triggers"])):K("",!0),_("div",{class:be({"opacity-70":!e.workflow.is_active,hidden:s.value})},[_("div",jW,[_("div",zW,[_("div",HW,[_("div",WW,[l(v,{class:"flex items-center truncate font-medium",onClick:m[3]||(m[3]=S=>s.value=!0)},{default:p(()=>[le(Z(e.workflow.title)+" ",1),l(f,{icon:"ArrowRight",class:"ml-1 size-4"})]),_:1})]),_("div",GW,[l(y,null,{default:p(()=>[le(Z(c.$t("core::workflow.total_executions",{total:e.workflow.total_executions||0})),1)]),_:1}),e.workflow.created_at?(g(),A(b,{key:0,class:"truncate"},{default:p(()=>[le(Z(c.$t("core::app.created_at"))+": "+Z(h(r)(e.workflow.created_at)),1)]),_:1})):K("",!0)])]),_("div",KW,[l(x,null,{default:p(()=>[l(w,{text:c.$t("core::app.active")},null,8,["text"]),l(k,{"model-value":e.workflow.is_active,onChange:i},null,8,["model-value"])]),_:1})])]),l(C,{class:"ml-2 shrink-0 self-start sm:self-auto"},{default:p(()=>[l(I,{icon:"PencilAlt",text:c.$t("core::app.edit"),onClick:m[4]||(m[4]=S=>s.value=!0)},null,8,["text"]),l(I,{icon:"Trash",text:c.$t("core::app.delete"),onClick:u},null,8,["text"])]),_:1})])],2)],64)}}},YW={__name:"WorkflowsList",setup(e){const{t}=Ee(),n=M([]),o=M([]),a=M(!1),r=O(()=>Vt(o.value,[y=>y.id==null?0:1,y=>y.is_active?1:0,"title"],["asc","desc","asc"])),s=O(()=>o.value.filter(y=>!y.id).length>0),i=O(()=>o.value.length>0);function u(){o.value.unshift({key:$o(),title:"",description:null,is_active:!1,trigger_type:null,action_type:null})}function c(y){o.value.splice(Et(o.value,["key",y]),1)}function m(y){let b=Et(o.value,["key",y.key]);o.value[b]=y}function f(y){y.id?Innoclapps.confirm().then(()=>v(y)):c(y.key)}function v(y){Innoclapps.request().delete(`/workflows/${y.id}`).then(()=>{c(y.key),Innoclapps.success(t("core::workflow.deleted"))})}return Promise.all([Innoclapps.request("/workflows"),Innoclapps.request("/workflows/triggers")]).then(y=>{o.value.push(...y[0].data.map(b=>({...b,key:$o()}))),n.value=y[1].data,a.value=!0}),(y,b)=>{const w=d("ICardHeading"),k=d("IButton"),x=d("ICardActions"),I=d("ICardHeader"),C=d("IEmptyState"),S=d("ICardBody"),T=d("ICard");return g(),D(fe,null,[l(I,null,{default:p(()=>[l(w,{text:y.$t("core::workflow.workflows")},null,8,["text"]),l(x,null,{default:p(()=>[ne(l(k,{variant:"primary",icon:"PlusSolid",disabled:s.value,text:y.$t("core::workflow.create"),onClick:u},null,8,["disabled","text"]),[[pe,i.value]])]),_:1})]),_:1}),l(T,{overlay:!a.value},{default:p(()=>[a.value?(g(),D(fe,{key:0},[i.value?(g(),A(li,{key:0,name:"flip-list",tag:"ul",class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},{default:p(()=>[(g(!0),D(fe,null,Ie(r.value,E=>(g(),D("li",{key:E.key},[l(ZW,{workflow:E,triggers:n.value,"onUpdate:workflow":m,onDeleteRequested:f},null,8,["workflow","triggers"])]))),128))]),_:1})):(g(),A(S,{key:1},{default:p(()=>[l(C,{"button-text":y.$t("core::workflow.create"),description:y.$t("core::workflow.info"),onClick:u},null,8,["button-text","description"])]),_:1}))],64)):K("",!0)]),_:1},8,["overlay"])],64)}}};function DI(){const e=M([]);let t=null;async function n(){const{data:a}=await Innoclapps.request("/cards",{cancelToken:new Kr(r=>t=r)});e.value=a}function o(a,r){return Tn(a,(s,i)=>{let u=ut(r.cards,["key",s.uriKey]);return s.order=u&&Object.hasOwn(u,"order")?u.order:i+1,s.enabled=!!(!u||u.enabled||typeof u.enabled>"u"),s})}return En(()=>{t&&t()}),{cards:e,fetchCards:n,applyUserConfig:o}}const XW={class:"mx-auto max-w-7xl lg:max-w-6xl"},QW={class:"pointer-events-none block h-full w-full opacity-70"},JW={__name:"DashboardsEdit",setup(e){const{t}=Ee(),n=_t(),o=It(),a=cn(),{currentUser:r}=Ne(),{cards:s,fetchCards:i,applyUserConfig:u}=DI(),c=bo(),m=M({}),f=M(!1),{form:v}=Ze({cards:[],name:null,is_default:!1}),y=O(()=>r.value.dashboards),b=O(()=>y.value.length),w=O(()=>ut(y.value,["id",parseInt(o.params.id)])),k=O(()=>u(s.value,w.value)),x=O(()=>b.value===1?!0:b.value>1&&w.value.is_default===!1);function I(){v.set("cards",k.value.map(S=>({key:S.uriKey,order:S.order,enabled:m.value[S.uriKey]}))),v.put(`/dashboards/${w.value.id}`).then(S=>{Innoclapps.success(t("core::dashboard.updated")),a.commit("users/UPDATE_DASHBOARD",S),n.push({name:"dashboard"})})}async function C(){if(!w.value){n.push({name:"not-found"});return}await i(),await ze(),k.value.forEach(S=>{m.value[S.uriKey]=S.enabled}),c.value=w.value.name,v.set("name",w.value.name),v.set("is_default",w.value.is_default),f.value=!0}return C(),(S,T)=>{const E=d("NavbarSeparator"),$=d("IButton"),F=d("IFormInput"),R=d("IFormError"),B=d("IFormGroup"),V=d("IFormCheckbox"),P=d("IFormCheckboxLabel"),z=d("IFormCheckboxField"),H=d("IOverlay"),j=d("IText"),N=d("MainLayout");return g(),A(N,{class:"dashboard-edit"},{actions:p(()=>[ne(l(E,{class:"hidden lg:block"},null,512),[[pe,f.value]]),ne(l($,{variant:"primary",disabled:h(v).busy,text:S.$t("core::app.save"),onClick:I},null,8,["disabled","text"]),[[pe,f.value]])]),default:p(()=>[_("div",XW,[_("form",{onSubmit:ot(I,["prevent"])},[l(H,{show:!f.value},{default:p(()=>[l(B,{"label-for":"dashboard-name",label:S.$t("core::dashboard.name"),required:""},{default:p(()=>[l(F,{id:"dashboard-name",modelValue:h(v).name,"onUpdate:modelValue":T[0]||(T[0]=L=>h(v).name=L)},null,8,["modelValue"]),l(R,{error:h(v).getError("name")},null,8,["error"])]),_:1},8,["label"]),x.value?(g(),A(B,{key:0},{default:p(()=>[l(z,null,{default:p(()=>[l(V,{checked:h(v).is_default,"onUpdate:checked":T[1]||(T[1]=L=>h(v).is_default=L)},null,8,["checked"]),l(P,{text:S.$t("core::dashboard.default")},null,8,["text"])]),_:1}),l(R,{error:h(v).getError("is_default")},null,8,["error"])]),_:1})):K("",!0)]),_:1},8,["show"]),(g(!0),D(fe,null,Ie(k.value,L=>(g(),D("div",{key:L.uriKey,class:"mb-6 mt-8"},[l(z,{class:"mb-2"},{default:p(()=>[l(V,{checked:m.value[L.uriKey],"onUpdate:checked":U=>m.value[L.uriKey]=U},null,8,["checked","onUpdate:checked"]),l(P,{text:S.$t("core::dashboard.cards.enabled")},null,8,["text"])]),_:2},1024),L.description?(g(),A(j,{key:0,class:"my-2",text:L.description},null,8,["text"])):K("",!0),_("div",QW,[(g(),A(Rt(L.component),{card:L},null,8,["card"]))])]))),128))],32)])]),_:1})}}};var cb=ql,eG=fi,tG=Fn,db=cb?cb.isConcatSpreadable:void 0;function nG(e){return tG(e)||eG(e)||!!(db&&e&&e[db])}var oG=nG,aG=Vp,rG=oG;function OI(e,t,n,o,a){var r=-1,s=e.length;for(n||(n=rG),a||(a=[]);++r<s;){var i=e[r];t>0&&n(i)?t>1?OI(i,t-1,n,o,a):aG(a,i):o||(a[a.length]=i)}return a}var Zc=OI,lG=Zc,sG=AI,iG=Wc,mb=II,uG=iG(function(e,t){if(e==null)return[];var n=t.length;return n>1&&mb(e,t[0],t[1])?t=[]:n>2&&mb(t[0],t[1],t[2])&&(t=[t[0]]),sG(e,lG(t,1),[])}),cG=uG;const Xr=Bt(cG),dG=_("div",{class:"mt-2 flex"},[_("div",{class:"mr-10 h-5 grow rounded bg-neutral-200 dark:bg-neutral-800"}),_("div",{class:"h-5 w-36 rounded bg-neutral-200 dark:bg-neutral-800"})],-1),Sa={__name:"CardPlaceholder",props:{pulse:Boolean,size:{type:String,default:"md"}},setup(e){return(t,n)=>{const o=d("ICardBody"),a=d("ICard");return g(),A(a,{class:be({"h-56 md:h-52":e.size==="md","h-64":e.size==="lg","animate-pulse":e.pulse})},{default:p(()=>[l(o,null,{default:p(()=>[dG,_("div",{class:be(["mt-7 w-full bg-neutral-200 dark:bg-neutral-800",{"h-28":e.size==="md","h-40":e.size==="lg"}])},null,2)]),_:1})]),_:1},8,["class"])}}},mG={class:"flex items-center space-x-3 lg:space-x-5"},fG=["textContent"],pG={key:0,class:"before:box-inherit after:box-inherit columns-1 gap-x-6 lg:columns-2"},vG={class:"mb-8 break-inside-avoid sm:mb-5"},hG={class:"relative"},gG={class:"card-drag-handle absolute left-3 top-5 ml-px mt-0.5 inline-flex items-center justify-center text-neutral-500 dark:text-neutral-300 sm:left-1"},fb={__name:"DashboardsIndex",setup(e){const{t}=Ee(),n=_t(),o=cn(),{currentUser:a}=Ne(),{cards:r,fetchCards:s,applyUserConfig:i}=DI(),{form:u}=Ze({name:""}),c=M([]),m=M({}),f=O(()=>r.value.length>0),v=O(()=>Xr(Vo(i(r.value,m.value),"enabled"),["order","asc"])),y=O(()=>Vt(a.value.dashboards,["is_default","name"],["desc","asc"])||[]),b=O(()=>ut(y.value,["is_default",!0])||y.value[0]);function w(S){n.push({name:"edit-dashboard",params:{id:S.id}})}function k(){u.post("/dashboards").then(S=>{Innoclapps.success(t("core::dashboard.created")),o.commit("users/ADD_DASHBOARD",S),w(S)})}function x(S){m.value=S,ze(()=>c.value=v.value)}function I(){let T=i(r.value,m.value).map(E=>{let $=Et(c.value,["uriKey",E.uriKey]);return{key:E.uriKey,enabled:E.enabled,order:$===-1?E.order:$+1}});Innoclapps.request().put(`/dashboards/${m.value.id}`,{cards:T}).then(({data:E})=>{x(E),o.commit("users/UPDATE_DASHBOARD",E)})}async function C(S){await Innoclapps.request().delete(`/dashboards/${S.id}`),Innoclapps.success(t("core::dashboard.deleted")),o.commit("users/REMOVE_DASHBOARD",S.id),x(b.value)}return Je(()=>{s().then(()=>{ze(()=>{x(b.value)})})}),(S,T)=>{const E=d("NavbarSeparator"),$=d("IDropdownItem"),F=d("IDropdownMinimal"),R=d("IDropdownButton"),B=d("IDropdownMenu"),V=d("IDropdown"),P=d("Icon"),z=d("SortableDraggable"),H=d("IFormInput"),j=d("IFormError"),N=d("IFormGroup"),L=d("IModal"),U=d("MainLayout");return g(),A(U,null,{actions:p(()=>[l(E,{class:"hidden lg:block"}),_("div",mG,[l(F,{placement:"bottom-end",horizontal:""},{default:p(()=>[l($,{icon:"PencilAlt",text:S.$t("core::dashboard.edit_current"),onClick:T[0]||(T[0]=ee=>w(m.value))},null,8,["text"]),l($,{icon:"Plus",text:S.$t("core::dashboard.new_dashboard"),onClick:T[1]||(T[1]=ee=>S.$dialog.show("newDashboard"))},null,8,["text"]),l($,{icon:"Trash",text:S.$t("core::dashboard.delete_current"),onClick:T[2]||(T[2]=ee=>S.$confirm(()=>C(m.value)))},null,8,["text"])]),_:1}),l(V,{placement:"bottom-end"},{default:p(()=>[l(R,{icon:m.value.is_default?"Star":void 0,class:be(["max-w-72 sm:max-w-[13rem]",f.value?"":"pointer-events-none blur"]),active:m.value.is_default||y.value.length===0,basic:""},{default:p(()=>[_("span",{class:"truncate",textContent:Z(f.value?m.value.name:"Dashboard")},null,8,fG)]),_:1},8,["icon","class","active"]),l(B,null,{default:p(()=>[(g(!0),D(fe,null,Ie(y.value,ee=>(g(),A($,{key:ee.id,text:ee.name,active:ee.id===m.value.id,onClick:G=>x(ee)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])]),default:p(()=>[f.value?K("",!0):(g(),D("div",pG,[T[3]||(je(-1),T[3]=l(Sa,{class:"mb-5",pulse:""}),je(1),T[3]),T[4]||(je(-1),T[4]=l(Sa,{class:"mb-5",size:"lg",pulse:""}),je(1),T[4]),T[5]||(je(-1),T[5]=l(Sa,{class:"mb-5",pulse:""}),je(1),T[5]),T[6]||(je(-1),T[6]=l(Sa,{class:"mb-5",pulse:""}),je(1),T[6]),T[7]||(je(-1),T[7]=l(Sa,{class:"mb-5",size:"lg",pulse:""}),je(1),T[7]),T[8]||(je(-1),T[8]=l(Sa,{class:"mb-5",size:"lg",pulse:""}),je(1),T[8]),T[9]||(je(-1),T[9]=l(Sa,{class:"mb-5",pulse:""}),je(1),T[9]),T[10]||(je(-1),T[10]=l(Sa,{class:"mb-5",pulse:""}),je(1),T[10])])),l(z,Ue({modelValue:c.value,"onUpdate:modelValue":T[11]||(T[11]=ee=>c.value=ee),handle:".card-drag-handle",class:"before:box-inherit after:box-inherit columns-1 gap-x-6 lg:columns-2","item-key":"uriKey"},S.$draggable.common,{onChange:I}),{item:p(({element:ee})=>[_("div",vG,[_("div",hG,[_("div",gG,[l(P,{icon:"Selector",class:"size-4 cursor-move"})]),(g(),A(Rt(ee.component),{card:ee},null,8,["card"]))])])]),_:1},16,["modelValue"]),l(L,{id:"newDashboard",size:"sm","ok-text":S.$t("core::app.create"),"ok-disabled":h(u).busy,title:S.$t("core::dashboard.create"),form:"",onSubmit:k,onShown:T[13]||(T[13]=()=>S.$refs.inputNameRef.focus())},{default:p(()=>[l(N,{"label-for":"dashboard-name",label:S.$t("core::dashboard.name"),required:""},{default:p(()=>[l(H,{id:"dashboard-name",ref:"inputNameRef",modelValue:h(u).name,"onUpdate:modelValue":T[12]||(T[12]=ee=>h(u).name=ee)},null,8,["modelValue"]),l(j,{error:h(u).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["ok-text","ok-disabled","title"])]),_:1})}}},bG={},yG={class:"mt-20 flex flex-col flex-wrap content-center"},_G={class:"flex flex-col items-center"},IG=_("h1",{class:"mb-2 mt-6 text-3xl font-bold text-neutral-900 dark:text-white"}," 403! ",-1),wG=_("h2",{class:"text-2xl text-neutral-700 dark:text-neutral-100"}," Hang on... ",-1),xG={class:"flex flex-col justify-center"},kG={class:"mt-5 text-center text-neutral-700 dark:text-neutral-200"},$G={class:"mt-5 text-center"};function CG(e,t){const n=d("Icon"),o=d("IButton"),a=d("MainLayout");return g(),A(a,{"no-padding":""},{default:p(()=>[_("div",yG,[_("div",_G,[l(n,{icon:"ShieldExclamation",class:"h-20 w-20 text-primary-300"}),IG,wG]),_("div",xG,[_("p",kG,Z(e.$route.query.message||"You are not authorized to perform this action or view this page."),1),_("div",$G,[l(o,{to:"/dashboard",variant:"primary"},{default:p(()=>[le(" Go to dashboard ")]),_:1})])])])]),_:1})}const SG=fn(bG,[["render",CG]]),TG={},EG={class:"mt-20 flex flex-col flex-wrap content-center"},FG={class:"flex flex-col items-center"},AG=_("h1",{class:"mb-2 mt-6 text-3xl font-bold text-neutral-900 dark:text-white"}," Oops! ",-1),RG=_("h2",{class:"text-2xl text-neutral-700 dark:text-neutral-100"}," Page not found ",-1),DG={class:"flex flex-col justify-center"},OG=_("p",{class:"mt-5 text-neutral-700 dark:text-neutral-300"}," The page you are trying to view does not exists or you don't have permissions to access it. ",-1),BG={class:"mt-5 text-center"};function NG(e,t){const n=d("Icon"),o=d("IButton"),a=d("MainLayout");return g(),A(a,{"no-padding":""},{default:p(()=>[_("div",EG,[_("div",FG,[l(n,{icon:"QuestionMarkCircle",class:"h-20 w-20 text-primary-300"}),AG,RG]),_("div",DG,[OG,_("div",BG,[l(o,{variant:"primary",to:{name:"dashboard"}},{default:p(()=>[le(" Go to dashboard ")]),_:1})])])])]),_:1})}const pb=fn(TG,[["render",NG]]),PG={class:"mt-3 flex justify-center"},gr={__name:"InfinityLoader",props:{scrollElement:String,debounce:{type:[Number,Boolean,String],default:200},offset:{type:Number,default:0},loadWhenMounted:Boolean},emits:["handle","loaded","complete","reset","pause","resume"],setup(e,{expose:t,emit:n}){const o=e,a=n,r={COMPLETE:"complete",LOADING:"loading",READY:"ready",PAUSED:"paused"},s=M(null),i=M(r.READY);let u=null,c=null;const m={loaded:()=>{a("loaded"),i.value=r.READY},complete:()=>{a("complete"),i.value=r.COMPLETE,b()},reset:()=>{a("reset"),i.value=r.READY,w()},pause:()=>{a("pause"),i.value=r.PAUSED,b()},resume:()=>{i.value===r.PAUSED&&(a("resume"),i.value=r.READY,w())}},f=O(()=>i.value===r.LOADING);function v(x){if(i.value===r.READY&&yA(s.value)){let I=x.target;x.target===document&&(I=I.scrollingElement||I.documentElement),I.scrollHeight-o.offset-I.scrollTop-I.clientHeight<1&&y()}}o.debounce?c=ga(v,o.debounce,{trailing:!0}):c=v;function y(x=!1){(i.value===r.READY||x===!0)&&(i.value=r.LOADING,a("handle",m))}function b(){u&&u.removeEventListener("scroll",c,v0())}function w(){u&&u.addEventListener("scroll",c,v0())}function k(){u=o.scrollElement?document.querySelector(o.scrollElement):window,o.loadWhenMounted&&y(),w()}return Je(()=>{ze(k)}),rn(b),t({attemptLoad:y,state:m}),(x,I)=>{const C=d("ISpinner");return g(),D("div",{ref_key:"rootElRef",ref:s},[Se(x.$slots,"default"),_("div",PG,[ne(l(C,{class:"size-4 text-primary-500"},null,512),[[pe,f.value]])])],512)}}};function BI(){const{currentUser:e}=Ne(),{t}=Ee(),n=cn(),o=M(!1),a=O(()=>e.value.notifications.unread_count),r=O(()=>a.value>0);function s(){n.commit("users/INCREMENT_TOTAL_UNREAD_NOTIFICATIONS")}function i(){n.commit("users/DECREMENT_TOTAL_UNREAD_NOTIFICATIONS")}async function u(v){o.value=!0;try{return await Innoclapps.request("/notifications",v)}finally{o.value=!1}}function c(v){return v.data.lang?t(v.data.lang.key,v.data.lang.attrs):v.data.message}async function m(){e.value.notifications.unread_count>0&&(await Innoclapps.request().put("/notifications"),n.commit("users/SET_TOTAL_UNREAD_NOTIFICATIONS",0))}async function f(v){await Innoclapps.request().put(`/notifications/${v}`),i()}return{totalUnreadNotifications:a,hasUnreadNotifications:r,notificationsBeingLoaded:o,fetchNotifications:u,incrementTotalUnreadNotifications:s,decrementTotalUnreadNotifications:i,localizeNotification:c,markAllNotificationsRead:m,markNotificationAsRead:f}}const MG={class:"mx-auto max-w-5xl"},VG={class:"flex items-center px-4 py-4 sm:px-6"},LG={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},qG={class:"truncate"},UG={__name:"NotificationsIndex",setup(e){const{localizeNotification:t,decrementTotalUnreadNotifications:n,markAllNotificationsRead:o,hasUnreadNotifications:a,fetchNotifications:r}=BI(),{localizedDateTime:s}=rt(),i=M([]),u=M(!1),c=M(1),m=M(!1),f=O(()=>i.value.length),v=O(()=>c.value>1);function y(){m.value=!0,o().finally(()=>{m.value=!1,i.value.forEach(x=>{x.read_at=new Date().toISOString()})})}async function b(x){await Innoclapps.confirm();const I=i.value[x];await Innoclapps.request().delete(`/notifications/${I.id}`),!I.read_at&&a.value&&n(),i.value.splice(x,1)}function w(x){const I=x.filter(C=>!i.value.some(S=>S.id===C.id));i.value.push(...I)}async function k(x){const{data:I}=await r({params:{page:c.value}});w(I.data),await ze(),I.total===f.value&&(u.value=!0,x.complete()),c.value+=1,x.loaded()}return Ut("new-notification",x=>i.value.unshift(x)),(x,I)=>{const C=d("ICardHeading"),S=d("IButton"),T=d("ICardActions"),E=d("ICardHeader"),$=d("ITextDark"),F=d("IText"),R=d("ILink"),B=d("Icon"),V=d("ICardBody"),P=d("ICard"),z=d("MainLayout");return g(),A(z,null,{default:p(()=>[_("div",MG,[l(E,null,{default:p(()=>[l(C,{text:x.$t("core::notifications.notifications")},null,8,["text"]),l(T,null,{default:p(()=>[ne(l(S,{variant:"secondary",loading:m.value,disabled:!h(a),text:x.$t("core::notifications.mark_all_as_read"),small:"",onClick:y},null,8,["loading","disabled","text"]),[[pe,f.value>0]])]),_:1})]),_:1}),l(P,null,{default:p(()=>[_("ul",null,[(g(!0),D(fe,null,Ie(i.value,(H,j)=>(g(),D("li",{key:H.id,class:"border-b border-neutral-200 dark:border-neutral-500/30"},[l(R,{class:"block hover:bg-neutral-50 dark:hover:bg-neutral-700/60",to:H.data.path,plain:""},{default:p(()=>[_("div",VG,[_("div",LG,[_("div",qG,[l($,{class:"truncate font-medium",text:h(t)(H)},null,8,["text"]),l(F,{text:h(s)(H.created_at)},null,8,["text"])])]),l(S,{class:"ml-5 shrink-0 self-start",icon:"Trash",basic:"",onClick:ot(N=>b(j),["prevent","stop"])},null,8,["onClick"])])]),_:2},1032,["to"])]))),128))]),l(gr,{"load-when-mounted":"",onHandle:k}),ne(l(V,{class:"text-center"},{default:p(()=>[l(B,{icon:"EmojiSad",class:"mx-auto size-12 text-neutral-400"}),l(F,{class:"mt-2",text:x.$t("core::notifications.no_notifications")},null,8,["text"])]),_:1},512),[[pe,f.value===0&&v.value]]),ne(l(F,{class:"pb-3 text-center",text:x.$t("core::notifications.no_more_notifications")},null,8,["text"]),[[pe,u.value&&f.value>0]])]),_:1})])]),_:1})}}},jG={class:"rounded-lg border border-neutral-200 px-5 py-4 shadow-sm dark:border-neutral-500/30"},zG={class:"flex flex-col sm:flex-row sm:items-center"},HG={class:"flex items-center"},WG={class:"mt-1.5 self-start"},GG={class:"ml-1 sm:ml-2"},KG=["textContent"],ZG=_("br",null,null,-1),YG={class:"ml-0 mt-2 shrink-0 grow sm:ml-auto sm:mt-0 sm:grow-0"},XG={class:"flex items-center sm:justify-center"},Xu={__name:"OAuthAccount",props:{account:{type:Object},withReconnectLink:{type:Boolean,default:!0}},setup(e){const t=e,n=It(),o=O(()=>n.name!=="oauth-accounts"&&t.withReconnectLink);return(a,r)=>{const s=d("Icon"),i=d("ITextBlock"),u=d("IButton");return g(),D("div",jG,[_("div",zG,[_("div",HG,[_("div",WG,[_("span",{class:be(["inline-flex size-6 items-center justify-center rounded-full p-1",[e.account.requires_auth?"bg-danger-500":"bg-success-500"]])},[l(s,{class:"size-5 text-white",icon:e.account.requires_auth?"XSolid":"Check"},null,8,["icon"])],2)]),_("div",GG,[_("span",{class:"text-sm font-medium text-neutral-700 dark:text-neutral-200",textContent:Z(e.account.email)},null,8,KG),ZG,e.account.requires_auth?(g(),A(i,{key:0,class:"text-warning-700 dark:text-warning-600"},{default:p(()=>[le(Z(a.$t("core::oauth.requires_authentication")),1)]),_:1})):K("",!0),Se(a.$slots,"after-name")])]),_("div",YG,[_("div",XG,[ne(l(u,{to:{name:"oauth-accounts",query:{reconnect:e.account.id}},text:a.$t("core::oauth.re_authenticate"),basic:""},null,8,["to","text"]),[[pe,o.value]]),Se(a.$slots,"default")])])])])}}},QG={class:"mx-auto max-w-5xl"},JG={key:0,class:"space-y-3"},eK={key:1,class:"py-10 text-center"},tK={__name:"OAuthAccounts",setup(e){const t=cn(),n=It(),{t:o}=Ee(),{appUrl:a}=Ne(),{setLoading:r,isLoading:s}=An(),i=M([]),u=O(()=>i.value.length>0);function c(v){window.location.href=`${a}/${v.type}/connect`}async function m(v){await Innoclapps.confirm(o("core::oauth.delete_warning")),await Innoclapps.request().delete(`oauth/accounts/${v}`);const y=Et(i.value,["id",parseInt(v)]);i.value.splice(y,1),t.commit("emailAccounts/RESET"),Innoclapps.success(o("core::oauth.deleted"))}async function f(){r(!0);try{const{data:v}=await Innoclapps.request("oauth/accounts");i.value=v,n.query.reconnect&&c(v.find(y=>y.id==n.query.reconnect))}finally{r(!1)}}return f(),(v,y)=>{const b=d("ICardHeading"),w=d("ICardHeader"),k=d("IButton"),x=d("Icon"),I=d("IText"),C=d("ICardBody"),S=d("ICard"),T=d("RouterView"),E=d("MainLayout");return g(),A(E,null,{default:p(()=>[_("div",QG,[l(w,null,{default:p(()=>[l(b,{text:v.$t("core::oauth.connected_accounts")},null,8,["text"])]),_:1}),l(S,{overlay:h(s)},{default:p(()=>[l(C,null,{default:p(()=>[u.value?(g(),D("div",JG,[(g(!0),D(fe,null,Ie(i.value,$=>(g(),A(Xu,{key:$.id,account:$},{default:p(()=>[l(k,{text:v.$t("core::oauth.re_authenticate"),basic:"",onClick:F=>c($)},null,8,["text","onClick"]),$.authorizations.delete?(g(),A(k,{key:0,class:"ml-1",icon:"Trash",basic:"",onClick:F=>m($.id)},null,8,["onClick"])):K("",!0)]),_:2},1032,["account"]))),128))])):ne((g(),D("div",eK,[l(x,{icon:"EmojiSad",class:"mx-auto mb-2 size-12 text-neutral-400"}),l(I,{text:v.$t("core::oauth.no_accounts")},null,8,["text"])],512)),[[pe,!h(s)]])]),_:1})]),_:1},8,["overlay"])]),l(T)]),_:1})}}},Zp="-";function nK(e){const t=aK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=e;function a(s){const i=s.split(Zp);return i[0]===""&&i.length!==1&&i.shift(),NI(i,t)||oK(s)}function r(s,i){const u=n[s]||[];return i&&o[s]?[...u,...o[s]]:u}return{getClassGroupId:a,getConflictingClassGroupIds:r}}function NI(e,t){var s;if(e.length===0)return t.classGroupId;const n=e[0],o=t.nextPart.get(n),a=o?NI(e.slice(1),o):void 0;if(a)return a;if(t.validators.length===0)return;const r=e.join(Zp);return(s=t.validators.find(({validator:i})=>i(r)))==null?void 0:s.classGroupId}const vb=/^\[(.+)\]$/;function oK(e){if(vb.test(e)){const t=vb.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function aK(e){const{theme:t,prefix:n}=e,o={nextPart:new Map,validators:[]};return lK(Object.entries(e.classGroups),n).forEach(([r,s])=>{Cf(s,o,r,t)}),o}function Cf(e,t,n,o){e.forEach(a=>{if(typeof a=="string"){const r=a===""?t:hb(t,a);r.classGroupId=n;return}if(typeof a=="function"){if(rK(a)){Cf(a(o),t,n,o);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([r,s])=>{Cf(s,hb(t,r),n,o)})})}function hb(e,t){let n=e;return t.split(Zp).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n}function rK(e){return e.isThemeGetter}function lK(e,t){return t?e.map(([n,o])=>{const a=o.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([s,i])=>[t+s,i])):r);return[n,a]}):e}function sK(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,o=new Map;function a(r,s){n.set(r,s),t++,t>e&&(t=0,o=n,n=new Map)}return{get(r){let s=n.get(r);if(s!==void 0)return s;if((s=o.get(r))!==void 0)return a(r,s),s},set(r,s){n.has(r)?n.set(r,s):a(r,s)}}}const PI="!";function iK(e){const t=e.separator,n=t.length===1,o=t[0],a=t.length;return function(s){const i=[];let u=0,c=0,m;for(let w=0;w<s.length;w++){let k=s[w];if(u===0){if(k===o&&(n||s.slice(w,w+a)===t)){i.push(s.slice(c,w)),c=w+a;continue}if(k==="/"){m=w;continue}}k==="["?u++:k==="]"&&u--}const f=i.length===0?s:s.substring(c),v=f.startsWith(PI),y=v?f.substring(1):f,b=m&&m>c?m-c:void 0;return{modifiers:i,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:b}}}function uK(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach(o=>{o[0]==="["?(t.push(...n.sort(),o),n=[]):n.push(o)}),t.push(...n.sort()),t}function cK(e){return{cache:sK(e.cacheSize),splitModifiers:iK(e),...nK(e)}}const dK=/\s+/;function mK(e,t){const{splitModifiers:n,getClassGroupId:o,getConflictingClassGroupIds:a}=t,r=new Set;return e.trim().split(dK).map(s=>{const{modifiers:i,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:m}=n(s);let f=o(m?c.substring(0,m):c),v=!!m;if(!f){if(!m)return{isTailwindClass:!1,originalClassName:s};if(f=o(c),!f)return{isTailwindClass:!1,originalClassName:s};v=!1}const y=uK(i).join(":");return{isTailwindClass:!0,modifierId:u?y+PI:y,classGroupId:f,originalClassName:s,hasPostfixModifier:v}}).reverse().filter(s=>{if(!s.isTailwindClass)return!0;const{modifierId:i,classGroupId:u,hasPostfixModifier:c}=s,m=i+u;return r.has(m)?!1:(r.add(m),a(u,c).forEach(f=>r.add(i+f)),!0)}).reverse().map(s=>s.originalClassName).join(" ")}function fK(){let e=0,t,n,o="";for(;e<arguments.length;)(t=arguments[e++])&&(n=MI(t))&&(o&&(o+=" "),o+=n);return o}function MI(e){if(typeof e=="string")return e;let t,n="";for(let o=0;o<e.length;o++)e[o]&&(t=MI(e[o]))&&(n&&(n+=" "),n+=t);return n}function pK(e,...t){let n,o,a,r=s;function s(u){const c=t.reduce((m,f)=>f(m),e());return n=cK(c),o=n.cache.get,a=n.cache.set,r=i,i(u)}function i(u){const c=o(u);if(c)return c;const m=mK(u,n);return a(u,m),m}return function(){return r(fK.apply(null,arguments))}}function _n(e){const t=n=>n[e]||[];return t.isThemeGetter=!0,t}const VI=/^\[(?:([a-z-]+):)?(.+)\]$/i,vK=/^\d+\/\d+$/,hK=new Set(["px","full","screen"]),gK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_K=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function $a(e){return Nr(e)||hK.has(e)||vK.test(e)}function Qa(e){return is(e,"length",EK)}function Nr(e){return!!e&&!Number.isNaN(Number(e))}function pu(e){return is(e,"number",Nr)}function Ss(e){return!!e&&Number.isInteger(Number(e))}function wK(e){return e.endsWith("%")&&Nr(e.slice(0,-1))}function Ot(e){return VI.test(e)}function Ja(e){return gK.test(e)}const xK=new Set(["length","size","percentage"]);function kK(e){return is(e,xK,LI)}function $K(e){return is(e,"position",LI)}const CK=new Set(["image","url"]);function SK(e){return is(e,CK,AK)}function TK(e){return is(e,"",FK)}function Ts(){return!0}function is(e,t,n){const o=VI.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):n(o[2]):!1}function EK(e){return bK.test(e)&&!yK.test(e)}function LI(){return!1}function FK(e){return _K.test(e)}function AK(e){return IK.test(e)}function RK(){const e=_n("colors"),t=_n("spacing"),n=_n("blur"),o=_n("brightness"),a=_n("borderColor"),r=_n("borderRadius"),s=_n("borderSpacing"),i=_n("borderWidth"),u=_n("contrast"),c=_n("grayscale"),m=_n("hueRotate"),f=_n("invert"),v=_n("gap"),y=_n("gradientColorStops"),b=_n("gradientColorStopPositions"),w=_n("inset"),k=_n("margin"),x=_n("opacity"),I=_n("padding"),C=_n("saturate"),S=_n("scale"),T=_n("sepia"),E=_n("skew"),$=_n("space"),F=_n("translate"),R=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Ot,t],P=()=>[Ot,t],z=()=>["",$a,Qa],H=()=>["auto",Nr,Ot],j=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],U=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",Ot],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Nr,pu],ae=()=>[Nr,Ot];return{cacheSize:500,separator:":",theme:{colors:[Ts],spacing:[$a,Qa],blur:["none","",Ja,Ot],brightness:W(),borderColor:[e],borderRadius:["none","","full",Ja,Ot],borderSpacing:P(),borderWidth:z(),contrast:W(),grayscale:ee(),hueRotate:ae(),invert:ee(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[wK,Qa],inset:V(),margin:V(),opacity:W(),padding:P(),saturate:W(),scale:W(),sepia:ee(),skew:ae(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ot]}],container:["container"],columns:[{columns:[Ja]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...j(),Ot]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ss,Ot]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ot]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Ss,Ot]}],"grid-cols":[{"grid-cols":[Ts]}],"col-start-end":[{col:["auto",{span:["full",Ss,Ot]},Ot]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Ts]}],"row-start-end":[{row:["auto",{span:[Ss,Ot]},Ot]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ot]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ot,t]}],"min-w":[{"min-w":[Ot,t,"min","max","fit"]}],"max-w":[{"max-w":[Ot,t,"none","full","min","max","fit","prose",{screen:[Ja]},Ja]}],h:[{h:[Ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ja,Qa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pu]}],"font-family":[{font:[Ts]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ot]}],"line-clamp":[{"line-clamp":["none",Nr,pu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$a,Ot]}],"list-image":[{"list-image":["none",Ot]}],"list-style-type":[{list:["none","disc","decimal",Ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$a,Qa]}],"underline-offset":[{"underline-offset":["auto",$a,Ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...j(),$K]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},SK]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:N()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[$a,Ot]}],"outline-w":[{outline:[$a,Qa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[$a,Qa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ja,TK]}],"shadow-color":[{shadow:[Ts]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":L()}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[o]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ja,Ot]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ot]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Ot]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ss,Ot]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$a,Qa,pu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const xt=pK(RK),vu={base:"text-base/6 no-underline sm:text-sm/6 focus:outline-none",basic:"text-neutral-800 hover:text-neutral-600 dark:text-neutral-100 dark:hover:text-neutral-200",variants:{primary:"text-primary-600 hover:text-primary-900 dark:text-primary-300 dark:hover:text-primary-400",info:"text-info-900 hover:text-info-700 dark:text-info-400 dark:hover:text-info-500",success:"text-success-900 hover:text-success-700 dark:text-success-400 dark:hover:text-success-500",danger:"text-danger-500 hover:text-danger-700 dark:text-danger-400 dark:hover:text-danger-500",warning:"text-warning-700 hover:text-warning-600 dark:text-warning-400 dark:hover:text-warning-500"}},Il=Object.assign({inheritAttrs:!1},{__name:"ILinkBase",props:{as:{type:[String,Object],default:"a"},basic:Boolean,plain:Boolean,variant:{type:String,default:"primary",validator:e=>Object.keys(vu.variants).includes(e)}},setup(e){return(t,n)=>(g(),A(Rt(e.as),Ue({class:h(xt)(e.plain?"":[vu.base,e.basic?vu.basic:vu.variants[e.variant??"primary"]],t.$attrs.class)},{...t.$attrs,class:""}),{default:p(()=>[Se(t.$slots,"default")]),_:3},16,["class"]))}}),DK=["data-active","disabled","tabindex"],OK=["primary","secondary","success","info","warning","danger"],Wn=Object.assign({inheritAttrs:!1},{__name:"IButton",props:{text:[String,Number],icon:String,to:[Object,String],active:Boolean,soft:Boolean,ghost:Boolean,pill:Boolean,basic:Boolean,disabled:Boolean,loading:Boolean,small:Boolean,block:Boolean,href:String,confirmable:Boolean,confirmText:{type:[String,Number],default:"Confirm"},confirmVariant:{type:String,default:"danger"},variant:{type:String,default:"secondary",validator:e=>OK.includes(e)}},emits:["click","confirmed"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=_t(),s=M(null),i=M(!1),u=O(()=>i.value?o.confirmVariant||o.variant:o.basic?null:o.variant),c=O(()=>["btn",{"btn-primary":u.value==="primary","btn-secondary":u.value==="secondary","btn-success":u.value==="success","btn-info":u.value==="info","btn-warning":u.value==="warning","btn-danger":u.value==="danger","btn-soft":o.soft,"btn-ghost":o.ghost,"btn-pill":o.pill,"btn-basic":o.basic&&!i.value,"btn-sm":o.small,"w-full":o.block}]);function m(y){if(o.confirmable){if(i.value===!1)return s.value.style.minWidth=s.value.offsetWidth+"px",i.value=!0,s.value.focus(),y.preventDefault(),y.stopPropagation(),!0;a("confirmed",y),i.value=!1,s.value.style.minWidth=null}}function f(y){o.disabled||m(y)||(o.to?r.push(o.to):a("click",y))}function v(){s.value.focus()}return t({focus:v}),(y,b)=>{const w=d("Icon"),k=d("ISpinner");return e.href?(g(),A(Il,Ue({key:0},y.$attrs,{href:e.href,class:c.value,"data-active":e.active||void 0,plain:""}),{default:p(()=>[e.icon?(g(),A(w,{key:0,icon:e.icon},null,8,["icon"])):K("",!0),Se(y.$slots,"default",{text:e.text},()=>[le(Z(e.text),1)])]),_:3},16,["href","class","data-active"])):(g(),D("button",Ue({key:1,ref_key:"elementRef",ref:s,type:"button","data-active":e.active||void 0,disabled:e.disabled||void 0,tabindex:e.disabled?"-1":void 0,class:c.value},y.$attrs,{onClick:f}),[e.icon?ne((g(),A(w,{key:0,icon:e.icon},null,8,["icon"])),[[pe,!e.loading&&!i.value]]):K("",!0),e.loading?(g(),A(k,{key:1})):K("",!0),Se(y.$slots,"default",{text:e.text,isBeingConfirmed:i.value},()=>[le(Z(i.value?e.confirmText:e.text),1)])],16,DK))}}}),BK={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},NK={class:"shrink-0"},PK={class:"min-w-0 flex-1 truncate"},MK={class:"block shrink-0 md:hidden md:group-hover:block"},VK={__name:"MediaUploadOutputList",props:{files:{type:Array,required:!0}},emits:["removeRequested"],setup(e){const{localizedDateTime:t}=rt();return(n,o)=>{const a=d("Icon"),r=d("ITextDark"),s=d("IText"),i=d("IButton");return g(),D("ul",BK,[(g(!0),D(fe,null,Ie(e.files,(u,c)=>(g(),D("li",{key:c+u.name,class:"group flex items-center space-x-3 py-3 last:pb-0"},[_("div",NK,[_("span",{class:be([u.xhr&&u.xhr.status>=400?"bg-danger-500 text-white":"",u.xhr&&u.xhr.status<400?"bg-success-500 text-white":"",u.xhr?"":"bg-neutral-600 text-neutral-100","inline-flex size-8 items-center justify-center rounded-full"])},[u.xhr&&u.xhr.status>=400?(g(),A(a,{key:0,icon:"XSolid",class:"size-5"})):u.xhr?(g(),A(a,{key:1,icon:"Check",class:"size-5"})):(g(),A(a,{key:2,icon:"CloudArrowUp",class:"size-5"}))],2)]),_("div",PK,[l(r,{class:"font-medium",text:u.name},null,8,["text"]),l(s,{text:h(t)(new Date)},null,8,["text"])]),_("div",MK,[ne(l(i,{icon:"XSolid",basic:"",small:"",onClick:m=>n.$emit("removeRequested",c)},null,8,["onClick"]),[[pe,!u.xhr||u.xhr.status>=400]])])]))),128))])}}},LK={class:"absolute inset-0 z-10 flex items-center justify-center rounded-lg bg-neutral-200"},qK={class:"ml-2 flex items-center space-x-2"},gb={base:"inline-flex items-center rounded-full border border-neutral-300 bg-white px-4 py-1 text-base/6 font-semibold text-neutral-700 dark:border-neutral-500/30 dark:bg-neutral-500/10 dark:text-white sm:text-sm/6",wrapper:"flex items-center"},Dl={__name:"MediaUpload",props:{modelValue:{},baseClasses:{type:[Object,Array,String],default:gb.base},wrapperClasses:{type:[Object,Array,String],default:gb.wrapper},inputId:{default:"media",type:String},actionUrl:String,name:{default:"file",type:String},extensions:[Array,String],accept:{type:String,default:void 0},uploadText:String,selectFileText:String,allowCancel:{type:Boolean,default:!0},showUploadButton:{type:Boolean,default:!0},showOutput:{default:!0,type:Boolean},automaticUpload:{default:!0,type:Boolean},multiple:{default:!0,type:Boolean},requestData:{type:Object,default:()=>({})},drop:Boolean},emits:["update:modelValue","fileAccepted","fileUploaded","clear"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{scriptConfig:r}=Ne(),s=M(null),i=M([]),u=M([]),c=O(()=>n.uploadText||a("core::app.upload")),m=O(()=>n.selectFileText||a("core::app.select_file"));function f(C){if(C.status===413){Innoclapps.error(a("core::app.file_too_large"));return}let S=JSON.parse(C.response),T=C.status<400;return S.message&&(T?Innoclapps.success(S.message):Innoclapps.error(S.message)),C.status===422&&(u.value=S.errors),S}function v(C){i.value.splice(C,1),o("update:modelValue",i.value)}function y(){s.value.clear(),u.value=[],o("clear")}function b(C){if(!n.extensions)return!0;let S=n.extensions;Array.isArray(S)?S=S.join("|"):typeof S=="string"&&(S=S.replace(",","|"));var T=RegExp(".("+S+")","i");return T.test(C.name)?!0:(Innoclapps.error(a("validation.mimes",{attribute:a("core::app.file").toLowerCase(),values:[S]})),!1)}function w(C,S){return C&&S}function k(C,S){return C.active!==S.active}function x(C,S){w(C,S)&&(k(C,S),C.progress,S.progress,C.error!==S.error&&C.xhr.response&&f(C.xhr),C.success!==S.success&&(o("fileUploaded",f(C.xhr)),v(Et(i.value,["name",C.name])))),n.automaticUpload&&(!!C!=!!S||S.error!==C.error)&&!s.value.active&&C&&!C.xhr&&(s.value.active=!0)}const I=function(C,S,T){if(C&&!S){if(!b(C))return T();if(C.size>=0&&C.size>r("max_upload_size"))return Innoclapps.error("File too big"),T();C.blob="";let E=window.URL||window.webkitURL;E&&E.createObjectURL&&(C.blob=E.createObjectURL(C.file)),ze(()=>o("fileAccepted",C))}};return(C,S)=>{const T=d("IAlertBody"),E=d("IAlert"),$=d("FileUpload"),F=Ve("t");return g(),D("div",null,[(g(!0),D(fe,null,Ie(u.value,(R,B)=>(g(),A(E,{key:B,class:"mb-4",variant:"danger"},{default:p(()=>[l(T,null,{default:p(()=>[le(Z(R),1)]),_:2},1024)]),_:2},1024))),128)),Se(C.$slots,"default"),e.showOutput?(g(),A(VK,{key:0,files:i.value,onRemoveRequested:v},null,8,["files"])):K("",!0),_("div",{class:be([e.wrapperClasses,"relative"])},[Se(C.$slots,"drop-placeholder",{upload:C.$refs.uploadRef},()=>[ne(_("div",LK,null,512),[[pe,C.$refs.uploadRef&&C.$refs.uploadRef.dropActive],[F,"core::app.drop_files"]])]),l($,{ref_key:"uploadRef",ref:s,modelValue:i.value,"onUpdate:modelValue":[S[0]||(S[0]=R=>i.value=R),S[1]||(S[1]=R=>C.$emit("update:modelValue",R))],class:be([e.baseClasses,s.value&&s.value.active?"pointer-events-none opacity-50":""]),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":C.$csrfToken},disabled:C.$refs.uploadRef&&C.$refs.uploadRef.active,name:e.name,multiple:e.multiple,extensions:e.extensions,accept:e.accept,data:e.requestData,drop:e.drop,"post-action":e.actionUrl,"input-id":e.inputId,onInputFile:x,onInputFilter:I},{default:p(()=>[Se(C.$slots,"upload-content",{},()=>[le(Z(m.value),1)])]),_:3},8,["modelValue","class","headers","disabled","name","multiple","extensions","accept","data","drop","post-action","input-id"]),_("div",qK,[Se(C.$slots,"upload-button",{upload:C.$refs.uploadRef},()=>[e.showUploadButton&&!e.automaticUpload?(g(),A(Wn,{key:0,variant:"primary",icon:"CloudArrowUp",text:c.value,soft:"",pill:"",onClick:S[2]||(S[2]=R=>C.$refs.uploadRef.active=!0)},null,8,["text"])):K("",!0)]),ne(l(Wn,{variant:"danger",text:C.$t("core::app.cancel"),soft:"",pill:"",onClick:S[3]||(S[3]=R=>C.$refs.uploadRef.active=!1)},null,8,["text"]),[[pe,e.allowCancel&&C.$refs.uploadRef&&C.$refs.uploadRef.active]]),ne(l(Wn,{text:C.$t("core::app.clear"),basic:"",pill:"",onClick:y},null,8,["text"]),[[pe,i.value.length>0&&(!C.$refs.uploadRef||!C.$refs.uploadRef.active)]])])],2)])}}},dm={__name:"ResourceImportStepItem",props:{index:{type:Number,required:!0}},setup(e){return(t,n)=>(g(),D("span",{class:be([e.index!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"])},[Se(t.$slots,"default")],2))}},UK={class:"shrink-0"},mm=Object.assign({inheritAttrs:!1},{__name:"ResourceImportStepItemCircle",setup(e){return(t,n)=>(g(),D("span",UK,[_("span",Ue({class:"flex size-10 items-center justify-center rounded-full"},t.$attrs),[Se(t.$slots,"default")],16)]))}}),jK={class:"ml-4 mt-0.5 flex min-w-0 flex-col"},zK=["textContent"],HK=["textContent"],fm={__name:"ResourceImportStepItemInfo",props:{step:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),D("span",jK,[_("span",{class:be(["text-sm font-semibold uppercase tracking-wide sm:text-xs",e.step.status==="complete"?"dark:text-primary-300":e.step.status==="current"?"text-primary-600 dark:text-primary-300":"text-neutral-500 dark:text-neutral-100",,]),textContent:Z(e.step.name)},null,10,zK),_("span",{class:"truncate text-base font-medium text-neutral-500 dark:text-neutral-200 sm:text-sm",textContent:Z(e.step.description)},null,8,HK)]))}},pm={__name:"ResourceImportStepTail",props:{isCurrent:{type:Boolean,default:!1}},setup(e){return(t,n)=>(g(),D("span",{"aria-hidden":"true",class:be(["absolute left-0 top-0 h-full w-1 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full",e.isCurrent?"bg-primary-600 dark:bg-primary-300":"bg-transparent"])},null,2))}},WK={class:"relative overflow-hidden lg:flex-1"},GK={key:0},KK={key:1,"aria-current":"step"},ZK={class:"text-primary-600 dark:text-primary-300"},YK={key:2},XK={class:"text-neutral-500 dark:text-neutral-300"},QK={key:3,class:"absolute inset-0 left-0 top-0 hidden w-3 lg:block","aria-hidden":"true"},JK=_("svg",{class:"h-full w-full text-neutral-300 dark:text-neutral-600",viewBox:"0 0 12 82",fill:"none",preserveAspectRatio:"none"},[_("path",{d:"M0.5 0V31L10.5 41L0.5 51V82",stroke:"currentcolor","vector-effect":"non-scaling-stroke"})],-1),eZ=[JK],tZ={__name:"ResourceImportStep",props:{step:{type:Object,required:!0},total:{type:Number,required:!0},index:{type:Number,required:!0}},setup(e){return(t,n)=>{const o=d("Icon");return g(),D("li",WK,[_("div",{class:be([e.index===0?"border-b-0":"",e.index===e.total-1?"border-t-0":"","overflow-hidden border-y border-neutral-200 dark:border-neutral-500/30 lg:border-0"])},[e.step.status==="complete"?(g(),D("div",GK,[l(pm),l(dm,{index:e.index},{default:p(()=>[l(mm,{class:be(e.index!==e.total-1?"bg-primary-600":"bg-success-500")},{default:p(()=>[l(o,{icon:"Check",class:"size-6 text-white"})]),_:1},8,["class"]),l(fm,{step:e.step},null,8,["step"])]),_:1},8,["index"])])):e.step.status==="current"?(g(),D("div",KK,[l(pm,{"is-current":""}),l(dm,{index:e.index},{default:p(()=>[l(mm,{class:"border-2 border-primary-600 dark:border-primary-300"},{default:p(()=>[_("span",ZK,Z(e.step.id),1)]),_:1}),l(fm,{step:e.step},null,8,["step"])]),_:1},8,["index"])])):(g(),D("div",YK,[l(pm),l(dm,{index:e.index},{default:p(()=>[l(mm,{class:"border-2 border-neutral-300 dark:border-neutral-400"},{default:p(()=>[_("span",XK,Z(e.step.id),1)]),_:1}),l(fm,{step:e.step},null,8,["step"])]),_:1},8,["index"])])),e.index!==0?(g(),D("div",QK,eZ)):K("",!0)],2)])}}},nZ={class:"-mt-px lg:border-b lg:border-t lg:border-neutral-200 lg:dark:border-neutral-500/30"},oZ={class:"mx-auto max-w-7xl lg:px-8","aria-label":"Progress"},aZ={role:"list",class:"overflow-hidden lg:flex lg:border-l lg:border-r lg:border-neutral-200 lg:dark:border-neutral-500/30"},rZ={__name:"ResourceImportSteps",props:{steps:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),D("div",nZ,[_("nav",oZ,[_("ol",aZ,[(g(!0),D(fe,null,Ie(e.steps,(o,a)=>(g(),A(tZ,{key:o.id,step:o,total:e.steps.length,index:a},null,8,["step","total","index"]))),128))])])]))}},lZ={class:"flex items-center space-x-2"},sZ={class:"text-base font-medium text-info-700 sm:text-sm"},iZ={key:3,class:"mt-5"},uZ={class:"flex"},cZ={class:"w-1/2"},dZ={class:"w-1/2"},mZ={key:0,value:""},fZ=["disabled","value","textContent"],pZ={key:0,class:"px-6"},vZ={class:"flex items-center justify-center space-x-1"},hZ={key:0},gZ={class:"relative h-4 rounded-full bg-neutral-200"},bZ={class:"absolute inset-0 flex items-center justify-center text-xs font-medium text-neutral-900"},yZ={class:"inline-block"},_Z={class:"flex items-center justify-end space-x-2"},IZ={class:"mb-4 mt-8 flex items-center"},qI={__name:"ResourceImport",props:{header:String,resourceName:{required:!0,type:String},requestQueryString:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Ee(),{resetStoreState:o}=Ne(),{localizedDateTime:a}=rt(),r=It(),s=_t(),i=M([]),u=M(!1),c=M(null),m=M(null),f=M(null),v=M(!1),y=M(!1),b=M({}),w=M(!1),k=M([{id:"01",name:n("core::import.steps.step_1.name"),description:n("core::import.steps.step_1.description"),status:"current"},{id:"02",name:n("core::import.steps.step_2.name"),description:n("core::import.steps.step_2.description"),status:"upcoming"},{id:"03",name:n("core::import.steps.step_3.name"),description:n("core::import.steps.step_3.description"),status:"upcoming"},{id:"04",name:n("core::import.steps.step_4.name"),description:n("core::import.steps.step_4.description"),status:"upcoming"}]),x=O(()=>Vt(i.value,"created_at","desc")),I=O(()=>x.value.length>0);function C(W,ae){(ae==="complete"||ae==="current")&&k.value.filter(ce=>parseInt(ce.id)<parseInt(W)).forEach(ce=>ce.status="complete"),ae==="current"&&k.value.filter(ce=>parseInt(ce.id)>parseInt(W)).forEach(ce=>ce.status="upcoming"),k.value[Et(k.value,["id",W])].status=ae}function S(W,ae=""){return`/${t.resourceName}/import/${W}${ae}`}function T(W,ae={}){if(Object.keys(t.requestQueryString).length>0||Object.keys(ae).length>0){let ce=[],oe={...t.requestQueryString,...ae};for(var ue in oe)ce.push(encodeURIComponent(ue)+"="+encodeURIComponent(oe[ue]));W+="?"+ce.join("&")}return W}function E(W){Innoclapps.request(S(W,"/skip-file"),{responseType:"blob"}).then(ae=>{Ys(ae.data,ae.headers["content-disposition"].split("filename=")[1])})}function $(W){Innoclapps.request(W).then(({data:ae})=>{Ys(ae,"sample.csv"),(k.value[0].status==="current"||k.value[3].status==="complete")&&C("02","current")})}function F(W){return!!ut(m.value.mappings,["attribute",W])}async function R(W){await Innoclapps.confirm({message:n("core::import.revert_info"),confirmText:n("core::import.revert")});const ae=W.id,ue=500,ce=W.imported,oe=Math.ceil(ce/ue);b.value[ae]=!0,(async()=>{try{for(let Q=1;Q<=oe;Q++)try{const{data:se}=await Innoclapps.request().delete(S(ae,"/revert?limit="+ue));i.value[Et(i.value,["id",parseInt(ae)])]=se}catch{break}}finally{b.value[ae]=!1}})()}async function B(W,ae){if(u.value&&ae!==!0){m.value=null;return}await Innoclapps.confirm(),await Innoclapps.request().delete(S(W)),V(W)}function V(W){i.value.splice(Et(i.value,["id",W]),1),m.value&&W==m.value.id&&(m.value=null,u.value=!1,C("01","current"))}function P(W){z(ut(i.value,["id",parseInt(W)])),C("03","current")}function z(W){m.value=W}async function H(){v.value=!0;const{data:W}=await Innoclapps.request(`${t.resourceName}/import`);i.value=W,v.value=!1}function j(W){let ae=ut(m.value.fields,["attribute",W.detected_attribute]);return!W.detected_attribute||!ae?!1:ae.isRequired}function N(W){z(W),i.value.push(W),C("03","current"),f.value=null}function L(W){z(W);let ae=Et(i.value,["id",parseInt(W.id)]);i.value[ae]=W,C("03","current"),u.value=!0}function U(W){w.value=!0,Innoclapps.request().post(T(S(W))).then(({data:ae})=>{i.value[Et(i.value,["id",parseInt(ae.id)])]=ae,ae.next_batch?setTimeout(()=>window.location.href=`?import_id=${ae.id}`,2e3):(s.replace({query:{}}),w.value=!1,Innoclapps.success(n("core::import.imported"))),o()}).catch(()=>{s.replace({query:{}}),w.value=!1})}function ee(){y.value=!0,Innoclapps.request().post(T(S(m.value.id)),{mappings:m.value.mappings}).then(({data:W})=>{let ae=Et(i.value,["id",parseInt(W.id)]);if(ae!==-1?i.value[ae]=W:i.value.push(W),W.next_batch){setTimeout(()=>window.location.href=`?import_id=${W.id}`,1e3);return}Innoclapps.success(n("core::import.imported")),m.value=null,C("04","complete"),o()}).catch(W=>{let ae=W.response.data;ae.deleted||ae.rows_exceeded?(ae.deleted&&V(m.value.id),ae.rows_exceeded&&(f.value=W.response.data.message)):C("04","current")}).finally(()=>{y.value=!1,u.value=!1})}async function G(){await H(),r.query.import_id&&(w.value=!0,U(r.query.import_id))}return G(),(W,ae)=>{const ue=d("ICardHeading"),ce=d("IButton"),oe=d("ICardActions"),ie=d("ICardHeader"),Q=d("ISpinner"),se=d("IAlertBody"),me=d("IAlert"),xe=d("ITextDisplay"),de=d("ITextSmall"),he=d("IFormLabel"),Y=d("IText"),X=d("Icon"),re=d("IFormSelect"),we=d("ICardBody"),Ce=d("ICardFooter"),ge=d("ICard"),Re=d("ITableHeader"),et=d("ITableRow"),kt=d("ITableHead"),lt=d("ITableCell"),ft=d("ILink"),zt=d("ITextDark"),De=d("ITableBody"),_e=d("ITable"),Te=Ve("t"),Xe=Ve("i-tooltip");return g(),D(fe,null,[l(ge,null,{default:p(()=>[l(ie,null,{default:p(()=>[Se(W.$slots,"header",{},()=>[l(ue,null,{default:p(()=>[le(Z(e.header||W.$t("core::import.import_records")),1)]),_:1})]),l(oe,null,{default:p(()=>[w.value?K("",!0):(g(),A(ce,{key:0,variant:"secondary",icon:"DocumentDownload",text:W.$t("core::import.download_sample"),onClick:ae[0]||(ae[0]=Me=>$(`/${e.resourceName}/import/sample`))},null,8,["text"]))]),_:1})]),_:3}),w.value?K("",!0):(g(),A(rZ,{key:0,steps:k.value},null,8,["steps"])),l(we,null,{default:p(()=>[w.value?(g(),A(me,{key:0},{default:p(()=>[l(se,null,{default:p(()=>[_("div",lZ,[ne(_("h4",sZ,null,512),[[Te,"core::import.import_in_progress"]]),l(Q,{class:"size-4"})]),le(" "+Z(W.$t("core::import.records_being_imported_in_batches")),1)]),_:1})]),_:1})):K("",!0),f.value?(g(),A(me,{key:1,variant:"danger",class:"mb-5",dismissible:""},{default:p(()=>[l(se,null,{default:p(()=>[le(Z(f.value),1)]),_:1})]),_:1})):K("",!0),w.value?K("",!0):(g(),A(Dl,{key:2,class:"ml-12 lg:ml-5",extensions:"csv","action-url":T(`${W.$scriptConfig("apiURL")}/${e.resourceName}/import/upload`),multiple:!1,"show-output":!1,"upload-text":W.$t("core::import.start"),onFileUploaded:N},null,8,["action-url","upload-text"])),m.value?(g(),D("div",iZ,[l(xe,{class:"mb-3",text:W.$t("core::import.spreadsheet_columns")},null,8,["text"]),_("div",uZ,[_("div",cZ,[(g(!0),D(fe,null,Ie(m.value.mappings,(Me,ke)=>(g(),D("div",{key:"mapping-"+ke,class:be(["mb-2 mr-3 flex h-16 flex-col justify-center rounded-lg px-4 ring-1 ring-inset ring-neutral-300 dark:ring-neutral-500/30","bg-white dark:bg-neutral-500/10",Me.attribute?"":"opacity-50"])},[l(he,{required:j(Me)},{default:p(()=>[le(Z(Me.original)+" ",1),Me.skip&&!j(Me)?(g(),A(de,{key:0,as:"span"},{default:p(()=>[le(" ("+Z(W.$t("core::import.column_will_not_import"))+") ",1)]),_:1})):K("",!0)]),_:2},1032,["required"]),l(Y,{class:"truncate",text:Me.preview},null,8,["text"])],2))),128))]),_("div",dZ,[(g(!0),D(fe,null,Ie(m.value.mappings,(Me,ke)=>(g(),D("div",{key:"field-"+ke,class:"mb-2 flex h-16 items-center"},[l(X,{icon:"ChevronRightSolid",class:"mr-3 size-5 text-neutral-800 dark:text-neutral-200"}),l(re,{modelValue:m.value.mappings[ke].attribute,"onUpdate:modelValue":We=>m.value.mappings[ke].attribute=We,class:"h-16 hover:bg-neutral-100 dark:hover:bg-neutral-800",onInput:We=>m.value.mappings[ke].skip=!We},{default:p(()=>[j(Me)?K("",!0):(g(),D("option",mZ,"N/A")),(g(!0),D(fe,null,Ie(m.value.fields,We=>(g(),D("option",{key:"field-"+ke+"-"+We.attribute,disabled:F(We.attribute),value:We.attribute,textContent:Z(We.label)},null,8,fZ))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])]))),128))])])])):K("",!0)]),_:1}),m.value?(g(),A(Ce,{key:1,class:"flex items-center justify-end space-x-2"},{default:p(()=>[l(ce,{variant:"secondary",disabled:y.value,text:W.$t("core::app.cancel"),onClick:ae[1]||(ae[1]=Me=>B(m.value.id))},null,8,["disabled","text"]),l(ce,{variant:"primary",loading:y.value,disabled:y.value,text:y.value?W.$t("core::app.please_wait"):W.$t("core::import.import"),onClick:ee},null,8,["loading","disabled","text"])]),_:1})):K("",!0)]),_:3}),l(ie,{class:"mt-8"},{default:p(()=>[l(ue,{text:W.$t("core::import.history")},null,8,["text"])]),_:1}),l(ge,{overlay:v.value},{default:p(()=>[I.value?(g(),D("div",pZ,[l(_e,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(kt,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(et,null,{default:p(()=>[l(Re,null,{default:p(()=>[le(Z(W.$t("core::import.date")),1)]),_:1}),l(Re,null,{default:p(()=>[le(Z(W.$t("core::import.file_name")),1)]),_:1}),l(Re,null,{default:p(()=>[le(Z(W.$t("core::import.user")),1)]),_:1}),l(Re,{class:"text-center"},{default:p(()=>[le(Z(W.$t("core::import.total_imported")),1)]),_:1}),l(Re,{class:"text-center"},{default:p(()=>[le(Z(W.$t("core::import.total_duplicates")),1)]),_:1}),l(Re,{class:"text-center"},{default:p(()=>[le(Z(W.$t("core::import.total_skipped")),1)]),_:1}),l(Re,{class:"text-center"},{default:p(()=>[le(Z(W.$t("core::import.progress")),1)]),_:1}),l(Re,{class:"text-center"},{default:p(()=>[le(Z(W.$t("core::import.status")),1)]),_:1}),l(Re)]),_:1})]),_:1}),l(De,null,{default:p(()=>[(g(!0),D(fe,null,Ie(x.value,Me=>(g(),D(fe,{key:Me.id},[l(et,null,{default:p(()=>[l(lt,{class:"font-medium"},{default:p(()=>[le(Z(h(a)(Me.created_at)),1)]),_:2},1024),l(lt,null,{default:p(()=>[le(Z(Me.file_name),1)]),_:2},1024),l(lt,null,{default:p(()=>[le(Z(Me.user.name),1)]),_:2},1024),l(lt,null,{default:p(()=>[_("div",vZ,[_("span",null,Z(Me.imported),1),Me.revertable&&Me.authorizations.revert&&!b.value[Me.id]?(g(),A(ft,{key:0,class:"text-sm font-medium sm:text-xs",variant:"danger",text:W.$t("core::import.revert"),onClick:ke=>R(Me)},null,8,["text","onClick"])):K("",!0),b.value[Me.id]?(g(),A(Q,{key:1,class:"size-4"})):K("",!0)])]),_:2},1024),l(lt,{class:"text-center"},{default:p(()=>[le(Z(Me.duplicates),1)]),_:2},1024),l(lt,{class:"text-center"},{default:p(()=>[le(Z(Me.skipped)+" ",1),Me.skip_file_filename&&Me.skipped>0&&(Me.authorizations.downloadSkipFile||Me.authorizations.uploadFixedSkipFile)?(g(),D("span",hZ,[l(ft,{class:"text-sm font-medium sm:text-xs",text:W.$t("core::import.why_skipped"),onClick:ke=>c.value===Me.id?c.value=null:c.value=Me.id},null,8,["text","onClick"])])):K("",!0)]),_:2},1024),l(lt,{class:"text-center align-middle"},{default:p(()=>[_("div",gZ,[_("div",{class:"h-4 rounded-full bg-success-500",style:Nt({width:Me.progress+"%"})},null,4),_("span",bZ,Z(Me.progress)+"% ",1)])]),_:2},1024),l(lt,{class:"text-center"},{default:p(()=>[ne((g(),D("span",yZ,[Me.status==="mapping"?(g(),A(X,{key:0,icon:"Bars3CenterLeft",class:"size-5 animate-pulse text-neutral-500 dark:text-neutral-400"})):Me.status==="finished"?(g(),A(X,{key:1,icon:"CheckCircle",class:"size-5 text-success-500 dark:text-success-400"})):Me.status==="in-progress"?(g(),A(X,{key:2,icon:"DotsHorizontal",class:"size-5 animate-bounce text-neutral-500 dark:text-neutral-400"})):K("",!0)])),[[Xe,Me.status]])]),_:2},1024),l(lt,null,{default:p(()=>[_("div",_Z,[Me.status==="mapping"&&(!m.value||m.value&&m.value.id!=Me.id)?(g(),A(ft,{key:0,text:W.$t("core::app.continue"),onClick:ke=>P(Me.id)},null,8,["text","onClick"])):K("",!0),!w.value&&!b.value[Me.id]&&Me.authorizations.delete?(g(),A(ce,{key:1,icon:"Trash",basic:"",small:"",onClick:ke=>B(Me.id,!0)},null,8,["onClick"])):K("",!0)])]),_:2},1024)]),_:2},1024),Me.skip_file_filename&&c.value===Me.id&&(Me.authorizations.downloadSkipFile||Me.authorizations.uploadFixedSkipFile)?(g(),A(et,{key:0},{default:p(()=>[l(lt,{colspan:"4"},{default:p(()=>[l(zt,{class:"font-semibold"},{default:p(()=>[le(Z(W.$t("core::import.skip_file")),1)]),_:1}),l(Y,null,{default:p(()=>[le(Z(W.$t("core::import.total_rows_skipped",{count:Me.skipped})),1)]),_:2},1024),l(Y,{class:"mt-3 max-w-4xl whitespace-normal font-normal",text:W.$t("core::import.skip_file_generation_info")},null,8,["text"]),l(Y,{class:"my-2 max-w-3xl whitespace-normal font-normal",text:W.$t("core::import.skip_file_fix_and_continue")},null,8,["text"]),_("div",IZ,[Me.authorizations.downloadSkipFile?(g(),A(ft,{key:0,class:"mr-4",text:W.$t("core::import.download_skip_file"),onClick:ke=>E(Me.id)},null,8,["text","onClick"])):K("",!0),Me.authorizations.uploadFixedSkipFile?(g(),A(Dl,{key:1,extensions:"csv",name:"skip_file","input-id":"skip_file","action-url":T(`${W.$scriptConfig("apiURL").replace(/\/+$/,"")}${S(Me.id,"/skip-file")}`),multiple:!1,"show-output":!1,"select-file-text":W.$t("core::import.upload_fixed_skip_file"),"upload-text":W.$t("core::import.start"),onFileUploaded:ae[2]||(ae[2]=ke=>L(ke))},null,8,["action-url","select-file-text","upload-text"])):K("",!0)])]),_:2},1024),l(lt,{colspan:"4"})]),_:2},1024)):K("",!0)],64))),128))]),_:1})]),_:1})])):ne((g(),A(we,{key:1,class:"py-12 text-center"},{default:p(()=>[l(X,{icon:"DocumentText",class:"mx-auto size-12 text-neutral-400"}),l(Y,{class:"mt-2",text:W.$t("core::import.no_history")},null,8,["text"])]),_:1},512)),[[pe,!v.value]])]),_:1},8,["overlay"])],64)}}},wZ={__name:"ImportResource",setup(e){return(t,n)=>{const o=d("MainLayout");return g(),A(o,null,{default:p(()=>[l(qI,{"resource-name":t.$route.params.resourceName},null,8,["resource-name"])]),_:1})}}};function xZ(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var UI=xZ;function kZ(e,t,n){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(a);++o<a;)r[o]=e[o+t];return r}var $Z=kZ,CZ=di,SZ=$Z;function TZ(e,t){return t.length<2?e:CZ(e,SZ(t,0,-1))}var EZ=TZ,FZ=Wl,AZ=UI,RZ=EZ,DZ=Gl;function OZ(e,t){return t=FZ(t,e),e=RZ(e,t),e==null||delete e[DZ(AZ(t))]}var BZ=OZ,NZ=hI;function PZ(e){return NZ(e)?void 0:e}var MZ=PZ,VZ=Zc;function LZ(e){var t=e==null?0:e.length;return t?VZ(e,1):[]}var jI=LZ;const qZ=Bt(jI);var UZ=jI,jZ=yI,zZ=_I;function HZ(e){return zZ(jZ(e,void 0,UZ),e+"")}var zI=HZ,WZ=Hl,GZ=mI,KZ=BZ,ZZ=Wl,YZ=ls,XZ=MZ,QZ=zI,JZ=Hp,eY=1,tY=2,nY=4,oY=QZ(function(e,t){var n={};if(e==null)return n;var o=!1;t=WZ(t,function(r){return r=ZZ(r,e),o||(o=r.length>1),r}),YZ(e,JZ(e),n),o&&(n=GZ(n,eY|tY|nY,XZ));for(var a=t.length;a--;)KZ(n,t[a]);return n}),aY=oY;const sr=Bt(aY);function eo(e){const t=cn(),n=O(()=>!!t.state.table.customize[pt(e)]),o=O({set(u){t.commit("table/SET_SETTINGS",{id:pt(e),settings:u})},get(){return t.getters["table/settings"](pt(e))}});function a(){At("reload-resource-table",pt(e))}function r(u=!0){t.commit("table/SET_CUSTOMIZE_VISIBILTY",{id:pt(e),value:u!==!1})}async function s(u,c){if(Object.keys(o.value).length>0)return;let{data:f}=await Innoclapps.request(`/${u}/table/settings`,c);o.value=sr(f,["filters","rules"]),t.dispatch("filters/setFiltersAndRules",{identifier:f.identifier,filters:f.filters,rules:f.rules})}async function i(u,c){let{data:m}=await Innoclapps.request(`/${u}/table/settings`,c);o.value={...o.value,actions:m.actions}}return{reloadTable:a,customizeTable:r,tableBeingCustomized:n,settings:o,fetchSettings:s,fetchActions:i}}const rY={__name:"ResourceTrashedTable",props:{resourceName:{required:!0,type:String}},setup(e){const t=e,{t:n}=Ee(),o=M(`${t.resourceName}-trashed`),a=M(!1),{reloadTable:r}=eo(o);async function s(){await Innoclapps.confirm(),a.value=!0;const{data:i}=await Innoclapps.request(`/trashed/${t.resourceName}`);let u=0;const c=i.meta.total,m=500,f=Math.ceil(c/m);(async()=>{let y=!1;try{for(let b=1;b<=f;b++)try{const{data:w}=await Innoclapps.request().delete(`/trashed/${t.resourceName}?limit=${m}`);u=u+w.deleted}catch{y=!0;break}u===0&&!y?Innoclapps.error(n("core::app.action_not_authorized")):r()}finally{a.value=!1}})()}return(i,u)=>{const c=d("IAlertBody"),m=d("IAlert"),f=d("IButton"),v=d("ResourceTable");return g(),D(fe,null,[l(m,{class:"mb-6"},{default:p(()=>[l(c,null,{default:p(()=>[le(Z(i.$t("core::app.soft_deletes.trashed_pruning_info",{total:i.$scriptConfig("soft_deletes.prune_after")})),1)]),_:1})]),_:1}),l(v,{"url-path":`/${e.resourceName}/table`,"table-id":o.value,"data-request-query-string":{trashed:1},"action-request-params":{trashed:1},"resource-name":e.resourceName},{header:p(({isPreEmpty:y})=>[ne(_("form",{class:"flex-1 text-right",onSubmit:ot(s,["prevent"])},[l(f,{type:"submit",variant:"danger",icon:"Trash",disabled:a.value,loading:a.value,text:i.$t("core::app.soft_deletes.empty_trash"),soft:""},null,8,["disabled","loading","text"])],544),[[pe,!y]])]),_:1},8,["url-path","table-id","resource-name"])],64)}}},lY={__name:"TrashedResourceRecords",setup(e){return(t,n)=>{const o=d("MainLayout");return g(),A(o,null,{default:p(()=>[l(rY,{"resource-name":t.$route.params.resourceName},null,8,["resource-name"])]),_:1})}}},sY={class:"mb-6 flex items-center justify-between rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-1 dark:border-neutral-500/30 dark:bg-neutral-800"},iY={class:"sm:flex sm:space-x-4"},uY={__name:"SettingsGoogle",setup(e){const{appUrl:t}=Ne(),{form:n,submit:o,isReady:a,originalSettings:r}=To(),s=t+"/google/callback",i=O(()=>r.value.google_client_secret&&r.value.google_client_id);function u(){o(()=>window.location.reload())}return(c,m)=>{const f=d("Icon"),v=d("ICardHeading"),y=d("ILink"),b=d("ICardActions"),w=d("ICardHeader"),k=d("ITextDark"),x=d("ITextBlock"),I=d("IButtonCopy"),C=d("IFormInput"),S=d("IFormGroup"),T=d("ICardBody"),E=d("IButton"),$=d("ICardFooter"),F=d("ICard"),R=Ve("i-tooltip");return g(),D(fe,null,[l(w,null,{default:p(()=>[l(v,{class:"flex items-center gap-x-2"},{default:p(()=>[i.value&&h(a)?(g(),A(f,{key:0,icon:"CheckCircleSolid",class:"size-5 text-success-600"})):K("",!0),le(" Google ")]),_:1}),l(b,null,{default:p(()=>[l(y,{href:"https://console.developers.google.com/",text:"Console"})]),_:1})]),_:1}),l(F,{as:"form",overlay:!h(a),onSubmit:ot(u,["prevent"])},{default:p(()=>[l(T,null,{default:p(()=>[_("div",sY,[l(x,null,{default:p(()=>[l(k,{class:"mr-2 inline font-medium"},{default:p(()=>[le("Redirect Url:")]),_:1}),_("span",{class:"select-all",textContent:s})]),_:1}),ne(l(I,{class:"ml-3",text:s,"success-message":c.$t("core::app.copied")},null,8,["success-message"]),[[R,c.$t("core::app.copy")]])]),_("div",iY,[l(S,{label:"Client ID","label-for":"google_client_id",class:"w-full"},{default:p(()=>[l(C,{id:"google_client_id",modelValue:h(n).google_client_id,"onUpdate:modelValue":m[0]||(m[0]=B=>h(n).google_client_id=B),autocomplete:"off",name:"google_client_id"},null,8,["modelValue"])]),_:1}),l(S,{label:"Client Secret","label-for":"google_client_secret",class:"w-full"},{default:p(()=>[l(C,{id:"google_client_secret",modelValue:h(n).google_client_secret,"onUpdate:modelValue":m[1]||(m[1]=B=>h(n).google_client_secret=B),type:"password",autocomplete:"off",name:"google_client_secret"},null,8,["modelValue"])]),_:1})])]),_:1}),l($,{class:"text-right"},{default:p(()=>[l(E,{type:"submit",variant:"primary",disabled:h(n).busy,text:c.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},cY={class:"mb-6 flex items-center justify-between rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-1 dark:border-neutral-500/30 dark:bg-neutral-800"},dY={class:"sm:flex sm:space-x-4"},mY={class:"font-bold"},fY={__name:"SettingsMicrosoft",setup(e){const{DateTime:t,UTCDateTimeInstance:n,localizedDate:o,isISODate:a}=rt(),{appUrl:r}=Ne(),{form:s,submit:i,isReady:u,originalSettings:c}=To(),m=r+"/microsoft/callback",f=O(()=>c.value.msgraph_client_secret&&c.value.msgraph_client_id),v=O(()=>!c.value.msgraph_client_secret||!c.value.msgraph_client_secret_configured_at?!1:y()<n);function y(){let w=c.value.msgraph_client_secret_configured_at;return w=a(w)?t.fromISO(w):t.fromFormat(w,"yyyy-MM-dd HH:mm:ss"),w.toUTC().plus({months:24}).minus({days:1})}function b(){s.msgraph_client_secret&&c.value.msgraph_client_secret!=s.msgraph_client_secret?s.fill("msgraph_client_secret_configured_at",n.toISODate()):s.msgraph_client_secret||s.fill("msgraph_client_secret_configured_at",null),ze(()=>i(()=>window.location.reload()))}return(w,k)=>{const x=d("Icon"),I=d("ICardHeading"),C=d("ILink"),S=d("ICardActions"),T=d("ICardHeader"),E=d("ITextDark"),$=d("ITextBlock"),F=d("IButtonCopy"),R=d("IFormInput"),B=d("IFormGroup"),V=d("IAlertBody"),P=d("IButton"),z=d("IAlertActions"),H=d("IAlert"),j=d("ICardBody"),N=d("ICardFooter"),L=d("ICard"),U=Ve("i-tooltip");return g(),D(fe,null,[l(T,null,{default:p(()=>[l(I,{class:"flex items-center gap-x-2"},{default:p(()=>[f.value&&h(u)?(g(),A(x,{key:0,icon:v.value?"XCircleSolid":"CheckCircleSolid",class:be(["size-5",{"text-success-600":!v.value&&f.value&&h(u),"text-danger-500":v.value&&f.value&&h(u)}])},null,8,["icon","class"])):K("",!0),le(" Microsoft ")]),_:1}),l(S,null,{default:p(()=>[l(C,{href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",text:"App Registrations"})]),_:1})]),_:1}),l(L,{as:"form",overlay:!h(u),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(j,null,{default:p(()=>[_("div",cY,[l($,null,{default:p(()=>[l(E,{class:"mr-2 inline font-medium"},{default:p(()=>[le("Redirect Url:")]),_:1}),_("span",{class:"select-all",textContent:m})]),_:1}),ne(l(F,{class:"ml-3",text:m,"success-message":w.$t("core::app.copied")},null,8,["success-message"]),[[U,w.$t("core::app.copy")]])]),_("div",dY,[l(B,{class:"w-full",label:"App (client) ID","label-for":"msgraph_client_id"},{default:p(()=>[l(R,{id:"msgraph_client_id",modelValue:h(s).msgraph_client_id,"onUpdate:modelValue":k[0]||(k[0]=ee=>h(s).msgraph_client_id=ee),autocomplete:"off",name:"msgraph_client_id"},null,8,["modelValue"])]),_:1}),l(B,{class:"w-full",label:"Client Secret","label-for":"msgraph_client_secret"},{default:p(()=>[l(R,{id:"msgraph_client_secret",modelValue:h(s).msgraph_client_secret,"onUpdate:modelValue":k[1]||(k[1]=ee=>h(s).msgraph_client_secret=ee),autocomplete:"off",type:"password",name:"msgraph_client_secret"},null,8,["modelValue"])]),_:1})]),h(c).msgraph_client_secret&&h(c).msgraph_client_secret_configured_at&&!v.value?(g(),A(H,{key:0,class:"mt-4"},{default:p(({variant:ee})=>[l(V,null,{default:p(()=>[le(" The client secret was configured at "+Z(h(o)(h(c).msgraph_client_secret_configured_at))+". If you followed the documentation and configured the client secret to expire in 24 months, ",1),_("span",mY," you must re-generate a new client secret at: "+Z(h(o)(y().toISO())),1),le(" in order the integration to continue working. ")]),_:1}),l(z,null,{default:p(()=>[l(P,{variant:ee,href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationMenuBlade/Credentials/appId/"+h(s).msgraph_client_id+"/isMSAApp/true",ghost:""},{default:p(()=>[le(" Re-Generate ")]),_:2},1032,["variant","href"])]),_:2},1024)]),_:1})):K("",!0),l(H,{class:"mt-4",variant:"danger",show:v.value},{default:p(({variant:ee})=>[l(V,null,{default:p(()=>[le(" The client secret is probably expired, click the button below to re-generate new secret if it's needed, don't forget to update the secret here in the integration as well. ")]),_:1}),l(z,null,{default:p(()=>[l(P,{variant:ee,href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationMenuBlade/Credentials/appId/"+h(s).msgraph_client_id+"/isMSAApp/true",ghost:""},{default:p(()=>[le(" Re-Generate ")]),_:2},1032,["variant","href"])]),_:2},1024)]),_:1},8,["show"])]),_:1}),l(N,{class:"text-right"},{default:p(()=>[l(P,{type:"submit",variant:"primary",disabled:h(s).busy,text:w.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},pY={class:"sm:flex sm:space-x-4"},vY={class:"sm:flex sm:space-x-4"},hY={class:"flex"},gY={class:"mb-1 grow"},bY={__name:"SettingsPusher",setup(e){const{form:t,submit:n,isReady:o,originalSettings:a}=To(),r=O(()=>a.value.pusher_app_id&&a.value.pusher_app_key&&a.value.pusher_app_secret);function s(){n(()=>window.location.reload())}return(i,u)=>{const c=d("Icon"),m=d("ICardHeading"),f=d("ILink"),v=d("ICardActions"),y=d("ICardHeader"),b=d("IAlertBody"),w=d("IAlert"),k=d("IFormInput"),x=d("IFormGroup"),I=d("IFormLabel"),C=d("ICardBody"),S=d("IButton"),T=d("ICardFooter"),E=d("ICard");return g(),D(fe,null,[l(y,null,{default:p(()=>[l(m,{class:"flex items-center gap-x-2"},{default:p(()=>[r.value&&h(o)?(g(),A(c,{key:0,icon:"CheckCircleSolid",class:"size-5 text-success-600"})):K("",!0),le(" Pusher ")]),_:1}),l(v,null,{default:p(()=>[l(f,{href:"https://dashboard.pusher.com",text:"Pusher.com",tabindex:"-1"})]),_:1})]),_:1}),l(E,{as:"form",overlay:!h(o),onSubmit:ot(s,["prevent"])},{default:p(()=>[l(C,null,{default:p(()=>[l(w,{class:"mb-6",show:!r.value&&h(o)},{default:p(()=>[l(b,null,{default:p(()=>[le(" Receive notifications in real time without the need to manually refresh the page, after synchronization, automatically updates the calendar, total unread emails and new emails. ")]),_:1})]),_:1},8,["show"]),_("div",pY,[l(x,{class:"w-full",label:"App ID","label-for":"pusher_app_id"},{default:p(()=>[l(k,{id:"pusher_app_id",modelValue:h(t).pusher_app_id,"onUpdate:modelValue":u[0]||(u[0]=$=>h(t).pusher_app_id=$)},null,8,["modelValue"])]),_:1}),l(x,{class:"w-full",label:"App Key","label-for":"pusher_app_key"},{default:p(()=>[l(k,{id:"pusher_app_key",modelValue:h(t).pusher_app_key,"onUpdate:modelValue":u[1]||(u[1]=$=>h(t).pusher_app_key=$)},null,8,["modelValue"])]),_:1})]),_("div",vY,[l(x,{class:"w-full",label:"App Secret","label-for":"pusher_app_secret"},{default:p(()=>[l(k,{id:"pusher_app_secret",modelValue:h(t).pusher_app_secret,"onUpdate:modelValue":u[2]||(u[2]=$=>h(t).pusher_app_secret=$),type:"password"},null,8,["modelValue"])]),_:1}),l(x,{class:"w-full"},{label:p(()=>[_("div",hY,[_("div",gY,[l(I,{for:"pusher_app_cluster"},{default:p(()=>[le("App Cluster")]),_:1})]),l(f,{href:"https://pusher.com/docs/clusters",text:"https://pusher.com/docs/clusters"})])]),default:p(()=>[l(k,{id:"pusher_app_cluster",modelValue:h(t).pusher_app_cluster,"onUpdate:modelValue":u[3]||(u[3]=$=>h(t).pusher_app_cluster=$)},null,8,["modelValue"])]),_:1})])]),_:1}),l(T,{class:"text-right"},{default:p(()=>[l(S,{type:"submit",variant:"primary",disabled:h(t).busy,text:i.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},yY={class:"sm:p-4"},_Y={class:"text-center"},IY=_("img",{src:"https://cdn.zapier.com/zapier/images/logos/zapier-logo.png",class:"mx-auto h-16 w-auto"},null,-1),wY=_("b",null,'"Invite Only"',-1),xY=_("b",null,'"Testing"',-1),kY=_("b",null,"we need to verify your purchase key",-1),$Y={class:"m-auto max-w-2xl"},CY={class:"flex space-x-2"},SY=["textContent"],TY={__name:"SettingsZapier",setup(e){const{scriptConfig:t}=Ne(),n=M(t("purchase_key")),o=M(null),{isLoading:a,setLoading:r}=An();function s(){r(!0),Cn.get(`https://www.concordcrm.com/zapier-link/${n.value}`,{withCredentials:!0}).then(({data:i})=>{o.value=i.link}).catch(i=>{Innoclapps.error(i.response.data.error)}).finally(()=>r(!1))}return(i,u)=>{const c=d("IBadge"),m=d("ICardHeading"),f=d("ICardHeader"),v=d("IText"),y=d("IFormInput"),b=d("IButton"),w=d("IButtonCopy"),k=d("ICardBody"),x=d("ICard"),I=Ve("i-tooltip");return g(),D(fe,null,[l(f,null,{default:p(()=>[l(m,null,{default:p(()=>[le(" Zapier "),l(c,{variant:"info",class:"ml-2"},{default:p(()=>[le("Beta")]),_:1})]),_:1})]),_:1}),l(x,null,{default:p(()=>[l(k,null,{default:p(()=>[_("div",yY,[_("div",_Y,[IY,l(v,{class:"mx-auto mt-5 max-w-lg"},{default:p(()=>[le(" Zapier integration is at "),wY,le(" and "),xY,le(" stage, we are inviting you to test the integration before it's available for everyone. ")]),_:1})]),l(v,{class:"mx-auto mb-2 mt-5 text-center"},{default:p(()=>[le(" Before this, "),kY,le(" and after that we will share the Zapier invite link with you can try it! ")]),_:1}),_("div",$Y,[_("div",CY,[l(y,{id:"purchase-key",modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=C=>n.value=C),class:"grow",placeholder:"Enter your purchase key here"},null,8,["modelValue"]),l(b,{class:"shrink-0",variant:"secondary",loading:h(a),disabled:h(a),onClick:s},{default:p(()=>[le(" Get Integration Link ")]),_:1},8,["loading","disabled"])])]),o.value?(g(),A(v,{key:0,class:"mt-6 flex items-center justify-center"},{default:p(()=>[_("span",{class:"select-all font-medium",textContent:Z(o.value)},null,8,SY),ne(l(w,{class:"ml-3",text:o.value,"success-message":i.$t("core::app.copied")},null,8,["text","success-message"]),[[I,i.$t("core::app.copy")]])]),_:1})):K("",!0)])]),_:1})]),_:1})],64)}}},EY=[{alias:"/",path:"/dashboard",component:fb,meta:{title:at("core::dashboard.insights"),scrollToTop:!1}},{path:"/",name:"dashboard",component:fb,meta:{title:at("core::dashboard.insights"),scrollToTop:!1}},{path:"/dashboard/:id/edit",name:"edit-dashboard",component:JW},{path:"/notifications",name:"notifications",component:UG,meta:{title:at("core::notifications.your")}},{path:"/import/:resourceName",name:"import-resource",meta:{title:at("core::import.import_records")},component:wZ},{path:"/oauth/accounts",name:"oauth-accounts",component:tK,meta:{title:at("core::oauth.connected_accounts")}},{path:"/trashed/:resourceName",name:"trashed-resource-records",component:lY,meta:{title:at("core::app.soft_deletes.trashed_records")}},{name:"404",path:"/404",meta:{title:"404"},component:pb},{name:"403",path:"/403",meta:{title:"403"},component:SG},{name:"not-found",path:"/:pathMatch(.*)*",component:pb},{path:"/settings",name:"settings",component:Sj,meta:{title:at("core::settings.settings")},children:[{path:"general",component:ZH,name:"settings-general",meta:{title:at("core::settings.general_settings")},alias:"/settings"},{path:"fields/:resourceName",name:"resource-fields",component:lH},{path:"integrations/microsoft",component:fY,name:"settings-integrations-microsoft",meta:{title:"Microsoft"}},{path:"integrations/google",component:uY,name:"settings-integrations-google",meta:{title:"Google"}},{path:"integrations/pusher",component:bY,name:"settings-integrations-pusher",meta:{title:"Pusher"}},{path:"integrations/zapier",component:TY,name:"settings-integrations-zapier",meta:{title:"Zapier"}},{path:"/settings/workflows",component:YW,meta:{title:at("core::workflow.workflows")}},{path:"/settings/mailable-templates",component:aW,meta:{title:at("core::mail_template.mail_templates")}},{path:"/settings/update",component:NW,name:"update",meta:{title:at("core::update.system")}},{path:"/settings/tools",component:yW,meta:{title:at("core::settings.tools.tools")}},{path:"/settings/info",component:sW,meta:{title:at("core::app.system_info")}},{path:"/settings/logs",component:pW,meta:{title:"Logs"}},{path:"/settings/security",component:Ij,meta:{title:at("core::settings.security.security")}},{path:"/settings/recaptcha",component:_j,meta:{title:at("core::settings.recaptcha.recaptcha")}}]}],FY={fields:{}},AY={SET(e,t){e.fields[t.group]=t.fields},RESET(e){e.fields={},e.placeholders=null}},RY={async getForResource({commit:e,state:t},{resourceName:n,view:o,resourceId:a,viaResource:r,viaResourceId:s,intent:i,params:u={}}){let c=n+"-"+o+(r?"-"+r:"");if(t.fields[c]!==void 0&&!a&&!u.resourceId)return t.fields[c];let{data:m}=await Innoclapps.request(`/${n}${a?"/"+a:""}/${o}-fields`,{params:{intent:i||o,via_resource:r,via_resource_id:s,...u}});return e("SET",{group:c,fields:Object.freeze(m)}),m}},DY={namespaced:!0,state:FY,mutations:AY,actions:RY},OY={filters:{},availableRules:{},visibleBuilders:{},activeFilters:{}},BY={SET(e,t){e.filters[t.identifier]=t.filters},SET_AVAILABLE_RULES(e,t){e.availableRules[t.identifier]=t.rules},UPDATE(e,t){let n=Et(e.filters[t.identifier],["id",parseInt(t.filter.id)]);n!==-1&&(e.filters[t.identifier][n]=t.filter)},PUSH(e,t){e.filters[t.identifier].push(t.filter)},REMOVE(e,t){let n=Et(e.filters[t.identifier],["id",parseInt(t.id)]);n!==-1&&e.filters[t.identifier].splice(n,1)},SET_ACTIVE(e,t){e.activeFilters[t.identifier]||(e.activeFilters[t.identifier]={}),e.activeFilters[t.identifier][t.view]=t.id},CLEAR_ACTIVE(e,t){delete e.activeFilters[t.identifier][t.view]},UNMARK_AS_DEFAULT(e,t){let n=Et(e.filters[t.identifier],["id",parseInt(t.id)]);if(n!==-1){let o=Et(e.filters[t.identifier][n].defaults,{view:t.view,user_id:t.userId});o!==-1&&e.filters[t.identifier][n].defaults.splice(o,1)}},SET_BUILDER_VISIBLE(e,t){e.visibleBuilders[t.identifier]||(e.visibleBuilders[t.identifier]={}),e.visibleBuilders[t.identifier][t.view]=t.visible}},NY={getAll:e=>t=>Xr(e.filters[t],["is_system_default","name"],"desc","asc"),getById:e=>(t,n)=>ut(e.filters[t],["id",parseInt(n)]),getDefault:e=>(t,n,o)=>ut(e.filters[t],a=>ut(a.defaults,{view:n,user_id:o})),getActive:e=>(t,n)=>!e.activeFilters[t]||!e.activeFilters[t][n]?null:ut(e.filters[t],["id",parseInt(e.activeFilters[t][n])]),filtersBuilderVisible:e=>(t,n)=>!e.visibleBuilders[t]||!e.visibleBuilders[t][n]?!1:e.visibleBuilders[t][n]||!1},PY={setFiltersAndRules({commit:e},t){e("SET",{identifier:t.identifier,filters:t.filters}),e("SET_AVAILABLE_RULES",{identifier:t.identifier,rules:t.rules})},clearActive({commit:e,getters:t},n){return t.getActive(n.identifier,n.view)?(e("CLEAR_ACTIVE",{identifier:n.identifier,view:n.view}),e("queryBuilder/RESET_BUILDER_RULES",{identifier:n.identifier,view:n.view},{root:!0}),!0):!1},async destroy({commit:e,getters:t},n){await Innoclapps.request().delete(`filters/${n.id}`);let o=t.getActive(n.identifier,n.view);o&&parseInt(n.id)===parseInt(o.id)&&e("CLEAR_ACTIVE",{identifier:n.identifier,view:n.view}),e("REMOVE",{identifier:n.identifier,id:n.id})}},MY={namespaced:!0,state:OY,getters:NY,mutations:BY,actions:PY};function bb(){return{condition:"and",children:[]}}function HI(e){return["is_empty","is_not_empty","is_null","is_not_null"].indexOf(e)>=0}function Yp(e){return["between","not_between"].indexOf(e)>=0}function vm(e){return["in","not_in","between","not_between"].includes(e)}function WI(e,t){let n=[];return Aa(e.children,o=>{if(o.query.children)n=n.concat(WI(o.query));else{let a=ut(t,["id",o.query.rule]);a&&a.isStatic||HI(o.query.operator)?n.push(!0):Yp(o.query.operator)?o.query.value&&!Gt(o.query.value[0])&&!Gt(o.query.value[1])?n.push(Mo(o.query.value)):n.push(null):n.push(Mo(o.query.value))}}),n}const VY={availableRules:{},queryBuilderRules:{}},LY={SET_AVAILABLE_RULES(e,t){e.availableRules[t.identifier]||(e.availableRules[t.identifier]={}),e.availableRules[t.identifier][t.view]=t.rules},SET_BUILDER_RULES(e,t){e.queryBuilderRules[t.identifier]||(e.queryBuilderRules[t.identifier]={}),e.queryBuilderRules[t.identifier][t.view]=t.rules},RESET_BUILDER_RULES(e,t){e.queryBuilderRules[t.identifier]||(e.queryBuilderRules[t.identifier]={}),e.queryBuilderRules[t.identifier][t.view]=bb()},ADD_QUERY_GROUP(e,t){t.children.push({type:"group",query:bb()})},SET_QUERY_CHILDREN(e,t){t.query.children=t.children},ADD_QUERY_CHILD(e,t){t.query.children.push(t.child)},REMOVE_QUERY_CHILD(e,t){t.query.children.splice(t.index,1)},UPDATE_QUERY_RULE(e,t){t.query.rule=t.value},UPDATE_QUERY_VALUE(e,t){t.query.value=t.value},UPDATE_QUERY_TYPE(e,t){t.query.type=t.value},UPDATE_QUERY_CONDITION(e,t){t.query.condition=t.value},UPDATE_QUERY_OPERAND(e,t){t.query.operand=t.value},UPDATE_QUERY_OPERATOR(e,t){t.query.operator=t.value}},GI=(e,t)=>{let n=null;return e.every(o=>(Object.hasOwn(o.query,"children")&&o.query.children?n=GI(o.query.children,t):o.query.rule==t&&(n=o),!n)),n},qY={findRuleInQueryBuilder:e=>(t,n,o)=>{if(!(!e.queryBuilderRules[t]||!e.queryBuilderRules[t][n]||!e.queryBuilderRules[t][n].children))return GI(e.queryBuilderRules[t][n].children,o)},getAvailableRules:e=>(t,n)=>!e.availableRules[t]||!e.availableRules[t][n]?[]:e.availableRules[t][n]||[],getBuilderRules:e=>(t,n)=>!e.queryBuilderRules[t]||!e.queryBuilderRules[t][n]?{}:e.queryBuilderRules[t][n]||{}},UY={namespaced:!0,state:VY,getters:qY,mutations:LY},KI={settings:vc({}),customize:{}},jY={SET_CUSTOMIZE_VISIBILTY(e,t){e.customize[t.id]=t.value},SET_SETTINGS(e,t){e.settings[t.id]=Pt(t.settings)},RESET_SETTINGS(e){for(let t in e.settings)e.settings[t]={}}},zY={settings:()=>e=>pt(KI.settings[e])||{}},HY={namespaced:!0,state:KI,mutations:jY,getters:zY},WY="modulepreload",GY=function(e){return"/build/"+e},yb={},us=function(t,n,o){let a=Promise.resolve();if(n&&n.length>0){const r=document.getElementsByTagName("link");a=Promise.all(n.map(s=>{if(s=GY(s),s in yb)return;yb[s]=!0;const i=s.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(!!o)for(let f=r.length-1;f>=0;f--){const v=r[f];if(v.href===s&&(!i||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${u}`))return;const m=document.createElement("link");if(m.rel=i?"stylesheet":WY,i||(m.as="script",m.crossOrigin=""),m.href=s,document.head.appendChild(m),i)return new Promise((f,v)=>{m.addEventListener("load",f),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${s}`)))})}))}return a.then(()=>t()).catch(r=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=r,window.dispatchEvent(s),!s.defaultPrevented)throw r})};var ZI={exports:{}};const KY=K1(F8);/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.14 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(e,t){(function(n,o){e.exports=o(KY)})(Dr,function(n){function o(j){return i(j)||s(j)||r(j)||a()}function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(j,N){if(j){if(typeof j=="string")return u(j,N);var L=Object.prototype.toString.call(j).slice(8,-1);if(L==="Object"&&j.constructor&&(L=j.constructor.name),L==="Map"||L==="Set")return Array.from(j);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return u(j,N)}}function s(j){if(typeof Symbol<"u"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}function i(j){if(Array.isArray(j))return u(j)}function u(j,N){(N==null||N>j.length)&&(N=j.length);for(var L=0,U=new Array(N);L<N;L++)U[L]=j[L];return U}function c(j,N){var L=Object.keys(j);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(j);N&&(U=U.filter(function(ee){return Object.getOwnPropertyDescriptor(j,ee).enumerable})),L.push.apply(L,U)}return L}function m(j){for(var N=1;N<arguments.length;N++){var L=arguments[N]!=null?arguments[N]:{};N%2?c(Object(L),!0).forEach(function(U){f(j,U,L[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(L)):c(Object(L)).forEach(function(U){Object.defineProperty(j,U,Object.getOwnPropertyDescriptor(L,U))})}return j}function f(j,N,L){return N in j?Object.defineProperty(j,N,{value:L,enumerable:!0,configurable:!0,writable:!0}):j[N]=L,j}function v(j){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},v(j)}function y(j,N){var L=Object.keys(j);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(j);N&&(U=U.filter(function(ee){return Object.getOwnPropertyDescriptor(j,ee).enumerable})),L.push.apply(L,U)}return L}function b(j){for(var N=1;N<arguments.length;N++){var L=arguments[N]!=null?arguments[N]:{};N%2?y(Object(L),!0).forEach(function(U){I(j,U,L[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(L)):y(Object(L)).forEach(function(U){Object.defineProperty(j,U,Object.getOwnPropertyDescriptor(L,U))})}return j}function w(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function k(j,N){for(var L=0;L<N.length;L++){var U=N[L];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(j,U.key,U)}}function x(j,N,L){return N&&k(j.prototype,N),L&&k(j,L),Object.defineProperty(j,"prototype",{writable:!1}),j}function I(j,N,L){return N in j?Object.defineProperty(j,N,{value:L,enumerable:!0,configurable:!0,writable:!0}):j[N]=L,j}var C=function(N){var L=new XMLHttpRequest;return L.open(N.method||"GET",N.url),L.responseType="json",N.headers&&Object.keys(N.headers).forEach(function(U){L.setRequestHeader(U,N.headers[U])}),L},S=function(N,L){return new Promise(function(U,ee){N.onload=function(){if(N.status>=200&&N.status<300){var G;try{G=JSON.parse(N.response)}catch{G=N.response}U(G)}else ee(N.response)},N.onerror=function(){return ee(N.response)},N.send(JSON.stringify(L))})},T=function(N,L){var U=new FormData;for(var ee in L)U.append(ee,L[ee]);return new Promise(function(G,W){N.onload=function(){if(N.status>=200&&N.status<300){var ae;try{ae=JSON.parse(N.response)}catch{ae=N.response}G(ae)}else W(N.response)},N.onerror=function(){return W(N.response)},N.send(U)})};function E(j){var N=C(j);return S(N,j.body)}var $=function(){function j(N,L){w(this,j),this.file=N,this.options=L,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return x(j,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var L=this,U=this.chunksUploaded.length/this.chunks.length*100,ee=this.chunksUploading.reduce(function(G,W){return G+(W.progress|0)/L.chunks.length},0);return Math.min(U+ee,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(L){return!L.active&&!L.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(L){return!!L.xhr&&!!L.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(L){return!!L.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var L=0,U=this.chunkSize;L<this.fileSize;)this.chunks.push({blob:this.file.file.slice(L,U),startOffset:L,active:!1,retries:this.maxRetries}),L=U,U=L+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(L){L.xhr.abort(),L.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var L=this;return this.promise=new Promise(function(U,ee){L.resolve=U,L.reject=ee}),this.start(),this.promise}},{key:"start",value:function(){var L=this;E({method:"POST",headers:b(b({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(U){if(U.status!=="success")return L.file.response=U,L.reject("server");L.sessionId=U.data.session_id,L.chunkSize=U.data.end_offset,L.createChunks(),L.startChunking()}).catch(function(U){L.file.response=U,L.reject("server")})}},{key:"startChunking",value:function(){for(var L=0;L<this.maxActiveChunks;L++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(L){var U=this;L.progress=0,L.active=!0,this.updateFileProgress(),L.xhr=C({method:"POST",headers:this.headers,url:this.action}),L.xhr.upload.addEventListener("progress",function(ee){ee.lengthComputable&&(L.progress=Math.round(ee.loaded/ee.total*100))},!1),T(L.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:L.startOffset,chunk:L.blob})).then(function(ee){if(L.active=!1,ee.status==="success")L.uploaded=!0;else if(L.retries--<=0)return U.stopChunks(),U.reject("upload");U.uploadNextChunk()}).catch(function(){if(L.active=!1,L.retries--<=0)return U.stopChunks(),U.reject("upload");U.uploadNextChunk()})}},{key:"finish",value:function(){var L=this;this.updateFileProgress(),this.stopSpeedCalc(),E({method:"POST",headers:b(b({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(U){if(L.file.response=U,U.status!=="success")return L.reject("server");L.resolve(U)}).catch(function(U){L.file.response=U,L.reject("server")})}},{key:"startSpeedCalc",value:function(){var L=this;this.file.speed=0;var U=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var ee=L.progress/100*L.fileSize;L.file.speed=ee-U,U=ee},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),j}(),F={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:$},R=n.defineComponent({props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return F}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var N=this,L=document.createElement("input");if(L.type="file",L.multiple=!0,window.FormData&&L.files?((typeof L.webkitdirectory=="boolean"||typeof L.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof L.ondrop<"u"&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var U=0;U<this.files.length;U++){var ee=this.files[U];this.maps[ee.id]=ee}this.$nextTick(function(){N.$parent?(N.$parent.$forceUpdate(),N.$parent.$nextTick(function(){N.watchDrop(N.drop)})):N.watchDrop(N.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var N,L=0;L<this.files.length;L++)if(N=this.files[L],N.fileObject&&!N.error&&!N.success)return!1;return!0},chunkOptions:function(){return Object.assign(F,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var N=[];return typeof this.extensions=="string"?N=this.extensions.split(","):N=this.extensions,N=N.map(function(L){return L.trim()}).filter(function(L){return L}),new RegExp("\\.("+N.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(N){this.watchActive(N)},dropActive:function(N){this.watchDropActive(N),this.$parent&&this.$parent.$forceUpdate()},drop:function(N){this.watchDrop(N)},modelValue:function(N){if(this.files!==N){this.files=N;var L=this.maps;this.maps={};for(var U=0;U<this.files.length;U++){var ee=this.files[U];this.maps[ee.id]=ee}for(var G in this.maps){var W=this.maps[G],ae=L[G];W!==ae&&this.emitFile(W,ae)}for(var ue in L)this.maps[ue]||this.emitFile(void 0,L[ue])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var N=this.files;this.files=[],this.maps={},this.emitInput();for(var L=0;L<N.length;L++)this.emitFile(void 0,N[L])}return!0},get:function(N){return N?v(N)==="object"?this.maps[N.id||""]||!1:this.maps[N]||!1:!1},add:function(N,L){var U;N instanceof Array?U=N:U=[N],L===void 0&&(L=this.addIndex);for(var ee=[],G=0;G<U.length;G++){var W=U[G];this.features.html5&&W instanceof Blob&&(W={id:"",file:W,size:W.size,name:W.webkitRelativePath||W.relativePath||W.name||"unknown",type:W.type}),W=W;var ae=!1;if(W.fileObject===!1||(W.fileObject||typeof Element<"u"&&W.el instanceof HTMLInputElement||typeof Blob<"u"&&W.file instanceof Blob)&&(ae=!0),ae&&(W=m(m({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},W),{},{response:{},progress:"0.00",speed:0}),W.data=m(m({},this.data),W.data?W.data:{}),W.headers=m(m({},this.headers),W.headers?W.headers:{})),W.id||(W.id=this.newId()),!this.emitFilter(W,void 0)&&(this.iMaximum>1&&ee.length+this.files.length>=this.iMaximum||(ee.push(W),this.iMaximum===1)))break}if(ee.length){this.iMaximum===1&&this.clear();var ue;if(L===!0||L===0)ue=ee.concat(this.files);else if(L){var ce;ue=this.files.concat([]),(ce=ue).splice.apply(ce,[L,0].concat(o(ee)))}else ue=this.files.concat(ee);this.files=ue;var oe=0;L===!0||L===0?oe=0:L?L>=0?L+ee.length>this.files.length?oe=this.files.length-ee.length:oe=L:(oe=this.files.length-ee.length+L,oe<0&&(oe=0)):oe=this.files.length-ee.length,ee=this.files.slice(oe,oe+ee.length);for(var ie=0;ie<ee.length;ie++){var Q=ee[ie];this.maps[Q.id]=Q}this.emitInput();for(var se=0;se<ee.length;se++)this.emitFile(ee[se],void 0);return N instanceof Array?ee:ee[0]}},addInputFile:function(N){var L=this,U=[];this.iMaximum;var ee=N.webkitEntries||N.entries||void 0;if(ee!=null&&ee.length)return this.getFileSystemEntry(ee).then(function(ue){return L.add(ue)});if(N.files)for(var G=0;G<N.files.length;G++){var W=N.files[G];U.push({id:"",size:W.size,name:W.webkitRelativePath||W.relativePath||W.name,type:W.type,file:W})}else{var ae=N.value.replace(/\\/g,"/").split("/");(!ae||!ae.length)&&(ae=[N.value]),delete N.__vuex__,U.push({id:"",name:ae[ae.length-1],el:N})}return Promise.resolve(this.add(U))},addDataTransfer:function(N){var L,U=this;if(N!=null&&(L=N.items)!==null&&L!==void 0&&L.length){for(var ee=[],G=0;G<N.items.length;G++){var W=N.items[G],ae=void 0;W.getAsEntry?ae=W.getAsEntry()||W.getAsFile():W.webkitGetAsEntry?ae=W.webkitGetAsEntry()||W.getAsFile():ae=W.getAsFile(),ae&&ee.push(ae)}return this.getFileSystemEntry(ee).then(function(ie){return U.add(ie)})}var ue=this.iMaximum,ce=[];if(N.files.length){for(var oe=0;oe<N.files.length&&(ce.push(N.files[oe]),!(ue>0&&ce.length>=ue));oe++);return Promise.resolve(this.add(ce))}return Promise.resolve([])},getFileSystemEntry:function(N){var L=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(ee){var G=L.iMaximum;if(!N){ee([]);return}if(N instanceof Array){var W=[],ae=function se(me){var xe=N[me];if(!xe||G>0&&W.length>=G)return ee(W);L.getFileSystemEntry(xe,U).then(function(de){W.push.apply(W,o(de)),se(me+1)})};ae(0);return}if(N instanceof Blob){ee([{id:"",size:N.size,name:U+N.name,type:N.type,file:N}]);return}if(N.isFile){var ue=N;ue.file(function(se){ee([{id:"",size:se.size,name:U+se.name,type:se.type,file:se}])});return}if(N.isDirectory&&L.dropDirectory){var ce=N,oe=[];L.createDirectory&&oe.push({id:"",name:U+ce.name,size:0,type:"text/directory",file:new File([],U+ce.name,{type:"text/directory"})});var ie=ce.createReader(),Q=function se(){ie.readEntries(function(me){var xe=function de(he){if(!me[he]&&he===0||G>0&&oe.length>=G)return ee(oe);if(!me[he])return se();L.getFileSystemEntry(me[he],U+ce.name+"/").then(function(Y){oe.push.apply(oe,o(Y)),de(he+1)})};xe(0)})};Q();return}ee([])})},replace:function(N,L){var U=this.get(N),ee=this.get(L);if(!U||!ee||U===ee)return!1;var G=this.files.concat([]),W=G.indexOf(U),ae=G.indexOf(ee);return W===-1||ae===-1?!1:(G[W]=ee,G[ae]=U,this.files=G,this.emitInput(),!0)},remove:function(N){var L=this.get(N);if(L){if(this.emitFilter(void 0,L))return!1;var U=this.files.concat([]),ee=U.indexOf(L);if(ee===-1)return console.error("remove",L),!1;U.splice(ee,1),this.files=U,delete this.maps[L.id],this.emitInput(),this.emitFile(void 0,L)}return L},update:function(N,L){var U=this.get(N);if(U){var ee=m(m({},U),L);if(U.fileObject&&U.active&&!ee.active&&!ee.error&&!ee.success&&(ee.error="abort"),this.emitFilter(ee,U))return!1;var G=this.files.concat([]),W=G.indexOf(U);return W===-1?(console.error("update",U),!1):(G.splice(W,1,ee),this.files=G,ee=this.files[W],delete this.maps[U.id],this.maps[ee.id]=ee,this.emitInput(),this.emitFile(ee,U),ee)}return!1},emitFilter:function(N,L){var U=!1;return this.$emit("input-filter",N,L,function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return U=ee,U}),U},emitFile:function(N,L){var U,ee=this;this.$emit("input-file",N,L),(U=N)!==null&&U!==void 0&&U.fileObject&&N.active&&(!L||!L.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){N&&ee.upload(N).then(function(){var G;N&&(N=ee.get(N)||void 0),(G=N)!==null&&G!==void 0&&G.fileObject&&ee.update(N,{active:!1,success:!N.error})}).catch(function(G){N&&ee.update(N,{active:!1,success:!1,error:G.code||G.error||G.message||G})})},Math.ceil(Math.random()*50+50))})):(!N||!N.fileObject||!N.active)&&L&&L.fileObject&&L.active&&this.uploading--,this.active&&(!!N!=!!L||N.active!==L.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(N){var L=this.get(N);if(!L)return Promise.reject(new Error("not_exists"));if(!L.fileObject)return Promise.reject(new Error("file_object"));if(L.error)return L.error instanceof Error?Promise.reject(L.error):Promise.reject(new Error(L.error));if(L.success)return Promise.resolve(L);if(L.name&&this.iExtensions&&L.type!=="text/directory"&&L.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&L.size!==void 0&&L.size>=0&&L.size>this.size&&L.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(L,this);if(this.features.html5){if(this.shouldUseChunkUpload(L))return this.uploadChunk(L);if(L.putAction)return this.uploadPut(L);if(L.postAction)return this.uploadHtml5(L)}return L.postAction?this.uploadHtml4(L):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(N){return this.chunkEnabled&&!!this.chunkOptions.handler&&N.size&&N.size>this.chunkOptions.minSize},uploadChunk:function(N){var L=this.chunkOptions.handler;return N.chunk=new L(N,this.chunkOptions),N.chunk.upload().then(function(U){return N})},uploadPut:function(N){var L=[],U;for(var ee in N.data)U=N.data[ee],U!=null&&L.push(encodeURIComponent(ee)+"="+encodeURIComponent(U));var G=N.putAction||"",W=L.length?(G.indexOf("?")===-1?"?":"&")+L.join("&"):"",ae=new XMLHttpRequest;return ae.open("PUT",G+W),this.uploadXhr(ae,N,N.file)},uploadHtml5:function(N){var L=new window.FormData,U;for(var ee in N.data)U=N.data[ee],U&&v(U)==="object"&&typeof U.toString!="function"?U instanceof File?L.append(ee,U,U.name):L.append(ee,JSON.stringify(U)):U!=null&&L.append(ee,U);L.append(this.name,N.file,N.name||N.file.name||N.file.filename);var G=new XMLHttpRequest;return G.open("POST",N.postAction||""),this.uploadXhr(G,N,L)},uploadXhr:function(N,L,U){var ee=this,G=L,W=0,ae=0;N.upload.onprogress=function(ce){if(G&&(G=ee.get(G),!(!ce.lengthComputable||!G||!G.fileObject||!G.active))){var oe=Math.round(Date.now()/1e3);oe!==W&&(W=oe,G=ee.update(G,{progress:(ce.loaded/ce.total*100).toFixed(2),speed:ce.loaded-ae}),ae=ce.loaded)}};var ue=window.setInterval(function(){if(G&&(G=ee.get(G))){var ce;if((ce=G)!==null&&ce!==void 0&&ce.fileObject&&!G.success&&!G.error&&G.active)return}ue&&(clearInterval(ue),ue=void 0);try{N.abort(),N.timeout=1}catch{}},100);return new Promise(function(ce,oe){if(!G){oe(new Error("not_exists"));return}var ie,Q=function(xe){if(!ie){if(ie=!0,ue&&(clearInterval(ue),ue=void 0),!G)return oe(new Error("not_exists"));if(G=ee.get(G),!G)return oe(new Error("not_exists"));if(!G.fileObject)return oe(new Error("file_object"));if(G.error)return G.error instanceof Error?oe(G.error):oe(new Error(G.error));if(!G.active)return oe(new Error("abort"));if(G.success)return ce(G);var de={};switch(xe.type){case"timeout":case"abort":de.error=xe.type;break;case"error":N.status?N.status>=500?de.error="server":N.status>=400&&(de.error="denied"):de.error="network";break;default:N.status>=500?de.error="server":N.status>=400?de.error="denied":de.progress="100.00"}if(N.responseText){var he=N.getResponseHeader("Content-Type");he&&he.indexOf("/json")!==-1?de.response=JSON.parse(N.responseText):de.response=N.responseText}return G=ee.update(G,de),G?G.error?G.error instanceof Error?oe(G.error):oe(new Error(G.error)):ce(G):oe(new Error("abort"))}};N.onload=Q,N.onerror=Q,N.onabort=Q,N.ontimeout=Q,G.timeout&&(N.timeout=G.timeout);for(var se in G.headers)N.setRequestHeader(se,G.headers[se]);G=ee.update(G,{xhr:N}),G&&N.send(U)})},uploadHtml4:function(N){var L=this,U=N;if(!U)return Promise.reject(new Error("not_exists"));var ee=function(Q){Q.keyCode===27&&Q.preventDefault()},G=document.createElement("iframe");G.id="upload-iframe-"+U.id,G.name="upload-iframe-"+U.id,G.src="about:blank",G.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var W=document.createElement("form");W.setAttribute("action",U.postAction||""),W.name="upload-form-"+U.id,W.setAttribute("method","POST"),W.setAttribute("target","upload-iframe-"+U.id),W.setAttribute("enctype","multipart/form-data");for(var ae in U.data){var ue=U.data[ae];if(ue&&v(ue)==="object"&&typeof ue.toString!="function"&&(ue=JSON.stringify(ue)),ue!=null){var ce=document.createElement("input");ce.type="hidden",ce.name=ae,ce.value=ue,W.appendChild(ce)}}W.appendChild(U.el),document.body.appendChild(G).appendChild(W);var oe=function(){var Q,se;try{G.contentWindow&&(se=G.contentWindow.document)}catch{}if(!se)try{se=G.contentDocument?G.contentDocument:G.document}catch{se=G.document}return(Q=se)!==null&&Q!==void 0&&Q.body?se.body.innerHTML:null};return new Promise(function(ie,Q){setTimeout(function(){if(!U){Q(new Error("not_exists"));return}if(U=L.update(U,{iframe:G}),!U)return Q(new Error("not_exists"));var se=window.setInterval(function(){U&&(U=L.get(U))&&U.fileObject&&!U.success&&!U.error&&U.active||(se&&(clearInterval(se),se=void 0),G.onabort({type:U?"abort":"not_exists"}))},100),me,xe=function(he){var Y;if(!me){if(me=!0,se&&(clearInterval(se),se=void 0),document.body.removeEventListener("keydown",ee),!U)return Q(new Error("not_exists"));if(U=L.get(U),!U)return Q(new Error("not_exists"));if(!U.fileObject)return Q(new Error("file_object"));if(U.error)return U.error instanceof Error?Q(U.error):Q(new Error(U.error));if(!U.active)return Q(new Error("abort"));if(U.success)return ie(U);var X=oe(),re={};if(typeof he=="string")return Q(new Error(he));switch(he.type){case"abort":re.error="abort";break;case"error":U.error?re.error=U.error:X===null?re.error="network":re.error="denied";break;default:U.error?re.error=U.error:X===null?re.error="network":re.progress="100.00"}if(X!==null){if(X&&X.substr(0,1)==="{"&&X.substr(X.length-1,1)==="}")try{X=JSON.parse(X)}catch{}re.response=X}return U=L.update(U,re),U?(Y=U)!==null&&Y!==void 0&&Y.error?U.error instanceof Error?Q(U.error):Q(new Error(U.error)):ie(U):Q(new Error("not_exists"))}};G.onload=xe,G.onerror=xe,G.onabort=xe,document.body.addEventListener("keydown",ee),W.submit()},50)}).then(function(ie){var Q;return G==null||(Q=G.parentNode)===null||Q===void 0||Q.removeChild(G),ie}).catch(function(ie){var Q;return G==null||(Q=G.parentNode)===null||Q===void 0||Q.removeChild(G),ie})},watchActive:function(N){for(var L,U=0;L=this.files[U];)if(U++,L.fileObject)if(N&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!L.active&&!L.error&&!L.success&&this.update(L,{active:!0})}else L.active&&this.update(L,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(N){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&N!==L){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var U=null;if(N)if(typeof N=="string")U=document.querySelector(N)||this.$root.$el.querySelector(N);else if(N===!0){var ee;if(U=this.$parent.$el,!U||((ee=U)===null||ee===void 0?void 0:ee.nodeType)===8){var G;U=this.$root.$el,(!U||((G=U)===null||G===void 0?void 0:G.nodeType)===8)&&(U=document.body)}}else U=N;this.dropElement=U,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(N,L){N!==L&&(this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),N&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(N){var L,U;if(!this.dropActive&&N.dataTransfer){var ee=N.dataTransfer;ee!=null&&(L=ee.files)!==null&&L!==void 0&&L.length?this.dropActive=!0:ee.types?ee.types.indexOf&&ee.types.indexOf("Files")!==-1?this.dropActive=!0:(U=ee.types)!==null&&U!==void 0&&U.contains&&ee.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(N){this.dropActive&&(N.target===N.explicitOriginalTarget||!N.fromElement&&(N.clientX<=0||N.clientY<=0||N.clientX>=window.innerWidth||N.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragover:function(N){N.preventDefault()},onDrop:function(N){N.preventDefault(),N.dataTransfer&&this.addDataTransfer(N.dataTransfer)},inputOnChange:async function(N){var L=this;if(!(N.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));N.target;var U=function(G){return L.reload=!0,L.$nextTick(function(){L.reload=!1}),G};return this.addInputFile(N.target).then(U).catch(U)}}}),B=["for"],V=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function P(j,N,L,U,ee,G){return n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(j.className)},[n.renderSlot(j.$slots,"default"),n.createElementVNode("label",{for:j.forId},null,8,B),j.reload?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("input",{key:0,ref:"input",type:"file",name:j.name,id:j.forId,accept:j.accept,capture:j.capture,disabled:j.disabled,webkitdirectory:j.iDirectory,allowdirs:j.iDirectory,directory:j.iDirectory,multiple:j.multiple&&j.features.html5,onChange:N[0]||(N[0]=function(){return j.inputOnChange&&j.inputOnChange.apply(j,arguments)})},null,40,V))],2)}function z(j,N){N===void 0&&(N={});var L=N.insertAt;if(!(!j||typeof document>"u")){var U=document.head||document.getElementsByTagName("head")[0],ee=document.createElement("style");ee.type="text/css",L==="top"&&U.firstChild?U.insertBefore(ee,U.firstChild):U.appendChild(ee),ee.styleSheet?ee.styleSheet.cssText=j:ee.appendChild(document.createTextNode(j))}}var H=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  position: absolute;
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return z(H),R.render=P,R})})(ZI);var ZY=ZI.exports;const YY=Bt(ZY),Qu=xc();let _b=0;const XY=()=>{const e=_b;return _b+=1,e},QY=()=>(e,t)=>{const n={...e,id:XY(),group:e.group||""};return Qu.emit("notify",{notification:n,timeout:t}),()=>Qu.emit("close",n.id)},YI="context",Ib=Le({__name:"Notification",props:{maxNotifications:{default:10},enter:{default:""},enterFrom:{default:""},enterTo:{default:""},leave:{default:""},leaveFrom:{default:""},leaveTo:{default:""},move:{default:""},moveDelay:{default:""}},emits:["close"],setup(e,{emit:t}){const n=e,o=Pe(YI),a=uo({notifications:[],timeouts:{}}),r=O(()=>a.notifications.filter(v=>v.group===o.group)),s=O(()=>o.position==="bottom"?[...r.value]:[...r.value].reverse()),i=(v,y)=>{a.timeouts[v]=window.setTimeout(()=>{y!==-1&&u(v)},Math.max(y||3e3,0))},u=v=>{a.notifications.splice(a.notifications.findIndex(y=>y.id===v),1),clearTimeout(a.timeouts[v])},c=({notification:v,timeout:y})=>{a.notifications.length!==n.maxNotifications&&(a.notifications.push(v),i(v.id,y))},m=v=>{t("close"),u(v)},f=(v,y,b)=>{y?clearTimeout(a.timeouts[v]):i(v,b)};return Je(()=>{Qu.on("notify",c),Qu.on("close",u)}),(v,y)=>(g(),A(li,{"enter-active-class":h(r).length>1?[n.enter,n.moveDelay].join(" "):n.enter,"enter-from-class":n.enterFrom,"enter-to-class":n.enterTo,"leave-active-class":n.leave,"leave-from-class":n.leaveFrom,"leave-to-class":n.leaveTo,"move-class":n.move},{default:p(()=>[Se(v.$slots,"default",{notifications:h(s),close:m,hovering:f})]),_:3},8,["enter-active-class","enter-from-class","enter-to-class","leave-active-class","leave-from-class","leave-to-class","move-class"]))}}),wb=Le({__name:"NotificationGroup",props:{group:{default:""},position:{default:"top"}},setup(e){const t=e;return st(YI,{group:t.group,position:t.position}),(n,o)=>Se(n.$slots,"default",{group:e.group})}});function JY(e){e.config.globalProperties.$notify=QY(),e.component("Notification",Ib),e.component("NotificationGroup",wb),e.component("notification",Ib),e.component("notificationGroup",wb)}const eX={install:JY},Si=Object.assign({inheritAttrs:!1},{__name:"AsyncComponentLoader",setup(e){return(t,n)=>{const o=d("ISpinner");return g(),A(o,{class:"size-4 text-primary-500"})}}});function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sf.apply(this,arguments)}var tX=function(){var t=!1,n=[],o=function(){if(!t){t=!0;for(var i=0,u=n.length;i<u;i++)n[i]()}},a=function(i){if(!t){n.push(i);return}i()},r={resolved:function(){return t},resolve:o,promise:{then:a}};return r},xb=Object.prototype.hasOwnProperty;function nX(){var e=tX();return{notify:function(){e.resolve()},wait:function(){return e.promise},render:function(n,o,a){this.wait().then(function(){a(window.grecaptcha.render(n,o))})},reset:function(n){typeof n>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(n)}))},execute:function(n){typeof n>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(n)}))},checkRecaptchaLoad:function(){xb.call(window,"grecaptcha")&&xb.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!e.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var Bs=nX();typeof window<"u"&&(window.vueRecaptchaApiLoaded=Bs.notify);var Xp=Le({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(t,n){var o=n.slots,a=n.emit,r=M(null),s=M(null),i=function(f){a("verify",f)},u=function(){a("expired")},c=function(){a("error")};return Je(function(){if(Bs.checkRecaptchaLoad(),t.loadRecaptchaScript&&!document.getElementById(t.recaptchaScriptId)){var m=document.createElement("script");m.id=t.recaptchaScriptId,m.src="https://"+t.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+t.language,m.async=!0,m.defer=!0,document.head.appendChild(m)}var f=Sf({},t,{callback:i,"expired-callback":u,"error-callback":c}),v=r.value,y=o.default?v.children[0]:v;Bs.render(y,f,function(b){s.value=b,a("render",b)})}),{root:r,widgetId:s,reset:function(){Bs.reset(s.value)},execute:function(){Bs.execute(s.value)}}},render:function(){var t=this.$slots.default,n;return typeof t=="function"?n=t():n=t,Ae("div",{ref:"root"},n)}});const oX={class:"flex items-center justify-between"},aX={__name:"AuthLogin",setup(e){const{appUrl:t,scriptConfig:n,setting:o}=Ne(),a=n("reCaptcha")||{},r=M(null),s=M(null),i=M(!1),{form:u}=Ze({email:null,password:null,remember:null,"g-recaptcha-response":null}),c=O(()=>i.value);async function m(){i.value=!0,r.value.blur(),await Innoclapps.request(t+"/sanctum/csrf-cookie"),u.post(t+"/login").then(v=>window.location.href=v.redirect_path).finally(()=>s.value&&s.value.reset()).catch(()=>i.value=!1)}function f(v){u.fill("g-recaptcha-response",v)}return(v,y)=>{const b=d("IFormInput"),w=d("IFormError"),k=d("IFormGroup"),x=d("IFormCheckbox"),I=d("IFormCheckboxLabel"),C=d("IFormCheckboxField"),S=d("ILinkBase"),T=d("IButton");return g(),D("form",{class:"space-y-6",onSubmit:y[3]||(y[3]=ot((...E)=>v.submit&&v.submit(...E),["prevent"]))},[l(k,{"label-for":"email",label:v.$t("auth.login")},{default:p(()=>[l(b,{id:"email",modelValue:h(u).email,"onUpdate:modelValue":y[0]||(y[0]=E=>h(u).email=E),type:"email",name:"email",autocomplete:"email",autofocus:"",required:""},null,8,["modelValue"]),l(w,{error:h(u).getError("email")},null,8,["error"])]),_:1},8,["label"]),l(k,{"label-for":"password",label:v.$t("auth.password")},{default:p(()=>[l(b,{id:"password",ref_key:"passwordRef",ref:r,modelValue:h(u).password,"onUpdate:modelValue":y[1]||(y[1]=E=>h(u).password=E),type:"password",name:"password",autocomplete:"current-password",required:""},null,8,["modelValue"]),l(w,{error:h(u).getError("password")},null,8,["error"])]),_:1},8,["label"]),h(a).validate?(g(),A(k,{key:0},{default:p(()=>[l(h(Xp),{ref_key:"reCaptchaRef",ref:s,sitekey:h(a).siteKey,onVerify:f},null,8,["sitekey"]),l(w,{error:h(u).getError("g-recaptcha-response")},null,8,["error"])]),_:1})):K("",!0),_("div",oX,[l(C,null,{default:p(()=>[l(x,{modelValue:h(u).remember,"onUpdate:modelValue":y[2]||(y[2]=E=>h(u).remember=E)},null,8,["modelValue"]),l(I,{text:v.$t("auth.remember_me")},null,8,["text"])]),_:1}),h(o)("disable_password_forgot")?K("",!0):(g(),A(S,{key:0,variant:"primary",href:"/password/reset"},{default:p(()=>[le(Z(v.$t("auth.forgot_password")),1)]),_:1}))]),l(T,{type:"submit",variant:"primary",disabled:c.value,loading:i.value,text:v.$t("auth.login"),block:"",onClick:m},null,8,["disabled","loading","text"])],32)}}},rX={__name:"AuthPasswordEmail",setup(e){const{appUrl:t,scriptConfig:n}=Ne(),{form:o}=Ze({email:null,"g-recaptcha-response":null},{resetOnSuccess:!0}),a=n("reCaptcha")||{},r=M(null),s=M(!1),i=M(null);async function u(){s.value=!0,i.value=null,await Innoclapps.request(t+"/sanctum/csrf-cookie"),o.post(t+"/password/email").then(m=>{i.value=m.message}).finally(()=>{s.value=!1,r.value&&r.value.reset()})}function c(m){o.fill("g-recaptcha-response",m)}return(m,f)=>{const v=d("IAlertBody"),y=d("IAlert"),b=d("IFormInput"),w=d("IFormError"),k=d("IFormGroup"),x=d("IButton");return g(),D("form",{class:"space-y-6",onSubmit:f[1]||(f[1]=ot((...I)=>m.submit&&m.submit(...I),["prevent"]))},[l(y,{variant:"success",show:i.value!==null},{default:p(()=>[l(v,null,{default:p(()=>[le(Z(i.value||""),1)]),_:1})]),_:1},8,["show"]),l(k,{"label-for":"email",label:m.$t("auth.email_address")},{default:p(()=>[l(b,{id:"email",modelValue:h(o).email,"onUpdate:modelValue":f[0]||(f[0]=I=>h(o).email=I),type:"email",name:"email",autocomplete:"email",autofocus:"",required:""},null,8,["modelValue"]),l(w,{error:h(o).getError("email")},null,8,["error"])]),_:1},8,["label"]),h(a).validate?(g(),A(k,{key:0},{default:p(()=>[l(h(Xp),{ref_key:"reCaptchaRef",ref:r,sitekey:h(a).siteKey,onVerify:c},null,8,["sitekey"]),l(w,{error:h(o).getError("g-recaptcha-response")},null,8,["error"])]),_:1})):K("",!0),l(x,{type:"submit",variant:"primary",disabled:s.value||!h(o).email,loading:s.value,text:m.$t("passwords.send_password_reset_link"),block:"",onClick:u},null,8,["disabled","loading","text"])],32)}}},lX={__name:"AuthPasswordReset",props:{email:String,token:{required:!0,type:String}},setup(e){const t=e,{appUrl:n}=Ne(),o=M(!1),a=M(null),{form:r}=Ze({token:t.token,email:t.email,password:null,password_confirmation:null});async function s(){o.value=!0,await Innoclapps.request(n+"/sanctum/csrf-cookie"),r.post(n+"/password/reset").then(i=>a.value=i.message).finally(()=>o.value=!1)}return(i,u)=>{const c=d("ILinkBase"),m=d("IAlertBody"),f=d("IAlert"),v=d("IFormInput"),y=d("IFormError"),b=d("IFormGroup"),w=d("IButton");return g(),D("form",{class:"space-y-6",onSubmit:u[3]||(u[3]=ot((...k)=>i.submit&&i.submit(...k),["prevent"]))},[l(f,{variant:"success",show:a.value!==null},{default:p(()=>[l(m,null,{default:p(()=>[le(Z(a.value)+" ",1),l(c,{class:"mt-2 font-medium",variant:"primary",href:"/login"},{default:p(()=>[le(Z(i.$t("core::dashboard.dashboard")),1)]),_:1})]),_:1})]),_:1},8,["show"]),l(b,{"label-for":"email",label:i.$t("auth.email_address")},{default:p(()=>[l(v,{id:"email",modelValue:h(r).email,"onUpdate:modelValue":u[0]||(u[0]=k=>h(r).email=k),type:"email",name:"email",autocomplete:"email",autofocus:"",required:""},null,8,["modelValue"]),l(y,{error:h(r).getError("email")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"password",label:i.$t("auth.password")},{default:p(()=>[l(v,{id:"password",modelValue:h(r).password,"onUpdate:modelValue":u[1]||(u[1]=k=>h(r).password=k),type:"password",name:"password",autocomplete:"new-password",required:""},null,8,["modelValue"]),l(y,{error:h(r).getError("password")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"password-confirm",label:i.$t("auth.confirm_password")},{default:p(()=>[l(v,{id:"password-confirm",modelValue:h(r).password_confirmation,"onUpdate:modelValue":u[2]||(u[2]=k=>h(r).password_confirmation=k),type:"password",name:"password_confirmation",autocomplete:"new-password",required:""},null,8,["modelValue"])]),_:1},8,["label"]),l(w,{type:"submit",variant:"primary",disabled:o.value,loading:o.value,text:i.$t("passwords.reset_password"),block:"",onClick:s},null,8,["disabled","loading","text"])],32)}}};function XI(e,t,n){let o=M(n==null?void 0:n.value),a=O(()=>e.value!==void 0);return[O(()=>a.value?e.value:o.value),function(r){return a.value||(o.value=r),t==null?void 0:t(r)}]}let sX=Symbol("headlessui.useid"),iX=0;function Bn(){return Pe(sX,()=>`${++iX}`)()}function qe(e){var t;if(e==null||e.value==null)return null;let n=(t=e.value.$el)!=null?t:e.value;return n instanceof Node?n:null}function Nn(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Nn),o}var uX=Object.defineProperty,cX=(e,t,n)=>t in e?uX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kb=(e,t,n)=>(cX(e,typeof t!="symbol"?t+"":t,n),n);let dX=class{constructor(){kb(this,"current",this.detect()),kb(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Ti=new dX;function oo(e){if(Ti.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=qe(e);if(t)return t.ownerDocument}return document}let Tf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Jt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Jt||{}),Zo=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Zo||{}),mX=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(mX||{});function Ei(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Tf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Yc=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Yc||{});function Xc(e,t=0){var n;return e===((n=oo(e))==null?void 0:n.body)?!1:Nn(t,{0(){return e.matches(Tf)},1(){let o=e;for(;o!==null;){if(o.matches(Tf))return!0;o=o.parentElement}return!1}})}function QI(e){let t=oo(e);ze(()=>{t&&!Xc(t.activeElement,0)&&ir(e)})}var fX=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(fX||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ir(e){e==null||e.focus({preventScroll:!0})}let pX=["textarea","input"].join(",");function vX(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,pX))!=null?n:!1}function ar(e,t=n=>n){return e.slice().sort((n,o)=>{let a=t(n),r=t(o);if(a===null||r===null)return 0;let s=a.compareDocumentPosition(r);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function hX(e,t){return Ln(Ei(),t,{relativeTo:e})}function Ln(e,t,{sorted:n=!0,relativeTo:o=null,skipElements:a=[]}={}){var r;let s=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?r:document,i=Array.isArray(e)?n?ar(e):e:Ei(e);a.length>0&&i.length>1&&(i=i.filter(b=>!a.includes(b))),o=o??s.activeElement;let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(o))-1;if(t&4)return Math.max(0,i.indexOf(o))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=t&32?{preventScroll:!0}:{},f=0,v=i.length,y;do{if(f>=v||f+v<=0)return 0;let b=c+f;if(t&16)b=(b+v)%v;else{if(b<0)return 3;if(b>=v)return 1}y=i[b],y==null||y.focus(m),f+=u}while(y!==s.activeElement);return t&6&&vX(y)&&y.select(),2}function JI(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function gX(){return/Android/gi.test(window.navigator.userAgent)}function bX(){return JI()||gX()}function hu(e,t,n){Ti.isServer||on(o=>{document.addEventListener(e,t,n),o(()=>document.removeEventListener(e,t,n))})}function ew(e,t,n){Ti.isServer||on(o=>{window.addEventListener(e,t,n),o(()=>window.removeEventListener(e,t,n))})}function Qp(e,t,n=O(()=>!0)){function o(r,s){if(!n.value||r.defaultPrevented)return;let i=s(r);if(i===null||!i.getRootNode().contains(i))return;let u=function c(m){return typeof m=="function"?c(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let c of u){if(c===null)continue;let m=c instanceof HTMLElement?c:qe(c);if(m!=null&&m.contains(i)||r.composed&&r.composedPath().includes(m))return}return!Xc(i,Yc.Loose)&&i.tabIndex!==-1&&r.preventDefault(),t(r,i)}let a=M(null);hu("pointerdown",r=>{var s,i;n.value&&(a.value=((i=(s=r.composedPath)==null?void 0:s.call(r))==null?void 0:i[0])||r.target)},!0),hu("mousedown",r=>{var s,i;n.value&&(a.value=((i=(s=r.composedPath)==null?void 0:s.call(r))==null?void 0:i[0])||r.target)},!0),hu("click",r=>{bX()||a.value&&(o(r,()=>a.value),a.value=null)},!0),hu("touchend",r=>o(r,()=>r.target instanceof HTMLElement?r.target:null),!0),ew("blur",r=>o(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function $b(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function Qc(e,t){let n=M($b(e.value.type,e.value.as));return Je(()=>{n.value=$b(e.value.type,e.value.as)}),on(()=>{var o;n.value||qe(t)&&qe(t)instanceof HTMLButtonElement&&!((o=qe(t))!=null&&o.hasAttribute("type"))&&(n.value="button")}),n}function Cb(e){return[e.screenX,e.screenY]}function yX(){let e=M([-1,-1]);return{wasMoved(t){let n=Cb(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=Cb(t)}}}function tw({container:e,accept:t,walk:n,enabled:o}){on(()=>{let a=e.value;if(!a||o!==void 0&&!o.value)return;let r=oo(e);if(!r)return;let s=Object.assign(u=>t(u),{acceptNode:t}),i=r.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,s,!1);for(;i.nextNode();)n(i.currentNode)})}var Lo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Lo||{}),rr=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(rr||{});function tn({visible:e=!0,features:t=0,ourProps:n,theirProps:o,...a}){var r;let s=ow(o,n),i=Object.assign(a,{props:s});if(e||t&2&&s.static)return hm(i);if(t&1){let u=(r=s.unmount)==null||r?0:1;return Nn(u,{0(){return null},1(){return hm({...a,props:{...s,hidden:!0,style:{display:"none"}}})}})}return hm(i)}function hm({props:e,attrs:t,slots:n,slot:o,name:a}){var r,s;let{as:i,...u}=Fi(e,["unmount","static"]),c=(r=n.default)==null?void 0:r.call(n,o),m={};if(o){let f=!1,v=[];for(let[y,b]of Object.entries(o))typeof b=="boolean"&&(f=!0),b===!0&&v.push(y);f&&(m["data-headlessui-state"]=v.join(" "))}if(i==="template"){if(c=nw(c??[]),Object.keys(u).length>0||Object.keys(t).length>0){let[f,...v]=c??[];if(!_X(f)||v.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${a} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(u).concat(Object.keys(t)).map(w=>w.trim()).filter((w,k,x)=>x.indexOf(w)===k).sort((w,k)=>w.localeCompare(k)).map(w=>`  - ${w}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(w=>`  - ${w}`).join(`
`)].join(`
`));let y=ow((s=f.props)!=null?s:{},u,m),b=si(f,y,!0);for(let w in y)w.startsWith("on")&&(b.props||(b.props={}),b.props[w]=y[w]);return b}return Array.isArray(c)&&c.length===1?c[0]:c}return Ae(i,Object.assign({},u,m),{default:()=>c})}function nw(e){return e.flatMap(t=>t.type===fe?nw(t.children):[t])}function ow(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let o of e)for(let a in o)a.startsWith("on")&&typeof o[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(o[a])):t[a]=o[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(o=>[o,void 0])));for(let o in n)Object.assign(t,{[o](a,...r){let s=n[o];for(let i of s){if(a instanceof Event&&a.defaultPrevented)return;i(a,...r)}}});return t}function aw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Fi(e,t=[]){let n=Object.assign({},e);for(let o of t)o in n&&delete n[o];return n}function _X(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Jo=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Jo||{});let ea=Le({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{var o;let{features:a,...r}=e,s={"aria-hidden":(a&2)===2?!0:(o=r["aria-hidden"])!=null?o:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(a&4)===4&&(a&2)!==2&&{display:"none"}}};return tn({ourProps:s,theirProps:r,slot:{},attrs:n,slots:t,name:"Hidden"})}}}),rw=Symbol("Context");var Sn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Sn||{});function IX(){return cs()!==null}function cs(){return Pe(rw,null)}function Jp(e){st(rw,e)}var Tt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Tt||{});function wX(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ar=[];wX(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Ar[0]!==t.target&&(Ar.unshift(t.target),Ar=Ar.filter(n=>n!=null&&n.isConnected),Ar.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function xX(e){throw new Error("Unexpected object: "+e)}var Io=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Io||{});function kX(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),a=o??-1;switch(e.focus){case 0:{for(let r=0;r<n.length;++r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 1:{a===-1&&(a=n.length);for(let r=a-1;r>=0;--r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 2:{for(let r=a+1;r<n.length;++r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 3:{for(let r=n.length-1;r>=0;--r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 4:{for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return o}case 5:return null;default:xX(e)}}function Jc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ai(){let e=[],t={addEventListener(n,o,a,r){return n.addEventListener(o,a,r),t.add(()=>n.removeEventListener(o,a,r))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return Jc(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,a){let r=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:a}),this.add(()=>{Object.assign(n.style,{[o]:r})})},group(n){let o=Ai();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let a of e.splice(o,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function lw(e={},t=null,n=[]){for(let[o,a]of Object.entries(e))iw(n,sw(t,o),a);return n}function sw(e,t){return e?e+"["+t+"]":t}function iw(e,t,n){if(Array.isArray(n))for(let[o,a]of n.entries())iw(e,sw(t,o.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):lw(n,t,e)}function uw(e){var t,n;let o=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(o){for(let a of o.elements)if(a!==e&&(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image")){a.click();return}(n=o.requestSubmit)==null||n.call(o)}}function ev(e,t,n,o){Ti.isServer||on(a=>{e=e??window,e.addEventListener(t,n,o),a(()=>e.removeEventListener(t,n,o))})}var wo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(wo||{});function tv(){let e=M(0);return ew("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function cw(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=qe(n);o instanceof HTMLElement&&t.add(o)}return t}var dw=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(dw||{});let Es=Object.assign(Le({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:M(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let a=M(null);o({el:a,$el:a});let r=O(()=>oo(a)),s=M(!1);Je(()=>s.value=!0),rn(()=>s.value=!1),CX({ownerDocument:r},O(()=>s.value&&!!(e.features&16)));let i=SX({ownerDocument:r,container:a,initialFocus:O(()=>e.initialFocus)},O(()=>s.value&&!!(e.features&2)));TX({ownerDocument:r,container:a,containers:e.containers,previousActiveElement:i},O(()=>s.value&&!!(e.features&8)));let u=tv();function c(y){let b=qe(a);b&&(w=>w())(()=>{Nn(u.value,{[wo.Forwards]:()=>{Ln(b,Jt.First,{skipElements:[y.relatedTarget]})},[wo.Backwards]:()=>{Ln(b,Jt.Last,{skipElements:[y.relatedTarget]})}})})}let m=M(!1);function f(y){y.key==="Tab"&&(m.value=!0,requestAnimationFrame(()=>{m.value=!1}))}function v(y){if(!s.value)return;let b=cw(e.containers);qe(a)instanceof HTMLElement&&b.add(qe(a));let w=y.relatedTarget;w instanceof HTMLElement&&w.dataset.headlessuiFocusGuard!=="true"&&(mw(b,w)||(m.value?Ln(qe(a),Nn(u.value,{[wo.Forwards]:()=>Jt.Next,[wo.Backwards]:()=>Jt.Previous})|Jt.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&ir(y.target)))}return()=>{let y={},b={ref:a,onKeydown:f,onFocusout:v},{features:w,initialFocus:k,containers:x,...I}=e;return Ae(fe,[!!(w&4)&&Ae(ea,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:c,features:Jo.Focusable}),tn({ourProps:b,theirProps:{...t,...I},slot:y,attrs:t,slots:n,name:"FocusTrap"}),!!(w&4)&&Ae(ea,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:c,features:Jo.Focusable})])}}}),{features:dw});function $X(e){let t=M(Ar.slice());return $e([e],([n],[o])=>{o===!0&&n===!1?Jc(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Ar.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function CX({ownerDocument:e},t){let n=$X(t);Je(()=>{on(()=>{var o,a;t.value||((o=e.value)==null?void 0:o.activeElement)===((a=e.value)==null?void 0:a.body)&&ir(n())},{flush:"post"})}),rn(()=>{t.value&&ir(n())})}function SX({ownerDocument:e,container:t,initialFocus:n},o){let a=M(null),r=M(!1);return Je(()=>r.value=!0),rn(()=>r.value=!1),Je(()=>{$e([t,n,o],(s,i)=>{if(s.every((c,m)=>(i==null?void 0:i[m])===c)||!o.value)return;let u=qe(t);u&&Jc(()=>{var c,m;if(!r.value)return;let f=qe(n),v=(c=e.value)==null?void 0:c.activeElement;if(f){if(f===v){a.value=v;return}}else if(u.contains(v)){a.value=v;return}f?ir(f):Ln(u,Jt.First|Jt.NoScroll)===Zo.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.value=(m=e.value)==null?void 0:m.activeElement})},{immediate:!0,flush:"post"})}),a}function TX({ownerDocument:e,container:t,containers:n,previousActiveElement:o},a){var r;ev((r=e.value)==null?void 0:r.defaultView,"focus",s=>{if(!a.value)return;let i=cw(n);qe(t)instanceof HTMLElement&&i.add(qe(t));let u=o.value;if(!u)return;let c=s.target;c&&c instanceof HTMLElement?mw(i,c)?(o.value=c,ir(c)):(s.preventDefault(),s.stopPropagation(),ir(u)):ir(o.value)},!0)}function mw(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function EX(e){let t=Pt(e.getSnapshot());return rn(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function FX(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(a){return o.add(a),()=>o.delete(a)},dispatch(a,...r){let s=t[a].call(n,...r);s&&(n=s,o.forEach(i=>i()))}}}function AX(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,a=o.clientWidth-o.offsetWidth,r=e-a;n.style(o,"paddingRight",`${r}px`)}}}function RX(){return JI()?{before({doc:e,d:t,meta:n}){function o(a){return n.containers.flatMap(r=>r()).some(r=>r.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let i=Ai();i.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>i.dispose()))}let r=(a=window.scrollY)!=null?a:window.pageYOffset,s=null;t.addEventListener(e,"click",i=>{if(i.target instanceof HTMLElement)try{let u=i.target.closest("a");if(!u)return;let{hash:c}=new URL(u.href),m=e.querySelector(c);m&&!o(m)&&(s=m)}catch{}},!0),t.addEventListener(e,"touchstart",i=>{if(i.target instanceof HTMLElement)if(o(i.target)){let u=i.target;for(;u.parentElement&&o(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(i.target,"touchAction","none")}),t.addEventListener(e,"touchmove",i=>{if(i.target instanceof HTMLElement)if(o(i.target)){let u=i.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&i.preventDefault()}else i.preventDefault()},{passive:!1}),t.add(()=>{var i;let u=(i=window.scrollY)!=null?i:window.pageYOffset;r!==u&&window.scrollTo(0,r),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function DX(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function OX(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Pr=FX(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ai(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:OX(n)},a=[RX(),AX(),DX()];a.forEach(({before:r})=>r==null?void 0:r(o)),a.forEach(({after:r})=>r==null?void 0:r(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Pr.subscribe(()=>{let e=Pr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!o||!a&&o)&&Pr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Pr.dispatch("TEARDOWN",n)}});function BX(e,t,n){let o=EX(Pr),a=O(()=>{let r=e.value?o.value.get(e.value):void 0;return r?r.count>0:!1});return $e([e,t],([r,s],[i],u)=>{if(!r||!s)return;Pr.dispatch("PUSH",r,n);let c=!1;u(()=>{c||(Pr.dispatch("POP",i??r,n),c=!0)})},{immediate:!0}),a}let gm=new Map,Fs=new Map;function Sb(e,t=M(!0)){on(n=>{var o;if(!t.value)return;let a=qe(e);if(!a)return;n(function(){var s;if(!a)return;let i=(s=Fs.get(a))!=null?s:1;if(i===1?Fs.delete(a):Fs.set(a,i-1),i!==1)return;let u=gm.get(a);u&&(u["aria-hidden"]===null?a.removeAttribute("aria-hidden"):a.setAttribute("aria-hidden",u["aria-hidden"]),a.inert=u.inert,gm.delete(a))});let r=(o=Fs.get(a))!=null?o:0;Fs.set(a,r+1),r===0&&(gm.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),a.setAttribute("aria-hidden","true"),a.inert=!0)})}function fw({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let o=M(null),a=oo(o);function r(){var s,i,u;let c=[];for(let m of e)m!==null&&(m instanceof HTMLElement?c.push(m):"value"in m&&m.value instanceof HTMLElement&&c.push(m.value));if(t!=null&&t.value)for(let m of t.value)c.push(m);for(let m of(s=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?s:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(qe(o))||m.contains((u=(i=qe(o))==null?void 0:i.getRootNode())==null?void 0:u.host)||c.some(f=>m.contains(f))||c.push(m));return c}return{resolveContainers:r,contains(s){return r().some(i=>i.contains(s))},mainTreeNodeRef:o,MainTreeNode(){return n!=null?null:Ae(ea,{features:Jo.Hidden,ref:o})}}}function NX(){let e=M(null);return{mainTreeNodeRef:e,MainTreeNode(){return Ae(ea,{features:Jo.Hidden,ref:e})}}}let pw=Symbol("ForcePortalRootContext");function PX(){return Pe(pw,!1)}let Ef=Le({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n}){return st(pw,e.force),()=>{let{force:o,...a}=e;return tn({theirProps:a,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})}}}),vw=Symbol("StackContext");var Ff=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ff||{});function MX(){return Pe(vw,()=>{})}function VX({type:e,enabled:t,element:n,onUpdate:o}){let a=MX();function r(...s){o==null||o(...s),a(...s)}Je(()=>{$e(t,(s,i)=>{s?r(0,e,n):i===!0&&r(1,e,n)},{immediate:!0,flush:"sync"})}),rn(()=>{t.value&&r(1,e,n)}),st(vw,r)}let hw=Symbol("DescriptionContext");function LX(){let e=Pe(hw,null);if(e===null)throw new Error("Missing parent");return e}function ed({slot:e=M({}),name:t="Description",props:n={}}={}){let o=M([]);function a(r){return o.value.push(r),()=>{let s=o.value.indexOf(r);s!==-1&&o.value.splice(s,1)}}return st(hw,{register:a,slot:e,name:t,props:n}),O(()=>o.value.length>0?o.value.join(" "):void 0)}let gw=Le({name:"Description",props:{as:{type:[Object,String],default:"p"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var o;let a=(o=e.id)!=null?o:`headlessui-description-${Bn()}`,r=LX();return Je(()=>rn(r.register(a))),()=>{let{name:s="Description",slot:i=M({}),props:u={}}=r,{...c}=e,m={...Object.entries(u).reduce((f,[v,y])=>Object.assign(f,{[v]:h(y)}),{}),id:a};return tn({ourProps:m,theirProps:c,slot:i.value,attrs:t,slots:n,name:s})}}});function qX(e){let t=oo(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)}let nv=Le({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let o=M(null),a=O(()=>oo(o)),r=PX(),s=Pe(yw,null),i=M(r===!0||s==null?qX(o.value):s.resolveTarget()),u=M(!1);Je(()=>{u.value=!0}),on(()=>{r||s!=null&&(i.value=s.resolveTarget())});let c=Pe(Af,null),m=!1,f=va();return $e(o,()=>{if(m||!c)return;let v=qe(o);v&&(rn(c.register(v),f),m=!0)}),rn(()=>{var v,y;let b=(v=a.value)==null?void 0:v.getElementById("headlessui-portal-root");b&&i.value===b&&i.value.children.length<=0&&((y=i.value.parentElement)==null||y.removeChild(i.value))}),()=>{if(!u.value||i.value===null)return null;let v={ref:o,"data-headlessui-portal":""};return Ae(ta,{to:i.value},tn({ourProps:v,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),Af=Symbol("PortalParentContext");function bw(){let e=Pe(Af,null),t=M([]);function n(r){return t.value.push(r),e&&e.register(r),()=>o(r)}function o(r){let s=t.value.indexOf(r);s!==-1&&t.value.splice(s,1),e&&e.unregister(r)}let a={register:n,unregister:o,portals:t};return[t,Le({name:"PortalWrapper",setup(r,{slots:s}){return st(Af,a),()=>{var i;return(i=s.default)==null?void 0:i.call(s)}}})]}let yw=Symbol("PortalGroupContext"),UX=Le({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let o=uo({resolveTarget(){return e.target}});return st(yw,o),()=>{let{target:a,...r}=e;return tn({theirProps:r,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}});var jX=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(jX||{});let Rf=Symbol("DialogContext");function Ri(e){let t=Pe(Rf,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ri),n}return t}let gu="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Di=Le({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:gu},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:a}){var r,s;let i=(r=e.id)!=null?r:`headlessui-dialog-${Bn()}`,u=M(!1);Je(()=>{u.value=!0});let c=!1,m=O(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(c||(c=!0,console.warn(`Invalid role [${m}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),f=M(0),v=cs(),y=O(()=>e.open===gu&&v!==null?(v.value&Sn.Open)===Sn.Open:e.open),b=M(null),w=O(()=>oo(b));if(a({el:b,$el:b}),!(e.open!==gu||v!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof y.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${y.value===gu?void 0:e.open}`);let k=O(()=>u.value&&y.value?0:1),x=O(()=>k.value===0),I=O(()=>f.value>1),C=Pe(Rf,null)!==null,[S,T]=bw(),{resolveContainers:E,mainTreeNodeRef:$,MainTreeNode:F}=fw({portals:S,defaultContainers:[O(()=>{var W;return(W=L.panelRef.value)!=null?W:b.value})]}),R=O(()=>I.value?"parent":"leaf"),B=O(()=>v!==null?(v.value&Sn.Closing)===Sn.Closing:!1),V=O(()=>C||B.value?!1:x.value),P=O(()=>{var W,ae,ue;return(ue=Array.from((ae=(W=w.value)==null?void 0:W.querySelectorAll("body > *"))!=null?ae:[]).find(ce=>ce.id==="headlessui-portal-root"?!1:ce.contains(qe($))&&ce instanceof HTMLElement))!=null?ue:null});Sb(P,V);let z=O(()=>I.value?!0:x.value),H=O(()=>{var W,ae,ue;return(ue=Array.from((ae=(W=w.value)==null?void 0:W.querySelectorAll("[data-headlessui-portal]"))!=null?ae:[]).find(ce=>ce.contains(qe($))&&ce instanceof HTMLElement))!=null?ue:null});Sb(H,z),VX({type:"Dialog",enabled:O(()=>k.value===0),element:b,onUpdate:(W,ae)=>{if(ae==="Dialog")return Nn(W,{[Ff.Add]:()=>f.value+=1,[Ff.Remove]:()=>f.value-=1})}});let j=ed({name:"DialogDescription",slot:O(()=>({open:y.value}))}),N=M(null),L={titleId:N,panelRef:M(null),dialogState:k,setTitleId(W){N.value!==W&&(N.value=W)},close(){t("close",!1)}};st(Rf,L);let U=O(()=>!(!x.value||I.value));Qp(E,(W,ae)=>{L.close(),ze(()=>ae==null?void 0:ae.focus())},U);let ee=O(()=>!(I.value||k.value!==0));ev((s=w.value)==null?void 0:s.defaultView,"keydown",W=>{ee.value&&(W.defaultPrevented||W.key===Tt.Escape&&(W.preventDefault(),W.stopPropagation(),L.close()))});let G=O(()=>!(B.value||k.value!==0||C));return BX(w,G,W=>{var ae;return{containers:[...(ae=W.containers)!=null?ae:[],E]}}),on(W=>{if(k.value!==0)return;let ae=qe(b);if(!ae)return;let ue=new ResizeObserver(ce=>{for(let oe of ce){let ie=oe.target.getBoundingClientRect();ie.x===0&&ie.y===0&&ie.width===0&&ie.height===0&&L.close()}});ue.observe(ae),W(()=>ue.disconnect())}),()=>{let{open:W,initialFocus:ae,...ue}=e,ce={...n,ref:b,id:i,role:m.value,"aria-modal":k.value===0?!0:void 0,"aria-labelledby":N.value,"aria-describedby":j.value},oe={open:k.value===0};return Ae(Ef,{force:!0},()=>[Ae(nv,()=>Ae(UX,{target:b.value},()=>Ae(Ef,{force:!1},()=>Ae(Es,{initialFocus:ae,containers:E,features:x.value?Nn(R.value,{parent:Es.features.RestoreFocus,leaf:Es.features.All&~Es.features.FocusLock}):Es.features.None},()=>Ae(T,{},()=>tn({ourProps:ce,theirProps:{...ue,...n},slot:oe,attrs:n,slots:o,visible:k.value===0,features:Lo.RenderStrategy|Lo.Static,name:"Dialog"})))))),Ae(F)])}}});Le({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var o;let a=(o=e.id)!=null?o:`headlessui-dialog-overlay-${Bn()}`,r=Ri("DialogOverlay");function s(i){i.target===i.currentTarget&&(i.preventDefault(),i.stopPropagation(),r.close())}return()=>{let{...i}=e;return tn({ourProps:{id:a,"aria-hidden":!0,onClick:s},theirProps:i,slot:{open:r.dialogState.value===0},attrs:t,slots:n,name:"DialogOverlay"})}}});Le({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-dialog-backdrop-${Bn()}`,s=Ri("DialogBackdrop"),i=M(null);return o({el:i,$el:i}),Je(()=>{if(s.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let{...u}=e,c={id:r,ref:i,"aria-hidden":!0};return Ae(Ef,{force:!0},()=>Ae(nv,()=>tn({ourProps:c,theirProps:{...t,...u},slot:{open:s.dialogState.value===0},attrs:t,slots:n,name:"DialogBackdrop"})))}}});let Oi=Le({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-dialog-panel-${Bn()}`,s=Ri("DialogPanel");o({el:s.panelRef,$el:s.panelRef});function i(u){u.stopPropagation()}return()=>{let{...u}=e,c={id:r,ref:s.panelRef,onClick:i};return tn({ourProps:c,theirProps:u,slot:{open:s.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),_w=Le({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var o;let a=(o=e.id)!=null?o:`headlessui-dialog-title-${Bn()}`,r=Ri("DialogTitle");return Je(()=>{r.setTitleId(a),rn(()=>r.setTitleId(null))}),()=>{let{...s}=e;return tn({ourProps:{id:a},theirProps:s,slot:{open:r.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),Tb=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Eb(e){var t,n;let o=(t=e.innerText)!=null?t:"",a=e.cloneNode(!0);if(!(a instanceof HTMLElement))return o;let r=!1;for(let i of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),r=!0;let s=r?(n=a.innerText)!=null?n:"":o;return Tb.test(s)&&(s=s.replace(Tb,"")),s}function zX(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(a=>{let r=document.getElementById(a);if(r){let s=r.getAttribute("aria-label");return typeof s=="string"?s.trim():Eb(r).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return Eb(e).trim()}function HX(e){let t=M(""),n=M("");return()=>{let o=qe(e);if(!o)return"";let a=o.innerText;if(t.value===a)return n.value;let r=zX(o).trim().toLowerCase();return t.value=a,n.value=r,r}}var WX=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(WX||{}),GX=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(GX||{});function KX(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Iw=Symbol("MenuContext");function td(e){let t=Pe(Iw,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,td),n}return t}let ZX=Le({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=M(1),a=M(null),r=M(null),s=M([]),i=M(""),u=M(null),c=M(1);function m(v=y=>y){let y=u.value!==null?s.value[u.value]:null,b=ar(v(s.value.slice()),k=>qe(k.dataRef.domRef)),w=y?b.indexOf(y):null;return w===-1&&(w=null),{items:b,activeItemIndex:w}}let f={menuState:o,buttonRef:a,itemsRef:r,items:s,searchQuery:i,activeItemIndex:u,activationTrigger:c,closeMenu:()=>{o.value=1,u.value=null},openMenu:()=>o.value=0,goToItem(v,y,b){let w=m(),k=kX(v===Io.Specific?{focus:Io.Specific,id:y}:{focus:v},{resolveItems:()=>w.items,resolveActiveIndex:()=>w.activeItemIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});i.value="",u.value=k,c.value=b??1,s.value=w.items},search(v){let y=i.value!==""?0:1;i.value+=v.toLowerCase();let b=(u.value!==null?s.value.slice(u.value+y).concat(s.value.slice(0,u.value+y)):s.value).find(k=>k.dataRef.textValue.startsWith(i.value)&&!k.dataRef.disabled),w=b?s.value.indexOf(b):-1;w===-1||w===u.value||(u.value=w,c.value=1)},clearSearch(){i.value=""},registerItem(v,y){let b=m(w=>[...w,{id:v,dataRef:y}]);s.value=b.items,u.value=b.activeItemIndex,c.value=1},unregisterItem(v){let y=m(b=>{let w=b.findIndex(k=>k.id===v);return w!==-1&&b.splice(w,1),b});s.value=y.items,u.value=y.activeItemIndex,c.value=1}};return Qp([a,r],(v,y)=>{var b;f.closeMenu(),Xc(y,Yc.Loose)||(v.preventDefault(),(b=qe(a))==null||b.focus())},O(()=>o.value===0)),st(Iw,f),Jp(O(()=>Nn(o.value,{0:Sn.Open,1:Sn.Closed}))),()=>{let v={open:o.value===0,close:f.closeMenu};return tn({ourProps:{},theirProps:e,slot:v,slots:t,attrs:n,name:"Menu"})}}}),YX=Le({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-menu-button-${Bn()}`,s=td("MenuButton");o({el:s.buttonRef,$el:s.buttonRef});function i(f){switch(f.key){case Tt.Space:case Tt.Enter:case Tt.ArrowDown:f.preventDefault(),f.stopPropagation(),s.openMenu(),ze(()=>{var v;(v=qe(s.itemsRef))==null||v.focus({preventScroll:!0}),s.goToItem(Io.First)});break;case Tt.ArrowUp:f.preventDefault(),f.stopPropagation(),s.openMenu(),ze(()=>{var v;(v=qe(s.itemsRef))==null||v.focus({preventScroll:!0}),s.goToItem(Io.Last)});break}}function u(f){switch(f.key){case Tt.Space:f.preventDefault();break}}function c(f){e.disabled||(s.menuState.value===0?(s.closeMenu(),ze(()=>{var v;return(v=qe(s.buttonRef))==null?void 0:v.focus({preventScroll:!0})})):(f.preventDefault(),s.openMenu(),KX(()=>{var v;return(v=qe(s.itemsRef))==null?void 0:v.focus({preventScroll:!0})})))}let m=Qc(O(()=>({as:e.as,type:t.type})),s.buttonRef);return()=>{var f;let v={open:s.menuState.value===0},{...y}=e,b={ref:s.buttonRef,id:r,type:m.value,"aria-haspopup":"menu","aria-controls":(f=qe(s.itemsRef))==null?void 0:f.id,"aria-expanded":s.menuState.value===0,onKeydown:i,onKeyup:u,onClick:c};return tn({ourProps:b,theirProps:y,slot:v,attrs:t,slots:n,name:"MenuButton"})}}}),XX=Le({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-menu-items-${Bn()}`,s=td("MenuItems"),i=M(null);o({el:s.itemsRef,$el:s.itemsRef}),tw({container:O(()=>qe(s.itemsRef)),enabled:O(()=>s.menuState.value===0),accept(v){return v.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:v.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(v){v.setAttribute("role","none")}});function u(v){var y;switch(i.value&&clearTimeout(i.value),v.key){case Tt.Space:if(s.searchQuery.value!=="")return v.preventDefault(),v.stopPropagation(),s.search(v.key);case Tt.Enter:if(v.preventDefault(),v.stopPropagation(),s.activeItemIndex.value!==null){let b=s.items.value[s.activeItemIndex.value];(y=qe(b.dataRef.domRef))==null||y.click()}s.closeMenu(),QI(qe(s.buttonRef));break;case Tt.ArrowDown:return v.preventDefault(),v.stopPropagation(),s.goToItem(Io.Next);case Tt.ArrowUp:return v.preventDefault(),v.stopPropagation(),s.goToItem(Io.Previous);case Tt.Home:case Tt.PageUp:return v.preventDefault(),v.stopPropagation(),s.goToItem(Io.First);case Tt.End:case Tt.PageDown:return v.preventDefault(),v.stopPropagation(),s.goToItem(Io.Last);case Tt.Escape:v.preventDefault(),v.stopPropagation(),s.closeMenu(),ze(()=>{var b;return(b=qe(s.buttonRef))==null?void 0:b.focus({preventScroll:!0})});break;case Tt.Tab:v.preventDefault(),v.stopPropagation(),s.closeMenu(),ze(()=>hX(qe(s.buttonRef),v.shiftKey?Jt.Previous:Jt.Next));break;default:v.key.length===1&&(s.search(v.key),i.value=setTimeout(()=>s.clearSearch(),350));break}}function c(v){switch(v.key){case Tt.Space:v.preventDefault();break}}let m=cs(),f=O(()=>m!==null?(m.value&Sn.Open)===Sn.Open:s.menuState.value===0);return()=>{var v,y;let b={open:s.menuState.value===0},{...w}=e,k={"aria-activedescendant":s.activeItemIndex.value===null||(v=s.items.value[s.activeItemIndex.value])==null?void 0:v.id,"aria-labelledby":(y=qe(s.buttonRef))==null?void 0:y.id,id:r,onKeydown:u,onKeyup:c,role:"menu",tabIndex:0,ref:s.itemsRef};return tn({ourProps:k,theirProps:w,slot:b,attrs:t,slots:n,features:Lo.RenderStrategy|Lo.Static,visible:f.value,name:"MenuItems"})}}}),QX=Le({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-menu-item-${Bn()}`,s=td("MenuItem"),i=M(null);o({el:i,$el:i});let u=O(()=>s.activeItemIndex.value!==null?s.items.value[s.activeItemIndex.value].id===r:!1),c=HX(i),m=O(()=>({disabled:e.disabled,get textValue(){return c()},domRef:i}));Je(()=>s.registerItem(r,m)),rn(()=>s.unregisterItem(r)),on(()=>{s.menuState.value===0&&u.value&&s.activationTrigger.value!==0&&ze(()=>{var x,I;return(I=(x=qe(i))==null?void 0:x.scrollIntoView)==null?void 0:I.call(x,{block:"nearest"})})});function f(x){if(e.disabled)return x.preventDefault();s.closeMenu(),QI(qe(s.buttonRef))}function v(){if(e.disabled)return s.goToItem(Io.Nothing);s.goToItem(Io.Specific,r)}let y=yX();function b(x){y.update(x)}function w(x){y.wasMoved(x)&&(e.disabled||u.value||s.goToItem(Io.Specific,r,0))}function k(x){y.wasMoved(x)&&(e.disabled||u.value&&s.goToItem(Io.Nothing))}return()=>{let{disabled:x}=e,I={active:u.value,disabled:x,close:s.closeMenu},{...C}=e;return tn({ourProps:{id:r,ref:i,role:"menuitem",tabIndex:x===!0?void 0:-1,"aria-disabled":x===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:v,onPointerenter:b,onMouseenter:b,onPointermove:w,onMousemove:w,onPointerleave:k,onMouseleave:k},theirProps:{...n,...C},slot:I,attrs:n,slots:t,name:"MenuItem"})}}});var JX=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(JX||{});let ww=Symbol("PopoverContext");function nd(e){let t=Pe(ww,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Cw.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,nd),n}return t}let xw=Symbol("PopoverGroupContext");function kw(){return Pe(xw,null)}let $w=Symbol("PopoverPanelContext");function eQ(){return Pe($w,null)}let Cw=Le({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n,expose:o}){var a;let r=M(null);o({el:r,$el:r});let s=M(1),i=M(null),u=M(null),c=M(null),m=M(null),f=O(()=>oo(r)),v=O(()=>{var T,E;if(!qe(i)||!qe(m))return!1;for(let z of document.querySelectorAll("body > *"))if(Number(z==null?void 0:z.contains(qe(i)))^Number(z==null?void 0:z.contains(qe(m))))return!0;let $=Ei(),F=$.indexOf(qe(i)),R=(F+$.length-1)%$.length,B=(F+1)%$.length,V=$[R],P=$[B];return!((T=qe(m))!=null&&T.contains(V))&&!((E=qe(m))!=null&&E.contains(P))}),y={popoverState:s,buttonId:M(null),panelId:M(null),panel:m,button:i,isPortalled:v,beforePanelSentinel:u,afterPanelSentinel:c,togglePopover(){s.value=Nn(s.value,{0:1,1:0})},closePopover(){s.value!==1&&(s.value=1)},close(T){y.closePopover();let E=T?T instanceof HTMLElement?T:T.value instanceof HTMLElement?qe(T):qe(y.button):qe(y.button);E==null||E.focus()}};st(ww,y),Jp(O(()=>Nn(s.value,{0:Sn.Open,1:Sn.Closed})));let b={buttonId:y.buttonId,panelId:y.panelId,close(){y.closePopover()}},w=kw(),k=w==null?void 0:w.registerPopover,[x,I]=bw(),C=fw({mainTreeNodeRef:w==null?void 0:w.mainTreeNodeRef,portals:x,defaultContainers:[i,m]});function S(){var T,E,$,F;return(F=w==null?void 0:w.isFocusWithinPopoverGroup())!=null?F:((T=f.value)==null?void 0:T.activeElement)&&(((E=qe(i))==null?void 0:E.contains(f.value.activeElement))||(($=qe(m))==null?void 0:$.contains(f.value.activeElement)))}return on(()=>k==null?void 0:k(b)),ev((a=f.value)==null?void 0:a.defaultView,"focus",T=>{var E,$;T.target!==window&&T.target instanceof HTMLElement&&s.value===0&&(S()||i&&m&&(C.contains(T.target)||(E=qe(y.beforePanelSentinel))!=null&&E.contains(T.target)||($=qe(y.afterPanelSentinel))!=null&&$.contains(T.target)||y.closePopover()))},!0),Qp(C.resolveContainers,(T,E)=>{var $;y.closePopover(),Xc(E,Yc.Loose)||(T.preventDefault(),($=qe(i))==null||$.focus())},O(()=>s.value===0)),()=>{let T={open:s.value===0,close:y.close};return Ae(fe,[Ae(I,{},()=>tn({theirProps:{...e,...n},ourProps:{ref:r},slot:T,slots:t,attrs:n,name:"Popover"})),Ae(C.MainTreeNode)])}}}),tQ=Le({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-popover-button-${Bn()}`,s=nd("PopoverButton"),i=O(()=>oo(s.button));o({el:s.button,$el:s.button}),Je(()=>{s.buttonId.value=r}),rn(()=>{s.buttonId.value=null});let u=kw(),c=u==null?void 0:u.closeOthers,m=eQ(),f=O(()=>m===null?!1:m.value===s.panelId.value),v=M(null),y=`headlessui-focus-sentinel-${Bn()}`;f.value||on(()=>{s.button.value=qe(v)});let b=Qc(O(()=>({as:e.as,type:t.type})),v);function w(T){var E,$,F,R,B;if(f.value){if(s.popoverState.value===1)return;switch(T.key){case Tt.Space:case Tt.Enter:T.preventDefault(),($=(E=T.target).click)==null||$.call(E),s.closePopover(),(F=qe(s.button))==null||F.focus();break}}else switch(T.key){case Tt.Space:case Tt.Enter:T.preventDefault(),T.stopPropagation(),s.popoverState.value===1&&(c==null||c(s.buttonId.value)),s.togglePopover();break;case Tt.Escape:if(s.popoverState.value!==0)return c==null?void 0:c(s.buttonId.value);if(!qe(s.button)||(R=i.value)!=null&&R.activeElement&&!((B=qe(s.button))!=null&&B.contains(i.value.activeElement)))return;T.preventDefault(),T.stopPropagation(),s.closePopover();break}}function k(T){f.value||T.key===Tt.Space&&T.preventDefault()}function x(T){var E,$;e.disabled||(f.value?(s.closePopover(),(E=qe(s.button))==null||E.focus()):(T.preventDefault(),T.stopPropagation(),s.popoverState.value===1&&(c==null||c(s.buttonId.value)),s.togglePopover(),($=qe(s.button))==null||$.focus()))}function I(T){T.preventDefault(),T.stopPropagation()}let C=tv();function S(){let T=qe(s.panel);if(!T)return;function E(){Nn(C.value,{[wo.Forwards]:()=>Ln(T,Jt.First),[wo.Backwards]:()=>Ln(T,Jt.Last)})===Zo.Error&&Ln(Ei().filter($=>$.dataset.headlessuiFocusGuard!=="true"),Nn(C.value,{[wo.Forwards]:Jt.Next,[wo.Backwards]:Jt.Previous}),{relativeTo:qe(s.button)})}E()}return()=>{let T=s.popoverState.value===0,E={open:T},{...$}=e,F=f.value?{ref:v,type:b.value,onKeydown:w,onClick:x}:{ref:v,id:r,type:b.value,"aria-expanded":s.popoverState.value===0,"aria-controls":qe(s.panel)?s.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:w,onKeyup:k,onClick:x,onMousedown:I};return Ae(fe,[tn({ourProps:F,theirProps:{...t,...$},slot:E,attrs:t,slots:n,name:"PopoverButton"}),T&&!f.value&&s.isPortalled.value&&Ae(ea,{id:y,features:Jo.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:S})])}}});Le({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n}){let o=nd("PopoverOverlay"),a=`headlessui-popover-overlay-${Bn()}`,r=cs(),s=O(()=>r!==null?(r.value&Sn.Open)===Sn.Open:o.popoverState.value===0);function i(){o.closePopover()}return()=>{let u={open:o.popoverState.value===0};return tn({ourProps:{id:a,"aria-hidden":!0,onClick:i},theirProps:e,slot:u,attrs:t,slots:n,features:Lo.RenderStrategy|Lo.Static,visible:s.value,name:"PopoverOverlay"})}}});let nQ=Le({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-popover-panel-${Bn()}`,{focus:s}=e,i=nd("PopoverPanel"),u=O(()=>oo(i.panel)),c=`headlessui-focus-sentinel-before-${Bn()}`,m=`headlessui-focus-sentinel-after-${Bn()}`;o({el:i.panel,$el:i.panel}),Je(()=>{i.panelId.value=r}),rn(()=>{i.panelId.value=null}),st($w,i.panelId),on(()=>{var I,C;if(!s||i.popoverState.value!==0||!i.panel)return;let S=(I=u.value)==null?void 0:I.activeElement;(C=qe(i.panel))!=null&&C.contains(S)||Ln(qe(i.panel),Jt.First)});let f=cs(),v=O(()=>f!==null?(f.value&Sn.Open)===Sn.Open:i.popoverState.value===0);function y(I){var C,S;switch(I.key){case Tt.Escape:if(i.popoverState.value!==0||!qe(i.panel)||u.value&&!((C=qe(i.panel))!=null&&C.contains(u.value.activeElement)))return;I.preventDefault(),I.stopPropagation(),i.closePopover(),(S=qe(i.button))==null||S.focus();break}}function b(I){var C,S,T,E,$;let F=I.relatedTarget;F&&qe(i.panel)&&((C=qe(i.panel))!=null&&C.contains(F)||(i.closePopover(),((T=(S=qe(i.beforePanelSentinel))==null?void 0:S.contains)!=null&&T.call(S,F)||($=(E=qe(i.afterPanelSentinel))==null?void 0:E.contains)!=null&&$.call(E,F))&&F.focus({preventScroll:!0})))}let w=tv();function k(){let I=qe(i.panel);if(!I)return;function C(){Nn(w.value,{[wo.Forwards]:()=>{var S;Ln(I,Jt.First)===Zo.Error&&((S=qe(i.afterPanelSentinel))==null||S.focus())},[wo.Backwards]:()=>{var S;(S=qe(i.button))==null||S.focus({preventScroll:!0})}})}C()}function x(){let I=qe(i.panel);if(!I)return;function C(){Nn(w.value,{[wo.Forwards]:()=>{let S=qe(i.button),T=qe(i.panel);if(!S)return;let E=Ei(),$=E.indexOf(S),F=E.slice(0,$+1),R=[...E.slice($+1),...F];for(let B of R.slice())if(B.dataset.headlessuiFocusGuard==="true"||T!=null&&T.contains(B)){let V=R.indexOf(B);V!==-1&&R.splice(V,1)}Ln(R,Jt.First,{sorted:!1})},[wo.Backwards]:()=>{var S;Ln(I,Jt.Previous)===Zo.Error&&((S=qe(i.button))==null||S.focus())}})}C()}return()=>{let I={open:i.popoverState.value===0,close:i.close},{focus:C,...S}=e,T={ref:i.panel,id:r,onKeydown:y,onFocusout:s&&i.popoverState.value===0?b:void 0,tabIndex:-1};return tn({ourProps:T,theirProps:{...t,...S},attrs:t,slot:I,slots:{...n,default:(...E)=>{var $;return[Ae(fe,[v.value&&i.isPortalled.value&&Ae(ea,{id:c,ref:i.beforePanelSentinel,features:Jo.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k}),($=n.default)==null?void 0:$.call(n,...E),v.value&&i.isPortalled.value&&Ae(ea,{id:m,ref:i.afterPanelSentinel,features:Jo.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:x})])]}},features:Lo.RenderStrategy|Lo.Static,visible:v.value,name:"PopoverPanel"})}}});Le({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n,expose:o}){let a=M(null),r=Pt([]),s=O(()=>oo(a)),i=NX();o({el:a,$el:a});function u(v){let y=r.value.indexOf(v);y!==-1&&r.value.splice(y,1)}function c(v){return r.value.push(v),()=>{u(v)}}function m(){var v;let y=s.value;if(!y)return!1;let b=y.activeElement;return(v=qe(a))!=null&&v.contains(b)?!0:r.value.some(w=>{var k,x;return((k=y.getElementById(w.buttonId.value))==null?void 0:k.contains(b))||((x=y.getElementById(w.panelId.value))==null?void 0:x.contains(b))})}function f(v){for(let y of r.value)y.buttonId.value!==v&&y.close()}return st(xw,{registerPopover:c,unregisterPopover:u,isFocusWithinPopoverGroup:m,closeOthers:f,mainTreeNodeRef:i.mainTreeNodeRef}),()=>Ae(fe,[tn({ourProps:{ref:a},theirProps:{...e,...t},slot:{},attrs:t,slots:n,name:"PopoverGroup"}),Ae(i.MainTreeNode)])}});let Sw=Symbol("LabelContext");function Tw(){let e=Pe(Sw,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Tw),t}return e}function ov({slot:e={},name:t="Label",props:n={}}={}){let o=M([]);function a(r){return o.value.push(r),()=>{let s=o.value.indexOf(r);s!==-1&&o.value.splice(s,1)}}return st(Sw,{register:a,slot:e,name:t,props:n}),O(()=>o.value.length>0?o.value.join(" "):void 0)}let Ew=Le({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n}){var o;let a=(o=e.id)!=null?o:`headlessui-label-${Bn()}`,r=Tw();return Je(()=>rn(r.register(a))),()=>{let{name:s="Label",slot:i={},props:u={}}=r,{passive:c,...m}=e,f={...Object.entries(u).reduce((v,[y,b])=>Object.assign(v,{[y]:h(b)}),{}),id:a};return c&&(delete f.onClick,delete f.htmlFor,delete m.onClick),tn({ourProps:f,theirProps:m,slot:i,attrs:n,slots:t,name:s})}}});function oQ(e,t){return e===t}let Fw=Symbol("RadioGroupContext");function Aw(e){let t=Pe(Fw,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Aw),n}return t}let ds=Le({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>oQ},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:a}){var r;let s=(r=e.id)!=null?r:`headlessui-radiogroup-${Bn()}`,i=M(null),u=M([]),c=ov({name:"RadioGroupLabel"}),m=ed({name:"RadioGroupDescription"});a({el:i,$el:i});let[f,v]=XI(O(()=>e.modelValue),k=>t("update:modelValue",k),O(()=>e.defaultValue)),y={options:u,value:f,disabled:O(()=>e.disabled),firstOption:O(()=>u.value.find(k=>!k.propsRef.disabled)),containsCheckedOption:O(()=>u.value.some(k=>y.compare(Vn(k.propsRef.value),Vn(e.modelValue)))),compare(k,x){if(typeof e.by=="string"){let I=e.by;return(k==null?void 0:k[I])===(x==null?void 0:x[I])}return e.by(k,x)},change(k){var x;if(e.disabled||y.compare(Vn(f.value),Vn(k)))return!1;let I=(x=u.value.find(C=>y.compare(Vn(C.propsRef.value),Vn(k))))==null?void 0:x.propsRef;return I!=null&&I.disabled?!1:(v(k),!0)},registerOption(k){u.value.push(k),u.value=ar(u.value,x=>x.element)},unregisterOption(k){let x=u.value.findIndex(I=>I.id===k);x!==-1&&u.value.splice(x,1)}};st(Fw,y),tw({container:O(()=>qe(i)),accept(k){return k.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:k.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(k){k.setAttribute("role","none")}});function b(k){if(!i.value||!i.value.contains(k.target))return;let x=u.value.filter(I=>I.propsRef.disabled===!1).map(I=>I.element);switch(k.key){case Tt.Enter:uw(k.currentTarget);break;case Tt.ArrowLeft:case Tt.ArrowUp:if(k.preventDefault(),k.stopPropagation(),Ln(x,Jt.Previous|Jt.WrapAround)===Zo.Success){let I=u.value.find(C=>{var S;return C.element===((S=oo(i))==null?void 0:S.activeElement)});I&&y.change(I.propsRef.value)}break;case Tt.ArrowRight:case Tt.ArrowDown:if(k.preventDefault(),k.stopPropagation(),Ln(x,Jt.Next|Jt.WrapAround)===Zo.Success){let I=u.value.find(C=>{var S;return C.element===((S=oo(C.element))==null?void 0:S.activeElement)});I&&y.change(I.propsRef.value)}break;case Tt.Space:{k.preventDefault(),k.stopPropagation();let I=u.value.find(C=>{var S;return C.element===((S=oo(C.element))==null?void 0:S.activeElement)});I&&y.change(I.propsRef.value)}break}}let w=O(()=>{var k;return(k=qe(i))==null?void 0:k.closest("form")});return Je(()=>{$e([w],()=>{if(!w.value||e.defaultValue===void 0)return;function k(){y.change(e.defaultValue)}return w.value.addEventListener("reset",k),()=>{var x;(x=w.value)==null||x.removeEventListener("reset",k)}},{immediate:!0})}),()=>{let{disabled:k,name:x,form:I,...C}=e,S={ref:i,id:s,role:"radiogroup","aria-labelledby":c.value,"aria-describedby":m.value,onKeydown:b};return Ae(fe,[...x!=null&&f.value!=null?lw({[x]:f.value}).map(([T,E])=>Ae(ea,aw({features:Jo.Hidden,key:T,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:I,name:T,value:E}))):[],tn({ourProps:S,theirProps:{...n,...Fi(C,["modelValue","defaultValue","by"])},slot:{},attrs:n,slots:o,name:"RadioGroup"})])}}});var aQ=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(aQ||{});let od=Le({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-radiogroup-option-${Bn()}`,s=Aw("RadioGroupOption"),i=ov({name:"RadioGroupLabel"}),u=ed({name:"RadioGroupDescription"}),c=M(null),m=O(()=>({value:e.value,disabled:e.disabled})),f=M(1);o({el:c,$el:c});let v=O(()=>qe(c));Je(()=>s.registerOption({id:r,element:v,propsRef:m})),rn(()=>s.unregisterOption(r));let y=O(()=>{var S;return((S=s.firstOption.value)==null?void 0:S.id)===r}),b=O(()=>s.disabled.value||e.disabled),w=O(()=>s.compare(Vn(s.value.value),Vn(e.value))),k=O(()=>b.value?-1:w.value||!s.containsCheckedOption.value&&y.value?0:-1);function x(){var S;s.change(e.value)&&(f.value|=2,(S=qe(c))==null||S.focus())}function I(){f.value|=2}function C(){f.value&=-3}return()=>{let{value:S,disabled:T,...E}=e,$={checked:w.value,disabled:b.value,active:!!(f.value&2)},F={id:r,ref:c,role:"radio","aria-checked":w.value?"true":"false","aria-labelledby":i.value,"aria-describedby":u.value,"aria-disabled":b.value?!0:void 0,tabIndex:k.value,onClick:b.value?void 0:x,onFocus:b.value?void 0:I,onBlur:b.value?void 0:C};return tn({ourProps:F,theirProps:E,slot:$,attrs:t,slots:n,name:"RadioGroupOption"})}}}),cr=Ew,Xs=gw,Rw=Symbol("GroupContext"),ad=Le({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=M(null),a=ov({name:"SwitchLabel",props:{htmlFor:O(()=>{var s;return(s=o.value)==null?void 0:s.id}),onClick(s){o.value&&(s.currentTarget.tagName==="LABEL"&&s.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),r=ed({name:"SwitchDescription"});return st(Rw,{switchRef:o,labelledby:a,describedby:r}),()=>tn({theirProps:e,ourProps:{},slot:{},slots:t,attrs:n,name:"SwitchGroup"})}}),rQ=Le({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:a}){var r;let s=(r=e.id)!=null?r:`headlessui-switch-${Bn()}`,i=Pe(Rw,null),[u,c]=XI(O(()=>e.modelValue),I=>t("update:modelValue",I),O(()=>e.defaultChecked));function m(){c(!u.value)}let f=M(null),v=i===null?f:i.switchRef,y=Qc(O(()=>({as:e.as,type:n.type})),v);a({el:v,$el:v});function b(I){I.preventDefault(),m()}function w(I){I.key===Tt.Space?(I.preventDefault(),m()):I.key===Tt.Enter&&uw(I.currentTarget)}function k(I){I.preventDefault()}let x=O(()=>{var I,C;return(C=(I=qe(v))==null?void 0:I.closest)==null?void 0:C.call(I,"form")});return Je(()=>{$e([x],()=>{if(!x.value||e.defaultChecked===void 0)return;function I(){c(e.defaultChecked)}return x.value.addEventListener("reset",I),()=>{var C;(C=x.value)==null||C.removeEventListener("reset",I)}},{immediate:!0})}),()=>{let{name:I,value:C,form:S,...T}=e,E={checked:u.value},$={id:s,ref:v,role:"switch",type:y.value,tabIndex:0,"aria-checked":u.value,"aria-labelledby":i==null?void 0:i.labelledby.value,"aria-describedby":i==null?void 0:i.describedby.value,onClick:b,onKeyup:w,onKeypress:k};return Ae(fe,[I!=null&&u.value!=null?Ae(ea,aw({features:Jo.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:u.value,form:S,name:I,value:C})):null,tn({ourProps:$,theirProps:{...n,...Fi(T,["modelValue","defaultChecked"])},slot:E,attrs:n,slots:o,name:"Switch"})])}}}),Dw=Ew,Ow=gw,lQ=Le({props:{onFocus:{type:Function,required:!0}},setup(e){let t=M(!0);return()=>t.value?Ae(ea,{as:"button",type:"button",features:Jo.Focusable,onFocus(n){n.preventDefault();let o,a=50;function r(){var s;if(a--<=0){o&&cancelAnimationFrame(o);return}if((s=e.onFocus)!=null&&s.call(e)){t.value=!1,cancelAnimationFrame(o);return}o=requestAnimationFrame(r)}o=requestAnimationFrame(r)}}):null}});var sQ=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(sQ||{}),iQ=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(iQ||{});let Bw=Symbol("TabsContext");function Bi(e){let t=Pe(Bw,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Bi),n}return t}let av=Symbol("TabsSSRContext"),uQ=Le({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){var a;let r=M((a=e.selectedIndex)!=null?a:e.defaultIndex),s=M([]),i=M([]),u=O(()=>e.selectedIndex!==null),c=O(()=>u.value?e.selectedIndex:r.value);function m(w){var k;let x=ar(f.tabs.value,qe),I=ar(f.panels.value,qe),C=x.filter(S=>{var T;return!((T=qe(S))!=null&&T.hasAttribute("disabled"))});if(w<0||w>x.length-1){let S=Nn(r.value===null?0:Math.sign(w-r.value),{[-1]:()=>1,0:()=>Nn(Math.sign(w),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),T=Nn(S,{0:()=>x.indexOf(C[0]),1:()=>x.indexOf(C[C.length-1])});T!==-1&&(r.value=T),f.tabs.value=x,f.panels.value=I}else{let S=x.slice(0,w),T=[...x.slice(w),...S].find($=>C.includes($));if(!T)return;let E=(k=x.indexOf(T))!=null?k:f.selectedIndex.value;E===-1&&(E=f.selectedIndex.value),r.value=E,f.tabs.value=x,f.panels.value=I}}let f={selectedIndex:O(()=>{var w,k;return(k=(w=r.value)!=null?w:e.defaultIndex)!=null?k:null}),orientation:O(()=>e.vertical?"vertical":"horizontal"),activation:O(()=>e.manual?"manual":"auto"),tabs:s,panels:i,setSelectedIndex(w){c.value!==w&&o("change",w),u.value||m(w)},registerTab(w){var k;if(s.value.includes(w))return;let x=s.value[r.value];s.value.push(w),s.value=ar(s.value,qe);let I=(k=s.value.indexOf(x))!=null?k:r.value;I!==-1&&(r.value=I)},unregisterTab(w){let k=s.value.indexOf(w);k!==-1&&s.value.splice(k,1)},registerPanel(w){i.value.includes(w)||(i.value.push(w),i.value=ar(i.value,qe))},unregisterPanel(w){let k=i.value.indexOf(w);k!==-1&&i.value.splice(k,1)}};st(Bw,f);let v=M({tabs:[],panels:[]}),y=M(!1);Je(()=>{y.value=!0}),st(av,O(()=>y.value?null:v.value));let b=O(()=>e.selectedIndex);return Je(()=>{$e([b],()=>{var w;return m((w=e.selectedIndex)!=null?w:e.defaultIndex)},{immediate:!0})}),on(()=>{if(!u.value||c.value==null||f.tabs.value.length<=0)return;let w=ar(f.tabs.value,qe);w.some((k,x)=>qe(f.tabs.value[x])!==qe(k))&&f.setSelectedIndex(w.findIndex(k=>qe(k)===qe(f.tabs.value[c.value])))}),()=>{let w={selectedIndex:r.value};return Ae(fe,[s.value.length<=0&&Ae(lQ,{onFocus:()=>{for(let k of s.value){let x=qe(k);if((x==null?void 0:x.tabIndex)===0)return x.focus(),!0}return!1}}),tn({theirProps:{...n,...Fi(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:w,slots:t,attrs:n,name:"TabGroup"})])}}}),cQ=Le({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n}){let o=Bi("TabList");return()=>{let a={selectedIndex:o.selectedIndex.value},r={role:"tablist","aria-orientation":o.orientation.value};return tn({ourProps:r,theirProps:e,slot:a,attrs:t,slots:n,name:"TabList"})}}}),dQ=Le({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-tabs-tab-${Bn()}`,s=Bi("Tab"),i=M(null);o({el:i,$el:i}),Je(()=>s.registerTab(i)),rn(()=>s.unregisterTab(i));let u=Pe(av),c=O(()=>{if(u.value){let I=u.value.tabs.indexOf(r);return I===-1?u.value.tabs.push(r)-1:I}return-1}),m=O(()=>{let I=s.tabs.value.indexOf(i);return I===-1?c.value:I}),f=O(()=>m.value===s.selectedIndex.value);function v(I){var C;let S=I();if(S===Zo.Success&&s.activation.value==="auto"){let T=(C=oo(i))==null?void 0:C.activeElement,E=s.tabs.value.findIndex($=>qe($)===T);E!==-1&&s.setSelectedIndex(E)}return S}function y(I){let C=s.tabs.value.map(S=>qe(S)).filter(Boolean);if(I.key===Tt.Space||I.key===Tt.Enter){I.preventDefault(),I.stopPropagation(),s.setSelectedIndex(m.value);return}switch(I.key){case Tt.Home:case Tt.PageUp:return I.preventDefault(),I.stopPropagation(),v(()=>Ln(C,Jt.First));case Tt.End:case Tt.PageDown:return I.preventDefault(),I.stopPropagation(),v(()=>Ln(C,Jt.Last))}if(v(()=>Nn(s.orientation.value,{vertical(){return I.key===Tt.ArrowUp?Ln(C,Jt.Previous|Jt.WrapAround):I.key===Tt.ArrowDown?Ln(C,Jt.Next|Jt.WrapAround):Zo.Error},horizontal(){return I.key===Tt.ArrowLeft?Ln(C,Jt.Previous|Jt.WrapAround):I.key===Tt.ArrowRight?Ln(C,Jt.Next|Jt.WrapAround):Zo.Error}}))===Zo.Success)return I.preventDefault()}let b=M(!1);function w(){var I;b.value||(b.value=!0,!e.disabled&&((I=qe(i))==null||I.focus({preventScroll:!0}),s.setSelectedIndex(m.value),Jc(()=>{b.value=!1})))}function k(I){I.preventDefault()}let x=Qc(O(()=>({as:e.as,type:t.type})),i);return()=>{var I;let C={selected:f.value},{...S}=e,T={ref:i,onKeydown:y,onMousedown:k,onClick:w,id:r,role:"tab",type:x.value,"aria-controls":(I=qe(s.panels.value[m.value]))==null?void 0:I.id,"aria-selected":f.value,tabIndex:f.value?0:-1,disabled:e.disabled?!0:void 0};return tn({ourProps:T,theirProps:S,slot:C,attrs:t,slots:n,name:"Tab"})}}}),mQ=Le({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let o=Bi("TabPanels");return()=>{let a={selectedIndex:o.selectedIndex.value};return tn({theirProps:e,ourProps:{},slot:a,attrs:n,slots:t,name:"TabPanels"})}}}),fQ=Le({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-tabs-panel-${Bn()}`,s=Bi("TabPanel"),i=M(null);o({el:i,$el:i}),Je(()=>s.registerPanel(i)),rn(()=>s.unregisterPanel(i));let u=Pe(av),c=O(()=>{if(u.value){let v=u.value.panels.indexOf(r);return v===-1?u.value.panels.push(r)-1:v}return-1}),m=O(()=>{let v=s.panels.value.indexOf(i);return v===-1?c.value:v}),f=O(()=>m.value===s.selectedIndex.value);return()=>{var v;let y={selected:f.value},{tabIndex:b,...w}=e,k={ref:i,id:r,role:"tabpanel","aria-labelledby":(v=qe(s.tabs.value[m.value]))==null?void 0:v.id,tabIndex:f.value?b:-1};return!f.value&&e.unmount&&!e.static?Ae(ea,{as:"span","aria-hidden":!0,...k}):tn({ourProps:k,theirProps:w,slot:y,attrs:t,slots:n,features:Lo.Static|Lo.RenderStrategy,visible:f.value,name:"TabPanel"})}}});function pQ(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function bm(e,...t){e&&t.length>0&&e.classList.add(...t)}function bu(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Df=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Df||{});function vQ(e,t){let n=Ai();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:a}=getComputedStyle(e),[r,s]=[o,a].map(i=>{let[u=0]=i.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,m)=>m-c);return u});return r!==0?n.setTimeout(()=>t("finished"),r+s):t("finished"),n.add(()=>t("cancelled")),n.dispose}function Fb(e,t,n,o,a,r){let s=Ai(),i=r!==void 0?pQ(r):()=>{};return bu(e,...a),bm(e,...t,...n),s.nextFrame(()=>{bu(e,...n),bm(e,...o),s.add(vQ(e,u=>(bu(e,...o,...t),bm(e,...a),i(u))))}),s.add(()=>bu(e,...t,...n,...o,...a)),s.add(()=>i("cancelled")),s.dispose}function Cr(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let rv=Symbol("TransitionContext");var hQ=(e=>(e.Visible="visible",e.Hidden="hidden",e))(hQ||{});function gQ(){return Pe(rv,null)!==null}function bQ(){let e=Pe(rv,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function yQ(){let e=Pe(lv,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let lv=Symbol("NestingContext");function rd(e){return"children"in e?rd(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Nw(e){let t=M([]),n=M(!1);Je(()=>n.value=!0),rn(()=>n.value=!1);function o(r,s=rr.Hidden){let i=t.value.findIndex(({id:u})=>u===r);i!==-1&&(Nn(s,{[rr.Unmount](){t.value.splice(i,1)},[rr.Hidden](){t.value[i].state="hidden"}}),!rd(t)&&n.value&&(e==null||e()))}function a(r){let s=t.value.find(({id:i})=>i===r);return s?s.state!=="visible"&&(s.state="visible"):t.value.push({id:r,state:"visible"}),()=>o(r,rr.Unmount)}return{children:t,register:a,unregister:o}}let Pw=Lo.RenderStrategy,vo=Le({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:a}){let r=M(0);function s(){r.value|=Sn.Opening,t("beforeEnter")}function i(){r.value&=~Sn.Opening,t("afterEnter")}function u(){r.value|=Sn.Closing,t("beforeLeave")}function c(){r.value&=~Sn.Closing,t("afterLeave")}if(!gQ()&&IX())return()=>Ae(ms,{...e,onBeforeEnter:s,onAfterEnter:i,onBeforeLeave:u,onAfterLeave:c},o);let m=M(null),f=O(()=>e.unmount?rr.Unmount:rr.Hidden);a({el:m,$el:m});let{show:v,appear:y}=bQ(),{register:b,unregister:w}=yQ(),k=M(v.value?"visible":"hidden"),x={value:!0},I=Bn(),C={value:!1},S=Nw(()=>{!C.value&&k.value!=="hidden"&&(k.value="hidden",w(I),c())});Je(()=>{let z=b(I);rn(z)}),on(()=>{if(f.value===rr.Hidden&&I){if(v.value&&k.value!=="visible"){k.value="visible";return}Nn(k.value,{hidden:()=>w(I),visible:()=>b(I)})}});let T=Cr(e.enter),E=Cr(e.enterFrom),$=Cr(e.enterTo),F=Cr(e.entered),R=Cr(e.leave),B=Cr(e.leaveFrom),V=Cr(e.leaveTo);Je(()=>{on(()=>{if(k.value==="visible"){let z=qe(m);if(z instanceof Comment&&z.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function P(z){let H=x.value&&!y.value,j=qe(m);!j||!(j instanceof HTMLElement)||H||(C.value=!0,v.value&&s(),v.value||u(),z(v.value?Fb(j,T,E,$,F,N=>{C.value=!1,N===Df.Finished&&i()}):Fb(j,R,B,V,F,N=>{C.value=!1,N===Df.Finished&&(rd(S)||(k.value="hidden",w(I),c()))})))}return Je(()=>{$e([v],(z,H,j)=>{P(j),x.value=!1},{immediate:!0})}),st(lv,S),Jp(O(()=>Nn(k.value,{visible:Sn.Open,hidden:Sn.Closed})|r.value)),()=>{let{appear:z,show:H,enter:j,enterFrom:N,enterTo:L,entered:U,leave:ee,leaveFrom:G,leaveTo:W,...ae}=e,ue={ref:m},ce={...ae,...y.value&&v.value&&Ti.isServer?{class:be([n.class,ae.class,...T,...E])}:{}};return tn({theirProps:ce,ourProps:ue,slot:{},slots:o,attrs:n,features:Pw,visible:k.value==="visible",name:"TransitionChild"})}}}),_Q=vo,ms=Le({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let a=cs(),r=O(()=>e.show===null&&a!==null?(a.value&Sn.Open)===Sn.Open:e.show);on(()=>{if(![!0,!1].includes(r.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let s=M(r.value?"visible":"hidden"),i=Nw(()=>{s.value="hidden"}),u=M(!0),c={show:r,appear:O(()=>e.appear||!u.value)};return Je(()=>{on(()=>{u.value=!1,r.value?s.value="visible":rd(i)||(s.value="hidden")})}),st(lv,i),st(rv,c),()=>{let m=Fi(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),f={unmount:e.unmount};return tn({ourProps:{...f,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[Ae(_Q,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...f,...m},o.default)]},attrs:{},features:Pw,visible:s.value==="visible",name:"Transition"})}}});const IQ=["textContent"],ld={__name:"IDialogTitle",props:{title:String,subTitle:String},setup(e){return(t,n)=>(g(),D("div",null,[l(h(_w),{class:"text-lg/6 font-semibold text-neutral-700 dark:text-white"},{default:p(()=>[Se(t.$slots,"default",{title:e.title},()=>[le(Z(e.title),1)])]),_:3}),e.subTitle?(g(),D("p",{key:0,class:"mt-0.5 text-base/5 text-neutral-500 dark:text-neutral-300 sm:text-sm/5",textContent:Z(e.subTitle)},null,8,IQ)):K("",!0)]))}},wQ={class:"sm:flex sm:items-start"},xQ={key:0,class:"mx-auto flex size-12 shrink-0 items-center justify-center rounded-full bg-danger-100 sm:mx-0 sm:size-10"},kQ={class:"mt-6 sm:flex sm:flex-row-reverse"},$Q={__name:"ActionDialog",props:{close:Function,cancel:Function,dialog:{type:Object,required:!0}},setup(e){const t=e,{form:n}=Ze({ids:[]},{onSuccess:s=>t.dialog.resolve({form:n,response:s})}),o=O(()=>t.dialog.fields.length>0),a=O(()=>!o.value&&t.dialog.message);async function r(){await n.fill("ids",t.dialog.ids).post(`${t.dialog.endpoint}`,{params:t.dialog.queryString,responseType:t.dialog.action.responseType}),t.close()}return(s,i)=>{const u=d("Icon"),c=d("IText"),m=d("FormFields"),f=d("IButton");return g(),D(fe,null,[_("div",wQ,[o.value?K("",!0):(g(),D("div",xQ,[l(u,{icon:"ExclamationTriangle",class:"size-6 text-danger-600"})])),_("div",{class:be(["mt-3 w-full sm:mt-0 sm:text-left",o.value?"":"text-center sm:ml-4"])},[l(ld,{class:"mt-2",title:e.dialog.title},null,8,["title"]),a.value?(g(),A(c,{key:0,class:"mt-1",text:e.dialog.message},null,8,["text"])):K("",!0),o.value?(g(),A(m,{key:1,class:"mt-4",fields:e.dialog.fields,form:h(n),"is-floating":"",onUpdateFieldValue:i[0]||(i[0]=v=>h(n).fill(v.attribute,v.value)),onSetInitialValue:i[1]||(i[1]=v=>h(n).set(v.attribute,v.value))},null,8,["fields","form"])):K("",!0)],2)]),_("div",kQ,[l(f,{class:"w-full sm:ml-2 sm:w-auto",variant:e.dialog.action.destroyable?"danger":"primary",disabled:h(n).busy,loading:h(n).busy,text:s.$t("core::app.confirm"),onClick:r},null,8,["variant","disabled","loading","text"]),l(f,{class:"mt-2 w-full sm:mt-0 sm:w-auto",text:s.$t("core::app.cancel"),basic:"",onClick:e.cancel},null,8,["text","onClick"])])],64)}}},CQ={class:"sm:p-2"},SQ={class:"sm:flex sm:items-start"},TQ={class:"mt-3 w-full sm:mt-0 sm:text-left"},EQ={class:"mt-4 flex flex-col"},FQ={class:"mb-3"},AQ={class:"mt-6 sm:flex sm:flex-row-reverse"},As="keep",yu="replace",RQ={__name:"ActionDialogBulkEdit",props:{close:Function,cancel:Function,dialog:{type:Object,required:!0}},setup(e){const t=e,n=M(!0),o=uo({}),{fields:a,updateField:r,totalCollapsable:s}=yn(t.dialog.fields),{form:i}=Ze({ids:[]},{onSuccess:f=>t.dialog.resolve({form:i,response:f})});c(),$e(o,f=>{Object.entries(f).forEach(([v,y])=>{r(v,{hidden:y===As})})},{deep:!0});async function u(){try{Object.entries(o).forEach(([f,v])=>{v===As&&delete i[f]}),await i.fill("ids",t.dialog.ids).post(`${t.dialog.endpoint}`,{params:t.dialog.queryString,responseType:t.dialog.action.responseType}),t.close()}catch(f){throw m(),f}}function c(){a.value.forEach(f=>{f.hidden=!0,f.hideLabel=!0,f.toggleable=!1,f.value=null,f.beforeFieldSlotName="before-"+f.attribute+"-field",f.attribute&&(o[f.attribute]=As)})}function m(){a.value.forEach(f=>{i.errors.has(f.attribute)&&o[f.attribute]===As&&(o[f.attribute]=yu)})}return(f,v)=>{const y=d("FieldsButtonCollapse"),b=d("IFormLabel"),w=d("ICustomSelect"),k=d("FormFields"),x=d("IButton");return g(),D("div",CQ,[_("div",SQ,[_("div",TQ,[l(ld,{title:e.dialog.title},null,8,["title"]),_("div",EQ,[h(s)>0?(g(),A(y,{key:0,collapsed:n.value,"onUpdate:collapsed":v[0]||(v[0]=I=>n.value=I),class:"mb-3 ml-auto",total:h(s)},null,8,["collapsed","total"])):K("",!0),l(k,{fields:h(a),collapsed:n.value,form:h(i),"is-floating":"",onUpdateFieldValue:v[1]||(v[1]=I=>h(i).fill(I.attribute,I.value)),onSetInitialValue:v[2]||(v[2]=I=>h(i).set(I.attribute,I.value))},bn({_:2},[Ie(h(a),I=>({name:I.beforeFieldSlotName,fn:p(()=>[I.attribute?(g(),D("div",{key:0,class:be([I.displayNone||I.collapsed&&n.value?"hidden":"",o[I.attribute]===yu?"-mb-2":""])},[_("div",FQ,[l(b,{class:"mb-1",for:I.attribute,required:o[I.attribute]===yu&&I.isRequired,label:I.label},null,8,["for","required","label"]),l(w,{modelValue:o[I.attribute],"onUpdate:modelValue":C=>o[I.attribute]=C,reduce:C=>C.value,"input-id":I.attribute,clearable:!1,options:[{value:As,label:f.$t("core::fields.keep_existing_value")},{value:yu,label:f.$t("core::fields.replace_existing_value")}]},null,8,["modelValue","onUpdate:modelValue","reduce","input-id","options"])])],2)):K("",!0)])}))]),1032,["fields","collapsed","form"])])])]),_("div",AQ,[l(x,{class:"w-full sm:ml-2 sm:w-auto",variant:"primary",disabled:h(i).busy,loading:h(i).busy,text:f.$t("core::app.confirm"),onClick:u},null,8,["disabled","loading","text"]),l(x,{class:"mt-2 w-full sm:mt-0 sm:w-auto",text:f.$t("core::app.cancel"),basic:"",onClick:e.cancel},null,8,["text","onClick"])])])}}},DQ={class:"group flex flex-col items-center text-lg md:flex-row"},OQ={class:"truncate md:grow"},BQ={class:"flex items-center px-6 pt-4 md:pb-4"},NQ={class:"ml-2 flex items-center space-x-1.5"},PQ={key:0,class:"flex"},MQ={class:"flex shrink-0 space-x-1 px-3 sm:-mt-0 sm:px-6 sm:py-3"},sd=Object.assign({inheritAttrs:!1},{__name:"BaseCard",props:{card:Object,loading:Boolean,reloadOnQueryStringChange:{type:Boolean,default:!0},requestQueryString:Object},emits:["retrieved"],setup(e,{emit:t}){const n=e,o=t,{setLoading:a,isLoading:r}=An(),{users:s}=Ne(),i=M(null),u=M(ut(n.card.ranges,["value",n.card.range])||n.card.ranges[0]),c=O(()=>[...n.card.users||s.value].map(y=>({id:y.id,name:y.name}))),m=O(()=>n.loading||r.value),f=O(()=>n.card.ranges.length>0);n.card.withUserSelection!==!1&&typeof n.card.withUserSelection=="number"&&(i.value=ut(c.value,["id",n.card.withUserSelection])),$e(i,()=>v()),$e(u,()=>v()),$e(()=>n.requestQueryString,()=>{n.reloadOnQueryStringChange&&v()},{deep:!0});async function v(y=!1){var w;a(!0);let b={range:(w=h(u))==null?void 0:w.value,...n.requestQueryString||{},reload_cache:y===!0};n.card.withUserSelection&&(b.user_id=i.value?i.value.id:null);try{const{data:k}=await Innoclapps.request(`/cards/${n.card.uriKey}`,{params:b});o("retrieved",{card:k,requestQueryString:b})}finally{a(!1)}}return Je(()=>{n.card.refreshOnActionExecuted&&Ut("action-executed",v),Ut("refresh-cards",v),n.card.floatingResource&&Ut(["floating-resource-updated","floating-resource-action-executed"],y=>{y.resourceName===n.card.floatingResource.resourceName&&v(!0)})}),(y,b)=>{const w=d("ITextDisplay"),k=d("IButton"),x=d("IDropdownButton"),I=d("IDropdownItem"),C=d("IDropdownSeparator"),S=d("IDropdownMenu"),T=d("IDropdown"),E=d("IOverlay"),$=Ve("i-tooltip");return g(),A(E,{show:m.value},{default:p(()=>[_("div",Ue({class:"rounded-lg bg-white shadow ring-1 ring-neutral-200 dark:bg-neutral-900 dark:ring-neutral-500/30"},y.$attrs),[_("div",DQ,[_("div",OQ,[_("div",BQ,[l(w,{class:"-mt-0.5 ml-10 truncate whitespace-nowrap font-semibold sm:ml-0",text:e.card.name},null,8,["text"]),_("div",NQ,[e.card.helpText?ne((g(),D("span",PQ,[l(k,{class:"pointer-events-none",icon:"QuestionMarkCircle",basic:"",small:""})])),[[$,e.card.helpText,void 0,{bottom:!0,light:!0}]]):K("",!0),l(k,{icon:"Refresh",class:be(["group-hover:opacity-100",m.value?"opacity-100":"opacity-0"]),loading:m.value,basic:"",small:"",onClick:b[0]||(b[0]=F=>v(!0))},null,8,["class","loading"])])])]),_("div",MQ,[Se(y.$slots,"actions"),e.card.withUserSelection?(g(),A(T,{key:0,placement:"bottom-end"},{default:p(()=>{var F;return[l(x,{text:((F=i.value)==null?void 0:F.name)||y.$t("core::app.all"),basic:""},null,8,["text"]),l(S,{class:"max-h-64"},{default:p(()=>[(g(!0),D(fe,null,Ie(c.value,R=>(g(),A(I,{key:R.id,text:R.name,active:i.value&&i.value.id===R.id,onClick:B=>i.value=R},null,8,["text","active","onClick"]))),128)),l(C),l(I,{text:y.$t("core::app.all"),active:!i.value,onClick:b[1]||(b[1]=R=>i.value=null)},null,8,["text","active"])]),_:1})]}),_:1})):K("",!0),f.value?(g(),A(T,{key:1,placement:"bottom-end"},{default:p(()=>[l(x,{class:"shrink-0",text:u.value.label,basic:""},null,8,["text"]),l(S,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.card.ranges,F=>(g(),A(I,{key:F.value,text:F.label,active:F.value===u.value.value,onClick:R=>u.value=F},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})):K("",!0)])]),Se(y.$slots,"default")],16)]),_:3},8,["show"])}}}),VQ={__name:"CardAsyncTable",props:{card:Object},setup(e,{expose:t}){const n=e,{localizeIfDate:o}=rt(),a=M({}),r=M({}),s=M(null),i=O(()=>n.card.fields.map(m=>(m.formatter=(f,v,y)=>o(f,Ma(y,v)),m)));function u(m){r.value=m.requestQueryString,s.value.replaceCollection(m.card.value)}function c(){s.value.reload()}return t({reload:c}),(m,f)=>(g(),A(sd,{card:e.card,"request-query-string":a.value,"reload-on-query-string-change":!1,onRetrieved:u},{actions:p(()=>[Se(m.$slots,"actions")]),default:p(()=>[l(Kp,{ref_key:"tableRef",ref:s,class:"[--gutter:theme(spacing.6)]","wrapper-class":"px-6 overflow-hidden border-y border-neutral-900/5 bg-white dark:border-white/10 dark:bg-neutral-900","max-height":"450px",searchable:e.card.searchable,"table-id":e.card.uriKey,"float-first":e.card.floatingResource,fields:i.value,"initial-data":e.card.value,"request-query-string":r.value,"request-uri":`cards/${e.card.uriKey}`,stackable:"",bleed:"",sticky:"",onDataLoaded:f[0]||(f[0]=v=>a.value=v.requestQueryString)},bn({_:2},[Ie(m.$slots,(v,y)=>({name:y,fn:p(b=>[Se(m.$slots,y,en(un(b)))])}))]),1032,["searchable","table-id","float-first","fields","initial-data","request-query-string","request-uri"])]),_:3},8,["card","request-query-string"]))}},LQ={key:0,class:"overflow-hidden border-y border-neutral-900/5 bg-white px-6 dark:border-white/10 dark:bg-neutral-900"},qQ={key:2},UQ={class:"mr-1 font-medium text-neutral-800 dark:text-neutral-100"},jQ={class:"text-neutral-700 dark:text-neutral-300"},zQ={__name:"CardTable",props:{card:Object,stackable:{type:Boolean,default:!0}},setup(e){const t=e,n=$o(),{isColumnVisible:o}=CI(),{localizeIfDate:a}=rt(),{floatResource:r}=ao(),{t:s}=Ee(),i=M(null),u=M([]),c=M({}),m=O(()=>c.value.fields.filter(k=>k.isStacked)),f=O(()=>c.value.fields.map(k=>(k.formatter=(x,I,C)=>a(x,Ma(C,I)),k))),v=O(()=>c.value.emptyText||s("core::app.not_enough_data")),y=O(()=>c.value.value.length>0);function b(k){c.value=k}function w(){f.value.forEach((k,x)=>{x>0&&u.value[x]&&(c.value.fields[x].isStacked=!o(u.value[x].$el,i.value.$wrapperEl))})}return b(t.card),t.stackable&&Yo(window,"resize",w),Je(()=>{t.stackable&&ze(w)}),(k,x)=>{const I=d("ITableHeader"),C=d("ITableRow"),S=d("ITableHead"),T=d("ILink"),E=d("ITableCell"),$=d("ITableBody"),F=d("ITable"),R=d("IText");return g(),A(sd,{card:e.card,onRetrieved:x[0]||(x[0]=B=>b(B.card))},{default:p(()=>[y.value?(g(),D("div",LQ,[l(F,{id:h(n),ref_key:"tableRef",ref:i,"max-height":"450px",class:"[--gutter:theme(spacing.6)]",sticky:"",bleed:""},{default:p(()=>[l(S,null,{default:p(()=>[l(C,{class:"[&>th]:sticky [&>th]:top-0 [&>th]:z-10 [&>th]:bg-opacity-75 [&>th]:backdrop-blur-sm [&>th]:backdrop-filter"},{default:p(()=>[(g(!0),D(fe,null,Ie(f.value,B=>(g(),A(I,{key:"th-"+B.key,ref_for:!0,ref_key:"thRefs",ref:u,class:be(["bg-neutral-50 dark:bg-neutral-500/10",B.isStacked?"hidden":""])},{default:p(()=>[le(Z(B.label),1)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),l($,null,{default:p(()=>[(g(!0),D(fe,null,Ie(c.value.value,B=>(g(),A(C,{key:B[c.value.primaryKey]},{default:p(()=>[(g(!0),D(fe,null,Ie(f.value,V=>(g(),A(E,{key:"td-"+V.key,class:be({"font-medium":V.key===f.value[0].key,hidden:V.isStacked})},{default:p(()=>[e.card.floatingResource&&V.key===f.value[0].key?(g(),A(T,{key:0,text:B[V.key],onClick:P=>h(r)({resourceName:e.card.floatingResource.resourceName,resourceId:B.id,mode:e.card.floatingResource.mode})},null,8,["text","onClick"])):V.key===f.value[0].key&&B.path?(g(),A(T,{key:1,to:B.path,text:B[V.key]},null,8,["to","text"])):(g(),D("span",qQ,Z(V.formatter?V.formatter(B[V.key],V.key,B):B[V.key]),1)),V.key===f.value[0].key?(g(!0),D(fe,{key:3},Ie(m.value,P=>(g(),D("p",{key:"stacked-"+P.key,class:"flex items-center font-normal"},[_("span",UQ,Z(P.label)+": ",1),_("span",jQ,Z(P.formatter?P.formatter(B[P.key],P.key,B):B[P.key]),1)]))),128)):K("",!0)]),_:2},1032,["class"]))),128))]),_:2},1024))),128))]),_:1})]),_:1},8,["id"])])):(g(),A(R,{key:1,class:"pb-16 pt-12 text-center",text:v.value},null,8,["text"]))]),_:1},8,["card"])}}},hl={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},Mw=8,Qs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function Of(e,t){return typeof e=="number"?e+t:e}function Js(e){if(typeof e=="string"){const t=/^(\d+)\s*(.*)$/g.exec(e);return{value:t?+t[1]:0,unit:(t==null?void 0:t[2])||void 0}}return{value:Number(e)}}function id(e){return String.fromCharCode(97+e%26)}const Du=2221e-19;function Vw(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)}function dl(e,t,n){return t/n.range*e}function Lw(e,t){const n=Math.pow(10,t||Mw);return Math.round(e*n)/n}function qw(e){if(e===1)return e;function t(s,i){return s%i===0?i:t(i,s%i)}function n(s){return s*s+1}let o=2,a=2,r;if(e%2===0)return 2;do o=n(o)%e,a=n(n(a))%e,r=t(Math.abs(o-a),e);while(r===1);return r}function Ou(e,t,n,o){const a=(o-90)*Math.PI/180;return{x:e+n*Math.cos(a),y:t+n*Math.sin(a)}}function Uw(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a={high:t.high,low:t.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};a.valueRange=a.high-a.low,a.oom=Vw(a.valueRange),a.step=Math.pow(10,a.oom),a.min=Math.floor(a.low/a.step)*a.step,a.max=Math.ceil(a.high/a.step)*a.step,a.range=a.max-a.min,a.numberOfSteps=Math.round(a.range/a.step);const s=dl(e,a.step,a)<n,i=o?qw(a.range):0;if(o&&dl(e,1,a)>=n)a.step=1;else if(o&&i<a.step&&dl(e,i,a)>=n)a.step=i;else{let v=0;for(;;){if(s&&dl(e,a.step,a)<=n)a.step*=2;else if(!s&&dl(e,a.step/2,a)>=n){if(a.step/=2,o&&a.step%1!==0){a.step*=2;break}}else break;if(v++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}a.step=Math.max(a.step,Du);function u(v,y){return v===(v+=y)&&(v*=1+(y>0?Du:-Du)),v}let c=a.min,m=a.max;for(;c+a.step<=a.low;)c=u(c,a.step);for(;m-a.step>=a.high;)m=u(m,-a.step);a.min=c,a.max=m,a.range=a.max-a.min;const f=[];for(let v=a.min;v<=a.max;v=u(v,a.step)){const y=Lw(v);y!==f[f.length-1]&&f.push(y)}return a.values=f,a}function dr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];for(let a=0;a<n.length;a++){const r=n[a];for(const s in r){const i=r[s];typeof i=="object"&&i!==null&&!(i instanceof Array)?e[s]=dr(e[s],i):e[s]=i}}return e}const Ol=e=>e;function ei(e,t){return Array.from({length:e},t?(n,o)=>t(o):()=>{})}const jw=(e,t)=>e+(t||0),zw=(e,t)=>ei(Math.max(...e.map(n=>n.length)),n=>t(...e.map(o=>o[n])));function vn(e,t){return e!==null&&typeof e=="object"&&Reflect.has(e,t)}function wl(e){return e!==null&&isFinite(e)}function sv(e){return!e&&e!==0}function Lr(e){return wl(e)?Number(e):void 0}function Hw(e){return Array.isArray(e)?e.every(Array.isArray):!1}function iv(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=0;e[n?"reduceRight":"reduce"]((a,r,s)=>t(r,o++,s),void 0)}function uv(e,t){const n=Array.isArray(e)?e[t]:vn(e,"data")?e.data[t]:null;return vn(n,"meta")?n.meta:void 0}function cv(e){return e==null||typeof e=="number"&&isNaN(e)}function Ww(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)||vn(t,"data"))}function Gw(e){return typeof e=="object"&&e!==null&&(Reflect.has(e,"x")||Reflect.has(e,"y"))}function Ni(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";return Gw(e)&&vn(e,t)?Lr(e[t]):Lr(e)}function ti(e,t,n){t={...t,...n?n==="x"?t.axisX:t.axisY:{}};const o={high:t.high===void 0?-Number.MAX_VALUE:+t.high,low:t.low===void 0?Number.MAX_VALUE:+t.low},a=t.high===void 0,r=t.low===void 0;function s(i){if(!cv(i))if(Array.isArray(i))for(let u=0;u<i.length;u++)s(i[u]);else{const u=Number(n&&vn(i,n)?i[n]:i);a&&u>o.high&&(o.high=u),r&&u<o.low&&(o.low=u)}}return(a||r)&&s(e),(t.referenceValue||t.referenceValue===0)&&(o.high=Math.max(t.referenceValue,o.high),o.low=Math.min(t.referenceValue,o.low)),o.high<=o.low&&(o.low===0?o.high=1:o.low<0?o.high=0:(o.high>0||(o.high=1),o.low=0)),o}function ud(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a;const r={labels:(e.labels||[]).slice(),series:GQ(e.series,n,o)},s=r.labels.length;return Hw(r.series)?(a=Math.max(s,...r.series.map(i=>i.length)),r.series.forEach(i=>{i.push(...ei(Math.max(0,a-i.length)))})):a=r.series.length,r.labels.push(...ei(Math.max(0,a-s),()=>"")),t&&HQ(r),r}function HQ(e){var t;(t=e.labels)===null||t===void 0||t.reverse(),e.series.reverse();for(const n of e.series)vn(n,"data")?n.data.reverse():Array.isArray(n)&&n.reverse()}function WQ(e,t){let n,o;if(typeof e!="object"){const a=Lr(e);t==="x"?n=a:o=a}else vn(e,"x")&&(n=Lr(e.x)),vn(e,"y")&&(o=Lr(e.y));if(!(n===void 0&&o===void 0))return{x:n,y:o}}function Ab(e,t){if(!cv(e))return t?WQ(e,t):Lr(e)}function Bf(e,t){return Array.isArray(e)?e.map(n=>vn(n,"value")?Ab(n.value,t):Ab(n,t)):Bf(e.data,t)}function GQ(e,t,n){if(Ww(e))return e.map(a=>Bf(a,t));const o=Bf(e,t);return n?o.map(a=>[a]):o}function dv(e,t,n){const o={increasingX:!1,fillHoles:!1,...n},a=[];let r=!0;for(let s=0;s<e.length;s+=2)Ni(t[s/2].value)===void 0?o.fillHoles||(r=!0):(o.increasingX&&s>=2&&e[s]<=e[s-2]&&(r=!0),r&&(a.push({pathCoordinates:[],valueData:[]}),r=!1),a[a.length-1].pathCoordinates.push(e[s],e[s+1]),a[a.length-1].valueData.push(t[s/2]));return a}function Bl(e){let t="";return e==null?e:(typeof e=="number"?t=""+e:typeof e=="object"?t=JSON.stringify({data:e}):t=String(e),Object.keys(Qs).reduce((n,o)=>n.replaceAll(o,Qs[o]),t))}function KQ(e){if(typeof e!="string")return e;if(e==="NaN")return NaN;e=Object.keys(Qs).reduce((n,o)=>n.replaceAll(Qs[o],o),e);let t=e;if(typeof e=="string")try{t=JSON.parse(e),t=t.data!==void 0?t.data:t}catch{}return t}class Kw{call(t,n){return this.svgElements.forEach(o=>Reflect.apply(o[t],o,n)),this}attr(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("attr",n)}elem(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("elem",n)}root(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("root",n)}getNode(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("getNode",n)}foreignObject(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("foreignObject",n)}text(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("text",n)}empty(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("empty",n)}remove(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("remove",n)}addClass(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("addClass",n)}removeClass(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("removeClass",n)}removeAllClasses(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("removeAllClasses",n)}animate(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("animate",n)}constructor(t){this.svgElements=[];for(let n=0;n<t.length;n++)this.svgElements.push(new Ea(t[n]))}}const mv={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function Rb(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;const{easing:r,...s}=n,i={};let u,c;r&&(u=Array.isArray(r)?r:mv[r]),s.begin=Of(s.begin,"ms"),s.dur=Of(s.dur,"ms"),u&&(s.calcMode="spline",s.keySplines=u.join(" "),s.keyTimes="0;1"),o&&(s.fill="freeze",i[t]=s.from,e.attr(i),c=Js(s.begin||0).value,s.begin="indefinite");const m=e.elem("animate",{attributeName:t,...s});o&&setTimeout(()=>{try{m._node.beginElement()}catch{i[t]=s.to,e.attr(i),m.remove()}},c);const f=m.getNode();a&&f.addEventListener("beginEvent",()=>a.emit("animationBegin",{element:e,animate:f,params:n})),f.addEventListener("endEvent",()=>{a&&a.emit("animationEnd",{element:e,animate:f,params:n}),o&&(i[t]=s.to,e.attr(i),m.remove())})}class Ea{attr(t,n){return typeof t=="string"?n?this._node.getAttributeNS(n,t):this._node.getAttribute(t):(Object.keys(t).forEach(o=>{if(t[o]!==void 0)if(o.indexOf(":")!==-1){const a=o.split(":");this._node.setAttributeNS(hl[a[0]],o,String(t[o]))}else this._node.setAttribute(o,String(t[o]))}),this)}elem(t,n,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return new Ea(t,n,o,this,a)}parent(){return this._node.parentNode instanceof SVGElement?new Ea(this._node.parentNode):null}root(){let t=this._node;for(;t.nodeName!=="svg"&&t.parentElement;)t=t.parentElement;return new Ea(t)}querySelector(t){const n=this._node.querySelector(t);return n?new Ea(n):null}querySelectorAll(t){const n=this._node.querySelectorAll(t);return new Kw(n)}getNode(){return this._node}foreignObject(t,n,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r;if(typeof t=="string"){const i=document.createElement("div");i.innerHTML=t,r=i.firstChild}else r=t;r instanceof Element&&r.setAttribute("xmlns",hl.xmlns);const s=this.elem("foreignObject",n,o,a);return s._node.appendChild(r),s}text(t){return this._node.appendChild(document.createTextNode(t)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var t;return(t=this._node.parentNode)===null||t===void 0||t.removeChild(this._node),this.parent()}replace(t){var n;return(n=this._node.parentNode)===null||n===void 0||n.replaceChild(t._node,this._node),t}append(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this}classes(){const t=this._node.getAttribute("class");return t?t.trim().split(/\s+/):[]}addClass(t){return this._node.setAttribute("class",this.classes().concat(t.trim().split(/\s+/)).filter(function(n,o,a){return a.indexOf(n)===o}).join(" ")),this}removeClass(t){const n=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(o=>n.indexOf(o)===-1).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0;return Object.keys(t).forEach(a=>{const r=t[a];Array.isArray(r)?r.forEach(s=>Rb(this,a,s,!1,o)):Rb(this,a,r,n,o)}),this}constructor(t,n,o,a,r=!1){t instanceof Element?this._node=t:(this._node=document.createElementNS(hl.svg,t),t==="svg"&&this.attr({"xmlns:ct":hl.ct})),n&&this.attr(n),o&&this.addClass(o),a&&(r&&a._node.firstChild?a._node.insertBefore(this._node,a._node.firstChild):a._node.appendChild(this._node))}}Ea.Easing=mv;function cd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"100%",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"100%",o=arguments.length>3?arguments[3]:void 0;Array.from(e.querySelectorAll("svg")).filter(r=>r.getAttributeNS(hl.xmlns,"ct")).forEach(r=>e.removeChild(r));const a=new Ea("svg").attr({width:t,height:n}).attr({style:"width: ".concat(t,"; height: ").concat(n,";")});return o&&a.addClass(o),e.appendChild(a.getNode()),a}function Zw(e){return typeof e=="number"?{top:e,right:e,bottom:e,left:e}:e===void 0?{top:0,right:0,bottom:0,left:0}:{top:typeof e.top=="number"?e.top:0,right:typeof e.right=="number"?e.right:0,bottom:typeof e.bottom=="number"?e.bottom:0,left:typeof e.left=="number"?e.left:0}}function dd(e,t){var n,o,a,r;const s=!!(t.axisX||t.axisY),i=((n=t.axisY)===null||n===void 0?void 0:n.offset)||0,u=((o=t.axisX)===null||o===void 0?void 0:o.offset)||0,c=(a=t.axisY)===null||a===void 0?void 0:a.position,m=(r=t.axisX)===null||r===void 0?void 0:r.position;let f=e.width()||Js(t.width).value||0,v=e.height()||Js(t.height).value||0;const y=Zw(t.chartPadding);f=Math.max(f,i+y.left+y.right),v=Math.max(v,u+y.top+y.bottom);const b={x1:0,x2:0,y1:0,y2:0,padding:y,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return s?(m==="start"?(b.y2=y.top+u,b.y1=Math.max(v-y.bottom,b.y2+1)):(b.y2=y.top,b.y1=Math.max(v-y.bottom-u,b.y2+1)),c==="start"?(b.x1=y.left+i,b.x2=Math.max(f-y.right,b.x1+1)):(b.x1=y.left,b.x2=Math.max(f-y.right-i,b.x1+1))):(b.x1=y.left,b.x2=Math.max(f-y.right,b.x1+1),b.y2=y.top,b.y1=Math.max(v-y.bottom,b.y2+1)),b}function Yw(e,t,n,o,a,r,s,i){const u={["".concat(n.units.pos,"1")]:e,["".concat(n.units.pos,"2")]:e,["".concat(n.counterUnits.pos,"1")]:o,["".concat(n.counterUnits.pos,"2")]:o+a},c=r.elem("line",u,s.join(" "));i.emit("draw",{type:"grid",axis:n,index:t,group:r,element:c,...u})}function fv(e,t,n,o){const a=e.elem("rect",{x:t.x1,y:t.y2,width:t.width(),height:t.height()},n,!0);o.emit("draw",{type:"gridBackground",group:e,element:a})}function Xw(e,t,n,o,a,r,s,i,u,c){const m={[a.units.pos]:e+s[a.units.pos],[a.counterUnits.pos]:s[a.counterUnits.pos],[a.units.len]:t,[a.counterUnits.len]:Math.max(0,r-10)},f=Math.round(m[a.units.len]),v=Math.round(m[a.counterUnits.len]),y=document.createElement("span");y.className=u.join(" "),y.style[a.units.len]=f+"px",y.style[a.counterUnits.len]=v+"px",y.textContent=String(o);const b=i.foreignObject(y,{style:"overflow: visible;",...m});c.emit("draw",{type:"label",axis:a,index:n,group:i,element:b,text:o,...m})}function Nf(e,t,n){let o;const a=[];function r(i){const u=o;o=dr({},e),t&&t.forEach(c=>{window.matchMedia(c[0]).matches&&(o=dr(o,c[1]))}),n&&i&&n.emit("optionsChanged",{previousOptions:u,currentOptions:o})}function s(){a.forEach(i=>i.removeEventListener("change",r))}if(window.matchMedia)t&&t.forEach(i=>{const u=window.matchMedia(i[0]);u.addEventListener("change",r),a.push(u)});else throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return r(),{removeMediaQueryListeners:s,getCurrentOptions(){return o}}}const Pf={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},ZQ={accuracy:3};function _u(e,t,n,o,a,r){const s={command:a?e.toLowerCase():e.toUpperCase(),...t,...r?{data:r}:{}};n.splice(o,0,s)}function ym(e,t){e.forEach((n,o)=>{Pf[n.command.toLowerCase()].forEach((a,r)=>{t(n,a,o,r,e)})})}class po{static join(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2?arguments[2]:void 0;const a=new po(n,o);for(let r=0;r<t.length;r++){const s=t[r];for(let i=0;i<s.pathElements.length;i++)a.pathElements.push(s.pathElements[i])}return a}position(t){return t!==void 0?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos}remove(t){return this.pathElements.splice(this.pos,t),this}move(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3?arguments[3]:void 0;return _u("M",{x:+t,y:+n},this.pathElements,this.pos++,o,a),this}line(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3?arguments[3]:void 0;return _u("L",{x:+t,y:+n},this.pathElements,this.pos++,o,a),this}curve(t,n,o,a,r,s){let i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,u=arguments.length>7?arguments[7]:void 0;return _u("C",{x1:+t,y1:+n,x2:+o,y2:+a,x:+r,y:+s},this.pathElements,this.pos++,i,u),this}arc(t,n,o,a,r,s,i){let u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=arguments.length>8?arguments[8]:void 0;return _u("A",{rx:t,ry:n,xAr:o,lAf:a,sf:r,x:s,y:i},this.pathElements,this.pos++,u,c),this}parse(t){const n=t.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((a,r)=>(r.match(/[A-Za-z]/)&&a.push([]),a[a.length-1].push(r),a),[]);n[n.length-1][0].toUpperCase()==="Z"&&n.pop();const o=n.map(a=>{const r=a.shift(),s=Pf[r.toLowerCase()];return{command:r,...s.reduce((i,u,c)=>(i[u]=+a[c],i),{})}});return this.pathElements.splice(this.pos,0,...o),this.pos+=o.length,this}stringify(){const t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((n,o)=>{const a=Pf[o.command.toLowerCase()].map(r=>{const s=o[r];return this.options.accuracy?Math.round(s*t)/t:s});return n+o.command+a.join(",")},"")+(this.close?"Z":"")}scale(t,n){return ym(this.pathElements,(o,a)=>{o[a]*=a[0]==="x"?t:n}),this}translate(t,n){return ym(this.pathElements,(o,a)=>{o[a]+=a[0]==="x"?t:n}),this}transform(t){return ym(this.pathElements,(n,o,a,r,s)=>{const i=t(n,o,a,r,s);(i||i===0)&&(n[o]=i)}),this}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const n=new po(t||this.close);return n.pos=this.pos,n.pathElements=this.pathElements.slice().map(o=>({...o})),n.options={...this.options},n}splitByCommand(t){const n=[new po];return this.pathElements.forEach(o=>{o.command===t.toUpperCase()&&n[n.length-1].pathElements.length!==0&&n.push(new po),n[n.length-1].pathElements.push(o)}),n}constructor(t=!1,n){this.close=t,this.pathElements=[],this.pos=0,this.options={...ZQ,...n}}}function Nl(e){const t={fillHoles:!1,...e};return function(o,a){const r=new po;let s=!0;for(let i=0;i<o.length;i+=2){const u=o[i],c=o[i+1],m=a[i/2];Ni(m.value)!==void 0?(s?r.move(u,c,!1,m):r.line(u,c,!1,m),s=!1):t.fillHoles||(s=!0)}return r}}function YQ(e){const t={divisor:2,fillHoles:!1,...e},n=1/Math.max(1,t.divisor);return function(a,r){const s=new po;let i=0,u=0,c;for(let m=0;m<a.length;m+=2){const f=a[m],v=a[m+1],y=(f-i)*n,b=r[m/2];b.value!==void 0?(c===void 0?s.move(f,v,!1,b):s.curve(i+y,u,f-y,v,f,v,!1,b),i=f,u=v,c=b):t.fillHoles||(i=u=0,c=void 0)}return s}}function XQ(e){const t={postpone:!0,fillHoles:!1,...e};return function(o,a){const r=new po;let s=0,i=0,u;for(let c=0;c<o.length;c+=2){const m=o[c],f=o[c+1],v=a[c/2];v.value!==void 0?(u===void 0?r.move(m,f,!1,v):(t.postpone?r.line(m,i,!1,u):r.line(s,f,!1,v),r.line(m,f,!1,v)),s=m,i=f,u=v):t.fillHoles||(s=i=0,u=void 0)}return r}}function QQ(e){const t={tension:1,fillHoles:!1,...e},n=Math.min(1,Math.max(0,t.tension)),o=1-n;return function a(r,s){const i=dv(r,s,{fillHoles:t.fillHoles});if(i.length){if(i.length>1)return po.join(i.map(u=>a(u.pathCoordinates,u.valueData)));{if(r=i[0].pathCoordinates,s=i[0].valueData,r.length<=4)return Nl()(r,s);const u=new po().move(r[0],r[1],!1,s[0]),c=!1;for(let m=0,f=r.length;f-2*+!c>m;m+=2){const v=[{x:+r[m-2],y:+r[m-1]},{x:+r[m],y:+r[m+1]},{x:+r[m+2],y:+r[m+3]},{x:+r[m+4],y:+r[m+5]}];f-4===m?v[3]=v[2]:m||(v[0]={x:+r[m],y:+r[m+1]}),u.curve(n*(-v[0].x+6*v[1].x+v[2].x)/6+o*v[2].x,n*(-v[0].y+6*v[1].y+v[2].y)/6+o*v[2].y,n*(v[1].x+6*v[2].x-v[3].x)/6+o*v[2].x,n*(v[1].y+6*v[2].y-v[3].y)/6+o*v[2].y,v[2].x,v[2].y,!1,s[(m+2)/2])}return u}}else return Nl()([],[])}}function Qw(e){const t={fillHoles:!1,...e};return function n(o,a){const r=dv(o,a,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return po.join(r.map(s=>n(s.pathCoordinates,s.valueData)));{if(o=r[0].pathCoordinates,a=r[0].valueData,o.length<=4)return Nl()(o,a);const s=[],i=[],u=o.length/2,c=[],m=[],f=[],v=[];for(let b=0;b<u;b++)s[b]=o[b*2],i[b]=o[b*2+1];for(let b=0;b<u-1;b++)f[b]=i[b+1]-i[b],v[b]=s[b+1]-s[b],m[b]=f[b]/v[b];c[0]=m[0],c[u-1]=m[u-2];for(let b=1;b<u-1;b++)m[b]===0||m[b-1]===0||m[b-1]>0!=m[b]>0?c[b]=0:(c[b]=3*(v[b-1]+v[b])/((2*v[b]+v[b-1])/m[b-1]+(v[b]+2*v[b-1])/m[b]),isFinite(c[b])||(c[b]=0));const y=new po().move(s[0],i[0],!1,a[0]);for(let b=0;b<u-1;b++)y.curve(s[b]+v[b]/3,i[b]+c[b]*v[b]/3,s[b+1]-v[b]/3,i[b+1]-c[b+1]*v[b]/3,s[b+1],i[b+1],!1,a[b+1]);return y}}else return Nl()([],[])}}var Jw=Object.freeze({__proto__:null,none:Nl,simple:YQ,step:XQ,cardinal:QQ,monotoneCubic:Qw});class ex{on(t,n){const{allListeners:o,listeners:a}=this;t==="*"?o.add(n):(a.has(t)||a.set(t,new Set),a.get(t).add(n))}off(t,n){const{allListeners:o,listeners:a}=this;if(t==="*")n?o.delete(n):o.clear();else if(a.has(t)){const r=a.get(t);n?r.delete(n):r.clear(),r.size||a.delete(t)}}emit(t,n){const{allListeners:o,listeners:a}=this;a.has(t)&&a.get(t).forEach(r=>r(n)),o.forEach(r=>r(t,n))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const _m=new WeakMap;class md{update(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),n&&(this.options=dr({},o?this.options:this.defaultOptions,n),!this.initializeTimeoutId)){var a;(a=this.optionsProvider)===null||a===void 0||a.removeMediaQueryListeners(),this.optionsProvider=Nf(this.options,this.responsiveOptions,this.eventEmitter)}return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){if(this.initializeTimeoutId)window.clearTimeout(this.initializeTimeoutId);else{var t;window.removeEventListener("resize",this.resizeListener),(t=this.optionsProvider)===null||t===void 0||t.removeMediaQueryListeners()}return _m.delete(this.container),this}on(t,n){return this.eventEmitter.on(t,n),this}off(t,n){return this.eventEmitter.off(t,n),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=Nf(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(t=>{Array.isArray(t)?t[0](this,t[1]):t(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(t,n,o,a,r){this.data=n,this.defaultOptions=o,this.options=a,this.responsiveOptions=r,this.eventEmitter=new ex,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);const s=typeof t=="string"?document.querySelector(t):t;if(!s)throw new Error("Target element is not found");this.container=s;const i=_m.get(s);i&&i.detach(),_m.set(s,this)}}const to={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class fd{createGridAndLabels(t,n,o,a){const r=this.units.pos==="x"?o.axisX:o.axisY,s=this.ticks.map((u,c)=>this.projectValue(u,c)),i=this.ticks.map(r.labelInterpolationFnc);s.forEach((u,c)=>{const m=i[c],f={x:0,y:0};let v;s[c+1]?v=s[c+1]-u:v=Math.max(this.axisLength-u,this.axisLength/this.ticks.length),!(m!==""&&sv(m))&&(this.units.pos==="x"?(u=this.chartRect.x1+u,f.x=o.axisX.labelOffset.x,o.axisX.position==="start"?f.y=this.chartRect.padding.top+o.axisX.labelOffset.y+5:f.y=this.chartRect.y1+o.axisX.labelOffset.y+5):(u=this.chartRect.y1-u,f.y=o.axisY.labelOffset.y-v,o.axisY.position==="start"?f.x=this.chartRect.padding.left+o.axisY.labelOffset.x:f.x=this.chartRect.x2+o.axisY.labelOffset.x+10),r.showGrid&&Yw(u,c,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[o.classNames.grid,o.classNames[this.units.dir]],a),r.showLabel&&Xw(u,v,c,m,this,r.offset,f,n,[o.classNames.label,o.classNames[this.units.dir],r.position==="start"?o.classNames[r.position]:o.classNames.end],a))})}constructor(t,n,o){this.units=t,this.chartRect=n,this.ticks=o,this.counterUnits=t===to.x?to.y:to.x,this.axisLength=n[this.units.rectEnd]-n[this.units.rectStart],this.gridOffset=n[this.units.rectOffset]}}class Ju extends fd{projectValue(t){const n=Number(Ni(t,this.units.pos));return this.axisLength*(n-this.bounds.min)/this.bounds.range}constructor(t,n,o,a){const r=a.highLow||ti(n,a,t.pos),s=Uw(o[t.rectEnd]-o[t.rectStart],r,a.scaleMinSpace||20,a.onlyInteger),i={min:s.min,max:s.max};super(t,o,s.values),this.bounds=s,this.range=i}}class JQ extends fd{projectValue(t){const n=Number(Ni(t,this.units.pos));return this.axisLength*(n-this.range.min)/(this.range.max-this.range.min)}constructor(t,n,o,a){const r=a.highLow||ti(n,a,t.pos),s=a.divisor||1,i=(a.ticks||ei(s,c=>r.low+(r.high-r.low)/s*c)).sort((c,m)=>Number(c)-Number(m)),u={min:r.low,max:r.high};super(t,o,i),this.range=u}}class Vs extends fd{projectValue(t,n){return this.stepLength*n}constructor(t,n,o,a){const r=a.ticks||[];super(t,o,r);const s=Math.max(1,r.length-(a.stretch?1:0));this.stepLength=this.axisLength/s,this.stretch=!!a.stretch}}function ml(e,t,n){var o;if(vn(e,"name")&&e.name&&(!((o=t.series)===null||o===void 0)&&o[e.name])){const r=(t==null?void 0:t.series[e.name])[n];return r===void 0?t[n]:r}else return t[n]}const Db={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Ol,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Ol,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class tx extends md{createChart(t){const{data:n}=this,o=ud(n,t.reverseData,!0),a=cd(this.container,t.width,t.height,t.classNames.chart);this.svg=a;const r=a.elem("g").addClass(t.classNames.gridGroup),s=a.elem("g"),i=a.elem("g").addClass(t.classNames.labelGroup),u=dd(a,t);let c,m;t.axisX.type===void 0?c=new Vs(to.x,o.series,u,{...t.axisX,ticks:o.labels,stretch:t.fullWidth}):c=new t.axisX.type(to.x,o.series,u,t.axisX),t.axisY.type===void 0?m=new Ju(to.y,o.series,u,{...t.axisY,high:wl(t.high)?t.high:t.axisY.high,low:wl(t.low)?t.low:t.axisY.low}):m=new t.axisY.type(to.y,o.series,u,t.axisY),c.createGridAndLabels(r,i,t,this.eventEmitter),m.createGridAndLabels(r,i,t,this.eventEmitter),t.showGridBackground&&fv(r,u,t.classNames.gridBackground,this.eventEmitter),iv(n.series,(f,v)=>{const y=s.elem("g"),b=vn(f,"name")&&f.name,w=vn(f,"className")&&f.className,k=vn(f,"meta")?f.meta:void 0;b&&y.attr({"ct:series-name":b}),k&&y.attr({"ct:meta":Bl(k)}),y.addClass([t.classNames.series,w||"".concat(t.classNames.series,"-").concat(id(v))].join(" "));const x=[],I=[];o.series[v].forEach((E,$)=>{const F={x:u.x1+c.projectValue(E,$,o.series[v]),y:u.y1-m.projectValue(E,$,o.series[v])};x.push(F.x,F.y),I.push({value:E,valueIndex:$,meta:uv(f,$)})});const C={lineSmooth:ml(f,t,"lineSmooth"),showPoint:ml(f,t,"showPoint"),showLine:ml(f,t,"showLine"),showArea:ml(f,t,"showArea"),areaBase:ml(f,t,"areaBase")};let S;typeof C.lineSmooth=="function"?S=C.lineSmooth:S=C.lineSmooth?Qw():Nl();const T=S(x,I);if(C.showPoint&&T.pathElements.forEach(E=>{const{data:$}=E,F=y.elem("line",{x1:E.x,y1:E.y,x2:E.x+.01,y2:E.y},t.classNames.point);if($){let R,B;vn($.value,"x")&&(R=$.value.x),vn($.value,"y")&&(B=$.value.y),F.attr({"ct:value":[R,B].filter(wl).join(","),"ct:meta":Bl($.meta)})}this.eventEmitter.emit("draw",{type:"point",value:$==null?void 0:$.value,index:($==null?void 0:$.valueIndex)||0,meta:$==null?void 0:$.meta,series:f,seriesIndex:v,axisX:c,axisY:m,group:y,element:F,x:E.x,y:E.y,chartRect:u})}),C.showLine){const E=y.elem("path",{d:T.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:o.series[v],path:T.clone(),chartRect:u,index:v,series:f,seriesIndex:v,meta:k,axisX:c,axisY:m,group:y,element:E})}if(C.showArea&&m.range){const E=Math.max(Math.min(C.areaBase,m.range.max),m.range.min),$=u.y1-m.projectValue(E);T.splitByCommand("M").filter(F=>F.pathElements.length>1).map(F=>{const R=F.pathElements[0],B=F.pathElements[F.pathElements.length-1];return F.clone(!0).position(0).remove(1).move(R.x,$).line(R.x,R.y).position(F.pathElements.length+1).line(B.x,$)}).forEach(F=>{const R=y.elem("path",{d:F.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:o.series[v],path:F.clone(),series:f,seriesIndex:v,axisX:c,axisY:m,chartRect:u,index:v,group:y,element:R,meta:k})})}},t.reverseData),this.eventEmitter.emit("created",{chartRect:u,axisX:c,axisY:m,svg:a,options:t})}constructor(t,n,o,a){super(t,n,Db,dr({},Db,o),a),this.data=n}}function eJ(e){return zw(e,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Array.from(n).reduce((a,r)=>({x:a.x+(vn(r,"x")?r.x:0),y:a.y+(vn(r,"y")?r.y:0)}),{x:0,y:0})})}const Ob={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Ol,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Ol,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class nx extends md{createChart(t){const{data:n}=this,o=ud(n,t.reverseData,t.horizontalBars?"x":"y",!0),a=cd(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:"")),r=t.stackBars&&t.stackMode!==!0&&o.series.length?ti([eJ(o.series)],t,t.horizontalBars?"x":"y"):ti(o.series,t,t.horizontalBars?"x":"y");this.svg=a;const s=a.elem("g").addClass(t.classNames.gridGroup),i=a.elem("g"),u=a.elem("g").addClass(t.classNames.labelGroup);typeof t.high=="number"&&(r.high=t.high),typeof t.low=="number"&&(r.low=t.low);const c=dd(a,t);let m;const f=t.distributeSeries&&t.stackBars?o.labels.slice(0,1):o.labels;let v,y,b;t.horizontalBars?(t.axisX.type===void 0?m=y=new Ju(to.x,o.series,c,{...t.axisX,highLow:r,referenceValue:0}):m=y=new t.axisX.type(to.x,o.series,c,{...t.axisX,highLow:r,referenceValue:0}),t.axisY.type===void 0?v=b=new Vs(to.y,o.series,c,{ticks:f}):v=b=new t.axisY.type(to.y,o.series,c,t.axisY)):(t.axisX.type===void 0?v=y=new Vs(to.x,o.series,c,{ticks:f}):v=y=new t.axisX.type(to.x,o.series,c,t.axisX),t.axisY.type===void 0?m=b=new Ju(to.y,o.series,c,{...t.axisY,highLow:r,referenceValue:0}):m=b=new t.axisY.type(to.y,o.series,c,{...t.axisY,highLow:r,referenceValue:0}));const w=t.horizontalBars?c.x1+m.projectValue(0):c.y1-m.projectValue(0),k=t.stackMode==="accumulate",x=t.stackMode==="accumulate-relative",I=[],C=[];let S=I;v.createGridAndLabels(s,u,t,this.eventEmitter),m.createGridAndLabels(s,u,t,this.eventEmitter),t.showGridBackground&&fv(s,c,t.classNames.gridBackground,this.eventEmitter),iv(n.series,(T,E)=>{const $=E-(n.series.length-1)/2;let F;t.distributeSeries&&!t.stackBars?F=v.axisLength/o.series.length/2:t.distributeSeries&&t.stackBars?F=v.axisLength/2:F=v.axisLength/o.series[E].length/2;const R=i.elem("g"),B=vn(T,"name")&&T.name,V=vn(T,"className")&&T.className,P=vn(T,"meta")?T.meta:void 0;B&&R.attr({"ct:series-name":B}),P&&R.attr({"ct:meta":Bl(P)}),R.addClass([t.classNames.series,V||"".concat(t.classNames.series,"-").concat(id(E))].join(" ")),o.series[E].forEach((z,H)=>{const j=vn(z,"x")&&z.x,N=vn(z,"y")&&z.y;let L;t.distributeSeries&&!t.stackBars?L=E:t.distributeSeries&&t.stackBars?L=0:L=H;let U;t.horizontalBars?U={x:c.x1+m.projectValue(j||0,H,o.series[E]),y:c.y1-v.projectValue(N||0,L,o.series[E])}:U={x:c.x1+v.projectValue(j||0,L,o.series[E]),y:c.y1-m.projectValue(N||0,H,o.series[E])},v instanceof Vs&&(v.stretch||(U[v.units.pos]+=F*(t.horizontalBars?-1:1)),U[v.units.pos]+=t.stackBars||t.distributeSeries?0:$*t.seriesBarDistance*(t.horizontalBars?-1:1)),x&&(S=N>=0||j>=0?I:C);const ee=S[H]||w;if(S[H]=ee-(w-U[v.counterUnits.pos]),z===void 0)return;const G={["".concat(v.units.pos,"1")]:U[v.units.pos],["".concat(v.units.pos,"2")]:U[v.units.pos]};t.stackBars&&(k||x||!t.stackMode)?(G["".concat(v.counterUnits.pos,"1")]=ee,G["".concat(v.counterUnits.pos,"2")]=S[H]):(G["".concat(v.counterUnits.pos,"1")]=w,G["".concat(v.counterUnits.pos,"2")]=U[v.counterUnits.pos]),G.x1=Math.min(Math.max(G.x1,c.x1),c.x2),G.x2=Math.min(Math.max(G.x2,c.x1),c.x2),G.y1=Math.min(Math.max(G.y1,c.y2),c.y1),G.y2=Math.min(Math.max(G.y2,c.y2),c.y1);const W=uv(T,H),ae=R.elem("line",G,t.classNames.bar).attr({"ct:value":[j,N].filter(wl).join(","),"ct:meta":Bl(W)});this.eventEmitter.emit("draw",{type:"bar",value:z,index:H,meta:W,series:T,seriesIndex:E,axisX:y,axisY:b,chartRect:c,group:R,element:ae,...G})})},t.reverseData),this.eventEmitter.emit("created",{chartRect:c,axisX:y,axisY:b,svg:a,options:t})}constructor(t,n,o,a){super(t,n,Ob,dr({},Ob,o),a),this.data=n}}const Bb={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:Ol,labelDirection:"neutral",ignoreEmptyValues:!1};function ox(e,t,n){const o=t.x>e.x;return o&&n==="explode"||!o&&n==="implode"?"start":o&&n==="implode"||!o&&n==="explode"?"end":"middle"}class tJ extends md{createChart(t){const{data:n}=this,o=ud(n),a=[];let r,s,i=t.startAngle;const u=cd(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie);this.svg=u;const c=dd(u,t);let m=Math.min(c.width()/2,c.height()/2);const f=t.total||o.series.reduce(jw,0),v=Js(t.donutWidth);v.unit==="%"&&(v.value*=m/100),m-=t.donut?v.value/2:0,t.labelPosition==="outside"||t.donut?s=m:t.labelPosition==="center"?s=0:s=m/2,t.labelOffset&&(s+=t.labelOffset);const y={x:c.x1+c.width()/2,y:c.y2+c.height()/2},b=n.series.filter(w=>vn(w,"value")?w.value!==0:w!==0).length===1;n.series.forEach((w,k)=>a[k]=u.elem("g")),t.showLabel&&(r=u.elem("g")),n.series.forEach((w,k)=>{var x,I;if(o.series[k]===0&&t.ignoreEmptyValues)return;const C=vn(w,"name")&&w.name,S=vn(w,"className")&&w.className,T=vn(w,"meta")?w.meta:void 0;C&&a[k].attr({"ct:series-name":C}),a[k].addClass([(x=t.classNames)===null||x===void 0?void 0:x.series,S||"".concat((I=t.classNames)===null||I===void 0?void 0:I.series,"-").concat(id(k))].join(" "));let E=f>0?i+o.series[k]/f*360:0;const $=Math.max(0,i-(k===0||b?0:.2));E-$>=359.99&&(E=$+359.99);const F=Ou(y.x,y.y,m,$),R=Ou(y.x,y.y,m,E),B=new po(!t.donut).move(R.x,R.y).arc(m,m,0,+(E-i>180),0,F.x,F.y);t.donut||B.line(y.x,y.y);const V=a[k].elem("path",{d:B.stringify()},t.donut?t.classNames.sliceDonut:t.classNames.slicePie);if(V.attr({"ct:value":o.series[k],"ct:meta":Bl(T)}),t.donut&&V.attr({style:"stroke-width: "+v.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:o.series[k],totalDataSum:f,index:k,meta:T,series:w,group:a[k],element:V,path:B.clone(),center:y,radius:m,startAngle:i,endAngle:E,chartRect:c}),t.showLabel){let P;n.series.length===1?P={x:y.x,y:y.y}:P=Ou(y.x,y.y,s,i+(E-i)/2);let z;o.labels&&!sv(o.labels[k])?z=o.labels[k]:z=o.series[k];const H=t.labelInterpolationFnc(z,k);if(H||H===0){const j=r.elem("text",{dx:P.x,dy:P.y,"text-anchor":ox(y,P,t.labelDirection)},t.classNames.label).text(String(H));this.eventEmitter.emit("draw",{type:"label",index:k,group:r,element:j,text:""+H,chartRect:c,series:w,meta:T,...P})}}i=E}),this.eventEmitter.emit("created",{chartRect:c,svg:u,options:t})}constructor(t,n,o,a){super(t,n,Bb,dr({},Bb,o),a),this.data=n}}const nJ=Object.freeze(Object.defineProperty({__proto__:null,AutoScaleAxis:Ju,Axis:fd,BarChart:nx,BaseChart:md,EPSILON:Du,EventEmitter:ex,FixedScaleAxis:JQ,Interpolation:Jw,LineChart:tx,PieChart:tJ,StepAxis:Vs,Svg:Ea,SvgList:Kw,SvgPath:po,alphaNumerate:id,axisUnits:to,createChartRect:dd,createGrid:Yw,createGridBackground:fv,createLabel:Xw,createSvg:cd,deserialize:KQ,determineAnchorPosition:ox,each:iv,easings:mv,ensureUnit:Of,escapingMap:Qs,extend:dr,getBounds:Uw,getHighLow:ti,getMetaData:uv,getMultiValue:Ni,getNumberOrUndefined:Lr,getSeriesOption:ml,isArrayOfArrays:Hw,isArrayOfSeries:Ww,isDataHoleValue:cv,isFalseyButZero:sv,isMultiValue:Gw,isNumeric:wl,namespaces:hl,noop:Ol,normalizeData:ud,normalizePadding:Zw,optionsProvider:Nf,orderOfMagnitude:Vw,polarToCartesian:Ou,precision:Mw,projectLength:dl,quantity:Js,rho:qw,roundWithPrecision:Lw,safeHasProperty:vn,serialMap:zw,serialize:Bl,splitIntoSegments:dv,sum:jw,times:ei},Symbol.toStringTag,{value:"Module"}));var ax={exports:{}};const oJ=K1(nJ);(function(e){(function(t,n){t===void 0&&window!==void 0&&(t=window),e.exports?e.exports=n(oJ):t["Chartist.plugins.tooltip"]=n(t.Chartist)})(Dr,function(t){return function(n,o,a){var r={currency:void 0,currencyFormatCallback:void 0,tooltipOffset:{x:0,y:-20},anchorToPoint:!1,appendToBody:!0,class:void 0,pointClass:"ct-point"};a.plugins=a.plugins||{},a.plugins.tooltip=function(m){return m=a.extend({},r,m),function(v){var y=m.pointClass;v instanceof a.BarChart?y="ct-bar":v instanceof a.PieChart&&(v.options.donut?y=v.options.donutSolid?"ct-slice-donut-solid":"ct-slice-donut":y="ct-slice-pie");var b=v.container,w=!1,k=c(b),x;m.appendToBody?x=o.querySelector(".chartist-tooltip"):x=b.querySelector(".chartist-tooltip"),x||(x=o.createElement("div"),x.className=m.class?"chartist-tooltip "+m.class:"chartist-tooltip",m.appendToBody?o.body.appendChild(x):b.appendChild(x));var I=x.offsetHeight,C=x.offsetWidth;$(x);function S(F,R,B){b.addEventListener(F,function(V){(!R||s(V.target,R))&&B(V)})}S("mouseover",y,function(F){var R=F.target,B="",V=v instanceof a.PieChart?R:R.parentNode,P=V?R.parentNode.getAttribute("ct:meta")||R.parentNode.getAttribute("ct:series-name"):"",z=R.getAttribute("ct:meta")||P||"",H=!!z,j=R.getAttribute("ct:value");if(m.transformTooltipTextFnc&&typeof m.transformTooltipTextFnc=="function"&&(j=m.transformTooltipTextFnc(j)),m.tooltipFnc&&typeof m.tooltipFnc=="function")B=m.tooltipFnc(z,j);else{if(m.metaIsHTML){var N=o.createElement("textarea");N.innerHTML=z,z=N.value}if(z='<span class="chartist-tooltip-meta">'+z+"</span>",H)B+=z+"<br>";else if(v instanceof a.PieChart){var L=i(R,"ct-label");L&&(B+=u(L)+"<br>")}j&&(m.currency&&(m.currencyFormatCallback!=null?j=m.currencyFormatCallback(j,m):j=m.currency+j.replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")),j='<span class="chartist-tooltip-value">'+j+"</span>",B+=j)}B&&(x.innerHTML=B,I=x.offsetHeight,C=x.offsetWidth,m.appendToBody!==!0&&(k=c(b)),x.style.display!=="absolute"&&(x.style.display="absolute"),T(F),E(x),I=x.offsetHeight,C=x.offsetWidth)}),S("mouseout",y,function(){$(x)}),S("mousemove",null,function(F){m.anchorToPoint===!1&&w&&T(F)});function T(F){I=I||x.offsetHeight,C=C||x.offsetWidth;var R=-C/2+m.tooltipOffset.x,B=-I+m.tooltipOffset.y,V=m.anchorToPoint===!0&&F.target.x2&&F.target.y2;if(m.appendToBody===!0)if(V){var P=b.getBoundingClientRect(),z=F.target.x2.baseVal.value+P.left+n.pageXOffset,H=F.target.y2.baseVal.value+P.top+n.pageYOffset;x.style.left=z+R+"px",x.style.top=H+B+"px"}else x.style.left=F.pageX+R+"px",x.style.top=F.pageY+B+"px";else{var j=k.getBoundingClientRect(),N=-j.left-n.pageXOffset+R,L=-j.top-n.pageYOffset+B;if(V){var P=b.getBoundingClientRect(),z=F.target.x2.baseVal.value+P.left+n.pageXOffset,H=F.target.y2.baseVal.value+P.top+n.pageYOffset;x.style.left=z+N+"px",x.style.top=H+L+"px"}else x.style.left=F.pageX+N+"px",x.style.top=F.pageY+L+"px"}}function E(F){w=!0,s(F,"tooltip-show")||(F.className=F.className+" tooltip-show")}function $(F){w=!1;var R=new RegExp("tooltip-show\\s*","gi");F.className=F.className.replace(R,"").trim()}}};function s(m,f){return(" "+m.getAttribute("class")+" ").indexOf(" "+f+" ")>-1}function i(m,f){do m=m.nextSibling;while(m&&!s(m,f));return m}function u(m){return m.innerText||m.textContent}function c(m){if(c in m){var f=m.offsetParent;return f||(f=o.body.parentElement),f}var f=m.parentNode;return f?n.getComputedStyle(f).position!=="static"?f:f.tagName==="BODY"?f.parentElement:c(f):o.body.parentElement}}(window,document,t),t.plugins.tooltip})})(ax);var aJ=ax.exports;const rx=Bt(aJ);function lx(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ni={symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3,stripZeros:!1,fallback:0};function sx(e){var t=arguments.length<=1||arguments[1]===void 0?ni.decimal:arguments[1],n=arguments.length<=2||arguments[2]===void 0?ni.fallback:arguments[2];if(Array.isArray(e))return e.map(function(u){return sx(u,t,n)});if(typeof e=="number")return e;var o=new RegExp("[^0-9-(-)-"+t+"]",["g"]),a=(""+e).replace(o,"").replace(t,".").replace(/\(([-]*\d*[^)]?\d+)\)/g,"-$1").replace(/\((.*)\)/,""),r=(a.match(/-/g)||2).length%2,s=parseFloat(a.replace(/-/g,"")),i=s*(r?-1:1);return isNaN(i)?n:i}function rJ(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function ec(e,t){t=rJ(t,ni.precision);var n=Math.pow(10,t);return(Math.round((e+1e-8)*n)/n).toFixed(t)}var Rs=lx(function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}e.exports=Object.assign||function(a,r){for(var s,i=o(a),u,c=1;c<arguments.length;c++){s=Object(arguments[c]);for(var m in s)t.call(s,m)&&(i[m]=s[m]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(s);for(var f=0;f<u.length;f++)n.call(s,u[f])&&(i[u[f]]=s[u[f]])}}return i}}),ix=Rs&&typeof Rs=="object"&&"default"in Rs?Rs.default:Rs;function lJ(e,t){var n=e.split(t),o=n[0],a=n[1].replace(/0+$/,"");return a.length>0?o+t+a:o}function pv(e){var t=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];if(Array.isArray(e))return e.map(function(s){return pv(s,t)});t=ix({},ni,t);var n=e<0?"-":"",o=parseInt(ec(Math.abs(e),t.precision),10)+"",a=o.length>3?o.length%3:0,r=n+(a?o.substr(0,a)+t.thousand:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+t.thousand)+(t.precision>0?t.decimal+ec(Math.abs(e),t.precision).split(".")[1]:"");return t.stripZeros?lJ(r,t.decimal):r}var Ds=lx(function(e){var t=String.prototype.valueOf,n=function(i){try{return t.call(i),!0}catch{return!1}},o=Object.prototype.toString,a="[object String]",r=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol";e.exports=function(i){return typeof i=="string"?!0:typeof i!="object"?!1:r?n(i):o.call(i)===a}}),sJ=Ds&&typeof Ds=="object"&&"default"in Ds?Ds.default:Ds;function iJ(e){return sJ(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e}function tc(e){var t=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];if(Array.isArray(e))return e.map(function(a){return tc(a,t)});t=ix({},ni,t);var n=iJ(t.format),o=void 0;return e>0?o=n.pos:e<0?o=n.neg:o=n.zero,o.replace("%s",t.symbol).replace("%v",pv(Math.abs(e),t))}function ro(){const{scriptConfig:e}=Ne();function t(o,a={}){return pv(o,Object.assign({precision:e("currency.precision"),thousand:e("currency.thousands_separator"),decimal:e("currency.decimal_mark")},a))}function n(o,a=null){return a=a||e("currency"),tc(o,{symbol:a.symbol,precision:a.precision,thousand:a.thousands_separator,decimal:a.decimal_mark,format:a.symbol_first==!0?"%s%v":"%v%s"})}return{toFixed:ec,formatNumber:t,formatMoney:n}}const uJ={__name:"BasePresentationChart",props:{chartData:null,amountValue:null,horizontal:null,axisYOffset:{type:Number,default:30},axisXOffset:{type:Number,default:30},onlyInteger:{type:Boolean,default:!0}},setup(e){const t=e;let n=null;const o=M(null),{formatMoney:a}=ro();function r(){n.update(t.chartData)}function s(){n&&n.detach()}return $e(()=>t.chartData,r),Je(()=>{n=new nx(o.value,t.chartData,{horizontalBars:t.horizontal,fullWidth:!0,axisY:{offset:t.axisYOffset,onlyInteger:t.onlyInteger},axisX:{onlyInteger:t.onlyInteger,offset:t.axisXOffset},plugins:[rx({pointClass:"ct-bar",anchorToPoint:!1,appendToBody:!1,transformTooltipTextFnc:i=>t.amountValue?a(i):i})]},[["screen and (max-width: 1025px)",{axisX:{labelInterpolationFnc:function(i){return typeof i=="number"?i:i[0]}},axisY:{offset:20,labelInterpolationFnc:function(i){return typeof i=="number"?i:i[0]}}}]]),n.on("draw",i=>{if(i.type==="bar"){let u=i.series[i.index].color;u&&i.element.attr({style:`stroke: ${u} !important`})}})}),En(s),(i,u)=>(g(),D("div",{ref_key:"chartRef",ref:o,class:"ct-chart"},null,512))}};function ux(e){return{labels:Tn(e,"label"),series:[Tn(e,t=>({meta:t.label,value:t.value,color:t.color}))]}}function cx(e){const t=e.series.length;if(t===0)return!1;let n=!1;for(let o=0;o<t&&!(e.series[o].length>0&&(n=e.series[o].some(a=>a.value>0),n));o++);return n}const cJ={__name:"PresentationChart",props:{card:{required:!0,type:Object},requestQueryString:{type:Object,default:()=>({})}},setup(e){const t=e,n=Pt(t.card.value),o=O(()=>t.card.color||"chart-primary"),a=O(()=>ux(n.value)),r=O(()=>cx(a.value));return(s,i)=>{const u=d("IText");return g(),A(sd,{class:"has-[[data-slot=empty]]:h-52 md:h-52",card:e.card,"request-query-string":e.requestQueryString,onRetrieved:i[0]||(i[0]=c=>n.value=c.card.value)},bn({default:p(()=>[_("div",{class:be(["relative",o.value])},[r.value?(g(),A(uJ,{key:0,class:"px-1","chart-data":a.value,"amount-value":e.card.amount_value,horizontal:e.card.horizontal,"only-integer":e.card.onlyInteger,"axis-y-offset":e.card.axisYOffset,"axis-x-offset":e.card.axisXOffset},null,8,["chart-data","amount-value","horizontal","only-integer","axis-y-offset","axis-x-offset"])):(g(),A(u,{key:1,"data-slot":"empty",class:"mt-10 text-center sm:mt-12",text:s.$t("core::app.not_enough_data")},null,8,["text"]))],2)]),_:2},[Ie(s.$slots,(c,m)=>({name:m,fn:p(f=>[Se(s.$slots,m,en(un(f)))])}))]),1032,["card","request-query-string"])}}},dJ={__name:"BaseProgressionChart",props:["chartData","amountValue"],setup(e){const t=e;let n=null;const o=M(null),{formatMoney:a}=ro();function r(){n.update(t.chartData)}function s(){n&&n.detach()}return $e(()=>t.chartData,r),Je(()=>{n=new tx(o.value,t.chartData,{lineSmooth:Jw.none(),fullWidth:!0,showPoint:!0,showLine:!0,showArea:!0,chartPadding:{top:10,right:.5,bottom:.5,left:.5},low:0,axisX:{showGrid:!1,showLabel:!0,offset:0},axisY:{showGrid:!1,showLabel:!0,offset:0},plugins:[rx({pointClass:"ct-point",anchorToPoint:!1,appendToBody:!1,transformTooltipTextFnc:i=>t.amountValue?a(i):i})]})}),En(s),(i,u)=>(g(),D("div",{ref_key:"chartRef",ref:o,class:"ct-chart"},null,512))}},mJ={__name:"ProgressionChart",props:{card:{required:!0,type:Object},requestQueryString:{type:Object,default:()=>({})}},setup(e){const t=e,n=Pt(t.card.value),o=O(()=>t.card.color||"chart-primary"),a=O(()=>ux(n.value)),r=O(()=>cx(a.value));return(s,i)=>{const u=d("IText");return g(),A(sd,{class:"has-[[data-slot=empty]]:h-52 md:h-52",card:e.card,"request-query-string":e.requestQueryString,onRetrieved:i[0]||(i[0]=c=>n.value=c.card.value)},bn({default:p(()=>[_("div",{class:be(["relative",o.value])},[r.value?(g(),A(dJ,{key:0,"chart-data":a.value,"amount-value":e.card.amount_value},null,8,["chart-data","amount-value"])):(g(),A(u,{key:1,"data-slot":"empty",class:"mt-10 text-center sm:mt-12",text:s.$t("core::app.not_enough_data")},null,8,["text"]))],2)]),_:2},[Ie(s.$slots,(c,m)=>({name:m,fn:p(f=>[Se(s.$slots,m,en(un(f)))])}))]),1032,["card","request-query-string"])}}},dx={__name:"BaseDatePicker",props:{isDate:{type:Boolean,required:!0},isDateTime:{type:Boolean,required:!0}},setup(e){const t=e,n=Vl({loader:()=>us(()=>import("./index-DBPiAoHo.js"),__vite__mapDeps([])).then(u=>u.DatePicker),loadingComponent:Si}),{usesTwelveHourTime:o,userTimezone:a}=rt(),{isDarkMode:r}=Ne(),s=O(()=>{let u={};return t.isDate?u.modelValue="YYYY-MM-DD":t.isDateTime&&(u.modelValue="YYYY-MM-DD HH:mm:ss"),u}),i=O(()=>({masks:s.value,id:Sc().replace("_","-")}));return(u,c)=>(g(),A(h(n),{"title-position":"left",color:"primary",locale:i.value,is24hr:!h(o),"is-dark":h(r),timezone:h(a),"hide-time-header":!0,popover:{visibility:"focus",positionFixed:!0}},bn({_:2},[Ie(u.$slots,(m,f)=>({name:f,fn:p(v=>[Se(u.$slots,f,en(un(v)))])}))]),1032,["locale","is24hr","is-dark","timezone"]))}},fJ={class:"relative rounded-lg shadow-sm"},pJ={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},vJ={__name:"DatePicker",props:{modelValue:String,withIcon:{default:!0,type:Boolean},id:String,name:String,placeholder:String,disabled:Boolean,required:Boolean,clearable:Boolean,minDate:[Date,String],minutesInterval:{type:Number,default:5},mode:{type:String,default:"date",validator:e=>["date","dateTime"].includes(e)}},emits:["update:modelValue","input"],setup(e,{emit:t}){const n=e,o=t,a=new Date,{DateTime:r,localizedDate:s,localizedDateTime:i,onDifferentDay:u}=rt(),c=M(null),m=O(()=>n.mode.toLowerCase()==="datetime"),f=O(()=>n.mode.toLowerCase()==="date"),v=O(()=>{if(m.value)return n.minDate==="now"?{hours:function(S,{isValid:T,date:E}){return T?u(E,a)?!0:S>=a.getHours():!1},minutes:function(S,{isValid:T,date:E}){return!T||S%n.minutesInterval!==0?!1:u(E,a)?!0:S>a.getMinutes()||E.getHours()>a.getHours()}}:{minutes:{interval:n.minutesInterval}}}),y=O(()=>c.value?b(c.value):"");$e(c,S=>{if(Gt(S))return C();f.value?I(S):m.value?I(r.fromFormat(S,"yyyy-MM-dd HH:mm:ss").toUTC().toISO()):I(S)}),$e(()=>n.modelValue,S=>{k(S)||w(S)},{immediate:!0,deep:!0});function b(S){return f.value?s(r.fromFormat(S,"yyyy-MM-dd").toISODate()):m.value?i(r.fromFormat(S,"yyyy-MM-dd HH:mm:ss").toISO()):S}function w(S){m.value?c.value=r.fromISO(S).toFormat("yyyy-MM-dd HH:mm:ss"):(f.value,c.value=S)}function k(S){if(Gt(S)&&Gt(c.value)||S==c.value)return!0;if(!c.value&&S||!S&&c.value)return!1;if(m.value)return r.fromFormat(S,"yyyy-MM-dd HH:mm:ss",{zone:"utc"}).toLocal().toFormat("yyyy-MM-dd HH:mm:ss")===c.value;if(f.value)return S===c.value}function x(){c.value=null}function I(S){o("update:modelValue",S),o("input",S)}function C(){I(null)}return(S,T)=>{const E=d("Icon"),$=d("IFormInput"),F=d("IButton");return g(),A(dx,{modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=R=>c.value=R),modelModifiers:{string:!0},mode:e.mode,"is-required":e.required,rules:v.value,"min-date":e.minDate==="now"?h(a):e.minDate,"is-date":f.value,"is-date-time":m.value},{default:p(R=>[Se(S.$slots,"default",en(un({...R,inputValue:y.value})),()=>[_("div",fJ,[e.withIcon?(g(),D("div",pJ,[l(E,{icon:"Calendar",class:"size-5 text-neutral-500 dark:text-neutral-300"})])):K("",!0),l($,Ue({id:e.id,autocomplete:"off",class:e.withIcon?"pl-10 sm:pl-11":"","model-value":y.value,placeholder:e.placeholder,disabled:e.disabled,name:e.name,readonly:""},Ur(R.inputEvents)),null,16,["id","class","model-value","placeholder","disabled","name"]),e.clearable?ne((g(),A(F,{key:1,class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:x},null,512)),[[pe,!!c.value]]):K("",!0)])])]),_:3},8,["modelValue","mode","is-required","rules","min-date","is-date","is-date-time"])}}},hJ={class:"flex flex-col items-center justify-start sm:flex-row"},gJ={class:"relative w-full grow rounded-lg shadow-sm"},bJ={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},yJ={class:"m-2 shrink-0"},_J={class:"relative w-full grow rounded-lg shadow-sm"},IJ={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},wJ={__name:"DateRangePicker",props:{modelValue:Object,withIcon:{default:!0,type:Boolean},id:String,name:String,placeholder:String,disabled:Boolean,required:Boolean,clearable:Boolean,minutesInterval:{type:Number,default:5},rangeKeys:{type:Object,default:()=>({start:"start",end:"end"})},mode:{type:String,default:"date",validator:e=>["date","dateTime"].includes(e)}},emits:["update:modelValue","input"],setup(e,{emit:t}){const n=e,o=t,{DateTime:a,localizedDate:r,localizedDateTime:s}=rt(),i=M(null),u=M([{minutes:{interval:n.minutesInterval}},{minutes:{interval:n.minutesInterval}}]),c=O(()=>n.mode.toLowerCase()==="datetime"),m=O(()=>n.mode.toLowerCase()==="date"),f=O(()=>({[n.rangeKeys.start]:b.value,[n.rangeKeys.end]:w.value})),v=O(()=>i.value[n.rangeKeys.start]),y=O(()=>i.value[n.rangeKeys.end]),b=O(()=>v.value?k(v.value):""),w=O(()=>y.value?k(y.value):"");$e(i,F=>{if(Gt(F))return $();if(m.value)E(F);else if(c.value){let R=F[n.rangeKeys.start],B=F[n.rangeKeys.end];E({[n.rangeKeys.start]:S(R).toUTC().toISO(),[n.rangeKeys.end]:S(B).toUTC().toISO()})}else E(F)}),$e(()=>n.modelValue,F=>{I(F)||x(F)},{immediate:!0,deep:!0});function k(F){return m.value?r(a.fromFormat(F,"yyyy-MM-dd").toISODate()):c.value?s(S(F).toISO()):F}function x(F){let R=F[n.rangeKeys.start],B=F[n.rangeKeys.end];m.value?i.value={[n.rangeKeys.start]:R,[n.rangeKeys.end]:B}:c.value?i.value={[n.rangeKeys.start]:a.fromISO(R).toFormat("yyyy-MM-dd HH:mm:ss"),[n.rangeKeys.end]:a.fromISO(B).toFormat("yyyy-MM-dd HH:mm:ss")}:i.value=F}function I(F){if(Gt(F)&&Gt(i.value)||F==i.value)return!0;if(!i.value&&F||!F&&i.value)return!1;if(c.value)return C(F[n.rangeKeys.start])===v.value&&C(F[n.rangeKeys.end])===y.value;if(m.value)return F[n.rangeKeys.start]===v.value&&F[n.rangeKeys.end]===y.value}function C(F){return a.fromFormat(F,"yyyy-MM-dd HH:mm:ss",{zone:"utc"}).toLocal().toFormat("yyyy-MM-dd HH:mm:ss")}function S(F){return a.fromFormat(F,"yyyy-MM-dd HH:mm:ss")}function T(){i.value[n.rangeKeys.start]=null,i.value[n.rangeKeys.end]=null}function E(F){o("update:modelValue",F),o("input",F)}function $(){E({[n.rangeKeys.start]:null,[n.rangeKeys.end]:null})}return(F,R)=>{const B=d("Icon"),V=d("IFormInput"),P=d("IButton");return g(),A(dx,{modelValue:i.value,"onUpdate:modelValue":R[0]||(R[0]=z=>i.value=z),modelModifiers:{string:!0,range:!0},mode:e.mode,"is-required":e.required,rules:u.value,"is-date":m.value,"is-date-time":c.value},{default:p(z=>[Se(F.$slots,"default",en(un({...z,inputValue:f.value})),()=>[_("div",hJ,[_("div",gJ,[e.withIcon?(g(),D("div",bJ,[l(B,{icon:"Calendar",class:"size-5 text-neutral-500 dark:text-neutral-300"})])):K("",!0),l(V,Ue({id:e.id+"-"+e.rangeKeys.start,autocomplete:"off",class:"pl-10 sm:pl-11","model-value":b.value,placeholder:e.placeholder,disabled:e.disabled,name:e.name+"-"+e.rangeKeys.start,readonly:""},Ur(z.inputEvents[e.rangeKeys.start])),null,16,["id","model-value","placeholder","disabled","name"])]),_("span",yJ,[l(B,{icon:"ArrowRight",class:"size-4 text-neutral-600"})]),_("div",_J,[e.withIcon?(g(),D("div",IJ,[l(B,{icon:"Calendar",class:"size-5 text-neutral-400 dark:text-neutral-300"})])):K("",!0),l(V,Ue({id:e.id+"-"+e.rangeKeys.end,autocomplete:"off",class:"pl-10 sm:pl-11","model-value":w.value,placeholder:e.placeholder,disabled:e.disabled,name:e.name+"-"+e.rangeKeys.end,readonly:""},Ur(z.inputEvents[e.rangeKeys.end])),null,16,["id","model-value","placeholder","disabled","name"]),e.clearable?ne((g(),A(P,{key:1,class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:T},null,512)),[[pe,!!v.value&&!!y.value]]):K("",!0)])])])]),_:3},8,["modelValue","mode","is-required","rules","is-date","is-date-time"])}}};var xJ=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],kJ=function(e){return xJ.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},$J=function(e,t,n){Object.keys(t).filter(kJ).forEach(function(o){var a=t[o];typeof a=="function"&&(o==="onInit"?a(e,n):n.on(o.substring(2),function(r){return a(r,n)}))})},CJ=function(e,t,n,o){var a=e.modelEvents?e.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;$e(o,function(s,i){n&&typeof s=="string"&&s!==i&&s!==n.getContent({format:e.outputFormat})&&n.setContent(s)}),n.on(r||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},SJ=function(e,t,n,o,a,r){o.setContent(r()),n.attrs["onUpdate:modelValue"]&&CJ(t,n,o,a),$J(e,n.attrs,o)},Nb=0,mx=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return Nb++,e+"_"+n+Nb+String(t)},TJ=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Pb=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},EJ=function(e,t){return Pb(e).concat(Pb(t))},FJ=function(e){return e==null},Mb=function(){return{listeners:[],scriptId:mx("tiny-script"),scriptLoaded:!1}},AJ=function(){var e=Mb(),t=function(a,r,s,i){var u=r.createElement("script");u.referrerPolicy="origin",u.type="application/javascript",u.id=a,u.src=s;var c=function(){u.removeEventListener("load",c),i()};u.addEventListener("load",c),r.head&&r.head.appendChild(u)},n=function(a,r,s){e.scriptLoaded?s():(e.listeners.push(s),a.getElementById(e.scriptId)||t(e.scriptId,a,r,function(){e.listeners.forEach(function(i){return i()}),e.scriptLoaded=!0}))},o=function(){e=Mb()};return{load:n,reinitialize:o}},RJ=AJ(),DJ=function(){return typeof window<"u"?window:global},Sr=function(){var e=DJ();return e&&e.tinymce?e.tinymce:null},OJ={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},ia=function(){return ia=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ia.apply(this,arguments)},BJ=function(e,t,n,o){return e(o||"div",{id:t,ref:n})},NJ=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},Im={selector:void 0,target:void 0},fx=Le({props:OJ,setup:function(e,t){var n=e.init?ia(ia({},e.init),Im):ia({},Im),o=H1(e),a=o.disabled,r=o.modelValue,s=o.tagName,i=M(null),u=null,c=e.id||mx("tiny-vue"),m=e.init&&e.init.inline||e.inline,f=!!t.attrs["onUpdate:modelValue"],v=!0,y=e.initialValue?e.initialValue:"",b="",w=function(I){return f?function(){return r!=null&&r.value?r.value:""}:function(){return I?y:b}},k=function(){var I=w(v),C=ia(ia({},n),{readonly:e.disabled,target:i.value,plugins:EJ(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:m,setup:function(S){u=S,S.on("init",function(T){return SJ(T,e,t,S,r,I)}),typeof n.setup=="function"&&n.setup(S)}});TJ(i.value)&&(i.value.style.visibility=""),Sr().init(C),v=!1};$e(a,function(I){var C;u!==null&&(typeof((C=u.mode)===null||C===void 0?void 0:C.set)=="function"?u.mode.set(I?"readonly":"design"):u.setMode(I?"readonly":"design"))}),$e(s,function(I){var C;f||(b=u.getContent()),(C=Sr())===null||C===void 0||C.remove(u),ze(function(){return k()})}),Je(function(){if(Sr()!==null)k();else if(i.value&&i.value.ownerDocument){var I=e.cloudChannel?e.cloudChannel:"6",C=e.apiKey?e.apiKey:"no-api-key",S=FJ(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(C,"/tinymce/").concat(I,"/tinymce.min.js"):e.tinymceScriptSrc;RJ.load(i.value.ownerDocument,S,k)}}),En(function(){Sr()!==null&&Sr().remove(u)}),m||(Zf(function(){v||k()}),Yf(function(){var I;f||(b=u.getContent()),(I=Sr())===null||I===void 0||I.remove(u)}));var x=function(I){var C;b=u.getContent(),(C=Sr())===null||C===void 0||C.remove(u),n=ia(ia(ia({},n),I),Im),ze(function(){return k()})};return t.expose({rerender:x,getEditor:function(){return u}}),function(){return m?BJ(Ae,c,i,e.tagName):NJ(Ae,c,i)}}}),PJ="Expected a function";function MJ(e){if(typeof e!="function")throw new TypeError(PJ);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var VJ=MJ,LJ=Lp,qJ=FI,UJ=ra,jJ=Fn,zJ=VJ;function HJ(e,t){var n=jJ(e)?LJ:qJ;return n(e,zJ(UJ(t)))}var WJ=HJ;const px=Bt(WJ),nc={fr:"fr_FR",he:"he_IL",hu:"hu_HU",nb:"nb_NO",pt:"pt_PT",sv:"sv_SE",zh:"zh_CN",bg:"bg_BG"},GJ=Object.assign({inheritAttrs:!1},{__name:"Editor",props:yt({id:String,minimal:Boolean,absoluteUrls:{type:Boolean,default:!1},placeholder:{type:String,default:""},defaultTag:{type:String,default:"p"},withImage:{type:Boolean,default:!0},withMention:Boolean,autoCompleter:[Array,Object],config:Object},{modelValue:{default:""},modelModifiers:{}}),emits:yt(["init"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const o=e,a=n,r=Zt(e,"modelValue"),{t:s}=Ee(),{scriptConfig:i,users:u,currentUser:c,isDarkMode:m,locale:f}=Ne(),v=M(null),y=$o(),b=M(!1);let w=null;$e(()=>[m.value],()=>{v.value.rerender(I.value)}),$e(()=>o.autoCompleter,F=>{F&&v.value.rerender(I.value)}),$e(r,F=>{F===null&&(r.value="")});const k={default:{toolbar:`
      blocks |
      bold italic underline strikethrough |
      forecolor backcolor |
      link image |
      alignment | bullist numlist | removeformat`,quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},minimal:{toolbar:"emoticons removeformat | undo redo",toolbar_location:"bottom",quickbars_insert_toolbar:"blocks | bullist numlist | image",quickbars_selection_toolbar:"bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright | quicklink | blocks"}},x=O(()=>({cache_suffix:"?v="+i("version"),branding:!1,promotion:!1,width:"100%",height:150,min_height:150,menubar:!1,contextmenu:!1,statusbar:!1,forced_root_block:o.defaultTag,images_upload_handler:E,language:Object.hasOwn(nc,f.value)?nc[f.value]:f.value,automatic_uploads:!0,images_reuse_filename:!0,paste_data_images:o.withImage,relative_urls:!o.absoluteUrls,convert_urls:!1,remove_script_host:!1,placeholder:o.placeholder,format_noneditable_selector:".not-used",link_context_toolbar:!0,toolbar_groups:{alignment:{icon:"align-left",tooltip:tinymce.util.I18n.translate("Alignment"),items:"alignleft aligncenter alignright | alignjustify"}},body_class:m.value?"dark":"",plugins:["quickbars","lists","autolink","link","autoresize","emoticons"],quickbars_image_toolbar:"image | alignleft aligncenter alignright | remove",content_style:`
    .mce-content-body.dark {background: #0f172a;}
    .mce-content-body.dark[data-mce-placeholder]:not(.mce-visualblocks)::before {
      color: #64748b;
    }

    .mention {
      color: #212529;
      background-color: #f4f5f7;
      height: 24px;
      width: 65px;
      border-radius: 6px;
      padding: 3px 3px;
      margin-right: 2px;
      -webkit-user-select: all;
      -moz-user-select: all;
      -ms-user-select: all;
      user-select: all;
    }
    `,block_formats:`${tinymce.util.I18n.translate("Paragraph")}=p; ${tinymce.util.I18n.translate("Heading 1")}=h1; ${tinymce.util.I18n.translate("Heading 2")}=h2; ${tinymce.util.I18n.translate("Heading 3")}=h3;  ${tinymce.util.I18n.translate("Heading 4")}=h4`,setup:F=>{F.concordCommands={},o.withMention&&T(F),o.autoCompleter&&S(o.autoCompleter,F),F.on("init",R=>{w=R.target,a("init")})}})),I=O(()=>{let F={...x.value,...k[o.minimal?"minimal":"default"]};return o.withImage&&F.plugins.push("image"),{...Object.assign({},F,o.config||{}),...m.value?{skin:"oxide-dark",content_css:"dark"}:{}}}),C=O(()=>px(Tn(u.value,F=>({id:F.id,name:F.name})),F=>F.id==c.value.id));function S(F,R){let B=qn(F);B.length&&B.forEach(V=>{Object.keys(V).length>0&&R.ui.registry.addAutocompleter(V.id,{trigger:V.trigger,minChars:V.minChars||0,columns:1,fetch:function(P){return new Promise(z=>z(V.list))},onAction:function(P,z,H){R.selection.setRng(z||0),R.insertContent(`${H} `),P.hide()}})})}function T(F){F.concordCommands.insertMentionUser=function(R,B,V){F.selection.setRng(V||0),F.insertContent(`<span class="mention"
                        data-mention-id="${R}"
                        contenteditable="false"
                        data-notified="false"><span data-mention-char>@</span><span data-mention-value>${B}</span>
                        </span> `)},F.ui.registry.addAutocompleter("mentions",{trigger:"@",minChars:0,columns:1,fetch:function(R){return new Promise(B=>B(Tn(C.value,V=>({value:V.id.toString(),text:V.name}))))},onAction:function(R,B,V){let P=ut(C.value,["id",parseInt(V)]);F.concordCommands.insertMentionUser(V,P.name,B),R.hide()}})}function E(F,R){const B=F.blob();return new Promise((V,P)=>{if(!/^image\//.test(B.type)){P({message:s("validation.image",{attribute:B.name}),remove:!0});return}const z=new FormData;z.append("file",B,F.filename()),Innoclapps.request().post(`/media/pending/${y}`,z).then(({data:H})=>V(o.absoluteUrls?H.preview_url:H.preview_path)).catch(H=>{let j=H.message&&H.message.includes("413")?s("core::app.file_too_large"):H.response.data.message;P({message:j,remove:!0})})})}function $(){w.focus()}return Je(()=>{setTimeout(()=>{b.value=!0},250)}),t({focus:$}),(F,R)=>{const B=d("ISpinner");return g(),D("div",{class:be(e.minimal?"tox-minimal":"")},[b.value?(g(),A(h(fx),Ue({key:0,id:e.id,ref_key:"tinymceRef",ref:v,modelValue:r.value,"onUpdate:modelValue":R[0]||(R[0]=V=>r.value=V)},F.$attrs,{init:I.value}),null,16,["id","modelValue","init"])):(g(),A(B,{key:1,class:"size-5 text-primary-500"}))],2)}}}),KJ=Object.assign({inheritAttrs:!1},{__name:"MainLayout",props:{overlay:Boolean,noPadding:Boolean,scrollable:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const o=d("IOverlay");return g(),D(fe,null,[(g(),A(ta,{to:"#navbar-actions"},[Se(t.$slots,"actions")])),_("main",Ue({id:"main",class:["relative flex-1 focus:outline-none",e.scrollable?"overflow-y-auto":""]},t.$attrs),[_("div",{class:be({"py-8 sm:py-6":!e.noPadding})},[_("div",{class:be(["mx-auto",{"px-4 sm:px-6 lg:px-8":!e.noPadding}])},[_("div",{class:be({"sm:py-4":!e.noPadding})},[l(o,{show:e.overlay},{default:p(()=>[t.$slots.actions?(g(),D("div",{key:0,class:be(["mb-4 flex justify-end lg:hidden",{"px-4 pt-10 sm:px-6 lg:px-8":e.noPadding}])},[Se(t.$slots,"actions")],2)):K("",!0),Se(t.$slots,"default")]),_:3},8,["show"])],2)],2)],2)],16)],64)}}}),ZJ={},YJ={class:"inline-flex items-center space-x-2 lg:space-x-3.5"};function XJ(e,t){return g(),D("div",YJ,[Se(e.$slots,"default")])}const QJ=fn(ZJ,[["render",XJ]]),JJ={};function eee(e,t){return g(),D("span",{class:"mx-3 border-l border-neutral-200 dark:border-neutral-500/30 lg:mx-5",style:Nt({height:"var(--navbar-height)"})},null,4)}const tee=fn(JJ,[["render",eee]]);function la(e,t){const n=cn(),o=pt(t||e),a=O({set(y){n.commit("queryBuilder/SET_AVAILABLE_RULES",{identifier:pt(e),view:o,rules:y})},get(){return n.getters["queryBuilder/getAvailableRules"](pt(e),o)||[]}}),r=O({set(y){n.commit("queryBuilder/SET_BUILDER_RULES",{identifier:pt(e),view:o,rules:y})},get(){return n.getters["queryBuilder/getBuilderRules"](pt(e),o)||{}}}),s=O(()=>r.value.children&&r.value.children.length>0),i=O(()=>WI(r.value,a.value)),u=O(()=>i.value.length),c=O(()=>u.value>0),m=O(()=>{if(!c.value)return!0;let y=0;return i.value.forEach(b=>{Gt(b)||y++}),u.value===y});function f(y){return n.getters["queryBuilder/findRuleInQueryBuilder"](pt(e),o,y)}function v(){n.commit("queryBuilder/RESET_BUILDER_RULES",{identifier:pt(e),view:o})}return{availableRules:a,queryBuilderRules:r,hasAnyBuilderRules:s,hasRulesApplied:c,rulesAreValid:m,totalValidRules:u,findRule:f,resetQueryBuilderRules:v}}function vx(){const{t:e}=Ee();return{labels:{operatorLabels:{is:e("core::filters.operators.is"),was:e("core::filters.operators.was"),equal:e("core::filters.operators.equal"),not_equal:e("core::filters.operators.not_equal"),in:e("core::filters.operators.in"),not_in:e("core::filters.operators.not_in"),less:e("core::filters.operators.less"),less_or_equal:e("core::filters.operators.less_or_equal"),greater:e("core::filters.operators.greater"),greater_or_equal:e("core::filters.operators.greater_or_equal"),between:e("core::filters.operators.between"),not_between:e("core::filters.operators.not_between"),begins_with:e("core::filters.operators.begins_with"),not_begins_with:e("core::filters.operators.not_begins_with"),contains:e("core::filters.operators.contains"),not_contains:e("core::filters.operators.not_contains"),ends_with:e("core::filters.operators.ends_with"),not_ends_with:e("core::filters.operators.not_ends_with"),is_empty:e("core::filters.operators.is_empty"),is_not_empty:e("core::filters.operators.is_not_empty"),is_null:e("core::filters.operators.is_null"),is_not_null:e("core::filters.operators.is_not_null")},matchType:e("core::filters.match_type"),matchTypeAll:e("core::filters.match_type_all"),matchTypeAny:e("core::filters.match_type_any"),addCondition:e("core::filters.add_condition"),addAnotherCondition:e("core::filters.add_another_condition"),addGroup:e("core::filters.add_group"),selectRule:e("core::filters.select_rule")}}}const qa={operand:{required:!0},isNullable:{required:!0,type:Boolean},index:{required:!0,type:Number},query:{type:Object,required:!1},rule:{type:Object,required:!0},labels:{required:!0},operator:{required:!0},isBetween:Boolean,readOnly:Boolean};function br(e,t,n){const o=cn();$e(()=>h(e).operand,(r,s)=>{s&&a(vm(h(t))?[]:"")}),$e(t,(r,s)=>{const i=vm(r);i&&!Array.isArray(h(e).value)&&a([]),(vm(s)||s=="is"||s=="was"||n)&&!i&&a("")});function a(r){o.commit("queryBuilder/UPDATE_QUERY_VALUE",{query:h(e),value:r})}return{updateValue:a}}const nee=Object.assign({inheritAttrs:!1},{__name:"CheckboxRule",props:qa,setup(e){const t=e,n=O({get(){return t.query.value},set(r){a(r)}}),o=O(()=>t.rule.options.length),{updateValue:a}=br(gt(t,"query"),gt(t,"operator"),t.isNullable);return t.query.value===null&&a([]),(r,s)=>{const i=d("IFormCheckbox"),u=d("IFormCheckboxLabel"),c=d("IFormCheckboxField");return g(),D("div",{class:be(o.value<=3?"inline-flex space-x-3":"space-y-1")},[(g(!0),D(fe,null,Ie(r.rule.options,m=>(g(),A(c,{key:m[r.rule.valueKey]},{default:p(()=>[l(i,{checked:n.value,"onUpdate:checked":s[0]||(s[0]=f=>n.value=f),value:m[r.rule.valueKey],disabled:r.readOnly},null,8,["checked","value","disabled"]),l(u,{text:m[r.rule.labelKey]},null,8,["text"])]),_:2},1024))),128))],2)}}}),oee={key:0,class:"flex items-center space-x-1 sm:space-x-2"},aee={key:0,class:"w-full sm:w-auto"},ree=_("option",{value:""},null,-1),lee=["value","textContent"],see=Object.assign({inheritAttrs:!1},{__name:"DateRule",props:qa,setup(e){const t=e,{updateValue:n}=br(gt(t,"query"),gt(t,"operator"),t.isNullable),o=O(()=>t.query.operator==="is"),a=O(()=>Tn(t.rule.operatorsOptions.is,(u,c)=>({value:c,text:u}))),r=O(()=>Tn(t.rule.operatorsOptions.was,(u,c)=>({value:c,text:u}))),s=O(()=>o.value?a.value:r.value),i=O(()=>t.query.operator==="was");return(u,c)=>{const m=d("DatePicker"),f=d("Icon"),v=d("IFormSelect");return!o.value&&!i.value?(g(),D("div",oee,[u.isBetween?K("",!0):(g(),D("div",aee,[l(m,{placeholder:u.$t("core::filters.placeholders.select_date"),"model-value":u.query.value,disabled:u.readOnly,onInput:c[0]||(c[0]=y=>h(n)(y))},null,8,["placeholder","model-value","disabled"])])),u.isBetween?(g(),A(m,{key:1,placeholder:u.$t("core::filters.placeholders.select_date"),"model-value":u.query.value[0],disabled:u.readOnly,onInput:c[1]||(c[1]=y=>h(n)([y,u.query.value[1]]))},null,8,["placeholder","model-value","disabled"])):K("",!0),u.isBetween?(g(),A(f,{key:2,icon:"ArrowRight",class:"size-4 shrink-0 text-neutral-600"})):K("",!0),u.isBetween?(g(),A(m,{key:3,placeholder:u.$t("core::filters.placeholders.select_date"),"min-date":u.query.value[0]||null,disabled:u.readOnly||!u.query.value[0],"model-value":u.query.value[1],onInput:c[2]||(c[2]=y=>h(n)([u.query.value[0],y]))},null,8,["placeholder","min-date","disabled","model-value"])):K("",!0)])):(g(),A(v,{key:1,class:"w-full sm:w-auto","model-value":u.query.value,disabled:u.readOnly,onInput:c[3]||(c[3]=y=>h(n)(y))},{default:p(()=>[ree,(g(!0),D(fe,null,Ie(s.value,y=>(g(),D("option",{key:y.value,value:y.value,textContent:Z(y.text)},null,8,lee))),128))]),_:1},8,["model-value","disabled"]))}}}),iee=Object.assign({inheritAttrs:!1},{__name:"MultiSelectRule",props:qa,setup(e){const t=e,{t:n}=Ee(),{updateValue:o}=br(gt(t,"query"),gt(t,"operator"),t.isNullable),a=O(()=>t.rule.options),r=O(()=>n("core::filters.placeholders.choose_with_multiple",{label:t.operand?t.operand.label:t.rule.label})),s=O({get(){return(t.query.value||[]).map(i=>a.value.find(u=>u[t.rule.valueKey]==i))},set(i){o(i.map(u=>u[t.rule.valueKey]))}});return(i,u)=>{const c=d("ICustomSelect");return g(),A(c,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),multiple:!0,disabled:i.readOnly,"input-id":"rule-"+i.rule.id+"-"+i.index,placeholder:r.value,label:i.rule.labelKey,"option-key":i.rule.valueKey,options:a.value},null,8,["modelValue","disabled","input-id","placeholder","label","option-key","options"])}}}),uee={};function cee(e,t){return null}const dee=fn(uee,[["render",cee]]),mee={key:1,class:"flex items-center space-x-2"},fee=Object.assign({inheritAttrs:!1},{__name:"NumberRule",props:qa,setup(e){const t=e,{t:n}=Ee(),{updateValue:o}=br(gt(t,"query"),gt(t,"operator"),t.isNullable),a=O(()=>n("core::filters.placeholders.enter",{label:t.operand?t.operand.label:t.rule.label}));return(r,s)=>{const i=d("IFormInput"),u=d("Icon");return r.isBetween?(g(),D("div",mee,[l(i,{type:"number",placeholder:a.value,disabled:r.readOnly,"model-value":r.query.value[0],onInput:s[1]||(s[1]=c=>h(o)([c,r.query.value[1]]))},null,8,["placeholder","disabled","model-value"]),l(u,{icon:"ArrowRight",class:"size-4 shrink-0 text-neutral-600"}),l(i,{type:"number",placeholder:a.value,disabled:r.readOnly,"model-value":r.query.value[1],onInput:s[2]||(s[2]=c=>h(o)([r.query.value[0],c]))},null,8,["placeholder","disabled","model-value"])])):(g(),A(i,{key:0,type:"number",class:"w-full sm:w-auto",placeholder:a.value,disabled:r.readOnly,"model-value":r.query.value,onInput:s[0]||(s[0]=c=>h(o)(c))},null,8,["placeholder","disabled","model-value"]))}}}),pee={key:1,class:"flex items-center space-x-2"},vee=Object.assign({inheritAttrs:!1},{__name:"NumericRule",props:qa,setup(e){const t=e,{t:n}=Ee(),{updateValue:o}=br(gt(t,"query"),gt(t,"operator"),t.isNullable),a=O(()=>n("core::filters.placeholders.enter",{label:t.operand?t.operand.label:t.rule.label}));return t.query.value===null&&o(0),(r,s)=>{const i=d("IFormNumericInput"),u=d("Icon");return r.isBetween?(g(),D("div",pee,[l(i,{placeholder:a.value,"model-value":r.query.value[0],"read-only":r.readOnly,onInput:s[1]||(s[1]=c=>h(o)([c,r.query.value[1]]))},null,8,["placeholder","model-value","read-only"]),l(u,{icon:"ArrowRight",class:"size-4 shrink-0 text-neutral-600"}),l(i,{placeholder:a.value,"model-value":r.query.value[1],"read-only":r.readOnly,onInput:s[2]||(s[2]=c=>h(o)([r.query.value[0],c]))},null,8,["placeholder","model-value","read-only"])])):(g(),A(i,{key:0,class:"w-full sm:w-auto",placeholder:a.value,"model-value":r.query.value,"read-only":r.readOnly,onInput:s[0]||(s[0]=c=>h(o)(c))},null,8,["placeholder","model-value","read-only"]))}}}),hee=Object.assign({inheritAttrs:!1},{__name:"RadioRule",props:qa,setup(e){const t=e,n=O({get(){return t.query.value},set(r){a(r)}}),o=O(()=>t.rule.options.length),{updateValue:a}=br(gt(t,"query"),gt(t,"operator"),t.isNullable);return(r,s)=>{const i=d("IFormRadio"),u=d("IFormRadioLabel"),c=d("IFormRadioField");return g(),D("div",{class:be(o.value<=3?"inline-flex space-x-3":"space-y-1")},[(g(!0),D(fe,null,Ie(r.rule.options,m=>(g(),A(c,{key:m[r.rule.valueKey]},{default:p(()=>[l(i,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=f=>n.value=f),value:m[r.rule.valueKey],disabled:r.readOnly,name:r.rule.id},null,8,["modelValue","value","disabled","name"]),l(u,{text:m[r.rule.labelKey]},null,8,["text"])]),_:2},1024))),128))],2)}}}),gee=Object.assign({inheritAttrs:!1},{__name:"SelectRule",props:qa,setup(e){const t=e,{t:n}=Ee(),{updateValue:o}=br(gt(t,"query"),gt(t,"operator"),t.isNullable),a=O(()=>t.rule.options),r=O(()=>n("core::filters.placeholders.choose",{label:t.operand?t.operand.label:t.rule.label})),s=O({get(){return ut(a.value,[t.rule.valueKey,t.query.value])||null},set(i){o(i?i[t.rule.valueKey]:null)}});return Gt(t.query.value)&&(s.value=a.value[0]?a.value[0]:null),(i,u)=>{const c=d("ICustomSelect");return g(),A(c,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),disabled:i.readOnly,"input-id":"rule-"+i.rule.id+"-"+i.index,placeholder:r.value,label:i.rule.labelKey,"option-key":i.rule.valueKey,options:a.value},null,8,["modelValue","disabled","input-id","placeholder","label","option-key","options"])}}}),bee=Object.assign({inheritAttrs:!1},{__name:"StaticRule",props:qa,setup(e){return(t,n)=>{const o=d("IBadge");return g(),A(o,{variant:"info",text:t.$t("core::filters.static_rule_indicator")},null,8,["text"])}}}),yee=Object.assign({inheritAttrs:!1},{__name:"TextRule",props:qa,setup(e){const t=e,{t:n}=Ee(),{updateValue:o}=br(gt(t,"query"),gt(t,"operator"),t.isNullable),a=O(()=>n("core::filters.placeholders.enter",{label:t.operand?t.operand.label:t.rule.label}));return(r,s)=>{const i=d("IFormInput");return g(),A(i,{type:"text",class:"w-full sm:w-auto",placeholder:a.value,disabled:r.readOnly,"model-value":r.query.value,onInput:s[0]||(s[0]=u=>h(o)(u))},null,8,["placeholder","disabled","model-value"])}}}),_ee={class:"relative mb-3.5 sm:flex sm:items-center"},Iee={class:"mb-1 flex w-full flex-col justify-start sm:mb-0 sm:mr-3 sm:w-auto sm:flex-row sm:items-center sm:space-x-3"},wee={class:"relative flex items-center"},xee={key:0,class:"absolute -left-[31.5px] z-20 rounded-full border border-white bg-white dark:border-neutral-800 dark:bg-neutral-700"},kee={key:0,class:"mr-3 flex-1"},$ee=Object.assign({name:"Rule",inheritAttrs:!1},{__name:"QueryBuilderRule",props:["query","index","depth","labels","readOnly","availableRules"],emits:["childDeletionRequested"],setup(e,{emit:t}){const n=e,o=t,a={"numeric-rule":vee,"checkbox-rule":nee,"date-rule":see,"number-rule":fee,"radio-rule":hee,"select-rule":gee,"multi-select-rule":iee,"text-rule":yee,"static-rule":bee,"nullable-rule":dee},r=cn(),s=O(()=>n.depth-1),i=O({get(){return n.query.operand},set(T){r.commit("queryBuilder/UPDATE_QUERY_OPERAND",{query:n.query,value:T})}}),u=O({get(){return n.query.operator},set(T){r.commit("queryBuilder/UPDATE_QUERY_OPERATOR",{query:n.query,value:T})}}),c=O(()=>ut(n.availableRules,["id",n.query.rule])),m=O(()=>n.query.operand?ut(c.value.operands,["value",n.query.operand]):null),f=O(()=>{let T=v.value?m.value.rule.component:c.value.component;return Object.hasOwn(a,T)?a[T]:T}),v=O(()=>!!(m.value&&m.value.rule)),y=O(()=>v.value?m.value.rule.operators:c.value.operators),b=O(()=>y.value&&y.value.length===1),w=O(()=>!c.value||c.value.isStatic||c.value.hideOperands?!1:c.value.operands&&c.value.operands.length>0),k=O(()=>Yp(u.value)),x=O(()=>HI(u.value));function I(T){r.commit("queryBuilder/UPDATE_QUERY_RULE",{query:n.query,value:T.id}),r.commit("queryBuilder/UPDATE_QUERY_VALUE",{query:n.query,value:null}),r.commit("queryBuilder/UPDATE_QUERY_TYPE",{query:n.query,value:T.type}),u.value=T.operators[0],T.operands&&T.operands.length>0?(i.value=T.operands[0][T.operands[0].valueKey],T.operands[0].rule&&(u.value=T.operands[0].rule.operators[0])):i.value=null}function C(T){r.commit("queryBuilder/UPDATE_QUERY_VALUE",{query:n.query,value:null}),i.value=T[T.valueKey],T.rule.operators&&T.rule.operators.length>0&&(u.value=T.rule.operators[0])}function S(){o("childDeletionRequested",n.index)}return(T,E)=>{const $=d("Icon"),F=d("ICustomSelect"),R=Ve("i-tooltip");return g(),D("div",_ee,[_("div",Iee,[_("div",wee,[c.value&&c.value.helpText?ne((g(),D("div",xee,[l($,{icon:"QuestionMarkCircle",class:"size-5 text-neutral-500 hover:text-neutral-700 dark:text-white dark:hover:text-neutral-300"})])),[[R,c.value.helpText,void 0,{bottom:!0,light:!0}]]):K("",!0),_("div",{class:be(["w-full",s.value===1?"sm:w-48":s.value===2?"sm:w-44":"sm:w-40"])},[l(F,{disabled:e.readOnly,class:be({"ring-warning-400":!e.query.rule}),"model-value":c.value,placeholder:e.labels.selectRule,clearable:!1,options:e.availableRules,truncate:"","onUpdate:modelValue":I},null,8,["disabled","class","model-value","placeholder","options"])],2)]),w.value?(g(),D("div",{key:0,class:be(["mt-1 w-full sm:!ml-1 sm:mt-0",s.value===1?"sm:w-48":"sm:w-44"])},[l(F,{"model-value":m.value,disabled:e.readOnly,clearable:!1,"option-label":B=>B[B.labelKey],options:c.value.operands,truncate:"","onUpdate:modelValue":C},null,8,["model-value","disabled","option-label","options"])],2)):K("",!0),c.value&&!b.value&&!c.value.isStatic?(g(),D("div",{key:1,class:be(["my-1 w-full sm:my-0 sm:!ml-1",s.value===1?"sm:w-40":"sm:w-36"])},[l(F,{modelValue:u.value,"onUpdate:modelValue":E[0]||(E[0]=B=>u.value=B),disabled:e.readOnly,"option-label":B=>e.labels.operatorLabels[B]||B,clearable:!1,options:y.value,truncate:""},null,8,["modelValue","disabled","option-label","options"])],2)):K("",!0)]),c.value||m.value?ne((g(),D("div",kee,[(g(),A(Rt(f.value),{query:e.query,index:e.index,operand:m.value,rule:m.value?m.value.rule:c.value,operator:e.query.operator,labels:e.labels,"read-only":e.readOnly,"is-nullable":x.value,"is-between":k.value},null,8,["query","index","operand","rule","operator","labels","read-only","is-nullable","is-between"]))],512)),[[pe,!x.value]]):K("",!0),e.readOnly?K("",!0):(g(),D("button",{key:1,type:"button",class:"absolute -right-7 top-1.5 mr-px rounded-full border border-neutral-200 bg-neutral-50 p-1 text-neutral-500 hover:bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-700 dark:text-neutral-200 dark:hover:bg-neutral-800",onClick:S},[l($,{icon:"Trash",class:"size-4"})]))])}}}),Cee={value:"and"},See={value:"or"},Tee=Object.assign({name:"QueryBuilderGroup"},{__name:"QueryBuilderGroup",props:["index","query","availableRules","maxDepth","depth","labels","readOnly","previousMatchType"],emits:["childDeletionRequested"],setup(e,{emit:t}){const n=e,o=t,a={rule:$ee,group:"QueryBuilderGroup"},r=cn(),s=O({get(){return n.query.condition},set(w){r.commit("queryBuilder/UPDATE_QUERY_CONDITION",{query:n.query,value:w})}}),i=O(()=>({"border rounded-lg bg-neutral-50/60 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-500/30":n.depth===1,"border rounded-md bg-neutral-100/80 dark:bg-neutral-700 border-neutral-200 dark:border-neutral-500/30":n.depth===2,"border rounded bg-neutral-200/40 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-500/30":n.depth>2})),u=O({get(){return n.query.children},set(w){r.commit("queryBuilder/SET_QUERY_CHILDREN",{query:n.query,children:w})}}),c=O(()=>u.value.length);$e(c,w=>{n.depth>1&&w==0&&y()});const m=O(()=>n.depth+1);function f(){r.commit("queryBuilder/ADD_QUERY_CHILD",{query:n.query,child:{type:"rule",query:{type:null,rule:null,operator:null,operand:null,value:null}}})}function v(){n.depth<n.maxDepth&&r.commit("queryBuilder/ADD_QUERY_GROUP",n.query)}function y(){o("childDeletionRequested",n.index)}function b(w){r.commit("queryBuilder/REMOVE_QUERY_CHILD",{query:n.query,index:w})}return(w,k)=>{const x=d("I18nT"),I=d("ITextDark"),C=d("IButton"),S=d("ILink"),T=d("IDropdownButton"),E=d("IDropdownItem"),$=d("IDropdownItemLabel"),F=d("IDropdownItemDescription"),R=d("IDropdownMenu"),B=d("IDropdown");return g(),D(fe,null,[_("div",{class:be(["mb-2",e.depth>1?"mb-1 ml-1 mt-7":"",c.value>1||e.depth>1?"flex items-center":"hidden"])},[l(I,null,{default:p(()=>[l(x,{scope:"global",class:"flex w-full flex-wrap items-start font-medium sm:items-center",tag:"p",keypath:e.depth<=1?"core::filters.show_matching_records_conditions":"core::filters.or_match_any_conditions"},bn({match_type:p(()=>[ne(_("select",{"onUpdate:modelValue":k[0]||(k[0]=V=>s.value=V),class:be(["border-1 mx-1 rounded-md border-neutral-300 bg-none px-2 py-0 text-base/6 focus:shadow-none focus:ring-primary-500 dark:border-neutral-500 dark:bg-neutral-500 dark:text-white sm:text-sm/6",e.readOnly?"pointer-events-none":""])},[_("option",Cee,Z(e.labels.matchTypeAll),1),_("option",See,Z(e.labels.matchTypeAny),1)],2),[[W1,s.value]])]),_:2},[e.depth>1?{name:"condition",fn:p(()=>[le(Z(w.$t("core::filters.conditions."+e.previousMatchType)),1)]),key:"0"}:void 0]),1032,["keypath"])]),_:1}),e.depth>1?(g(),A(C,{key:0,class:"ml-auto",icon:"Trash",basic:"",small:"",onClick:ot(y,["prevent","stop"])})):K("",!0)],2),_("div",{class:be(["px-3.5 py-5",e.depth>0&&"mb-4",i.value])},[(g(!0),D(fe,null,Ie(u.value,(V,P)=>(g(),A(Rt(a[V.type]),{key:V.query.rule+"-"+P,query:V.query,index:P,"previous-match-type":e.query.condition,"read-only":e.readOnly,"max-depth":e.maxDepth,depth:m.value,"available-rules":e.availableRules,labels:e.labels,onChildDeletionRequested:b},null,40,["query","index","previous-match-type","read-only","max-depth","depth","available-rules","labels"]))),128)),_("div",{class:be(["inline-flex",e.readOnly?"hidden":""])},[c.value===0||!(e.depth<e.maxDepth)?(g(),A(S,{key:0,basic:"",onClick:f},{default:p(()=>[le(" + "+Z(c.value===0?e.labels.addCondition:e.labels.addAnotherCondition),1)]),_:1})):(g(),A(B,{key:1},{default:p(()=>[l(T,{link:"",basic:"","no-caret":""},{default:p(()=>[le(" + "+Z(c.value===0?e.labels.addCondition:e.labels.addAnotherCondition),1)]),_:1}),l(R,null,{default:p(()=>[l(E,{onClick:f},{default:p(()=>[le(" + "+Z(e.labels.addCondition),1)]),_:1}),e.depth<e.maxDepth&&c.value>0?(g(),A(E,{key:0,onClick:v},{default:p(()=>[l($,null,{default:p(()=>[le("+ "+Z(e.labels.addGroup),1)]),_:1}),l(F,{text:w.$t("core::filters.add_group_info")},null,8,["text"])]),_:1})):K("",!0)]),_:1})]),_:1}))],2)],2)],64)}}}),wm=["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"],Vb={text:{operators:["equal","not_equal","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],inputType:"text",id:"text-field"},number:{operators:wm,inputType:"number",id:"number-field"},date:{operators:wm.concat(["is"]),inputType:"date",id:"date-field"},numeric:{operators:wm,inputType:"numeric",id:"numeric-field"},radio:{operators:["equal"],options:[],inputType:"radio",id:"radio-field"},checkbox:{operators:["in"],options:[],inputType:"checkbox",id:"checkbox-field"},select:{operators:["equal","not_equal"],options:[],inputType:"select",id:"select-field"},"multi-select":{operators:["in","not_in"],options:[],inputType:"select",id:"multi-select-field"}},Eee={__name:"QueryBuilder",props:{identifier:{type:String,required:!0},view:{type:String,required:!0},readOnly:Boolean,labels:Object,maxDepth:{type:Number,default:3,validator:e=>e>=1}},setup(e){const t=e,{resetQueryBuilderRules:n,queryBuilderRules:o,availableRules:a}=la(t.identifier,t.view),{labels:r}=vx(),s=M(1),i=O(()=>Object.assign({},r,t.labels)),u=O(()=>{let c=[];return a.value.forEach(m=>{typeof Vb[m.type]<"u"?c.push(Object.assign({},Vb[m.type],m)):c.push(m)}),c});return Object.keys(o.value).length===0&&n(),(c,m)=>(g(),D("div",null,[l(Tee,{index:0,query:h(o),"available-rules":u.value,"max-depth":e.maxDepth,"read-only":e.readOnly,depth:s.value,labels:i.value},null,8,["query","available-rules","max-depth","read-only","depth","labels"]),Se(c.$slots,"default")]))}};function Pi(e,t){const n=cn(),{currentUser:o}=Ne(),a=pt(t||e),r=O({set(w){w===null?n.dispatch("filters/clearActive",{identifier:pt(e),view:a}):n.commit("filters/SET_ACTIVE",{identifier:pt(e),view:a,id:w})},get(){return n.getters["filters/getActive"](pt(e),a)}}),s=O({set(w){n.commit("filters/SET",{identifier:pt(e),filters:w})},get(){return n.getters["filters/getAll"](pt(e))}}),i=O({set(w){n.commit("filters/SET_AVAILABLE_RULES",{identifier:pt(e),rules:w})},get(){return n.state.filters.availableRules[pt(e)]}}),u=O(()=>i.value?i.value.length>0:!1),c=O({set(w){n.commit("filters/SET_BUILDER_VISIBLE",{identifier:pt(e),view:a,visible:w})},get(){return n.getters["filters/filtersBuilderVisible"](pt(e),a)}});function m(){c.value=!c.value}const f=O(()=>v(o.value.id));function v(w){return n.getters["filters/getDefault"](pt(e),a,w)}function y(w){return n.getters["filters/getById"](pt(e),w)}async function b(w){n.dispatch("filters/destroy",{identifier:pt(e),view:a,id:w})}return{filters:s,availableRules:i,filtersBuilderVisible:c,toggleFiltersBuilderVisibility:m,activeFilter:r,hasRules:u,currentUserDefaultFilter:f,findFilter:y,deleteFilter:b}}const Fee={class:"flex items-center"},Aee=["textContent"],Ree={class:"mb-3 flex items-center justify-end space-x-2"},Dee={key:1},Oee={class:"mt-5"},Bee={class:"grid grid-cols-2 gap-4"},Nee={class:"flex space-x-5"},hx=Object.assign({inheritAttrs:!1},{__name:"FilterBuilder",props:{view:{required:!0,type:String},identifier:{required:!0,type:String},initialApply:{default:!0,type:Boolean},activeFilterId:Number},emits:["apply"],setup(e,{emit:t}){const n=e,o=t,a=cn(),{currentUser:r}=Ne(),{form:s}=Ze(),i=M(!1),u=M(!1),c=M(!1),m=M(!1),{availableRules:f,queryBuilderRules:v,rulesAreValid:y,hasRulesApplied:b,findRule:w,resetQueryBuilderRules:k,totalValidRules:x}=la(n.identifier,n.view),{availableRules:I,filtersBuilderVisible:C,activeFilter:S,currentUserDefaultFilter:T,findFilter:E,deleteFilter:$}=Pi(n.identifier,n.view);f.value=I.value;const F=O(()=>R.value.filter(Y=>!!w(Y.id)).map(Y=>Y.label).join(", ")),R=O(()=>I.value.filter(Y=>Y.has_authorization)),B=O(()=>R.value.some(Y=>w(Y.id))),V=O(()=>S.value&&S.value.is_system_default),P=O(()=>S.value&&T.value&&S.value.id==T.value.id),z=O(()=>!(!y.value||x.value===0)),H=O(()=>S.value?S.value.is_readonly||S.value.is_shared_from_another_user:!1),j=O(()=>S.value.authorizations.update),N=O(()=>S.value.authorizations.delete),L=(...Y)=>a.commit("filters/PUSH",...Y),U=(...Y)=>a.commit("filters/UPDATE",...Y),ee=(...Y)=>a.commit("filters/UNMARK_AS_DEFAULT",...Y);function G(){s.clear().set({name:null,rules:[],is_shared:!1}),u.value=!1,i.value=!1,c.value=!1}function W(){G(),S.value&&j.value&&oe()}async function ae(){s.fill("identifier",n.identifier);let Y=await s.post("/filters");return L({filter:Y,identifier:n.identifier}),de(Y.id),Y}async function ue(){const Y=await s.put(`/filters/${S.value.id}`);return me(Y),Y}async function ce(){if(!u.value){xe(),C.value=!1;return}s.fill("rules",v.value),await(i.value?ue():ae()),await ze(),i.value?P.value&&!c.value?se():!P.value&&c.value&&Q():c.value&&Q(),xe(),C.value=!1,m.value=!1}function oe(){s.is_shared=S.value.is_shared,s.name=S.value.name,c.value=P.value,i.value=!0,u.value=!0}async function ie(){await $(S.value.id),C.value=!1,he()}function Q(){Innoclapps.request().put(`filters/${S.value.id}/${n.view}/default`).then(({data:Y})=>{T.value&&T.value.id!=Y.id&&ee({id:T.value.id,identifier:n.identifier,view:n.view,userId:r.value.id}),me(Y)})}function se(){Innoclapps.request().delete(`/filters/${S.value.id}/${n.view}/default`).then(({data:Y})=>{me(Y)})}function me(Y){U({identifier:n.identifier,filter:Y})}function xe(){o("apply",v.value)}function de(Y,X=!0){let re=E(Y);v.value=structuredClone(Vn(re.rules)||{}),S.value=re.id,X&&xe()}function he(){k(),xe()}return $e(B,(Y,X)=>{!X&&Y&&(s.is_shared=!1)}),Ut(`${n.identifier}-${n.view}-filter-selected`,de),n.activeFilterId?de(n.activeFilterId,n.initialApply):S.value?(y.value||(v.value=S.value.rules),n.initialApply&&xe()):T.value?de(T.value.id,n.initialApply):n.initialApply&&xe(),(Y,X)=>{const re=d("IAlertBody"),we=d("IAlert"),Ce=d("Icon"),ge=d("ILink"),Re=d("IDropdownItemLabel"),et=d("IDropdownItemDescription"),kt=d("IDropdownItem"),lt=d("IDropdownMinimal"),ft=d("IFormInput"),zt=d("IFormError"),De=d("IFormGroup"),_e=d("IDropdownButton"),Te=d("IDropdownMenu"),Xe=d("IDropdown"),Me=d("IFormCheckbox"),ke=d("IFormCheckboxLabel"),We=d("IFormCheckboxDescription"),$t=d("IFormCheckboxField"),Yt=d("IFormSwitchLabel"),Fe=d("IFormSwitch"),Ge=d("IFormSwitchField"),ht=d("IButton"),Xt=d("IModal"),Ke=Ve("i-tooltip");return g(),A(Xt,{size:"xl",visible:h(C),title:h(S)?Y.$t("core::filters.edit_filter"):Y.$t("core::filters.create"),"ok-text":u.value?Y.$t("core::filters.save_and_apply"):Y.$t("core::filters.apply"),"ok-disabled":!z.value||h(s).busy,"cancel-text":Y.$t("core::app.hide"),"hide-footer":H.value,"static-backdrop":"",onOk:ce,onShown:W,onHidden:X[6]||(X[6]=He=>C.value=!1)},{title:p(({title:He})=>[_("span",Fee,[P.value?(g(),A(Ce,{key:0,class:"-mt-px mr-1 size-5",icon:"Star"})):K("",!0),_("span",{textContent:Z(He)},null,8,Aee)])]),"modal-cancel":p(({cancel:He,text:vt})=>[_("div",Nee,[ne(l(Ge,null,{default:p(()=>[l(Yt,{text:Y.$t("core::filters.save_as_new")},null,8,["text"]),l(Fe,{modelValue:u.value,"onUpdate:modelValue":X[5]||(X[5]=pn=>u.value=pn)},null,8,["modelValue"])]),_:1},512),[[pe,!i.value&&!h(S)&&h(b)]]),l(ht,{class:"hidden sm:inline-flex",disabled:h(s).busy,text:vt,basic:"",onClick:He},null,8,["disabled","text","onClick"])])]),default:p(()=>[H.value?(g(),A(we,{key:0,class:"mb-3"},{default:p(()=>[l(re,null,{default:p(()=>[le(Z(Y.$t("core::filters.is_readonly")),1)]),_:1})]),_:1})):K("",!0),_("div",Ree,[!H.value&&h(b)?(g(),A(ge,{key:0,text:Y.$t("core::filters.clear_rules"),basic:"",onClick:he},null,8,["text"])):K("",!0),H.value||h(S)&&N.value?(g(),A(lt,{key:1,small:"",horizontal:""},{default:p(()=>[H.value?(g(),D(fe,{key:0},[P.value?(g(),A(kt,{key:1,text:Y.$t("core::filters.unmark_as_default"),onClick:se},null,8,["text"])):(g(),A(kt,{key:0,onClick:Q},{default:p(()=>[l(Re,null,{default:p(()=>[le(Z(Y.$t("core::filters.mark_as_default")),1)]),_:1}),l(et,null,{default:p(()=>[le(Z(Y.$t("core::filters.mark_as_default_for_current_account_only")),1)]),_:1})]),_:1}))],64)):K("",!0),h(S)&&N.value?ne((g(),D("span",Dee,[l(kt,{disabled:V.value||H.value,text:Y.$t("core::app.delete"),"confirm-text":Y.$t("core::app.confirm"),confirmable:"",onConfirmed:ie},null,8,["disabled","text","confirm-text"])])),[[Ke,V.value?Y.$t("core::filters.system_default_delete_info"):null]]):K("",!0)]),_:1})):K("",!0)]),l(h(Eee),Ue(Y.$attrs,{"read-only":H.value,identifier:e.identifier,view:e.view}),null,16,["read-only","identifier","view"]),ne(_("div",Oee,[_("div",Bee,[l(De,{"label-for":"filter_name",label:Y.$t("core::filters.name"),required:""},{default:p(()=>[l(ft,{id:"filter_name",modelValue:h(s).name,"onUpdate:modelValue":X[0]||(X[0]=He=>h(s).name=He),name:"name",type:"text",placeholder:Y.$t("core::filters.name")},null,8,["modelValue","placeholder"]),l(zt,{error:h(s).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(De,{label:Y.$t("core::filters.share.with"),required:""},{default:p(()=>[l(Xe,{"adaptive-width":""},{default:p(()=>[l(_e,{variant:"secondary",class:"w-full"},{default:p(()=>[le(Z(h(s).is_shared?Y.$t("core::filters.share.everyone"):Y.$t("core::filters.share.private")),1)]),_:1}),l(Te,null,{default:p(()=>[l(kt,{active:h(s).is_shared===!1,onClick:X[1]||(X[1]=He=>h(s).is_shared=!1)},{default:p(()=>[l(Re,{text:Y.$t("core::filters.share.private")},null,8,["text"]),l(et,{text:Y.$t("core::filters.share.private_info")},null,8,["text"])]),_:1},8,["active"]),B.value?K("",!0):(g(),A(kt,{key:0,active:h(s).is_shared===!0,onClick:X[2]||(X[2]=He=>h(s).is_shared=!0)},{default:p(()=>[l(Re,{text:Y.$t("core::filters.share.everyone")},null,8,["text"]),l(et,{text:Y.$t("core::filters.share.everyone_info")},null,8,["text"])]),_:1},8,["active"]))]),_:1})]),_:1}),l(zt,{error:h(s).getError("is_shared")},null,8,["error"])]),_:1},8,["label"])]),B.value?(g(),A(we,{key:0,class:"mb-3",show:""},{default:p(()=>[l(re,null,{default:p(()=>[le(Z(Y.$t("core::filters.cannot_be_shared",{rules:F.value})),1)]),_:1})]),_:1})):K("",!0)],512),[[pe,u.value&&!H.value]]),ne(l(De,null,{default:p(()=>[l($t,null,{default:p(()=>[l(Me,{checked:c.value,"onUpdate:checked":[X[3]||(X[3]=He=>c.value=He),X[4]||(X[4]=He=>m.value=He)]},null,8,["checked"]),l(ke,{text:Y.$t("core::filters.mark_as_default")},null,8,["text"]),ne(l(We,{text:Y.$t("core::filters.mark_as_default_for_current_account_only")},null,8,["text"]),[[pe,m.value]])]),_:1})]),_:1},512),[[pe,u.value&&!H.value]])]),_:1},8,["visible","title","ok-text","ok-disabled","cancel-text","hide-footer"])}}}),Pee={class:"col-start-5 row-start-1 ml-auto shrink-0"},Mee={__name:"FiltersDropdownItem",props:{identifier:{type:String,required:!0},view:{type:String,required:!0},filterId:{type:Number,required:!0},canDelete:{type:Boolean,required:!0},name:{type:String,required:!0}},emits:["click","deleteRequested"],setup(e){const t=e,{activeFilter:n,currentUserDefaultFilter:o}=Pi(t.identifier,t.view),a=O(()=>n.value&&n.value.id==t.filterId),r=O(()=>o.value?t.filterId==o.value.id:!1);return(s,i)=>{const u=d("Icon"),c=d("IDropdownItem");return g(),A(c,{active:a.value,icon:r.value?"Star":void 0,condensed:"",onClick:i[1]||(i[1]=m=>s.$emit("click",e.filterId))},{default:p(()=>[le(Z(e.name)+" ",1),_("span",Pee,[e.canDelete?(g(),A(u,{key:0,class:"size-5 cursor-pointer sm:size-4",icon:"Trash",onClick:i[0]||(i[0]=m=>s.$emit("deleteRequested"))})):K("",!0)])]),_:1},8,["active","icon"])}}},Vee={class:"flex items-center space-x-0.5"},Lee=["textContent"],qee={class:"px-2.5 py-2"},Uee={class:"inline-block max-h-80 w-full overflow-auto"},gx=Object.assign({inheritAttrs:!1},{__name:"FiltersDropdown",props:{placement:{default:"bottom-end",type:String},identifier:{required:!0,type:String},view:{required:!0,type:String}},emits:["apply"],setup(e,{emit:t}){const n=e,o=t,{queryBuilderRules:a,hasRulesApplied:r,resetQueryBuilderRules:s}=la(n.identifier,n.view),{filters:i,activeFilter:u,filtersBuilderVisible:c,toggleFiltersBuilderVisibility:m,deleteFilter:f}=Pi(n.identifier,n.view),v=M(null),y=O(()=>v.value&&x.value.length===0),b=O(()=>r.value||u.value),w=O(()=>!r.value&&!u.value),k=O(()=>i.value.length>0),x=O(()=>v.value?i.value.filter($=>$.name.toLowerCase().includes(v.value.toLowerCase())):i.value);function I(){u.value=null,o("apply",a.value)}function C($){m(),$()}function S($){u.value&&I(),c.value=!0,$()}function T($){At(`${n.identifier}-${n.view}-filter-selected`,$)}async function E($){await Innoclapps.confirm(),await f($),s(),o("apply",a.value)}return($,F)=>{const R=d("IDropdownButton"),B=d("ILink"),V=d("SearchInput"),P=d("IDropdownSeparator"),z=d("ITextDark"),H=d("IText"),j=d("IDropdownMenu"),N=d("IDropdown"),L=d("IButton"),U=Ve("i-tooltip");return g(),D("div",Vee,[l(N,{placement:e.placement},{default:p(({hide:ee})=>[l(R,Ue({variant:"secondary"},$.$attrs),{default:p(()=>{var G;return[_("span",{class:"sm:max-w-[13rem] sm:truncate",textContent:Z(((G=h(u))==null?void 0:G.name)||$.$t("core::filters.filters"))},null,8,Lee)]}),_:1},16),l(j,{class:"w-[19rem]"},{default:p(()=>[_("div",qee,[l(B,{text:$.$t("core::filters.new"),class:be(["mr-2.5",{"border-r border-neutral-200 pr-2.5 dark:border-white/10":h(u)}]),basic:"",onClick:G=>S(ee)},null,8,["text","class","onClick"]),ne(l(B,{class:"border-r border-neutral-200 pr-2.5 dark:border-white/10",text:$.$t("core::filters.edit"),basic:"",onClick:G=>C(ee)},null,8,["text","onClick"]),[[pe,h(u)]]),ne(l(B,{class:"pl-2.5",text:$.$t("core::filters.clear_applied"),basic:"",onClick:I},null,8,["text"]),[[pe,h(u)]]),ne(l(V,{modelValue:v.value,"onUpdate:modelValue":F[0]||(F[0]=G=>v.value=G),class:"mb-1 mt-3",placeholder:$.$t("core::filters.search"),onKeydown:ot(()=>"stop headless ui trying active click",["stop"])},null,8,["modelValue","placeholder"]),[[pe,k.value]])]),l(P),ne(l(z,{class:"px-2.5 py-2 font-medium",text:$.$t("core::filters.available")},null,8,["text"]),[[pe,k.value&&!y.value]]),ne(l(H,{class:"block px-3 py-2 text-center",text:$.$t("core::filters.not_available")},null,8,["text"]),[[pe,!k.value||y.value]]),ne(_("div",Uee,[(g(!0),D(fe,null,Ie(x.value,G=>(g(),A(Mee,{key:G.id,identifier:e.identifier,view:e.view,"filter-id":G.id,"can-delete":G.authorizations.delete&&!G.is_readonly&&!G.is_shared_from_another_user,name:G.name,onClick:T,onDeleteRequested:W=>E(G.id)},null,8,["identifier","view","filter-id","can-delete","name","onDeleteRequested"]))),128))],512),[[pe,k.value&&!y.value]])]),_:2},1024)]),_:1},8,["placement"]),ne(l(L,{icon:"Pencil",basic:"",onClick:h(m)},null,8,["onClick"]),[[pe,b.value],[U,$.$t("core::filters.edit_filter")]]),ne(l(L,{icon:"Filter",basic:"",onClick:h(m)},null,8,["onClick"]),[[pe,w.value],[U,$.$t("core::filters.add_filter")]])])}}});var jee=di,zee=ny,Hee=Wl;function Wee(e,t,n){for(var o=-1,a=t.length,r={};++o<a;){var s=t[o],i=jee(e,s);n(i,s)&&zee(r,Hee(s,e),i)}return r}var bx=Wee,Gee=Hl,Kee=ra,Zee=bx,Yee=Hp;function Xee(e,t){if(e==null)return{};var n=Gee(Yee(e),function(o){return[o]});return t=Kee(t),Zee(e,n,function(o,a){return t(o,a[0])})}var Qee=Xee;const yx=Bt(Qee),Jee=["textContent"],ete={key:1,class:"shrink-0 snap-end rounded-lg border border-neutral-300 px-3 py-[0.22rem] text-base text-neutral-500 dark:border-neutral-500/30 dark:text-neutral-300 sm:text-sm"},tte={key:0},nte={key:0},ote=["textContent"],ate=["textContent"],rte={key:1},lte={key:2,class:"flex shrink-0 space-x-1"},ste=Object.assign({name:"RuleDisplay"},{__name:"RuleDisplay",props:{rule:{type:Object,required:!0},identifier:{type:String,required:!0},view:{type:String,required:!0},index:{type:Number,required:!0},condition:String},setup(e){const t=e,{formatMoney:n,formatNumber:o}=ro(),{availableRules:a}=la(t.identifier,t.view),{labels:r}=vx(),s=M(""),{localizedDate:i}=rt(),u=O(()=>t.rule.type==="group"),c=O(()=>{const $=b("displayAs"),F=R=>R.replace(":value:",s.value).replace(":operator:",r.operatorLabels[m.value.operator]);return typeof $=="string"?F($):$[0]&&Object.keys($).indexOf(m.value.value)===-1?F($[0]):F($[m.value.value])}),m=O(()=>t.rule.query),f=O(()=>{const $=ut(a.value,["id",m.value.rule]);return m.value.operand?ut($.operands,F=>F.rule.id==m.value.operand):$}),v=O(()=>Yp(m.value.operator)),y=O(()=>u.value?!1:!!b("displayAs"));$e(()=>t.condition,()=>{u.value||(s.value=w())}),$e(m,()=>{u.value||m.value.type&&ze(()=>s.value=w())},{immediate:!0,deep:!0});function b($){return m.value.operand?f.value.rule[$]:f.value[$]}function w(){let $=b("type");return["multi-select","checkbox"].indexOf($)>-1?x():["radio","select"].indexOf($)>-1?k():$==="date"?E():$==="numeric"?T():$==="number"?S():v.value?I():m.value.value}function k(){let $=b("options").filter(F=>F[b("valueKey")]==m.value.value)[0]||null;return $?$[b("labelKey")]:""}function x(){let $=m.value.value?b("options").filter(F=>m.value.value.indexOf(F[b("valueKey")])>-1):[];return Tn($,b("labelKey")).join(", ")}function I(){return m.value.value?m.value.value.join(" - "):""}function C($){return v.value?Gt(m.value.value)?"":[m.value.value[0]?$(m.value.value[0]):"",m.value.value[1]?$(m.value.value[1]):""].join(" - "):m.value.value?$(m.value.value):""}function S(){return C(o)}function T(){return C(n)}function E(){if(m.value.operator==="is"||m.value.operator==="was"){let $=[];return m.value.operand?$=f.value.rule.operatorsOptions[m.value.operator]:$=f.value.operatorsOptions[m.value.operator],yx($,(F,R)=>R==m.value.value)[m.value.value]}return C(i)}return($,F)=>{var B;const R=d("RuleDisplay",!0);return g(),D(fe,null,[e.index>0?(g(),D("span",{key:0,class:"rounded-lg border border-neutral-300 px-3 py-[0.22rem] text-base text-neutral-600 dark:border-neutral-500/30 dark:text-neutral-300 sm:text-sm",textContent:Z($.$t("core::filters.conditions."+e.condition))},null,8,Jee)):K("",!0),e.rule.type==="rule"&&e.rule.query.rule?(g(),D("div",ete,[y.value?(g(),D("span",rte,Z(c.value),1)):(g(),D("span",tte,[m.value.operand?(g(),D("span",nte,Z((B=h(a).find(V=>m.value.rule===V.id))==null?void 0:B.label),1)):K("",!0),le(" "+Z(f.value.label)+" ",1),_("span",{class:"text-info-500 dark:text-info-400",textContent:Z(h(r).operatorLabels[m.value.operator])},null,8,ote),le("  "),_("span",{class:"font-medium",textContent:Z(s.value)},null,8,ate)]))])):K("",!0),u.value?(g(),D("div",lte,[(g(!0),D(fe,null,Ie(m.value.children,(V,P)=>(g(),A(R,{key:V.query.rule,index:P,condition:m.value.condition,identifier:e.identifier,view:e.view,rule:V},null,8,["index","condition","identifier","view","rule"]))),128))])):K("",!0)],64)}}}),ite={class:"flex snap-x space-x-1 overflow-x-auto text-[0.96rem] scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-300 dark:scrollbar-thumb-neutral-600"},ute={__name:"RulesDisplay",props:{view:{required:!0,type:String},identifier:{required:!0,type:String}},setup(e){const t=e,{queryBuilderRules:n}=la(t.identifier,t.view),o=O(()=>{var a;return(((a=n.value)==null?void 0:a.children)||[]).filter(r=>r.type==="group"?!0:!!r.query.type)});return(a,r)=>(g(),D("div",ite,[(g(!0),D(fe,null,Ie(o.value,(s,i)=>(g(),A(ste,{key:s.query.rule,index:i,condition:h(n).condition,identifier:e.identifier,view:e.view,rule:s},null,8,["index","condition","identifier","view","rule"]))),128))]))}},cte={order:[{attribute:"id",direction:"desc"}]};class dte extends SI{constructor(t={}){super(Object.assign({},cte,t))}append(t,n=!1){return(!this.first(t)||n)&&this.state.data.push(t),this.state.total++,this}prepend(t,n=!1){return(!this.first(t)||n)&&this.state.data.unshift(t),this.state.total++,this}has(t){return this.state.data.indexOf(t)>=0}find(t,n="id"){return this.state.data.filter(o=>t[n]===o[n])}first(t,n="id"){return t?this.find(t,n)[0]:this.items[0]?this.items[0]:null}update(t,n="id"){const o=this.find(t,n);return o&&o.forEach(a=>this.replace(a,Object.assign({},a,t))),this}remove(t,n="id"){const o=this.find(t,n);return o&&o.forEach(a=>{this.state.data.splice(this.state.data.indexOf(a),1),this.state.total--}),this}replace(t,n){return this.state.data.splice(this.state.data.indexOf(t),1,n),this}sortAsc(t){this.set("order",[{attribute:t,direction:"asc"}])}sortDesc(t){this.set("order",[{attribute:t,direction:"desc"}])}toggleSortable(t){if(!this.isOrderedBy(t)){this.sortDesc(t);return}this.isSorted("desc",t)?this.sortAsc(t):this.sortDesc(t)}isOrderedBy(t){return!!this.get("order").filter(o=>o.attribute==t).length}isSorted(t,n){return!!this.get("order").filter(o=>o.attribute===n&&o.direction==t).length}get(t){return this.state[t]}set(t,n){return this.state[t]=n,this}}function _x(e){let t=e.data,n=e.headers;t instanceof Blob?Ys(t,n["content-disposition"].split("filename=")[1]||"unknown"):t.error?Innoclapps.error(t.error):t.success?Innoclapps.success(t.success):t.info?Innoclapps.info(t.info):t.confetti&&mp()}function Ix(e,t,n){const o=Pt(null),a=M(!1);let r=null;on(()=>{r=pt(t.resourceName)});function s(){return`${r}/actions/${o.value.uriKey}/run`}function i(){if(o.value){if(!o.value.withoutConfirmation)return c();a.value=!0,Innoclapps.request({method:"post",data:{ids:e.value,...pt(t.requestParams)},responseType:o.value.responseType,url:s()}).then(u).finally(()=>a.value=!1)}}function u(m){let f=m.data;if(f.openInNewTab)window.open(f.openInNewTab,"_blank");else{_x(m);let v=Object.assign({},o.value,{ids:e.value,response:f,resourceName:r});At("action-executed",v),n(v)}o.value=null}function c(){Innoclapps.confirm({component:o.value.component,title:o.value.name,message:o.value.message,size:o.value.size,ids:e.value,endpoint:s(),action:o.value,queryString:pt(t.requestParams),resourceName:r,fields:o.value.fields||[]}).then(m=>u(m.response)).catch(()=>o.value=null)}return{run:i,action:o,actionIsRunning:a,ids:e}}const mte={__name:"ActionSelectorDropdown",props:{resourceName:{type:String,required:!0},ids:{type:[Number,String,Array],required:!0},actionRequestParams:{type:Object,default:()=>({})},actions:{type:Array,default:()=>[]}},emits:["run"],setup(e,{emit:t}){const n=e,o=t,a=O(()=>qn(n.ids)),{run:r,action:s}=Ix(a,{resourceName:gt(n,"resourceName"),requestParams:gt(n,"actionRequestParams")},i=>o("run",i));return(i,u)=>{const c=d("IDropdownButton"),m=d("IDropdownItem"),f=d("IDropdownMenu"),v=d("IDropdown");return g(),A(v,{placement:"bottom-end"},{default:p(()=>[l(c,{text:i.$t("core::actions.actions"),basic:""},null,8,["text"]),l(f,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.actions,y=>(g(),A(m,{key:y.uriKey,text:y.name,onClick:b=>(s.value=y,h(r)(y))},null,8,["text","onClick"]))),128))]),_:1})]),_:1})}}},fte={__name:"ActionSelectorSelect",props:{resourceName:{type:String,required:!0},ids:{type:[Number,String,Array],required:!0},actionRequestParams:{type:Object,default:()=>({})},actions:{type:Array,default:()=>[]},runWhenSelected:{type:Boolean,default:!0}},emits:["run","selected"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=O(()=>qn(o.ids)),{run:s,action:i,actionIsRunning:u}=Ix(r,{resourceName:gt(o,"resourceName"),requestParams:gt(o,"actionRequestParams")},c=>a("run",c));return t({run:s}),(c,m)=>{const f=d("ICustomSelect");return g(),A(f,{modelValue:h(i),"onUpdate:modelValue":m[0]||(m[0]=v=>$n(i)?i.value=v:null),label:"name",clearable:!1,loading:h(u),options:e.actions,placeholder:c.$t("core::actions.select"),onOptionSelected:m[1]||(m[1]=v=>e.runWhenSelected?h(s)():c.$emit("selected",v))},null,8,["modelValue","loading","options","placeholder"])}}},fs={__name:"ActionSelector",props:{actions:{type:Array,default:()=>[]},type:{required:!0,type:String},view:{default:"detail",validator:function(e){return["index","detail"].indexOf(e)!==-1}}},emits:["run"],setup(e,{emit:t}){const n=e,o=t,a=O(()=>n.actions.filter(i=>!(n.view==="detail"&&i.hideOnDetail===!0)&&!(n.view==="index"&&i.hideOnIndex===!0))),r=O(()=>a.value.length>0);function s(i){o("run",i)}return(i,u)=>r.value?(g(),A(Rt(e.type==="select"?fte:mte),{key:0,actions:a.value,onRun:s},null,40,["actions"])):K("",!0)}},pte={class:"flex flex-col md:flex-row md:items-center"},vte={class:"mr-8 flex shrink-0 items-center"},hte={class:"md:w-68 mt-3 w-full md:mt-0"},gte={__name:"ResourceTableActions",props:["ids","actions","requestParams","resourceName","tableId","totalResults"],emits:["run","unselect"],setup(e){return(t,n)=>{const o=d("IFormCheckbox"),a=d("IFormCheckboxLabel"),r=d("IFormCheckboxField");return g(),D("div",{class:be(["fixed left-auto right-1 z-50 w-full max-w-xs rounded-lg border border-neutral-500/30 bg-neutral-800 px-6 py-5 dark:bg-neutral-900 md:left-80 md:right-auto md:max-w-md",e.totalResults<=5?"bottom-36":"bottom-[3.3rem]"])},[_("div",pte,[_("div",vte,[l(r,null,{default:p(()=>[l(o,{checked:e.ids.length>0,onChange:n[0]||(n[0]=s=>t.$emit("unselect"))},null,8,["checked"]),l(a,{class:"text-white"},{default:p(()=>[le(Z(t.$t("core::actions.records_count",{count:e.ids.length})),1)]),_:1})]),_:1})]),_("div",hte,[l(fs,{type:"select",view:"index",ids:e.ids,"action-request-params":e.requestParams,actions:e.actions||[],"resource-name":e.resourceName,onRun:n[1]||(n[1]=s=>t.$emit("run",s))},null,8,["ids","action-request-params","actions","resource-name"])])])],2)}}};var bte=fr,yte=Fn,_te=oa,Ite="[object String]";function wte(e){return typeof e=="string"||!yte(e)&&_te(e)&&bte(e)==Ite}var xte=wte;const wx=Bt(xte),pd=Object.assign({inheritAttrs:!1},{__name:"ILink",props:{text:[String,Number],href:String,to:[String,Object],activeClass:String,exactActiveClass:String,inactiveClass:String},emits:["click"],setup(e){const t=e,n=O(()=>t.href&&typeof t.href=="string"&&t.href.startsWith("http")),o=O(()=>!!t.to);function a(r){return t.href&&t.href!==r?t.href:r}return(r,s)=>{const i=d("Icon"),u=d("RouterLink");return n.value?(g(),A(Il,Ue({key:0,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center",href:e.href},r.$attrs,{onClick:s[0]||(s[0]=c=>r.$emit("click",c))}),{default:p(()=>[Se(r.$slots,"default",{},()=>[le(Z(e.text),1)]),Object.hasOwn(r.$attrs,"download")?K("",!0):(g(),A(i,{key:0,icon:"ExternalLink",class:"ml-2 size-5 shrink-0 sm:size-4"}))]),_:3},16,["href"])):o.value?(g(),A(u,Ue({key:1},r.$props,{custom:""}),{default:p(({isActive:c,href:m,navigate:f})=>[l(Il,Ue(r.$attrs,{href:a(m),class:c?e.activeClass:e.inactiveClass,onClick:v=>(f(v),r.$emit("click",v))}),{default:p(()=>[Se(r.$slots,"default",{},()=>[le(Z(e.text),1)])]),_:2},1040,["href","class","onClick"])]),_:3},16)):(g(),A(Il,Ue({key:2},r.$attrs,{href:e.href||"#",onClick:s[1]||(s[1]=ot(c=>r.$emit("click",c),["prevent"]))}),{default:p(()=>[Se(r.$slots,"default",{},()=>[le(Z(e.text),1)])]),_:3},16,["href"]))}}}),kte={},$te={class:"absolute top-0 h-full w-px bg-neutral-200 dark:bg-neutral-800"};function Cte(e,t){return g(),D("div",$te)}const vv=fn(kte,[["render",Cte]]),xx={__name:"ActionColumnSeparator",setup(e){return(t,n)=>(g(),A(vv,{class:"-left-px"}))}},kx={__name:"CheckboxSeparator",props:{condensed:{type:Boolean,required:!0}},setup(e){return(t,n)=>(g(),A(vv,{class:be(e.condensed?"left-8":"left-12")},null,8,["class"]))}},$x={__name:"PrimaryColumnSeparator",setup(e){return(t,n)=>(g(),A(vv,{class:"right-0 shadow-[1px_0px_10px] shadow-neutral-600/30 dark:shadow-neutral-600/30"}))}},Ste={__name:"ResourceTableCell",props:{row:{type:Object,required:!0},attribute:{type:String,required:!0},hasRequiredField:{type:Boolean,required:!0},isPrimary:{type:Boolean,required:!0},wrap:{type:Boolean,required:!0},newlineable:{required:!0,type:Boolean},customizeable:{required:!0,type:Boolean},link:{required:!0},route:{required:!0},align:{type:String,default:"left"},condensed:Boolean,isSortable:Boolean,isSelected:Boolean,isSelectable:Boolean},emits:["selected"],setup(e){const t=e,n=O(()=>t.attribute==="actions"),o=O(()=>!Gt(t.row[t.attribute])),a=O(()=>t.hasRequiredField&&!o.value),r=O(()=>{const{route:u,link:c}=t;if(!u&&!c)return{};if(u){let m=structuredClone(Vn(u));return $l(m)?(s(m.params||{}),s(m.query||{})):m=i(m),{to:m}}return{href:i(c)}});function s(u){Aa(u,(c,m)=>{u[m]=wx(c)?i(c):c})}function i(u){return Object.keys(t.row).forEach(c=>{u=u.replace("{"+c+"}",Ma(t.row,c))}),u}return(u,c)=>{const m=d("IFormCheckbox"),f=d("ITableCell");return g(),A(f,{class:be(["group/td relative first:font-medium",e.isPrimary||n.value?"z-20":"z-10",a.value?"bg-danger-100 text-danger-800 ring-1 ring-inset ring-danger-200 ring-offset-4 group-hover/tr:ring-offset-neutral-50 group-aria-selected/tr:ring-offset-neutral-50 hover:bg-danger-200 dark:bg-danger-600/40 dark:ring-danger-600/70 dark:ring-offset-neutral-900 group-hover/tr:dark:ring-offset-neutral-800 group-aria-selected/tr:dark:ring-offset-neutral-800":"bg-white group-hover/tr:bg-neutral-50 group-aria-selected/tr:bg-neutral-50 dark:bg-neutral-900 group-hover/tr:dark:bg-neutral-900 group-hover/tr:dark:before:absolute group-hover/tr:dark:before:inset-0 group-hover/tr:dark:before:-z-10 group-hover/tr:dark:before:bg-neutral-500/10 group-aria-selected/tr:dark:bg-neutral-900 group-aria-selected/tr:dark:before:absolute group-aria-selected/tr:dark:before:inset-0 group-aria-selected/tr:dark:before:-z-10 group-aria-selected/tr:dark:before:bg-neutral-500/10",{"lg:sticky lg:left-0":e.isPrimary,"lg:sticky lg:right-0":n.value,"whitespace-normal break-all":e.wrap,"whitespace-nowrap":!e.wrap,"text-left":e.align==="left","text-center":e.align==="center","text-right":e.align==="right"}])},{default:p(()=>[_("div",{class:be([e.isSelectable&&"flex items-center",e.newlineable&&"whitespace-pre-line"])},[c[0]||(je(-1),c[0]=n.value?(g(),A(xx,{key:0})):e.isPrimary?(g(),A($x,{key:1})):K("",!0),je(1),c[0]),e.isSelectable?(g(),A(kx,{key:2,condensed:e.condensed},null,8,["condensed"])):K("",!0),e.isSelectable?(g(),A(m,{key:3,class:be([e.condensed?"-ml-2":"","mr-2"]),checked:e.isSelected,onClick:v=>u.$emit("selected",e.row)},null,8,["class","checked","onClick"])):K("",!0),_("div",{class:be(["overflow-hidden",e.isSelectable?e.condensed?"ml-4":"ml-6":""])},[(g(),A(Rt(e.link||e.route?pd:"div"),en(un(r.value)),{default:p(()=>[Se(u.$slots,"default")]),_:3},16))],2)],2)]),_:3},8,["class"])}}},Tte={key:0,class:"mb-4 mt-10"},Ete={class:"flex items-center space-x-1.5"},Fte={class:"grow"},Ate={key:0,value:""},Rte=["value","textContent"],Dte={class:"flex-auto"},Ote={value:"asc"},Bte={value:"desc"},Nte={class:"my-4 max-h-[400px] overflow-auto"},Pte={class:"grow"},Mte=["value"],Vte={class:"relative mt-1 rounded-md shadow-sm"},Lte=_("datalist",{id:"maxHeight"},[_("option",{value:"200"}),_("option",{value:"250"}),_("option",{value:"300"}),_("option",{value:"350"}),_("option",{value:"400"}),_("option",{value:"500"})],-1),qte=_("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[_("span",{class:"-mt-1 text-neutral-400"},"px")],-1),Ute={class:"mt-5"},jte={class:"flex items-center justify-between text-right"},zte={class:"space-x-2"},Hte=25,Wte={__name:"ResourceTableCustomize",props:{tableId:{required:!0,type:String},urlPath:{required:!0,type:String}},setup(e,{expose:t}){const n=e,{settings:o,tableBeingCustomized:a,reloadTable:r,customizeTable:s}=eo(n.tableId),i=M([]),u=M([]),c=M(null),m=M(null),f=M(!1),v=M(!1),y=M(null),b=o.value.minimumPollingInterval,w=M(null),k=M(!1),{form:x}=Ze(),I=O(()=>Vo(o.value.columns,"customizeable")),C=O(()=>Vo(I.value,"sortable")),S=O(()=>i.value.length===C.value.length?!0:i.value.some(U=>U.attribute===""));function T(U){const{index:ee,futureIndex:G}=U.draggedContext,W=ae=>u.value[ae].primary;if(W(ee)||G===0&&W(G))return!1}function E(U){return!!ut(i.value,["attribute",U])}function $(){i.value.push({attribute:"",direction:"asc"})}function F(U){i.value.splice(U,1)}function R(){a.value&&s(!1),c.value=null,V()}function B(){N(),V()}function V(){u.value=Vo(I.value,U=>!c.value||U.label.toLowerCase().includes(c.value.toLowerCase())),u.value.forEach(U=>{U.visible=!U.hidden})}function P(U){return U.map((ee,G)=>({attribute:ee.attribute,order:G+1,width:ee.width,wrap:ee.wrap,hidden:!ee.visible}))}function z(){j(x.clear()).then(L)}function H(U,ee=!0){const G=()=>{const ae=Vt(I.value,ue=>Et(u.value,["attribute",ue.attribute]));return P(U||ae)},W=x.clear().set({order:i.value.filter(ae=>ae.attribute!==""),columns:G(),pollingInterval:w.value,maxHeight:m.value,condensed:f.value,bordered:v.value,perPage:y.value});return j(W,ee)}async function j(U,ee=!0){const G=await U.post(`${n.urlPath}/settings`);o.value=G,c.value="",ze(B),ee&&ze(()=>r()),s(!1)}function N(){w.value=o.value.pollingInterval,k.value=parseInt(o.value.pollingInterval)>=10,m.value=o.value.maxHeight,f.value=o.value.condensed,v.value=o.value.bordered,y.value=o.value.perPage}function L(){B(),i.value=structuredClone(Vn(o.value.order))}return L(),t({save:H,onColumnMove:T}),(U,ee)=>{const G=d("ITextDark"),W=d("IFormSelect"),ae=d("IButton"),ue=d("Icon"),ce=d("SortableDraggable"),oe=d("IFormLabel"),ie=d("SearchInput"),Q=d("IFormCheckbox"),se=d("IFormCheckboxLabel"),me=d("IFormCheckboxField"),xe=d("IFormGroup"),de=d("IFormInput"),he=d("IModal"),Y=Ve("t"),X=Ve("i-tooltip");return g(),A(he,{id:e.tableId+"listSettings",size:"sm",visible:h(a),description:U.$t("core::table.customize_list_view"),title:U.$t("core::table.list_settings"),onHidden:R},{"modal-footer":p(()=>[_("div",jte,[l(ae,{disabled:h(x).busy,text:U.$t("core::app.reset"),"confirm-text":U.$t("core::app.confirm"),basic:"",confirmable:"",onConfirmed:z},null,8,["disabled","text","confirm-text"]),_("div",zte,[l(ae,{disabled:h(x).busy,text:U.$t("core::app.cancel"),basic:"",onClick:ee[11]||(ee[11]=re=>h(s)(!1))},null,8,["disabled","text"]),l(ae,{variant:"primary",disabled:h(x).busy,text:U.$t("core::app.save"),onClick:ee[12]||(ee[12]=re=>H())},null,8,["disabled","text"])])])]),default:p(()=>[h(o).allowDefaultSortChange?(g(),D("div",Tte,[l(G,{class:"mb-1 font-medium",text:U.$t("core::table.default_sort")},null,8,["text"]),l(ce,Ue({modelValue:i.value,"onUpdate:modelValue":ee[0]||(ee[0]=re=>i.value=re),class:"space-y-2",handle:".sort-draggable-handle","item-key":re=>re.attribute+"-"+re.direction},U.$draggable.common),{item:p(({index:re})=>[_("div",Ete,[_("div",Fte,[l(W,{id:"column_"+re,modelValue:i.value[re].attribute,"onUpdate:modelValue":we=>i.value[re].attribute=we},{default:p(()=>[i.value[re].attribute?K("",!0):(g(),D("option",Ate)),(g(!0),D(fe,null,Ie(C.value,we=>ne((g(),D("option",{key:we.attribute,value:we.attribute,textContent:Z(we.label)},null,8,Rte)),[[pe,!E(we.attribute)]])),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue"])]),_("div",Dte,[l(W,{id:"column_type_"+re,modelValue:i.value[re].direction,"onUpdate:modelValue":we=>i.value[re].direction=we},{default:p(()=>[_("option",Ote,[le(" Asc ("),ne(_("span",null,null,512),[[Y,"core::app.ascending"]]),le(") ")]),_("option",Bte,[le(" Desc ("),ne(_("span",null,null,512),[[Y,"core::app.descending"]]),le(") ")])]),_:2},1032,["id","modelValue","onUpdate:modelValue"])]),l(ae,{variant:re===0?"secondary":"danger",disabled:re===0&&S.value,soft:re>0,icon:re===0?"PlusSolid":"MinusSolid",onClick:we=>re===0?$():F(re)},null,8,["variant","disabled","soft","icon","onClick"]),l(ue,{class:"sort-draggable-handle size-5 cursor-move text-neutral-500",icon:"Selector"})])]),_:1},16,["modelValue","item-key"])])):K("",!0),l(oe,{class:"mb-1.5 font-medium",for:"search-table-columns",label:U.$t("core::table.columns")},null,8,["label"]),l(ie,{id:"search-table-columns",modelValue:c.value,"onUpdate:modelValue":[ee[1]||(ee[1]=re=>c.value=re),V]},null,8,["modelValue"]),_("div",Nte,[l(ce,Ue({modelValue:u.value,"onUpdate:modelValue":ee[2]||(ee[2]=re=>u.value=re),"item-key":"attribute",move:T},{...U.$draggable.scrollable,filter:"label"}),{item:p(({element:re,index:we})=>[ne((g(),D("div",{class:be(["mb-1.5 mr-2 flex items-center rounded-md border border-neutral-200 px-3 py-2 dark:border-neutral-500/30",re.primary?"bg-neutral-50 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-800"])},[_("div",Pte,[l(me,null,{default:p(()=>[l(Q,{checked:u.value[we].visible,"onUpdate:checked":Ce=>u.value[we].visible=Ce,disabled:re.primary===!0},null,8,["checked","onUpdate:checked","disabled"]),l(se,{class:"inline-flex items-center space-x-1"},{default:p(()=>[re.helpText?ne((g(),A(ue,{key:0,icon:"QuestionMarkCircle",class:"size-4 text-neutral-600"},null,512)),[[X,re.helpText]]):K("",!0),_("span",null,Z(re.label),1)]),_:2},1024)]),_:2},1024)]),re.primary?K("",!0):(g(),A(ue,{key:0,class:"size-5 cursor-move text-neutral-500",icon:"Selector"}))],2)),[[X,re.primary?U.$t("core::table.primary_column"):""]])]),_:1},16,["modelValue"])]),l(xe,{"label-for":"tableSettingsPerPage",label:U.$t("core::table.per_page")},{default:p(()=>[l(W,{id:"tableSettingsPerPage",modelValue:y.value,"onUpdate:modelValue":ee[3]||(ee[3]=re=>y.value=re)},{default:p(()=>[(g(),D(fe,null,Ie([25,50,100],re=>_("option",{key:re,value:re},Z(re),9,Mte)),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(xe,{"label-for":"tableSettingsMaxHeight",label:U.$t("core::table.max_height"),description:U.$t("core::table.max_height_info")},{default:p(()=>[_("div",Vte,[l(de,{id:"tableSettingsMaxHeight",modelValue:m.value,"onUpdate:modelValue":ee[4]||(ee[4]=re=>m.value=re),type:"number",min:"200",step:"50",class:"pr-8 sm:pr-10 [&::-webkit-calendar-picker-indicator]:opacity-0",list:"maxHeight"},null,8,["modelValue"]),Lte,qte])]),_:1},8,["label","description"]),_("div",Ute,[l(me,null,{default:p(()=>[l(Q,{checked:v.value,"onUpdate:checked":ee[5]||(ee[5]=re=>v.value=re)},null,8,["checked"]),l(se,{text:U.$t("core::table.bordered")},null,8,["text"])]),_:1}),l(me,null,{default:p(()=>[l(Q,{checked:f.value,"onUpdate:checked":ee[6]||(ee[6]=re=>f.value=re)},null,8,["checked"]),l(se,{text:U.$t("core::table.condensed")},null,8,["text"])]),_:1}),l(xe,{description:k.value?U.$t("core::table.polling_info"):null},{default:p(()=>[l(me,null,{default:p(()=>[l(Q,{checked:k.value,"onUpdate:checked":ee[7]||(ee[7]=re=>k.value=re),onChange:ee[8]||(ee[8]=re=>w.value=re?Hte:null)},null,8,["checked"]),l(se,{text:U.$t("core::table.enable_polling")},null,8,["text"])]),_:1}),ne(l(de,{modelValue:w.value,"onUpdate:modelValue":ee[9]||(ee[9]=re=>w.value=re),type:"number",min:"10",class:"mt-2",onBlur:ee[10]||(ee[10]=re=>w.value<h(b)?w.value=h(b):void 0)},null,8,["modelValue"]),[[pe,k.value]])]),_:1},8,["description"])])]),_:1},8,["id","visible","description","title"])}}},Gte={__name:"ResourceTableHead",props:{columns:{type:Array,required:!0},isLoaded:{type:Boolean,required:!0},disabled:{type:Boolean,default:!0}},emits:["resized"],setup(e,{emit:t}){const n=e,o=t,a=jp(),r=O(()=>n.columns.length),s=O(()=>n.columns.map(N=>N.width).join("|"));let i,u=0,c,m,f,v,y;function b(){return Array.prototype.slice.call(a.value.querySelectorAll("thead>tr>th"))}function w(){return a.value.querySelectorAll(".resizer")}function k(){if(!a.value)return;let N=0,L=b();a.value.style.width=null,a.value.style.minWidth=null;for(let U=0;U<L.length;U++)L[U].style.width=n.columns[U].width;if(!n.disabled){for(let U=0;U<L.length;U++){let ee=B(U),G=H(V(L[U],"width"));G===0&&(G=z(L[U])),ee&&G<ee&&(G=ee),x(L[U])||(L[U].style.width=G+"px"),N+=G}a.value.style.width=N+"px",a.value.style.minWidth="100%"}}function x(N){return N.classList.contains("table-actions-column")}function I(){let N=document.createElement("div");return N.classList.add("resizer","absolute","w-[0.2rem]","h-full","top-0","right-0","cursor-col-resize","select-none","group-hover/th:bg-neutral-400","dark:group-hover/th:bg-neutral-600"),N}function C(){if(n.disabled)return;let N=b();if(!N.length)return;k();let L=N.length;for(let U=0;U<L;U++){if(!n.columns[U].customizeable)continue;let ee=I();N[U].appendChild(ee),ee.addEventListener("mousedown",T)}document.addEventListener("mousemove",$,{passive:!0}),document.addEventListener("mouseup",F,{passive:!0})}function S(){document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",F),a.value&&w().forEach(N=>{N.removeEventListener("mousedown",T),N.remove()})}function T(N){c=N.target.parentElement,m=b().indexOf(c),f=c.nextElementSibling,c.querySelector(".resizer").classList.add("resizing"),f&&x(f)&&(f=null),i=N.pageX,v=c.offsetWidth,f&&(y=f.offsetWidth)}function E(N){const L=N.getBoundingClientRect().width,U=N.parentElement.getBoundingClientRect().width;return L>U}function $(N){if(!c)return;let L=N.pageX-i,U="";N.pageX<u?U="left":N.pageX>u&&(U="right"),u=N.pageX;let ee,G=B(m),W=!1,ae=v+L;if(!G||ae>=G?ee=ae:(ee=G,W=!0),!W&&f){let ue=y-L,ce=B(m+1);(!ce||ue>=ce)&&(f.style.width=ue+"px")}else U==="left"&&!f&&E(a.value)&&(a.value.style.width=H(a.value.style.width)+L+"px");c.style.width=ee+"px"}function F(N){c&&(c.querySelector(".resizer").classList.remove("resizing"),R()),c=void 0,f=void 0,i=void 0,u=void 0,y=void 0,v=void 0,m=void 0}function R(){o("resized",n.columns.map((N,L)=>({...N,width:P(L)})))}function B(N){return n.columns[N].minWidth?H(n.columns[N].minWidth):null}function V(N,L){return window.getComputedStyle(N,null).getPropertyValue(L)}function P(N){return V(b()[N],"width")}function z(N){const L={display:N.style.display,position:N.style.position,visibility:N.style.visibility,left:N.style.left};N.style.display="block",N.style.position="absolute",N.style.visibility="hidden",N.style.left="-9999px";const U=N.offsetWidth;return N.style.display=L.display,N.style.position=L.position,N.style.visibility=L.visibility,N.style.left=L.left,U}function H(N){return Number(N.replace("px","")).valueOf()}async function j(){await ze(),S(),C()}return $e(s,()=>{k()},{flush:"post"}),$e(()=>n.isLoaded,N=>{N&&j()},{flush:"post",immediate:!0}),$e(r,N=>{N>0&&j()},{flush:"post"}),En(S),Je(()=>n.disabled&&k()),(N,L)=>{const U=d("ITableHead");return g(),A(U,null,{default:p(()=>[Se(N.$slots,"default")]),_:3})}}},Cx=["top","right","bottom","left"],Lb=["start","end"],qb=Cx.reduce((e,t)=>e.concat(t,t+"-"+Lb[0],t+"-"+Lb[1]),[]),Pl=Math.min,qr=Math.max,oc=Math.round,Iu=Math.floor,mr=e=>({x:e,y:e}),Kte={left:"right",right:"left",bottom:"top",top:"bottom"},Zte={start:"end",end:"start"};function Mf(e,t,n){return qr(e,Pl(t,n))}function Qr(e,t){return typeof e=="function"?e(t):e}function Oa(e){return e.split("-")[0]}function pa(e){return e.split("-")[1]}function Sx(e){return e==="x"?"y":"x"}function hv(e){return e==="y"?"height":"width"}function vd(e){return["top","bottom"].includes(Oa(e))?"y":"x"}function gv(e){return Sx(vd(e))}function Tx(e,t,n){n===void 0&&(n=!1);const o=pa(e),a=gv(e),r=hv(a);let s=a==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=rc(s)),[s,rc(s)]}function Yte(e){const t=rc(e);return[ac(e),t,ac(t)]}function ac(e){return e.replace(/start|end/g,t=>Zte[t])}function Xte(e,t,n){const o=["left","right"],a=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:o:t?o:a;case"left":case"right":return t?r:s;default:return[]}}function Qte(e,t,n,o){const a=pa(e);let r=Xte(Oa(e),n==="start",o);return a&&(r=r.map(s=>s+"-"+a),t&&(r=r.concat(r.map(ac)))),r}function rc(e){return e.replace(/left|right|bottom|top/g,t=>Kte[t])}function Jte(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ex(e){return typeof e!="number"?Jte(e):{top:e,right:e,bottom:e,left:e}}function lc(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Ub(e,t,n){let{reference:o,floating:a}=e;const r=vd(t),s=gv(t),i=hv(s),u=Oa(t),c=r==="y",m=o.x+o.width/2-a.width/2,f=o.y+o.height/2-a.height/2,v=o[i]/2-a[i]/2;let y;switch(u){case"top":y={x:m,y:o.y-a.height};break;case"bottom":y={x:m,y:o.y+o.height};break;case"right":y={x:o.x+o.width,y:f};break;case"left":y={x:o.x-a.width,y:f};break;default:y={x:o.x,y:o.y}}switch(pa(t)){case"start":y[s]-=v*(n&&c?-1:1);break;case"end":y[s]+=v*(n&&c?-1:1);break}return y}const ene=async(e,t,n)=>{const{placement:o="bottom",strategy:a="absolute",middleware:r=[],platform:s}=n,i=r.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:m,y:f}=Ub(c,o,u),v=o,y={},b=0;for(let w=0;w<i.length;w++){const{name:k,fn:x}=i[w],{x:I,y:C,data:S,reset:T}=await x({x:m,y:f,initialPlacement:o,placement:v,strategy:a,middlewareData:y,rects:c,platform:s,elements:{reference:e,floating:t}});m=I??m,f=C??f,y={...y,[k]:{...y[k],...S}},T&&b<=50&&(b++,typeof T=="object"&&(T.placement&&(v=T.placement),T.rects&&(c=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):T.rects),{x:m,y:f}=Ub(c,v,u)),w=-1)}return{x:m,y:f,placement:v,strategy:a,middlewareData:y}};async function oi(e,t){var n;t===void 0&&(t={});const{x:o,y:a,platform:r,rects:s,elements:i,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:v=!1,padding:y=0}=Qr(t,e),b=Ex(y),k=i[v?f==="floating"?"reference":"floating":f],x=lc(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(k)))==null||n?k:k.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(i.floating)),boundary:c,rootBoundary:m,strategy:u})),I=f==="floating"?{...s.floating,x:o,y:a}:s.reference,C=await(r.getOffsetParent==null?void 0:r.getOffsetParent(i.floating)),S=await(r.isElement==null?void 0:r.isElement(C))?await(r.getScale==null?void 0:r.getScale(C))||{x:1,y:1}:{x:1,y:1},T=lc(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:I,offsetParent:C,strategy:u}):I);return{top:(x.top-T.top+b.top)/S.y,bottom:(T.bottom-x.bottom+b.bottom)/S.y,left:(x.left-T.left+b.left)/S.x,right:(T.right-x.right+b.right)/S.x}}const tne=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:a,rects:r,platform:s,elements:i,middlewareData:u}=t,{element:c,padding:m=0}=Qr(e,t)||{};if(c==null)return{};const f=Ex(m),v={x:n,y:o},y=gv(a),b=hv(y),w=await s.getDimensions(c),k=y==="y",x=k?"top":"left",I=k?"bottom":"right",C=k?"clientHeight":"clientWidth",S=r.reference[b]+r.reference[y]-v[y]-r.floating[b],T=v[y]-r.reference[y],E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let $=E?E[C]:0;(!$||!await(s.isElement==null?void 0:s.isElement(E)))&&($=i.floating[C]||r.floating[b]);const F=S/2-T/2,R=$/2-w[b]/2-1,B=Pl(f[x],R),V=Pl(f[I],R),P=B,z=$-w[b]-V,H=$/2-w[b]/2+F,j=Mf(P,H,z),N=!u.arrow&&pa(a)!=null&&H!==j&&r.reference[b]/2-(H<P?B:V)-w[b]/2<0,L=N?H<P?H-P:H-z:0;return{[y]:v[y]+L,data:{[y]:j,centerOffset:H-j-L,...N&&{alignmentOffset:L}},reset:N}}});function nne(e,t,n){return(e?[...n.filter(a=>pa(a)===e),...n.filter(a=>pa(a)!==e)]:n.filter(a=>Oa(a)===a)).filter(a=>e?pa(a)===e||(t?ac(a)!==a:!1):!0)}const one=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,a;const{rects:r,middlewareData:s,placement:i,platform:u,elements:c}=t,{crossAxis:m=!1,alignment:f,allowedPlacements:v=qb,autoAlignment:y=!0,...b}=Qr(e,t),w=f!==void 0||v===qb?nne(f||null,y,v):v,k=await oi(t,b),x=((n=s.autoPlacement)==null?void 0:n.index)||0,I=w[x];if(I==null)return{};const C=Tx(I,r,await(u.isRTL==null?void 0:u.isRTL(c.floating)));if(i!==I)return{reset:{placement:w[0]}};const S=[k[Oa(I)],k[C[0]],k[C[1]]],T=[...((o=s.autoPlacement)==null?void 0:o.overflows)||[],{placement:I,overflows:S}],E=w[x+1];if(E)return{data:{index:x+1,overflows:T},reset:{placement:E}};const $=T.map(B=>{const V=pa(B.placement);return[B.placement,V&&m?B.overflows.slice(0,2).reduce((P,z)=>P+z,0):B.overflows[0],B.overflows]}).sort((B,V)=>B[1]-V[1]),R=((a=$.filter(B=>B[2].slice(0,pa(B[0])?2:3).every(V=>V<=0))[0])==null?void 0:a[0])||$[0][0];return R!==i?{data:{index:x+1,overflows:T},reset:{placement:R}}:{}}}},ane=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:a,middlewareData:r,rects:s,initialPlacement:i,platform:u,elements:c}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...k}=Qr(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const x=Oa(a),I=Oa(i)===i,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),S=v||(I||!w?[rc(i)]:Yte(i));!v&&b!=="none"&&S.push(...Qte(i,w,b,C));const T=[i,...S],E=await oi(t,k),$=[];let F=((o=r.flip)==null?void 0:o.overflows)||[];if(m&&$.push(E[x]),f){const P=Tx(a,s,C);$.push(E[P[0]],E[P[1]])}if(F=[...F,{placement:a,overflows:$}],!$.every(P=>P<=0)){var R,B;const P=(((R=r.flip)==null?void 0:R.index)||0)+1,z=T[P];if(z)return{data:{index:P,overflows:F},reset:{placement:z}};let H=(B=F.filter(j=>j.overflows[0]<=0).sort((j,N)=>j.overflows[1]-N.overflows[1])[0])==null?void 0:B.placement;if(!H)switch(y){case"bestFit":{var V;const j=(V=F.map(N=>[N.placement,N.overflows.filter(L=>L>0).reduce((L,U)=>L+U,0)]).sort((N,L)=>N[1]-L[1])[0])==null?void 0:V[0];j&&(H=j);break}case"initialPlacement":H=i;break}if(a!==H)return{reset:{placement:H}}}return{}}}};function jb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function zb(e){return Cx.some(t=>e[t]>=0)}const rne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...a}=Qr(e,t);switch(o){case"referenceHidden":{const r=await oi(t,{...a,elementContext:"reference"}),s=jb(r,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:zb(s)}}}case"escaped":{const r=await oi(t,{...a,altBoundary:!0}),s=jb(r,n.floating);return{data:{escapedOffsets:s,escaped:zb(s)}}}default:return{}}}}};async function lne(e,t){const{placement:n,platform:o,elements:a}=e,r=await(o.isRTL==null?void 0:o.isRTL(a.floating)),s=Oa(n),i=pa(n),u=vd(n)==="y",c=["left","top"].includes(s)?-1:1,m=r&&u?-1:1,f=Qr(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return i&&typeof b=="number"&&(y=i==="end"?b*-1:b),u?{x:y*m,y:v*c}:{x:v*c,y:y*m}}const bv=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:a,y:r,placement:s,middlewareData:i}=t,u=await lne(t,e);return s===((n=i.offset)==null?void 0:n.placement)&&(o=i.arrow)!=null&&o.alignmentOffset?{}:{x:a+u.x,y:r+u.y,data:{...u,placement:s}}}}},sne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:a}=t,{mainAxis:r=!0,crossAxis:s=!1,limiter:i={fn:k=>{let{x,y:I}=k;return{x,y:I}}},...u}=Qr(e,t),c={x:n,y:o},m=await oi(t,u),f=vd(Oa(a)),v=Sx(f);let y=c[v],b=c[f];if(r){const k=v==="y"?"top":"left",x=v==="y"?"bottom":"right",I=y+m[k],C=y-m[x];y=Mf(I,y,C)}if(s){const k=f==="y"?"top":"left",x=f==="y"?"bottom":"right",I=b+m[k],C=b-m[x];b=Mf(I,b,C)}const w=i.fn({...t,[v]:y,[f]:b});return{...w,data:{x:w.x-n,y:w.y-o}}}}};function Ba(e){return yv(e)?(e.nodeName||"").toLowerCase():"#document"}function ko(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ua(e){var t;return(t=(yv(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yv(e){return e instanceof Node||e instanceof ko(e).Node}function Na(e){return e instanceof Element||e instanceof ko(e).Element}function ha(e){return e instanceof HTMLElement||e instanceof ko(e).HTMLElement}function Hb(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ko(e).ShadowRoot}function Mi(e){const{overflow:t,overflowX:n,overflowY:o,display:a}=qo(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(a)}function ine(e){return["table","td","th"].includes(Ba(e))}function _v(e){const t=Iv(),n=qo(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function une(e){let t=Ml(e);for(;ha(t)&&!hd(t);){if(_v(t))return t;t=Ml(t)}return null}function Iv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function hd(e){return["html","body","#document"].includes(Ba(e))}function qo(e){return ko(e).getComputedStyle(e)}function gd(e){return Na(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ml(e){if(Ba(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Hb(e)&&e.host||Ua(e);return Hb(t)?t.host:t}function Fx(e){const t=Ml(e);return hd(t)?e.ownerDocument?e.ownerDocument.body:e.body:ha(t)&&Mi(t)?t:Fx(t)}function ai(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=Fx(e),r=a===((o=e.ownerDocument)==null?void 0:o.body),s=ko(a);return r?t.concat(s,s.visualViewport||[],Mi(a)?a:[],s.frameElement&&n?ai(s.frameElement):[]):t.concat(a,ai(a,[],n))}function Ax(e){const t=qo(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const a=ha(e),r=a?e.offsetWidth:n,s=a?e.offsetHeight:o,i=oc(n)!==r||oc(o)!==s;return i&&(n=r,o=s),{width:n,height:o,$:i}}function wv(e){return Na(e)?e:e.contextElement}function xl(e){const t=wv(e);if(!ha(t))return mr(1);const n=t.getBoundingClientRect(),{width:o,height:a,$:r}=Ax(t);let s=(r?oc(n.width):n.width)/o,i=(r?oc(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!i||!Number.isFinite(i))&&(i=1),{x:s,y:i}}const cne=mr(0);function Rx(e){const t=ko(e);return!Iv()||!t.visualViewport?cne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dne(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ko(e)?!1:t}function zr(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),r=wv(e);let s=mr(1);t&&(o?Na(o)&&(s=xl(o)):s=xl(e));const i=dne(r,n,o)?Rx(r):mr(0);let u=(a.left+i.x)/s.x,c=(a.top+i.y)/s.y,m=a.width/s.x,f=a.height/s.y;if(r){const v=ko(r),y=o&&Na(o)?ko(o):o;let b=v,w=b.frameElement;for(;w&&o&&y!==b;){const k=xl(w),x=w.getBoundingClientRect(),I=qo(w),C=x.left+(w.clientLeft+parseFloat(I.paddingLeft))*k.x,S=x.top+(w.clientTop+parseFloat(I.paddingTop))*k.y;u*=k.x,c*=k.y,m*=k.x,f*=k.y,u+=C,c+=S,b=ko(w),w=b.frameElement}}return lc({width:m,height:f,x:u,y:c})}const mne=[":popover-open",":modal"];function Dx(e){return mne.some(t=>{try{return e.matches(t)}catch{return!1}})}function fne(e){let{elements:t,rect:n,offsetParent:o,strategy:a}=e;const r=a==="fixed",s=Ua(o),i=t?Dx(t.floating):!1;if(o===s||i&&r)return n;let u={scrollLeft:0,scrollTop:0},c=mr(1);const m=mr(0),f=ha(o);if((f||!f&&!r)&&((Ba(o)!=="body"||Mi(s))&&(u=gd(o)),ha(o))){const v=zr(o);c=xl(o),m.x=v.x+o.clientLeft,m.y=v.y+o.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+m.x,y:n.y*c.y-u.scrollTop*c.y+m.y}}function pne(e){return Array.from(e.getClientRects())}function Ox(e){return zr(Ua(e)).left+gd(e).scrollLeft}function vne(e){const t=Ua(e),n=gd(e),o=e.ownerDocument.body,a=qr(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=qr(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+Ox(e);const i=-n.scrollTop;return qo(o).direction==="rtl"&&(s+=qr(t.clientWidth,o.clientWidth)-a),{width:a,height:r,x:s,y:i}}function hne(e,t){const n=ko(e),o=Ua(e),a=n.visualViewport;let r=o.clientWidth,s=o.clientHeight,i=0,u=0;if(a){r=a.width,s=a.height;const c=Iv();(!c||c&&t==="fixed")&&(i=a.offsetLeft,u=a.offsetTop)}return{width:r,height:s,x:i,y:u}}function gne(e,t){const n=zr(e,!0,t==="fixed"),o=n.top+e.clientTop,a=n.left+e.clientLeft,r=ha(e)?xl(e):mr(1),s=e.clientWidth*r.x,i=e.clientHeight*r.y,u=a*r.x,c=o*r.y;return{width:s,height:i,x:u,y:c}}function Wb(e,t,n){let o;if(t==="viewport")o=hne(e,n);else if(t==="document")o=vne(Ua(e));else if(Na(t))o=gne(t,n);else{const a=Rx(e);o={...t,x:t.x-a.x,y:t.y-a.y}}return lc(o)}function Bx(e,t){const n=Ml(e);return n===t||!Na(n)||hd(n)?!1:qo(n).position==="fixed"||Bx(n,t)}function bne(e,t){const n=t.get(e);if(n)return n;let o=ai(e,[],!1).filter(i=>Na(i)&&Ba(i)!=="body"),a=null;const r=qo(e).position==="fixed";let s=r?Ml(e):e;for(;Na(s)&&!hd(s);){const i=qo(s),u=_v(s);!u&&i.position==="fixed"&&(a=null),(r?!u&&!a:!u&&i.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Mi(s)&&!u&&Bx(e,s))?o=o.filter(m=>m!==s):a=i,s=Ml(s)}return t.set(e,o),o}function yne(e){let{element:t,boundary:n,rootBoundary:o,strategy:a}=e;const s=[...n==="clippingAncestors"?bne(t,this._c):[].concat(n),o],i=s[0],u=s.reduce((c,m)=>{const f=Wb(t,m,a);return c.top=qr(f.top,c.top),c.right=Pl(f.right,c.right),c.bottom=Pl(f.bottom,c.bottom),c.left=qr(f.left,c.left),c},Wb(t,i,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function _ne(e){const{width:t,height:n}=Ax(e);return{width:t,height:n}}function Ine(e,t,n){const o=ha(t),a=Ua(t),r=n==="fixed",s=zr(e,!0,r,t);let i={scrollLeft:0,scrollTop:0};const u=mr(0);if(o||!o&&!r)if((Ba(t)!=="body"||Mi(a))&&(i=gd(t)),o){const f=zr(t,!0,r,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else a&&(u.x=Ox(a));const c=s.left+i.scrollLeft-u.x,m=s.top+i.scrollTop-u.y;return{x:c,y:m,width:s.width,height:s.height}}function Gb(e,t){return!ha(e)||qo(e).position==="fixed"?null:t?t(e):e.offsetParent}function Nx(e,t){const n=ko(e);if(!ha(e)||Dx(e))return n;let o=Gb(e,t);for(;o&&ine(o)&&qo(o).position==="static";)o=Gb(o,t);return o&&(Ba(o)==="html"||Ba(o)==="body"&&qo(o).position==="static"&&!_v(o))?n:o||une(e)||n}const wne=async function(e){const t=this.getOffsetParent||Nx,n=this.getDimensions;return{reference:Ine(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function xne(e){return qo(e).direction==="rtl"}const kne={convertOffsetParentRelativeRectToViewportRelativeRect:fne,getDocumentElement:Ua,getClippingRect:yne,getOffsetParent:Nx,getElementRects:wne,getClientRects:pne,getDimensions:_ne,getScale:xl,isElement:Na,isRTL:xne};function $ne(e,t){let n=null,o;const a=Ua(e);function r(){var i;clearTimeout(o),(i=n)==null||i.disconnect(),n=null}function s(i,u){i===void 0&&(i=!1),u===void 0&&(u=1),r();const{left:c,top:m,width:f,height:v}=e.getBoundingClientRect();if(i||t(),!f||!v)return;const y=Iu(m),b=Iu(a.clientWidth-(c+f)),w=Iu(a.clientHeight-(m+v)),k=Iu(c),I={rootMargin:-y+"px "+-b+"px "+-w+"px "+-k+"px",threshold:qr(0,Pl(1,u))||1};let C=!0;function S(T){const E=T[0].intersectionRatio;if(E!==u){if(!C)return s();E?s(!1,E):o=setTimeout(()=>{s(!1,1e-7)},100)}C=!1}try{n=new IntersectionObserver(S,{...I,root:a.ownerDocument})}catch{n=new IntersectionObserver(S,I)}n.observe(e)}return s(!0),r}function xv(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:u=!1}=o,c=wv(e),m=a||r?[...c?ai(c):[],...ai(t)]:[];m.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),r&&x.addEventListener("resize",n)});const f=c&&i?$ne(c,n):null;let v=-1,y=null;s&&(y=new ResizeObserver(x=>{let[I]=x;I&&I.target===c&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),n()}),c&&!u&&y.observe(c),y.observe(t));let b,w=u?zr(e):null;u&&k();function k(){const x=zr(e);w&&(x.x!==w.x||x.y!==w.y||x.width!==w.width||x.height!==w.height)&&n(),w=x,b=requestAnimationFrame(k)}return n(),()=>{var x;m.forEach(I=>{a&&I.removeEventListener("scroll",n),r&&I.removeEventListener("resize",n)}),f==null||f(),(x=y)==null||x.disconnect(),y=null,u&&cancelAnimationFrame(b)}}const Cne=one,Px=sne,Mx=ane,Sne=rne,Tne=tne,Vx=(e,t,n)=>{const o=new Map,a={platform:kne,...n},r={...a.platform,_c:o};return ene(e,t,{...a,platform:r})};function Ene(e){return e!=null&&typeof e=="object"&&"$el"in e}function Vf(e){if(Ene(e)){const t=e.$el;return yv(t)&&Ba(t)==="#comment"?null:t}return e}function Lx(e){return{name:"arrow",options:e,fn(t){const n=Vf(h(e.element));return n==null?{}:Tne({element:n,padding:e.padding}).fn(t)}}}function qx(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Kb(e,t){const n=qx(e);return Math.round(t*n)/n}function kv(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,a=O(()=>{var $;return($=h(n.open))!=null?$:!0}),r=O(()=>h(n.middleware)),s=O(()=>{var $;return($=h(n.placement))!=null?$:"bottom"}),i=O(()=>{var $;return($=h(n.strategy))!=null?$:"absolute"}),u=O(()=>{var $;return($=h(n.transform))!=null?$:!0}),c=O(()=>Vf(e.value)),m=O(()=>Vf(t.value)),f=M(0),v=M(0),y=M(i.value),b=M(s.value),w=Pt({}),k=M(!1),x=O(()=>{const $={position:y.value,left:"0",top:"0"};if(!m.value)return $;const F=Kb(m.value,f.value),R=Kb(m.value,v.value);return u.value?{...$,transform:"translate("+F+"px, "+R+"px)",...qx(m.value)>=1.5&&{willChange:"transform"}}:{position:y.value,left:F+"px",top:R+"px"}});let I;function C(){c.value==null||m.value==null||Vx(c.value,m.value,{middleware:r.value,placement:s.value,strategy:i.value}).then($=>{f.value=$.x,v.value=$.y,y.value=$.strategy,b.value=$.placement,w.value=$.middlewareData,k.value=!0})}function S(){typeof I=="function"&&(I(),I=void 0)}function T(){if(S(),o===void 0){C();return}if(c.value!=null&&m.value!=null){I=o(c.value,m.value,C);return}}function E(){a.value||(k.value=!1)}return $e([r,s,i],C,{flush:"sync"}),$e([c,m],T,{flush:"sync"}),$e(a,E,{flush:"sync"}),Kf()&&Xf(S),{x:Tr(f),y:Tr(v),strategy:Tr(y),placement:Tr(b),middlewareData:Tr(w),isPositioned:Tr(k),floatingStyles:x,update:C}}var Fne=Object.defineProperty,Ane=(e,t,n)=>t in e?Fne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rne=(e,t,n)=>(Ane(e,typeof t!="symbol"?t+"":t,n),n);function ri(e){return e==null||e.value==null?null:e.value instanceof Node?e.value:"$el"in e.value&&e.value.$el?ri(M(e.value.$el)):"getBoundingClientRect"in e.value?e.value:null}function Dne(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Zb(e,t){const n=Dne(e);return Math.round(t*n)/n}function $v(e){return e.reduce((t,n)=>n.type===fe?t.concat($v(n.children)):t.concat(n),[])}function sc(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}function Yb(e){return e=h(e),e&&(e==null?void 0:e.nodeType)!==Node.COMMENT_NODE}class One{constructor(){Rne(this,"current",this.detect())}set(t){this.current!==t&&(this.current=t)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const Cv=new One;function Bne(e){if(Cv.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(Object.prototype.hasOwnProperty.call(e,"value")){const t=ri(e);if(t)return t.ownerDocument}return document}function Nne(e,t,n,o,a){$e([()=>a.offset,()=>a.flip,()=>a.shift,()=>a.autoPlacement,()=>a.arrow,()=>a.hide,()=>a.middleware],()=>{const r=[];(typeof a.offset=="number"||typeof a.offset=="object"||typeof a.offset=="function")&&r.push(bv(a.offset)),(a.flip===!0||typeof a.flip=="number"||typeof a.flip=="object")&&r.push(Mx({padding:typeof a.flip=="number"?a.flip:void 0,...typeof a.flip=="object"?a.flip:{}})),(a.shift===!0||typeof a.shift=="number"||typeof a.shift=="object")&&r.push(Px({padding:typeof a.shift=="number"?a.shift:void 0,...typeof a.shift=="object"?a.shift:{}})),(a.autoPlacement===!0||typeof a.autoPlacement=="object")&&r.push(Cne(typeof a.autoPlacement=="object"?a.autoPlacement:void 0)),r.push(...typeof a.middleware=="function"?a.middleware({referenceEl:t,floatingEl:n}):a.middleware||[]),(a.arrow===!0||typeof a.arrow=="number")&&r.push(Lx({element:o,padding:a.arrow===!0?0:a.arrow})),(a.hide===!0||typeof a.hide=="object"||Array.isArray(a.hide))&&(Array.isArray(a.hide)?a.hide:[a.hide]).forEach(s=>{r.push(Sne(typeof s=="object"?s:void 0))}),e.value=r},{immediate:!0})}function Pne(e,t,n){let o=()=>{};Je(()=>{if(e&&Cv.isClient&&typeof ResizeObserver<"u"&&t.value&&t.value instanceof Element){const a=new ResizeObserver(([r])=>{n.value=r.borderBoxSize.reduce((s,{inlineSize:i})=>s+i,0)});a.observe(t.value),o=()=>{a.disconnect(),n.value=null}}}),En(()=>{o()})}const Mne=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return"origin-center"}};function Vne(e,t){const n=O(()=>{if(typeof e.originClass=="function")return e.originClass(t.value);if(typeof e.originClass=="string")return e.originClass;if(e.tailwindcssOriginClass)return Mne(t.value)}),o=O(()=>e.enter||n.value?`${e.enter||""} ${n.value||""}`:void 0),a=O(()=>e.leave||n.value?`${e.leave||""} ${n.value||""}`:void 0);return{originClassRef:n,enterActiveClassRef:o,leaveActiveClassRef:a}}function Ux(e,t,...n){if(e in t){const a=t[e];return typeof a=="function"?a(...n):a}const o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Ux),o}const Xb=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var jx=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(jx||{});function Lne(e,t=0){var n;return e===((n=Bne(e))==null?void 0:n.body)?!1:Ux(t,{0(){return e.matches(Xb)},1(){let o=e;for(;o!==null;){if(o.matches(Xb))return!0;o=o.parentElement}return!1}})}function xm(e,t,n){Cv.isServer||on(o=>{document.addEventListener(e,t,n),o(()=>document.removeEventListener(e,t,n))})}function qne(e,t,n=O(()=>!0)){function o(r,s){if(!n.value||r.defaultPrevented)return;const i=s(r);if(i===null||!i.getRootNode().contains(i))return;const u=function c(m){return typeof m=="function"?c(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(const c of u){if(c===null)continue;const m=c instanceof HTMLElement?c:ri(c);if(m!=null&&m.contains(i)||r.composed&&r.composedPath().includes(m))return}return!Lne(i,jx.Loose)&&i.tabIndex!==-1&&r.preventDefault(),t(r,i)}const a=M(null);xm("mousedown",r=>{var s,i;n.value&&(a.value=((i=(s=r.composedPath)==null?void 0:s.call(r))==null?void 0:i[0])||r.target)},!0),xm("click",r=>{a.value&&(o(r,()=>a.value),a.value=null)},!0),xm("blur",r=>o(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const zx=Symbol("ReferenceContext"),Hx=Symbol("FloatingContext"),Wx=Symbol("ArrowContext");function Gx(e){const t=Pe(zx,null);if(t===null){const n=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Gx),n}return t}function Kx(e){const t=Pe(Hx,null);if(t===null){const n=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kx),n}return t}function Zx(e){const t=Pe(Wx,null);if(t===null){const n=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zx),n}return t}const Qe={as:{type:[String,Function],default:"template"},floatingAs:{type:[String,Function],default:"div"},show:{type:Boolean,default:null},placement:{type:String,default:"bottom-start"},strategy:{type:String,default:"absolute"},offset:[Number,Function,Object],shift:{type:[Boolean,Number,Object],default:!1},flip:{type:[Boolean,Number,Object],default:!1},arrow:{type:[Boolean,Number],default:!1},autoPlacement:{type:[Boolean,Object],default:!1},hide:{type:[Boolean,Object,Array],default:!1},referenceHiddenClass:String,escapedClass:String,autoUpdate:{type:[Boolean,Object],default:!0},zIndex:{type:[Number,String],default:9999},transitionName:String,transitionType:String,enter:String,enterFrom:String,enterTo:String,leave:String,leaveFrom:String,leaveTo:String,originClass:[String,Function],tailwindcssOriginClass:{type:Boolean,default:!1},portal:{type:Boolean,default:!1},transform:{type:Boolean,default:!1},adaptiveWidth:{type:Boolean,default:!1},composable:{type:Boolean,default:!1},dialog:{type:Boolean,default:!1},middleware:{type:[Array,Function],default:()=>[]}};function Yx(e,t,n,o){const{referenceRef:a}=o,r=t,s=Ue(n,{ref:a}),i=si(e,r.as==="template"?s:{});return r.as==="template"?i:typeof r.as=="string"?Ae(r.as,s,[i]):Ae(r.as,s,()=>[i])}function Sv(e,t,n,o){const{floatingRef:a,props:r,mounted:s,show:i,referenceHidden:u,escaped:c,placement:m,floatingStyles:f,referenceElWidth:v,updateFloating:y}=o,b=Ue({...r,as:r.floatingAs},t),{enterActiveClassRef:w,leaveActiveClassRef:k}=Vne(b,m),x={enterActiveClass:w.value,enterFromClass:b.enterFrom,enterToClass:b.enterTo,leaveActiveClass:k.value,leaveFromClass:b.leaveFrom,leaveToClass:b.leaveTo},I={name:b.transitionName,type:b.transitionType,appear:!0,...b.transitionName?{}:x,onBeforeEnter(){i.value=!0},onAfterLeave(){i.value=!1}},C={enter:w.value,enterFrom:b.enterFrom,enterTo:b.enterTo,leave:k.value,leaveFrom:b.leaveFrom,leaveTo:b.leaveTo,onBeforeEnter:I.onBeforeEnter,onAfterLeave:I.onAfterLeave},S={class:[u.value?b.referenceHiddenClass:void 0,c.value?b.escapedClass:void 0].filter(F=>!!F).join(" "),style:{...f.value,zIndex:b.zIndex,width:b.adaptiveWidth&&typeof v.value=="number"?`${v.value}px`:void 0}};function T(F){return b.portal?s.value?Ae(nv,()=>F):K():F}function E(F){const R=Ue(S,n,b.dialog?{}:{ref:a});return b.as==="template"?F:typeof b.as=="string"?Ae(b.as,R,F):Ae(b.as,R,()=>F)}function $(){function F(){var R;const B=b.as==="template"?Ue(S,n,b.dialog?{}:{ref:a}):null,V=si(e,B);return((R=V.props)==null?void 0:R.unmount)===!1?(y(),V):typeof b.show!="boolean"||b.show?V:K()}return s.value?b.transitionChild?Ae(vo,{key:`placement-${m.value}`,...b.dialog?{ref:a}:{},as:"template",...C},F):Ae(lr,{...b.dialog?{ref:a}:{},...I},F):K()}return T(E($()))}function Xx(e,t,n,o,a){const r=M(!1),s=gt(o,"placement"),i=gt(o,"strategy"),u=Pt({}),c=M(void 0),m=M(void 0),f=M(null),v=M(void 0),y=M(void 0),b=O(()=>ri(t)),w=O(()=>ri(n)),k=O(()=>Yb(b)&&Yb(w)),{placement:x,middlewareData:I,isPositioned:C,floatingStyles:S,update:T}=kv(b,w,{placement:s,strategy:i,middleware:u,transform:o.dialog?!1:o.transform,whileElementsMounted:o.dialog?()=>()=>{}:void 0}),E=M(null);Je(()=>{r.value=!0}),$e(e,(P,z)=>{P&&!z?a("show"):!P&&z&&a("hide")},{immediate:!0});function $(){k.value&&(T(),a("update"))}$e([s,i,u],$,{flush:"sync"}),Nne(u,b,w,f,o),$e([I,()=>o.hide,C],()=>{var P,z;(o.hide===!0||typeof o.hide=="object"||Array.isArray(o.hide))&&(c.value=((P=I.value.hide)==null?void 0:P.referenceHidden)||!C.value,m.value=(z=I.value.hide)==null?void 0:z.escaped)}),$e(I,()=>{const P=I.value.arrow;v.value=P==null?void 0:P.x,y.value=P==null?void 0:P.y}),Pne(o.adaptiveWidth,b,E),$e([e,k],async(P,z,H)=>{if(await ze(),e.value&&k.value&&o.autoUpdate){const j=xv(b.value,w.value,$,typeof o.autoUpdate=="object"?o.autoUpdate:void 0);H(j)}},{flush:"post",immediate:!0});const F=M(!0);$e(b,()=>{!(b.value instanceof Element)&&k.value&&F.value&&(F.value=!1,window.requestAnimationFrame(()=>{F.value=!0,$()}))},{flush:"sync"});const R={referenceRef:t,placement:x},B={floatingRef:n,props:o,mounted:r,show:e,referenceHidden:c,escaped:m,placement:x,floatingStyles:S,referenceElWidth:E,updateFloating:$},V={ref:f,placement:x,x:v,y};return st(Wx,V),{referenceApi:R,floatingApi:B,arrowApi:V,placement:x,referenceEl:b,floatingEl:w,middlewareData:I,update:$}}const Qx={name:"Float",inheritAttrs:!1,props:Qe,emits:["show","hide","update"],setup(e,{emit:t,slots:n,attrs:o}){const a=M(e.show??!1),r=M(null),s=M(null),{referenceApi:i,floatingApi:u,placement:c}=Xx(a,r,s,e,t);function m(v){return e.as==="template"?v:typeof e.as=="string"?Ae(e.as,o,v):Ae(e.as,o,()=>v)}const f={placement:c.value};return e.composable||e.dialog?(st(zx,i),st(Hx,u),()=>{if(n.default)return m(n.default(f))}):()=>{if(!n.default)return;const[v,y]=$v(n.default(f)).filter(sc);if(!sc(v))return;const b=Yx(v,{as:"template"},{},i),w=Sv(y,{as:e.floatingAs},{},u);return m([b,w])}}},Une={as:Qe.as},jne={name:"FloatReference",inheritAttrs:!1,props:Une,setup(e,{slots:t,attrs:n}){const o=Gx("FloatReference"),{placement:a}=o;return()=>{if(!t.default)return;const r={placement:a.value};return Yx(t.default(r)[0],e,n,o)}}},Qb={as:Qe.floatingAs,transitionName:Qe.transitionName,transitionType:Qe.transitionType,enter:Qe.enter,enterFrom:Qe.enterFrom,enterTo:Qe.enterTo,leave:Qe.leave,leaveFrom:Qe.leaveFrom,leaveTo:Qe.leaveTo,originClass:Qe.originClass,tailwindcssOriginClass:Qe.tailwindcssOriginClass,transitionChild:{type:Boolean,default:!1}},zne={name:"FloatContent",inheritAttrs:!1,props:Qb,setup(e,{slots:t,attrs:n}){const o=Kx("FloatContent"),{placement:a}=o;return()=>{if(!t.default)return;const r={placement:a.value},s=Object.entries(e).reduce((i,[u,c])=>{const m=Qb;return(typeof m[u]=="object"&&c===m[u].default||c===void 0)&&delete i[u],i},{...e});return Sv(t.default(r)[0],s,n,o)}}},Hne={as:{...Qe.as,default:"div"},offset:{type:Number,default:4}},Wne={name:"FloatArrow",props:Hne,setup(e,{slots:t,attrs:n}){const{ref:o,placement:a,x:r,y:s}=Zx("FloatArrow");return()=>{var i;const u={top:"bottom",right:"left",bottom:"top",left:"right"}[a.value.split("-")[0]],c={left:o.value&&typeof r.value=="number"?`${Zb(o.value,r.value)}px`:void 0,top:o.value&&typeof s.value=="number"?`${Zb(o.value,s.value)}px`:void 0,right:void 0,bottom:void 0,[u]:`${e.offset*-1}px`};if(e.as==="template"){const m={placement:a.value},f=(i=t.default)==null?void 0:i.call(t,m)[0];return!f||!sc(f)?void 0:si(f,{ref:o,style:c})}return Ae(e.as,Ue(n,{ref:o,style:c}))}}},Gne={as:Qe.as,show:Qe.show,placement:Qe.placement,strategy:Qe.strategy,offset:Qe.offset,shift:Qe.shift,flip:Qe.flip,arrow:Qe.arrow,autoPlacement:Qe.autoPlacement,autoUpdate:Qe.autoUpdate,zIndex:Qe.zIndex,transitionName:Qe.transitionName,transitionType:Qe.transitionType,enter:Qe.enter,enterFrom:Qe.enterFrom,enterTo:Qe.enterTo,leave:Qe.leave,leaveFrom:Qe.leaveFrom,leaveTo:Qe.leaveTo,originClass:Qe.originClass,tailwindcssOriginClass:Qe.tailwindcssOriginClass,portal:Qe.portal,transform:Qe.transform,middleware:Qe.middleware},Kne={name:"FloatVirtual",inheritAttrs:!1,props:Gne,emits:["initial","show","hide","update"],setup(e,{emit:t,slots:n,attrs:o}){const a=M(e.show??!1),r=M({getBoundingClientRect(){return{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}}}),s=M(null),{floatingApi:i,placement:u}=Xx(a,r,s,e,t);$e(()=>e.show,()=>{a.value=e.show??!1});function c(){a.value=!1}return t("initial",{show:a,placement:u,reference:r,floating:s}),()=>{if(!n.default)return;const m={placement:u.value,close:c},[f]=$v(n.default(m)).filter(sc);return Sv(f,{as:e.as,show:a.value},o,i)}}};Qe.as,Qe.placement,Qe.strategy,Qe.offset,Qe.shift,{...Qe.flip},Qe.arrow,Qe.autoPlacement,Qe.autoUpdate,Qe.zIndex,Qe.transitionName,Qe.transitionType,Qe.enter,Qe.enterFrom,Qe.enterTo,Qe.leave,Qe.leaveFrom,Qe.leaveTo,Qe.originClass,Qe.tailwindcssOriginClass,Qe.transform,Qe.middleware;Qe.as,Qe.placement,Qe.strategy,Qe.offset,Qe.shift,Qe.flip,Qe.arrow,Qe.autoPlacement,Qe.autoUpdate,Qe.zIndex,Qe.transitionName,Qe.transitionType,Qe.enter,Qe.enterFrom,Qe.enterTo,Qe.leave,Qe.leaveFrom,Qe.leaveTo,Qe.originClass,Qe.tailwindcssOriginClass,Qe.transform,Qe.middleware;const Zne={class:"w-56 divide-y divide-neutral-200 overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-neutral-200 dark:divide-neutral-500/30 dark:bg-neutral-800 dark:ring-neutral-700"},Yne={class:"px-4 py-2"},Xne={key:0,class:"px-1.5 py-2"},Qne={class:"flex flex-col space-y-1"},Jne={key:1,class:"px-1.5 py-2"},eoe={class:"flex flex-col space-y-1"},toe={key:2},noe={class:"-ml-px px-4 py-2"},ooe={__name:"ResourceTableHeaderMenu",props:["attribute","label","wrap","isSortable","isPrimary","customizeable"],emits:["sortAsc","sortDesc","updated"],setup(e,{emit:t}){const n=t,o=jp(),a=M(!1);function r(i,u){n(i,u),a.value=!1}function s({reference:i,floating:u}){function c(m){m.target.tagName!=="INPUT"&&(m.preventDefault(),i.value={getBoundingClientRect(){return{width:0,height:0,x:m.clientX,y:m.clientY,top:m.clientY,left:m.clientX,right:m.clientX,bottom:m.clientY}}},a.value=!0)}on(m=>{o.value&&(o.value.addEventListener("click",c),m(()=>o.value.removeEventListener("click",c)))}),qne(u,()=>{a.value=!1},O(()=>a.value))}return(i,u)=>{const c=d("ITextBlockDark"),m=d("Icon"),f=d("ILink"),v=d("IFormCheckbox"),y=d("IFormCheckboxLabel"),b=d("IFormCheckboxField");return g(),A(h(Kne),{enter:"transition-opacity duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",show:a.value,portal:"",flip:"",onInitial:s},{default:p(()=>[_("div",Zne,[_("div",Yne,[l(c,{class:"font-medium",text:e.label},null,8,["text"])]),e.isSortable?(g(),D("div",Xne,[_("div",Qne,[l(f,{class:"flex items-center rounded-lg p-1 px-2 text-base/6 text-neutral-700 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6",basic:"",plain:"",onClick:u[0]||(u[0]=w=>r("sortAsc",e.attribute))},{default:p(()=>[l(m,{icon:"ArrowUpSolid",class:"mr-2 size-4"}),le(" "+Z(i.$t("core::app.sort_ascending")),1)]),_:1}),l(f,{class:"flex items-center rounded-lg p-1 px-2 text-base/6 text-neutral-700 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6",basic:"",plain:"",onClick:u[1]||(u[1]=w=>r("sortDesc",e.attribute))},{default:p(()=>[l(m,{icon:"ArrowDownSolid",class:"mr-2 size-4"}),le(" "+Z(i.$t("core::app.sort_descending")),1)]),_:1})])])):K("",!0),!e.isPrimary&&e.customizeable?(g(),D("div",Jne,[_("div",eoe,[l(f,{class:"flex items-center rounded-lg p-1 px-2 text-base/6 text-neutral-700 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6",basic:"",plain:"",onClick:u[2]||(u[2]=w=>r("updated",{visible:!1}))},{default:p(()=>[l(m,{icon:"Eye",class:"mr-2 size-4"}),le(" "+Z(i.$t("core::app.hide")),1)]),_:1})])])):K("",!0),e.customizeable?(g(),D("div",toe,[_("div",noe,[l(b,null,{default:p(()=>[l(v,{checked:e.wrap,"onUpdate:checked":u[3]||(u[3]=w=>i.$emit("updated",{wrap:w}))},null,8,["checked"]),l(y,{text:i.$t("core::table.wrap_column")},null,8,["text"])]),_:1})])])):K("",!0)])]),_:1},8,["show"])}}},aoe={key:4,class:"inline-flex items-center"},roe={key:5,class:"flex items-center justify-center"},loe=25,soe={__name:"ResourceTableHeader",props:{isOrdered:Boolean,wrap:Boolean,attribute:{type:String,required:!0},customizeable:{type:Boolean,required:!0},tableCustomizeable:{type:Boolean,required:!0},width:{required:!0},label:{required:!0},align:{type:String,default:"left"},condensed:Boolean,isSortedAscending:Boolean,isPrimary:Boolean,isSelectable:Boolean,isSortable:Boolean,allRowsSelected:Boolean,totalSelected:Number},emits:["checkboxChanged","sortAsc","sortDesc","updated","customize"],setup(e){const t=e,n=O(()=>t.totalSelected>0&&!t.allRowsSelected),o=O(()=>t.isSortedAscending?"ArrowUpSolid":"ArrowDownSolid"),a=O(()=>t.attribute==="actions"),r=O(()=>t.isSortable||t.customizeable);return(s,i)=>{const u=d("IFormCheckbox"),c=d("Icon"),m=d("ILink"),f=d("ITableHeader");return g(),A(f,{class:be(["group/th relative bg-neutral-50 dark:bg-neutral-900 dark:before:absolute dark:before:inset-0 dark:before:-z-10 dark:before:bg-neutral-500/10",e.isPrimary||a.value?"z-30":"z-20",{"draggable-exclude lg:sticky lg:left-0":e.isPrimary,"table-actions-column !px-2 lg:sticky lg:right-0":a.value,"text-left":e.align==="left","text-center":e.align==="center","text-right":e.align==="right","cursor-pointer hover:bg-neutral-100 hover:text-neutral-700 dark:hover:bg-neutral-700/60 dark:hover:text-neutral-200":r.value}]),style:Nt({maxWidth:a.value?e.width:void 0})},{default:p(()=>[r.value?(g(),A(ooe,{key:0,attribute:e.attribute,"is-sortable":e.isSortable,"is-primary":e.isPrimary,customizeable:e.customizeable,label:e.label,wrap:e.wrap,onUpdated:i[0]||(i[0]=v=>s.$emit("updated",v)),onSortAsc:i[1]||(i[1]=v=>s.$emit("sortAsc",v)),onSortDesc:i[2]||(i[2]=v=>s.$emit("sortDesc",v))},null,8,["attribute","is-sortable","is-primary","customizeable","label","wrap"])):K("",!0),i[3]||(je(-1),i[3]=a.value?(g(),A(xx,{key:1})):e.isPrimary?(g(),A($x,{key:2})):K("",!0),je(1),i[3]),e.isSelectable?(g(),A(kx,{key:3,class:"z-20",condensed:e.condensed},null,8,["condensed"])):K("",!0),a.value?(g(),D("div",roe,[e.tableCustomizeable?(g(),A(m,{key:0,basic:""},{default:p(()=>[l(c,{icon:"Cog",class:"size-5 sm:size-4",onClick:v=>s.$emit("customize")},null,8,["onClick"])]),_:1})):K("",!0)])):(g(),D("div",aoe,[e.isSelectable?(g(),A(u,{key:0,class:be([e.condensed?"-ml-2":"","mr-2"]),indeterminate:n.value,checked:n.value||e.allRowsSelected,onChange:v=>s.$emit("checkboxChanged",n.value)},null,8,["class","indeterminate","checked","onChange"])):K("",!0),_("div",{class:be(["inline-flex items-center",e.isSelectable?"mt-px":"",e.isSelectable?e.condensed?"ml-4":"ml-6":""])},[_("span",{class:be(["truncate",e.isOrdered?"mr-2":""]),style:Nt({maxWidth:`${parseInt(e.width,10)-loe}px`})},[Se(s.$slots,"default",{},()=>[le(Z(e.label),1)])],6),l(c,{icon:o.value,class:be(["size-4 text-neutral-700 dark:text-neutral-200",e.isOrdered?"":"hidden"])},null,8,["icon","class"])],2)]))]),_:3},8,["class","style"])}}},ioe={key:0,class:"m-auto mt-8 max-w-5xl"},uoe={class:"mb-3 mt-6 space-y-2 sm:mt-0 md:flex md:items-center md:space-x-4 md:space-y-0"},coe={key:0,class:"flex space-x-1 sm:!ml-2"},doe={key:1,class:"flex-1 text-right"},moe={key:0},foe={__name:"ResourceTable",props:{tableId:{type:String,required:!0},resourceName:{type:String,required:!0},actionRequestParams:{type:Object,default:()=>({})},dataRequestQueryString:{type:Object,default:()=>({})},withCustomizeButton:Boolean,emptyState:Object,urlPath:String,filterId:Number},emits:["loaded","actionExecuted"],setup(e,{expose:t,emit:n}){const o=e,a=n;let r=null,s=!1,i=!1,u=!1,c=[];const{t:m}=Ee(),{setLoading:f,isLoading:v}=An(),{scriptConfig:y}=Ne(),{settings:b,fetchActions:w,fetchSettings:k,customizeTable:x}=eo(o.tableId),I=uo(new dte),C=M(""),S=M(!1),T=M(!1),E=M(null);let $=null;const F=O(()=>I.isNotEmpty()?"":v.value?"...":C.value?m("core::app.no_search_results"):m("core::table.empty")),R=O(()=>b.value.identifier),B=O(()=>o.tableId),V=O(()=>I.state.meta.pre_total===0),P=O(()=>b.value.maxHeight!==null?b.value.maxHeight+"px":"10000px"),z=O(()=>b.value.maxHeight!==null),H=O(()=>typeof I.state.meta.pre_total>"u"?!1:V.value&&o.emptyState!=null),j=O(()=>({page:I.currentPage,per_page:I.perPage,order:I.get("order"),...b.value.requestQueryString,...o.dataRequestQueryString})),N=O(()=>Xr(b.value.columns||[],"order")),L=O({get(){return N.value.filter(Ke=>(!Ke.hidden||Ke.hidden==!1)&&Ke.attribute)},set(Ke){const He=b.value.columns.map(vt=>{const pn=Ke.find(Dn=>Dn.attribute===vt.attribute);return pn?{...vt,...pn,order:Ke.indexOf(pn)+1,hidden:pn.visible===!1}:vt});b.value={...b.value,columns:He}}}),U=O(()=>L.value.map(Ke=>({attribute:Ke.attribute,width:Ke.width,minWidth:Ke.minWidth,customizeable:Ke.customizeable}))),ee=O(()=>L.value.length),G=O(()=>o.urlPath||"/"+o.resourceName+"/table"),W=O(()=>I.items.filter(Ke=>Ke.tSelected)),ae=O(()=>W.value.length),ue=O(()=>W.value.map(Ke=>Ke.id)),ce=O(()=>ae.value>0),oe=O(()=>!H.value&&T.value),ie=O(()=>ae.value===I.items.length),Q=O(()=>I.items.length>0&&(b.value.hasCustomActions||b.value.actions.length>0)),{queryBuilderRules:se,rulesAreValid:me,hasRulesApplied:xe,resetQueryBuilderRules:de}=la(R,B),{hasRules:he,activeFilter:Y,filtersBuilderVisible:X}=Pi(R,B);async function re(Ke=!1){if(v.value)return;Xe(),f(!0),Ke&&I.currentPage!==1&&_e(1);const He={...j.value};me.value&&(He.rules=se.value),C.value&&(He.q=C.value);try{const vt=await Innoclapps.request(G.value,{params:He,cancelToken:new Kr(pn=>$=pn)});I.setState(vt.data),Ge(),a("loaded",{isPreEmpty:V.value})}catch(vt){console.error(vt)}finally{f(!1),T.value||Gn(()=>{T.value=!0},150)}}function we(Ke,He=!0){y("demo")?i||(Innoclapps.info("The state of the columns is not saved in the demo and will reset upon refreshing the page.",7e3),i=!0):E.value.save(Ke,He!==!1)}function Ce(Ke){if(y("demo")){ge();return}Re(Ke)}function ge(){s||(Innoclapps.info("Column resizing is not saved in the demo and will reset upon navigating away from this page.",7e3),s=!0)}function Re(Ke){const He=L.value.map((vt,pn)=>vt.customizeable?{...vt,width:Ke[pn].width}:vt);L.value=He,we(He,!1)}function et(Ke,He){const vt=[...L.value];vt[Ke]={...vt[Ke],...He},L.value=vt,we(vt,!1)}function kt(){r=setInterval(re,b.value.pollingInterval*1e3)}function lt(){r&&clearInterval(r)}function ft(){I.perPage=parseInt(b.value.perPage),I.set("order",b.value.order),ze(()=>{he.value?Ge():re(),S.value=!0})}async function zt(){await k(o.resourceName,{params:o.dataRequestQueryString})}async function De(){await w(o.resourceName,{params:o.dataRequestQueryString})}function _e(Ke){I.currentPage=Ke}function Te(){Ut("floating-resource-updated",()=>re()),Ut("action-executed",({resourceName:Ke})=>{Ke===o.resourceName&&re()}),Ut("reload-resource-table",Ke=>{Ke===o.tableId&&re()}),Ut("resource-updated",({resourceName:Ke})=>{Ke===o.resourceName&&re()})}function Xe(){$&&($(),$=null)}function Me(Ke){ze(re)}function ke(Ke,He){!Q.value||ae.value===0||["INPUT","SELECT","TEXTAREA","A","BUTTON"].includes(Ke.target.tagName)||Ke.target.isContentEditable||We(He)}function We(Ke){Ke.tSelected=!Ke.tSelected}function $t(Ke){Ke||ie.value?Yt():Fe()}function Yt(){I.items.forEach(Ke=>Ke.tSelected=!1)}function Fe(){I.items.forEach(Ke=>Ke.tSelected=!0)}function Ge(){u!==!0&&(u=!0,c.push($e(()=>b.value.pollingInterval,(Ke,He)=>{!He&&Ke?kt():Ke?Ke&&He&&(lt(),kt()):lt()},{immediate:!0})),c.push($e(j,(Ke,He)=>{fa(Ke,He)||re()},{deep:!0})),c.push($e(()=>b.value.perPage,function(Ke){I.perPage=parseInt(Ke)})),c.push($e(()=>b.value.order,(Ke,He)=>{Ke&&!fa(Ke,He)&&I.set("order",Ke)},{deep:!0})))}function ht(){Te(),zt().then(ft)}function Xt(Ke){return b.value.customizeable?E.value.onColumnMove(Ke):!1}return Je(ht),En(Xe),rn(()=>{c.forEach(Ke=>Ke()),c=[],Y.value||de(),X.value=!1,I.flush(),lt(),f(!1)}),t({refetchActions:De,setPage:_e}),(Ke,He)=>{const vt=d("IEmptyState"),pn=d("IOverlay"),Dn=d("SearchInput"),_o=d("IButton"),Eo=d("SortableDraggable"),jt=d("ITableRow"),xn=d("IText"),Ht=d("ITableCell"),ct=d("ITableBody"),jn=d("ITable"),Lt=d("ITableOuter");return g(),D(fe,null,[H.value?(g(),D("div",ioe,[l(vt,en(un(e.emptyState)),null,16)])):K("",!0),!T.value&&!H.value?(g(),A(pn,{key:1,show:!0})):K("",!0),_("div",{class:be(oe.value?"opacity-100":"pointer-events-none opacity-0")},[_("div",uoe,[l(Dn,{id:`${e.resourceName}-table-search`,modelValue:C.value,"onUpdate:modelValue":[He[0]||(He[0]=it=>C.value=it),He[1]||(He[1]=it=>re(!0))]},null,8,["id","modelValue"]),S.value&&h(he)?(g(),D("div",coe,[l(gx,{placement:"bottom-start",view:B.value,identifier:R.value,onApply:Me},null,8,["view","identifier"])])):K("",!0),Se(Ke.$slots,"header",{total:I.state.meta.total,meta:I.state.meta,isPreEmpty:V.value}),S.value&&h(b).customizeable?(g(),D("div",doe,[e.withCustomizeButton?(g(),A(_o,{key:0,variant:"secondary",icon:"Cog",onClick:h(x)},null,8,["onClick"])):K("",!0),l(Wte,{ref_key:"customizationRef",ref:E,"table-id":e.tableId,"url-path":G.value},null,8,["table-id","url-path"])])):K("",!0)]),S.value&&h(he)&&h(xe)?(g(),A(ute,{key:0,identifier:R.value,view:B.value},null,8,["identifier","view"])):K("",!0),S.value?(g(),A(hx,{key:1,view:B.value,identifier:R.value,"active-filter-id":e.filterId,onApply:Me},null,8,["view","identifier","active-filter-id"])):K("",!0),l(pn,{show:h(v)},{default:p(()=>[Q.value&&ce.value?(g(),A(gte,{key:0,actions:h(b).actions,ids:ue.value,"table-id":e.tableId,"request-params":e.actionRequestParams,"resource-name":e.resourceName,"total-results":I.total,onUnselect:Yt,onRun:He[2]||(He[2]=it=>Ke.$emit("actionExecuted",it))},null,8,["actions","ids","table-id","request-params","resource-name","total-results"])):K("",!0),l(Lt,{class:"mt-3"},{default:p(()=>[l(jn,{id:"table-"+e.tableId,class:be(["[&_tbody>tr>td:first-child]:px-4 [&_thead>tr>th:first-child]:px-4",I.isEmpty()?"[&_.resizer]:pointer-events-none [&_.resizer]:!opacity-0":""]),condensed:h(b).condensed,"max-height":P.value,grid:h(b).bordered,"fixed-layout":""},{default:p(()=>[l(Gte,{"is-loaded":T.value,columns:U.value,disabled:!h(b).customizeable,onResized:Ce},{default:p(()=>[l(Eo,Ue({modelValue:L.value,"onUpdate:modelValue":He[5]||(He[5]=it=>L.value=it),tag:"tr",class:z.value?"[&>th]:sticky [&>th]:top-0 [&>th]:bg-opacity-75 [&>th]:backdrop-blur-sm [&>th]:backdrop-filter":"",move:Xt,"item-key":it=>"th"+it.attribute},{...Ke.$draggable.scrollable,delay:100,ghostClass:"sortable-column-ghost",filter:".resizer, .draggable-exclude",preventOnFilter:!1},{"onUpdate:modelValue":we}),{item:p(({element:it,index:Wt})=>[l(soe,{attribute:it.attribute,class:be([it.thClass,!h(b).customizeable||!it.customizeable?"draggable-exclude":""]),wrap:it.wrap,customizeable:h(b).customizeable&&it.customizeable,"table-customizeable":h(b).customizeable,label:it.label,align:it.align,condensed:h(b).condensed,"is-selectable":Q.value&&Wt===0,"is-sortable":it.sortable,"is-primary":it.primary,"is-ordered":I.isOrderedBy(it.attribute),"is-sorted-ascending":I.isSorted("asc",it.attribute),width:it.width||"auto","total-selected":ae.value,"all-rows-selected":ie.value,onCustomize:h(x),onSortAsc:He[3]||(He[3]=Fo=>I.sortAsc(Fo)),onSortDesc:He[4]||(He[4]=Fo=>I.sortDesc(Fo)),onCheckboxChanged:$t,onUpdated:Fo=>et(Wt,Fo)},null,8,["attribute","class","wrap","customizeable","table-customizeable","label","align","condensed","is-selectable","is-sortable","is-primary","is-ordered","is-sorted-ascending","width","total-selected","all-rows-selected","onCustomize","onUpdated"])]),_:1},16,["modelValue","class","item-key"])]),_:1},8,["is-loaded","columns","disabled"]),l(ct,null,{default:p(()=>[(g(!0),D(fe,null,Ie(I.items,it=>(g(),A(jt,{key:it.id,"aria-selected":it.tSelected,class:be(["group/tr",it._row_class,it._row_border?"[&>td:first-child]:before:absolute [&>td:first-child]:before:left-0 [&>td:first-child]:before:top-0 [&>td:first-child]:before:h-full [&>td:first-child]:before:w-auto [&>td:first-child]:before:border-l-2 [&>td:first-child]:before:border-transparent":"",it._row_border?{"[&>td:first-child]:before:!border-warning-500":it._row_border==="warning","[&>td:first-child]:before:!border-danger-500":it._row_border==="danger","[&>td:first-child]:before:!border-success-500":it._row_border==="success","[&>td:first-child]:before:!border-info-500":it._row_border==="info","[&>td:first-child]:before:!border-primary-500":it._row_border==="primary"}:""]),onClick:Wt=>ke(Wt,it)},{default:p(()=>[(g(!0),D(fe,null,Ie(L.value,(Wt,Fo)=>(g(),A(Ste,{key:"td-"+Wt.attribute,attribute:Wt.attribute,wrap:Wt.wrap,condensed:h(b).condensed,"has-required-field":Wt.field?Wt.field.isRequired:!1,align:Wt.align,newlineable:Wt.newlineable,customizeable:h(b).customizeable&&Wt.customizeable,link:Wt.link,route:Wt.route,class:be(Wt.tdClass),"is-primary":Wt.primary,"is-selected":it.tSelected||!1,"is-selectable":Q.value&&Fo===0,row:it,onSelected:We},{default:p(()=>[Se(Ke.$slots,Wt.attribute,en(un({column:Wt,row:it,resourceName:e.resourceName,resourceId:it.id})),()=>{var Jr;return[!Wt.component&&!((Jr=Wt.field)!=null&&Jr.indexComponent)?(g(),D("span",moe,Z(it[Wt.attribute]),1)):(g(),A(Rt(Wt.component||Wt.field.indexComponent),Ue({key:1,field:Wt.field?{...Wt.field,value:it[Wt.attribute]}:void 0},{column:Wt,row:it,resourceName:e.resourceName,resourceId:it.id},{onReload:re}),null,16,["field"]))]})]),_:2},1032,["attribute","wrap","condensed","has-required-field","align","newlineable","customizeable","link","route","class","is-primary","is-selected","is-selectable","row"]))),128))]),_:2},1032,["aria-selected","class","onClick"]))),128)),I.isEmpty()?(g(),A(jt,{key:0,"data-slot":"empty"},{default:p(()=>[ne(l(Ht,{colspan:ee.value},{default:p(()=>[l(xn,null,{default:p(()=>[le(Z(F.value),1)]),_:1})]),_:1},8,["colspan"]),[[pe,T.value]])]),_:1})):K("",!0)]),_:3})]),_:3},8,["id","class","condensed","max-height","grid"]),I.hasPagination?(g(),A(TI,{key:0,class:"px-4 py-3","is-current-page-check":it=>I.isCurrentPage(it),"has-next-page":I.hasNextPage,"has-previous-page":I.hasPreviousPage,links:I.pagination,"render-links":I.shouldRenderLinks,from:I.from,to:I.to,total:I.total,loading:h(v),onGoToNext:He[6]||(He[6]=it=>I.nextPage()),onGoToPrevious:He[7]||(He[7]=it=>I.previousPage()),onGoToPage:He[8]||(He[8]=it=>I.page(it))},null,8,["is-current-page-check","has-next-page","has-previous-page","links","render-links","from","to","total","loading"])):K("",!0)]),_:3})]),_:3},8,["show"])],2)],64)}}},poe={class:"relative rounded-lg text-neutral-400 focus-within:text-neutral-700 dark:focus-within:text-neutral-200"},voe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},hoe=Object.assign({inheritAttrs:!1},{__name:"SearchInput",props:yt({placeholder:String},{modelValue:{},modelModifiers:{}}),emits:yt(["click"],["update:modelValue"]),setup(e){const t=Zt(e,"modelValue");return(n,o)=>{const a=d("Icon"),r=d("IFormInput");return g(),D("div",poe,[_("div",voe,[l(a,{icon:"MagnifyingGlassSolid",class:"size-5"})]),l(r,Ue(n.$attrs,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),class:"!pl-11",type:"search",placeholder:e.placeholder||n.$t("core::app.search"),debounce:"",onClick:o[1]||(o[1]=s=>n.$emit("click",s))}),null,16,["modelValue","placeholder"])])}}});function goe(e){return e!==e}var boe=goe;function yoe(e,t,n){for(var o=n-1,a=e.length;++o<a;)if(e[o]===t)return o;return-1}var _oe=yoe,Ioe=O2,woe=boe,xoe=_oe;function koe(e,t,n){return t===t?xoe(e,t,n):Ioe(e,woe,n)}var $oe=koe,Coe=$oe;function Soe(e,t){var n=e==null?0:e.length;return!!n&&Coe(e,t,0)>-1}var Jx=Soe;function Toe(e,t,n){for(var o=-1,a=e==null?0:e.length;++o<a;)if(n(t,e[o]))return!0;return!1}var ek=Toe,Eoe=Np,Foe=Jx,Aoe=ek,Roe=Hl,Doe=vi,Ooe=Pp,Boe=200;function Noe(e,t,n,o){var a=-1,r=Foe,s=!0,i=e.length,u=[],c=t.length;if(!i)return u;n&&(t=Roe(t,Doe(n))),o?(r=Aoe,s=!1):t.length>=Boe&&(r=Ooe,s=!1,t=new Eoe(t));e:for(;++a<i;){var m=e[a],f=n==null?m:n(m);if(m=o||m!==0?m:0,s&&f===f){for(var v=c;v--;)if(t[v]===f)continue e;u.push(m)}else r(t,f,o)||u.push(m)}return u}var Poe=Noe,Moe=Poe,Voe=Zc,Loe=Wc,Jb=Gp,qoe=Loe(function(e,t){return Jb(e)?Moe(e,Voe(t,1,Jb,!0)):[]}),Uoe=qoe;const tk=Bt(Uoe);var joe=bx,zoe=z2;function Hoe(e,t){return joe(e,t,function(n,o){return zoe(e,o)})}var Woe=Hoe,Goe=Woe,Koe=zI,Zoe=Koe(function(e,t){return e==null?{}:Goe(e,t)}),Yoe=Zoe;const nk=Bt(Yoe);function Xoe(e){return Array.isArray(e)&&e.every(t=>typeof t!="object")}function Tv(e,t){let n=JSON.parse(JSON.stringify(e));for(let o in t)if(Object.hasOwn(t,o))if(t[o]&&Object.hasOwn(t[o],"_reset"))n[o]=t[o]._reset;else if(Array.isArray(n[o]))if(Xoe(t[o]))n[o]=t[o];else{const a=Array.isArray(t[o])?t[o]:[t[o]];n[o]=Qoe(n[o],a)}else t[o]&&t[o]._delete?delete n[o]:typeof t[o]=="object"&&t[o]!==null&&n[o]?n[o]=Tv(n[o],t[o]):n[o]=t[o];return n}function Qoe(e,t){let n=[...e],o=[];t.forEach(a=>{if(a&&a._delete){o.push(a.id);return}const r=e.findIndex(s=>s.id===a.id);r!==-1?n[r]=Tv(e[r],a):n.push(a)});for(let a of o){const r=n.findIndex(s=>s.id===a);r!==-1&&n.splice(r,1)}return n}function Vi(e,t,n={}){const{resourceSingularName:o,associationsBeingSaved:a,resourceBeingRetrieved:r,retrieveResource:s,syncAssociations:i,detachAssociations:u,resourceBeingUpdated:c,updateResource:m}=Dt(e),f=_t();let v=[],y=null;const b=M({}),w=O(()=>c.value||a.value),k=O(()=>Object.keys(b.value).length>0);$n(t)?$e(t,(R,B)=>{y=pt(R),pt(B)&&pt(R)&&(b.value={},n.watchId!==!1&&ze(x))},{immediate:!0,flush:"post"}):y=pt(t);async function x(){let R={};return f[o.value]?(R=f[o.value],delete f[o.value]):R=await s(y),R._sync_timestamp=R.updated_at.split(".")[0],F(R,!0),b}async function I(R){const B=await m(R,y);return B._sync_timestamp=B.updated_at.split(".")[0],F(B,!0),b}function C(R){const B=Object.keys(b.value);if(B.length){let V=tk(B,v),P=nk(b.value,V);for(const z in P)R[z]=P[z];return R}else return v=Object.keys(R),R}async function S(R){let B=await i(y,R);return F(B,!0),b}async function T(R){const B=await u(y,R);return F(B,!0),b}function E(R){qn(R).forEach(B=>{parseInt(b.value[B])>0&&(b.value[B]=b.value[B]-1)})}function $(R){qn(R).forEach(B=>{b.value[B]=b.value[B]+1})}function F(R,B=!1){B&&(R._sync_timestamp=new Date().toISOString()),Object.hasOwn(R,"_sync_timestamp")&&(R._sync_timestamp instanceof Date&&(R._sync_timestamp=R._sync_timestamp.toISOString()),R._sync_timestamp.indexOf(".")>-1&&(R._sync_timestamp=R._sync_timestamp.split(".")[0])),B?b.value=C(R):b.value=Tv(pt(b),pt(R))}return{resource:b,resourceBeingFetched:r,resourceBeingUpdated:w,resourceReady:k,associationsBeingSaved:a,resourceSingularName:o,fetchResource:x,updateResource:I,performUpdate:m,synchronizeResource:F,incrementResourceCount:$,decrementResourceCount:E,syncResourceAssociations:S,detachResourceAssociations:T}}const Joe={__name:"TheFloatingResourceModal",setup(e){const{t}=Ee(),n=_t(),o=It(),a=M(null),r=M(null),s=O(()=>o.query.mode||""),i=M(!1),{fields:u,setResource:c,hydrateFields:m,totalCollapsable:f,getUpdateFields:v}=yn(),y=M(!1),b=M(!1),w=O(()=>String(String(o.query.floating_resource)+String(o.query.floating_resource_id))),{resource:k,resourceSingularName:x,updateResource:I,fetchResource:C,synchronizeResource:S,detachResourceAssociations:T,incrementResourceCount:E,decrementResourceCount:$}=Vi(r,a,{watchId:!1});function F(){At("floating-resource-updated",{resourceName:r.value,resourceId:a.value,resource:k.value})}async function R(U){try{await I(U),F(),Innoclapps.success(t("core::resource.updated"))}catch(ee){return ee.isValidationError()&&Innoclapps.error(t("core::app.form_validation_failed"),3e3),Promise.reject(ee)}}async function B(){u.value=await v(r.value,a.value)}async function V(){await C(),await B(),c(k)}async function P(){await V()}function z(){y.value=!1}async function H(){u.value=[],k.value={},y.value=!0,await V(),b.value=!0}function j(){n[x.value]=k.value,n.push(k.value.path)}function N(U){U.destroyable?z():P(),At("floating-resource-action-executed",{resourceName:r.value,resourceId:a.value,resource:k.value,action:U})}function L(){b.value=!1,At("floating-resource-hidden",{resourceName:r.value,resourceId:a.value}),n.replace({query:sr(o.query,["floating_resource","floating_resource_id","mode"])})}return $e(w,()=>{a.value=o.query.floating_resource_id,r.value=o.query.floating_resource,r.value&&a.value?(b.value=!1,i.value=!0,ze(H)):(y.value=!1,i.value=!1)},{immediate:!0}),st("refreshFloatingResource",P),st("hideFloatingResource",z),st("synchronizeResource",S),st("detachResourceAssociations",T),st("incrementResourceCount",E),st("decrementResourceCount",$),st("emitUpdatedGlobalEvent",F),st("hydrateFields",m),st("totalCollapsableFields",f),st("synchronizeAndEmitUpdatedEvent",(U,ee=!1)=>{S(U,ee),F()}),(U,ee)=>i.value?(g(),A(Rt(`${h(x)}FloatingModal`),{key:0,visible:y.value,"onUpdate:visible":ee[0]||(ee[0]=G=>y.value=G),"floating-ready":b.value,resource:h(k),fields:h(u),mode:s.value,"update-handler":R,onHidden:L,onActionExecuted:N,onViewRequested:j},null,40,["visible","floating-ready","resource","fields","mode"])):K("",!0)}},eae={class:"notifications pointer-events-none fixed inset-0 flex items-start justify-end px-8 py-6"},tae={class:"w-full max-w-sm"},nae={class:"p-4"},oae={class:"flex items-center"},aae={class:"shrink-0"},rae={class:"ml-3 flex w-0 flex-1 justify-between"},lae=["textContent"],sae={class:"shrink-0"},iae={class:"notifications pointer-events-none fixed inset-0 flex items-end justify-end px-8 py-6"},uae={class:"w-full max-w-sm"},cae={class:"p-5"},dae={class:"mb-3 text-sm text-neutral-100"},mae={class:"flex items-center space-x-2"},fae={class:"shrink-0 self-start"},pae=["textContent"],vae={class:"mt-4 flex items-center space-x-1.5"},hae={__name:"TheFloatNotifications",setup(e){const{localizedDateTime:t}=rt();function n(a,r){r(a.id),typeof a.closed=="function"&&a.closed()}function o(a,r){a.action.onClick()===!0&&n(a,r)}return(a,r)=>{const s=d("Icon"),i=d("ILink"),u=d("IButton"),c=d("Notification"),m=d("NotificationGroup"),f=d("icon");return g(),D(fe,null,[l(m,{group:"app"},{default:p(()=>[_("div",eae,[_("div",tae,[l(c,{enter:"ease-out duration-300 transition","enter-from":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to":"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",move:"transition duration-500","move-delay":"delay-300"},{default:p(({notifications:v,close:y})=>[(g(!0),D(fe,null,Ie(v,(b,w)=>(g(),D("div",{key:w,class:"notification pointer-events-auto relative mb-2 w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 dark:bg-neutral-800 dark:ring-neutral-500/40"},[_("div",nae,[_("div",oae,[_("div",aae,[b.type==="success"?(g(),A(s,{key:0,icon:"CheckCircle",class:"size-6 text-success-400"})):K("",!0),b.type==="info"?(g(),A(s,{key:1,icon:"InformationCircle",class:"size-6 text-info-400"})):K("",!0),b.type==="error"?(g(),A(s,{key:2,icon:"XCircleSolid",class:"size-6 text-danger-400"})):K("",!0)]),_("div",rae,[_("p",{class:"w-0 flex-1 text-base/6 font-medium text-neutral-800 dark:text-white sm:text-sm/6",textContent:Z(b.text)},null,8,lae),b.action?(g(),A(i,{key:0,class:"ml-3 shrink-0",text:b.action.text,onClick:k=>o(b,y)},null,8,["text","onClick"])):K("",!0)]),_("div",sae,[l(u,{class:"ml-4",icon:"XSolid",basic:"",small:"",onClick:k=>n(b,y)},null,8,["onClick"])])])])]))),128))]),_:1})])])]),_:1}),l(m,{group:"static",position:"bottom"},{default:p(()=>[_("div",iae,[_("div",uae,[l(c,{enter:"ease-out duration-300 transition","enter-from":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to":"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",move:"transition duration-500","move-delay":"delay-300"},{default:p(({notifications:v,close:y})=>[(g(!0),D(fe,null,Ie(v,(b,w)=>(g(),D("div",{key:w,class:"notification pointer-events-auto relative mb-2 w-full max-w-sm overflow-hidden rounded-lg bg-neutral-900/90 ring-1 ring-neutral-700/70"},[_("div",cae,[_("div",dae,Z(h(t)(new Date)),1),_("div",mae,[_("div",fae,[l(f,{icon:"InformationCircle",class:"size-6 text-info-400"})]),_("p",{class:"w-0 flex-1 text-sm font-medium text-neutral-100",textContent:Z(b.text)},null,8,pae)]),_("div",vae,[b.action?(g(),A(u,{key:0,variant:"primary",text:b.action.text,soft:"",block:"",onClick:k=>o(b,y)},null,8,["text","onClick"])):K("",!0),l(u,{variant:"secondary",text:a.$t("core::notifications.dismiss"),block:"",onClick:k=>n(b,y)},null,8,["text","onClick"])])])]))),128))]),_:1})])])]),_:1})],64)}}},gae={class:"relative"},bae={key:0,class:"absolute -right-1 -top-3 z-10"},yae=_("span",{class:"relative flex size-3"},[_("span",{class:"absolute inline-flex h-full w-full animate-ping rounded-full bg-primary-400 opacity-75"}),_("span",{class:"relative inline-flex size-3 rounded-full bg-primary-500"})],-1),_ae=[yae],Iae={class:"-m-1"},wae={class:"grow"},xae={class:"ml-2 inline-block"},kae={class:"max-h-96 overflow-y-auto"},$ae={class:"flex items-center justify-end border-t border-neutral-200 px-4 py-2 dark:border-neutral-500/30"},Cae={__name:"TheNavbarNotifications",setup(e){const{localizeNotification:t,incrementTotalUnreadNotifications:n,markNotificationAsRead:o,markAllNotificationsRead:a,totalUnreadNotifications:r,hasUnreadNotifications:s,notificationsBeingLoaded:i,fetchNotifications:u}=BI(),c=_t(),{localizedDateTime:m}=rt(),{t:f}=Ee(),v=Pt([]),y=O(()=>v.value.length);async function b(){a();const{data:k}=await u();v.value=k.data}function w(k){Innoclapps.notify(t(k),null,-1,{closed:()=>o(k.id),action:{text:f("core::app.view_record"),onClick:()=>(o(k.id),c.push(k.data.path),!0)}},"static")}return Ut("new-notification",k=>{n(),w(k),v.value=[k,...v.value]}),(k,x)=>{const I=d("Icon"),C=d("IDropdownButton"),S=d("ITextDisplay"),T=d("IText"),E=d("ILink"),$=d("IDropdownItemLabel"),F=d("IDropdownItemDescription"),R=d("IDropdownItem"),B=d("IDropdownSeparator"),V=d("IOverlay"),P=d("IDropdownMenu"),z=d("IDropdown"),H=Ve("i-tooltip");return g(),D("span",gae,[h(s)?ne((g(),D("span",bae,_ae)),[[H,h(r),void 0,{bottom:!0}]]):K("",!0),l(z,{placement:"bottom-end",onShow:b},{default:p(({hide:j})=>[l(C,{variant:"secondary",pill:"","no-caret":""},{default:p(()=>[l(I,{icon:"Bell"})]),_:1}),l(P,{class:"max-w-xs sm:max-w-sm"},{default:p(()=>[_("div",Iae,[l(V,{show:h(i)},{default:p(()=>[_("div",{class:be(["flex items-center px-4 py-3 sm:p-4",{"border-b border-neutral-200 dark:border-neutral-500/30":y.value>0}])},[_("div",wae,[y.value>0?(g(),A(S,{key:0,text:k.$t("core::notifications.notifications")},null,8,["text"])):(g(),A(T,{key:1,class:"font-medium",text:k.$t("core::notifications.no_notifications")},null,8,["text"]))]),ne((g(),D("span",xae,[l(E,{to:{name:"profile",hash:"#notifications"},onClick:j},{default:p(()=>[l(I,{icon:"Cog",class:"size-5"})]),_:2},1032,["onClick"])])),[[H,k.$t("core::settings.settings")]])],2),_("div",kae,[(g(!0),D(fe,null,Ie(v.value,(N,L)=>(g(),D(fe,{key:N.id},[l(R,{class:"rounded-none",title:h(t)(N),to:N.data.path,onClick:j},{default:p(()=>[l($,{class:"truncate"},{default:p(()=>[le(Z(h(t)(N)),1)]),_:2},1024),l(F,{text:h(m)(N.created_at)},null,8,["text"])]),_:2},1032,["title","to","onClick"]),L!==v.value.length-1?(g(),A(B,{key:0})):K("",!0)],64))),128))]),ne(_("div",$ae,[l(E,{to:{name:"notifications"},text:k.$t("core::app.see_all"),onClick:j},null,8,["text","onClick"])],512),[[pe,y.value>0]])]),_:2},1032,["show"])])]),_:2},1024)]),_:1})])}}},Sae={class:"flex items-center justify-between px-3 py-2"},Tae=_("span",{class:"rounded-md bg-neutral-700 px-1.5 text-base text-neutral-100 dark:bg-neutral-600 dark:text-neutral-200"},[_("span",{class:"-mt-0.5 block"},"+")],-1),Eae=["textContent"],Fae={__name:"TheNavbarQuickCreate",setup(e){const t=_t(),{sidebarItems:n}=Ne(),o=O(()=>n.value.filter(s=>s.inQuickCreate)),a=O(()=>o.value.filter(s=>s.keyboardShortcutChar!==null));r();function r(){a.value.forEach(s=>{Innoclapps.addShortcut("+ "+s.keyboardShortcutChar.toLowerCase(),()=>{t.push(s.quickCreateRoute)})})}return(s,i)=>{const u=d("IDropdownButton"),c=d("ITextDark"),m=d("IDropdownSeparator"),f=d("IDropdownItem"),v=d("IDropdownMenu"),y=d("IDropdown");return g(),A(y,{placement:"bottom-end"},{default:p(({hide:b})=>[l(u,{variant:"primary",icon:"PlusSolid",soft:"",pill:"","no-caret":""}),l(v,{class:"w-56"},{default:p(()=>[_("div",Sae,[l(c,{class:"font-medium",text:s.$t("core::app.quick_create")},null,8,["text"]),Tae]),l(m),(g(!0),D(fe,null,Ie(o.value,(w,k)=>ne((g(),A(f,{key:k,icon:w.icon,to:w.quickCreateRoute,onClick:b},{default:p(()=>[le(Z(w.quickCreateName)+" ",1),_("span",{class:"col-start-5 row-start-1 flex justify-self-end rounded-md bg-neutral-100 px-1.5 uppercase text-neutral-500 dark:bg-neutral-700 dark:text-neutral-300",textContent:Z(w.keyboardShortcutChar)},null,8,Eae)]),_:2},1032,["icon","to","onClick"])),[[pe,s.$route.path!==w.quickCreateRoute]])),128))]),_:2},1024)]),_:1})}}},Aae={class:"overflow-hidden rounded-b-lg border-b border-neutral-200 bg-white shadow-lg dark:border-neutral-500/30 dark:bg-neutral-800 sm:border-x"},Rae={class:"sm:grid sm:auto-cols-max sm:grid-flow-col sm:grid-cols-3 sm:gap-x-4"},Dae={class:"border-b border-neutral-200 bg-neutral-50/40 px-0 dark:border-neutral-500/30 dark:bg-neutral-900/50 sm:border-b-0 sm:border-r sm:px-3 sm:py-6"},Oae={class:"flex space-x-2 overflow-x-auto p-3 sm:block sm:space-x-0 sm:overflow-x-visible sm:p-0"},Bae={class:"shrink-0 sm:mb-4"},Nae=["textContent"],Pae={class:"hidden pl-3 pr-0.5 sm:block"},Mae={class:"col-span-2"},Vae={class:"max-h-screen overflow-y-auto px-4 py-3 sm:pl-1 sm:pr-5 lg:h-[34rem] lg:max-h-[40rem] lg:min-h-full"},Lae={class:"py-1"},qae=["textContent"],Uae={__name:"TheNavbarSearchResult",props:{result:{type:Array,required:!0},history:{type:Array,required:!0},visible:{type:Boolean,required:!0}},emits:["update:visible","historyChoosen","historyRemoved"],setup(e,{emit:t}){const n=e,o=t,a=_t(),r=It(),{localizedDateTime:s}=rt(),{floatResourceInDetailMode:i}=ao(),u=jp(),c=M(null),{floatingStyles:m}=kv(u,c,{strategy:"fixed",placement:"bottom-start",whileElementsMounted:xv}),f=M("all"),v=O(()=>n.result.some(w=>w.data.length>0));function y(){n.visible===!0&&o("update:visible",!1)}function b(w,k){k.action==="float"?i({resourceName:w.resourceName,resourceId:w.id}):a.push(w.path)}return J2(c,y,{ignore:["#navSearchInput",".dialog",".__popper"]}),$e(()=>r.path,y),(w,k)=>{const x=d("Icon"),I=d("IButton"),C=d("ITextDark"),S=d("ILink"),T=d("ITextBlockDark"),E=d("ITextSmall"),$=Ve("t");return g(),A(ta,{to:"body"},[l(lr,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100"},{default:p(()=>[ne(_("div",{ref_key:"searchResultsRef",ref:c,class:"z-30 -ml-12 w-full max-w-full sm:max-w-xl md:-ml-0 md:max-w-2xl lg:-ml-px lg:max-w-3xl",style:Nt({...h(m)})},[_("div",Aae,[_("div",Rae,[_("div",Dae,[_("ul",Oae,[_("li",Bae,[l(I,{class:"justify-start gap-x-3",variant:"info",active:f.value==="all",block:"",ghost:"",onClick:k[0]||(k[0]=F=>f.value="all")},{default:p(()=>[l(x,{icon:"Bars3",class:"!size-5"}),le(" "+Z(w.$t("core::resource.all_resources")),1)]),_:1},8,["active"])]),(g(!0),D(fe,null,Ie(e.result,F=>(g(),D("li",{key:F.title,class:"shrink-0 sm:mb-0.5 sm:last:mb-0"},[l(I,{class:"justify-start gap-x-3 truncate",active:f.value===F.title,basic:"",block:"",onClick:R=>f.value=F.title},{default:p(()=>[l(x,{class:"!size-5 text-neutral-500 dark:text-neutral-400",icon:F.icon},null,8,["icon"]),le(" "+Z(F.title)+" ",1),ne(_("span",{class:"ml-auto opacity-70",textContent:Z(F.data.length)},null,8,Nae),[[pe,F.data.length]])]),_:2},1032,["active","onClick"])]))),128))]),ne(_("div",Pae,[ne(l(C,{class:"mt-5 font-medium"},null,512),[[$,"core::app.recent_search_history"]]),_("ul",null,[(g(!0),D(fe,null,Ie(e.history,(F,R)=>(g(),D("li",{key:F,class:"flex items-center justify-between"},[l(S,{class:"block max-w-40 truncate",title:F,text:F,basic:"",onClick:B=>w.$emit("historyChoosen",F)},null,8,["title","text","onClick"]),l(I,{icon:"XSolid",basic:"",small:"",onClick:B=>w.$emit("historyRemoved",R)},null,8,["onClick"])]))),128))])],512),[[pe,e.history.length>0]])]),_("div",Mae,[_("div",Vae,[_("div",Lae,[ne(l(T,{class:"-mb-8 flex min-h-full flex-col items-center text-balance text-center sm:mt-16 sm:pt-2.5"},{default:p(()=>[l(x,{class:"my-4 size-10 text-neutral-400",icon:"MagnifyingGlassSolid"}),le(" "+Z(w.$t("core::app.no_search_results")),1)]),_:1},512),[[pe,!v.value&&f.value==="all"]]),(g(!0),D(fe,null,Ie(e.result,F=>ne((g(),D("div",{key:F.title,class:"pt-2 sm:pt-[1.1rem]"},[ne(l(C,{class:"font-medium"},{default:p(()=>[le(Z(F.title)+" ",1),l(E,{class:"ml-1 inline"},{default:p(()=>[le(" ("+Z(F.data.length)+") ",1)]),_:2},1024)]),_:2},1536),[[pe,F.data.length]]),!F.data.length&&f.value!=="all"?(g(),A(T,{key:0,class:"flex flex-col items-center text-balance pb-6 text-center sm:mt-16"},{default:p(()=>[l(x,{class:"my-4 size-8 text-neutral-400",icon:F.icon},null,8,["icon"]),le(" "+Z(w.$t("core::app.no_search_results")),1)]),_:2},1024)):K("",!0),(g(!0),D(fe,null,Ie(F.data,R=>(g(),D("div",{key:R.path,class:"mt-1"},[l(S,{class:"group relative mb-2 block whitespace-normal rounded-lg border border-neutral-200 bg-neutral-50/60 py-2 pl-5 pr-12 text-base/6 text-neutral-600 ease-in-out hover:border-info-200 hover:bg-info-50 hover:text-info-600 dark:border-neutral-600 dark:bg-neutral-400/10 dark:text-white dark:hover:border-info-400/30 dark:hover:bg-info-800/20 dark:hover:text-info-400 sm:text-sm/6",href:R.path,plain:"",onClick:B=>b(R,F)},{default:p(()=>[_("span",{class:"block truncate font-medium",textContent:Z(R.display_name)},null,8,qae),R.created_at?(g(),A(E,{key:0},{default:p(()=>[le(Z(w.$t("core::app.created_at"))+" "+Z(h(s)(R.created_at)),1)]),_:2},1024)):K("",!0),l(x,{class:"absolute right-4 top-6 size-5 text-neutral-800 dark:text-primary-200 group-hover:dark:text-info-400 sm:size-4",icon:F.action==="float"?"Window":"ChevronRight"},null,8,["icon"])]),_:2},1032,["href","onClick"])]))),128))])),[[pe,F.title===f.value||f.value==="all"]])),128))])])])])])],4),[[pe,e.visible]])]),_:1})])}}},jae={class:"flex w-full"},zae={class:"relative flex w-full"},Hae=_("label",{for:"navSearchInput",class:"sr-only"},"Search",-1),Wae={class:"relative w-full text-neutral-400 focus-within:text-neutral-600 dark:focus-within:text-neutral-200"},Gae={class:"pointer-events-none absolute inset-y-0 left-3 flex items-center sm:left-6"},Kae=["placeholder"],Zae=700,Yae=768,km=240,e1="K",Xae=5,Qae={__name:"TheNavbarSearch",setup(e){const t=Vo(Innoclapps.resources(),"globallySearchable"),n=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent),a=/mac/.test(window.userAgent)?"⌘":"Ctrl",r=xi("globalSearchHistory",[]),s=Pt(t.map(C=>({icon:C.icon,title:C.label,data:[]}))),i=M(null),u=M(null),c=M(""),m=M(!1),f=M(!1),v=O(()=>c.value!==""),y=ga(async function(C){if(!C){m.value=!1;return}f.value=!0;try{const{data:S}=await Innoclapps.request("/search",{params:{q:C}});b(C),s.value=S,m.value=!0}finally{f.value=!1}},Zae);function b(C){let S=r.value.indexOf(C);S===-1?r.value.unshift(C):S>0&&(w(S),r.value.unshift(C)),r.value.length>Xae&&r.value.pop()}function w(C){r.value.splice(C,1)}function k(){const C=ff(i.value.value,getComputedStyle(i.value).font),S=80;if(window.innerWidth<Yae)u.value.style.left=i.value.clientWidth-u.value.offsetWidth+"px";else{let T=km;C+S>km&&(T=C+S),T=Math.min(T,i.value.clientWidth-40),u.value.style.left=T+"px"}}function x(C){C.key==="Escape"&&m.value&&(m.value=!1)}function I(C){if((C.ctrlKey||C.metaKey)&&C.key===e1.toLowerCase()&&(C.preventDefault(),document.activeElement!==i.value)){if(c.value){const S=c.value.length;i.value.setSelectionRange(S,S)}i.value.focus(),m.value=!0}}return $e(c,k,{flush:"post"}),$e(c,y),Je(()=>{window.addEventListener("resize",k),window.addEventListener("keydown",x),n&&document.addEventListener("keydown",I)}),En(()=>{window.removeEventListener("resize",k),window.removeEventListener("keydown",x),n&&window.removeEventListener("keydown",I)}),(C,S)=>{const T=d("Icon"),E=d("IButton"),$=d("ISpinner");return g(),D("div",jae,[_("div",zae,[Hae,_("div",Wae,[_("div",Gae,[l(T,{icon:"MagnifyingGlassSolid",class:be(["size-5",f.value?"animate-pulse":""])},null,8,["class"])]),ne(_("input",{id:"navSearchInput",ref_key:"inputRef",ref:i,"onUpdate:modelValue":S[0]||(S[0]=F=>c.value=F),type:"search",name:"search",autocomplete:"off",class:"peer block h-full w-full appearance-none border-transparent bg-transparent py-2 pl-12 pr-10 text-base text-neutral-900 placeholder-neutral-500 focus:border-transparent focus:placeholder-neutral-400 focus:outline-none focus:ring-0 dark:text-neutral-200 dark:placeholder-neutral-400 dark:focus:placeholder-neutral-500 sm:pl-16 sm:pr-16 sm:text-sm [&::-webkit-search-cancel-button]:hidden",placeholder:C.$t("core::app.search"),onClick:S[1]||(S[1]=F=>m.value=!0),onKeydown:S[2]||(S[2]=fo(F=>h(y)(c.value),["enter"]))},null,40,Kae),[[ua,c.value]]),_("div",{ref_key:"clearButtonWrapper",ref:u,class:"absolute left-0 top-[1.2rem]",style:Nt({left:km})},[l(E,{icon:"XSolid",style:Nt({display:!v.value||f.value?"none":null}),basic:"",small:"",onClick:S[3]||(S[3]=F=>c.value="")},null,8,["style"]),f.value?(g(),A($,{key:0,class:"ml-1 mt-1 size-5 text-primary-500"})):K("",!0)],4),n?Un([n,v.value],()=>(g(),D("div",{key:0,class:"absolute left-56 top-[1.1rem] hidden peer-focus:hidden lg:block"},[ne(_("kbd",{class:"inline-flex items-center rounded border border-neutral-300 px-2 font-sans text-sm font-bold text-neutral-500 dark:border-neutral-500 dark:text-neutral-400"},Z(h(a))+" "+Z(e1),513),[[pe,!v.value]])])),S,4):K("",!0)])]),l(Uae,{visible:m.value,"onUpdate:visible":S[5]||(S[5]=F=>m.value=F),history:h(r),result:s.value,onHistoryChoosen:S[6]||(S[6]=F=>c.value=F),onHistoryRemoved:w},null,8,["visible","history","result"])])}}},Jae=_("span",{class:"sr-only"},"Open sidebar",-1),ere={class:"flex flex-1 justify-between pr-4 sm:pr-6 lg:pr-8"},tre={class:"flex flex-1"},nre={class:"mx-8 hidden max-w-xs py-5 lg:block"},ore=["textContent"],are=_("svg",{viewBox:"0 0 24 24","data-slot":"icon"},[_("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"})],-1),rre={class:"ml-1 hidden md:block lg:ml-2"},lre=_("div",{id:"navbar-actions",class:"hidden lg:flex lg:items-center"},null,-1),sre={__name:"TheNavbar",setup(e){const t=bo(),{sidebarOpen:n}=Ne(),o=O(()=>!!t.value);function a(){localStorage.theme="light",window.updateTheme()}function r(){localStorage.theme="dark",window.updateTheme()}function s(){localStorage.theme="system",window.updateTheme()}return(i,u)=>{const c=d("Icon"),m=d("IButton"),f=d("NavbarSeparator"),v=Ve("i-tooltip");return g(),D("div",{class:"relative z-40 flex shrink-0 bg-white shadow dark:bg-neutral-900/50 dark:shadow-neutral-700/50",style:Nt({height:"var(--navbar-height)"})},[u[0]||(je(-1),u[0]=_("button",{type:"button",class:"border-r border-neutral-200 px-3 text-neutral-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 dark:border-neutral-500/30 dark:text-neutral-200 md:hidden",onClick:y=>n.value=!0},[Jae,l(c,{icon:"Bars3BottomLeft",class:"size-6"})],8,["onClick"]),je(1),u[0]),_("div",ere,[_("div",tre,[ne(_("div",nre,[_("h1",{class:"truncate font-semibold uppercase text-neutral-800 dark:text-neutral-100",textContent:Z(h(t))},null,8,ore)],512),[[pe,o.value]]),ne(_("span",{class:"hidden border-l border-neutral-200 dark:border-neutral-500/30 lg:block",style:Nt({height:"var(--navbar-height)"})},null,4),[[pe,o.value]]),l(Qae)]),u[1]||(je(-1),u[1]=_("div",{class:"ml-3 flex items-center lg:ml-6"},[ne(l(m,{id:"header__moon",icon:"Moon",basic:"",onClick:a},null,512),[[v,i.$t("core::app.theme.switch_light"),void 0,{bottom:!0}]]),ne(l(m,{id:"header__sun",icon:"Sun",basic:"",onClick:s},null,512),[[v,i.$t("core::app.theme.switch_system"),void 0,{bottom:!0}]]),ne((g(),A(m,{id:"header__indeterminate",basic:"",onClick:r},{default:p(()=>[are]),_:1})),[[v,i.$t("core::app.theme.switch_dark"),void 0,{bottom:!0}]]),l(f),_("div",null,[l(Cae)]),_("div",rre,[l(Fae)]),lre]),je(1),u[1])])],4)}}},ire={class:"group mt-8 px-2"},ure={class:"mt-1 space-y-1",role:"group","aria-labelledby":"metrics-headline"},cre=["textContent"],t1={__name:"TheSidebarMetrics",setup(e){const{scriptConfig:t}=Ne(),n=Pt(t("menu.metrics"));let o=null;function a(){Innoclapps.request("/menu/metrics").then(({data:s})=>{n.value=s})}function r(s){if(s.backgroundColorVariant==="warning")return"bg-warning-500";if(s.backgroundColorVariant==="danger")return"bg-danger-500";if(s.backgroundColorVariant==="info")return"bg-info-500";if(s.backgroundColorVariant==="primary")return"bg-primary-500";if(s.backgroundColorVariant==="neutral")return"bg-neutral-500"}return Je(()=>{o=setInterval(a,1e3*60*10)}),En(()=>{clearInterval(o)}),(s,i)=>{const u=d("Icon"),c=d("ILink"),m=Ve("i-tooltip");return g(),D("div",ire,[i[0]||(je(-1),i[0]=ne((g(),D("h3",{id:"metrics-headline",class:"hidden px-3 text-xs font-medium uppercase tracking-wider text-neutral-50 group-hover:inline-flex group-hover:items-center"},[l(u,{icon:"QuestionMarkCircle",class:"mr-2 size-5"}),le(" "+Z(s.$t("core::app.menu.metrics.metrics")),1)])),[[m,s.$t("core::app.menu.metrics.refresh_interval",{interval:10}),void 0,{right:!0}]]),je(1),i[0]),_("div",ure,[(g(!0),D(fe,null,Ie(n.value,(f,v,y,b)=>{const w=[f.count];if(b&&b.key===f.name&&pc(b,w))return b;const k=(g(),A(c,{key:f.name,class:"group flex items-center rounded-md px-3 py-2 text-base font-medium text-neutral-50 hover:bg-neutral-600 sm:text-sm",to:f.route,plain:""},{default:p(()=>[_("span",{"aria-hidden":"true",class:be([f.count>0?r(f):"bg-success-500","mr-4 size-2.5 rounded-full"])},null,2),_("span",{class:"mr-1 truncate",textContent:Z(f.name)},null,8,cre),le(" ("+Z(f.count)+") ",1)]),_:2},1032,["to"]));return k.memo=w,k},i,1),128))])])}}},dre={class:"relative mt-4 inline-block px-3 text-left"},mre={class:"flex w-full items-center justify-between"},fre={class:"flex min-w-0 items-center justify-between space-x-3"},pre={class:"flex min-w-0 flex-1 flex-col"},vre={class:"truncate text-base font-medium text-neutral-800 dark:text-white sm:text-sm"},hre={class:"truncate text-base text-neutral-600 dark:text-neutral-300 sm:text-sm"},gre={class:"px-3 py-2"},bre=["textContent"],n1={__name:"UserProfileDropdown",setup(e){const{currentUser:t,logout:n}=Ne();return(o,a)=>{const r=d("IAvatar"),s=d("Icon"),i=d("IDropdownButton"),u=d("ITextBlockDark"),c=d("ITextDark"),m=d("IDropdownSeparator"),f=d("IDropdownItem"),v=d("IDropdownMenu"),y=d("IDropdown");return g(),D("div",dre,[l(y,{placement:"bottom-start"},{default:p(({hide:b})=>[l(i,{as:"button",class:"group mt-3 w-full rounded-md bg-neutral-200 px-3.5 py-2 text-left text-base font-medium text-neutral-700 ring-1 ring-neutral-200 hover:bg-neutral-300 focus:bg-neutral-300 focus:outline-none dark:bg-neutral-800 dark:ring-neutral-500/30 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 sm:text-sm","no-caret":""},{default:p(()=>[_("span",mre,[_("span",fre,[l(r,{size:"md",src:h(t).avatar_url,title:h(t).name},null,8,["src","title"]),_("span",pre,[_("span",vre,Z(h(t).name),1),_("span",hre,Z(h(t).email),1)])]),l(s,{icon:"Selector",class:"size-5 shrink-0 text-neutral-500 group-hover:text-neutral-600 dark:text-neutral-400 dark:group-hover:text-neutral-300"})])]),_:1}),l(v,{class:"sm:max-w-[200px]"},{default:p(()=>[h(t).teams.length>0?(g(),D(fe,{key:0},[_("div",gre,[l(u,{class:"inline-flex items-center"},{default:p(()=>[l(s,{icon:"Users",class:"mr-1 size-5"}),le(" "+Z(o.$t("users::team.your_teams",h(t).teams.length)),1)]),_:1}),(g(!0),D(fe,null,Ie(h(t).teams,w=>(g(),A(c,{key:w.id,class:"flex font-medium"},{default:p(()=>[_("span",{class:be(["truncate",w.user_id===h(t).id?"text-primary-600 dark:text-primary-400":""]),textContent:Z(w.name)},null,10,bre)]),_:2},1024))),128))]),l(m)],64)):K("",!0),l(f,{icon:"User",to:{name:"profile"},text:o.$t("users::profile.profile"),onClick:b},null,8,["text","onClick"]),l(f,{icon:"Calendar",to:{name:"calendar-sync"},text:o.$t("activities::calendar.calendar_sync"),onClick:b},null,8,["text","onClick"]),l(f,{icon:"RocketLaunch",class:"truncate",to:{name:"oauth-accounts"},text:o.$t("core::oauth.connected_accounts"),onClick:b},null,8,["text","onClick"]),h(t).access_api?(g(),A(f,{key:1,icon:"Globe",to:{name:"personal-access-tokens"},text:o.$t("core::api.access_tokens"),onClick:b},null,8,["text","onClick"])):K("",!0),l(m),l(f,{icon:"ArrowLeftStartOnRectangle",href:"#",text:o.$t("auth.logout"),onClick:w=>(h(n)(),b())},null,8,["text","onClick"])]),_:2},1024)]),_:1})])}}},yre=_("div",{class:"fixed inset-0 bg-neutral-900/75 transition-opacity dark:bg-neutral-700/90"},null,-1),_re={class:"absolute right-0 top-0 -mr-12 pt-2"},Ire=_("span",{class:"sr-only"},"Close sidebar",-1),wre={class:"flex shrink-0 items-center px-4"},xre={key:0,class:"font-bold text-white"},kre=["src"],$re={class:"mt-5 h-0 flex-1 overflow-y-auto"},Cre={id:"sidebar-sm",class:"space-y-0.5 px-2 text-base sm:text-sm"},Sre={class:"hidden bg-neutral-800 dark:bg-neutral-900 md:flex md:shrink-0"},Tre={class:"flex w-56 flex-col"},Ere={class:"flex grow flex-col overflow-y-auto pb-4 pt-5"},Fre={class:"flex shrink-0 items-center px-4"},Are={key:0,class:"font-bold text-white"},Rre=["src"],Dre={class:"mt-6 flex h-0 flex-1 flex-col overflow-y-auto"},Ore={id:"sidebar-lg",class:"flex-1 space-y-1 px-2"},Bre={__name:"TheSidebar",setup(e){const{sidebarItems:t,sidebarOpen:n,setting:o}=Ne(),a=O(()=>o("company_name")),r=o("logo_light");return(s,i)=>{const u=d("Icon"),c=d("ILink"),m=d("IBadge");return g(),D(fe,null,[l(h(ms),{as:"template",show:h(n)},{default:p(()=>[l(h(Di),{as:"div",class:"fixed inset-0 z-50 flex md:hidden",open:h(n),static:"",onClose:i[1]||(i[1]=f=>n.value=!1)},{default:p(()=>[l(h(vo),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[yre]),_:1}),l(h(vo),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:p(()=>[l(h(Oi),{class:"relative flex w-56 max-w-xs flex-col bg-neutral-800 pb-4 pt-5 dark:bg-neutral-900"},{default:p(()=>[l(h(vo),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[_("div",_re,[_("button",{type:"button",class:"ml-1 flex size-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:i[0]||(i[0]=f=>s.setSidebarOpenState(!1))},[Ire,l(u,{icon:"XSolid",class:"size-6 text-white"})])])]),_:1}),_("div",wre,[l(c,{class:"whitespace-normal",to:{name:"dashboard"},plain:""},{default:p(()=>[h(r)?(g(),D("img",{key:1,class:"h-10 max-h-14 w-auto",src:h(r)},null,8,kre)):(g(),D("span",xre,Z(a.value),1))]),_:1})]),l(n1),_("div",$re,[_("nav",Cre,[(g(!0),D(fe,null,Ie(h(t),f=>(g(),A(c,{key:f.id,"active-class":"bg-neutral-700 dark:bg-neutral-800 text-white","inactive-class":"text-neutral-50 hover:bg-neutral-700 dark:hover:bg-neutral-800",class:be(["group relative flex items-center rounded-md px-2 py-2 focus:outline-none","sidebar-sm-item-"+f.id]),to:f.route,plain:""},{default:p(()=>[f.icon?(g(),A(u,{key:0,class:"mr-4 size-6 shrink-0 text-neutral-300",icon:f.icon},null,8,["icon"])):K("",!0),le(" "+Z(f.name)+" ",1),f.badge?(g(),A(m,{key:1,class:"absolute -left-px -top-px dark:bg-neutral-900",variant:f.badgeVariant,text:f.badge,pill:""},null,8,["variant","text"])):K("",!0),f.inQuickCreate?(g(),A(c,{key:2,to:f.quickCreateRoute,class:be(["ml-auto rounded-md hover:bg-neutral-800 dark:hover:bg-neutral-900",s.$route.path===f.quickCreateRoute?"hidden":""]),plain:""},{default:p(()=>[l(u,{icon:"PlusSolid",class:"size-5"})]),_:2},1032,["to","class"])):K("",!0)]),_:2},1032,["class","to"]))),128))])]),l(t1)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["show"]),ne(_("div",Sre,[_("div",Tre,[_("div",Ere,[_("div",Fre,[l(c,{class:"whitespace-normal",to:{name:"dashboard"},plain:""},{default:p(()=>[h(r)?(g(),D("img",{key:1,class:"h-10 max-h-14 w-auto",src:h(r)},null,8,Rre)):(g(),D("span",Are,Z(a.value),1))]),_:1})]),l(n1),_("div",Dre,[_("nav",Ore,[(g(!0),D(fe,null,Ie(h(t),f=>(g(),A(c,{key:f.id,"active-class":"bg-neutral-700 dark:bg-neutral-800 text-white","inactive-class":"text-neutral-50 hover:bg-neutral-700 dark:hover:bg-neutral-800",class:be(["group relative flex items-center rounded-md px-2 py-2 text-sm focus:outline-none","sidebar-lg-item-"+f.id]),to:f.route,plain:""},{default:p(()=>[f.icon?(g(),A(u,{key:0,class:"mr-3 size-6 shrink-0 text-neutral-300",icon:f.icon},null,8,["icon"])):K("",!0),le(" "+Z(f.name)+" ",1),f.badge?(g(),A(m,{key:1,class:"absolute -left-px -top-px dark:bg-neutral-900",variant:f.badgeVariant,text:f.badge,pill:""},null,8,["variant","text"])):K("",!0),f.inQuickCreate?(g(),A(c,{key:2,to:f.quickCreateRoute,class:be(["ml-auto hidden rounded-md hover:bg-neutral-800 dark:hover:bg-neutral-900",s.$route.path!==f.quickCreateRoute?"group-hover:block":""]),plain:""},{default:p(()=>[l(u,{icon:"PlusSolid",class:"size-5"})]),_:2},1032,["to","class"])):K("",!0)]),_:2},1032,["class","to"]))),128))])]),l(t1)])])],512),[[pe,["404","403","not-found"].indexOf(s.$route.name)===-1]])],64)}}};function Kn(e,t){if(!t)return e;let n=t();return Nre(n)?e:n}function Nre(e){return!e||Pre(e).every(t=>{var n,o;return t.type===q1||t.type===Gf&&!((n=t.children)!=null&&n.length)||t.type===fe&&!((o=t.children)!=null&&o.length)})}function Pre(e){return Array.isArray(e)?e:e!=null?[e]:[]}const Mre={__name:"IButtonCopy",props:{text:[String,Number],as:{type:[String,Object],default:Wn},successMessage:{type:String,default:"Text copied to clipboard."}},setup(e){const t=e,{copy:n}=nI({source:gt(t,"text"),legacy:!0});function o(){n(),Innoclapps.info(t.successMessage)}return(a,r)=>(g(),A(Rt(e.as),{basic:e.as===Wn?!0:void 0,icon:e.as===Wn?a.$attrs.icon||"Clipboard":void 0,onClick:o},{default:p(()=>[Se(a.$slots,"default")]),_:3},8,["basic","icon"]))}},ok={__name:"IButtonLink",setup(e){return(t,n)=>(g(),A(Il,{as:"button"},{default:p(()=>[Se(t.$slots,"default")]),_:3}))}},Ev=Wn,ak=ok,Vre={install(e){e.component("IButton",Wn),e.component("IButtonLink",ok),e.component("IButtonCopy",Mre)}};function Lre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"}),_("path",{d:"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"})])}function qre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 2a.75.75 0 0 1 .75.75v8.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.22 3.22V2.75A.75.75 0 0 1 8 2Z","clip-rule":"evenodd"})])}function Ure(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z","clip-rule":"evenodd"})])}function jre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z","clip-rule":"evenodd"})])}function zre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function Hre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M9.78 4.22a.75.75 0 0 1 0 1.06L7.06 8l2.72 2.72a.75.75 0 1 1-1.06 1.06L5.47 8.53a.75.75 0 0 1 0-1.06l3.25-3.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function Wre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M6.22 4.22a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.75.75 0 0 1-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function Gre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"})])}function Kre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"})])}function Zre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M8 2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM8 6.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM9.5 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"})])}function Yre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z","clip-rule":"evenodd"})])}function Xre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"})])}function Qre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})])}function Jre(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm2.78-4.22a.75.75 0 0 1-1.06 0L8 9.06l-1.72 1.72a.75.75 0 1 1-1.06-1.06L6.94 8 5.22 6.28a.75.75 0 0 1 1.06-1.06L8 6.94l1.72-1.72a.75.75 0 1 1 1.06 1.06L9.06 8l1.72 1.72a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"})])}function ele(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"})])}function tle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function nle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function ole(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function ale(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})])}function rle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function lle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function sle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function ile(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function ule(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})])}function cle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})])}function dle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"})])}function mle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function fle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})])}function ple(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25"})])}function vle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5"})])}function hle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function gle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"})])}function ble(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function yle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})])}function _le(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})])}function Ile(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}function wle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0 1 12 12.75Zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 0 1-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 0 0 2.248-2.354M12 12.75a2.25 2.25 0 0 1-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 0 0-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 0 1 .4-2.253M12 8.25a2.25 2.25 0 0 0-2.248 2.146M12 8.25a2.25 2.25 0 0 1 2.248 2.146M8.683 5a6.032 6.032 0 0 1-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0 1 15.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 0 0-.575-1.752M4.921 6a24.048 24.048 0 0 0-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 0 1-5.223 1.082"})])}function xle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function kle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function $le(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function Cle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})])}function Sle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function Tle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function Ele(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})])}function Fle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function Ale(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Rle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function Dle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Ole(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Ble(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}function Nle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function Ple(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Mle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Vle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})])}function Lle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function qle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function Ule(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function jle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"})])}function zle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function Hle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Wle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}function Gle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Kle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Zle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Yle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function Xle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Qle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Jle(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 16.318A4.486 4.486 0 0 0 12.016 15a4.486 4.486 0 0 0-3.198 1.318M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"})])}function ese(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"})])}function tse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function nse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function ose(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function ase(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function rse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 0 1-1.161.886l-.143.048a1.107 1.107 0 0 0-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 0 1-1.652.928l-.679-.906a1.125 1.125 0 0 0-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 0 0-8.862 12.872M12.75 3.031a9 9 0 0 1 6.69 14.036m0 0-.177-.529A2.25 2.25 0 0 0 17.128 15H16.5l-.324-.324a1.453 1.453 0 0 0-2.328.377l-.036.073a1.586 1.586 0 0 1-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 0 1-5.276 3.67m0 0a9 9 0 0 1-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"})])}function lse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function sse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"})])}function ise(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}function use(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function cse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function dse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})])}function mse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}function fse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function pse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function vse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"})])}function hse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})])}function gse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})])}function bse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"})])}function yse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})])}function _se(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function Ise(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function wse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 3.75 18 6m0 0 2.25 2.25M18 6l2.25-2.25M18 6l-2.25 2.25m1.5 13.5c-8.284 0-15-6.716-15-15V4.5A2.25 2.25 0 0 1 4.5 2.25h1.372c.516 0 .966.351 1.091.852l1.106 4.423c.11.44-.054.902-.417 1.173l-1.293.97a1.062 1.062 0 0 0-.38 1.21 12.035 12.035 0 0 0 7.143 7.143c.441.162.928-.004 1.21-.38l.97-1.293a1.125 1.125 0 0 1 1.173-.417l4.423 1.106c.5.125.852.575.852 1.091V19.5a2.25 2.25 0 0 1-2.25 2.25h-2.25Z"})])}function xse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function kse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function $se(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Cse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function Sse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}function Tse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})])}function Ese(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"})])}function Fse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}function Ase(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function Rse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})])}function Dse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Ose(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Bse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})])}function Nse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})])}function Pse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}function Mse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Vse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function Lse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})])}function qse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"})])}function Use(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})])}function jse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}function zse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function Hse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])}function Wse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function Gse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function Kse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function Zse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125Z"})])}function Yse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 3.75H6A2.25 2.25 0 0 0 3.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0 1 20.25 6v1.5m0 9V18A2.25 2.25 0 0 1 18 20.25h-1.5m-9 0H6A2.25 2.25 0 0 1 3.75 18v-1.5M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Xse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"})])}function Qse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}const Jse={components:{EyeIcon:Qle,SparklesIcon:Ose,CheckBadgeIcon:Fle,BanknotesIcon:mle,LockClosedIcon:pse,ClockIcon:Ple,CodeBracketIcon:Vle,AcademicCapIcon:tle,RocketLaunchIcon:Tse,ChatBubbleBottomCenterTextIcon:Sle,ViewfinderCircleIcon:Yse,SunIcon:Lse,MoonIcon:gse,MegaphoneIcon:vse,VolumeOffIcon:Nse,VolumeUpIcon:Bse,EmojiHappyIcon:ese,EmojiSadIcon:Jle,ArrowRightIcon:sle,ArrowLeftIcon:rle,ReplyIcon:ule,CurrencyDollarIcon:Ule,CursorClickIcon:jle,FilterIcon:ose,ShareIcon:Fse,ListBulletIcon:fse,CogIcon:Lle,CollectionIcon:Sse,ColorSwatchIcon:qse,HomeIcon:lse,LightBulbIcon:dse,Bars3CenterLeftIcon:vle,Bars3BottomLeftIcon:fle,MenuAlt3Icon:ple,PhotographIcon:kse,PlusSolidIcon:Qre,MinusSolidIcon:Xre,PlusIcon:$se,MicrophoneIcon:hse,UserGroupIcon:Wse,ViewGridIcon:Pse,XSolidIcon:ele,ArchiveBoxIcon:ole,BugAntIcon:wle,MagnifyingGlassSolidIcon:Yre,ChartSquareBarIcon:Cle,MailIcon:Yle,CalendarIcon:kle,TableCellsIcon:Use,UsersIcon:Kse,UserIcon:Gse,OfficeBuildingIcon:xle,InboxIcon:ise,InboxStackIcon:sse,GiftIcon:ase,KeyIcon:cse,FilmIcon:tse,FolderIcon:nse,CheckCircleIcon:Ale,CheckCircleSolidIcon:jre,ArrowUpSolidIcon:Ure,ArrowDownSolidIcon:qre,CheckIcon:Rle,XCircleSolidIcon:Jre,InformationCircleIcon:use,ChevronUpSolidIcon:Gre,ChevronDownSolidIcon:zre,ChevronRightSolidIcon:Wre,ChevronLeftSolidIcon:Hre,ChevronLeftIcon:Dle,ChevronRightIcon:Ole,ExclamationTriangleIcon:Xle,ShieldExclamationIcon:Rse,ShieldCheckIcon:Ase,SquaresPlusIcon:Mse,QuestionMarkCircleIcon:Cse,SelectorIcon:Ble,BellIcon:ble,ArrowsPointingOutIcon:cle,RefreshIcon:lle,DuplicateIcon:Wle,GlobeIcon:rse,DeviceMobileIcon:zle,PhoneIcon:xse,PhoneXMarkIcon:wse,AdjustmentsVerticalIcon:nle,ArrowLeftStartOnRectangleIcon:ale,WindowIcon:Xse,DocumentDownloadIcon:Hle,EllipsisHorizontalSolidIcon:Kre,EllipsisVerticalSolidIcon:Zre,DocumentAddIcon:Gle,DocumentIcon:Zle,DocumentTextIcon:Kle,DownloadSolidIcon:Lre,ExternalLinkIcon:ile,LinkIcon:mse,TrashIcon:zse,PencilAltIcon:_se,PencilIcon:Ise,StarIcon:Vse,Bars3Icon:hle,TagIcon:jse,ViewColumnsIcon:Zse,SortAscendingIcon:gle,AtSymbolIcon:dle,ShoppingBagIcon:Dse,BriefcaseIcon:Ile,ChatIcon:Ele,ChatAltIcon:Tle,BookOpenIcon:yle,BookmarkIcon:_le,CameraIcon:$le,TruckIcon:Hse,CloudArrowUpIcon:Mle,PaperClipIcon:yse,PaintBrushIcon:bse,ClipboardIcon:Nle,CreditCardIcon:qle,WrenchScrewdriverIcon:Qse,ScaleIcon:Ese},props:{type:{type:String,default:"hero"},icon:{required:!0}},setup(e){function t(){return e.type==="hero"}return{isHeroIcon:t}}};function eie(e,t,n,o,a,r){return o.isHeroIcon?(g(),A(Rt(`${n.icon}Icon`),{key:0,"aria-hidden":"true"})):K("",!0)}const ps=fn(Jse,[["render",eie]]),Lf={primary:{bg:"bg-primary-50 dark:bg-primary-600/30",text:"text-primary-700 dark:text-primary-100",heading:"text-primary-800 dark:text-primary-100",icon:"text-primary-400 dark:text-primary-300"},success:{bg:"bg-success-50 dark:bg-success-600/20",text:"text-success-700 dark:text-success-100",heading:"text-success-800 dark:text-success-100",icon:"text-success-400 dark:text-success-300"},info:{bg:"bg-info-100/60 dark:bg-info-600/30",text:"text-info-700 dark:text-info-100",heading:"text-info-800 dark:text-info-100",icon:"text-info-400 dark:text-info-300"},warning:{bg:"bg-warning-100/60 dark:bg-warning-600/40",text:"text-warning-700 dark:text-warning-100",heading:"text-warning-800 dark:text-warning-100",icon:"text-warning-400 dark:text-warning-300"},danger:{bg:"bg-danger-50 dark:bg-danger-600/40",text:"text-danger-700 dark:text-danger-100",heading:"text-danger-800 dark:text-danger-100",icon:"text-danger-400 dark:text-danger-300"}},tie={warning:"ExclamationTriangle",danger:"XCircleSolid",success:"CheckCircle"};function ic(e,t){return Object.hasOwn(Lf,pt(t))&&Lf[pt(t)][e]||""}const nie=Le({name:"IAlert",inheritAttrs:!1,props:{show:{type:Boolean,default:!0},icon:String,dismissible:Boolean,variant:{default:"info",type:String,validator(e){return Object.keys(Lf).includes(e)}}},emits:["dismissed"],setup(e,{slots:t,attrs:n,emit:o}){st("currentVariant",O(()=>e.variant));const a=M(!1),r=O(()=>e.icon||tie[e.variant]||"InformationCircle"),s=O(()=>a.value?!1:e.show);function i(){a.value=!0,o("dismissed")}return()=>ne(Ae("div",{...n,role:"alert",class:xt(["rounded-md p-4",ic("bg",e.variant)],n.class)},[Ae("div",{class:"flex"},[Ae(ps,{icon:r.value,class:["mt-0.5 size-5 shrink-0",ic("icon",e.variant)]}),Ae("div",{class:"ml-3"},[t.default?t.default({variant:e.variant}):""]),e.dismissible&&Ae("div",{class:"ml-auto pl-3"},[Ae("div",{class:"-my-1.5"},[Ae(Ev,{"aria-labeL":"Close",class:"mt-1",icon:"XSolid",variant:e.variant,small:!0,ghost:!0,onClick:i})])])])]),[[pe,s.value]])}}),oie=Le({name:"IAlertHeading",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{slots:t,attrs:n}){const o=Pe("currentVariant");return()=>Ae("h3",{...n,class:xt(["text-base/6 font-medium sm:text-sm/6",ic("heading",o)],n.class)},Kn(e.text,t.default))}}),aie=Le({name:"IAlertBody",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{slots:t,attrs:n}){const o=Pe("currentVariant");return()=>Ae("div",{...n,class:xt(["text-base/6 sm:text-sm/6",ic("text",o)],n.class)},Kn(e.text,t.default))}}),rie=Le({name:"IAlertActions",setup(e,{slots:t}){return()=>Ae("div",{class:"mt-4"},[Ae("div",{class:"-mx-2.5 -my-1.5 flex space-x-4"},t.default?t.default():[])])}}),lie={install(e){e.component("IAlert",nie),e.component("IAlertBody",aie),e.component("IAlertHeading",oie),e.component("IAlertActions",rie)}},Hr=500,gl=[0,50,100,200,300,400,500,600,700,800,900,950,1e3],o1=[50,100,200,300,400,500,600,700,800,900],Ho={value:"",valueStop:Hr,swatches:[],h:0,s:0,lMin:0,lMax:100,useLightness:!0};function rk(e,t,n){const[o,a,r]=[e,t,n].map(function(s){return s/=255,s<.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)});return 21.26*o+71.52*a+7.22*r}function sie(e){return die(rk(...Object.values(lk(e))),2)}function iie(e,t,n){const o={};for(let s=99;s>=0;s--)o[s]=Math.abs(n-rk(...Object.values(sk(e,t,s))));let a=100,r=100;for(let s=Object.keys(o).length-1;s>=0;s--)o[s]<a&&(r=s,a=o[s]);return r}function lk(e){e.length===6&&!e.startsWith("#")&&(e=`#${e}`);let t="0",n="0",o="0";return e.length===4?(t=`0x${e[1]}${e[1]}`,n=`0x${e[2]}${e[2]}`,o=`0x${e[3]}${e[3]}`):e.length===7&&(t=`0x${e[1]}${e[2]}`,n=`0x${e[3]}${e[4]}`,o=`0x${e[5]}${e[6]}`),{r:t,g:n,b:o}}function uie(e){e.length===6&&!e.startsWith("#")&&(e=`#${e}`);let{r:t,g:n,b:o}=lk(e);t/=255,n/=255,o/=255;const a=Math.min(t,n,o),r=Math.max(t,n,o),s=r-a;let i=0,u=0,c=0;return s===0?i=0:r===t?i=(n-o)/s%6:r===n?i=(o-t)/s+2:i=(t-n)/s+4,i=Math.round(i*60),i<0&&(i+=360),c=(r+a)/2,u=s===0?0:s/(1-Math.abs(2*c-1)),u=+(u*100).toFixed(1),c=+(c*100).toFixed(1),{h:i,s:u,l:c}}function sk(e,t,n){t/=100,n/=100;const o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(e/60%2-1)),r=n-o/2;let s=0,i=0,u=0;return e>=0&&e<60?(s=o,i=a,u=0):e>=60&&e<120?(s=a,i=o,u=0):e>=120&&e<180?(s=0,i=o,u=a):e>=180&&e<240?(s=0,i=a,u=o):e>=240&&e<300?(s=a,i=0,u=o):e>=300&&e<360&&(s=o,i=0,u=a),{r:Math.round((s+r)*255),g:Math.round((i+r)*255),b:Math.round((u+r)*255)}}function cie(e,t,n){let{r:o,g:a,b:r}=sk(e,t,n);return o=o.toString(16),a=a.toString(16),r=r.toString(16),o.length===1&&(o=`0${o}`),a.length===1&&(a=`0${a}`),r.length===1&&(r=`0${r}`),`#${o}${a}${r}`}function die(e,t=0){const n=Math.pow(10,t);return Math.round(e*n)/n}function mie(e,t,n){return"#"+(16777216+(e<<16|t<<8|n<<0)).toString(16).slice(1)}function fie(e=0,t=Hr){const n=gl,o=n.indexOf(t);if(o===-1)throw new Error(`Invalid key value: ${t}`);return n.map(a=>{const r=Math.abs(n.indexOf(a)-o),s=e?Math.round((r+1)*e*(1+r/10)):0;return s>100?{stop:a,tweak:100}:{stop:a,tweak:s}})}function pie(e=0,t=Hr){const n=gl,o=n.indexOf(t);if(o===-1)throw new Error(`Invalid parameter value: ${t}`);return n.map(a=>{const r=Math.abs(n.indexOf(a)-o),s=e?(r+1)*e-e:0;return s<0?{stop:a,tweak:360+s}:s>360?{stop:a,tweak:s-360}:{stop:a,tweak:s}})}function vie(e=0,t=100,n,o=Hr){const a=gl,r=[{stop:0,tweak:t},{stop:o,tweak:n},{stop:1e3,tweak:e}];for(let s=0;s<a.length;s++){const i=a[s];if(i===0||i===1e3||i===o)continue;const u=Math.abs((i-o)/100),c=i<o?Math.abs(a.indexOf(o)-a.indexOf(gl[0]))-1:Math.abs(a.indexOf(o)-a.indexOf(gl[gl.length-1]))-1,m=i<o?t-n:n-e,f=i<o?m/c*u+n:n-m/c*u;r.push({stop:i,tweak:Math.round(f)})}return r.sort((s,i)=>s.stop-i.stop),r}function ik(e){const{value:t,valueStop:n}=e,o=e.useLightness??Ho.useLightness,a=e.h??Ho.h,r=e.s??Ho.s,s=e.lMin??Ho.lMin,i=e.lMax??Ho.lMax,u=pie(a,n),c=fie(r,n),{h:m,s:f,l:v}=uie(t),y=o?v:sie(t),b=vie(s,i,y,n);return u.map(({stop:k},x)=>{const I=m+u[x].tweak,C=f+c[x].tweak,S=o?b[x].tweak:iie(I,C,b[x].tweak),T=cie(I,C,S);return{stop:k,hex:k===n?`#${t.toUpperCase()}`:T.toUpperCase(),h:I,hScale:u[x].tweak,s:C,sScale:c[x].tweak,l:S}})}const uk={__name:"ScopedVarColorPalette",props:{color:{type:String,required:!0},tag:{type:String,default:"span"},name:{type:String,default:"custom"}},setup(e){const t=e,n=[0,950,1e3],o=O(()=>{const a=t.color,r=Object.assign({},Ho,{value:a.substring(1),valueStop:Hr,lMax:Ho.lMax,lMin:Ho.lMin});return ik(r).filter(i=>!n.includes(i.stop)).reduce((i,u)=>(i[u.stop]=Mu(u.hex),i),{})});return(a,r)=>(g(),A(Rt(e.tag),{style:Nt({[`--color-${e.name}-50`]:o.value[50],[`--color-${e.name}-100`]:o.value[100],[`--color-${e.name}-200`]:o.value[200],[`--color-${e.name}-300`]:o.value[300],[`--color-${e.name}-400`]:o.value[400],[`--color-${e.name}-500`]:o.value[500],[`--color-${e.name}-600`]:o.value[600],[`--color-${e.name}-700`]:o.value[700],[`--color-${e.name}-800`]:o.value[800],[`--color-${e.name}-900`]:o.value[900]})},{default:p(()=>[Se(a.$slots,"default")]),_:3},8,["style"]))}},a1={primary:"bg-primary-50 text-primary-700 ring-primary-700/10 dark:bg-primary-400/10 dark:text-primary-400 dark:ring-primary-400/30",neutral:"bg-neutral-100 text-neutral-700 ring-neutral-600/10 dark:bg-neutral-400/10 dark:text-neutral-400 dark:ring-neutral-400/20",success:"bg-success-50 text-success-700 ring-success-600/20 dark:bg-success-500/10 dark:text-success-400 dark:ring-success-500/20",info:"bg-info-50 text-info-700 ring-info-700/10 dark:bg-info-400/10 dark:text-info-400 dark:ring-info-400/30",warning:"bg-warning-50 text-warning-800 ring-warning-600/20 dark:bg-warning-400/10 dark:text-warning-500 dark:ring-warning-400/20",danger:"bg-danger-50 text-danger-700 ring-danger-600/10 dark:bg-danger-400/10 dark:text-danger-400 dark:ring-danger-400/20",custom:"bg-[rgba(var(--color-custom-50))] text-[rgba(var(--color-custom-700))] ring-[rgba(var(--color-custom-600),0.1)] dark:bg-[rgba(var(--color-custom-400),0.1)] dark:text-[rgba(var(--color-custom-300))] dark:ring-[rgba(var(--color-custom-400),0.2)]"},Li=Le({name:"IBadge",inheritAttrs:!1,props:{text:[String,Number],tag:{type:String,default:"span"},pill:Boolean,icon:String,color:String,variant:{default:"neutral",type:String,validator(e){return Object.keys(a1).includes(e)}}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.color?uk:e.tag,{...t,"data-slot":"badge",tag:e.color?e.tag:void 0,color:e.color||void 0,name:e.color?"custom":"",class:xt(["inline-flex items-center gap-x-1.5 px-2 py-1 text-sm font-medium ring-1 ring-inset sm:text-xs",a1[e.color?"custom":e.variant],e.pill?"min-h-6 min-w-6 justify-center rounded-full":"rounded-md"],t.class)},{default:()=>[e.icon?Ae(ps,{class:"size-4",icon:e.icon}):null,Kn(e.text,n.default)]})}}),bd=Le({name:"IBadgeButton",props:{text:[String,Number]},setup(e,{slots:t}){return()=>Ae(Li,{type:"button",tag:"button",class:"hover:opacity-80 disabled:pointer-events-none"},()=>Kn(e.text,t.default))}}),hie={install(e){e.component("IBadge",Li),e.component("IBadgeButton",bd)}},gie={},bie=_("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),yie=_("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1);function _ie(e,t){return t[0]||(je(-1),t[0]=(g(),D("svg",{"data-slot":"icon",class:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-loading":""},[bie,yie])),je(1),t[0])}const Fv=fn(gie,[["render",_ie]]),Iie={class:"absolute inset-0 z-50"},wie=_("div",{class:"absolute inset-0 rounded-lg bg-neutral-100 opacity-60 dark:bg-neutral-700/30"},null,-1),xie={key:0,class:"absolute bottom-1/2 left-1/2 z-20 translate-y-1/2"},ck={__name:"IOverlay",props:{show:Boolean},setup(e){return(t,n)=>(g(),D("div",{class:be({relative:e.show})},[Se(t.$slots,"default"),ne(_("div",Iie,[wie,e.show?(g(),D("div",xie,[Se(t.$slots,"overlay",{},()=>[l(Fv,{class:"size-5 text-primary-500 dark:text-neutral-300"})])])):K("",!0)],512),[[pe,e.show]])],2))}},vs=Le({name:"IText",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"p"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:xt("text-neutral-500 dark:text-neutral-300","text-base/6 sm:text-sm/6",t.class)},Kn(e.text,n.default))}}),kie=Le({name:"ITextBlock",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>Ae(vs,{as:"div",...t,text:e.text},n)}}),yd=Le({name:"ITextDark",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"p"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:xt("text-neutral-800 dark:text-white","text-base/6 sm:text-sm/6",t.class)},Kn(e.text,n.default))}}),$ie=Le({name:"ITextBlockDark",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>Ae(yd,{as:"div",...t,text:e.text},n)}}),dk=Le({name:"ITextDisplay",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"h3"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:xt("text-lg/6 font-semibold text-neutral-900 dark:text-white sm:text-base/6",t.class)},Kn(e.text,n.default))}}),Cie=Le({name:"ITextSmall",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"p"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:xt("text-sm/5 text-neutral-500 dark:text-neutral-300 sm:text-xs/5",t.class)},Kn(e.text,n.default))}}),Sie={install(e){e.component("IText",vs),e.component("ITextBlock",kie),e.component("ITextBlockDark",$ie),e.component("ITextDark",yd),e.component("ITextDisplay",dk),e.component("ITextSmall",Cie)}},Tie=Le({name:"ICard",inheritAttrs:!1,props:{as:{type:String,default:"div"},overlay:Boolean},setup(e,{slots:t,attrs:n}){return()=>Ae(ck,{show:e.overlay},()=>Ae(e.as,{...n,class:xt(["overflow-hidden rounded-lg bg-white shadow-sm dark:bg-neutral-900","border border-neutral-200 dark:border-neutral-500/30","[&>[data-slot=header]]:mb-0 [&>[data-slot=header]]:border-b [&>[data-slot=header]]:border-neutral-200 [&>[data-slot=header]]:px-6 [&>[data-slot=header]]:py-4 [&>[data-slot=header]]:dark:border-neutral-500/30"],n.class)},t.default?t.default():[]))}}),Eie=Le({name:"ICardHeader",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,"data-slot":"header",class:xt(["mb-3 flex flex-wrap items-center gap-x-2 gap-y-3 sm:flex-nowrap","has-[[data-slot=actions]]:justify-between"],n.class)},t.default?t.default():[])}}),Fie=Le({name:"ICardHeading",setup(e,{slots:t}){return()=>Ae(dk,{"data-slot":"heading"},t)}}),Aie=Le({name:"ICardActions",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,"data-slot":"actions",class:xt("flex items-center gap-x-1.5",n.class)},t.default?t.default():[])}}),Rie=Le({name:"ICardBody",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:xt("px-6 py-5",n.class)},t.default?t.default():[])}}),Die=Le({name:"ICardFooter",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:xt(["bg-neutral-50 dark:bg-neutral-800/90","px-6 py-4","border-t border-neutral-200 dark:border-neutral-500/30"],n.class)},t.default?t.default():[])}}),Oie={install(e){e.component("ICard",Tie),e.component("ICardHeader",Eie),e.component("ICardHeading",Fie),e.component("ICardActions",Aie),e.component("ICardBody",Rie),e.component("ICardFooter",Die)}},Bie=["id","value","name","disabled","autocomplete","autofocus","type","tabindex","required","placeholder","pattern","minlength","maxlength","min","max"],_d=Object.assign({inheritAttrs:!1},{__name:"IFormInput",props:{type:{type:String,default:"text"},modelValue:[String,Number],debounce:{type:[Boolean,Number,String],default:!1},max:{type:[String,Number],default:void 0},min:{type:[String,Number],default:void 0},autocomplete:String,maxlength:[String,Number],minlength:[String,Number],pattern:String,placeholder:String,id:String,name:String,disabled:Boolean,autofocus:Boolean,required:Boolean,tabindex:[String,Number]},emits:["update:modelValue","focus","blur","input","keyup","keydown","change"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=M(null),s=M(null);function i(I){const C=I.target.value;a("update:modelValue",C),a("input",C)}let u;$e(()=>o.debounce,I=>{u&&u.cancel&&u.cancel(),I!==!1&&I!==void 0?u=ga(i,I):u=i},{immediate:!0});function c(I){a("blur",I),I.target.value!==s.value&&a("change",I.target.value)}function m(I){a("focus",I),s.value=I.target.value}function f(I){a("keyup",I)}function v(I){a("keydown",I)}function y(){r.value.blur()}function b(){r.value.click()}function w(I){r.value.focus(I)}function k(){r.value.select()}function x(I){r.value.setRangeText(I)}return t({setRangeText:x,select:k,focus:w,click:b,blur:y,inputRef:r}),(I,C)=>(g(),D("input",Ue({id:e.id,ref_key:"inputRef",ref:r,class:h(xt)(["block w-full rounded-lg border-0 text-base/6 text-neutral-900 shadow-sm placeholder:text-neutral-500/80 disabled:bg-neutral-200 dark:bg-neutral-500/10 dark:text-white dark:placeholder-neutral-300/70 dark:disabled:bg-neutral-700/10","ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:ring-neutral-500/30 dark:focus:ring-primary-600","px-3.5 py-2.5 sm:px-3 sm:py-1.5 sm:text-sm/6"],I.$attrs.class),value:e.modelValue,name:e.name,disabled:e.disabled,autocomplete:e.autocomplete,autofocus:e.autofocus,type:e.type,tabindex:e.tabindex,required:e.required,placeholder:e.placeholder,pattern:e.pattern,minlength:e.minlength,maxlength:e.maxlength,min:e.min,max:e.max},{...I.$attrs,class:""},{onBlur:c,onFocus:m,onKeyup:f,onKeydown:v,onInput:C[0]||(C[0]=(...S)=>h(u)&&h(u)(...S))}),null,16,Bie))}});let Nie=0;function Pie(){return++Nie}const Mie={__name:"ISelectClearButton",emits:["clear"],setup(e){return(t,n)=>{const o=d("Icon");return g(),D("button",{type:"button",class:"rounded-md border-0 p-0.5 text-neutral-400 outline-none hover:bg-neutral-50 hover:text-neutral-700 focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 active:bg-neutral-50 active:text-neutral-700 dark:hover:bg-neutral-600/20 dark:hover:text-neutral-300 dark:active:bg-neutral-600/20",title:"Clear Selected","aria-label":"Clear Selected",onClick:n[0]||(n[0]=ot(a=>t.$emit("clear"),["prevent","stop"]))},[l(o,{icon:"XSolid",class:"size-5 shrink-0 sm:size-4"})])}}},Vie={__name:"ISelectOption",props:["label","uid","index","active","isSelected","isSelectable","swatchColor"],emits:["typeAheadPointer","selected"],setup(e){const t=e,n=O(()=>t.isSelected||t.active),o=O(()=>({"bg-neutral-100/80 text-neutral-700 hover:text-neutral-900 dark:bg-neutral-700 dark:text-neutral-100 dark:hover:text-white":n.value,"text-neutral-700 dark:text-neutral-100 dark:hover:text-white":!n.value,"pointer-events-none opacity-50":!t.isSelectable}));return(a,r)=>Un([n.value,e.isSelectable,e.label,e.swatchColor],()=>(g(),D("li",{id:`cs${e.uid}__option-${e.index}`,role:"option",class:"relative","aria-selected":n.value?!0:null},[_("a",{href:"#",class:be(["group block px-4 py-2 text-base/6 focus:outline-none sm:text-sm/6",o.value]),onClick:r[0]||(r[0]=ot(s=>a.$emit("selected"),["prevent"])),onMouseoverPassive:r[1]||(r[1]=ot(s=>e.isSelectable?a.$emit("typeAheadPointer",e.index):null,["self"]))},[(g(),A(Rt(e.swatchColor?h(Li):"span"),{color:e.swatchColor||void 0},{default:p(()=>[Se(a.$slots,"default",{label:e.label},()=>[le(Z(e.label),1)])]),_:3},8,["color"]))],34),Se(a.$slots,"option-inner",{index:e.index})],8,["id","aria-selected"])),r,2)}},Lie=["disabled","title","aria-label"],qie={__name:"ISelectSelectedOptionDeselectButton",props:{option:{required:!0},deselect:{type:Function,required:!0},disabled:Boolean,label:{type:[String,Number],required:!0}},setup(e){return(t,n)=>{const o=d("Icon");return g(),D("button",{type:"button",class:"text-current hover:opacity-60 focus:outline-none",disabled:e.disabled,title:`Deselect ${e.label}`,"aria-label":`Deselect ${e.label}`,onClick:n[0]||(n[0]=ot(a=>e.deselect(e.option),["stop"]))},[l(o,{icon:"XSolid",class:"size-4"})],8,Lie)}}},Uie={__name:"ISelectSelectedOption",props:["option","label","multiple","searching","disabled","deselect","simple"],setup(e){const t=e,n=O(()=>{const{option:o,multiple:a,disabled:r,simple:s,searching:i}=t,u=typeof o=="object";let c=["gap-x-2"],m={class:"",...u&&o.swatch_color&&{color:o.swatch_color}};return a||u&&o.swatch_color?(t.simple||c.push("!py-0.5","!text-sm","-my-px sm:-my-0"),a&&c.push("hover:opacity-90"),u&&!o.swatch_color&&(m.variant="neutral")):c.push("dark:text-white"),(r&&!s||i)&&c.push("opacity-60","dark:opacity-80"),m.class=c.join(" "),m});return(o,a)=>(g(),A(Rt(typeof e.option=="object"&&e.option.swatch_color||e.multiple?h(Li):"span"),en(un(n.value)),{default:p(()=>[Se(o.$slots,"default",{label:e.label},()=>[le(Z(e.label),1)]),e.multiple&&!e.disabled?(g(),A(qie,{key:0,deselect:e.deselect,label:e.label,option:e.option},null,8,["deselect","label","option"])):K("",!0)]),_:3},16))}},jie={modelValue:{},listClass:[String,Array,Object],listWrapperClass:[String,Array,Object],reorderable:Boolean,truncate:[Boolean,String],simple:Boolean,toggleIcon:{type:String,default:"Selector"},loading:Boolean,inputId:String,inputName:String,tabindex:Number,autocomplete:{type:String,default:"off"},placeholder:{type:String,default:""},autoscroll:{type:Boolean,default:!0},disabled:Boolean,clearable:{type:Boolean,default:!0},multiple:Boolean,clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},optionKey:{type:[String,Function],default:"id"},taggable:Boolean,pushTags:Boolean,createOptionProvider:Function,optionComparatorProvider:Function,displayNewOptionsLast:Boolean,options:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!0},debounce:{type:[Boolean,Number,String],default:!1},filterBy:{type:Function,default(e,t,n){return(t||"").toLowerCase().indexOf(n.toLowerCase())>-1}},optionLabel:Function,reduce:{type:Function,default:e=>e},selectable:{type:Function,default:e=>!0}};function zie(e,t,n,o,a){const r=M(-1);let s=null;const i=O(()=>e.value.length);on(()=>{s=h(t)}),$e(r,()=>{h(n)&&f()}),$e(i,y=>{for(let b=0;b<y;b++)if(s(h(e)[b])){r.value=b;break}});function u(){for(let y=r.value-1;y>=0;y--)if(s(h(e)[y])){r.value=y;break}}function c(){for(let y=r.value+1;y<i.value;y++)if(s(h(e)[y])){r.value=y;break}}function m(){const y=h(e)[r.value];y&&a(y)}function f(){var b;const y=((b=o.value)==null?void 0:b.targetDomElement.children[r.value])||!1;if(y){const w=v(),{top:k,bottom:x,height:I}=y.getBoundingClientRect();if(k<w.top)return o.value.targetDomElement.scrollTop=y.offsetTop;if(x>w.bottom)return o.value.targetDomElement.scrollTop=y.offsetTop-(w.height-I)}}function v(){return o.value?o.value.targetDomElement.getBoundingClientRect():{height:0,top:0,bottom:0}}return{typeAheadPointer:r,typeAheadSelect:m,typeAheadDown:c,typeAheadUp:u}}const Hie={class:"flex items-center"},Wie=["id","aria-expanded","aria-owns"],Gie={class:"mr-4 grow"},Kie=["id","name","tabindex","disabled","value","autocomplete","placeholder","readonly","aria-labelledby","aria-controls","aria-activedescendant"],Zie={class:"flex items-center [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-neutral-400 [&>[data-slot=icon]]:sm:size-4"},Yie={key:0,class:"border-b border-neutral-200 px-4 py-3 dark:border-neutral-500/30"},Xie={class:"relative cursor-default select-none px-4 py-2 text-base/6 text-neutral-600 dark:text-neutral-300 sm:text-sm/6"},Qie={class:"absolute right-5 top-2"},Jie={class:"flex items-center space-x-1.5"},eue="body",tue=Object.assign({name:"ICustomSelect",inheritAttrs:!1},{__name:"ISelect",props:jie,emits:["update:modelValue","update:draggable","open","close","cleared","optionSelecting","optionCreated","optionSelected","optionDeselecting","optionDeselected","search","searchBlur","searchFocus"],setup(e,{expose:t,emit:n}){const o=e,a=n;let r=null,s=null;const i=M(null),u=M(null),c=M(null),m=M(null),f=Pie(),v=M(""),y=M(!1),b=M(!1),w=M([]),k=M([]),x=M(o.loading),{floatingStyles:I}=kv(i,c,{placement:"bottom",middleware:[bv(10),Mx()],whileElementsMounted:xv}),{t:C}=Ee();function S(ke=null){return ke==null?x.value=!x.value:x.value=ke}function T(ke){let We=null;return o.createOptionProvider?We=o.createOptionProvider(ke):We=typeof he.value[0]=="object"?{[o.label]:ke}:ke,a("optionCreated",We),We}function E(ke,We){return ke.filter($t=>{let Yt=$($t);return typeof Yt=="number"&&(Yt=Yt.toString()),o.filterBy($t,Yt,We)})}function $(ke){return o.optionLabel?o.optionLabel(ke):typeof ke=="object"?Object.hasOwn(ke,o.label)?ke[o.label]:console.warn(`[select warn]: Label key "option.${o.label}" does not exist in options object ${JSON.stringify(ke)}.`):ke}function F(ke){if(typeof ke!="object")return ke;if(typeof o.optionKey=="function")return o.optionKey(ke);try{return Object.hasOwn(ke,o.optionKey)?ke[o.optionKey]:R(ke)}catch(We){return console.warn("[select warn]: Could not stringify this option to generate unique key. Please provide 'optionKey' prop to return a unique key for each option.",ke,We)}}function R(ke){const We={};return Object.keys(ke).sort().forEach($t=>{We[$t]=ke[$t]}),JSON.stringify(We)}function B(ke){Array.isArray(ke)?k.value=ke.map(We=>W(We)):k.value=W(ke)}function V(ke){a("optionSelecting",ke),ee(ke)||(o.taggable&&!ue(ke)&&(a("optionCreated",ke),oe(ke)),o.multiple&&(ke=de.value.concat(ke)),j(ke),a("optionSelected",ke)),H()}function P(ke){a("optionDeselecting",ke),j(de.value.filter(We=>!G(We,ke))),a("optionDeselected",ke)}function z(){j(o.multiple?[]:null),a("cleared")}function H(ke){o.closeOnSelect&&(U(),m.value.blur()),o.clearSearchOnSelect&&(v.value="")}function j(ke){typeof o.modelValue>"u"&&(k.value=ke),ke!==null&&(Array.isArray(ke)?ke=ke.map(We=>o.reduce(We)):ke=o.reduce(ke)),a("update:modelValue",ke)}function N(){m.value.focus()}function L(){y.value=!0,N()}function U(){y.value=!1,v.value=""}function ee(ke){return de.value.some(We=>G(We,ke))}function G(ke,We){return o.optionComparatorProvider?o.optionComparatorProvider(ke,We,F):F(ke)===F(We)}function W(ke){const We=Yt=>JSON.stringify(o.reduce(Yt))===JSON.stringify(ke),$t=[...o.options,...w.value].filter(We);return $t.length===1?$t[0]:$t.find(Yt=>G(Yt,k.value))||ke}function ae(){if(!m.value.value.length&&de.value&&de.value.length&&o.clearable){let ke=null;o.multiple&&(ke=Array.from(de.value.slice(0,de.value.length-1))),j(ke)}}function ue(ke){return he.value.some(We=>G(We,ke))}function ce(ke){return typeof ke=="object"?ke:{[o.label]:ke}}function oe(ke){w.value.push(ke)}function ie(){v.value.length?v.value="":m.value.blur()}function Q(ke){a("searchBlur")}function se(){a("searchFocus")}const me=O(()=>Y.value?C("core::app.no_search_results"):C("core::app.not_enough_data")),xe=O(()=>typeof o.modelValue>"u"||!!o.reduce),de=O(()=>{let ke=o.modelValue;return xe.value&&(ke=k.value),ke?[].concat(ke):[]}),he=O(()=>o.options.concat(o.pushTags?w.value:[])),Y=O(()=>!!v.value),X=O(()=>y.value&&!x.value),re=O(()=>Re.value&&o.placeholder?o.placeholder:""),we=O(()=>({deselect:P,multiple:o.multiple,disabled:o.disabled,searching:Y.value,simple:o.simple})),Ce=O(()=>ge.value.length),ge=O(()=>{const ke=[].concat(he.value);if(!o.filterable&&!o.taggable)return ke;let We=v.value.length?E(ke,v.value):ke;if(o.taggable&&v.value.length){const $t=T(v.value);ue($t)||(o.displayNewOptionsLast?We.unshift($t):We.push($t))}return We}),Re=O(()=>de.value.length===0),et=O(()=>!o.multiple&&o.clearable&&!y.value&&!Re.value),kt=O(()=>(!o.simple||!(o.simple&&o.disabled))&&o.toggleIcon);typeof o.modelValue<"u"&&xe.value&&B(o.modelValue);const{typeAheadPointer:lt,typeAheadUp:ft,typeAheadDown:zt,typeAheadSelect:De}=zie(ge,gt(o,"selectable"),gt(o,"autoscroll"),u,V);$e(()=>o.options,()=>{o.modelValue&&xe.value&&B(o.modelValue)}),$e(()=>o.modelValue,ke=>{xe.value&&B(ke)}),$e(()=>o.multiple,z),$e(y,ke=>{a(ke?"open":"close")}),$e(()=>o.debounce,ke=>{r&&r(),s&&s.cancel&&s.cancel(),s=ga(We=>a("search",We,S),ke),r=$e(v,s)},{immediate:!0}),$e(()=>o.loading,ke=>{x.value=ke});let _e=null;const Te=M(null);function Xe(){typeof window<"u"&&"ResizeObserver"in window&&i.value&&(_e=new ResizeObserver(([ke])=>{Te.value=ke.borderBoxSize.reduce((We,{inlineSize:$t})=>We+$t,0)}),_e.observe(i.value))}function Me(){_e&&(_e.disconnect(),_e=void 0,Te.value=null)}return Je(()=>{Xe(),J2(c,U,{ignore:[i.value]})}),En(Me),t({focus:N,show:L,hide:U}),(ke,We)=>{const $t=d("Icon"),Yt=d("SortableDraggable");return g(),D(fe,null,[_("div",Ue(ke.$attrs,{ref_key:"reference",ref:i,role:"button",class:["relative w-full text-left text-base/6 sm:text-sm/6",{"ring-2 ring-inset ring-primary-600 dark:ring-primary-600":y.value&&!ke.simple,"rounded-lg px-3.5 py-2.5 shadow-sm ring-1 ring-inset ring-neutral-300 dark:ring-neutral-500/30 sm:px-3 sm:py-1.5":!ke.simple,"bg-white dark:bg-neutral-500/10":!ke.simple&&!ke.disabled,"bg-neutral-200 dark:bg-neutral-700/10":!ke.simple&&ke.disabled,"pointer-events-none":ke.disabled}],onClick:We[6]||(We[6]=Fe=>y.value?U():L())}),[_("div",Hie,[_("div",{id:`cs${h(f)}__combobox`,role:"combobox","aria-label":"Search for an option",class:be(["flex items-center",{"cursor-text":ke.filterable&&!ke.simple,truncate:ke.truncate}]),"aria-expanded":X.value.toString(),"aria-owns":`cs${h(f)}__listbox`},[ne(_("div",{class:be(["space-x-1.5",{"absolute left-auto flex opacity-40":!ke.multiple&&X.value,"max-w-[calc(100%-55px)]":ke.truncate&&!ke.multiple&&X.value,"overflow-hidden":ke.truncate}])},[(g(!0),D(fe,null,Ie(de.value,Fe=>Se(ke.$slots,"selected-option-container",Ue({option:ce(Fe),label:$(Fe),truncate:ke.truncate},we.value),()=>[l(Uie,Ue({option:Fe,label:$(Fe),class:[typeof ke.truncate=="string"?ke.truncate:"",ke.truncate?"block min-w-0 truncate":""]},we.value),{default:p(({label:Ge})=>[Se(ke.$slots,"selected-option",en(un(ce(Fe))),()=>[le(Z(Ge),1)],!0),Se(ke.$slots,"after-selected-option-inner",{option:Fe},void 0,!0)]),_:2},1040,["option","label","class"])],!0)),256))],2),[[pe,!v.value||ke.multiple]])],10,Wie),ne(_("div",Gie,[_("input",{id:ke.inputId,ref_key:"inputSearchRef",ref:m,type:"search","aria-autocomplete":"list",class:be([(X.value||Re.value||Y.value)&&!ke.simple?"w-full":"w-0","cs__search border-0 bg-transparent p-0 text-base leading-none placeholder-neutral-400 focus:border-0 focus:ring-0 dark:text-white dark:placeholder-neutral-400 sm:text-sm"]),name:ke.inputName,tabindex:ke.tabindex,disabled:ke.disabled,value:v.value,autocomplete:ke.autocomplete,placeholder:re.value,readonly:ke.simple,"aria-labelledby":`cs${h(f)}__combobox`,"aria-controls":`cs${h(f)}__listbox`,"aria-activedescendant":X.value&&ge.value[h(lt)]?`cs${h(f)}__option-${h(lt)}`:void 0,onBlur:Q,onFocus:se,onInput:We[0]||(We[0]=Fe=>v.value=Fe.target.value),onCompositionstart:We[1]||(We[1]=Fe=>b.value=!0),onCompositionend:We[2]||(We[2]=Fe=>b.value=!0),onKeydown:[fo(ae,["delete"]),fo(ie,["esc"]),We[3]||(We[3]=fo(ot((...Fe)=>h(ft)&&h(ft)(...Fe),["prevent"]),["up"])),We[4]||(We[4]=fo(ot((...Fe)=>h(zt)&&h(zt)(...Fe),["prevent"]),["down"])),We[5]||(We[5]=fo(ot(Fe=>!b.value&&h(De)(),["prevent"]),["enter"]))]},null,42,Kie)],512),[[pe,!ke.simple]]),_("div",Zie,[ne(l(Mie,{class:"mr-2",disabled:ke.disabled,onClear:z},null,8,["disabled"]),[[pe,et.value]]),x.value?(g(),A(Fv,{key:0,class:"-mt-0.5 mr-2"})):K("",!0),kt.value?(g(),A($t,{key:1,class:"toggle-icon",icon:ke.toggleIcon},null,8,["icon"])):K("",!0)])])],16),(g(),A(ta,{to:eue},[y.value?(g(),D("div",{key:0,ref_key:"dropdownMenuWrapperRef",ref:c,class:be(["__popper overflow-hidden rounded-lg border border-neutral-200 bg-white shadow-lg dark:border-neutral-500/30 dark:bg-neutral-800",ke.listWrapperClass]),style:Nt({zIndex:99999,width:typeof Te.value=="number"?`${Te.value}px`:"",...h(I)})},[ke.simple&&ke.filterable?(g(),D("div",Yie,[l(_d,{modelValue:v.value,"onUpdate:modelValue":We[7]||(We[7]=Fe=>v.value=Fe),type:"search",placeholder:re.value},null,8,["modelValue","placeholder"])])):K("",!0),Se(ke.$slots,"header",{},void 0,!0),(g(),A(Yt,Ue({...ke.$draggable.common,ghostClass:"drag-ghost"},{id:`cs${h(f)}__listbox`,ref_key:"dropdownMenuRef",ref:u,key:`cs${h(f)}__listbox`,handle:".select-option-draggable-handle",tag:"ul",role:"listbox","model-value":ge.value,"item-key":Fe=>F(Fe),class:[ke.listClass,"max-h-80 overflow-y-auto"],"onUpdate:modelValue":We[9]||(We[9]=Fe=>ke.$emit("update:draggable",Fe))}),bn({item:p(({element:Fe,index:Ge})=>[(g(),A(Vie,{key:Ge,uid:h(f),"swatch-color":Fe.swatch_color,index:Ge,active:Ge===h(lt),label:$(Fe),"is-selectable":ke.selectable(Fe),"is-selected":ee(Fe),onSelected:ht=>V(Fe),onTypeAheadPointer:We[8]||(We[8]=ht=>lt.value=ht)},{default:p(({label:ht})=>[Se(ke.$slots,"option",en(un(ce(Fe))),()=>[le(Z(ht),1)],!0)]),"option-inner":p(ht=>[_("span",Qie,[_("div",Jie,[Se(ke.$slots,"option-actions",en(un(ht)),void 0,!0),ke.reorderable&&!Y.value?ne((g(),A($t,{key:0,icon:"Selector",class:"select-option-draggable-handle size-5 cursor-move text-neutral-600 dark:text-neutral-200"},null,512)),[[pe,ge.value.length>1]]):K("",!0)])])]),_:2},1032,["uid","swatch-color","index","active","label","is-selectable","is-selected","onSelected"]))]),_:2},[Ce.value===0&&!ke.loading?{name:"header",fn:p(()=>[_("li",Xie,[Se(ke.$slots,"no-options",en(un({search:v.value,loading:ke.loading,searching:Y.value,text:me.value})),()=>[le(Z(me.value),1)],!0)])]),key:"0"}:void 0]),1040,["id","model-value","item-key","class"])),Se(ke.$slots,"footer",{},void 0,!0)],6)):K("",!0)]))],64)}}}),nue=fn(tue,[["__scopeId","data-v-288fb10d"]]),oue={},aue={class:"fixed inset-0 bg-neutral-900/25 transition-opacity dark:bg-neutral-700/40"};function rue(e,t){return g(),D("div",aue)}const Av=fn(oue,[["render",rue]]);function mk(e,t,n){function o(r){r===h(n)&&e()}function a(r){r===h(n)&&t()}Je(()=>{Ut("_dialog-hide",a),Ut("_dialog-show",o)})}function Rv(e){return O(()=>{let t=h(e);return t==="xs"?"sm:max-w-md":!t||t==="sm"?"sm:max-w-lg":t==="md"?"sm:max-w-2xl":t==="lg"?"sm:max-w-3xl":t==="xl"?"sm:max-w-4xl":"sm:max-w-5xl"})}const lue={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},sue={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},iue={class:"sm:flex sm:items-start"},uue={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},cue=["innerHTML"],due=["textContent"],mue=["innerHTML"],fue=["textContent"],pue={class:"mt-6 sm:flex sm:flex-row-reverse"},vue={__name:"IConfirmationDialog",props:{dialog:{required:!0,type:Object}},setup(e){const t=e,n=Rv(gt(t.dialog,"size")),o=M(!0),a=O(()=>t.dialog.title===!1?null:t.dialog.title),r=O(()=>t.dialog.icon||"ExclamationTriangle"),s=O(()=>t.dialog.confirmVariant||"danger");function i(){o.value=!1}function u(){t.dialog.resolve(),i()}function c(){t.dialog.reject(),i()}return(m,f)=>{const v=d("Icon");return g(),A(h(ms),{as:"template",show:o.value},{default:p(()=>[l(h(Di),{as:"div",class:"dialog relative",open:o.value,static:""},{default:p(()=>[l(h(vo),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[l(Av)]),_:1}),_("div",lue,[_("div",sue,[l(h(vo),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[l(h(Oi),{class:be(["relative w-full transform overflow-hidden rounded-xl bg-white px-4 pb-4 pt-5 text-left shadow-xl ring-1 ring-neutral-600/10 transition-all dark:bg-neutral-900 dark:ring-neutral-500/20 sm:my-8 sm:rounded-2xl sm:p-6",h(n)])},{default:p(()=>[e.dialog.component?(g(),A(Rt(e.dialog.component),{key:0,close:i,cancel:c,dialog:e.dialog},null,8,["dialog"])):(g(),D(fe,{key:1},[_("div",iue,[_("div",{class:be(["mx-auto flex size-12 shrink-0 items-center justify-center rounded-full sm:mx-0 sm:size-10",e.dialog.iconWrapperColorClass?e.dialog.iconWrapperColorClass:"bg-danger-100"])},[l(v,{icon:r.value,class:be(["size-6",e.dialog.iconColorClass?e.dialog.iconColorClass:"text-danger-600"])},null,8,["icon","class"])],2),_("div",uue,[l(h(_w),{class:"mt-2 text-base/6 font-medium text-neutral-700 dark:text-white"},{default:p(()=>[e.dialog.html?(g(),D("span",{key:0,innerHTML:a.value},null,8,cue)):(g(),D("span",{key:1,textContent:Z(a.value)},null,8,due))]),_:1}),e.dialog.message?(g(),D("div",{key:0,class:be(a.value?"mt-2":"")},[l(h(vs),null,{default:p(()=>[e.dialog.html?(g(),D("span",{key:0,innerHTML:e.dialog.message},null,8,mue)):(g(),D("span",{key:1,textContent:Z(e.dialog.message)},null,8,fue))]),_:1})],2)):K("",!0)])]),_("div",pue,[l(Wn,{class:"w-full sm:ml-2 sm:w-auto",variant:s.value,text:e.dialog.confirmText,onClick:u},null,8,["variant","text"]),l(Wn,{class:"mt-2 w-full sm:mt-0 sm:w-auto",text:e.dialog.cancelText,basic:"",onClick:c},null,8,["text"])])],64))]),_:1},8,["class"])]),_:1})])])]),_:1},8,["open"])]),_:1},8,["show"])}}},hue={},gue={type:"button",class:"rounded bg-transparent text-neutral-400 outline-none hover:text-neutral-600 focus:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-300 dark:focus:text-neutral-300"};function bue(e,t){const n=d("Icon");return g(),D("button",gue,[l(n,{icon:"XSolid",class:"size-6 sm:size-5"})])}const fk=fn(hue,[["render",bue]]),pk={form:Boolean,overlay:{type:Boolean,default:!0},visible:Boolean,title:String,subTitle:String,busy:Boolean,okText:[String,Number],okVariant:{type:String,default:"primary"},okDisabled:Boolean,okLoading:Boolean,cancelText:[String,Number],cancelDisabled:Boolean,hideFooter:Boolean,hideHeader:Boolean,hideHeaderClose:Boolean,initialFocus:{type:Object,default:null},staticBackdrop:Boolean,size:{type:String,default:"md",validator:e=>["xs","sm","md","lg","xl","xxl"].includes(e)},id:{type:String,default(){return $o()}}},yue={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},_ue={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Iue={class:"bg-white p-6 dark:bg-neutral-900 sm:p-8"},wue={key:0,class:"mb-6"},xue={key:0,class:"absolute right-5 top-6 -mt-px sm:right-7 sm:top-8 sm:mt-0"},kue={class:"px-6 pb-6 sm:px-8 sm:pb-8"},$ue={class:"flex justify-end space-x-2"},Cue=["id"],Sue={__name:"IModal",props:pk,emits:["hidden","show","shown","ok","update:visible","submit"],setup(e,{expose:t,emit:n}){const o=e,a=n;mk(v,y,gt(o,"id"));const r=Rv(gt(o,"size")),s=M(!1),i=M(!1),u=M(null),c=O(()=>o.busy||o.okDisabled),m=O(()=>o.busy||o.cancelDisabled);$e(()=>o.visible,w=>w?v():y());function f(){u.value.children.length>0||o.staticBackdrop||y()}function v(){a("show"),s.value=!0,a("update:visible",!0),ze(()=>a("shown"))}function y(){i.value||(i.value=!0,s.value=!1,a("update:visible",!1),ze(()=>{Gn(()=>{a("hidden"),i.value=!1},200)}))}function b(w){a("ok",w)}return Je(()=>{o.visible&&v()}),t({hide:y,show:v}),(w,k)=>(g(),A(h(ms),{as:"template",show:s.value},{default:p(()=>[l(h(Di),{as:"div",class:"dialog relative",open:s.value,"initial-focus":w.initialFocus,static:"",onClose:f},{default:p(()=>[l(h(vo),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[ne(l(Av,null,null,512),[[pe,w.overlay]])]),_:1}),_("div",yue,[_("div",_ue,[l(h(vo),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[l(h(Oi),{as:w.form?"form":"div",novalidate:w.form?!0:void 0,class:be([h(r),"relative w-full transform overflow-hidden rounded-2xl bg-white text-left shadow-lg ring-1 ring-neutral-500/10 transition-all dark:bg-neutral-900 dark:ring-neutral-500/20 sm:my-8"]),onSubmit:k[0]||(k[0]=ot(x=>w.$emit("submit",x),["prevent"]))},{default:p(()=>[_("div",Iue,[w.hideHeader?K("",!0):(g(),D("div",wue,[ne(l(ld,{class:"mr-5","sub-title":w.subTitle},{default:p(()=>[Se(w.$slots,"title",{title:w.title},()=>[le(Z(w.title),1)])]),_:3},8,["sub-title"]),[[pe,!w.hideHeader]]),w.hideHeaderClose?K("",!0):(g(),D("div",xue,[l(fk,{onClick:y})]))])),_("div",null,[Se(w.$slots,"default")])]),ne(_("div",kue,[Se(w.$slots,"modal-footer",{cancel:y},()=>[_("div",$ue,[Se(w.$slots,"modal-cancel",{cancel:y,text:w.cancelText||w.$dialog._cancelText},()=>[l(Wn,{disabled:m.value,text:w.cancelText||w.$dialog._cancelText,basic:"",onClick:y},null,8,["disabled","text"])]),Se(w.$slots,"modal-ok",{text:w.okText||w.$dialog._okText},()=>[l(Wn,{type:w.form?"submit":"button",variant:w.okVariant,disabled:c.value,loading:w.okLoading,text:w.okText||w.$dialog._okText,onClick:b},null,8,["type","variant","disabled","loading","text"])])])])],512),[[pe,!w.hideFooter]]),_("div",{id:w.id+"-teleport",ref_key:"teleportRef",ref:u,class:"_child-dialogs"},null,8,Cue)]),_:3},8,["as","novalidate","class"])]),_:3})])])]),_:3},8,["open","initial-focus"])]),_:3},8,["show"]))}},Tue={class:"fixed inset-0 overflow-hidden"},Eue={class:"absolute inset-0 overflow-hidden"},Fue={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"},Aue={class:"flex h-full flex-col divide-y divide-neutral-600/10 border-l border-neutral-500/10 bg-white shadow-xl dark:divide-neutral-500/30 dark:border-neutral-500/30 dark:bg-neutral-900"},Rue={class:"flex min-h-0 flex-1 flex-col overflow-y-scroll py-6"},Due={class:"px-4 sm:px-6"},Oue={class:"flex items-start justify-between"},Bue={class:"ml-3 h-5"},Nue={class:"relative mt-6 flex-1 px-4 sm:px-6"},Pue={class:"shrink-0 px-4 py-4"},Mue={class:"flex shrink-0 flex-wrap justify-end space-x-2 sm:flex-nowrap"},Lue=["id"],que={__name:"ISlideover",props:pk,emits:["hidden","show","shown","ok","update:visible","submit"],setup(e,{expose:t,emit:n}){const o=e,a=n;mk(v,y,gt(o,"id"));const r=Rv(gt(o,"size")),s=M(!1),i=M(!1),u=M(null),c=O(()=>o.busy||o.okDisabled),m=O(()=>o.busy||o.cancelDisabled);$e(()=>o.visible,w=>w?v():y());function f(){u.value.children.length>0||o.staticBackdrop||y()}function v(){a("show"),s.value=!0,a("update:visible",!0),ze(()=>a("shown"))}function y(){i.value||(i.value=!0,s.value=!1,a("update:visible",!1),ze(()=>{Gn(()=>{a("hidden"),i.value=!1},200)}))}function b(w){a("ok",w)}return Je(()=>{o.visible&&v()}),t({hide:y,show:v}),(w,k)=>(g(),A(h(ms),{as:"template",show:s.value},{default:p(()=>[l(h(Di),{as:"div",class:"dialog relative","initial-focus":w.initialFocus,open:s.value,static:"",onClose:f},{default:p(()=>[l(h(vo),{as:"template",enter:"ease-in-out duration-400","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-400","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[ne(l(Av,null,null,512),[[pe,w.overlay]])]),_:1}),_("div",Tue,[_("div",Eue,[_("div",Fue,[l(h(vo),{as:"template",enter:"transform transition ease-in-out duration-400 sm:duration-600","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in-out duration-400 sm:duration-600","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:p(()=>[l(h(Oi),{as:w.form?"form":"div",novalidate:w.form?!0:void 0,class:be(["pointer-events-auto w-screen",h(r)]),onSubmit:k[0]||(k[0]=ot(x=>w.$emit("submit",x),["prevent"]))},{default:p(()=>[_("div",Aue,[_("div",Rue,[ne(_("div",Due,[_("div",Oue,[l(ld,{"sub-title":w.subTitle},{default:p(()=>[Se(w.$slots,"title",{title:w.title},()=>[le(Z(w.title),1)])]),_:3},8,["sub-title"]),_("div",Bue,[w.hideHeaderClose?K("",!0):(g(),A(fk,{key:0,onClick:y}))])])],512),[[pe,!w.hideHeader]]),_("div",Nue,[Se(w.$slots,"default")])]),ne(_("div",Pue,[Se(w.$slots,"modal-footer",{cancel:y},()=>[_("div",Mue,[Se(w.$slots,"modal-cancel",{cancel:y,text:w.cancelText||w.$dialog._cancelText},()=>[l(Wn,{disabled:m.value,text:w.cancelText||w.$dialog._cancelText,basic:"",onClick:y},null,8,["disabled","text"])]),Se(w.$slots,"modal-ok",{text:w.okText||w.$dialog._okText},()=>[l(Wn,{type:w.form?"submit":"button",variant:w.okVariant,disabled:c.value,loading:w.okLoading,text:w.okText||w.$dialog._okText,onClick:b},null,8,["type","variant","disabled","loading","text"])])])])],512),[[pe,!w.hideFooter]])]),_("div",{id:w.id+"-teleport",ref_key:"teleportRef",ref:u,class:"_child-dialogs"},null,8,Lue)]),_:3},8,["as","novalidate","class"])]),_:3})])])])]),_:3},8,["initial-focus","open"])]),_:3},8,["show"]))}},Uue={install(e,t={}){var n,o;e.component("IModal",Sue),e.component("ISlideover",que),e.component("IConfirmationDialog",vue),e.directive("dialog",{beforeMount:function(a,r,s){a._showDialog=()=>At("_dialog-show",r.value),a.addEventListener("click",a._showDialog)},unmounted:function(a,r,s){a.removeEventListener("click",a._showDialog)}}),e.config.globalProperties.$dialog={_okText:((n=t.dialog)==null?void 0:n.labels._okText)||"Ok",_cancelText:((o=t.dialog)==null?void 0:o.labels.cancelText)||"Cancel",hide:a=>At("_dialog-hide",a),show:a=>At("_dialog-show",a)},e.config.globalProperties.confirmationDialog=M(null),e.config.globalProperties.$confirm=function(a){var c,m,f,v;let r=null;const s=document.querySelectorAll(".dialog");let i=null;s.length>0&&(i=(c=s[s.length-1].querySelector("._child-dialogs"))==null?void 0:c.id);let u={title:(m=t.confirmation)==null?void 0:m.labels.title,confirmText:(f=t.confirmation)==null?void 0:f.labels.confirmText,cancelText:(v=t.confirmation)==null?void 0:v.labels.cancelText,_teleport:i?"#"+i:null};return typeof a=="string"?u.message=a:typeof a=="function"?r=a:u=Object.assign(u,a),new Promise((y,b)=>{e.config.globalProperties.confirmationDialog.value=Object.assign({},u,{resolve:w=>{y(w),r&&r(w),e.config.globalProperties.confirmationDialog.value=null},reject:w=>{b(w),e.config.globalProperties.confirmationDialog.value=null}})})}}},jue=Object.assign({inheritAttrs:!1},{__name:"IDropdownMinimal",props:{horizontal:Boolean,placement:{type:String,default:"bottom"}},setup(e){return(t,n)=>{const o=d("Icon"),a=d("IDropdownMenu");return g(),A(h(Dv),{placement:e.placement,offset:10},{default:p(()=>[l(h(hk),Ue({basic:"","no-caret":""},t.$attrs),{default:p(()=>[l(o,{icon:e.horizontal?"EllipsisHorizontalSolid":"EllipsisVerticalSolid"},null,8,["icon"])]),_:1},16),l(a,null,{default:p(()=>[Se(t.$slots,"default")]),_:3})]),_:3},8,["placement"])}}}),zue={class:"inline-flex space-x-1"},Hue={__name:"IExtendedDropdown",props:{text:[String,Number],to:[Object,String],adaptiveWidth:Boolean,placement:{type:String,default:"bottom-end"},arrow:{type:Boolean,default:!0},shift:[Boolean,Number],disabled:Boolean,loading:Boolean,variant:{type:String,default:"primary"},icon:{type:String},type:{type:String,default:"button"}},emits:["click"],setup(e){return(t,n)=>{const o=d("IDropdownButton");return g(),D("div",zue,[l(h(Dv),{placement:e.placement,"adaptive-width":e.adaptiveWidth,shift:e.shift},{default:p(()=>[l(o,{arrow:e.arrow,as:Wn,disabled:e.disabled,basic:""},null,8,["arrow","disabled"]),Se(t.$slots,"default")]),_:3},8,["placement","adaptive-width","shift"]),l(Wn,{variant:e.variant,type:e.type,icon:e.icon,to:e.to,disabled:e.disabled,loading:e.loading,onClick:n[0]||(n[0]=a=>t.$emit("click",a))},{default:p(()=>[Se(t.$slots,"button-content",{},()=>[le(Z(e.text),1)])]),_:3},8,["variant","type","icon","to","disabled","loading"])])}}},vk=jue,Wue=Hue,Dv=Le({name:"IDropdown",inheritAttrs:!1,props:{arrow:{type:Boolean,default:!0},portal:{type:Boolean,default:!0},placement:{type:String,default:"bottom"},zIndex:{type:Number,default:1250},offset:{type:[Number,Function,Object],default:15},flip:{type:[Boolean,Number],default:!0}},emits:["show","hide"],setup(e,{emit:t,attrs:n,slots:o}){return st("arrow",O(()=>e.arrow)),()=>Ae(ZX,null,{default:({close:a})=>[Ae(Qx,{enter:"ease-out duration-100 overflow-y-hidden",enterFrom:"opacity-0 scale-95 overflow-y-hidden",enterTo:"opacity-100 scale-100 overflow-y-hidden",leave:"ease-in duration-75 overflow-y-hidden",leaveFrom:"opacity-100 scale-100 overflow-y-hidden",leaveTo:"opacity-0 scale-95 overflow-y-hidden",placement:e.placement,arrow:e.arrow,offset:e.offset,zIndex:e.zIndex,flip:e.flip,portal:e.portal,...n,onShow:()=>t("show"),onHide:()=>t("hide")},{default:()=>o.default?o.default({hide:a}):[]})]})}}),hk=Le({name:"IDropdownButton",inheritAttrs:!1,props:{as:{type:[String,Object],default:Ev},link:Boolean,noCaret:Boolean,text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>{const o=e.link?ak:e.as;return Ae(YX,{as:o,...t},{default:()=>[Kn(e.text,n.default),e.noCaret?null:Ae(ps,{icon:"ChevronDownSolid",class:"ml-auto size-5 shrink-0 sm:size-4"})]})}}}),Gue=Le({name:"IDropdownMenu",setup(e,{slots:t}){const n=Pe("arrow");return()=>Ae(XX,{class:"overflow-y-auto overflow-x-hidden rounded-lg border border-neutral-200 bg-white shadow-lg outline-none focus:outline-none dark:border-neutral-500/30 dark:bg-neutral-800"},{default:()=>[n?Ae(Wne,{class:"absolute w-5 h-5 rotate-45 border border-neutral-200 bg-white dark:border-neutral-500/30 dark:bg-neutral-800"}):null,Ae("div",{class:"relative rounded-lg bg-white p-1 dark:bg-neutral-800"},t.default?t.default():[])]})}}),gk=Le({name:"IDropdownItem",inheritAttrs:!1,props:{active:Boolean,condensed:Boolean,disabled:Boolean,icon:String,href:String,text:[String,Number],to:[Object,String],confirmable:Boolean,confirmText:{type:[String,Number],default:"Confirm"}},emits:["click","confirmed"],setup(e,{emit:t,attrs:n,slots:o}){const a=M(!1),r=M(null),s=_t(),i=O(()=>e.href?e.href:e.to?s.resolve(e.to).href:"#");function u(m){return e.confirmable?a.value?(t("confirmed",m),a.value=!1,!1):(r.value.style.minWidth=`${r.value.offsetWidth}px`,a.value=!0,r.value.focus(),m.preventDefault(),m.stopPropagation(),!0):!1}function c(m,f){e.disabled||u(m)||(t("click",m),!m.defaultPrevented&&(e.to&&s.push(e.to),e.href||m.preventDefault(),f()))}return()=>Ae(QX,{disabled:e.disabled},{default:({active:m,close:f})=>[Ae("a",{ref:r,...n,href:i.value,class:xt(["grid grid-cols-[auto_1fr_1.5rem_0.5rem_auto] items-center rounded-lg text-left text-base/6 focus:outline-none sm:text-sm/6","[&>[data-slot=icon]]:col-start-1 [&>[data-slot=icon]]:row-start-1 [&>[data-slot=icon]]:mr-2.5 [&>[data-slot=icon]]:size-5 sm:[&>[data-slot=icon]]:mr-2 [&>[data-slot=icon]]:sm:size-4",e.disabled?"pointer-events-none opacity-50":"",e.condensed?"px-2.5 py-1.5 sm:px-2 sm:py-1":"px-3.5 py-2.5 sm:px-3 sm:py-1.5",a.value?"justify-center bg-danger-600 text-white hover:bg-danger-500 focus-visible:outline-danger-500":m||e.active?"bg-neutral-100 text-neutral-800 dark:bg-neutral-900/60 dark:text-white":"text-neutral-800 dark:text-white"],n.class),onClick:v=>c(v,f)},a.value?e.confirmText:[e.icon?Ae(ps,{icon:e.icon}):null,Kn(e.text,o.default)])]})}}),Kue=Le({name:"IDropdownItemLabel",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>Ae("div",{...t,class:xt("col-start-2 row-start-1",t.class)},Kn(e.text,n.default))}}),Zue=Le({name:"IDropdownItemDescription",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{slots:t,attrs:n}){return()=>Ae("p",{...n,"data-slot":"description",class:xt("col-span-2 col-start-2 row-start-2 text-sm/5 text-neutral-500 dark:text-neutral-400 sm:text-xs/5",n.class)},Kn(e.text,t.default))}}),Yue=Le({name:"IDropdownSeparator",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae("div",{...t,class:xt("col-span-full mx-3.5 my-1 h-px border-0 bg-neutral-200 dark:bg-white/10 sm:mx-3",t.class)},n.default?n.default():"")}}),Xue={install(e){e.component("IDropdown",Dv),e.component("IDropdownButton",hk),e.component("IDropdownItemLabel",Kue),e.component("IDropdownMenu",Gue),e.component("IDropdownItem",gk),e.component("IDropdownItemDescription",Zue),e.component("IDropdownSeparator",Yue),e.component("IDropdownMinimal",vk),e.component("IExtendedDropdown",Wue)}},Que={class:"mt-2 text-base/6 text-danger-600 dark:text-danger-500 sm:text-sm/6"},Jue={__name:"IFormError",props:{error:String},setup(e){return(t,n)=>ne((g(),D("p",Que,[Se(t.$slots,"default",{},()=>[le(Z(e.error),1)])],512)),[[pe,e.error]])}},ece={key:0,class:"mr-1 text-base text-danger-600 sm:text-sm",textContent:"*"},qf={__name:"IFormLabel",props:{as:{type:[String,Object],default:"label"},label:String,required:Boolean},setup(e){const t=e,n=O(()=>t.required&&t.label);return(o,a)=>(g(),A(Rt(e.as),{"data-slot":"label",class:"block text-base font-medium text-neutral-900 dark:text-white sm:text-sm"},{default:p(()=>[n.value?(g(),D("span",ece)):K("",!0),Se(o.$slots,"default",{},()=>[le(Z(e.label),1)])]),_:3}))}},bk={__name:"IFormText",props:{text:[String,Number]},setup(e){return(t,n)=>(g(),A(h(vs),null,{default:p(()=>[Se(t.$slots,"default",{},()=>[le(Z(e.text),1)])]),_:3}))}},tce={class:"mb-3"},nce={key:1,class:"flex"},oce={class:"mb-px self-end text-xs text-neutral-600 dark:text-neutral-200"},ace={__name:"IFormGroup",props:{label:String,labelFor:String,description:String,optional:Boolean,required:Boolean},setup(e){return(t,n)=>{const o=Ve("t");return g(),D("div",tce,[Se(t.$slots,"label",{label:e.label,labelFor:e.labelFor},()=>[!e.optional&&e.label?(g(),A(qf,{key:0,class:"mb-1",for:e.labelFor,label:e.label,required:e.required},null,8,["for","label","required"])):e.label?(g(),D("div",nce,[l(qf,{class:"mb-1 grow",for:e.labelFor,label:e.label},null,8,["for","label"]),ne(_("span",oce,null,512),[[o,"core::app.optional"]])])):K("",!0)]),Se(t.$slots,"default"),e.description?(g(),A(bk,{key:0,class:"mt-1",text:e.description},null,8,["text"])):K("",!0)])}}},rce=Object.assign({inheritAttrs:!1},{__name:"IFormInputDropdown",props:{inputId:{type:String,default:"input-dropdown"},width:String,height:String,maxHeight:String,modelValue:String,placeholder:String,items:Array,disabled:Boolean,condensed:Boolean,flip:{type:[Boolean,Number],default:!0},adaptiveWidth:{type:Boolean,default:!0}},emits:["update:modelValue","blur","cleared","show","hide"],setup(e,{emit:t}){const n=e,o=t,a=Pt(n.modelValue);$e(a,c=>{c!==n.modelValue&&o("update:modelValue",c)}),$e(()=>n.modelValue,c=>{c!==a.value&&(a.value=c)});function r(c){Gn(()=>o("blur"),500)}function s(c){a.value=c}function i(c){return c===a.value}function u(){a.value="",o("cleared")}return(c,m)=>{const f=d("IDropdownButton"),v=d("IDropdownItem"),y=d("IDropdownMenu"),b=d("IDropdown");return g(),A(b,{flip:e.flip,"adaptive-width":e.adaptiveWidth,onShow:m[1]||(m[1]=w=>c.$emit("show")),onHide:m[2]||(m[2]=w=>c.$emit("hide"))},{default:p(()=>[l(f,{as:"div",style:Nt({width:e.width}),class:be(["relative",{"pointer-events-none":e.disabled}]),"no-caret":""},{default:p(()=>[l(_d,Ue({id:e.inputId},c.$attrs,{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=w=>a.value=w),autocomplete:"off",class:["pointer-events-none pr-8",{"sm:pointer-events-auto":!e.disabled}],disabled:e.disabled,placeholder:e.placeholder,onBlur:r}),null,16,["id","modelValue","class","disabled","placeholder"]),ne(l(Wn,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:ot(u,["prevent"])},null,512),[[pe,!!a.value]])]),_:1},8,["style","class"]),l(y,{style:Nt([{height:e.height,"overflow-y":e.maxHeight?"scroll":null,"max-height":e.maxHeight||"auto"}])},{default:p(()=>[(g(!0),D(fe,null,Ie(e.items,(w,k)=>(g(),A(v,{key:k,active:i(w),text:w,condensed:e.condensed,onClick:x=>s(w)},null,8,["active","text","condensed","onClick"]))),128))]),_:1},8,["style"])]),_:1},8,["flip","adaptive-width"])}}}),lce={__name:"IFormNumericInput",props:{currency:{type:String,default:""},max:{type:Number,default:Number.MAX_SAFE_INTEGER||9007199254740991},min:{type:Number,default:Number.MIN_SAFE_INTEGER||-9007199254740991},minus:Boolean,placeholder:{type:String,default:""},emptyValue:{type:[Number,String],default:""},precision:{type:Number,default:()=>Number(Innoclapps.scriptConfig("currency.precision"))},separator:{type:String,default:","},thousandSeparator:{default:()=>Innoclapps.scriptConfig("currency.thousands_separator"),type:String},decimalSeparator:{default:()=>Innoclapps.scriptConfig("currency.decimal_mark"),type:String},outputType:{type:String,default:"Number"},modelValue:{type:[Number,String],default:""},disabled:Boolean,currencySymbolPosition:{type:String,default:"prefix"}},emits:["blur","focus","update:modelValue"],setup(e,{emit:t}){const n=e,o=t,a=M(""),r=M(null),s=O(()=>x(a.value)),i=O(()=>x(n.modelValue,".")),u=O(()=>typeof n.decimalSeparator<"u"?n.decimalSeparator:n.separator===","?".":","),c=O(()=>typeof n.thousandSeparator<"u"?n.thousandSeparator:n.separator==="."?".":n.separator==="space"?" ":","),m=O(()=>n.currency?n.currencySymbolPosition==="suffix"?"%v %s":"%s %v":"%v");$e(i,C=>{r.value.inputRef!==document.activeElement&&(a.value=k(C))},{flush:"post"}),$e([()=>n.separator,()=>n.currency,()=>n.precision],()=>{b(i.value),a.value=k(i.value)}),Je(()=>{(i.value||I())&&(b(i.value),a.value=k(i.value),Gn(()=>{b(i.value),a.value=k(i.value)},500))});function f(C){o("blur",C),a.value=k(i.value)}function v(C){o("focus",C),i.value===0?a.value=null:a.value=tc(i.value,{symbol:"",format:"%v",thousand:"",decimal:u.value,precision:Number(n.precision)})}function y(){b(s.value)}function b(C){C>=n.max&&w(n.max),C<=n.min&&w(n.min),C>n.min&&C<n.max&&w(C),!n.minus&&C<0&&(n.min>=0?w(n.min):w(0))}function w(C){const S=ec(C,n.precision),T=n.outputType.toLowerCase()==="string"?S:Number(S);o("update:modelValue",T)}function k(C){return tc(C,{symbol:n.currency,format:m.value,precision:Number(n.precision),decimal:u.value,thousand:c.value})}function x(C,S){const T=typeof C=="string"&&C===""?n.emptyValue:C;return sx(T,S||u.value)}function I(){return i.value===0&&n.modelValue!==""}return(C,S)=>(g(),A(_d,{ref_key:"inputRef",ref:r,modelValue:a.value,"onUpdate:modelValue":[S[0]||(S[0]=T=>a.value=T),y],type:"tel",placeholder:e.placeholder,disabled:e.disabled,onBlur:f,onFocus:v},null,8,["modelValue","placeholder","disabled"]))}},sce=["id","name","autofocus","placeholder","tabindex","disabled","required","multiple","value"],ice=Object.assign({inheritAttrs:!1},{__name:"IFormSelect",props:{modelValue:{},placeholder:String,multiple:Boolean,id:String,name:String,disabled:Boolean,autofocus:Boolean,required:Boolean,tabindex:[String,Number]},emits:["update:modelValue","focus","blur","input","change"],setup(e,{expose:t,emit:n}){const o=n,a=M(null);function r(f){o("update:modelValue",f.target.value),o("change",f.target.value)}function s(f){o("input",f.target.value)}function i(f){o("blur",f)}function u(f){o("focus",f)}function c(){a.value.blur()}function m(f){a.value.focus(f)}return t({blur:c,focus:m}),(f,v)=>(g(),D("select",Ue({id:e.id,ref_key:"selectRef",ref:a,class:h(xt)(["block w-full rounded-lg border-0 text-base/6 text-neutral-900 shadow-sm placeholder:text-neutral-400 disabled:bg-neutral-200 disabled:opacity-100 dark:bg-neutral-500/10 dark:text-white dark:placeholder-neutral-400 dark:disabled:bg-neutral-700/10","ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:ring-neutral-500/30 dark:focus:ring-primary-600","py-2.5 pl-3.5 pr-[calc(theme(spacing[3.5])+24px)] sm:py-1.5 sm:pl-3 sm:pr-[calc(theme(spacing.3)+24px)] sm:text-sm/6","[&>option]:bg-white [&>option]:dark:bg-neutral-800"],f.$attrs.class),name:e.name,autofocus:e.autofocus,placeholder:e.placeholder,tabindex:e.tabindex,disabled:e.disabled,required:e.required,multiple:e.multiple,value:e.modelValue},{...f.$attrs,class:""},{onBlur:i,onFocus:u,onInput:s,onChange:r}),[Se(f.$slots,"default")],16,sce))}}),uce=["id","value","name","tabindex","autocomplete","autofocus","required","placeholder","pattern","wrap","minlength","maxlength","rows","cols","disabled"],cce=Object.assign({inheritAttrs:!1},{__name:"IFormTextarea",props:{rows:[String,Number],cols:[String,Number],wrap:{type:String,default:"soft"},resizeable:{type:Boolean,default:!0},minHeight:{default:60,type:[String,Number]},modelValue:[String,Number],autocomplete:String,maxlength:[String,Number],minlength:[String,Number],pattern:String,placeholder:String,id:String,name:String,disabled:Boolean,autofocus:Boolean,required:Boolean,tabindex:[String,Number]},emits:["update:modelValue","focus","blur","input","change","keyup","keydown"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=M(null),s=M(null);function i(I){I.target.style.height="auto",I.target.style.height=I.target.scrollHeight+"px"}function u(I){o.resizeable&&i(I),a("input",I.target.value),a("update:modelValue",I.target.value)}function c(I){a("focus",I),o.resizeable&&i(I),s.value=I.target.value}function m(I){a("blur",I),I.target.value!==s.value&&a("change",I.target.value)}function f(I){a("keyup",I)}function v(I){a("keydown",I)}function y(){r.value.blur()}function b(){r.value.click()}function w(I){r.value.focus(I)}function k(){r.value.select()}function x(I){r.value.setRangeText(I)}return Je(()=>{o.resizeable&&ze(()=>{Gn(()=>{var I;(I=r.value)==null||I.setAttribute("style","height:"+(r.value.scrollHeight||o.minHeight)+"px;")},400)})}),t({setRangeText:x,select:k,focus:w,click:b,blur:y}),(I,C)=>(g(),D("textarea",Ue({id:e.id,ref_key:"textareaRef",ref:r,value:e.modelValue,name:e.name,tabindex:e.tabindex,autocomplete:e.autocomplete,autofocus:e.autofocus,required:e.required,placeholder:e.placeholder,pattern:e.pattern,wrap:e.wrap,minlength:e.minlength,maxlength:e.maxlength,rows:e.rows,cols:e.cols,disabled:e.disabled,class:h(xt)(["block w-full rounded-lg border-0 text-base/6 text-neutral-900 shadow-sm placeholder:text-neutral-400 disabled:bg-neutral-200 dark:bg-neutral-500/10 dark:text-white dark:placeholder-neutral-400 dark:disabled:bg-neutral-700/10","ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:ring-neutral-500/30 dark:focus:ring-primary-600","px-3.5 py-2.5 sm:px-3 sm:py-1.5 sm:text-sm/6",e.resizeable?"resize-none overflow-y-hidden":""],I.$attrs.class)},{...I.$attrs,class:""},{onBlur:m,onFocus:c,onKeyup:f,onKeydown:v,onInput:u}),null,16,uce))}}),dce={install(e){e.component("IFormGroup",ace),e.component("IFormLabel",qf),e.component("IFormError",Jue),e.component("IFormText",bk),e.component("IFormInput",_d),e.component("IFormNumericInput",lce),e.component("IFormSelect",ice),e.component("IFormTextarea",cce),e.component("IFormInputDropdown",rce)}},mce=Le({name:"IFormCheckbox",inheritAttrs:!1,props:{checked:[Array,String,Boolean,Number],value:{type:[Array,String,Boolean,Number],default:!0},uncheckedValue:{type:[Array,String,Boolean,Number],default:!1}},emits:["update:checked","change"],setup(e,{emit:t,attrs:n}){const o=M(null),a=O(()=>Array.isArray(e.checked)?!!e.checked.find(s=>String(s)===String(e.value))||!1:e.checked==e.value);function r(s){const i=e.checked,u=s.target.checked;let c;Array.isArray(i)?(c=[...i],u?c.push(e.value):c.splice(c.findIndex(m=>String(m)===String(e.value)),1)):c=u?e.value:e.uncheckedValue,t("update:checked",c),t("change",c)}return Je(()=>r1(o.value)),Ll(()=>r1(o.value)),()=>Ae("input",{ref:o,type:"checkbox","data-slot":"control",...n,class:xt(["size-4 rounded-[calc(theme(borderRadius.md)-1px)] bg-transparent","border-neutral-300 dark:border-neutral-500/30","hover:border-neutral-400/70 dark:hover:border-neutral-200/20","focus:ring-0 focus:ring-offset-0 focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2","text-primary-600 dark:text-primary-600","shadow-sm checked:shadow-[inset_0_1px_theme(colors.white/15%)] dark:shadow-none dark:checked:shadow-none","disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"],n.class),checked:a.value,value:e.value,onChange:r})}}),fce=Le({name:"IFormCheckboxGroup",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(ad,{as:"div",...t,"data-slot":"control",class:xt(["space-y-3","has-[[data-slot=description]]:space-y-6 [&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),pce=Le({name:"IFormCheckboxLabel",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Dw,{...t,"data-slot":"label",class:xt("select-none text-base/6 text-neutral-900 dark:text-white sm:text-sm/6",t.class)},{default:()=>Kn(e.text,n.default)})}}),vce=Le({name:"IFormCheckboxField",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(ad,{as:"div",...t,"data-slot":"field",class:xt(["grid grid-cols-[1.125rem_1fr] items-center gap-x-2 gap-y-1 sm:grid-cols-[1rem_1fr]","[&>[data-slot=control]]:col-start-1 [&>[data-slot=control]]:row-start-1 [&>[data-slot=control]]:justify-self-center","has-[[data-slot=control]:disabled]:opacity-70","[&>[data-slot=label]]:col-start-2 [&>[data-slot=label]]:row-start-1 [&>[data-slot=label]]:justify-self-start","[&>[data-slot=description]]:col-start-2 [&>[data-slot=description]]:row-start-2","[&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),hce=Le({name:"IFormCheckboxDescription",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Ow,{as:"p",...t,"data-slot":"description",class:xt("text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6",t.class)},{default:()=>Kn(e.text,n.default)})}}),gce={install(e){e.component("IFormCheckboxGroup",fce),e.component("IFormCheckboxField",vce),e.component("IFormCheckboxLabel",pce),e.component("IFormCheckboxDescription",hce),e.component("IFormCheckbox",mce)}},r1=e=>{const t=e.nextElementSibling||e.previousElementSibling;t&&!e.getAttribute("id")&&t.dataset.slot==="label"&&(t.getAttribute("for")||t.setAttribute("for",t.getAttribute("id")),e.setAttribute("id",t.getAttribute("id")))},bce=Le({name:"IFormRadio",inheritAttrs:!1,props:{modelValue:[String,Boolean,Number],value:{type:[String,Boolean,Number],required:!0},name:{type:String,required:!0}},emits:["update:modelValue","change"],setup(e,{emit:t,attrs:n}){const o=M(null),a=O(()=>r(e.value)==r(e.modelValue));function r(i){return i==="false"?i=!1:i==="true"&&(i=!0),i}function s(i){let u=r(i.target.value);t("update:modelValue",u),t("change",u)}return Je(()=>l1(o.value)),Ll(()=>l1(o.value)),()=>Ae("input",{ref:o,type:"radio","data-slot":"control",...n,class:xt(["size-4 bg-transparent shadow-sm","border-neutral-300 dark:border-neutral-500/30","hover:border-neutral-400/70 dark:hover:border-neutral-200/20","focus:ring-0 focus:ring-offset-0 focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2","text-primary-600 dark:text-primary-600","disabled:pointer-events-none disabled:opacity-50"],n.class),checked:a.value,name:e.name,value:e.value,onChange:s})}}),yce=Le({name:"IFormRadioGroup",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(ds,{...t,"data-slot":"control",class:xt(["space-y-3","has-[[data-slot=description]]:space-y-6 [&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),_ce=Le({name:"IFormRadioLabel",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(cr,{...t,"data-slot":"label",class:xt("select-none text-base/6 text-neutral-900 dark:text-white sm:text-sm/6",t.class)},{default:()=>Kn(e.text,n.default)})}}),Ice=Le({name:"IFormRadioField",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(ds,{...t,"data-slot":"field",class:xt(["grid grid-cols-[1.125rem_1fr] items-center gap-x-2 gap-y-1 sm:grid-cols-[1rem_1fr]","[&>[data-slot=control]]:col-start-1 [&>[data-slot=control]]:row-start-1 [&>[data-slot=control]]:justify-self-center","has-[[data-slot=control]:disabled]:opacity-70","[&>[data-slot=label]]:col-start-2 [&>[data-slot=label]]:row-start-1 [&>[data-slot=label]]:justify-self-start","[&>[data-slot=description]]:col-start-2 [&>[data-slot=description]]:row-start-2","[&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),wce=Le({name:"IFormRadioDescription",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Xs,{as:"p",...t,"data-slot":"description",class:xt("text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6",t.class)},{default:()=>Kn(e.text,n.default)})}}),xce={install(e){e.component("IFormRadioGroup",yce),e.component("IFormRadioField",Ice),e.component("IFormRadioLabel",_ce),e.component("IFormRadioDescription",wce),e.component("IFormRadio",bce)}},l1=e=>{const t=e.nextElementSibling||e.previousElementSibling;t&&!e.getAttribute("id")&&t.dataset.slot==="label"&&(t.getAttribute("for")||t.setAttribute("for",t.getAttribute("id")),e.setAttribute("id",t.getAttribute("id")))},kce=Le({name:"IFormSwitch",inheritAttrs:!1,props:{modelValue:{},disabled:Boolean,value:{default:!0},uncheckedValue:{default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t,attrs:n}){const o=M(!1);return $e(o,a=>{const r=a?e.value:e.uncheckedValue;r!==e.modelValue&&(t("update:modelValue",r),t("change",r))}),$e(()=>e.modelValue,a=>{o.value=a===e.value},{immediate:!0}),()=>Ae(rQ,{...n.class,modelValue:o.value,"onUpdate:modelValue":a=>{o.value=a},"data-slot":"control",disabled:e.disabled,class:xt(["relative inline-flex shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none","h-5 w-9","focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-70",o.value?"bg-primary-600":"bg-neutral-200 dark:bg-neutral-700"],n.class)},{default:()=>[Ae("span",{"aria-hidden":"true",class:[o.value?"translate-x-4 dark:bg-neutral-300":"translate-x-0 dark:bg-neutral-400","pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"]})]})}}),$ce=Le({name:"IFormSwitchGroup",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(ad,{as:"div",...t,"data-slot":"control",class:xt(["space-y-3 [&_[data-slot=label]]:font-normal","has-[[data-slot=description]]:space-y-6 [&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Cce=Le({name:"IFormSwitchLabel",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Dw,{...t,"data-slot":"label",class:xt("select-none text-base/6 text-neutral-900 dark:text-white sm:text-sm/6",t.class)},{default:()=>Kn(e.text,n.default)})}}),Sce=Le({name:"IFormSwitchField",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(ad,{as:"div",...t,"data-slot":"field",class:xt(["grid grid-cols-[1fr_auto] items-center gap-x-4 gap-y-1 sm:grid-cols-[1fr_auto]","has-[[data-slot=control]:disabled]:opacity-70","[&>[data-slot=control]]:col-start-2 [&>[data-slot=control]]:self-center","[&>[data-slot=label]]:col-start-1 [&>[data-slot=label]]:row-start-1 [&>[data-slot=label]]:justify-self-start","[&>[data-slot=description]]:col-start-1 [&>[data-slot=description]]:row-start-2","[&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Tce=Le({name:"IFormSwitchDescription",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Ow,{as:"p",...t,"data-slot":"description",class:xt("text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6",t.class)},{default:()=>Kn(e.text,n.default)})}}),Ece={install(e){e.component("IFormSwitchGroup",$ce),e.component("IFormSwitchField",Sce),e.component("IFormSwitchLabel",Cce),e.component("IFormSwitchDescription",Tce),e.component("IFormSwitch",kce)}},Fce={__name:"IActionMessage",props:{message:String,show:Boolean},setup(e){return(t,n)=>(g(),A(lr,{"leave-active-class":"transition ease-in duration-1000","leave-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[ne(l(h(vs),null,{default:p(()=>[Se(t.$slots,"default",{},()=>[le(Z(e.message),1)])]),_:3},512),[[pe,e.show]])]),_:3}))}},Ace=["src"],Rce={__name:"IAvatar",props:{src:{type:String,required:!0},size:{default:"sm",type:String,validator:e=>["xs","sm","md","lg"].includes(e)}},setup(e){const t={xs:"size-5",sm:"size-6",md:"size-7",lg:"size-8"};return(n,o)=>(g(),D("img",{class:be(["inline-block rounded-full",t[e.size]]),src:e.src},null,10,Ace))}},Dce={class:"inline-flex flex-wrap"},Oce=["onClick"],Bce={class:"relative"},Nce=["name","model-value"],Pce={__name:"IColorSwatch",props:{modelValue:String,name:String,swatches:Array,customable:{default:!0,type:Boolean}},emits:["update:modelValue","input","removeRequested"],setup(e,{emit:t}){const n=e,o=t,a=M(null),r=O(()=>(n.swatches||[]).map(v=>v.toLowerCase())),s=O(()=>n.modelValue?n.modelValue.toLowerCase():null),i=O(()=>n.modelValue?r.value.filter(v=>v===s.value).length===0:!1),u=ga(c,500);function c(v){o("update:modelValue",v),o("input",v)}function m(){c(null),o("removeRequested")}function f(){m(),a.value.click()}return(v,y)=>{const b=d("Icon");return g(),D("div",Dce,[(g(!0),D(fe,null,Ie(r.value,w=>(g(),D("button",{key:w,type:"button",class:"mb-2 mr-1 inline-flex size-8 items-center justify-center rounded",style:Nt({backgroundColor:w}),onClick:k=>w===s.value?m():c(w)},[w===s.value?(g(),A(b,{key:0,icon:"Check",class:"size-5",style:Nt({color:h(jr)(w)})},null,8,["style"])):K("",!0)],12,Oce))),128)),_("div",Bce,[_("input",{ref_key:"customColorInputRef",ref:a,class:"m-0 -ml-0.5 -mt-1 h-[40px] w-[38px] cursor-pointer appearance-none border-0 bg-white p-0 outline-none [&::-webkit-color-swatch]:rounded",type:"color",name:e.name,"model-value":i.value?s.value:"#ffffff",onInput:y[0]||(y[0]=w=>h(u)(w.target.value))},null,40,Nce),i.value?(g(),D("a",{key:0,href:"#",class:"absolute left-1.5 top-1.5 ml-px cursor-pointer",onClick:ot(f,["prevent"])},[l(b,{icon:"Check",class:"size-5",style:Nt({color:h(jr)(s.value)})},null,8,["style"])])):K("",!0)])])}}},Mce={class:"text-center"},Vce=_("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"},null,-1),Lce={class:"mt-6"},qce={__name:"IEmptyState",props:{title:String,description:String,buttonText:String,buttonIcon:{default:"PlusSolid",type:String},to:[Object,String],secondButtonText:String,secondButtonIcon:{default:"PlusSolid",type:String},secondButtonVariant:{default:"secondary",type:String},secondButtonTo:[Object,String]},emits:["click","click2"],setup(e,{emit:t}){const n=t,o=_t();function a(r,s,i){i?o.push(i):n(s,r)}return(r,s)=>(g(),D("div",Mce,[s[0]||(je(-1),s[0]=(g(),D("svg",{class:"mx-auto size-12 text-neutral-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[Vce])),je(1),s[0]),l(h(yd),{class:"mt-2 font-medium"},{default:p(()=>[le(Z(e.title),1)]),_:1}),l(h(vs),{class:"mx-auto max-w-xl"},{default:p(()=>[le(Z(e.description),1)]),_:1}),_("div",Lce,[l(Wn,{variant:"primary",icon:e.buttonIcon,text:e.buttonText,onClick:s[1]||(s[1]=i=>a(i,"click",e.to))},null,8,["icon","text"]),e.secondButtonText?(g(),A(Wn,{key:0,class:"ml-4",variant:e.secondButtonVariant,icon:e.secondButtonIcon,text:e.secondButtonText,onClick:s[2]||(s[2]=i=>a(i,"click2",e.secondButtonTo))},null,8,["variant","icon","text"])):K("",!0)])]))}},Uce=Object.assign({inheritAttrs:!1},{__name:"IIconPicker",props:{modelValue:[String,Number],label:String,disabled:Boolean,valueField:{type:String,default:"icon"},name:String,icons:{type:Array,default:function(){return["Mail","PencilAlt","OfficeBuilding","Phone","Calendar","Collection","Bell","AtSymbol","Briefcase","Chat","CheckCircle","BookOpen","Camera","Truck","Folder","DeviceMobile","Users","CreditCard","Clock","ShieldExclamation","WrenchScrewdriver","ShoppingBag","Film","Gift","Inbox","Key","LockClosed","PaintBrush","Bookmark","AcademicCap","ArchiveBox","BugAnt","CodeBracket"].map(e=>({icon:e,tooltip:null}))}}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=t,a=M(n.modelValue);function r(i){a.value=i,s(i)}function s(i){o("update:modelValue",i),o("change",i)}return $e(()=>n.modelValue,r),(i,u)=>{const c=d("Icon"),m=Ve("i-tooltip");return g(),A(h(ds),{"model-value":e.modelValue,disabled:e.disabled,"onUpdate:modelValue":r},{default:p(()=>[_("div",Ue({class:"flex flex-wrap gap-x-1.5 gap-y-2"},i.$attrs),[(g(!0),D(fe,null,Ie(e.icons,f=>(g(),A(h(od),{key:f[e.valueField],as:"template",name:e.name,value:f[e.valueField]},{default:p(({checked:v})=>[ne((g(),D("div",{class:be(["flex cursor-pointer items-center justify-center rounded-lg text-neutral-700 ring-1 ring-neutral-300 dark:text-white dark:ring-neutral-500/30","px-2.5 py-2",e.disabled?"pointer-events-none opacity-50":"",v?"bg-neutral-50 dark:bg-neutral-500/40":"bg-white hover:bg-neutral-50 dark:bg-neutral-500/10 dark:hover:bg-neutral-500/40"])},[l(h(cr),{as:"span"},{default:p(()=>[l(c,{class:"size-5",icon:f.icon},null,8,["icon"])]),_:2},1024)],2)),[[m,f.tooltip]])]),_:2},1032,["name","value"]))),128))],16)]),_:1},8,["model-value","disabled"])}}}),jce=Le({name:"IPopover",inheritAttrs:!1,props:{portal:{type:Boolean,default:!0},placement:{type:String,default:"bottom"},zIndex:{type:Number,default:1250},offset:{type:[Number,Function,Object],default:10},flip:{type:[Boolean,Number],default:!0}},emits:["show","hide"],setup(e,{attrs:t,slots:n,emit:o}){return()=>Ae(Cw,{as:"template"},{default:({close:a})=>[Ae(Qx,{enter:"ease-out duration-100","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-75","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",offset:e.offset,"z-index":e.zIndex,placement:e.placement,portal:e.portal,flip:e.flip,composable:!0,...t,onShow:()=>o("show"),onHide:()=>o("hide")},{default:()=>n.default?n.default({hide:a}):[]})]})}}),zce=Le({name:"IPopoverButton",inheritAttrs:!1,props:{as:{type:[String,Object],default:Ev},link:Boolean,caret:{type:Boolean},text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>{const o=e.link?ak:e.as;return Ae(jne,null,()=>Ae(tQ,{as:o,...t},{default:()=>[Kn(e.text,n.default),e.caret?Ae(ps,{icon:"ChevronDownSolid",class:"ml-auto size-5 shrink-0 sm:size-4"}):null]}))}}}),Hce=Le({name:"IPopoverHeader",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:xt(["px-5 py-2.5","border-b border-neutral-200 dark:border-neutral-500/30"],n.class)},t.default?t.default():[])}}),Wce=Le({name:"IPopoverHeading",setup(e,{slots:t}){return()=>Ae(yd,{class:"font-medium"},t)}}),Gce=Le({name:"IPopoverPanel",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae(zne,null,{default:()=>[Ae(nQ,{...n,class:xt(["overflow-hidden rounded-lg bg-white shadow-lg outline-none focus:outline-none dark:bg-neutral-800","border border-neutral-200 dark:border-neutral-500/30"],n.class)},t)]})}}),Kce=Le({name:"IPopoverBody",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:xt("px-4 py-3 sm:p-5",n.class)},t.default?t.default():[])}}),Zce=Le({name:"IPopoverFooter",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:xt(["px-5 py-2.5","border-t border-neutral-200 dark:border-neutral-500/30"],n.class)},t.default?t.default():[])}}),Yce={install(e){e.component("IPopover",jce),e.component("IPopoverButton",zce),e.component("IPopoverPanel",Gce),e.component("IPopoverHeader",Hce),e.component("IPopoverHeading",Wce),e.component("IPopoverBody",Kce),e.component("IPopoverFooter",Zce)}},Xce=_("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[_("div",{class:"h-0.5 w-full bg-primary-600"})],-1),Qce=["textContent"],Jce=_("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[_("div",{class:"h-0.5 w-full bg-neutral-200 dark:bg-neutral-700"})],-1),ede=_("span",{class:"h-2.5 w-2.5 rounded-full bg-primary-600","aria-hidden":"true"},null,-1),tde=["textContent"],nde=_("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[_("div",{class:"h-0.5 w-full bg-neutral-200 dark:bg-neutral-700"})],-1),ode=_("span",{class:"h-2.5 w-2.5 rounded-full bg-transparent group-hover:bg-neutral-300","aria-hidden":"true"},null,-1),ade=["textContent"],rde={__name:"IStepCircle",props:{name:String,isLast:Boolean,spacing:{type:String,default:"md",validator(e){return["md","lg","xl"].includes(e)}},status:{type:String,validator(e){return["complete","current",""].includes(e)}}},emits:["click"],setup(e){return(t,n)=>{const o=d("Icon");return g(),D("li",{class:be([e.isLast?"":{"pr-8 sm:pr-20":e.spacing==="md","pr-10 sm:pr-36":e.spacing==="lg","pr-10 sm:pr-44":e.spacing==="xl"},"relative"])},[e.status==="complete"?(g(),D(fe,{key:0},[Xce,_("a",{href:"#",class:"relative flex size-8 items-center justify-center rounded-full bg-primary-600 hover:bg-primary-900",onClick:n[0]||(n[0]=ot(a=>t.$emit("click",a),["prevent"]))},[l(o,{icon:"Check",class:"size-5 text-white"}),_("span",{class:"mt-20 shrink-0 text-sm",textContent:Z(e.name)},null,8,Qce)])],64)):e.status==="current"?(g(),D(fe,{key:1},[Jce,_("a",{href:"#",class:"relative flex size-8 items-center justify-center rounded-full border-2 border-primary-600 bg-neutral-50 dark:bg-neutral-800","aria-current":"step",onClick:n[1]||(n[1]=ot(a=>t.$emit("click",a),["prevent"]))},[ede,_("span",{class:"mt-20 shrink-0 text-sm font-semibold",textContent:Z(e.name)},null,8,tde)])],64)):(g(),D(fe,{key:2},[nde,_("a",{href:"#",class:"group relative flex size-8 items-center justify-center rounded-full border-2 border-neutral-300 bg-neutral-50 hover:border-neutral-400 dark:border-neutral-600 dark:bg-neutral-800",onClick:n[2]||(n[2]=ot(a=>t.$emit("click",a),["prevent"]))},[ode,_("span",{class:"mt-20 shrink-0 text-sm",textContent:Z(e.name)},null,8,ade)])],64))],2)}}},lde={},sde={"aria-label":"Progress"},ide={class:"flex items-center"};function ude(e,t){return g(),D("nav",sde,[_("ol",ide,[Se(e.$slots,"default")])])}const cde=fn(lde,[["render",ude]]),dde={install(e){e.component("IStepCircle",rde),e.component("IStepsCircle",cde)}},mde=["data-state"],fde={__name:"ITab",props:{title:String,disabled:Boolean},emits:["activated"],setup(e,{emit:t}){const n=t,o=M(null),a=eI();return $e(a,r=>{o.value&&o.value.el.isEqualNode(r)&&n("activated")},{flush:"post"}),Je(()=>{o.value.el.getAttribute("aria-selected")==="true"&&n("activated")}),(r,s)=>(g(),A(h(dQ),{ref_key:"tabRef",ref:o,as:"template",disabled:e.disabled},{default:p(({selected:i})=>[_("button",{type:"button","data-slot":"tab","data-state":i?"active":"inactive",class:be(["group inline-flex min-w-full shrink-0 snap-start snap-always items-center justify-center whitespace-nowrap border-b-2 text-base/5 font-semibold focus:outline-none sm:min-w-0 ","data-[state=inactive]:border-transparent data-[state=inactive]:text-neutral-700 data-[state=inactive]:hover:border-neutral-300 data-[state=inactive]:hover:text-neutral-800 data-[state=inactive]:dark:text-neutral-50 data-[state=inactive]:dark:hover:border-neutral-500 data-[state=inactive]:dark:hover:text-neutral-300","data-[state=active]:border-primary-500 data-[state=active]:text-primary-600 data-[state=active]:dark:border-primary-400 data-[state=active]:dark:text-primary-300","disabled:pointer-events-none disabled:opacity-70","px-1 py-4 sm:text-sm/5","[&>[data-slot=icon]]:-ml-0.5 [&>[data-slot=icon]]:mr-1.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:sm:size-4","[&>[data-slot=badge]]:ml-1.5"])},[Se(r.$slots,"default",{},()=>[le(Z(e.title),1)])],8,mde)]),_:3},8,["disabled"]))}},pde={__name:"ITabGroup",props:{modelValue:{type:Number},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue");return(n,o)=>(g(),A(h(uQ),{"selected-index":t.value,onChange:o[0]||(o[0]=a=>t.value=a)},{default:p(()=>[Se(n.$slots,"default")]),_:3},8,["selected-index"]))}},vde={class:"border-b border-neutral-200 dark:border-neutral-500/30","data-slot":"list"},hde={__name:"ITabList",props:{responsive:{type:Boolean,default:!0},fill:Boolean,centered:Boolean},setup(e){let t=null;const n=M(!1),o=M(!0),a=M(null);function r(){return a.value.$el.querySelector("button:first-child")}function s(){return a.value.$el.querySelector("button:last-child")}function i(){a.value.$el.scrollLeft-=r().offsetWidth}function u(){a.value.$el.scrollLeft+=s().offsetWidth}function c(){t.unobserve(r()),t.unobserve(s())}function m(y){y.forEach(b=>{b.target==s()?n.value=b.isIntersecting:b.target==r()&&(o.value=b.isIntersecting,n.value=!1)})}function f(){t=new IntersectionObserver(m,{root:a.value.$el,threshold:1})}function v(){f();let y=r(),b=s();ze(()=>{y&&t.observe(y),b&&t.observe(b)})}return Je(()=>{v()}),En(()=>{c(),t=null}),(y,b)=>{const w=d("Icon");return g(),D("div",vde,[_("div",{class:be(["flex items-center",{"justify-center":e.centered}])},[_("a",{href:"#",class:be(["block px-1 text-neutral-500 dark:text-neutral-200 sm:hidden",{"pointer-events-none opacity-50":o.value}]),onClick:ot(i,["prevent"])},[l(w,{icon:"ChevronLeftSolid",class:"size-6"})],2),l(h(cQ),{ref_key:"listRef",ref:a,class:be(["overlow-y-hidden -mb-px flex grow snap-x snap-mandatory overflow-x-auto scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-300 sm:space-x-4 sm:px-4",{"justify-around":e.fill,"sm:grow-0":!e.fill}])},{default:p(()=>[Se(y.$slots,"default")]),_:3},8,["class"]),_("a",{href:"#",class:be(["block px-1 text-neutral-500 dark:text-neutral-200 sm:hidden",{"pointer-events-none opacity-50":n.value}]),onClick:ot(u,["prevent"])},[l(w,{icon:"ChevronRightSolid",class:"size-6"})],2)],2)])}}},gde={__name:"ITabPanel",props:{lazy:Boolean},emits:["activated"],setup(e,{emit:t}){const n=t,o=eI(),a=M(null);return $e(o,r=>{a.value.$el instanceof Element&&r.dataset.slot&&r.dataset.slot==="tab"&&r.id===a.value.$el.getAttribute("aria-labelledby")&&n("activated")},{flush:"post"}),Je(()=>{!a.value.el.$&&a.value.el.dataset.headlessuiState==="selected"&&n("activated")}),(r,s)=>(g(),A(h(fQ),{ref_key:"panelRef",ref:a,class:"focus:outline-none","data-slot":"panel",unmount:e.lazy},{default:p(()=>[Se(r.$slots,"default")]),_:3},8,["unmount"]))}},bde={__name:"ITabPanels",setup(e){return(t,n)=>(g(),A(h(mQ),{class:"py-2 sm:py-4"},{default:p(()=>[Se(t.$slots,"default")]),_:3}))}},yde={install(e){e.component("ITabGroup",pde),e.component("ITabList",hde),e.component("ITab",fde),e.component("ITabPanels",bde),e.component("ITabPanel",gde)}},_de=Le({name:"ITableOuter",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae("div",{...t,class:xt("overflow-hidden rounded-lg border border-neutral-900/10 bg-white dark:border-white/10 dark:bg-neutral-900",t.class)},n.default?n.default():[])}}),Ide=Le({name:"ITable",inheritAttrs:!1,props:{maxHeight:String,condensed:Boolean,fixedLayout:Boolean,id:String,bleed:Boolean,grid:Boolean},setup(e,{slots:t,attrs:n,expose:o}){const a=M(null),r=M(null);return st("condensed",gt(e,"condensed")),st("bleed",gt(e,"bleed")),st("grid",gt(e,"grid")),o({$el:r,$wrapperEl:a}),()=>Ae("div",{class:"flow-root"},[Ae("div",{ref:a,...n,class:xt("-mx-[--gutter] touch-auto overflow-x-auto whitespace-nowrap",n.class),style:Ue(n.style||{},{maxHeight:e.maxHeight})},[Ae("div",{class:["inline-block w-full min-w-full align-middle",e.bleed?"":"sm:px-[--gutter]"]},[Ae("table",{ref:r,id:e.id,class:["relative w-full min-w-full text-left text-sm/6 text-neutral-700 dark:text-neutral-200",e.fixedLayout?"table-fixed":""]},t.default?t.default():[])])])])}}),wde=Le({name:"ITableRow",setup(e,{slots:t}){return()=>Ae("tr",null,t.default?t.default():[])}}),xde=Le({name:"ITableHead",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae("thead",{...t,class:xt("text-neutral-500 dark:text-neutral-400",t.class)},n.default?n.default():[])}}),kde=Le({name:"ITableHeader",inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){const a=Pe("bleed"),r=Pe("grid"),s=M(null);return o({$el:s}),()=>Ae("th",{ref:s,...t,class:xt(["border-b border-b-neutral-900/10 px-4 py-2 font-medium first:pl-[var(--gutter,theme(spacing.2))] last:pr-[var(--gutter,theme(spacing.2))] dark:border-b-white/10",r.value&&"border-l border-l-neutral-900/5 first:border-l-0 dark:border-l-white/5",!a.value&&"sm:first:pl-2 sm:last:pr-2"],t.class)},n.default?n.default():[])}}),$de=Le({name:"ITableBody",setup(e,{slots:t}){return()=>Ae("tbody",null,t.default?t.default():[])}}),Cde=Le({name:"ITableCell",inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){const a=Pe("condensed"),r=Pe("bleed"),s=Pe("grid"),i=M(null);return o({$el:i}),()=>Ae("td",{ref:i,...t,class:xt(["relative border-b border-neutral-900/5 px-4 first:pl-[var(--gutter,theme(spacing.2))] last:pr-[var(--gutter,theme(spacing.2))] dark:border-white/5",s.value&&"border-l border-l-neutral-900/5 first:border-l-0 dark:border-l-white/5",a.value?"py-1.5":"py-3",!r.value&&"sm:first:pl-2 sm:last:pr-2"],t.class)},n.default?n.default():[])}}),Sde=Le({name:"ITableRowActions",setup(e,{slots:t}){return()=>Ae("div",{class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform"},[Ae(vk,{placement:"left-center",horizontal:!0,small:!0},t)])}}),Tde=Le({name:"ITableRowAction",setup(e,{slots:t}){return()=>Ae(gk,null,t)}}),Ede={install(e){e.component("ITable",Ide),e.component("ITableCell",Cde),e.component("ITableOuter",_de),e.component("ITableRow",wde),e.component("ITableHeader",kde),e.component("ITableBody",$de),e.component("ITableHead",xde),e.component("ITableRowActions",Sde),e.component("ITableRowAction",Tde)}};class Fde{constructor(t){this.el=t.el,this.rootComponent=t.rootComponent,this.props=(t==null?void 0:t.props)??{},this.appContext={...(t==null?void 0:t.appContext)??{}}}mount(){const t=l(this.rootComponent,this.props);Um(t,this.el)}unmount(){Um(null,this.el)}}const Ade=["textContent"],s1={__name:"ITooltip",props:{delay:{type:Number,default:300},offset:{type:Number,default:10}},setup(e){const t=e,n={dark:{wrapper:"border border-neutral-900/90 shadow-lg bg-neutral-900/90",inner:"bg-neutral-900/90",content:"text-white",arrow:"border border-neutral-900/90 bg-neutral-900/90"},light:{wrapper:"border border-neutral-200 dark:border-neutral-500/30 shadow-lg bg-white dark:bg-neutral-800",inner:"bg-white dark:bg-neutral-800",content:"text-neutral-700 dark:text-neutral-200",arrow:"border border-neutral-200 dark:border-neutral-500/30 bg-white dark:bg-neutral-800"}};let o=null;const a=M(null),r=M(),s=M(null),i=M(""),u=M("dark"),c=v=>{const y=v.target.closest("[v-tooltip]");o&&(clearTimeout(o),o=null),s.value!==y&&(s.value=null),y&&(o=setTimeout(()=>{s.value=y},t.delay))},m=async()=>{if(!s.value)return;await ze();const v=s.value.getAttribute("v-tooltip-placement");u.value=s.value.getAttribute("v-tooltip-variant"),i.value=s.value.getAttribute("v-tooltip")||"";const y={placement:v,middleware:[bv(t.offset),Px(),Lx({element:a.value})]};Vx(s.value,r.value,y).then(({x:b,y:w,placement:k,middlewareData:x})=>{var C,S;const I={top:"bottom",right:"left",bottom:"top",left:"right"}[k.split("-")[0]];Object.assign(a.value.style,{...((C=x.arrow)==null?void 0:C.y)&&{top:`${x.arrow.y}px`},...((S=x.arrow)==null?void 0:S.x)&&{left:`${x.arrow.x}px`},right:"",bottom:"",[I]:"-0.25rem"}),Object.assign(r.value.style,{left:`${b}px`,top:`${w}px`})})},f=()=>{s.value=null,i.value=null};return $e(s,async v=>{v?await m():f()}),Je(()=>{document.addEventListener("mouseover",c)}),En(()=>{o&&clearTimeout(o),document.removeEventListener("mouseover",c)}),(v,y)=>(g(),A(ta,{to:"body"},[_("div",{ref_key:"tooltipRef",ref:r,class:"pointer-events-none absolute left-0 top-0 z-[1300]"},[l(lr,{"enter-active-class":"duration-200 ease","enter-from-class":"transform opacity-0","leave-to-class":"transform opacity-0"},{default:p(()=>[s.value?(g(),D("div",{key:0,class:be(["overflow-hidden rounded-md",n[u.value].wrapper])},[_("div",{ref_key:"arrowRef",ref:a,class:be(["absolute size-2 rotate-45",n[u.value].arrow])},null,2),_("div",{class:be(["relative max-w-sm",n[u.value].inner])},[_("div",{class:be(["px-4 py-1.5 text-center text-base/5 sm:text-sm/5",n[u.value].content]),textContent:Z(i.value)},null,10,Ade)],2)],2)):K("",!0)]),_:1})],512)]))}},Rde=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"],Dde=["dark","light"];function i1(e,t){return e.reduce((n,o)=>(t[o]&&(n=o),n),"")}const u1=(e,t)=>{const{modifiers:n,value:o}=t,a=i1(Rde,n)||"top",r=i1(Dde,n)||"dark";if(!o){yk(e);return}e.setAttribute("v-tooltip",o),e.getAttribute("v-tooltip-placement")||e.setAttribute("v-tooltip-placement",a),e.getAttribute("v-tooltip-variant")||e.setAttribute("v-tooltip-variant",r)};function yk(e){e.removeAttribute("v-tooltip"),e.removeAttribute("v-tooltip-placement"),e.removeAttribute("v-tooltip-variant")}const Ode={beforeMount:(e,t)=>u1(e,t),updated:(e,t)=>u1(e,t),beforeUnmount:e=>yk(e)},Bde={install(e,t={}){e.component("ITooltip",s1),e.directive("i-tooltip",Ode),new Fde({el:document.body,rootComponent:s1,props:t,appContext:e._context}).mount()}},Nde={},Pde={class:"space-y-1","aria-label":"Sidebar"};function Mde(e,t){return g(),D("nav",Pde,[Se(e.$slots,"default")])}const Vde=fn(Nde,[["render",Mde]]),Lde={__name:"IVerticalNavigationCollapsible",props:{fixed:Boolean},setup(e){const t=e,n=M(null),o=M(t.fixed===!0),a=M(!1),r=M(!1);function s(u){u.target.tagName==="A"&&n.value.querySelector("a:first-child")!==u.target||t.fixed||(o.value=!o.value)}async function i(){if(await ze(),!n.value)return!1;a.value=n.value.querySelectorAll("a").length>1,r.value=n.value.querySelectorAll(".active").length>0}return $e(r,u=>{o.value=u}),Ll(i),Je(i),(u,c)=>{const m=d("Icon");return g(),D("div",{ref_key:"elRef",ref:n,class:"relative cursor-pointer",onClick:s},[_("div",{class:be(["[&>:not(:first-child)]:ml-6",o.value||e.fixed?"[&>:not(:first-child)]:block":"[&>:not(:first-child)]:hidden"])},[Se(u.$slots,"default")],2),!e.fixed&&a.value?(g(),A(m,{key:0,icon:"ChevronDownSolid",class:"pointer-events-none absolute right-4 top-2.5 size-5 sm:size-4"})):K("",!0)],512)}}},qde=Object.assign({name:"IVerticalNavigationItem"},{__name:"IVerticalNavigationItem",props:{to:[String,Object],active:Boolean,href:{type:String,default:"#"}},setup(e){const t=e,n=_t(),o=It(),a=O(()=>{if(t.active)return!0;if(!t.to)return!1;const{path:s}=n.resolve(t.to);return o.path==s||o.path.startsWith(s)});function r(){if(!t.to)return;const{path:s}=n.resolve(t.to);o.path!=s&&n.push(t.to)}return(s,i)=>(g(),A(pd,{"data-slot":"control",href:e.href,class:be(["group flex items-center rounded-lg text-base font-semibold focus:outline-none",a.value?"active bg-neutral-200/60 text-primary-600 dark:bg-neutral-900/40 dark:text-primary-400":"text-neutral-700 hover:bg-neutral-200/50 hover:text-primary-600 dark:text-white dark:hover:dark:bg-neutral-900/40 dark:hover:text-primary-400","px-3 py-2 sm:text-sm","[&>[data-slot=icon]]:-ml-1 [&>[data-slot=icon]]:mr-3 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:sm:size-4","[&>[data-slot=badge]]:-my-0.5 [&>[data-slot=badge]]:ml-auto"]),plain:"",onClick:r},{default:p(()=>[Se(s.$slots,"default")]),_:3},8,["href","class"]))}}),Ude={install(e){e.component("IVerticalNavigation",Vde),e.component("IVerticalNavigationCollapsible",Lde),e.component("IVerticalNavigationItem",qde)}},jde={class:"grid grid-cols-3 gap-4"},zde=["textContent"],Hde={key:0},Wde={__name:"BaseDetailField",props:["field","resource","resourceName","resourceId","isFloating","editAction"],emits:["updated"],setup(e){const t=e,n=O(()=>!Gt(t.field.value)),o=O(()=>t.field.isRequired&&!n.value);return(a,r)=>{const s=d("FieldInlineEdit");return g(),D("div",{class:be(["group relative rounded-md px-3 py-2",o.value?"bg-danger-100 dark:bg-danger-600/40":"hover:bg-neutral-50 dark:hover:bg-neutral-800/60"])},[l(s,{class:"hidden group-hover:block",field:e.field,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"edit-action":e.editAction,"is-floating":e.isFloating,onUpdated:r[0]||(r[0]=i=>a.$emit("updated",i))},bn({_:2},[Ie(a.$slots,(i,u)=>({name:u,fn:p(c=>[Se(a.$slots,u,en(un(c)))])}))]),1032,["field","resource","resource-name","resource-id","edit-action","is-floating"]),_("div",jde,[_("div",{class:be(["col-span-1 max-w-full justify-self-end truncate text-right text-base/6 hover:max-w-none hover:overflow-visible hover:whitespace-normal sm:text-sm/6 ",o.value?"text-danger-800 dark:text-danger-400":"text-neutral-500 dark:text-neutral-300"]),textContent:Z(e.field.label)},null,10,zde),_("div",{class:be(["col-span-2 break-words text-base/6 sm:text-sm/6",o.value?"text-danger-700":"text-neutral-800 dark:text-white"])},[Se(a.$slots,"default",{hasValue:n.value,value:e.field.value},()=>[n.value?(g(),D("p",Hde,Z(e.field.value),1)):K("",!0)])],2)])],2)}}},Gde={__name:"BaseFormField",props:["field","resourceName","value","isFloating"],setup(e){const t=e,n=O(()=>t.field.readonly||Ma(t.field,"attributes.readonly")),o=O(()=>(t.resourceName?t.resourceName+"-":"")+(t.field.id||t.field.attribute)+(t.isFloating?"-floating":""));function a(r){t.field.emitChangeEvent&&At(t.field.emitChangeEvent,r)}return Je(()=>{if(Array.isArray(t.value)){xM(()=>t.value,r=>{a(r)},{deep:!0});return}$e(()=>t.value,(r,s)=>{$l(r)&&$l(s)&&JSON.stringify(r)===JSON.stringify(s)||a(r)},{deep:!0})}),(r,s)=>Se(r.$slots,"default",{isReadonly:n.value,fieldId:o.value})}},Kde={__name:"BaseIndexField",props:["resourceName","resourceId","row","field","editAction"],emits:["reload"],setup(e){const t=e,{getIndexFields:n}=yn(),o=O(()=>!Gt(t.field.value));async function a(){return(await n(t.resourceName,{intent:"update",params:{resourceId:t.resourceId}})).find(s=>t.field.attribute===s.attribute)}return(r,s)=>{const i=d("FieldInlineEdit");return g(),D(fe,null,[l(i,{class:"hidden group-hover/td:block",field:e.field,"field-fetcher":a,resource:e.row,"resource-name":e.resourceName,"resource-id":e.resourceId,"edit-action":e.editAction,onUpdated:s[0]||(s[0]=u=>r.$emit("reload"))},bn({_:2},[Ie(r.$slots,(u,c)=>({name:c,fn:p(m=>[Se(r.$slots,c,en(un(m)))])}))]),1032,["field","resource","resource-name","resource-id","edit-action"]),Se(r.$slots,"default",{hasValue:o.value,value:e.field.value})],64)}}};function Zde(){}var Yde=Zde,$m=Oy,Xde=Yde,Qde=Mp,Jde=1/0,eme=$m&&1/Qde(new $m([,-0]))[1]==Jde?function(e){return new $m(e)}:Xde,tme=eme,nme=Np,ome=Jx,ame=ek,rme=Pp,lme=tme,sme=Mp,ime=200;function ume(e,t,n){var o=-1,a=ome,r=e.length,s=!0,i=[],u=i;if(n)s=!1,a=ame;else if(r>=ime){var c=t?null:lme(e);if(c)return sme(c);s=!1,a=rme,u=new nme}else u=t?[]:i;e:for(;++o<r;){var m=e[o],f=t?t(m):m;if(m=n||m!==0?m:0,s&&f===f){for(var v=u.length;v--;)if(u[v]===f)continue e;t&&u.push(f),i.push(m)}else a(u,f,n)||(u!==i&&u.push(f),i.push(m))}return i}var Ov=ume,cme=ra,dme=Ov;function mme(e,t){return e&&e.length?dme(e,cme(t)):[]}var fme=mme;const Cm=Bt(fme),pme=Object.assign({inheritAttrs:!1},{__name:"BaseSelectField",props:["field","value","options"],setup(e){const t=e,{t:n}=Ee(),o=M(!1),a=M(2),r=M(0),s=M(!1),i=M(!1),u=M(null),c=M(null),m=O(()=>!!t.field.asyncUrl),f=O(()=>!m.value),v=O(()=>{if(Array.isArray(t.options))return t.options;const $=function(){return t.field.value?Array.isArray(t.field.value)?t.field.value.filter(F=>typeof F=="object"):typeof t.field.value=="object"?[t.field.value]:[]:[]}();return Array.isArray(u.value)?u.value:c.value?Cm([].concat(c.value,t.field.options||[],$),t.field.valueKey):Cm([].concat(t.field.options||[],$),t.field.valueKey)}),y=M(null),b=O(()=>m.value&&s.value?n("core::app.type_more_to_search",{characters:a.value-r.value}):""),w=O(()=>!m.value||m.value&&o.value?n("core::app.no_search_results"):n("core::app.type_to_search"));async function k(){if(!t.field.lazyLoad||c.value!==null)return;let $=[];const F=pt(t.field.lazyLoad);for(const R of Array.isArray(F)?F:[F]){let B=await x(R.url,R.params);$=$.concat((B==null?void 0:B.data)||B)}c.value=Cm($,"id")}async function x($,F){i.value=!0;const{data:R}=await Innoclapps.request($,{params:F});return i.value=!1,R}function I($,F){m.value&&C($,F)}const C=ga(async($,F)=>{if($==""){u.value=null;return}const R=$.length;if(r.value=R,f.value||R<a.value)return s.value=!0,$;s.value=!1,F(!0);let{data:B}=await Innoclapps.request(t.field.asyncUrl,{params:{q:$}});u.value=B,o.value=!0,F(!1)},400);function S($){return{[t.field.valueKey]:$,[t.field.labelKey]:$}}function T($){y.value=$}function E($,F){if(Gt($)){y.value=null;return}Array.isArray(F)&&Array.isArray(y.value)&&y.value.length>0&&F.forEach(R=>{$.indexOf(R)===-1&&(typeof y.value[0]=="object"?y.value=y.value.filter(B=>B[t.field.valueKey]!=R):y.value=y.value.filter(B=>B!=F))}),v.value.length&&typeof v.value[0]=="object"&&(Array.isArray($)?(Array.isArray(y.value)||(y.value=[]),$.forEach(R=>{let B=ut(v.value,[t.field.valueKey,R]);B&&!ut(y.value,[t.field.valueKey,R])&&y.value.push(B)})):y.value!=$&&(y.value=ut(v.value,[t.field.valueKey,$])))}return $e(()=>t.value,E,{immediate:!0,deep:!0}),($,F)=>{const R=d("BaseFormField");return g(),A(R,Ue({field:e.field,value:e.value},$.$attrs),{default:p(B=>[Se($.$slots,"default",en(un({...B,selectValue:y.value,handleSelectInputChange:T,createOption:S,onDropdownOpen:k,headerText:b.value,noOptionsText:w.value,onSearch:I,lazyLoadingOptions:i.value,filterable:f.value,options:v.value})))]),_:3},16,["field","value"])}}});var Bv={exports:{}};function uc(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame(function(){var n=t.__resizeTrigger__,o=n&&n.__resizeListeners__;o&&o.forEach(function(a){a.call(n,e)})})}var c1=function(t,n){var o=this,a=o.document,r,s=a.attachEvent;typeof navigator<"u"&&(r=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function i(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",uc)}if(!t.__resizeListeners__)if(t.__resizeListeners__=[],s)t.__resizeTrigger__=t,t.attachEvent("onresize",uc);else{getComputedStyle(t).position==="static"&&(t.style.position="relative");var u=t.__resizeTrigger__=a.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.setAttribute("title",""),u.__resizeElement__=t,u.onload=i,u.type="text/html",r&&t.appendChild(u),u.data="about:blank",r||t.appendChild(u)}t.__resizeListeners__.push(n)};Bv.exports=typeof window>"u"?c1:c1.bind(window);var vme=Bv.exports.unbind=function(e,t){var n=document.attachEvent,o=e.__resizeListeners__||[];if(t){var a=o.indexOf(t);a!==-1&&o.splice(a,1)}else o=e.__resizeListeners__=[];if(!o.length){if(n)e.detachEvent("onresize",uc);else if(e.__resizeTrigger__){var r=e.__resizeTrigger__.contentDocument,s=r&&r.defaultView;s&&(s.removeEventListener("resize",uc),delete s.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}},hme=Bv.exports;const gme=Bt(hme),bme={__name:"ResizeableFieldsWrapper",props:{disabled:Boolean,resourceName:String,initialHeightClass:String,collapsed:Boolean},setup(e,{expose:t}){const n=e,{gate:o}=ss(),{scriptConfig:a}=Ne(),{resourceSingularName:r}=Dt(n.resourceName),s=M(null),i=O(()=>`${r.value}_fields_height`),u=M(a(i.value)),c=O(()=>!n.disabled&&n.collapsed&&o.isSuperAdmin()),m=ga(async function(){if(!n.collapsed)return;let b=s.value.offsetHeight;await Innoclapps.request().post("/settings",{[i.value]:b}),a(i.value,b),u.value=b},500);function f(){gme(s.value,m)}function v(){c.value&&vme(s.value)}function y(){c.value&&ze(f)}return Je(y),En(v),t({$el:s}),(b,w)=>(g(),D("div",{ref_key:"wrapperRef",ref:s,class:be([c.value?"resize-y [&::-webkit-resizer]:bg-neutral-100 [&::-webkit-resizer]:outline [&::-webkit-resizer]:outline-1 [&::-webkit-resizer]:outline-neutral-200/80 [&::-webkit-resizer]:dark:bg-neutral-800 [&::-webkit-resizer]:dark:outline-neutral-500/30":"",e.collapsed&&!u.value?e.initialHeightClass:""]),style:Nt({height:u.value&&e.collapsed?`${u.value}px`:null})},[Se(b.$slots,"default")],6))}},yme={class:"grid grid-cols-12 gap-y-1"},_me=Object.assign({inheritAttrs:!1},{__name:"DetailFields",props:{fields:{required:!0,type:Array},collapsed:Boolean,isFloating:Boolean,resizeable:Boolean,resourceName:{required:!0,type:String},resourceId:{required:!0,type:Number},resource:{required:!0,type:Object}},emits:["updated"],setup(e){return(t,n)=>(g(),A(bme,Ue({disabled:!e.resizeable,collapsed:e.collapsed,"resource-name":e.resizeable?e.resourceName:void 0},t.$attrs),{default:p(()=>[_("div",yme,[(g(!0),D(fe,null,Ie(e.fields,o=>(g(),D("div",{key:o.attribute,class:be([o.width==="half"?"col-span-12 sm:col-span-12":"col-span-12",o.displayNone||e.collapsed&&o.collapsed?"pointer-events-none hidden":""])},[(g(),A(Rt(o.detailComponent),{field:o,"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource,"is-floating":e.isFloating,onUpdated:n[0]||(n[0]=a=>t.$emit("updated",a))},null,40,["field","resource-name","resource-id","resource","is-floating"]))],2))),128))])]),_:1},16,["disabled","collapsed","resource-name"]))}}),Ime=["onSubmit"],wme=Object.assign({inheritAttrs:!1},{__name:"FieldInlineEdit",props:["field","fieldFetcher","resource","resourceName","resourceId","editAction","isFloating","width"],emits:["updated"],setup(e,{emit:t}){const n=e,o=t,a=M(!1),r=M(!1);let s=null;const i=M({}),{form:u}=Ze(),{updateResource:c}=Dt(n.resourceName),{fields:m,hasFields:f,hydrateFields:v}=yn(),y=O(()=>{switch(n.field.inlineEditPanelWidth){case"medium":return"w-screen sm:w-80";case"large":return"w-screen sm:w-96";default:return""}});function b(S){s&&(s(),s=null),S()}async function w(){let S=await new Promise(T=>hS(n.fieldFetcher)?T(n.fieldFetcher()):T(n.field));return i.value=S,S.inlineEditWith!==null&&(S=S.inlineEditWith),S}async function k(){r.value=!0;let S=Mo(qn(await w()));S.forEach(T=>T.width="full"),m.value=S,v(n.resource),a.value=!0}function x(){u.errors.clear(),a.value=!1,m.value=[],Gn(()=>{r.value=!1},300)}async function I(S){const T=await c(u,n.resourceId,{cancelToken:new Kr(E=>s=E)});S(),o("updated",T)}const C=O(()=>n.resource.authorizations.update&&n.field.inlineEditDisabled!==!0&&!Ma(n.resource,`_edit_disabled.${n.field.attribute}`)&&(n.field.inlineEditWith!==null||n.field.applicableForUpdate));return(S,T)=>{const E=d("IPopoverButton"),$=d("IPopoverHeading"),F=d("IPopoverHeader"),R=d("FormFields"),B=d("IPopoverBody"),V=d("IButton"),P=d("IPopoverFooter"),z=d("IOverlay"),H=d("IPopoverPanel"),j=d("IPopover");return C.value?(g(),A(j,{key:0,"adaptive-width":"",shift:"",flip:"",onShow:k,onHide:x},{default:p(({hide:N})=>[l(E,Ue(S.$attrs,{icon:"Pencil",class:["absolute right-0.5 z-20 my-auto -mt-0.5 mr-4 ",{"!block":r.value}],small:"",onClick:e.editAction}),null,16,["class","onClick"]),l(H,{class:be(y.value)},{default:p(()=>[l(z,{show:!h(f)},{default:p(()=>[_("form",{onSubmit:ot(L=>I(N),["prevent"])},[l(F,null,{default:p(()=>[l($,{text:S.$t("core::fields.update_field")},null,8,["text"])]),_:1}),l(B,null,{default:p(()=>[a.value?(g(),A(R,{key:0,fields:h(m),form:h(u),"resource-name":e.resourceName,"resource-id":e.resourceId,"is-floating":e.isFloating,collapsed:!1,onUpdateFieldValue:T[0]||(T[0]=L=>h(u).fill(L.attribute,L.value)),onSetInitialValue:T[1]||(T[1]=L=>h(u).set(L.attribute,L.value))},null,8,["fields","form","resource-name","resource-id","is-floating"])):K("",!0),Se(S.$slots,"after-inline-edit-form-fields",{hidePopover:N})]),_:2},1024),l(P,{class:"flex items-center justify-end space-x-2"},{default:p(()=>[l(V,{text:S.$t("core::app.cancel"),disabled:!a.value,basic:"",onClick:L=>b(N)},null,8,["text","disabled","onClick"]),l(V,{type:"submit",variant:"primary",text:S.$t("core::app.save"),disabled:h(u).busy||!a.value,loading:h(u).busy,onClick:L=>I(N)},null,8,["text","disabled","loading","onClick"])]),_:2},1024)],40,Ime)]),_:2},1032,["show"])]),_:2},1032,["class"])]),_:3})):K("",!0)}}}),xme={__name:"FieldsButtonCollapse",props:{collapsed:{required:!0,type:Boolean},total:{type:Number,required:!0}},emits:["update:collapsed"],setup(e){return(t,n)=>{const o=d("Icon"),a=d("IButton");return g(),A(a,{basic:"",small:"",onClick:n[0]||(n[0]=r=>t.$emit("update:collapsed",!e.collapsed))},{default:p(()=>[le(Z(t.$t(e.collapsed?"core::fields.more_fields":"core::fields.hide_fields",{count:e.total}))+" ",1),l(o,{icon:e.collapsed?"ChevronDownSolid":"ChevronUpSolid"},null,8,["icon"])]),_:1})}}},kme={class:"flex animate-pulse"},$me={class:"flex-1 space-y-4"},Cme={__name:"FieldsPlaceholder",props:{total:{default:8,type:Number}},setup(e){const t=["w-full","w-1/2","w-5/6","w-3/4"];function n(){return t[Math.floor(Math.random()*t.length)]}return(o,a)=>(g(),D("div",kme,[_("div",$me,[(g(!0),D(fe,null,Ie(e.total,r=>(g(),D("div",{key:r,class:be(["h-9 rounded-md bg-neutral-200 dark:bg-neutral-700",n()])},null,2))),128))])]))}},Sme={class:"grid grid-cols-12 gap-x-4"},Tme={__name:"FormFields",props:{fields:{required:!0,type:Array},form:{required:!0,type:Object},collapsed:Boolean,resourceId:[String,Number],resourceName:String,except:[Array,String],only:[Array,String],isFloating:Boolean,focusFirst:Boolean},emits:["updateFieldValue","setInitialValue"],setup(e){const t=e,n=M(null),o=O(()=>t.only?qn(t.only):[]),a=O(()=>t.except?qn(t.except):[]),r=O(()=>t.fields?t.only?t.fields.filter(u=>o.value.indexOf(u.attribute)>-1):t.except?t.fields.filter(u=>a.value.indexOf(u.attribute)===-1):t.fields:[]),s=O(()=>t.form.errors.groupByField());function i(){const u=["date","datetime-local","email","file","month","number","password","range","search","tel","text","time","url","week"],c=n.value.querySelector("div:first-child input"),m=n.value.querySelector("div:first-child textarea");c&&u.indexOf(c.getAttribute("type"))>-1?c.focus():m&&m.focus()}return t.focusFirst&&Je(()=>{Gn(i,600)}),(u,c)=>(g(),D("div",{ref_key:"wrapperRef",ref:n},[_("div",Sme,[(g(!0),D(fe,null,Ie(r.value,m=>(g(),D("div",{key:m.attribute,class:be(m.width==="half"?"col-span-12 sm:col-span-6":"col-span-12")},[Se(u.$slots,`before-${m.attribute}-field`,{field:m}),_("div",{class:be(m.displayNone||m.hidden||e.collapsed&&m.collapsed?"hidden":"")},[(g(),A(Rt(m.formComponent),{field:m,"resource-id":e.resourceId,"resource-name":e.resourceName,"is-floating":e.isFloating,"validation-errors":s.value[m.attribute],"model-value":e.form[m.attribute],"onUpdate:modelValue":f=>u.$emit("updateFieldValue",{attribute:m.attribute,value:f}),onSetInitialValue:f=>u.$emit("setInitialValue",{attribute:m.attribute,value:f})},null,40,["field","resource-id","resource-name","is-floating","validation-errors","model-value","onUpdate:modelValue","onSetInitialValue"]))],2),Se(u.$slots,`after-${m.attribute}-field`,{field:m})],2))),128))])],512))}},Eme={class:"pt-8"},Fme={class:"mx-auto max-w-3xl"},Ame={class:"bg-white shadow dark:bg-neutral-900 sm:rounded-lg"},Rme={class:"px-4 py-5 sm:p-6"},Dme={class:"sm:flex sm:items-start sm:justify-between"},Ome={class:"mt-5 sm:ml-6 sm:mt-1 sm:flex sm:shrink-0 sm:items-center"},Bme={__name:"ActionPanel",props:{buttonText:{default:"Update",type:String},title:String,description:String,redirectTo:String,method:{type:String,default:"post"},action:{type:String,required:!0}},setup(e){const t=e,{appUrl:n}=Ne(),o=M(!1);function a(){o.value=!0,Innoclapps.request({method:t.method,url:t.action}).then(()=>{t.redirectTo?window.location.href=t.redirectTo:window.location.href=n}).finally(()=>o.value=!1)}return(r,s)=>{const i=d("ITextDisplay"),u=d("IText"),c=d("IButton");return g(),D("div",Eme,[_("div",Fme,[_("div",Ame,[_("div",Rme,[_("div",Dme,[_("div",null,[l(i,{text:e.title},null,8,["text"]),l(u,{class:"mt-2 max-w-xl",text:e.description},null,8,["text"])]),_("div",Ome,[_("form",{onSubmit:ot(a,["prevent"])},[l(c,{type:"submit",variant:"primary",loading:o.value,disabled:o.value,text:e.buttonText},null,8,["loading","disabled","text"])],32)])])])])])])}}},Nme=Vl({loader:()=>us(()=>import("./FullCalendar-D8xHpkRH.js"),__vite__mapDeps([0,1])),loadingComponent:Si}),Pme=Vl({loader:()=>us(()=>import("./vuedraggable.umd-Hb-xBJQZ.js").then(e=>e.v),__vite__mapDeps([])),loadingComponent:Si}),Mme=Vl({loader:()=>us(()=>import("./TextCollapse-DhKOVfw1.js"),__vite__mapDeps([])),loadingComponent:Si}),Vme=Vl({loader:()=>us(()=>import("./CropsAndUploadsImage-By5Is3ag.js"),__vite__mapDeps([2,3])),loadingComponent:Si});function Lme(e){e.use(eX).use(Vre).use(Oie).use(Xue).use(Yce).use(Ede).use(dce).use(Ece).use(gce).use(xce).use(yde).use(Sie).use(dde).use(Bde).use(lie).use(hie).use(Ude).use(Uue,{dialog:{labels:{cancelText:at("core::app.cancel"),okText:"Ok"}},confirmation:{labels:{title:at("core::actions.confirmation_message"),confirmText:at("core::app.confirm"),cancelText:at("core::app.cancel")}}}),e.component("FullCalendar",Nme).component("SortableDraggable",Pme).component("FileUpload",YY).component("AuthLogin",aX).component("AuthPasswordEmail",rX).component("AuthPasswordReset",lX).component("IActionMessage",Fce).component("IAvatar",Rce).component("ICustomSelect",nue).component("IOverlay",ck).component("IEmptyState",qce).component("IIconPicker",Uce).component("ISpinner",Fv).component("IColorSwatch",Pce).component("ILink",pd).component("ILinkBase",Il).component("MainLayout",KJ).component("TheNavbar",sre).component("NavbarItems",QJ).component("NavbarSeparator",tee).component("TheSidebar",Bre).component("TheFloatNotifications",hae).component("TheFloatingResourceModal",Joe).component("DatePicker",vJ).component("DateRangePicker",wJ).component("ActionPanel",Bme).component("Icon",ps).component("ActionDialog",$Q).component("ActionBulkEdit",RQ).component("ProgressionChart",mJ).component("PresentationChart",cJ).component("CardTable",zQ).component("CardAsyncTable",VQ).component("ResourceTable",foe).component("CropsAndUploadsImage",Vme).component("TextCollapse",Mme).component("Editor",GJ).component("BaseFormField",Gde).component("BaseSelectField",pme).component("FormFields",Tme).component("DetailFields",_me).component("BaseDetailField",Wde).component("BaseIndexField",Kde).component("FieldsButtonCollapse",xme).component("FieldsPlaceholder",Cme).component("FieldInlineEdit",wme).component("SearchInput",hoe)}const qme={};function Ume(e,t){const n=d("FormSelectField");return g(),A(n)}const jme=fn(qme,[["render",Ume]]),zme=Object.freeze(Object.defineProperty({__proto__:null,default:jme},Symbol.toStringTag,{value:"Module"}));function Hme(e){return e==null}var Wme=Hme;const Rn=Bt(Wme),Gme=["textContent"],Kme={key:0,class:"mr-1 text-base text-danger-600 sm:text-sm",textContent:"*"},Zme=["innerHTML"],dn={__name:"FormFieldGroup",props:{field:{required:!0,type:Object},validationErrors:Object,fieldId:String,label:String,asParagraphLabel:Boolean},setup(e){const t=e,n=M(!1),o=O(()=>t.validationErrors&&t.validationErrors.messages&&t.validationErrors.messages[0]?t.validationErrors.messages[0]:null),a=O(()=>t.field.toggleable&&!n.value&&!u.value),r=O(()=>t.field.helpText&&t.field.helpTextDisplay==="icon"),s=O(()=>t.field.helpText&&t.field.helpTextDisplay==="text"),i=O(()=>t.field.helpText&&t.field.helpTextDisplay==="alert"),u=O(()=>!Gt(t.field.value)),c=O(()=>!a.value&&s.value?t.field.helpText:null);return(m,f)=>{const v=d("Icon"),y=d("ILink"),b=d("IFormLabel"),w=d("IAlertBody"),k=d("IAlert"),x=d("IFormError"),I=d("IFormGroup"),C=Ve("i-tooltip");return g(),A(I,{description:c.value},{default:p(()=>[a.value?(g(),A(y,{key:0,class:"flex items-center",onClick:f[0]||(f[0]=S=>n.value=!0)},{default:p(()=>[l(v,{icon:"PlusSolid",class:"mr-1 size-4"}),_("span",{textContent:Z(e.label)},null,8,Gme)]),_:1})):K("",!0),ne(_("div",null,[e.label&&!e.field.hideLabel?(g(),A(b,{key:0,class:"mb-1 inline-flex items-center",for:e.asParagraphLabel?void 0:e.fieldId,as:e.asParagraphLabel?"p":void 0,required:e.field.isRequired},{default:p(()=>[e.field.isRequired&&e.label?(g(),D("span",Kme)):K("",!0),r.value?ne((g(),A(v,{key:1,icon:"QuestionMarkCircle",class:"mr-1 size-4 text-neutral-500 hover:text-neutral-700 dark:text-white dark:hover:text-neutral-300"},null,512)),[[C,e.field.helpText]]):K("",!0),_("span",{innerHTML:e.label},null,8,Zme)]),_:1},8,["for","as","required"])):K("",!0),Se(m.$slots,"default")],512),[[pe,!a.value]]),i.value?(g(),A(k,{key:1,class:"mt-3"},{default:p(()=>[l(w,null,{default:p(()=>[le(Z(e.field.helpText),1)]),_:1})]),_:1})):K("",!0),o.value?(g(),A(x,{key:2,error:o.value},null,8,["error"])):K("",!0)]),_:3},8,["description"])}}},Yme=["innerHTML"],Xme={__name:"BooleanField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?n.field.falseValue:n.field.value)}return r(),(s,i)=>{const u=d("IFormCheckbox"),c=d("IFormCheckboxLabel"),m=d("IFormCheckboxField"),f=d("BaseFormField");return g(),A(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:v,fieldId:y})=>[l(dn,{field:e.field,"field-id":y,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[l(m,null,{default:p(()=>[l(u,Ue({id:y,checked:a.value,"onUpdate:checked":i[0]||(i[0]=b=>a.value=b),name:e.field.attribute,"unchecked-value":e.field.falseValue,value:e.field.trueValue,disabled:v},e.field.attributes),null,16,["id","checked","name","unchecked-value","value","disabled"]),l(c,{for:y},{default:p(()=>[_("span",{innerHTML:e.field.label},null,8,Yme)]),_:2},1032,["for"])]),_:2},1024)]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Qme=Object.freeze(Object.defineProperty({__proto__:null,default:Xme},Symbol.toStringTag,{value:"Module"})),Jme=["textContent"],efe={__name:"CheckboxField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",(Rn(n.field.value)?[]:n.field.value).map(s=>s[n.field.valueKey]))}return r(),(s,i)=>{const u=d("IFormCheckbox"),c=d("IBadge"),m=d("IFormCheckboxLabel"),f=d("IFormCheckboxField"),v=d("BaseFormField");return g(),A(v,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:y,fieldId:b})=>[l(dn,{field:e.field,label:e.field.label,"field-id":b,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[_("div",{class:be({"flex items-center space-x-2":e.field.inline,"space-y-1":!e.field.inline})},[(g(!0),D(fe,null,Ie(e.field.options,w=>(g(),A(f,{key:w[e.field.valueKey]},{default:p(()=>[l(u,Ue({checked:a.value,"onUpdate:checked":i[0]||(i[0]=k=>a.value=k),value:w[e.field.valueKey],name:e.field.attribute,disabled:y},e.field.attributes),null,16,["checked","value","name","disabled"]),l(m,null,{default:p(()=>[w.swatch_color?(g(),A(c,{key:0,text:w[e.field.labelKey],color:w.swatch_color},null,8,["text","color"])):(g(),D("span",{key:1,textContent:Z(w[e.field.labelKey])},null,8,Jme))]),_:2},1024)]),_:2},1024))),128))],2)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},tfe=Object.freeze(Object.defineProperty({__proto__:null,default:efe},Symbol.toStringTag,{value:"Module"})),nfe={__name:"ColorSwatchField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("IColorSwatch"),c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:m})=>[l(dn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[_("div",null,[l(u,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),swatches:s.$scriptConfig("favourite_colors"),name:e.field.attribute},null,8,["modelValue","swatches","name"])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},ofe=Object.freeze(Object.defineProperty({__proto__:null,default:nfe},Symbol.toStringTag,{value:"Module"})),afe={__name:"DateField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{DateTime:a}=rt();function r(i){o("update:modelValue",i||"")}function s(){o("setInitialValue",Rn(n.field.value)?"":a.fromISO(n.field.value).toISODate())}return ze(s),(i,u)=>{const c=d("DatePicker"),m=d("BaseFormField");return g(),A(m,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:f,fieldId:v})=>[l(dn,{field:e.field,label:e.field.label,"field-id":v,"validation-errors":e.validationErrors},{default:p(()=>[l(c,Ue({id:v,"model-value":e.modelValue,required:e.field.isRequired,name:e.field.attribute,disabled:f},e.field.attributes,{"onUpdate:modelValue":r}),null,16,["id","model-value","required","name","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},rfe=Object.freeze(Object.defineProperty({__proto__:null,default:afe},Symbol.toStringTag,{value:"Module"})),lfe={__name:"DateTimeField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t;function a(s){o("update:modelValue",s||"")}function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return ze(r),(s,i)=>{const u=d("DatePicker"),c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:m,fieldId:f})=>[l(dn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({id:f},e.field.attributes,{mode:"dateTime","model-value":e.modelValue,required:e.field.isRequired,name:e.field.attribute,disabled:m,"onUpdate:modelValue":a}),null,16,["id","model-value","required","name","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},sfe=Object.freeze(Object.defineProperty({__proto__:null,default:lfe},Symbol.toStringTag,{value:"Module"}));function d1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sm,m1;function f1(){return m1||(m1=1,Sm=function(t){var n=typeof window<"u"?window:Dr;n.$locutus=n.$locutus||{};var o=n.$locutus;return o.php=o.php||{},o.php.ini=o.php.ini||{},o.php.ini[t]&&o.php.ini[t].local_value!==void 0?o.php.ini[t].local_value===null?"":o.php.ini[t].local_value:""}),Sm}var ife=function(t,n){for(var o=void 0,a=(typeof d1<"u"?f1()("locutus.parse_url.mode"):void 0)||"php",r=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],s={php:new RegExp(["(?:([^:\\/?#]+):)?","(?:\\/\\/()(?:(?:()(?:([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?","()","(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)"].join("")),strict:new RegExp(["(?:([^:\\/?#]+):)?","(?:\\/\\/((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?","((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)"].join("")),loose:new RegExp(["(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?","(?:\\/\\/\\/?)?","((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)","(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))","(?:\\?([^#]*))?(?:#(.*))?)"].join(""))},i=s[a].exec(t),u={},c=14;c--;)i[c]&&(u[r[c]]=i[c]);if(n)return u[n.replace("PHP_URL_","").toLowerCase()];if(a!=="php"){var m=(typeof d1<"u"?f1()("locutus.parse_url.queryKey"):void 0)||"queryKey";s=/(?:^|&)([^&=]*)=?([^&]*)/g,u[m]={},o=u[r[12]]||"",o.replace(s,function(f,v,y){v&&(u[m][v]=y)})}return delete u.source,u};const ufe=Bt(ife),cfe={class:"relative text-neutral-500 focus-within:text-neutral-600 dark:text-neutral-300 dark:focus-within:text-neutral-100"},dfe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},mfe={__name:"DomainField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){let i=a.value;i&&!i.startsWith("http")&&(i=`https://${i}`),a.value=ufe(i).host||null}function s(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return s(),(i,u)=>{const c=d("Icon"),m=d("IFormInput"),f=d("BaseFormField");return g(),A(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:v,fieldId:y})=>[l(dn,{field:e.field,label:e.field.label,"field-id":y,"validation-errors":e.validationErrors},{default:p(()=>[_("div",cfe,[_("div",dfe,[l(c,{icon:"Globe",class:"size-5"})]),l(m,Ue({id:y,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=b=>a.value=b)},e.field.attributes,{class:"pl-10 sm:pl-11",name:e.field.attribute,disabled:v,onBlur:r}),null,16,["id","modelValue","name","disabled"])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},ffe=Object.freeze(Object.defineProperty({__proto__:null,default:mfe},Symbol.toStringTag,{value:"Module"})),pfe={__name:"EditorField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue"),r=O(()=>(n.resourceName?n.resourceName+"-":"")+(n.field.id||n.field.attribute)+(n.isFloating?"-floating":"")+"-"+$o());function s(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return s(),(i,u)=>{const c=d("Editor"),m=d("BaseFormField");return g(),A(m,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:f})=>[l(dn,{field:e.field,label:e.field.label,"field-id":r.value,"validation-errors":e.validationErrors},{default:p(()=>[l(c,Ue({id:r.value,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v),disabled:f},e.field.attributes),null,16,["id","modelValue","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},vfe=Object.freeze(Object.defineProperty({__proto__:null,default:pfe},Symbol.toStringTag,{value:"Module"})),hfe={class:"relative text-neutral-500 focus-within:text-neutral-600 dark:text-neutral-300 dark:focus-within:text-neutral-100"},gfe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},bfe=["textContent"],yfe={__name:"EmailField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue"),r=Pt(null);function s(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}async function i(){await ze(),!u.value||!a.value?r.value=null:r.value=await c(a.value)}const u=O(()=>!n.resourceId&&n.field.checkDuplicatesWith&&Object.keys(n.field.checkDuplicatesWith).length>0);async function c(m){const{data:f}=await Innoclapps.request(n.field.checkDuplicatesWith.url,{params:{q:m,...n.field.checkDuplicatesWith.params}});return f.length>0?f[0]:null}return s(),(m,f)=>{const v=d("Icon"),y=d("IFormInput"),b=d("I18nT"),w=d("IAlertBody"),k=d("IButton"),x=d("IAlertActions"),I=d("IAlert"),C=d("BaseFormField");return g(),A(C,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:S,fieldId:T})=>[l(dn,{field:e.field,label:e.field.label,"field-id":T,"validation-errors":e.validationErrors},{default:p(()=>[_("div",hfe,[_("div",gfe,[l(v,{icon:"Mail",class:"size-5"})]),l(y,Ue({id:T,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=E=>a.value=E),type:"email"},e.field.attributes,{class:"pl-10 sm:pl-11",disabled:S,name:e.field.attribute,debounce:u.value,onInput:i}),null,16,["id","modelValue","disabled","name","debounce"])]),r.value?(g(),A(I,{key:0,class:"mt-2",dismissible:"",onDismissed:f[1]||(f[1]=E=>r.value=null)},{default:p(({variant:E})=>[l(w,null,{default:p(()=>[l(b,{scope:"global",keypath:e.field.checkDuplicatesWith.lang_keypath},{display_name:p(()=>[_("span",{class:"font-medium",textContent:Z(r.value.display_name)},null,8,bfe)]),_:1},8,["keypath"])]),_:1}),l(x,null,{default:p(()=>[l(k,{rel:"noopener noreferrer",target:"_blank",icon:"ExternalLink",href:r.value.path,variant:E,text:m.$t("core::app.view_record"),ghost:""},null,8,["href","variant","text"])]),_:2},1024)]),_:1})):K("",!0)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},_fe=Object.freeze(Object.defineProperty({__proto__:null,default:yfe},Symbol.toStringTag,{value:"Module"})),Ife={class:"mb-1 mt-3"},wfe=["textContent"],xfe=Object.assign({inheritAttrs:!1},{__name:"HeadingField",props:{field:{type:Object,require:!0}},setup(e){return(t,n)=>{const o=d("Icon"),a=d("ITextDisplay"),r=d("IText");return g(),D("div",Ife,[l(a,{class:be([e.field.titleIcon?"inline-flex items-center":""])},{default:p(()=>[e.field.titleIcon?(g(),A(o,{key:0,class:"mr-1.5 size-4",icon:e.field.titleIcon},null,8,["icon"])):K("",!0),_("span",{textContent:Z(e.field.title)},null,8,wfe)]),_:1},8,["class"]),l(r,{innerHTML:e.field.message},null,8,["innerHTML"])])}}}),kfe=Object.freeze(Object.defineProperty({__proto__:null,default:xfe},Symbol.toStringTag,{value:"Module"})),$fe={__name:"IconPickerField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("IIconPicker"),c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:m})=>[l(dn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),name:e.field.attribute},e.field.attributes),null,16,["modelValue","name"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Cfe=Object.freeze(Object.defineProperty({__proto__:null,default:$fe},Symbol.toStringTag,{value:"Module"})),Sfe={__name:"NumberField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("IFormInput"),c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:m,fieldId:f})=>[l(dn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({id:f,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=v=>a.value=v),type:"number",disabled:m,name:e.field.attribute},e.field.attributes),null,16,["id","modelValue","disabled","name"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Tfe=Object.freeze(Object.defineProperty({__proto__:null,default:Sfe},Symbol.toStringTag,{value:"Module"})),Efe={class:"relative"},Ffe={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Afe=["textContent"],Rfe={key:1,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Dfe=["textContent"],Ofe={__name:"NumericField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("IFormNumericInput"),c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:m,fieldId:f})=>[l(dn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[_("div",Efe,[e.field.prependText||e.field.currency&&e.field.currency.symbol_first?(g(),D("div",Ffe,[_("span",{class:"text-base text-neutral-500 dark:text-neutral-300 sm:text-sm",textContent:Z(e.field.currency?e.field.currency.iso_code:e.field.prependText)},null,8,Afe)])):K("",!0),l(u,Ue({id:f,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=v=>a.value=v),disabled:m,name:e.field.attribute},e.field.attributes,{class:{"pl-14 sm:pl-14":e.field.prependText||e.field.currency&&e.field.currency.symbol_first,"pr-14 sm:pr-14":e.field.appendText||e.field.currency&&!e.field.currency.symbol_first}}),null,16,["id","modelValue","disabled","name","class"]),e.field.appendText||e.field.currency&&!e.field.currency.symbol_first?(g(),D("div",Rfe,[_("span",{class:"text-base text-neutral-500 dark:text-neutral-300 sm:text-sm",textContent:Z(e.field.currency?e.field.currency.iso_code:e.field.appendText)},null,8,Dfe)])):K("",!0)])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Bfe=Object.freeze(Object.defineProperty({__proto__:null,default:Ofe},Symbol.toStringTag,{value:"Module"})),Nfe=["textContent"],Pfe={__name:"RadioField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",function(){return Rn(n.field.value)?"":typeof n.field.value=="object"?n.field.value[n.field.valueKey]:n.field.value}())}return r(),(s,i)=>{const u=d("IFormRadio"),c=d("IBadge"),m=d("IFormRadioLabel"),f=d("IFormRadioField"),v=d("BaseFormField");return g(),A(v,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:y,fieldId:b})=>[l(dn,{field:e.field,label:e.field.label,"field-id":b,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[_("div",{class:be({"flex items-center space-x-2":e.field.inline,"space-y-1":!e.field.inline})},[(g(!0),D(fe,null,Ie(e.field.options,w=>(g(),A(f,{key:w[e.field.valueKey]},{default:p(()=>[l(u,Ue(e.field.attributes,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=k=>a.value=k),name:e.field.attribute,value:w[e.field.valueKey],disabled:y}),null,16,["modelValue","name","value","disabled"]),l(m,null,{default:p(()=>[w.swatch_color?(g(),A(c,{key:0,text:w[e.field.labelKey],color:w.swatch_color},null,8,["text","color"])):(g(),D("span",{key:1,textContent:Z(w[e.field.labelKey])},null,8,Nfe))]),_:2},1024)]),_:2},1024))),128))],2)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Mfe=Object.freeze(Object.defineProperty({__proto__:null,default:Pfe},Symbol.toStringTag,{value:"Module"})),Vfe={class:"flex items-center"},Lfe={class:"relative mr-2"},qfe={class:"flex items-center space-x-2"},Ufe=["value"],jfe={__name:"ReminderField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),r=["minutes","hours","days","weeks"],s=M(a("defaults.reminder_minutes")),i=M("minutes"),u=M(!1),c=O(()=>u.value?null:i.value==="minutes"?parseInt(s.value):i.value==="hours"?parseInt(s.value)*60:i.value==="days"?parseInt(s.value)*1440:i.value==="weeks"?parseInt(s.value)*10080:parseInt(30)),m=O(()=>i.value==="minutes"?59:i.value==="hours"?23:i.value==="days"?6:4);$e(c,w=>{y(w)});function f(w){u.value=w===void 0?!u.value:w,s.value=a("defaults.reminder_minutes"),i.value="minutes"}function v(){if(n.field.value)return s.value=V_(n.field.value),i.value=Ip(n.field.value),n.field.value;if(n.field.value===null&&n.field.cancelable)f();else return s.value}function y(w){o("update:modelValue",w)}function b(){o("setInitialValue",v()||null)}return b(),(w,k)=>{const x=d("IButton"),I=d("IFormNumericInput"),C=d("IFormSelect"),S=d("IText"),T=d("BaseFormField");return g(),A(T,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({fieldId:E})=>[l(dn,{field:e.field,label:e.field.label,"field-id":E,"validation-errors":e.validationErrors},{default:p(()=>[_("div",Vfe,[_("div",Lfe,[e.field.cancelable?(g(),A(x,{key:0,class:"absolute left-1.5 top-1.5 sm:top-1",icon:u.value?"Bell":"XSolid",basic:"",small:"",onClick:k[0]||(k[0]=$=>f())},null,8,["icon"])):K("",!0),l(I,{id:E,modelValue:s.value,"onUpdate:modelValue":k[1]||(k[1]=$=>s.value=$),type:"number",class:be(e.field.cancelable?"!pl-11":""),name:e.field.attribute,max:m.value,min:1,disabled:u.value,precision:0,placeholder:w.$t("core::dates."+i.value)},null,8,["id","modelValue","class","name","max","disabled","placeholder"])]),_("div",qfe,[l(C,{id:E+"-reminder-type",modelValue:i.value,"onUpdate:modelValue":k[2]||(k[2]=$=>i.value=$),class:"sm:flex-1",disabled:u.value},{default:p(()=>[(g(),D(fe,null,Ie(r,$=>_("option",{key:$,value:$},Z(w.$t("core::dates."+$)),9,Ufe)),64))]),_:2},1032,["id","modelValue","disabled"]),l(S,{class:"ml-2 truncate",text:w.$t("core::app.reminder_before_due")},null,8,["text"])])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},zfe=Object.freeze(Object.defineProperty({__proto__:null,default:jfe},Symbol.toStringTag,{value:"Module"})),Hfe=_("span",{class:"block size-4 motion-safe:animate-bounce"},"...",-1),Wfe={__name:"SelectField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t;function a(s){s=s&&!Gt(s[n.field.valueKey])?s[n.field.valueKey]:null,o("update:modelValue",s)}function r(){o("setInitialValue",Rn(n.field.value)?null:function(){return typeof n.field.value=="object"?n.field.value[n.field.valueKey]:n.field.value}())}return r(),(s,i)=>{const u=d("IText"),c=d("ICustomSelect"),m=d("BaseSelectField");return g(),A(m,{field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:f,fieldId:v,options:y,createOption:b,lazyLoadingOptions:w,filterable:k,onSearch:x,onDropdownOpen:I,noOptionsText:C,headerText:S,selectValue:T,handleSelectInputChange:E})=>[l(dn,{field:e.field,label:e.field.label,"field-id":v,"validation-errors":e.validationErrors},{default:p(()=>[l(c,Ue({"model-value":T,"input-id":v,disabled:f,filterable:k,options:y,"create-option-provider":b,loading:w,name:e.field.attribute,label:e.field.labelKey},e.field.attributes,{"onUpdate:modelValue":$=>(a($),E($)),onSearch:x,onOpen:I}),{"no-options":p(()=>[le(Z(C),1)]),header:p(()=>[ne(l(u,{class:"px-3 py-2",text:S},null,8,["text"]),[[pe,S]]),w?(g(),A(u,{key:0,class:"-mt-1 px-3 py-2"},{default:p(()=>[Hfe]),_:1})):K("",!0)]),_:2},1040,["model-value","input-id","disabled","filterable","options","create-option-provider","loading","name","label","onUpdate:modelValue","onSearch","onOpen"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["field","value","is-floating"])}}},Gfe=Object.freeze(Object.defineProperty({__proto__:null,default:Wfe},Symbol.toStringTag,{value:"Module"})),Kfe=_("span",{class:"block size-4 motion-safe:animate-bounce"},"...",-1),Zfe={__name:"SelectMultipleField",props:{field:{type:Object,required:!0},modelValue:{type:Array,default:()=>[]},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t;function a(s){let i=[];Aa(s,u=>{i.push(u[n.field.valueKey])}),o("update:modelValue",i)}function r(){o("setInitialValue",Rn(n.field.value)?[]:function(){return n.field.value.length===0?[]:typeof n.field.value[0]=="object"?n.field.value.map(s=>s[n.field.valueKey]):n.field.value}())}return r(),(s,i)=>{const u=d("Icon"),c=d("ILink"),m=d("IText"),f=d("ICustomSelect"),v=d("BaseSelectField");return g(),A(v,{field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:y,fieldId:b,options:w,createOption:k,lazyLoadingOptions:x,filterable:I,onSearch:C,onDropdownOpen:S,noOptionsText:T,headerText:E,selectValue:$,handleSelectInputChange:F})=>[l(dn,{field:e.field,label:e.field.label,"field-id":b,"validation-errors":e.validationErrors},{default:p(()=>[l(f,Ue({"model-value":$,"input-id":b,disabled:y,filterable:I,options:w,"create-option-provider":k,loading:x,name:e.field.attribute,label:e.field.labelKey,multiple:""},e.field.attributes,{"onUpdate:modelValue":R=>(a(R),F(R)),onSearch:C,onOpen:S}),bn({"no-options":p(()=>[le(Z(T),1)]),header:p(()=>[ne(l(m,{class:"px-3 py-2",text:E},null,8,["text"]),[[pe,E]]),x?(g(),A(m,{key:0,class:"-mt-1 px-3 py-2"},{default:p(()=>[Kfe]),_:1})):K("",!0)]),_:2},[e.field.displayOptionViewActionFromPath?{name:"after-selected-option-inner",fn:p(({option:R})=>[R.path?(g(),A(c,{key:0,target:"_blank",to:R.path,plain:"",onClick:i[0]||(i[0]=ot(()=>{},["stop"]))},{default:p(()=>[l(u,{icon:"Eye",class:"size-4"})]),_:2},1032,["to"])):K("",!0)]),key:"0"}:void 0]),1040,["model-value","input-id","disabled","filterable","options","create-option-provider","loading","name","label","onUpdate:modelValue","onSearch","onOpen"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["field","value","is-floating"])}}},Yfe=Object.freeze(Object.defineProperty({__proto__:null,default:Zfe},Symbol.toStringTag,{value:"Module"})),Ca=M([]),_k=()=>{const{scriptConfig:e}=Ne();Ca.value=[...e("tags")||[]],on(()=>{e("tags",[...Ca.value])});const t=O(()=>Vt(Ca.value,"display_order"));function n(c){return Ca.value.findIndex(m=>m.id==c)}function o(c){return t.value.find(m=>m.id==c)}function a(c){return t.value.filter(m=>m.type==c)}function r(c){Ca.value=c}function s(c){Ca.value.push(c)}function i(c,m){Ca.value[n(c)]=m}function u(c){Ca.value.splice(n(c),1)}return{tags:Ca,tagsByDisplayOrder:t,findTagById:o,findTagsByType:a,setTags:r,setTag:i,addTag:s,removeTag:u}},Xfe={class:"p-5"},Qfe={class:"flex items-center border-t border-neutral-200 px-5 py-2 dark:border-neutral-500/30"},Jfe={class:"ml-auto flex items-center space-x-2"},epe={class:"border-t border-neutral-200 px-4 py-2 hover:bg-neutral-50 dark:border-neutral-500/30 dark:hover:bg-neutral-700"},hs={__name:"TagsSelectInput",props:{modelValue:Array,type:String,simple:Boolean},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),{tagsByDisplayOrder:r,findTagsByType:s,removeTag:i,setTag:u,findTagById:c,setTags:m,addTag:f}=_k(),v=O(()=>n.type?s(n.type):r.value),y=a("favourite_colors").slice(0,-2),{form:b}=Ze({name:"",swatch_color:y[1]},{resetOnSuccess:!0}),w=M(!1),k=M(null),x=O(()=>n.simple?!n.modelValue||n.modelValue.length===0?"Tag":"":"Selector"),I=O(()=>w.value||!!k.value);function C(){w.value?$():F()}function S(V){k.value=V.id,b.fill("name",V.name),b.fill("swatch_color",V.swatch_color)}function T(V){m(V.map((P,z)=>({...P,display_order:z+1}))),Innoclapps.request().post("/tags/order",V.map((P,z)=>({id:P.id,display_order:z+1})))}function E(){w.value=!1,k.value=null,b.reset()}function $(){b.post(`/tags${n.type?`/${n.type}`:""}`).then(V=>{c(V.id)?u(V.id,V):f(V),E()})}function F(){const V=c(k.value).name;b.put(`/tags/${k.value}`).then(P=>{u(P.id,P);let z=n.modelValue.findIndex(H=>((H==null?void 0:H.name)||H)===V);if(z!==-1){let H=Vn(n.modelValue[z]);typeof H=="string"?H=P.name:H.name=P.name;let j=Vn(n.modelValue);j[z]=H,R(j)}E()})}function R(V){o("update:modelValue",V.map(P=>typeof P=="string"?P:P.name))}async function B(V){let P=c(V);await Innoclapps.request().delete(`/tags/${V}`),n.modelValue.findIndex(H=>((H==null?void 0:H.name)||H)===P.name)!==-1&&R(n.modelValue.filter(H=>((H==null?void 0:H.name)||H)!==P.name)),i(V),E()}return(V,P)=>{const z=d("IButton"),H=d("ITextBlockDark"),j=d("IFormInput"),N=d("IFormError"),L=d("IFormGroup"),U=d("IFormLabel"),ee=d("IColorSwatch"),G=d("ILink"),W=d("ICustomSelect");return g(),A(W,{label:"name",class:be(e.simple?"[&_.toggle-icon]:size-5":""),"model-value":e.modelValue,multiple:!0,options:v.value,reduce:ae=>ae.name,simple:e.simple,filterable:!I.value,placeholder:e.simple?V.$t("core::tags.search"):void 0,"toggle-icon":x.value,"list-wrapper-class":e.simple?"min-w-[340px]":void 0,"list-class":I.value?"hidden":void 0,reorderable:V.$gate.isSuperAdmin(),"onUpdate:modelValue":R,"onUpdate:draggable":T},bn({"option-actions":p(({index:ae})=>[V.$gate.isSuperAdmin()?(g(),A(z,{key:0,icon:"Pencil",basic:"",small:"",onClick:ue=>S(v.value[ae])},null,8,["onClick"])):K("",!0)]),_:2},[I.value?{name:"header",fn:p(()=>[l(H,{class:"border-b border-neutral-200 px-5 py-2.5 font-medium dark:border-neutral-500/30",text:w.value?V.$t("core::tags.new_tag"):V.$t("core::tags.edit_tag")},null,8,["text"]),_("div",Xfe,[l(L,{"label-for":"tag_name",label:V.$t("core::tags.tag_name"),required:""},{default:p(()=>[l(j,{id:"tag_name",modelValue:h(b).name,"onUpdate:modelValue":P[0]||(P[0]=ae=>h(b).name=ae),name:"tag_name",onKeydown:fo(C,["enter"])},null,8,["modelValue"]),l(N,{error:h(b).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(U,{class:"mb-1",label:V.$t("core::tags.color"),required:""},null,8,["label"]),l(ee,{modelValue:h(b).swatch_color,"onUpdate:modelValue":P[1]||(P[1]=ae=>h(b).swatch_color=ae),swatches:h(y)},null,8,["modelValue","swatches"]),l(N,{error:h(b).getError("swatch_color")},null,8,["error"])]),_("div",Qfe,[!w.value&&V.$gate.isSuperAdmin()?(g(),A(z,{key:0,icon:"Trash","confirm-text":V.$t("core::app.confirm"),basic:"",confirmable:"",onConfirmed:P[2]||(P[2]=ae=>B(k.value))},null,8,["confirm-text"])):K("",!0),_("div",Jfe,[l(z,{text:V.$t("core::app.cancel"),basic:"",onClick:E},null,8,["text"]),l(z,{variant:"primary",text:V.$t("core::app.save"),loading:h(b).busy,disabled:h(b).busy,onClick:C},null,8,["text","loading","disabled"])])])]),key:"0"}:void 0,V.$gate.isSuperAdmin()?{name:"footer",fn:p(()=>[ne(_("div",epe,[ne(l(G,{class:"text-base sm:text-sm",onClick:P[3]||(P[3]=ae=>w.value=!0)},{default:p(()=>[le(" + "+Z(V.$t("core::tags.add_new")),1)]),_:1},512),[[pe,!I.value]])],512),[[pe,!I.value]])]),key:"1"}:void 0]),1032,["class","model-value","options","reduce","simple","filterable","placeholder","toggle-icon","list-wrapper-class","list-class","reorderable"])}}},tpe={__name:"TagsField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){var i;return((i=n.field.value)==null?void 0:i.map(u=>typeof u=="string"?u:u.name))||[]}function s(){o("setInitialValue",r())}return s(),(i,u)=>{const c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:m,fieldId:f})=>[l(dn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(hs,Ue({modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v),disabled:m,"input-id":f,name:e.field.attribute,type:e.field.type},e.field.attributes),null,16,["modelValue","disabled","input-id","name","type"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},npe=Object.freeze(Object.defineProperty({__proto__:null,default:tpe},Symbol.toStringTag,{value:"Module"})),ope=["textContent"],ape={__name:"TextField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue"),r=Pt(null);function s(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}async function i(){await ze(),!u.value||!a.value?r.value=null:r.value=await c(a.value)}const u=O(()=>!n.resourceId&&n.field.checkDuplicatesWith&&Object.keys(n.field.checkDuplicatesWith).length>0);async function c(m){const{data:f}=await Innoclapps.request(n.field.checkDuplicatesWith.url,{params:{q:m,...n.field.checkDuplicatesWith.params}});return f.length>0?f[0]:null}return s(),(m,f)=>{const v=d("IFormInput"),y=d("I18nT"),b=d("IAlertBody"),w=d("IButton"),k=d("IAlertActions"),x=d("IAlert"),I=d("BaseFormField");return g(),A(I,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:C,fieldId:S})=>[l(dn,{field:e.field,label:e.field.label,"field-id":S,"validation-errors":e.validationErrors},{default:p(()=>[l(v,Ue({id:S,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=T=>a.value=T),disabled:C,name:e.field.attribute,type:e.field.inputType||"text"},e.field.attributes,{debounce:u.value,onInput:i}),null,16,["id","modelValue","disabled","name","type","debounce"]),r.value?(g(),A(x,{key:0,class:"mt-2",dismissible:"",onDismissed:f[1]||(f[1]=T=>r.value=null)},{default:p(({variant:T})=>[l(b,null,{default:p(()=>[l(y,{scope:"global",keypath:e.field.checkDuplicatesWith.lang_keypath},{display_name:p(()=>[_("span",{class:"font-medium",textContent:Z(r.value.display_name)},null,8,ope)]),_:1},8,["keypath"])]),_:1}),l(k,null,{default:p(()=>[l(w,{rel:"noopener noreferrer",target:"_blank",icon:"ExternalLink",href:r.value.path,variant:T,text:m.$t("core::app.view_record"),ghost:""},null,8,["href","variant","text"])]),_:2},1024)]),_:1})):K("",!0)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},rpe=Object.freeze(Object.defineProperty({__proto__:null,default:ape},Symbol.toStringTag,{value:"Module"})),lpe={__name:"TextareaField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("IFormTextarea"),c=d("BaseFormField");return g(),A(c,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:m,fieldId:f})=>[l(dn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({id:f,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=v=>a.value=v),disabled:m,name:e.field.attribute},e.field.attributes),null,16,["id","modelValue","disabled","name"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},spe=Object.freeze(Object.defineProperty({__proto__:null,default:lpe},Symbol.toStringTag,{value:"Module"})),ipe={__name:"TimezoneField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),Innoclapps.timezones(n.field.timezones),(s,i)=>{const u=d("BaseFormField");return g(),A(u,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:c,fieldId:m})=>[l(dn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[l(EI,Ue({modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),"field-id":m,clearable:!0,name:e.field.attribute,disabled:c},e.field.attributes),null,16,["modelValue","field-id","name","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},upe=Object.freeze(Object.defineProperty({__proto__:null,default:ipe},Symbol.toStringTag,{value:"Module"})),cpe={class:"relative"},dpe={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},mpe=_("span",{class:"text-base text-neutral-500 dark:text-neutral-300 sm:text-sm",textContent:"https://"},null,-1),fpe=[mpe],ppe={class:"absolute inset-y-0 right-0 flex items-center pr-3"},vpe={__name:"UrlField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("IFormInput"),c=d("Icon"),m=d("ILink"),f=d("BaseFormField");return g(),A(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:v,fieldId:y})=>[l(dn,{field:e.field,label:e.field.label,"field-id":y,"validation-errors":e.validationErrors},{default:p(()=>[_("div",cpe,[e.field.https?(g(),D("div",dpe,fpe)):K("",!0),l(u,Ue({id:y,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=b=>a.value=b),type:"url",disabled:v,name:e.field.attribute},e.field.attributes,{class:["pr-10 sm:pr-10",{"pl-[calc(theme(spacing.20)-12px)] sm:pl-16":e.field.https}]}),null,16,["id","modelValue","disabled","name","class"]),_("div",ppe,[l(m,{variant:"primary",href:a.value||"#",basic:!a.value,class:be(a.value?"":"pointer-events-none")},{default:p(()=>[l(c,{icon:"Link",class:"size-5"})]),_:1},8,["href","basic","class"])])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},hpe=Object.freeze(Object.defineProperty({__proto__:null,default:vpe},Symbol.toStringTag,{value:"Module"})),qi=rs(()=>{const{setLoading:e,isLoading:t}=An(),n=M([]),o=O(()=>Vt(n.value,"name"));c();function a(m){return n.value.findIndex(f=>f.id==m)}function r(m){n.value.splice(a(m),1)}function s(m){n.value.push(m)}function i(m,f){n.value[a(m)]=f}async function u(m){await Innoclapps.request().delete(`/teams/${m}`),r(m)}function c(m){e(!0),Innoclapps.request("/teams",m).then(({data:f})=>n.value=f).finally(()=>e(!1))}return{teams:n,teamsByName:o,teamsAreBeingFetched:t,addTeam:s,removeTeam:r,setTeam:i,deleteTeam:u,fetchTeams:c}}),gpe={class:"mt-1"},bpe=_("legend",{class:"sr-only"},"Visibility group",-1),ype={class:"space-y-3 sm:flex sm:items-center sm:space-x-4 sm:space-y-0"},_pe={class:"mt-4"},Ipe={class:"mt-0.5 block text-right text-xs italic text-neutral-500 dark:text-neutral-300"},wpe={class:"mt-4"},Id={__name:"VisibilityGroupSelector",props:{disabled:Boolean,dependsOn:Array,type:String},emits:["update:type","update:dependsOn"],setup(e){const{users:t}=Ne(),{teamsByName:n}=qi(),o=O(()=>t.value.filter(a=>!a.super_admin));return(a,r)=>{const s=d("IFormLabel"),i=d("IFormRadio"),u=d("IFormRadioLabel"),c=d("IFormRadioField"),m=d("ICustomSelect");return g(),D("div",null,[l(s,{as:"p"},{default:p(()=>[le(Z(a.$t("core::app.visibility_group.visible_to")),1)]),_:1}),_("fieldset",gpe,[bpe,_("div",ype,[l(c,null,{default:p(()=>[l(i,{value:"all",name:"visible_to","model-value":e.type,disabled:e.disabled,"onUpdate:modelValue":r[0]||(r[0]=f=>a.$emit("update:type",f)),onChange:r[1]||(r[1]=f=>a.$emit("update:dependsOn",[]))},null,8,["model-value","disabled"]),l(u,{text:a.$t("core::app.visibility_group.all")},null,8,["text"])]),_:1}),l(c,null,{default:p(()=>[l(i,{value:"teams",name:"visible_to","model-value":e.type,disabled:e.disabled,"onUpdate:modelValue":r[2]||(r[2]=f=>a.$emit("update:type",f)),onChange:r[3]||(r[3]=f=>a.$emit("update:dependsOn",[]))},null,8,["model-value","disabled"]),l(u,{text:a.$t("users::team.teams")},null,8,["text"])]),_:1}),l(c,null,{default:p(()=>[l(i,{value:"users",name:"visible_to","model-value":e.type,disabled:e.disabled,"onUpdate:modelValue":r[4]||(r[4]=f=>a.$emit("update:type",f)),onChange:r[5]||(r[5]=f=>a.$emit("update:dependsOn",[]))},null,8,["model-value","disabled"]),l(u,{text:a.$t("users::user.users")},null,8,["text"])]),_:1})])]),ne(_("div",_pe,[l(m,{label:"name","model-value":e.dependsOn,options:o.value,placeholder:a.$t("users::user.select"),reduce:f=>f.id,multiple:"","onUpdate:modelValue":r[6]||(r[6]=f=>a.$emit("update:dependsOn",f))},null,8,["model-value","options","placeholder","reduce"]),_("span",Ipe," * "+Z(a.$t("users::user.admin_users_excluded")),1)],512),[[pe,e.type==="users"]]),ne(_("div",wpe,[l(m,{label:"name","model-value":e.dependsOn,options:h(n),placeholder:a.$t("users::team.select"),reduce:f=>f.id,multiple:"","onUpdate:modelValue":r[7]||(r[7]=f=>a.$emit("update:dependsOn",f))},null,8,["model-value","options","placeholder","reduce"])],512),[[pe,e.type==="teams"]])])}}},xpe={__name:"VisibilityGroupField",props:{field:{type:Object,required:!0},modelValue:{type:Object,default:()=>({})},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=M(s());function r(u){o("update:modelValue",u)}function s(){return!n.field.value||!n.field.value.type?{type:"all",depends_on:[]}:n.field.value}function i(){o("setInitialValue",s())}return i(),$e(a,r,{deep:!0}),(u,c)=>{const m=d("BaseFormField");return g(),A(m,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:f,fieldId:v})=>[l(dn,{field:e.field,label:e.field.label,"field-id":v,"validation-errors":e.validationErrors},{default:p(()=>[l(Id,Ue({type:a.value.type,"onUpdate:type":c[0]||(c[0]=y=>a.value.type=y),dependsOn:a.value.depends_on,"onUpdate:dependsOn":c[1]||(c[1]=y=>a.value.depends_on=y)},e.field.attributes,{disabled:f}),null,16,["type","dependsOn","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},kpe=Object.freeze(Object.defineProperty({__proto__:null,default:xpe},Symbol.toStringTag,{value:"Module"})),$pe={key:1},ja={__name:"OptionsList",props:["value","displayAsBadges","eachOnNewLine","onOptionClick","list","labelKey","valueKey"],setup(e){const t=e,{floatResource:n}=ao(),o=O(()=>t.value?qn(t.value):[]),a=O(()=>o.value.length);function r(s){if(typeof s=="string"){if(!t.list)return s;let i=t.list.find(u=>u[t.valueKey]===s);return i?i[t.labelKey]:s}return s[t.labelKey]}return(s,i)=>a.value>0?(g(),D("div",{key:0,class:be(e.eachOnNewLine?"space-y-0.5":"")},[(g(!0),D(fe,null,Ie(o.value,(u,c)=>(g(),A(Rt(e.onOptionClick?pd:"span"),{key:c,class:be(e.eachOnNewLine?"block":"mr-1.5 last:mr-0"),plain:e.onOptionClick&&!e.displayAsBadges?!1:void 0,to:e.onOptionClick&&e.onOptionClick.action==="redirect"?e.onOptionClick.to.replace("{id}",u.id):void 0,onClick:m=>e.onOptionClick&&e.onOptionClick.action==="float"?h(n)({resourceName:e.onOptionClick.resourceName,resourceId:u.id,mode:e.onOptionClick.mode||"detail"}):void 0},{default:p(()=>[(g(),A(Rt(e.displayAsBadges?h(Li):"span"),{variant:e.displayAsBadges&&!u.swatch_color?"neutral":void 0,icon:u.icon&&e.displayAsBadges?u.icon:void 0,color:e.displayAsBadges&&u.swatch_color?u.swatch_color:void 0},{default:p(()=>[le(Z(r(u)),1)]),_:2},1032,["variant","icon","color"]))]),_:2},1032,["class","plain","to","onClick"]))),128))],2)):(g(),D("span",$pe,"—"))}},Cpe={__name:"BelongsToField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("BaseDetailField");return g(),A(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(ja,{value:e.field.value,"label-key":e.field.labelKey,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick},null,8,["value","label-key","display-as-badges","on-option-click"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Spe=Object.freeze(Object.defineProperty({__proto__:null,default:Cpe},Symbol.toStringTag,{value:"Module"})),Tpe={__name:"BooleanField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,n=O(()=>t.field.value===t.field.trueValue);return(o,a)=>{const r=d("BaseDetailField");return g(),A(r,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[_("span",{class:be(["mt-0.5 inline-block size-4 rounded-full",n.value?"bg-success-400":"bg-danger-400"])},null,2)]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Epe=Object.freeze(Object.defineProperty({__proto__:null,default:Tpe},Symbol.toStringTag,{value:"Module"})),Fpe={};function Ape(e,t){const n=d("DetailSelectMultipleField");return g(),A(n)}const Rpe=fn(Fpe,[["render",Ape]]),Dpe=Object.freeze(Object.defineProperty({__proto__:null,default:Rpe},Symbol.toStringTag,{value:"Module"})),Ope={key:1},Bpe={__name:"ColorSwatchField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("BaseDetailField");return g(),A(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:a,value:r})=>[a?(g(),D("span",{key:0,class:"block size-6 rounded-lg",style:Nt({backgroundColor:r})},null,4)):(g(),D("span",Ope,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Npe=Object.freeze(Object.defineProperty({__proto__:null,default:Bpe},Symbol.toStringTag,{value:"Module"})),Ppe={key:0},Mpe={__name:"DateField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{localizedDate:t}=rt();return(n,o)=>{const a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[le(Z(r?h(t)(s):"")+" ",1),r?K("",!0):(g(),D("span",Ppe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Vpe=Object.freeze(Object.defineProperty({__proto__:null,default:Mpe},Symbol.toStringTag,{value:"Module"})),Lpe={key:0},qpe={__name:"DateTimeField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{localizedDateTime:t}=rt();return(n,o)=>{const a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[le(Z(r?h(t)(s):"")+" ",1),r?K("",!0):(g(),D("span",Lpe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Upe=Object.freeze(Object.defineProperty({__proto__:null,default:qpe},Symbol.toStringTag,{value:"Module"})),jpe={key:1},zpe={__name:"DomainField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("ILink"),a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,href:"http://"+s,text:s},null,8,["href","text"])):(g(),D("span",jpe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Hpe=Object.freeze(Object.defineProperty({__proto__:null,default:zpe},Symbol.toStringTag,{value:"Module"})),Wpe={key:0},Gpe={__name:"EditorField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("TextCollapse"),a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[l(o,{text:s||""},null,8,["text"]),r?K("",!0):(g(),D("span",Wpe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Kpe=Object.freeze(Object.defineProperty({__proto__:null,default:Gpe},Symbol.toStringTag,{value:"Module"})),Zpe={key:1},Ik={__name:"EmailField",props:["resource","resourceName","resourceId","field","isFloating"],emits:["show"],setup(e){return(t,n)=>{const o=d("IDropdownButton"),a=d("IButtonCopy"),r=d("IDropdownItem"),s=d("IDropdownMenu"),i=d("IDropdown"),u=d("BaseDetailField");return g(),A(u,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:c,value:m})=>[c?(g(),A(i,{key:0,onShow:n[0]||(n[0]=f=>t.$emit("show"))},{default:p(()=>[l(o,{class:"break-all",text:m,link:"","no-caret":""},null,8,["text"]),l(s,null,{default:p(()=>[Se(t.$slots,"start",{email:m}),l(a,{as:"IDropdownItem","success-message":t.$t("core::fields.email_copied"),text:m},{default:p(()=>[le(Z(t.$t("core::app.copy")),1)]),_:2},1032,["success-message","text"]),l(r,{href:"mailto:"+m,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)):(g(),D("span",Zpe,"—"))]),_:3},8,["field","is-floating","resource","resource-name","resource-id"])}}},Ype=Object.freeze(Object.defineProperty({__proto__:null,default:Ik},Symbol.toStringTag,{value:"Module"})),Xpe={key:1},Qpe={__name:"IconPickerField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("Icon"),a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,class:"size-5",icon:s},null,8,["icon"])):(g(),D("span",Xpe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Jpe=Object.freeze(Object.defineProperty({__proto__:null,default:Qpe},Symbol.toStringTag,{value:"Module"})),eve={__name:"IdField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("BaseDetailField");return g(),A(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({value:a})=>[le(Z(a),1)]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},tve=Object.freeze(Object.defineProperty({__proto__:null,default:eve},Symbol.toStringTag,{value:"Module"})),nve={key:0},ove={__name:"NumberField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{formatNumber:t}=ro();return(n,o)=>{const a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[le(Z(r?h(t)(s):"")+" ",1),r?K("",!0):(g(),D("span",nve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},ave=Object.freeze(Object.defineProperty({__proto__:null,default:ove},Symbol.toStringTag,{value:"Module"})),rve={__name:"NumericField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,{formatMoney:n,formatNumber:o}=ro(),a=O(()=>{var i;let r=t.field.value;if(Rn(r)&&(r=""),t.field.currency)return n(r,t.field.currency);const s=o(r,{precision:((i=t.field.attributes)==null?void 0:i.precision)||2});return(t.field.prependText||"")+s+(t.field.appendText||"")});return(r,s)=>{const i=d("BaseDetailField");return g(),A(i,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},bn({default:p(()=>[Se(r.$slots,"numeric-field",{formattedValue:a.value},()=>[le(Z(a.value),1)])]),_:2},[Ie(r.$slots,(u,c)=>({name:c,fn:p(m=>[Se(r.$slots,c,en(un(m)))])}))]),1032,["field","is-floating","resource","resource-name","resource-id"])}}},lve=Object.freeze(Object.defineProperty({__proto__:null,default:rve},Symbol.toStringTag,{value:"Module"})),sve={};function ive(e,t){const n=d("DetailSelectField");return g(),A(n)}const uve=fn(sve,[["render",ive]]),cve=Object.freeze(Object.defineProperty({__proto__:null,default:uve},Symbol.toStringTag,{value:"Module"})),dve={__name:"SelectField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,n=O(()=>t.field.value?t.field.options.find(o=>o[t.field.valueKey]==t.field.value):null);return(o,a)=>{const r=d("BaseDetailField");return g(),A(r,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(ja,{value:n.value,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey},null,8,["value","display-as-badges","on-option-click","label-key"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},mve=Object.freeze(Object.defineProperty({__proto__:null,default:dve},Symbol.toStringTag,{value:"Module"})),fve={__name:"SelectMultipleField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("BaseDetailField");return g(),A(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(ja,{value:e.field.value,"display-as-badges":e.field.displayAsBadges,"each-on-new-line":e.field.eachOnNewLine,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey},null,8,["value","display-as-badges","each-on-new-line","on-option-click","label-key"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},pve=Object.freeze(Object.defineProperty({__proto__:null,default:fve},Symbol.toStringTag,{value:"Module"})),vve={__name:"TagsField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("BaseDetailField");return g(),A(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(ja,{"label-key":"name",value:e.field.value,"display-as-badges":!0},null,8,["value"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},hve=Object.freeze(Object.defineProperty({__proto__:null,default:vve},Symbol.toStringTag,{value:"Module"})),gve={key:0},bve={key:1},yve={__name:"TextField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("BaseDetailField");return g(),A(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:a,value:r})=>[a?(g(),D("p",gve,Z(r),1)):(g(),D("span",bve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},_ve=Object.freeze(Object.defineProperty({__proto__:null,default:yve},Symbol.toStringTag,{value:"Module"})),Ive={key:1},wve={__name:"TextareaField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("TextCollapse"),a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,text:s,length:250},null,8,["text"])):(g(),D("span",Ive,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},xve=Object.freeze(Object.defineProperty({__proto__:null,default:wve},Symbol.toStringTag,{value:"Module"})),kve={key:0,class:"text-base sm:text-sm"},$ve={class:"block text-xs text-neutral-500"},Cve={key:1},Sve={__name:"TimezoneField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{DateTime:t}=rt();return(n,o)=>{const a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),D("span",kve,[le(Z(s)+" ",1),_("span",$ve,Z(h(t).now().setZone(s).toLocaleString(h(t).DATETIME_MED_WITH_WEEKDAY)),1)])):(g(),D("span",Cve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Tve=Object.freeze(Object.defineProperty({__proto__:null,default:Sve},Symbol.toStringTag,{value:"Module"})),Eve={key:1},Fve={__name:"UrlField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("ILink"),a=d("BaseDetailField");return g(),A(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,class:"break-all",href:s,text:s},null,8,["href","text"])):(g(),D("span",Eve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Ave=Object.freeze(Object.defineProperty({__proto__:null,default:Fve},Symbol.toStringTag,{value:"Module"})),Rve={__name:"BelongsToField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(ja,{value:e.field.value,field:e.field,"label-key":e.field.labelKey,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick},null,8,["value","field","label-key","display-as-badges","on-option-click"])]),_:1},8,["resource-name","resource-id","row","field"])}}},Dve=Object.freeze(Object.defineProperty({__proto__:null,default:Rve},Symbol.toStringTag,{value:"Module"})),Ove={__name:"BooleanField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,n=O(()=>t.field.value===t.field.trueValue);return(o,a)=>{const r=d("BaseIndexField");return g(),A(r,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[_("span",{class:be(["mt-0.5 inline-block size-4 rounded-full",n.value?"bg-success-400":"bg-danger-400"])},null,2)]),_:1},8,["resource-name","resource-id","row","field"])}}},Bve=Object.freeze(Object.defineProperty({__proto__:null,default:Ove},Symbol.toStringTag,{value:"Module"})),Nve={};function Pve(e,t){const n=d("IndexSelectMultipleField");return g(),A(n)}const Mve=fn(Nve,[["render",Pve]]),Vve=Object.freeze(Object.defineProperty({__proto__:null,default:Mve},Symbol.toStringTag,{value:"Module"})),Lve={key:1},qve={__name:"ColorSwatchField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:a,value:r})=>[a?(g(),D("span",{key:0,class:"block size-6 rounded-md",style:Nt({backgroundColor:r})},null,4)):(g(),D("span",Lve,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Uve=Object.freeze(Object.defineProperty({__proto__:null,default:qve},Symbol.toStringTag,{value:"Module"})),jve={key:0},zve={__name:"DateField",props:["column","row","field","resourceName","resourceId"],setup(e){const{localizedDate:t}=rt();return(n,o)=>{const a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[le(Z(r?h(t)(s):"")+" ",1),r?K("",!0):(g(),D("span",jve,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Hve=Object.freeze(Object.defineProperty({__proto__:null,default:zve},Symbol.toStringTag,{value:"Module"})),Wve={key:0},Gve={__name:"DateTimeField",props:["column","row","field","resourceName","resourceId"],setup(e){const{localizedDateTime:t}=rt();return(n,o)=>{const a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[le(Z(r?h(t)(s):"")+" ",1),r?K("",!0):(g(),D("span",Wve,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Kve=Object.freeze(Object.defineProperty({__proto__:null,default:Gve},Symbol.toStringTag,{value:"Module"})),Zve={key:1},Yve={__name:"DomainField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("ILink"),a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,href:"http://"+s,text:s},null,8,["href","text"])):(g(),D("span",Zve,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Xve=Object.freeze(Object.defineProperty({__proto__:null,default:Yve},Symbol.toStringTag,{value:"Module"})),Qve={key:1},Jve={__name:"EditorField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=M(!0);return(n,o)=>{const a=d("TextCollapse"),r=d("BaseIndexField");return g(),A(r,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:s,value:i})=>[s?(g(),A(a,{key:0,collapsed:t.value,"onUpdate:collapsed":o[0]||(o[0]=u=>t.value=u),text:i||"","strip-tags":!e.column.wrap&&!t.value},null,8,["collapsed","text","strip-tags"])):(g(),D("span",Qve,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},ehe=Object.freeze(Object.defineProperty({__proto__:null,default:Jve},Symbol.toStringTag,{value:"Module"})),the={key:1},wk={__name:"EmailField",props:["column","row","field","resourceName","resourceId"],emits:["show"],setup(e){return(t,n)=>{const o=d("IDropdownButton"),a=d("IButtonCopy"),r=d("IDropdownItem"),s=d("IDropdownMenu"),i=d("IDropdown"),u=d("BaseIndexField");return g(),A(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:c,value:m})=>[c?(g(),A(i,{key:0,onShow:n[0]||(n[0]=f=>t.$emit("show"))},{default:p(()=>[l(o,{text:m,link:"","no-caret":""},null,8,["text"]),l(s,null,{default:p(()=>[Se(t.$slots,"start",{email:m}),l(a,{as:"IDropdownItem","success-message":t.$t("core::fields.email_copied"),text:m},{default:p(()=>[le(Z(t.$t("core::app.copy")),1)]),_:2},1032,["success-message","text"]),l(r,{href:"mailto:"+m,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)):(g(),D("span",the,"—"))]),_:3},8,["resource-name","resource-id","row","field"])}}},nhe=Object.freeze(Object.defineProperty({__proto__:null,default:wk},Symbol.toStringTag,{value:"Module"})),ohe={key:1},ahe={__name:"IconPickerField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("Icon"),a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,class:"size-5",icon:s},null,8,["icon"])):(g(),D("span",ohe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},rhe=Object.freeze(Object.defineProperty({__proto__:null,default:ahe},Symbol.toStringTag,{value:"Module"})),lhe={__name:"IdField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({value:a})=>[le(Z(a),1)]),_:1},8,["resource-name","resource-id","row","field"])}}},she=Object.freeze(Object.defineProperty({__proto__:null,default:lhe},Symbol.toStringTag,{value:"Module"})),ihe={key:0},uhe={__name:"NumberField",props:["column","row","field","resourceName","resourceId"],setup(e){const{formatNumber:t}=ro();return(n,o)=>{const a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[le(Z(r?h(t)(s):"")+" ",1),r?K("",!0):(g(),D("span",ihe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},che=Object.freeze(Object.defineProperty({__proto__:null,default:uhe},Symbol.toStringTag,{value:"Module"})),dhe={__name:"NumericField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{formatMoney:n,formatNumber:o}=ro(),a=O(()=>{var i;let r=t.field.value;if(Rn(r)&&(r=""),t.field.currency)return n(r,t.field.currency);const s=o(r,{precision:((i=t.field.attributes)==null?void 0:i.precision)||2});return(t.field.prependText||"")+s+(t.field.appendText||"")});return(r,s)=>{const i=d("BaseIndexField");return g(),A(i,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},bn({default:p(()=>[Se(r.$slots,"numeric-field",{formattedValue:a.value},()=>[le(Z(a.value),1)])]),_:2},[Ie(r.$slots,(u,c)=>({name:c,fn:p(m=>[Se(r.$slots,c,en(un(m)))])}))]),1032,["resource-name","resource-id","row","field"])}}},mhe=Object.freeze(Object.defineProperty({__proto__:null,default:dhe},Symbol.toStringTag,{value:"Module"})),fhe={};function phe(e,t){const n=d("IndexSelectField");return g(),A(n)}const vhe=fn(fhe,[["render",phe]]),hhe=Object.freeze(Object.defineProperty({__proto__:null,default:vhe},Symbol.toStringTag,{value:"Module"})),ghe={__name:"SelectField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(ja,{value:e.field.value,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey,"value-key":e.field.valueKey,list:e.field.options},null,8,["value","display-as-badges","on-option-click","label-key","value-key","list"])]),_:1},8,["resource-name","resource-id","row","field"])}}},bhe=Object.freeze(Object.defineProperty({__proto__:null,default:ghe},Symbol.toStringTag,{value:"Module"})),yhe={__name:"SelectMultipleField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(ja,{value:e.field.value,"display-as-badges":e.field.displayAsBadges,"each-on-new-line":e.column.wrap,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey},null,8,["value","display-as-badges","each-on-new-line","on-option-click","label-key"])]),_:1},8,["resource-name","resource-id","row","field"])}}},_he=Object.freeze(Object.defineProperty({__proto__:null,default:yhe},Symbol.toStringTag,{value:"Module"})),Ihe={__name:"TagsField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(ja,{"label-key":"name",value:e.field.value,"display-as-badges":!0},null,8,["value"])]),_:1},8,["resource-name","resource-id","row","field"])}}},whe=Object.freeze(Object.defineProperty({__proto__:null,default:Ihe},Symbol.toStringTag,{value:"Module"})),xhe={key:0},khe={key:1},$he={__name:"TextField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:a,value:r})=>[a?(g(),D("p",xhe,Z(r),1)):(g(),D("span",khe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Che=Object.freeze(Object.defineProperty({__proto__:null,default:$he},Symbol.toStringTag,{value:"Module"})),She={key:1},The={__name:"TextareaField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=M(!0);return(n,o)=>{const a=d("TextCollapse"),r=d("BaseIndexField");return g(),A(r,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:s,value:i})=>[s?(g(),A(a,{key:0,collapsed:t.value,"onUpdate:collapsed":o[0]||(o[0]=u=>t.value=u),class:be(!e.column.wrap&&t.value?"whitespace-nowrap":""),"keep-whitespaces":!0,"strip-tags":!e.column.wrap,text:i},null,8,["collapsed","class","strip-tags","text"])):(g(),D("span",She,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Ehe=Object.freeze(Object.defineProperty({__proto__:null,default:The},Symbol.toStringTag,{value:"Module"})),Fhe={key:1},Ahe={__name:"TimezoneField",props:["column","row","field","resourceName","resourceId"],setup(e){const{DateTime:t}=rt();return(n,o)=>{const a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),D(fe,{key:0},[le(Z(s)+" ",1),_("span",{class:be(["text-xs text-neutral-500",e.column.wrap?"block":""])},Z(h(t).now().setZone(s).toLocaleString(h(t).DATETIME_MED_WITH_WEEKDAY)),3)],64)):(g(),D("span",Fhe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Rhe=Object.freeze(Object.defineProperty({__proto__:null,default:Ahe},Symbol.toStringTag,{value:"Module"})),Dhe={key:1},Ohe={__name:"UrlField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("ILink"),a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),A(o,{key:0,href:s,text:s},null,8,["href","text"])):(g(),D("span",Dhe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Bhe=Object.freeze(Object.defineProperty({__proto__:null,default:Ohe},Symbol.toStringTag,{value:"Module"})),Nhe={key:0},Phe={key:1},Mhe={__name:"UserField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("IAvatar"),a=d("BaseIndexField");return g(),A(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),D("span",Nhe,[l(o,{class:"mr-1",size:"xs",src:s.avatar_url,alt:s.name},null,8,["src","alt"]),_("span",null,Z(s.name),1)])):(g(),D("span",Phe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Vhe=Object.freeze(Object.defineProperty({__proto__:null,default:Mhe},Symbol.toStringTag,{value:"Module"})),p1=Object.assign({"./fields/Form/BelongsToField.vue":zme,"./fields/Form/BooleanField.vue":Qme,"./fields/Form/CheckboxField.vue":tfe,"./fields/Form/ColorSwatchField.vue":ofe,"./fields/Form/DateField.vue":rfe,"./fields/Form/DateTimeField.vue":sfe,"./fields/Form/DomainField.vue":ffe,"./fields/Form/EditorField.vue":vfe,"./fields/Form/EmailField.vue":_fe,"./fields/Form/HeadingField.vue":kfe,"./fields/Form/IconPickerField.vue":Cfe,"./fields/Form/NumberField.vue":Tfe,"./fields/Form/NumericField.vue":Bfe,"./fields/Form/RadioField.vue":Mfe,"./fields/Form/ReminderField.vue":zfe,"./fields/Form/SelectField.vue":Gfe,"./fields/Form/SelectMultipleField.vue":Yfe,"./fields/Form/TagsField.vue":npe,"./fields/Form/TextField.vue":rpe,"./fields/Form/TextareaField.vue":spe,"./fields/Form/TimezoneField.vue":upe,"./fields/Form/UrlField.vue":hpe,"./fields/Form/VisibilityGroupField.vue":kpe}),v1=Object.assign({"./fields/Detail/BelongsToField.vue":Spe,"./fields/Detail/BooleanField.vue":Epe,"./fields/Detail/CheckboxField.vue":Dpe,"./fields/Detail/ColorSwatchField.vue":Npe,"./fields/Detail/DateField.vue":Vpe,"./fields/Detail/DateTimeField.vue":Upe,"./fields/Detail/DomainField.vue":Hpe,"./fields/Detail/EditorField.vue":Kpe,"./fields/Detail/EmailField.vue":Ype,"./fields/Detail/IconPickerField.vue":Jpe,"./fields/Detail/IdField.vue":tve,"./fields/Detail/NumberField.vue":ave,"./fields/Detail/NumericField.vue":lve,"./fields/Detail/RadioField.vue":cve,"./fields/Detail/SelectField.vue":mve,"./fields/Detail/SelectMultipleField.vue":pve,"./fields/Detail/TagsField.vue":hve,"./fields/Detail/TextField.vue":_ve,"./fields/Detail/TextareaField.vue":xve,"./fields/Detail/TimezoneField.vue":Tve,"./fields/Detail/UrlField.vue":Ave}),h1=Object.assign({"./fields/Index/BelongsToField.vue":Dve,"./fields/Index/BooleanField.vue":Bve,"./fields/Index/CheckboxField.vue":Vve,"./fields/Index/ColorSwatchField.vue":Uve,"./fields/Index/DateField.vue":Hve,"./fields/Index/DateTimeField.vue":Kve,"./fields/Index/DomainField.vue":Xve,"./fields/Index/EditorField.vue":ehe,"./fields/Index/EmailField.vue":nhe,"./fields/Index/IconPickerField.vue":rhe,"./fields/Index/IdField.vue":she,"./fields/Index/NumberField.vue":che,"./fields/Index/NumericField.vue":mhe,"./fields/Index/RadioField.vue":hhe,"./fields/Index/SelectField.vue":bhe,"./fields/Index/SelectMultipleField.vue":_he,"./fields/Index/TagsField.vue":whe,"./fields/Index/TextField.vue":Che,"./fields/Index/TextareaField.vue":Ehe,"./fields/Index/TimezoneField.vue":Rhe,"./fields/Index/UrlField.vue":Bhe,"./fields/Index/UserField.vue":Vhe});function Nv(e){return e.split("/").at(-1).split(".")[0]}function Lhe(e){for(const t in p1)e.component(`Form${Nv(t)}`,p1[t].default)}function qhe(e){for(const t in v1)e.component(`Detail${Nv(t)}`,v1[t].default)}function Uhe(e){for(const t in h1)e.component(`Index${Nv(t)}`,h1[t].default)}function jhe(e){Lhe(e),qhe(e),Uhe(e)}zhe();window.Innoclapps&&Innoclapps.booting(function(e,t,n){const o=bo();t.beforeEach((s,i,u)=>{s.meta.title&&(o.value=s.meta.title),n.state.sidebarOpen&&n.commit("SET_SIDEBAR_OPEN",!1),u()}),Lme(e),jhe(e),n.registerModule("fields",DY),n.registerModule("table",HY),n.registerModule("filters",MY),n.registerModule("queryBuilder",UY),EY.forEach(s=>t.addRoute(s));const a={delay:15,delayOnTouchOnly:!0,animation:0,disabled:!1,ghostClass:"drag-ghost-rounded"},r={scroll:!0,scrollSpeed:50,forceFallback:!0,...a};e.config.globalProperties.$draggable={common:a,scrollable:r},this.$on("conflict",s=>{s&&this.info(s)}),this.$on("error-404",()=>{t.replace({name:"404"})}),this.$on("error-403",s=>{s.response.config.url!=="/broadcasting/auth"&&t.replace({name:"403",query:{message:s.response.data.message}})}),this.$on("error",s=>{s&&this.error(s)}),this.$on("too-many-requests",()=>{this.error(at("core::app.throttle_error"))}),this.$on("token-expired",()=>{this.error(at("core::app.token_expired"),3e4,{action:{onClick:()=>window.location.reload(),text:at("core::app.reload")}})}),this.$on("maintenance-mode",s=>{this.info(s||"Down for maintenance",3e4,{action:{onClick:()=>window.location.reload(),text:at("core::app.reload")}})})});function zhe(){window._app_={router:{useRoute:It,useRouter:_t,onBeforeRouteUpdate:Va,onBeforeRouteLeave:X_},store:{useStore:cn},i18n:{useI18n:Ee,t:GD,translate:at}}}function Hhe(e,t){var o;(o=Innoclapps.broadcaster)!=null&&o.hasDriver()&&window.Echo.private("Modules.Users.App.Models.User."+e).notification(t)}function Ui(e,t,n){var i;const o=((i=Innoclapps.broadcaster)==null?void 0:i.hasDriver())||!1,a=M(null);G1(()=>{a.value=pt(e)}),$e(a,(u,c)=>{c&&s(c),u&&r()},{immediate:!0});function r(){!o||!a.value||window.Echo.private(a.value).listen(t,n)}function s(u){!o||!u&&!a.value||window.Echo.private(u||a.value).stopListening(t,n)}return wM(s),{start:r,stop:s}}class Whe{constructor(t,n="authorizations"){this.user=t,this.authorizationProperty=n}isSuperAdmin(){return!!this.user.super_admin}isRegularUser(){return!this.isSuperAdmin()}userCan(t){return this.before()?!0:this.user.permissions.indexOf(t)>-1}userCant(t){return!this.userCan(t)}before(){return this.isSuperAdmin()?!0:null}allows(t,n){return this.before()?!0:this.user&&Object.hasOwn(n,this.authorizationProperty)?n[this.authorizationProperty][t]:!1}denies(t,n){return!this.allows(t,n)}}const Ghe={install(e,t){e.config.globalProperties.$gate=new Whe(t)}},Khe={__name:"UserInvitationAcceptForm",props:{invitation:{type:Object,required:!0},timezones:{type:Array,required:!0},dateFormat:String,timeFormat:String},setup(e){const t=e,{t:n}=Ee(),{appUrl:o}=Ne(),{guessTimezone:a}=rt(),{form:r}=Ze({name:null,password:null,timezone:a(),locale:"en",date_format:t.dateFormat,time_format:t.timeFormat,password_confirmation:null,email:t.invitation.email}),s=M(!1);function i(){s.value=!0,r.post(t.invitation.link).then(()=>window.location.href=o).catch(u=>{u.isValidationError()&&Innoclapps.error(n("core::app.form_validation_failed_with_sections"),3e3)}).finally(()=>s.value=!1)}return Innoclapps.timezones(t.timezones),(u,c)=>{const m=d("ITab"),f=d("ITabList"),v=d("IFormInput"),y=d("IFormError"),b=d("IFormGroup"),w=d("ITabPanel"),k=d("IButton"),x=d("ITabPanels"),I=d("ITabGroup");return g(),D("form",{onSubmit:ot(i,["prevent"])},[l(I,null,{default:p(()=>[l(f,{class:"-mt-5"},{default:p(()=>[l(m,{title:u.$t("users::profile.profile")},null,8,["title"]),l(m,{title:u.$t("auth.password")},null,8,["title"]),l(m,{title:u.$t("users::user.localization")},null,8,["title"])]),_:1}),l(x,null,{default:p(()=>[l(w,null,{default:p(()=>[l(b,{"label-for":"name",label:u.$t("users::user.name"),required:""},{default:p(()=>[l(v,{id:"name",ref:"name",modelValue:h(r).name,"onUpdate:modelValue":c[0]||(c[0]=C=>h(r).name=C),type:"text"},null,8,["modelValue"]),l(y,{error:h(r).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"email",label:u.$t("users::user.email")},{default:p(()=>[l(v,{id:"email",modelValue:h(r).email,"onUpdate:modelValue":c[1]||(c[1]=C=>h(r).email=C),name:"email",type:"email",disabled:""},null,8,["modelValue"]),l(y,{error:h(r).getError("email")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(w,null,{default:p(()=>[l(b,{"label-for":"password",label:u.$t("auth.password"),required:""},{default:p(()=>[l(v,{id:"password",modelValue:h(r).password,"onUpdate:modelValue":c[2]||(c[2]=C=>h(r).password=C),name:"password",type:"password"},null,8,["modelValue"]),l(y,{error:h(r).getError("password")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"password_confirmation",label:u.$t("auth.confirm_password"),required:""},{default:p(()=>[l(v,{id:"password_confirmation",modelValue:h(r).password_confirmation,"onUpdate:modelValue":c[3]||(c[3]=C=>h(r).password_confirmation=C),name:"password_confirmation",type:"password"},null,8,["modelValue"]),l(y,{error:h(r).getError("password_confirmation")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(w,null,{default:p(()=>[l(Kc,{form:h(r),"onUpdate:timeFormat":c[4]||(c[4]=C=>h(r).time_format=C),"onUpdate:dateFormat":c[5]||(c[5]=C=>h(r).date_format=C),"onUpdate:locale":c[6]||(c[6]=C=>h(r).locale=C),"onUpdate:timezone":c[7]||(c[7]=C=>h(r).timezone=C)},null,8,["form"])]),_:1}),l(k,{type:"submit",class:"mt-2",disabled:s.value,loading:s.value,text:u.$t("users::user.accept_invitation")},null,8,["disabled","loading","text"])]),_:1})]),_:1})],32)}}};function Fr(e){return Et(e.collection,["id",parseInt(Innoclapps.scriptConfig("user_id"))])}const Zhe={collection:[],endpoint:"/users"},Yhe={SET(e,t){e.collection=t},ADD(e,t){e.collection.push(t)},UPDATE(e,t){const n=Et(e.collection,["id",parseInt(t.id)]);n!==-1&&(e.collection[n]=t.item)},REMOVE(e,t){const n=Et(e.collection,["id",parseInt(t)]);n!=-1&&e.collection.splice(n,1)},SET_TOTAL_UNREAD_NOTIFICATIONS(e,t){const n=Fr(e);e.collection[n].notifications.unread_count=t},INCREMENT_TOTAL_UNREAD_NOTIFICATIONS(e){const t=Fr(e);e.collection[t].notifications.unread_count=e.collection[t].notifications.unread_count+1},DECREMENT_TOTAL_UNREAD_NOTIFICATIONS(e){const t=Fr(e);e.collection[t].notifications.unread_count=e.collection[t].notifications.unread_count-1},ADD_DASHBOARD(e,t){const n=Fr(e);e.collection[n].dashboards.push(t),t.is_default&&e.collection[n].dashboards.forEach((o,a)=>{o.id!=t.id&&(e.collection[a].dashboards[a].is_default=!1)})},UPDATE_DASHBOARD(e,t){const n=Fr(e),o=Et(e.collection[n].dashboards,["id",parseInt(t.id)]);e.collection[n].dashboards[o]=Object.assign({},e.collection[n].dashboards[o],t),t.is_default&&e.collection[n].dashboards.forEach((a,r)=>{a.id!=t.id&&(e.collection[n].dashboards[r].is_default=!1)})},REMOVE_DASHBOARD(e,t){const n=Fr(e),o=Et(e.collection[n].dashboards,["id",parseInt(t)]);e.collection[n].dashboards.splice(o,1)}},Xhe={getById:e=>t=>ut(e.collection,["id",parseInt(t)]),current(e){return e.collection[Fr(e)]}},Qhe={namespaced:!0,state:Zhe,getters:Xhe,mutations:Yhe},Jhe={class:"mx-auto max-w-5xl"},e0e={key:0,class:"px-6"},t0e={class:"-my-1.5"},n0e={class:"flex items-center justify-between space-x-2"},o0e={__name:"UsersPersonalAccessTokens",setup(e){const t=M(null),n=M(!1),o=M(!1),a=M(!1),r=vc([]),{form:s}=Ze({name:""},{resetOnSuccess:!0}),{localizedDateTime:i}=rt(),{currentUser:u}=Ne(),c=_t(),m=O(()=>r.length);function f(){v()}function v(){a.value=!0,Innoclapps.request("/personal-access-tokens").then(x=>{r.push(...x.data)}).finally(()=>a.value=!1)}function y(){o.value=!0}function b(){t.value=null,s.post("/personal-access-tokens").then(x=>{r.push(x.accessToken),w(x.plainTextToken)})}function w(x){o.value=!1,t.value=x,n.value=!0}async function k(x){await Innoclapps.request().delete(`/personal-access-tokens/${x.id}`),r.splice(r.findIndex(I=>I.id===x.id),1)}return Pa(()=>{u.value.access_api?f():c.push({path:"/403"})}),(x,I)=>{const C=d("ICardHeading"),S=d("IButton"),T=d("ICardActions"),E=d("ICardHeader"),$=d("ITableHeader"),F=d("ITableRow"),R=d("ITableHead"),B=d("ITableCell"),V=d("ITableBody"),P=d("ITable"),z=d("IEmptyState"),H=d("ICardBody"),j=d("ICard"),N=d("IFormInput"),L=d("IFormError"),U=d("IFormGroup"),ee=d("IModal"),G=d("ITextDisplay"),W=d("IText"),ae=d("IButtonCopy"),ue=d("MainLayout"),ce=Ve("i-tooltip");return g(),A(ue,null,{default:p(()=>[_("div",Jhe,[l(E,null,{default:p(()=>[l(C,{text:x.$t("core::api.personal_access_tokens")},null,8,["text"]),l(T,null,{default:p(()=>[ne(l(S,{variant:"primary",icon:"PlusSolid",text:x.$t("core::api.create_token"),onClick:y},null,8,["text"]),[[pe,m.value>0]])]),_:1})]),_:1}),l(j,{overlay:a.value},{default:p(()=>[m.value>0?(g(),D("div",e0e,[l(P,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(R,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(F,null,{default:p(()=>[l($,null,{default:p(()=>[le(Z(x.$t("core::api.token_name")),1)]),_:1}),l($,null,{default:p(()=>[le(Z(x.$t("core::api.token_last_used")),1)]),_:1}),l($,null,{default:p(()=>[le(Z(x.$t("core::app.created_at")),1)]),_:1}),l($,{width:"8%"})]),_:1})]),_:1}),l(V,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(r),oe=>(g(),A(F,{key:oe.id},{default:p(()=>[l(B,{class:"font-medium"},{default:p(()=>[le(Z(oe.name),1)]),_:2},1024),l(B,null,{default:p(()=>[le(Z(oe.last_used_at?h(i)(oe.last_used_at):"N/A"),1)]),_:2},1024),l(B,null,{default:p(()=>[le(Z(h(i)(oe.created_at)),1)]),_:2},1024),l(B,{class:"text-right"},{default:p(()=>[_("div",t0e,[ne(l(S,{icon:"Trash",small:"",basic:"",onClick:ie=>x.$confirm({message:x.$t("core::api.token_delete_warning")}).then(()=>k(oe))},null,8,["onClick"]),[[ce,x.$t("core::api.revoke_token")]])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):a.value?K("",!0):(g(),A(H,{key:1},{default:p(()=>[l(z,{title:x.$t("core::api.no_tokens"),"button-text":x.$t("core::api.create_token"),description:x.$t("core::api.empty_state.description"),onClick:y},null,8,["title","button-text","description"])]),_:1}))]),_:1},8,["overlay"])]),l(ee,{visible:o.value,"onUpdate:visible":I[1]||(I[1]=oe=>o.value=oe),size:"sm","ok-disabled":h(s).busy,"ok-text":x.$t("core::app.create"),title:x.$t("core::api.create_token"),form:"",onShown:I[2]||(I[2]=()=>x.$refs.createTokenNameRef.focus()),onSubmit:b},{default:p(()=>[l(U,{"label-for":"name",label:x.$t("core::api.token_name"),required:""},{default:p(()=>[l(N,{id:"name",ref:"createTokenNameRef",modelValue:h(s).name,"onUpdate:modelValue":I[0]||(I[0]=oe=>h(s).name=oe),name:"name"},null,8,["modelValue"]),l(L,{error:h(s).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["visible","ok-disabled","ok-text","title"]),l(ee,{visible:n.value,"onUpdate:visible":I[3]||(I[3]=oe=>n.value=oe),size:"sm","hide-header":"","static-backdrop":""},{"modal-footer":p(({cancel:oe})=>[_("div",n0e,[l(S,{variant:"secondary",text:x.$t("core::app.hide"),onClick:oe},null,8,["text","onClick"]),ne(l(ae,{class:"mt-1.5",text:t.value},null,8,["text"]),[[ce,x.$t("core::app.copy")]])])]),default:p(()=>[l(G,{class:"mb-2"},{default:p(()=>[le(Z(x.$t("core::api.personal_access_token")),1)]),_:1}),l(W,{class:"text-warning-700 dark:text-warning-600"},{default:p(()=>[le(Z(x.$t("core::api.after_token_created_info")),1)]),_:1}),l(W,{class:"mt-5 select-all break-all rounded-lg border border-neutral-300 p-1.5 text-center dark:border-neutral-400"},{default:p(()=>[le(Z(t.value),1)]),_:1})]),_:1},8,["visible"])]),_:1})}}};function a0e(e,t,n,o){var a=-1,r=e==null?0:e.length;for(o&&r&&(n=e[++a]);++a<r;)n=t(n,e[a],a,e);return n}var r0e=a0e;function l0e(e,t,n,o,a){return a(e,function(r,s,i){n=o?(o=!1,r):t(n,r,s,i)}),n}var s0e=l0e,i0e=r0e,u0e=$i,c0e=ra,d0e=s0e,m0e=Fn;function f0e(e,t,n){var o=m0e(e)?i0e:d0e,a=arguments.length<3;return o(e,c0e(t),n,a,u0e)}var p0e=f0e;const wd=Bt(p0e),v0e={class:"rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-5 shadow-sm dark:border-neutral-500/30 dark:bg-neutral-800/60"},h0e={class:"relative mb-8 flex h-16 w-full items-center justify-center rounded-lg border border-neutral-200 bg-white p-3 text-center dark:border-neutral-600 dark:bg-neutral-700"},g0e={class:"mb-10"},b0e={class:"flex justify-between"},y0e={class:"mb-3"},_0e={class:"flex justify-between"},I0e=["max"],w0e={class:"mb-3"},x0e={class:"flex justify-between"},k0e=["max"],$0e={class:"mb-3"},C0e={class:"flex justify-between"},S0e=["max"],T0e={__name:"PasswordGenerator",setup(e){const t=M(""),n=M({maxLength:64,maxDigits:10,maxSymbols:10,length:12,digits:4,symbols:2,ambiguous:!0});$e(()=>n.value.length,a),$e(()=>n.value.digits,a),$e(()=>n.value.symbols,a);const o=O(()=>{let r={excess:0,upperCase:0,numbers:0,symbols:0},s={excess:3,upperCase:4,numbers:5,symbols:5,combo:0,flatLower:0,flatNumber:0},i={text:"",score:0},u=30;for(let m=0;m<t.value.length;m++)t.value.charAt(m).match(/[A-Z]/g)&&r.upperCase++,t.value.charAt(m).match(/[0-9]/g)&&r.numbers++,t.value.charAt(m).match(/(.*[!,@,#,$,%,^,&,*,?,_,~])/)&&r.symbols++;r.excess=t.value.length-6,r.upperCase&&r.numbers&&r.symbols?s.combo=25:(r.upperCase&&r.numbers||r.upperCase&&r.symbols||r.numbers&&r.symbols)&&(s.combo=15),t.value.match(/^[\sa-z]+$/)&&(s.flatLower=-30),t.value.match(/^[\s0-9]+$/)&&(s.flatNumber=-50);let c=u+r.excess*s.excess+r.upperCase*s.upperCase+r.numbers*s.numbers+r.symbols*s.symbols+s.combo+s.flatLower+s.flatNumber;return c<30?(i.text="weak",i.score=10,i):c>=30&&c<75?(i.text="average",i.score=40,i):c>=75&&c<150?(i.text="strong",i.score=75,i):(i.text="secure",i.score=100,i)});function a(){let r=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],s=["=","+","-","^","?","!","%","&","*","$","#","^","@","|"],i=[],u=[];for(let c=0;c<n.value.length;c++)u.push(c),Math.round(Math.random()*1)===0?i[c]=r[Math.floor(Math.random()*r.length)].toUpperCase():i[c]=r[Math.floor(Math.random()*r.length)];for(let c=0;c<n.value.digits;c++){let m=Math.round(Math.random()*9),f=u[Math.floor(Math.random()*u.length)];i[f]=m;let v=u.indexOf(f);c!=-1&&u.splice(v,1)}for(let c=0;c<n.value.symbols;c++){let m=s[Math.floor(Math.random()*s.length)],f=u[Math.floor(Math.random()*u.length)];i[f]=m;let v=u.indexOf(f);c!=-1&&u.splice(v,1)}t.value=i.join("")}return Je(()=>{a()}),(r,s)=>{const i=d("ITextDisplay"),u=d("ITextDark"),c=d("IButton"),m=d("IButtonCopy"),f=d("IFormLabel"),v=Ve("i-tooltip"),y=Ve("t");return g(),D("section",v0e,[l(i,{class:"mb-2",text:r.$t("core::app.password_generator.heading")},null,8,["text"]),_("div",h0e,[l(u,{class:"mr-10 select-all"},{default:p(()=>[le(Z(t.value),1)]),_:1}),l(c,{icon:"Refresh",basic:"",small:"",onClick:a}),ne(l(m,{class:"ml-1",text:t.value,"success-message":r.$t("core::app.password_generator.copied"),basic:"",small:""},null,8,["text","success-message"]),[[v,r.$t("core::app.copy")]])]),_("div",g0e,[_("div",b0e,[ne(l(f,null,null,512),[[y,"core::app.password_generator.strength"]]),l(u,{text:r.$t("core::app.password_generator."+o.value.text)},null,8,["text"])]),ne(_("input",{"onUpdate:modelValue":s[0]||(s[0]=b=>o.value.score=b),type:"range",class:be(["input-score pointer-events-none h-2 w-full appearance-none overflow-hidden rounded-lg focus:outline-none",{"bg-danger-400":o.value.text==="weak","bg-warning-300":o.value.text==="average","bg-success-400":o.value.text==="strong"||o.value.text==="secure"}]),min:"0",max:"100"},null,2),[[ua,o.value.score]])]),_("div",y0e,[_("div",_0e,[ne(l(f,null,null,512),[[y,"core::app.password_generator.length"]]),l(u,{text:n.value.length},null,8,["text"])]),ne(_("input",{"onUpdate:modelValue":s[1]||(s[1]=b=>n.value.length=b),type:"range",class:"range-slider h-2 w-full appearance-none overflow-hidden rounded-lg bg-primary-200 focus:outline-none",min:"6",max:n.value.maxLength},null,8,I0e),[[ua,n.value.length]])]),_("div",w0e,[_("div",x0e,[ne(l(f,null,null,512),[[y,"core::app.password_generator.digits"]]),l(u,{text:n.value.digits},null,8,["text"])]),ne(_("input",{"onUpdate:modelValue":s[2]||(s[2]=b=>n.value.digits=b),type:"range",class:"range-slider h-2 w-full appearance-none overflow-hidden rounded-lg bg-primary-200 focus:outline-none",min:"0",max:n.value.maxDigits},null,8,k0e),[[ua,n.value.digits]])]),_("div",$0e,[_("div",C0e,[ne(l(f,null,null,512),[[y,"core::app.password_generator.symbols"]]),l(u,{text:n.value.symbols},null,8,["text"])]),ne(_("input",{"onUpdate:modelValue":s[3]||(s[3]=b=>n.value.symbols=b),type:"range",class:"range-slider h-2 w-full appearance-none overflow-hidden rounded-lg bg-primary-200 focus:outline-none",min:"0",max:n.value.maxSymbols},null,8,S0e),[[ua,n.value.symbols]])])])}}},xk=fn(T0e,[["__scopeId","data-v-831e9989"]]);let wu=null;function kk(e,t){let n="";e.newlineable?n=`<textarea class="_placeholder"
                          rows="1"
                          data-tag="${e.tag}"
                          placeholder="${t} ${e.description}"></textarea> `:n=`<input type="text"
                          class="_placeholder"
                          data-tag="${e.tag}"
                          placeholder="${t} ${e.description}" /> `,tinymce.activeEditor.execCommand("mceInsertContent",!1,n)}function $k(){const e=X2(async()=>{if(wu!==null)return wu;const{data:a}=await Innoclapps.request("/placeholders",{params:{resources:["contacts","companies","deals"]}});return a.contacts.icon="Users",a.companies.icon="OfficeBuilding",a.deals.icon="CurrencyDollar",wu=a,wu},[],{lazy:!0}),t=O(()=>{let a=[];return Object.keys(e.value).forEach(r=>{e.value[r].placeholders.forEach(s=>{a.push(s)})}),a}),n=O(()=>t.value.reduce((a,r)=>{const s=[r.interpolation_start,r.interpolation_end];return a.length===0?a.push(s):a.forEach(i=>{i[0]!==s[0]&&i[1]!==s[1]&&a.push(s)}),a},[]));async function o(a,r,s){if(!r)return r;let{data:i}=await Innoclapps.request().post(`/placeholders/${s}`,{resources:a,content:r});return i}return{placeholders:e,allPlaceholders:t,allPlaceholdersInterpolations:n,makeParsePlaceholdersRequest:o}}const E0e={class:"mt-4 flex flex-wrap"},F0e=["data-placeholder","onClick","onMouseup","textContent"],A0e={__name:"MailEditorPlacehodersList",props:["placeholders"],emits:["insertRequested"],setup(e,{emit:t}){const n=e,o=t,a=M(null),r=M(null),{copy:s,isSupported:i}=nI({source:"",legacy:!0});function u(v){i.value&&(s(`{{ ${v.tag} }}`),Innoclapps.info("Placeholder copied"))}const c=O(()=>a.value?n.placeholders.filter(v=>v.description.toLowerCase().includes(a.value.toLowerCase())||v.tag.toLowerCase().includes(a.value.toLowerCase())):n.placeholders);function m(v){a.value=null,r.value=v,o("insertRequested",v),Gn(()=>r.value=null,1500)}function f(v){v.dataTransfer.setData("text/plain",v.target.dataset.placeholder)}return(v,y)=>{const b=d("SearchInput"),w=d("Icon"),k=Ve("i-tooltip");return g(),D(fe,null,[l(b,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=x=>a.value=x)},null,8,["modelValue"]),_("div",E0e,[(g(!0),D(fe,null,Ie(c.value,x=>(g(),D("div",{key:x.tag,class:"relative mb-1 mr-1 flex items-center rounded-md border border-neutral-200 px-4 py-1 dark:border-neutral-500/30 dark:hover:border-neutral-700"},[ne(_("a",{href:"#","data-placeholder":`${x.interpolation_start} ${x.tag} ${x.interpolation_end}`,class:be(["mr-1 text-base text-neutral-600 hover:text-neutral-900 dark:text-neutral-200 dark:hover:text-neutral-400 sm:text-sm",{"pointer-events-none":r.value}]),onDragstart:f,onClick:ot(I=>m(x),["prevent"]),onMouseup:ot(I=>u(x),["right"]),onContextmenu:y[1]||(y[1]=ot(()=>{},["prevent"])),textContent:Z(x.description)},null,42,F0e),[[k,`${x.interpolation_start} ${x.tag} ${x.interpolation_end}`,void 0,{top:!0}]]),ne(l(w,{icon:"Check",class:"absolute right-1 top-2 size-3 rounded-full text-neutral-600 dark:text-neutral-100"},null,512),[[pe,r.value&&r.value.tag===x.tag]])]))),128))])],64)}}},R0e={__name:"MailEditorPlaceholders",props:{placeholders:{type:Object}},emits:["inserted"],setup(e,{emit:t}){const n=t;function o(a,r){kk(a,r),Gn(()=>n("inserted"),500)}return(a,r)=>{const s=d("Icon"),i=d("ITab"),u=d("ITabList"),c=d("ITabPanel"),m=d("ITabPanels"),f=d("ITabGroup");return g(),D("div",null,[l(f,null,{default:p(()=>[l(u,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.placeholders,(v,y)=>(g(),A(i,{key:y,class:"first:sm:-ml-2.5"},{default:p(()=>[l(s,{icon:v.icon},null,8,["icon"]),le(" "+Z(v.label),1)]),_:2},1024))),128))]),_:1}),l(m,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.placeholders,(v,y)=>(g(),A(c,{key:y},{default:p(()=>[l(A0e,{placeholders:v.placeholders,onInsertRequested:b=>o(b,v.label)},null,8,["placeholders","onInsertRequested"])]),_:2},1024))),128))]),_:1})]),_:1})])}}},g1="--",D0e="[[",ji=Object.assign({inheritAttrs:!1},{__name:"MailEditor",props:yt({disabled:Boolean,placeholder:{type:String,default:""},withDrop:Boolean,placeholders:Object,placeholdersDisabled:Boolean,placeholdersParseInProgress:Boolean},{modelValue:{default:""},modelModifiers:{}}),emits:yt(["init","placeholderInserted","templateSelected"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const o=e,a=n,r=Zt(e,"modelValue"),{t:s}=Ee(),{scriptConfig:i,isDarkMode:u,locale:c}=Ne();$o();const m=M(!1),f=M(!1);let v=null,y=null,b=null;const w=M({cache_suffix:"?v="+i("version"),branding:!1,promotion:!1,height:200,min_height:200,max_height:800,menubar:!1,contextmenu:!1,statusbar:!1,language:Object.hasOwn(nc,c.value)?nc[c.value]:c.value,automatic_uploads:!0,images_reuse_filename:!0,paste_data_images:o.withDrop,relative_urls:!1,remove_script_host:!1,placeholder:o.placeholder||s("mailclient::mail.new_message_placeholder",{trigger:g1}),browser_spellcheck:!0,body_class:`${u.value?"dark ":""}${o.placeholdersDisabled?"placeholders-disabled":""}`,content_style:`
      .mce-content-body.dark {background: #0f172a;}
      .mce-content-body.dark[data-mce-placeholder]:not(.mce-visualblocks)::before {
          color: #64748b;
      }

      ._placeholder:focus {
          outline: 0;
      }

      ._placeholder {
          box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.050);
          border: 0.0625rem solid #cad1d7;
          min-width: 120px;
          display: inline-block;
          height: 29px;
          border-radius: 4px;
          line-height: 25px;
          padding-right: 0.7rem;
          padding-left: 0.7rem;
      }

      .mce-content-body.dark ._placeholder {
          background-color: #1e293b;
          border-color: #334155;
          color: white;
      }

      ._placeholder[data-autofilled] {
          background-color: #f2f9ff;
      }

      .mce-content-body.dark ._placeholder[data-autofilled] {
          border-color: rgba(14, 165, 233, 0.2);
          background-color: rgba(14, 165, 233, 0.2);
      }

      .placeholders-disabled ._placeholder {
          pointer-events: none !important;
          cursor: not-allowed !important;
          background-color: #f4f5f7 !important;
          opacity: 0.8;
      }

      .mce-content-body.dark.placeholders-disabled ._placeholder {
          background-color: #0f172a !important;
      }`,block_formats:`${tinymce.util.I18n.translate("Paragraph")}=p; ${tinymce.util.I18n.translate("Heading 1")}=h1; ${tinymce.util.I18n.translate("Heading 2")}=h2; ${tinymce.util.I18n.translate("Heading 3")}=h3;  ${tinymce.util.I18n.translate("Heading 4")}=h4`,setup:P=>{o.placeholders&&T(P),B(P),P.on("click",z=>{z.target.classList.contains("_placeholder")&&(z.preventDefault(),S(b,z))}),P.on("init",z=>{b=z.target,f.value=!0,a("init")})},plugins:["quickbars","advlist","lists","autolink","link","image","media","table","autoresize","emoticons"],toolbar:`
        placeholders |
        blocks |
        bold italic underline strikethrough |
        table |
        alignment bullist numlist |
        emoticons blockquote removeformat undo redo`,toolbar_location:"bottom",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:"bold italic underline | forecolor backcolor quicklink | alignleft aligncenter alignright | blockquote blocks",quickbars_image_toolbar:"image | alignleft aligncenter alignright | remove",toolbar_groups:{alignment:{icon:"align-left",tooltip:tinymce.util.I18n.translate("Alignment"),items:"alignleft aligncenter alignright | alignjustify"}},link_context_toolbar:!0}),k=O(()=>({...w.value,...u.value?{skin:"oxide-dark",content_css:"dark"}:{}})),x=O(()=>o.disabled||o.placeholdersParseInProgress);$e(()=>o.placeholdersParseInProgress,P=>{P?y=b.selection.getBookmark(2,!0):!P&&y&&(b.selection.moveToBookmark(y),y=null,tinymce.activeEditor.selection.getSel().focusNode.tagName==="HTML"&&tinymce.activeEditor.selection.collapse(!0))},{flush:"post"}),$e(r,P=>{P===null&&(r.value="")});function I(){b.focus()}function C(P,z){P.tagName.toLowerCase()==="input"?P.setAttribute("value",z):P.textContent=z}function S(P,z){const H=z.target.dataset.tag,j=z.target.tagName.toLowerCase(),N=z.target.placeholder,L=z.target.value;P.windowManager.open({title:N,size:"normal",body:{type:"panel",items:[{type:j,name:"placeholder"}]},initialData:{placeholder:L},buttons:[{type:"cancel",text:s("core::app.cancel")},{type:"submit",text:s("core::app.save"),primary:!0}],onSubmit:function(U){const ee=U.getData(),G=z.currentTarget.querySelector('[data-tag="'+H+'"]');C(G,ee.placeholder),delete G.dataset.autofilled,P.fire("change"),U.close()}})}function T(P){P.ui.registry.addToggleButton("placeholders",{icon:"accordion-toggle",active:m.value,text:s("core::fields.fields"),onAction:z=>{m.value=!m.value,z.setActive(m.value)}}),$(P)}function E(P){const z=Mo(o.placeholders);return Aa(z,(H,j)=>{z[j].placeholders=H.placeholders.filter(N=>H.label.toLowerCase()==P.toLowerCase()||N.description.toLowerCase().indexOf(P.toLowerCase())!==-1)}),z}function $(P){P.ui.registry.addAutocompleter("placeholders",{trigger:g1,minChars:0,columns:1,highlightOn:["main-text"],fetch:function(z){return new Promise(H=>{const j=[];Aa(E(z),N=>{j.push(...N.placeholders.map(L=>V({...L,group_label:N.label},L.description,N.label)))}),H(j)})},onAction:function(z,H,j){P.selection.setRng(H||0),kk(j,j.group_label),Gn(()=>a("placeholderInserted"),500),z.hide()}})}async function F(){v=(await Innoclapps.request("/mails/templates")).data}async function R(P){return v===null&&await F(),v.filter(z=>z.name.toLowerCase().indexOf(P.toLowerCase())!==-1||z.subject.toLowerCase().indexOf(P.toLowerCase())!==-1)}function B(P){P.on("blur",()=>{v=null}),P.ui.registry.addAutocompleter("templates",{trigger:D0e,minChars:1,columns:1,highlightOn:["main-text"],fetch:function(z){return new Promise(H=>{R(z).then(j=>{H(j.map(N=>V(N,N.name,N.subject)))})})},onAction:function(z,H,j){P.selection.setRng(H||0),P.insertContent(""),a("templateSelected",j),z.hide()}})}function V(P,z,H){return{type:"cardmenuitem",value:P,label:z,items:[{type:"cardcontainer",direction:"vertical",items:[{type:"cardtext",text:z,name:"main-text"},{type:"cardtext",text:H}]}]}}return t({focus:I}),(P,z)=>(g(),D(fe,null,[e.placeholders&&f.value?ne((g(),A(R0e,{key:0,placeholders:e.placeholders,onInserted:z[0]||(z[0]=H=>P.$emit("placeholderInserted"))},null,8,["placeholders"])),[[pe,m.value]]):K("",!0),l(h(fx),Ue({modelValue:r.value,"onUpdate:modelValue":z[1]||(z[1]=H=>r.value=H)},P.$attrs,{disabled:x.value,init:k.value}),null,16,["modelValue","disabled","init"])],64))}});var O0e=Ov;function B0e(e){return e&&e.length?O0e(e):[]}var N0e=B0e;const Ck=Bt(N0e),P0e=["textContent"],Sk={__name:"UserNotificationSettings",props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],setup(e){const{scriptConfig:t}=Ne(),n=t("notifications_settings"),o={mail:"Mail",database:"Bell"},a=Ck(qZ(Tn(n,"channels")));return(r,s)=>{const i=d("Icon"),u=d("ITableHeader"),c=d("ITableRow"),m=d("ITableHead"),f=d("IFormCheckbox"),v=d("ITableCell"),y=d("IText"),b=d("ITableBody"),w=d("ITable"),k=Ve("i-tooltip");return g(),A(w,{grid:""},{default:p(()=>[l(m,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(c,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(a),x=>ne((g(),A(u,{key:"heading-"+x,class:"text-center",width:"8%"},{default:p(()=>[l(i,{class:"inline size-5",icon:o[x]},null,8,["icon"])]),_:2},1024)),[[k,r.$t("core::notifications.channels."+x)]])),128)),l(u,{class:"text-left",width:"92%"},{default:p(()=>[le(Z(r.$t("core::notifications.notification")),1)]),_:1})]),_:1})]),_:1}),l(b,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(n),x=>(g(),A(c,{key:x.key},{default:p(()=>[(g(!0),D(fe,null,Ie(h(a),I=>(g(),A(v,{key:I,class:"text-center"},{default:p(()=>[x.channels.indexOf(I)>-1?(g(),A(f,{key:0,checked:e.modelValue[x.key][I],"onUpdate:checked":C=>r.$emit("update:modelValue",{...e.modelValue,[x.key]:{...e.modelValue[x.key],[I]:C}})},null,8,["checked","onUpdate:checked"])):(g(),A(i,{key:1,class:"inline size-5 text-neutral-500",icon:"XSolid"}))]),_:2},1024))),128)),l(v,{class:"space-y-0.5"},{default:p(()=>[_("p",{textContent:Z(x.name)},null,8,P0e),ne(l(y,{text:x.description},null,8,["text"]),[[pe,x.description]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},M0e={class:"m-auto max-w-7xl"},V0e={class:"md:grid md:grid-cols-3 md:gap-6"},L0e={class:"space-y-1 md:col-span-1"},q0e={class:"mt-2 md:col-span-2"},U0e=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1),j0e={class:"mt-10 sm:mt-0"},z0e={class:"md:grid md:grid-cols-3 md:gap-6"},H0e={class:"space-y-1 md:col-span-1"},W0e={class:"mt-5 md:col-span-2 md:mt-0"},G0e=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1),K0e={class:"mt-10 sm:mt-0"},Z0e={class:"md:grid md:grid-cols-3 md:gap-6"},Y0e={class:"space-y-1 md:col-span-1"},X0e={class:"mt-5 md:col-span-2 md:mt-0"},Q0e=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1),J0e={class:"mt-10 sm:mt-0"},ege={class:"md:grid md:grid-cols-3 md:gap-6"},tge={class:"space-y-1 md:col-span-1"},nge={class:"mt-5 md:col-span-2 md:mt-0"},oge=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1),age={class:"mt-10 sm:mt-0"},rge={class:"md:grid md:grid-cols-3 md:gap-6"},lge={class:"space-y-1 md:col-span-1"},sge={class:"mt-5 md:col-span-2 md:mt-0"},ige={class:"flex"},uge={key:0,class:"hidden sm:block","aria-hidden":"true"},cge=_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})],-1),dge=[cge],mge={key:1,class:"mt-10 sm:mt-0"},fge={class:"md:grid md:grid-cols-3 md:gap-6"},pge={class:"space-y-1 md:col-span-1"},vge={class:"mt-5 md:col-span-2 md:mt-0"},hge={role:"list",class:"space-y-4 divide-y divide-neutral-200 dark:divide-neutral-500/30"},gge={__name:"UsersProfile",setup(e){const{t}=Ee(),n=cn(),{currentUser:o,resetStoreState:a}=Ne(),r=h(o),{form:s}=Ze(),{form:i}=Ze({},{resetOnSuccess:!0}),{teams:u}=qi(),c=M(!1),m=O(()=>u.value.filter(x=>x.manager.id===o.value.id));let f=null;function v(x){n.commit("users/UPDATE",{id:x.id,item:x}),r.avatar=x.avatar,r.avatar_url=x.avatar_url,s.avatar=r.avatar}function y(){r.avatar&&Innoclapps.request().delete(`/users/${r.id}/avatar`).then(({data:x})=>{s.avatar=x.avatar,n.commit("users/UPDATE",{id:r.id,item:x})})}function b(){s.put("/profile").then(x=>{n.commit("users/UPDATE",{id:x.id,item:x}),Innoclapps.success(t("users::profile.updated")),f!==s.locale?window.location.reload():a()})}function w(){i.put("/profile/password").then(()=>{Innoclapps.success(t("users::profile.password_updated"))})}function k(){f=r.locale,s.set({name:r.name,email:r.email,mail_signature:r.mail_signature,date_format:r.date_format,time_format:r.time_format,timezone:r.timezone,locale:r.locale,notifications_settings:wd(r.notifications.settings,(x,I)=>(x[I.key]=I.availability,x),{})}),i.set({old_password:null,password:null,password_confirmation:null})}return k(),(x,I)=>{const C=d("ITextDisplay"),S=d("IText"),T=d("CropsAndUploadsImage"),E=d("ICardBody"),$=d("ICard"),F=d("IFormInput"),R=d("IFormError"),B=d("IFormGroup"),V=d("IButton"),P=d("ICardFooter"),z=d("IFormLabel"),H=d("ILink"),j=d("ITextDark"),N=d("IAvatar"),L=d("MainLayout");return g(),A(L,null,{default:p(()=>[_("div",M0e,[_("div",V0e,[_("div",L0e,[l(C,{text:x.$t("core::app.avatar")},null,8,["text"]),l(S,{text:x.$t("users::profile.avatar_info")},null,8,["text"])]),_("div",q0e,[l($,null,{default:p(()=>[l(E,null,{default:p(()=>[l(T,{name:"avatar","upload-url":`${x.$scriptConfig("apiURL")}/users/${h(o).id}/avatar`,image:h(o).uploaded_avatar_url,"cropper-options":{aspectRatio:1/1},"choose-text":h(o).uploaded_avatar_url?x.$t("core::app.change"):x.$t("core::app.upload_avatar"),onCleared:y,onSuccess:v},null,8,["upload-url","image","choose-text"])]),_:1})]),_:1})])]),U0e,_("div",j0e,[_("div",z0e,[_("div",H0e,[l(C,{text:x.$t("users::profile.profile")},null,8,["text"]),l(S,{text:x.$t("users::profile.profile_info")},null,8,["text"])]),_("div",W0e,[l($,{as:"form",onSubmit:ot(b,["prevent"])},{default:p(()=>[l(E,null,{default:p(()=>[l(B,{"label-for":"name",label:x.$t("users::user.name")},{default:p(()=>[l(F,{id:"name",modelValue:h(s).name,"onUpdate:modelValue":I[0]||(I[0]=U=>h(s).name=U),name:"name"},null,8,["modelValue"]),l(R,{error:h(s).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(B,{"label-for":"email",label:x.$t("users::user.email")},{default:p(()=>[l(F,{id:"email",modelValue:h(s).email,"onUpdate:modelValue":I[1]||(I[1]=U=>h(s).email=U),name:"email",type:"email"},null,8,["modelValue"]),l(R,{error:h(s).getError("email")},null,8,["error"])]),_:1},8,["label"]),l(B,{"label-for":"mail_signature",label:x.$t("mailclient::mail.signature"),description:h(o).mail_signature?x.$t("mailclient::mail.signature_info"):""},{default:p(()=>[l(ji,{modelValue:h(s).mail_signature,"onUpdate:modelValue":I[2]||(I[2]=U=>h(s).mail_signature=U),placeholder:x.$t("mailclient::mail.signature_info")},null,8,["modelValue","placeholder"]),l(R,{error:h(s).getError("mail_signature")},null,8,["error"])]),_:1},8,["label","description"])]),_:1}),l(P,{class:"text-right"},{default:p(()=>[l(V,{type:"submit",variant:"primary",disabled:h(s).busy,text:x.$t("users::profile.update"),onClick:b},null,8,["disabled","text"])]),_:1})]),_:1})])])]),G0e,_("div",K0e,[_("div",Z0e,[_("div",Y0e,[l(C,{text:x.$t("users::user.localization")},null,8,["text"]),l(S,{text:x.$t("users::profile.localization_info")},null,8,["text"])]),_("div",X0e,[l($,null,{default:p(()=>[l(E,null,{default:p(()=>[l(Kc,{form:h(s),"onUpdate:timeFormat":I[3]||(I[3]=U=>h(s).time_format=U),"onUpdate:dateFormat":I[4]||(I[4]=U=>h(s).date_format=U),"onUpdate:locale":I[5]||(I[5]=U=>h(s).locale=U),"onUpdate:timezone":I[6]||(I[6]=U=>h(s).timezone=U)},null,8,["form"])]),_:1}),l(P,{class:"text-right"},{default:p(()=>[l(V,{variant:"primary",disabled:h(s).busy,text:x.$t("core::app.save"),onClick:b},null,8,["disabled","text"])]),_:1})]),_:1})])])]),Q0e,_("div",J0e,[_("div",ege,[_("div",tge,[l(C,{text:x.$t("core::notifications.notifications")},null,8,["text"]),l(S,{text:x.$t("users::profile.notifications_info")},null,8,["text"])]),_("div",nge,[l($,{id:"notifications"},{default:p(()=>[l(Sk,{modelValue:h(s).notifications_settings,"onUpdate:modelValue":I[7]||(I[7]=U=>h(s).notifications_settings=U),class:"-mt-px"},null,8,["modelValue"]),l(P,{class:"text-right"},{default:p(()=>[l(V,{variant:"primary",disabled:h(s).busy,text:x.$t("core::app.save"),onClick:b},null,8,["disabled","text"])]),_:1})]),_:1})])])]),oge,_("div",age,[_("div",rge,[_("div",lge,[l(C,{text:x.$t("auth.password")},null,8,["text"]),l(S,{text:x.$t("users::profile.password_info")},null,8,["text"])]),_("div",sge,[l($,{as:"form",onSubmit:ot(w,["prevent"])},{default:p(()=>[l(E,null,{default:p(()=>[l(B,{"label-for":"old_password",label:x.$t("auth.current_password")},{default:p(()=>[l(F,{id:"old_password",modelValue:h(i).old_password,"onUpdate:modelValue":I[8]||(I[8]=U=>h(i).old_password=U),name:"old_password",type:"password",autocomplete:"current-password"},null,8,["modelValue"]),l(R,{error:h(i).getError("old_password")},null,8,["error"])]),_:1},8,["label"]),l(B,null,{label:p(()=>[_("div",ige,[l(z,{class:"mb-1 grow",for:"password",label:x.$t("auth.new_password")},null,8,["label"]),l(H,{text:x.$t("core::app.password_generator.heading"),onClick:I[9]||(I[9]=U=>c.value=!c.value)},null,8,["text"])])]),default:p(()=>[l(F,{id:"password",modelValue:h(i).password,"onUpdate:modelValue":I[10]||(I[10]=U=>h(i).password=U),name:"password",type:"password",autocomplete:"new-password"},null,8,["modelValue"]),l(R,{error:h(i).getError("password")},null,8,["error"])]),_:1}),l(B,{"label-for":"password_confirmation",label:x.$t("auth.confirm_password")},{default:p(()=>[l(F,{id:"password_confirmation",modelValue:h(i).password_confirmation,"onUpdate:modelValue":I[11]||(I[11]=U=>h(i).password_confirmation=U),name:"password_confirmation",type:"password",autocomplete:"new-password"},null,8,["modelValue"]),l(R,{error:h(i).getError("password_confirmation")},null,8,["error"])]),_:1},8,["label"]),ne(l(xk,null,null,512),[[pe,c.value]])]),_:1}),l(P,{class:"text-right"},{default:p(()=>[l(V,{type:"submit",variant:"primary",disabled:h(i).busy,text:x.$t("auth.change_password")},null,8,["disabled","text"])]),_:1})]),_:1})])])]),m.value.length>0?(g(),D("div",uge,dge)):K("",!0),m.value.length>0?(g(),D("div",mge,[_("div",fge,[_("div",pge,[l(C,{text:x.$t("users::team.your_teams",m.value.length)},null,8,["text"]),l(S,{text:x.$t("users::team.managing_teams")},null,8,["text"])]),_("div",vge,[l($,null,{default:p(()=>[l(E,null,{default:p(()=>[_("ul",hge,[(g(!0),D(fe,null,Ie(m.value,U=>(g(),D("li",{key:U.id,class:"pt-4 first:pt-0"},[l(j,{class:"truncate font-medium",text:U.name},null,8,["text"]),l(S,{class:"my-2",text:x.$t("users::team.members")},null,8,["text"]),(g(!0),D(fe,null,Ie(U.members,ee=>(g(),D("div",{key:"info-"+ee.email,class:"mb-1 flex items-center space-x-1.5 last:mb-0"},[l(N,{alt:ee.name,src:ee.avatar_url},null,8,["alt","src"]),l(S,{text:ee.name},null,8,["text"])]))),128))]))),128))])]),_:1})]),_:1})])])])):K("",!0)])]),_:1})}}},zi=rs(()=>{const{setLoading:e,isLoading:t}=An(),n=M([]),o=O(()=>Vt(n.value,"name")),a=O(()=>o.value.map(v=>v.name));f();function r(v){return n.value.findIndex(y=>y.id==v)}function s(v){n.value.splice(r(v),1)}function i(v){n.value.push(v)}function u(v,y){n.value[r(v)]=y}async function c(v,y){const{data:b}=await Innoclapps.request(`/roles/${v}`,y);return b}async function m(v){await Innoclapps.request().delete(`/roles/${v}`),s(v)}function f(){e(!0),Innoclapps.request("/roles").then(({data:v})=>n.value=v).finally(()=>e(!1))}return{roles:n,rolesByName:o,rolesNames:a,rolesAreBeingFetched:t,addRole:i,removeRole:s,setRole:u,fetchRoles:f,fetchRole:c,deleteRole:m}}),bge={class:"flex items-center justify-between"},Tk={__name:"RolesFormFields",props:{inCreateMode:Boolean,name:{required:!0,type:String},permissions:{required:!0,type:Array},form:{required:!0,type:Object}},emits:["update:name","update:permissions"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),{setLoading:s,isLoading:i}=An(),u=M(null),c=M({all:[],grouped:{}});function m(w){if(w.single)return o.permissions.includes(w.keys[0])?r("core::role.granted"):r("core::role.revoked");const k=w.keys.find(x=>o.permissions.includes(x));return k?w.permissions[k]:r("core::role.revoked")}function f(w,k){let x=v(w,!1);a("update:permissions",[...x,k])}function v(w,k=!0){const x=o.permissions.filter(I=>!w.keys.includes(I));return k&&a("update:permissions",x),x}function y(w){const k=Object.values(w.grouped).flatMap(x=>x.views.filter(I=>!I.single).map(I=>Object.keys(I.permissions)[0]));a("update:permissions",k)}async function b(){s(!0);try{const{data:w}=await Innoclapps.request("/permissions");c.value=w,o.inCreateMode&&y(w)}finally{s(!1)}}return b(),t({nameRef:u}),(w,k)=>{const x=d("IFormInput"),I=d("IFormError"),C=d("IFormGroup"),S=d("ITextDisplay"),T=d("ITextDark"),E=d("IText"),$=d("IDropdownButton"),F=d("IDropdownItem"),R=d("IDropdownMenu"),B=d("IDropdown"),V=d("IOverlay");return g(),D(fe,null,[l(C,{"label-for":"name",label:w.$t("core::role.name"),required:""},{default:p(()=>[l(x,{id:"name",ref_key:"nameRef",ref:u,name:"name",type:"text","model-value":e.name,"onUpdate:modelValue":k[0]||(k[0]=P=>w.$emit("update:name",P))},null,8,["model-value"]),l(I,{error:e.form.getError("name")},null,8,["error"])]),_:1},8,["label"]),l(V,{class:"mt-5",show:h(i)},{default:p(()=>[ne(_("div",null,[l(S,{class:"my-4",text:w.$t("core::role.permissions")},null,8,["text"]),(g(!0),D(fe,null,Ie(c.value.grouped,(P,z)=>(g(),D("div",{key:z,class:"mb-4"},[l(T,{class:"mb-1 font-medium"},{default:p(()=>[le(Z(P.as),1)]),_:2},1024),(g(!0),D(fe,null,Ie(P.views,H=>(g(),D("div",{key:H.group},[_("div",bge,[l(E,null,{default:p(()=>[le(Z(H.as?H.as:H.single?H.permissions[H.keys[0]]:""),1)]),_:2},1024),l(B,{placement:"bottom-end"},{default:p(()=>[l($,{text:m(H),basic:""},null,8,["text"]),l(R,null,{default:p(()=>[ne(l(F,{text:w.$t("core::role.revoked"),condensed:"",onClick:j=>v(H)},null,8,["text","onClick"]),[[pe,H.revokeable]]),H.single?(g(),A(F,{key:0,text:w.$t("core::role.granted"),condensed:"",onClick:j=>f(H,H.keys[0])},null,8,["text","onClick"])):(g(!0),D(fe,{key:1},Ie(H.permissions,(j,N)=>(g(),A(F,{key:N,disabled:e.permissions.indexOf(N)>-1,text:j,condensed:"",onClick:L=>f(H,N)},null,8,["disabled","text","onClick"]))),128))]),_:2},1024)]),_:2},1024)])]))),128))]))),128))],512),[[pe,c.value.all.length>0]])]),_:1},8,["show"])],64)}}},yge={__name:"RolesCreate",setup(e){const{t}=Ee(),n=M(null),o=_t(),{addRole:a}=zi(),{form:r}=Ze({name:"",permissions:[]});function s(){n.value.nameRef.focus()}function i(){r.post("/roles").then(u=>{a(u),Innoclapps.success(t("core::role.created")),o.back()})}return(u,c)=>{const m=d("ISlideover");return g(),A(m,{"ok-disabled":h(r).busy,"ok-text":u.$t("core::app.create"),title:u.$t("core::role.create"),visible:"",form:"","static-backdrop":"",onSubmit:i,onHidden:u.$router.back,onShown:s},{default:p(()=>[l(Tk,{ref_key:"formRef",ref:n,name:h(r).name,"onUpdate:name":c[0]||(c[0]=f=>h(r).name=f),permissions:h(r).permissions,"onUpdate:permissions":c[1]||(c[1]=f=>h(r).permissions=f),form:h(r),"in-create-mode":""},null,8,["name","permissions","form"])]),_:1},8,["ok-disabled","ok-text","title","onHidden"])}}},_ge={__name:"RolesEdit",setup(e){const{t}=Ee(),n=It(),o=_t(),{fetchRole:a,setRole:r}=zi(),s=M(!1),{form:i}=Ze({name:"",permissions:[]}),u=O(()=>t("core::role.edit")+" "+i.name);function c(){i.put(`/roles/${n.params.id}`).then(f=>{r(f.id,f),Innoclapps.success(t("core::role.updated")),o.back()})}async function m(f){const v=await a(f);i.set({name:v.name,permissions:v.permissions.map(y=>y.name)}),ze(()=>s.value=!0)}return m(n.params.id),(f,v)=>{const y=d("FieldsPlaceholder"),b=d("ISlideover");return g(),A(b,{"ok-text":f.$t("core::app.save"),"ok-disabled":h(i).busy,title:u.value,visible:"",form:"","static-backdrop":"",onSubmit:c,onHidden:f.$router.back},{default:p(()=>[s.value?(g(),A(Tk,{key:1,name:h(i).name,"onUpdate:name":v[0]||(v[0]=w=>h(i).name=w),permissions:h(i).permissions,"onUpdate:permissions":v[1]||(v[1]=w=>h(i).permissions=w),form:h(i)},null,8,["name","permissions","form"])):(g(),A(y,{key:0}))]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},Ige={key:0,class:"px-6"},wge={__name:"RolesIndex",setup(e){const{t}=Ee(),{rolesByName:n,rolesAreBeingFetched:o,deleteRole:a}=zi(),r=O(()=>n.value.length>0);async function s(i){await a(i),Innoclapps.success(t("core::role.deleted"))}return(i,u)=>{const c=d("ICardHeading"),m=d("IButton"),f=d("ICardActions"),v=d("ICardHeader"),y=d("ITableHeader"),b=d("ITableRow"),w=d("ITableHead"),k=d("ITableCell"),x=d("ILink"),I=d("ITableRowAction"),C=d("ITableRowActions"),S=d("ITableBody"),T=d("ITable"),E=d("IEmptyState"),$=d("ICardBody"),F=d("ICard"),R=d("RouterView");return g(),D(fe,null,[l(v,null,{default:p(()=>[l(c,{text:i.$t("core::role.roles")},null,8,["text"]),l(f,null,{default:p(()=>[ne(l(m,{variant:"primary",icon:"PlusSolid",to:{name:"create-role"},text:i.$t("core::role.create")},null,8,["text"]),[[pe,r.value]])]),_:1})]),_:1}),l(F,{overlay:h(o)},{default:p(()=>[r.value?(g(),D("div",Ige,[l(T,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(w,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(b,null,{default:p(()=>[l(y,{width:"5%"},{default:p(()=>[le(Z(i.$t("core::app.id")),1)]),_:1}),l(y,null,{default:p(()=>[le(Z(i.$t("core::role.name")),1)]),_:1}),l(y,{width:"8%"})]),_:1})]),_:1}),l(S,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(n),B=>(g(),A(b,{key:B.id},{default:p(()=>[l(k,null,{default:p(()=>[le(Z(B.id),1)]),_:2},1024),l(k,null,{default:p(()=>[l(x,{class:"font-medium",to:{name:"edit-role",params:{id:B.id}},text:B.name},null,8,["to","text"])]),_:2},1024),l(k,null,{default:p(()=>[l(C,null,{default:p(()=>[l(I,{to:{name:"edit-role",params:{id:B.id}},text:i.$t("core::app.edit")},null,8,["to","text"]),l(I,{text:i.$t("core::app.delete"),onClick:V=>i.$confirm(()=>s(B.id))},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):h(o)?K("",!0):(g(),A($,{key:1},{default:p(()=>[l(E,{to:{name:"create-role"},"button-text":i.$t("core::role.create"),title:i.$t("core::role.empty_state.title"),description:i.$t("core::role.empty_state.description")},null,8,["button-text","title","description"])]),_:1}))]),_:1},8,["overlay"]),l(R)],64)}}},xge={class:"mb-5 flex items-center justify-between"},kge={class:"flex items-center space-x-3"},b1="users",$ge={__name:"UsersIndex",setup(e){const t=Innoclapps.resourceName("users"),n=cn(),{resetStoreState:o}=Ne(),{reloadTable:a}=eo(b1),{fetchTeams:r}=qi(),s=M(!1),i=M(null);function u(c){c.destroyable&&(c.ids.forEach(m=>n.commit("users/REMOVE",m)),i.value.refetchActions(),r())}return rn(()=>{o()}),(c,m)=>{const f=d("ITextDisplay"),v=d("IButton"),y=d("ResourceTable"),b=d("RouterView");return g(),D(fe,null,[_("div",xge,[l(f,{text:c.$t("users::user.users")},null,8,["text"]),_("div",kge,[l(v,{variant:"secondary",disabled:!s.value,to:{name:"invite-user"},text:c.$t("users::user.invite")},null,8,["disabled","text"]),l(v,{variant:"primary",icon:"PlusSolid",disabled:!s.value,to:{name:"create-user"},text:c.$t("users::user.create")},null,8,["disabled","text"])])]),l(y,{ref_key:"tableRef",ref:i,"resource-name":h(t),"table-id":b1,"with-customize-button":!0,onLoaded:m[0]||(m[0]=w=>s.value=!0),onActionExecuted:u},null,8,["resource-name"]),l(b,{name:"createEdit",onCreated:h(a),onUpdated:h(a),onHidden:m[1]||(m[1]=w=>c.$router.push({name:"users-index"}))},null,8,["onCreated","onUpdated"]),l(b,{name:"invite"})],64)}}},Cge={__name:"SettingsManageUsers",setup(e){const t=It(),n=_t(),o=M(0);function a(){o.value===0&&!["create-user","edit-user","invite-user"].includes(t.name)?n.push({name:"users-index"}):o.value===1&&!["create-role","edit-role"].includes(t.name)?n.push({name:"role-index"}):o.value===2&&n.push({name:"manage-teams"})}return Va((r,s,i)=>{r.name==="users-index"&&(o.value=0),i()}),["role-index","create-role","edit-role"].includes(t.name)?o.value=1:t.name==="manage-teams"&&(o.value=2),(r,s)=>{const i=d("Icon"),u=d("ITab"),c=d("ITabList"),m=d("ITabPanel"),f=d("RouterView"),v=d("ITabPanels"),y=d("ITabGroup");return g(),A(y,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=b=>o.value=b)},{default:p(()=>[l(c,null,{default:p(()=>[l(u,{onActivated:a},{default:p(()=>[l(i,{icon:"User"}),le(" "+Z(r.$t("users::user.users")),1)]),_:1}),l(u,{onActivated:a},{default:p(()=>[l(i,{icon:"ShieldExclamation"}),le(" "+Z(r.$t("core::role.roles")),1)]),_:1}),l(u,{onActivated:a},{default:p(()=>[l(i,{icon:"UserGroup"}),le(" "+Z(r.$t("users::team.teams")),1)]),_:1})]),_:1}),l(v,null,{default:p(()=>[l(m,{lazy:""},{default:p(()=>[l($ge)]),_:1}),l(m,null,{default:p(()=>[l(f,{name:"roles"})]),_:1}),l(m,null,{default:p(()=>[l(f,{name:"teams"})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ek={__name:"UserFormFields",props:{inEditMode:Boolean,form:{required:!0,type:Object},name:{required:!0,type:String},email:{required:!0,type:String},roles:{required:!0,type:Array},password:{required:!0,type:String},passwordConfirmation:{required:!0,type:String},timezone:{required:!0,type:String},locale:{required:!0,type:String},dateFormat:{required:!0,type:String},timeFormat:{required:!0,type:String},notificationsSettings:{required:!0,type:Object},superAdmin:{required:!0,type:Boolean},accessApi:{required:!0,type:Boolean}},emits:["update:name","update:email","update:roles","update:password","update:passwordConfirmation","update:timezone","update:locale","update:dateFormat","update:timeFormat","update:notificationsSettings","update:superAdmin","update:accessApi"],setup(e,{emit:t}){const n=e,o=t,{currentUser:a}=Ne(),{rolesNames:r}=zi(),s=O(()=>a.value.id===n.form.id);function i(u){u&&o("update:accessApi",!0)}return(u,c)=>{const m=d("ITab"),f=d("ITabList"),v=d("IFormInput"),y=d("IFormError"),b=d("IFormGroup"),w=d("ICustomSelect"),k=d("ITabPanel"),x=d("ITabPanels"),I=d("IFormSwitchLabel"),C=d("IFormSwitchDescription"),S=d("IFormSwitch"),T=d("IFormSwitchField"),E=d("ITabGroup");return g(),A(E,null,{default:p(()=>[l(f,{fill:""},{default:p(()=>[l(m,{title:u.$t("users::user.user")},null,8,["title"]),l(m,{title:u.$t("auth.password")},null,8,["title"]),l(m,{title:u.$t("users::user.localization")},null,8,["title"]),l(m,{title:u.$t("core::notifications.notifications")},null,8,["title"]),l(m,{title:u.$t("core::app.advanced")},null,8,["title"])]),_:1}),l(x,null,{default:p(()=>[l(k,null,{default:p(()=>[l(b,{"label-for":"name",label:u.$t("users::user.name"),required:""},{default:p(()=>[l(v,{id:"name",ref:"name",type:"text",autocomplete:"off","model-value":e.name,"onUpdate:modelValue":c[0]||(c[0]=$=>u.$emit("update:name",$))},null,8,["model-value"]),l(y,{error:e.form.getError("name")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"email",label:u.$t("users::user.email"),required:""},{default:p(()=>[l(v,{id:"email",name:"email",type:"email",autocomplete:"off","model-value":e.email,"onUpdate:modelValue":c[1]||(c[1]=$=>u.$emit("update:email",$))},null,8,["model-value"]),l(y,{error:e.form.getError("email")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"roles",label:u.$t("core::role.roles")},{default:p(()=>[l(w,{"input-id":"roles","model-value":e.roles,placeholder:u.$t("users::user.roles"),options:h(r),multiple:!0,"onUpdate:modelValue":c[2]||(c[2]=$=>u.$emit("update:roles",$))},null,8,["model-value","placeholder","options"])]),_:1},8,["label"])]),_:1}),l(k,null,{default:p(()=>[l(b,{"label-for":"password",label:u.$t("auth.password"),required:!e.inEditMode},{default:p(()=>[l(v,{id:"password",name:"password",type:"password",autocomplete:"new-password","model-value":e.password,"onUpdate:modelValue":c[3]||(c[3]=$=>u.$emit("update:password",$))},null,8,["model-value"]),l(y,{error:e.form.getError("password")},null,8,["error"])]),_:1},8,["label","required"]),l(b,{"label-for":"password_confirmation",label:u.$t("auth.confirm_password"),required:!e.inEditMode||!!e.password},{default:p(()=>[l(v,{id:"password_confirmation",name:"password_confirmation",autocomplete:"new-password",type:"password","model-value":e.passwordConfirmation,"onUpdate:modelValue":c[4]||(c[4]=$=>u.$emit("update:passwordConfirmation",$))},null,8,["model-value"]),l(y,{error:e.form.getError("password_confirmation")},null,8,["error"])]),_:1},8,["label","required"]),l(xk)]),_:1}),l(k,null,{default:p(()=>[l(Kc,{form:e.form,"time-format":e.timeFormat,"date-format":e.dateFormat,locale:e.locale,timezone:e.timezone,"onUpdate:timeFormat":c[5]||(c[5]=$=>u.$emit("update:timeFormat",$)),"onUpdate:dateFormat":c[6]||(c[6]=$=>u.$emit("update:dateFormat",$)),"onUpdate:locale":c[7]||(c[7]=$=>u.$emit("update:locale",$)),"onUpdate:timezone":c[8]||(c[8]=$=>u.$emit("update:timezone",$))},null,8,["form","time-format","date-format","locale","timezone"])]),_:1})]),_:1}),l(k,null,{default:p(()=>[l(Sk,{class:"overflow-hidden rounded-lg","model-value":e.notificationsSettings,bordered:"","onUpdate:modelValue":c[9]||(c[9]=$=>u.$emit("update:notificationsSettings",$))},null,8,["model-value"])]),_:1}),l(k,null,{default:p(()=>[_("div",{class:be(["flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",e.form.super_admin?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(T,null,{default:p(()=>[l(I,{text:u.$t("users::user.super_admin")},null,8,["text"]),l(C,{text:u.$t("users::user.as_super_admin_info")},null,8,["text"]),l(S,{"model-value":e.superAdmin,disabled:s.value,"onUpdate:modelValue":c[10]||(c[10]=$=>u.$emit("update:superAdmin",$)),onChange:i},null,8,["model-value","disabled"])]),_:1})],2),_("div",{class:be(["mt-3 flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",e.form.access_api?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(T,null,{default:p(()=>[l(I,{text:u.$t("users::user.enable_api")},null,8,["text"]),l(C,{text:u.$t("users::user.allow_api_info")},null,8,["text"]),l(S,{"model-value":e.accessApi,disabled:s.value||e.form.super_admin,"onUpdate:modelValue":c[11]||(c[11]=$=>u.$emit("update:accessApi",$))},null,8,["model-value","disabled"])]),_:1})],2)]),_:1})]),_:1})}}},Sge={__name:"UsersCreate",emits:["created","hidden"],setup(e,{emit:t}){const n=t,o=_t(),a=cn(),{t:r}=Ee(),{scriptConfig:s,setting:i}=Ne(),{guessTimezone:u}=rt(),{form:c}=Ze({name:"",email:"",roles:[],password:"",password_confirmation:"",timezone:u(),locale:"en",date_format:i("date_format"),time_format:i("time_format"),notifications_settings:wd(s("notifications_settings"),function(f,v){let y={};return v.channels.forEach(b=>y[b]=!0),f[v.key]=y,f},{}),super_admin:!1,access_api:!1,avatar:null});async function m(){try{let f=await c.post("/users");a.commit("users/ADD",f),n("created",f),Innoclapps.success(r("core::resource.created"))}catch(f){return f.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(f)}o.back()}return(f,v)=>{const y=d("ISlideover");return g(),A(y,{"ok-disabled":h(c).busy,"ok-loading":h(c).busy,"ok-text":f.$t("core::app.create"),title:f.$t("users::user.create"),form:"",visible:"","static-backdrop":"",onHidden:v[12]||(v[12]=b=>f.$emit("hidden")),onShown:v[13]||(v[13]=()=>f.$refs.formRef.$refs.name.focus()),onSubmit:m},{default:p(()=>[l(Ek,{ref:"formRef",name:h(c).name,"onUpdate:name":v[0]||(v[0]=b=>h(c).name=b),email:h(c).email,"onUpdate:email":v[1]||(v[1]=b=>h(c).email=b),roles:h(c).roles,"onUpdate:roles":v[2]||(v[2]=b=>h(c).roles=b),password:h(c).password,"onUpdate:password":v[3]||(v[3]=b=>h(c).password=b),"password-confirmation":h(c).password_confirmation,"onUpdate:passwordConfirmation":v[4]||(v[4]=b=>h(c).password_confirmation=b),timezone:h(c).timezone,"onUpdate:timezone":v[5]||(v[5]=b=>h(c).timezone=b),locale:h(c).locale,"onUpdate:locale":v[6]||(v[6]=b=>h(c).locale=b),"date-format":h(c).date_format,"onUpdate:dateFormat":v[7]||(v[7]=b=>h(c).date_format=b),"time-format":h(c).time_format,"onUpdate:timeFormat":v[8]||(v[8]=b=>h(c).time_format=b),"notifications-settings":h(c).notifications_settings,"onUpdate:notificationsSettings":v[9]||(v[9]=b=>h(c).notifications_settings=b),"super-admin":h(c).super_admin,"onUpdate:superAdmin":v[10]||(v[10]=b=>h(c).super_admin=b),"access-api":h(c).access_api,"onUpdate:accessApi":v[11]||(v[11]=b=>h(c).access_api=b),form:h(c)},null,8,["name","email","roles","password","password-confirmation","timezone","locale","date-format","time-format","notifications-settings","super-admin","access-api","form"])]),_:1},8,["ok-disabled","ok-loading","ok-text","title"])}}},Tge={__name:"UsersEdit",emits:["updated","hidden"],setup(e,{emit:t}){const n=t,{t:o}=Ee(),a=_t(),r=It(),s=cn(),{currentUser:i}=Ne(),{form:u}=Ze(),c=M(!1),m=M(null);async function f(){try{const y=await u.put(`/users/${r.params.id}`);s.commit("users/UPDATE",{id:y.id,item:y}),Innoclapps.success(o("core::resource.updated")),y.locale!==m.value&&y.id==i.value.id?window.location.reload(!0):(n("updated",y),a.back())}catch(y){return y.isValidationError()&&Innoclapps.error(o("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(y)}}function v(){Innoclapps.request(`/users/${r.params.id}`).then(({data:y})=>{m.value=y.locale,u.set({name:y.name,email:y.email,roles:y.roles.map(b=>b.name),password:"",password_confirmation:"",timezone:y.timezone,locale:y.locale,date_format:y.date_format,time_format:y.time_format,notifications_settings:wd(y.notifications.settings,function(b,w){return b[w.key]=w.availability,b},{}),super_admin:y.super_admin,access_api:y.access_api}),c.value=!0})}return v(),(y,b)=>{const w=d("FieldsPlaceholder"),k=d("ISlideover");return g(),A(k,{"ok-text":y.$t("core::app.save"),"ok-disabled":h(u).busy,"ok-loading":h(u).busy,title:y.$t("users::user.edit"),form:"",visible:"","static-backdrop":"",onHidden:b[12]||(b[12]=x=>y.$emit("hidden")),onSubmit:f},{default:p(()=>[c.value?K("",!0):(g(),A(w,{key:0})),c.value?(g(),A(Ek,{key:1,name:h(u).name,"onUpdate:name":b[0]||(b[0]=x=>h(u).name=x),email:h(u).email,"onUpdate:email":b[1]||(b[1]=x=>h(u).email=x),roles:h(u).roles,"onUpdate:roles":b[2]||(b[2]=x=>h(u).roles=x),password:h(u).password,"onUpdate:password":b[3]||(b[3]=x=>h(u).password=x),"password-confirmation":h(u).password_confirmation,"onUpdate:passwordConfirmation":b[4]||(b[4]=x=>h(u).password_confirmation=x),timezone:h(u).timezone,"onUpdate:timezone":b[5]||(b[5]=x=>h(u).timezone=x),locale:h(u).locale,"onUpdate:locale":b[6]||(b[6]=x=>h(u).locale=x),"date-format":h(u).date_format,"onUpdate:dateFormat":b[7]||(b[7]=x=>h(u).date_format=x),"time-format":h(u).time_format,"onUpdate:timeFormat":b[8]||(b[8]=x=>h(u).time_format=x),"notifications-settings":h(u).notifications_settings,"onUpdate:notificationsSettings":b[9]||(b[9]=x=>h(u).notifications_settings=x),"super-admin":h(u).super_admin,"onUpdate:superAdmin":b[10]||(b[10]=x=>h(u).super_admin=x),"access-api":h(u).access_api,"onUpdate:accessApi":b[11]||(b[11]=x=>h(u).access_api=x),form:h(u),"in-edit-mode":""},null,8,["name","email","roles","password","password-confirmation","timezone","locale","date-format","time-format","notifications-settings","super-admin","access-api","form"])):K("",!0)]),_:1},8,["ok-text","ok-disabled","ok-loading","title"])}}},Ege=_("div",{class:"mb-4 border-b border-neutral-200 pt-4 dark:border-neutral-500/30"},null,-1),Fge={class:"mb-3 flex"},Age={__name:"UsersInvite",setup(e){const{t}=Ee(),n=_t(),o=M([]),{rolesNames:a}=zi(),{teamsByName:r}=qi(),{form:s}=Ze({emails:[""],access_api:!1,super_admin:!1,roles:[]}),i=O(()=>s.emails.length);function u(){s.emails.push(""),ze(()=>{o.value[i.value-1].focus()})}function c(y){s.emails.splice(y,1),ze(()=>{s.emails[i.value-1]===""&&o.value[i.value-1].focus()})}function m(){ze(()=>{o.value[0].focus()})}function f(y){y&&(s.access_api=!0)}function v(){s.post("/users/invite").then(()=>{Innoclapps.success(t("users::user.invited")),n.back()})}return(y,b)=>{const w=d("IText"),k=d("IFormLabel"),x=d("IButton"),I=d("IFormInput"),C=d("IFormError"),S=d("ICustomSelect"),T=d("IFormGroup"),E=d("IFormSwitchLabel"),$=d("IFormSwitchDescription"),F=d("IFormSwitch"),R=d("IFormSwitchField"),B=d("IModal"),V=Ve("i-tooltip");return g(),A(B,{size:"sm","ok-text":y.$t("users::user.send_invitation"),"ok-disabled":h(s).busy,title:y.$t("users::user.invite"),form:"","static-backdrop":"",visible:"",onSubmit:v,onHidden:y.$router.back,onShown:m},{default:p(()=>[l(w,null,{default:p(()=>[le(Z(y.$t("users::user.invitation_expires_after_info",{total:y.$scriptConfig("invitation.expires_after")})),1)]),_:1}),Ege,_("div",Fge,[l(k,{class:"grow text-neutral-900 dark:text-neutral-100",for:"email0",label:y.$t("users::user.email"),required:""},null,8,["label"]),ne(l(x,{icon:"PlusSolid",basic:"",small:"",onClick:u},null,512),[[V,y.$t("core::app.add_another")]])]),(g(!0),D(fe,null,Ie(h(s).emails,(P,z)=>(g(),D("div",{key:z,class:"relative mb-3"},[l(I,{id:"email"+z,ref_for:!0,ref_key:"emailsRef",ref:o,modelValue:h(s).emails[z],"onUpdate:modelValue":H=>h(s).emails[z]=H,type:"email",placeholder:y.$t("users::user.email"),onKeydown:fo(ot(u,["prevent"]),["enter"])},null,8,["id","modelValue","onUpdate:modelValue","placeholder","onKeydown"]),ne(l(x,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:H=>c(z)},null,8,["onClick"]),[[pe,z>0]]),l(C,{error:h(s).getError("emails."+z)},null,8,["error"])]))),128)),l(T,{"label-for":"roles",class:"mt-3",label:y.$t("core::role.roles")},{default:p(()=>[l(S,{modelValue:h(s).roles,"onUpdate:modelValue":b[0]||(b[0]=P=>h(s).roles=P),"input-id":"roles",label:"name",placeholder:y.$t("users::user.roles"),options:h(a),multiple:!0},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"]),l(T,{"label-for":"teams",label:y.$t("users::team.teams")},{default:p(()=>[l(S,{modelValue:h(s).teams,"onUpdate:modelValue":b[1]||(b[1]=P=>h(s).teams=P),"input-id":"teams",label:"name",placeholder:y.$t("users::team.teams"),options:h(r),reduce:P=>P.id,multiple:!0},null,8,["modelValue","placeholder","options","reduce"])]),_:1},8,["label"]),_("div",{class:be(["flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",h(s).super_admin?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(R,null,{default:p(()=>[l(E,{text:y.$t("users::user.super_admin")},null,8,["text"]),l($,{text:y.$t("users::user.as_super_admin_info")},null,8,["text"]),l(F,{modelValue:h(s).super_admin,"onUpdate:modelValue":b[2]||(b[2]=P=>h(s).super_admin=P),onChange:f},null,8,["modelValue"])]),_:1})],2),_("div",{class:be(["mt-3 flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",h(s).access_api?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(R,null,{default:p(()=>[l(E,{text:y.$t("users::user.enable_api")},null,8,["text"]),l($,{text:y.$t("users::user.allow_api_info")},null,8,["text"]),l(F,{modelValue:h(s).access_api,"onUpdate:modelValue":b[3]||(b[3]=P=>h(s).access_api=P),disabled:h(s).super_admin},null,8,["modelValue","disabled"])]),_:1})],2)]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},Rge={key:0,role:"list",class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},Dge={class:"flex items-center px-4 py-4 sm:px-6"},Oge={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},Bge={class:"truncate"},Nge={class:"flex items-center text-base/6 sm:text-sm/6"},Pge=["textContent"],Mge=["datetime"],Vge={class:"mt-4 shrink-0 sm:ml-5 sm:mt-0"},Lge={class:"flex -space-x-1 overflow-hidden"},qge={class:"ml-5 shrink-0"},Uge={class:"px-4 py-4 sm:px-6"},jge={__name:"UsersManageTeams",setup(e){const t=cn(),{users:n}=Ne(),{localizedDateTime:o}=rt(),{teamsByName:a,teamsAreBeingFetched:r,addTeam:s,deleteTeam:i,setTeam:u}=qi(),c=M(!1),m=M(null),f=M(!1),v=M({}),{form:y}=Ze({name:null,description:null,user_id:null,members:[]},{resetOnSuccess:!0}),{form:b}=Ze({name:null,description:null,user_id:null,members:[]},{resetOnSuccess:!0}),w=O(()=>a.value.length>0);function k(){y.post("/teams").then(S=>{s(S),c.value=!1,f.value=!0})}function x(){b.put(`/teams/${m.value.id}`).then(S=>{u(S.id,S),m.value=null,f.value=!0})}async function I(S){await i(S),f.value=!0}function C(S){m.value=S,b.fill("name",S.name),b.fill("user_id",S.user_id),b.fill("members",S.members.map(T=>T.id)),b.fill("description",S.description)}return Pa(()=>{f.value&&t.commit("table/RESET_SETTINGS")}),(S,T)=>{var ie;const E=d("ICardHeading"),$=d("IButton"),F=d("ICardActions"),R=d("ICardHeader"),B=d("ILink"),V=d("Icon"),P=d("ITextBlock"),z=d("IAvatar"),H=d("ITextDark"),j=d("IText"),N=d("IEmptyState"),L=d("ICardBody"),U=d("ICard"),ee=d("IFormInput"),G=d("IFormError"),W=d("IFormGroup"),ae=d("ICustomSelect"),ue=d("IFormTextarea"),ce=d("IModal"),oe=Ve("i-tooltip");return g(),D(fe,null,[l(R,null,{default:p(()=>[l(E,{text:S.$t("users::team.teams")},null,8,["text"]),l(F,null,{default:p(()=>[ne(l($,{variant:"primary",icon:"PlusSolid",text:S.$t("users::team.add"),onClick:T[0]||(T[0]=Q=>c.value=!0)},null,8,["text"]),[[pe,w.value]])]),_:1})]),_:1}),l(U,{overlay:h(r)},{default:p(()=>[w.value?(g(),D("ul",Rge,[(g(!0),D(fe,null,Ie(h(a),Q=>(g(),D("li",{key:Q.id},[l(B,{class:"group block hover:bg-neutral-50 dark:hover:bg-neutral-800/60",plain:"",onClick:se=>v.value[Q.id]=!v.value[Q.id]},{default:p(()=>[_("div",Dge,[_("div",Oge,[_("div",Bge,[_("div",Nge,[_("p",{class:"truncate font-medium text-primary-600 dark:text-primary-100",textContent:Z(Q.name)},null,8,Pge),l(B,{class:"ml-2 md:hidden md:group-hover:block",text:S.$t("core::app.edit"),onClick:ot(se=>C(Q),["stop"])},null,8,["text","onClick"]),l(B,{class:"ml-2 md:hidden md:group-hover:block",variant:"danger",text:S.$t("core::app.delete"),onClick:ot(se=>S.$confirm(()=>I(Q.id)),["stop"])},null,8,["text","onClick"])]),l(P,{class:"mt-2 flex items-center space-x-1.5"},{default:p(()=>[l(V,{icon:"Calendar",class:"size-5 shrink-0"}),_("p",null,[le(Z(S.$t("core::app.created_at"))+" "+Z(" ")+" ",1),_("time",{datetime:Q.created_at},Z(h(o)(Q.created_at)),9,Mge)])]),_:2},1024)]),_("div",Vge,[_("div",Lge,[(g(!0),D(fe,null,Ie(Q.members,se=>ne((g(),A(z,{key:se.email,class:"ring-2 ring-white dark:ring-neutral-900",alt:se.name,src:se.avatar_url},null,8,["alt","src"])),[[oe,se.name]])),128))])])]),_("div",qge,[l(V,{icon:"ChevronRight",class:"size-5 text-neutral-400 sm:size-4"})])])]),_:2},1032,["onClick"]),ne(_("div",Uge,[l(H,{class:"mb-1 font-medium",text:S.$t("users::team.manager")},null,8,["text"]),l(j,{class:"mb-3",text:Q.manager.name},null,8,["text"]),l(H,{class:"mb-1 font-medium",text:S.$t("users::team.members")},null,8,["text"]),(g(!0),D(fe,null,Ie(Q.members,se=>(g(),D("div",{key:"info-"+se.email,class:"mb-1 flex items-center space-x-1.5 last:mb-0"},[l(z,{alt:se.name,src:se.avatar_url},null,8,["alt","src"]),l(j,{text:se.name},null,8,["text"])]))),128)),ne(l(H,{class:"mb-1 mt-3 font-medium",text:S.$t("users::team.description")},null,8,["text"]),[[pe,Q.description]]),l(j,{text:Q.description},null,8,["text"])],512),[[pe,v.value[Q.id]]])]))),128))])):h(r)?K("",!0):(g(),A(L,{key:1},{default:p(()=>[l(N,{"button-text":S.$t("users::team.add"),title:S.$t("users::team.empty_state.title"),description:S.$t("users::team.empty_state.description"),onClick:T[1]||(T[1]=Q=>c.value=!0)},null,8,["button-text","title","description"])]),_:1}))]),_:1},8,["overlay"]),l(ce,{title:S.$t("users::team.create"),visible:c.value,"ok-text":S.$t("core::app.create"),"ok-disabled":h(y).busy,form:"",onHidden:T[6]||(T[6]=Q=>c.value=!1),onSubmit:k,onShown:T[7]||(T[7]=()=>S.$refs.nameInputCreateRef.focus())},{default:p(()=>[l(W,{"label-for":"nameInputCreate",label:S.$t("users::team.name"),required:""},{default:p(()=>[l(ee,{id:"nameInputCreate",ref:"nameInputCreateRef",modelValue:h(y).name,"onUpdate:modelValue":T[2]||(T[2]=Q=>h(y).name=Q)},null,8,["modelValue"]),l(G,{error:h(y).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(W,{"label-for":"user_id",label:S.$t("users::team.manager"),required:""},{default:p(()=>[l(ae,{modelValue:h(y).user_id,"onUpdate:modelValue":T[3]||(T[3]=Q=>h(y).user_id=Q),label:"name","input-id":"user_id",options:h(n),clearable:!1,reduce:Q=>Q.id},null,8,["modelValue","options","reduce"]),l(G,{error:h(y).getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(W,{"label-for":"membersInputCreate",label:S.$t("users::team.members")},{default:p(()=>[l(ae,{modelValue:h(y).members,"onUpdate:modelValue":T[4]||(T[4]=Q=>h(y).members=Q),"input-id":"membersInputCreate",label:"name",options:h(n),reduce:Q=>Q.id,multiple:""},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(W,{"label-for":"descriptionInputCreate",label:S.$t("users::team.description")},{default:p(()=>[l(ue,{id:"descriptionInputCreate",modelValue:h(y).description,"onUpdate:modelValue":T[5]||(T[5]=Q=>h(y).description=Q)},null,8,["modelValue"]),l(G,{error:h(y).getError("description")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["title","visible","ok-text","ok-disabled"]),l(ce,{visible:m.value!==null,"ok-text":S.$t("core::app.save"),"ok-disabled":h(b).busy,title:S.$t("users::team.edit"),"sub-title":(ie=m.value)==null?void 0:ie.name,form:"",onHidden:T[12]||(T[12]=Q=>{m.value=null,h(b).reset()}),onSubmit:x},{default:p(()=>[l(W,{"label-for":"nameInputEdit",label:S.$t("users::team.name"),required:""},{default:p(()=>[l(ee,{id:"nameInputEdit",ref:"nameInputEdit",modelValue:h(b).name,"onUpdate:modelValue":T[8]||(T[8]=Q=>h(b).name=Q)},null,8,["modelValue"]),l(G,{error:h(b).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(W,{"label-for":"user_id",label:S.$t("users::team.manager"),required:""},{default:p(()=>[l(ae,{modelValue:h(b).user_id,"onUpdate:modelValue":T[9]||(T[9]=Q=>h(b).user_id=Q),label:"name","input-id":"user_id",options:h(n),clearable:!1,reduce:Q=>Q.id},null,8,["modelValue","options","reduce"]),l(G,{error:h(b).getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(W,{"label-for":"membersInputEdit",label:S.$t("users::team.members")},{default:p(()=>[l(ae,{modelValue:h(b).members,"onUpdate:modelValue":T[10]||(T[10]=Q=>h(b).members=Q),"input-id":"membersInputEdit",label:"name",options:h(n),reduce:Q=>Q.id,multiple:""},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(W,{"label-for":"descriptionInputEdit",label:S.$t("users::team.description")},{default:p(()=>[l(ue,{id:"descriptionInputEdit",modelValue:h(b).description,"onUpdate:modelValue":T[11]||(T[11]=Q=>h(b).description=Q)},null,8,["modelValue"]),l(G,{error:h(b).getError("description")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["visible","ok-text","ok-disabled","title","sub-title"])],64)}}},zge=[{path:"users",component:Cge,name:"users-index",meta:{title:at("users::user.users"),superAdmin:!0},children:[{path:"create",name:"create-user",components:{createEdit:Sge},meta:{title:at("users::user.create")}},{path:":id/edit",name:"edit-user",components:{createEdit:Tge},meta:{title:at("users::user.edit")}},{path:"invite",name:"invite-user",components:{invite:Age},meta:{title:at("users::user.invite")}},{path:"roles",name:"role-index",components:{roles:wge},meta:{title:at("core::role.roles")},children:[{path:"create",name:"create-role",component:yge,meta:{title:at("core::role.create")}},{path:":id/edit",name:"edit-role",component:_ge,meta:{title:at("core::role.edit")}}]},{path:"teams",name:"manage-teams",components:{teams:jge},meta:{title:at("users::team.teams")}}]}];window.Innoclapps&&Innoclapps.booting(function(e,t,n){const o=this.scriptConfig("users")||[],a=this.scriptConfig("user_id");e.component("UserInvitationAcceptForm",Khe),n.registerModule("users",Qhe),n.commit("users/SET",o),e.use(Ghe,n.getters["users/current"]),t.beforeEach((r,s,i)=>{const u=r.matched.find(c=>c.meta.superAdmin);u&&u.meta.superAdmin===!0&&!n.getters["users/current"].super_admin?i({path:"/403"}):i()}),a&&Hhe(a,r=>{this.request(`/notifications/${r.id}`).then(({data:s})=>At("new-notification",s))}),zge.forEach(r=>t.addRoute("settings",r)),t.addRoute({path:"/profile",name:"profile",component:gge,meta:{title:at("users::profile.profile")}}),t.addRoute({path:"/personal-access-tokens",name:"personal-access-tokens",component:o0e,meta:{title:at("core::api.personal_access_tokens")}})});const Ro="vel",Wo=Le({name:"SvgIcon",props:{type:{type:String,default:""}},setup:e=>()=>l("svg",{class:`${Ro}-icon icon`,"aria-hidden":"true"},[l("use",{"xlink:href":`#icon-${e.type}`},null)])}),xd=typeof window<"u",fl=()=>{};let Fk=!1;if(xd)try{const e={};Object.defineProperty(e,"passive",{get(){Fk=!0}}),window.addEventListener("test-passive",fl,e)}catch{}const y1=function(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];xd&&e.addEventListener(t,n,!!Fk&&{capture:!1,passive:o})},_1=(e,t,n)=>{xd&&e.removeEventListener(t,n)},Hge=e=>{e.preventDefault()},Wge=Object.prototype.toString,Pv=e=>t=>Wge.call(t).slice(8,-1)===e,Gge=e=>!!e&&Pv("Object")(e),I1=e=>!!e&&Pv("String")(e);function Kge(e){return e!=null}const Zge=Le({name:"Toolbar",props:{zoomIn:{type:Function,default:fl},zoomOut:{type:Function,default:fl},rotateLeft:{type:Function,default:fl},rotateRight:{type:Function,default:fl},resize:{type:Function,default:fl},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:e=>()=>l("div",{class:`${Ro}-toolbar`},[!e.zoomDisabled&&l(fe,null,[l("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:e.zoomIn},[l(Wo,{type:"zoomin"},null)]),l("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:e.zoomOut},[l(Wo,{type:"zoomout"},null)])]),l("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:e.resize},[l(Wo,{type:"resize"},null)]),!e.rotateDisabled&&l(fe,null,[l("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:e.rotateLeft},[l(Wo,{type:"rotate-left"},null)]),l("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:e.rotateRight},[l(Wo,{type:"rotate-right"},null)])])])}),Yge=()=>l("div",{class:`${Ro}-loading`},[l("div",{class:"ring"},null)]),Xge=()=>l("div",{class:`${Ro}-on-error`},[l("div",{class:"ring"},null),l(Wo,{type:"img-broken"},null)]),Qge=(e,t)=>{let{slots:n}=t;return l("div",{class:`${Ro}-img-title`},[n.default?n.default():""])},Jge=Le({name:"DefaultIcons",setup:()=>()=>l("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[l("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[l("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),l("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[l("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),l("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[l("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),l("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[l("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),l("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[l("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),l("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[l("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),l("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[l("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),l("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),l("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),l("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[l("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),l("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[l("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),l("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),Ls=xd?window:global;let w1=Date.now();function ebe(e){const t=Date.now(),n=Math.max(0,16-(t-w1)),o=setTimeout(e,n);return w1=t+n,o}function Tm(e){return(Ls.requestAnimationFrame||ebe).call(Ls,e)}function x1(e){(Ls.cancelAnimationFrame||Ls.clearTimeout).call(Ls,e)}function k1(e,t){const n=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(n*n+o*o)}function Em(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!z1(e)}var Fm=Le({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":e=>!0,"on-prev":(e,t)=>!0,"on-next":(e,t)=>!0,"on-prev-click":(e,t)=>!0,"on-next-click":(e,t)=>!0,"on-index-change":(e,t)=>!0,"on-rotate":e=>!0},setup(e,t){let{emit:n,slots:o}=t;const{imgRef:a,imgState:r,setImgSize:s}=(()=>{const re=M(),we=uo({width:0,height:0,maxScale:1});return{imgRef:re,imgState:we,setImgSize:()=>{if(re.value){const{width:Ce,height:ge,naturalWidth:Re}=re.value;we.maxScale=Re/Ce,we.width=Ce,we.height=ge}}}})(),i=M(e.index),u=M(""),c=uo({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),m=uo({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),f=O(()=>{return re=e.imgs,Pv("Array")(re)?e.imgs.map(we=>typeof we=="string"?{src:we}:function(Ce){return Gge(Ce)&&I1(Ce.src)}(we)?we:void 0).filter(Kge):I1(e.imgs)?[{src:e.imgs}]:[];var re}),v=O(()=>f.value[i.value]),y=O(()=>{var re;return(re=f.value[i.value])==null?void 0:re.src}),b=O(()=>{var re;return(re=f.value[i.value])==null?void 0:re.title}),w=O(()=>{var re;return(re=f.value[i.value])==null?void 0:re.alt}),k=O(()=>({cursor:m.loadError?"default":e.moveDisabled?m.dragging?"grabbing":"grab":"move",top:`calc(50% + ${c.top}px)`,left:`calc(50% + ${c.left}px)`,transition:m.dragging||m.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${c.scale}) rotate(${c.rotateDeg}deg)`})),x=()=>{n("hide")},I=()=>{c.scale=1,c.lastScale=1,c.rotateDeg=0,c.top=0,c.left=0,m.loadError=!1,m.dragging=!1,m.loading=!0},C=(re,we)=>{const Ce=i.value;I(),i.value=re,f.value[i.value]===f.value[re]&&ze(()=>{m.loading=!1}),e.visible&&Ce!==re&&(we&&we(Ce,re),n("on-index-change",Ce,re))},S=()=>{const re=i.value,we=e.loop?(re+1)%f.value.length:re+1;!e.loop&&we>f.value.length-1||C(we,(Ce,ge)=>{n("on-next",Ce,ge),n("on-next-click",Ce,ge)})},T=()=>{const re=i.value;let we=re-1;if(re===0){if(!e.loop)return;we=f.value.length-1}C(we,(Ce,ge)=>{n("on-prev",Ce,ge),n("on-prev-click",Ce,ge)})},E=re=>{Math.abs(1-re)<.05?re=1:Math.abs(r.maxScale-re)<.05&&(re=r.maxScale),c.lastScale=c.scale,c.scale=re},$=()=>{const re=c.scale+e.zoomScale;re<r.maxScale*e.maxZoom&&E(re)},F=()=>{const re=c.scale-e.zoomScale;re>e.minZoom&&E(re)},R=()=>{const re=c.rotateDeg%360;n("on-rotate",Math.abs(re<0?re+360:re))},B=()=>{c.rotateDeg-=90,R()},V=()=>{c.rotateDeg+=90,R()},P=()=>{c.scale=1,c.top=0,c.left=0},z=function(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!e.moveDisabled&&re===0},{onMouseDown:H,onMouseMove:j,onMouseUp:N}=((re,we,Ce)=>{let ge,Re=!1;return{onMouseDown:et=>{re.initX=re.lastX=et.clientX,re.initY=re.lastY=et.clientY,we.dragging=!0,Re=!1,et.stopPropagation()},onMouseUp:et=>{Ce(et.button)&&x1(ge),we.dragging=!1,Re=!1},onMouseMove:et=>{if(we.dragging)if(Ce(et.button)){if(Re)return;Re=!0,ge=Tm(()=>{const{top:kt,left:lt,lastY:ft,lastX:zt}=re;re.top=kt-ft+et.clientY,re.left=lt-zt+et.clientX,re.lastX=et.clientX,re.lastY=et.clientY,Re=!1})}else re.lastX=et.clientX,re.lastY=et.clientY;et.stopPropagation()}}})(c,m,z),{onTouchStart:L,onTouchMove:U,onTouchEnd:ee}=((re,we,Ce,ge,Re)=>{let et,kt=!1;return{onTouchStart:lt=>{const{touches:ft}=lt;ft.length>1&&Re()?(Ce.gesturing=!0,we.touches=ft):(we.initX=we.lastX=ft[0].clientX,we.initY=we.lastY=ft[0].clientY,Ce.dragging=!0),lt.stopPropagation()},onTouchMove:lt=>{if(kt)return;const{touches:ft}=lt,{lastX:zt,lastY:De,left:_e,top:Te,scale:Xe}=we;if(!Ce.gesturing&&Ce.dragging){if(!ft[0])return;const{clientX:Me,clientY:ke}=ft[0];ge()?et=Tm(()=>{we.lastX=Me,we.lastY=ke,we.top=Te-De+ke,we.left=_e-zt+Me,kt=!1}):(we.lastX=Me,we.lastY=ke)}else Ce.gesturing&&we.touches.length>1&&ft.length>1&&Re()&&(et=Tm(()=>{const Me=(k1(we.touches[0],we.touches[1])-k1(ft[0],ft[1]))/re.width;we.touches=ft;const ke=Xe-1.3*Me;ke>.5&&ke<1.5*re.maxScale&&(we.scale=ke),kt=!1}))},onTouchEnd:()=>{x1(et),Ce.dragging=!1,Ce.gesturing=!1,kt=!1}}})(r,c,m,z,()=>!e.pinchDisabled),G=()=>{e.dblclickDisabled||(c.scale!==r.maxScale?(c.lastScale=c.scale,c.scale=r.maxScale):c.scale=c.lastScale)},W=re=>{m.loadError||m.gesturing||m.loading||m.dragging||m.wheeling||!e.scrollDisabled||e.zoomDisabled||(m.wheeling=!0,setTimeout(()=>{m.wheeling=!1},80),re.deltaY<0?$():F())},ae=re=>{const we=re;e.visible&&(!e.escDisabled&&we.key==="Escape"&&e.visible&&x(),we.key==="ArrowLeft"&&(e.rtl?S():T()),we.key==="ArrowRight"&&(e.rtl?T():S()))},ue=()=>{e.maskClosable&&x()},ce=()=>{s()},oe=()=>{m.loading=!1},ie=re=>{m.loading=!1,m.loadError=!0,n("on-error",re)},Q=()=>{e.visible&&s()};$e(()=>e.index,re=>{re<0||re>=f.value.length||C(re)}),$e(()=>m.dragging,(re,we)=>{const Ce=!re&&we;if(!z()&&Ce){const ge=c.lastX-c.initX,Re=c.lastY-c.initY,et=e.swipeTolerance;Math.abs(ge)>Math.abs(Re)&&(ge<-1*et?S():ge>et&&T())}}),$e(()=>e.visible,re=>{if(re){I();const we=f.value.length;if(we===0)return i.value=0,m.loading=!1,void ze(()=>m.loadError=!0);i.value=e.index>=we?we-1:e.index<0?0:e.index,e.scrollDisabled&&se()}else e.scrollDisabled&&me()});const se=()=>{document&&(u.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},me=()=>{document&&(document.body.style.overflowY=u.value)};Je(()=>{y1(document,"keydown",ae),y1(window,"resize",Q)}),En(()=>{_1(document,"keydown",ae),_1(window,"resize",Q),e.scrollDisabled&&me()});const xe=()=>m.loading?o.loading?o.loading({key:"loading"}):l(Yge,{key:"img-loading"},null):m.loadError?o.onerror?o.onerror({key:"onerror"}):l(Xge,{key:"img-on-error"},null):l("div",{class:`${Ro}-img-wrapper`,style:k.value,key:"img-wrapper"},[l("img",{alt:w.value,ref:a,draggable:"false",class:`${Ro}-img`,src:y.value,onMousedown:H,onMouseup:N,onMousemove:j,onTouchstart:L,onTouchmove:U,onTouchend:ee,onLoad:ce,onDblclick:G,onDragstart:re=>{re.preventDefault()}},null)]),de=()=>{if(o["prev-btn"])return o["prev-btn"]({prev:T});if(f.value.length<=1)return;const re=!e.loop&&i.value<=0;return l("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(re?"disable":""),onClick:T},[e.rtl?l(Wo,{type:"next"},null):l(Wo,{type:"prev"},null)])},he=()=>{if(o["next-btn"])return o["next-btn"]({next:S});if(f.value.length<=1)return;const re=!e.loop&&i.value>=f.value.length-1;return l("div",{role:"button","aria-label":"next image button",class:"btn__next "+(re?"disable":""),onClick:S},[e.rtl?l(Wo,{type:"prev"},null):l(Wo,{type:"next"},null)])},Y=()=>{if(!(e.titleDisabled||m.loading||m.loadError))return o.title?o.title({currentImg:v.value}):b.value?l(Qge,null,{default:()=>[b.value]}):void 0},X=()=>{let re;if(e.visible)return l("div",{onTouchmove:Hge,class:[`${Ro}-modal`,e.rtl?"is-rtl":""],onClick:ot(ue,["self"]),onWheel:W},[l(Jge,null,null),l(lr,{name:`${Ro}-fade`,mode:"out-in"},Em(re=xe())?re:{default:()=>[re]}),l("img",{style:"display:none;",src:y.value,onError:ie,onLoad:oe},null),l("div",{class:`${Ro}-btns-wrapper`},[de(),he(),Y(),o["close-btn"]?o["close-btn"]({close:x}):l("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:x},[l(Wo,{type:"close"},null)]),o.toolbar?o.toolbar({toolbarMethods:{zoomIn:$,zoomOut:F,rotate:B,rotateLeft:B,rotateRight:V,resize:P},zoomIn:$,zoomOut:F,rotate:B,rotateLeft:B,rotateRight:V,resize:P}):l(Zge,{zoomIn:$,zoomOut:F,resize:P,rotateLeft:B,rotateRight:V,rotateDisabled:e.rotateDisabled,zoomDisabled:e.zoomDisabled},null)])])};return()=>{let re;if(e.teleport){let we;return l(ta,{to:e.teleport},{default:()=>[l(lr,{name:`${Ro}-fade`},Em(we=X())?we:{default:()=>[we]})]})}return l(lr,{name:`${Ro}-fade`},Em(re=X())?re:{default:()=>[re]})}}});const tbe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{imgs:""};const{imgs:t="",initIndex:n=0}=e,o=M(t),a=M(n),r=M(!1),s=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.value;a.value=i};return{imgsRef:o,indexRef:a,visibleRef:r,show:function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.value;typeof i=="number"?s(i):$n(i)&&typeof i.value=="number"?s(i.value):i instanceof Event&&s(a.value),r.value=!0},onHide:()=>{r.value=!1},changeIndex:s}},nbe=Object.assign(Fm,{install:e=>{e.component(Fm.name,Fm)}}),obe={class:"vel-toolbar"},abe=["onClick"],rbe=_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-zoomin"})],-1),lbe=[rbe],sbe=["onClick"],ibe=_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-zoomout"})],-1),ube=[ibe],cbe=["onClick"],dbe=_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-rotate-left"})],-1),mbe=[dbe],fbe=["onClick"],pbe=_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-rotate-right"})],-1),vbe=[pbe],Mv={__name:"UrlableLightbox",props:{modelValue:{validator:e=>typeof e=="number"||typeof e=="string"||e===null},urls:Array},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,{show:a,visibleRef:r,indexRef:s,imgsRef:i}=tbe({imgs:n.urls,initIndex:0}),u=O(()=>n.urls.length),c=()=>{r.value=!1,n.modelValue!==null&&o("update:modelValue",null)};return $e(()=>n.modelValue,m=>{m>=0&&m!==null?a(m):r.value=!1},{immediate:!0}),$e(u,()=>i.value=n.urls),(m,f)=>(g(),A(h(nbe),{visible:h(r),imgs:h(i),index:h(s),onHide:c,onOnIndexChange:f[0]||(f[0]=(v,y)=>m.$emit("update:modelValue",y))},{toolbar:p(({toolbarMethods:v})=>[_("div",obe,[_("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:v.zoomIn},lbe,8,abe),_("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:v.zoomOut},ube,8,sbe),_("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:v.rotateLeft},mbe,8,cbe),_("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:v.rotateRight},vbe,8,fbe),Se(m.$slots,"toolbar")])]),_:3},8,["visible","imgs","index"]))}},hbe=["href","target"],gbe={class:"shrink-0"},bbe=["textContent"],ybe={class:"min-w-0 flex-1 truncate"},_be={class:"block shrink-0 md:hidden md:group-hover:block"},Ibe={class:"flex items-center sm:space-x-2"},cc=Object.assign({inheritAttrs:!1},{__name:"MediaItemsList",props:{items:Array,authorizeDelete:Boolean},emits:["deleteRequested"],setup(e){const t=e,n=M(null),{localizedDateTime:o}=rt(),a=O(()=>t.items.filter(u=>u.aggregate_type==="image")),r=O(()=>a.value.map(u=>u.preview_url)),s=O(()=>a.value[n.value]);function i(u){return a.value.findIndex(c=>c.preview_url===u)}return(u,c)=>{const m=d("Icon"),f=d("ILink"),v=d("IText"),y=d("IButton");return g(),D(fe,null,[l(Mv,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=b=>n.value=b),urls:r.value},{toolbar:p(()=>[(g(),D(fe,null,Ie(["preview_url","download_url"],b=>_("a",{key:b,tabindex:"-1",rel:"noopener noreferrer",class:"toolbar-btn",href:s.value[b],target:b==="preview_url"?"_blank":void 0},[l(m,{class:"size-5",icon:b=="preview_url"?"Eye":"DownloadSolid"},null,8,["icon"])],8,hbe)),64))]),_:1},8,["modelValue","urls"]),_("ul",Ue({class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},u.$attrs),[(g(!0),D(fe,null,Ie(e.items,b=>(g(),D("li",{key:b.id,class:"group flex items-center space-x-3 py-3 last:pb-0"},[_("div",gbe,[_("span",{class:be(["inline-flex size-8 items-center justify-center rounded-full text-base/6 sm:text-sm/6",[b.was_recently_created?"bg-success-500 text-white":"bg-neutral-200 text-neutral-400 dark:bg-neutral-700 dark:text-neutral-300"]])},[b.was_recently_created?(g(),A(m,{key:0,icon:"Check",class:"size-5"})):(g(),D("span",{key:1,textContent:Z(b.extension)},null,8,bbe))],2)]),_("div",ybe,[b.aggregate_type!=="image"?(g(),A(f,{key:0,class:"font-medium",tabindex:"0",href:b.view_url,text:b.file_name,basic:""},null,8,["href","text"])):(g(),A(f,{key:1,class:"font-medium",tabindex:"0",href:b.view_path,text:b.file_name,basic:"",onClick:ot(w=>n.value=i(b.preview_url),["prevent"])},null,8,["href","text","onClick"])),l(v,{class:"ml-2 inline",text:h(Ay)(b.size)},null,8,["text"]),l(v,{text:h(o)(b.created_at)},null,8,["text"])]),_("div",_be,[_("div",Ibe,[l(y,{href:b.download_path,basic:"",small:"",download:""},{default:p(()=>[l(m,{icon:"DownloadSolid"})]),_:2},1032,["href"]),e.authorizeDelete&&b.via_text_attribute!==!0?(g(),A(y,{key:0,icon:"XSolid",basic:"",small:"",onClick:w=>u.$emit("deleteRequested",b)},null,8,["onClick"])):K("",!0)])])]))),128))],16)],64)}}}),wbe={class:"mt-3"},yr={__name:"ResourceRecordMediaList",props:{resourceName:{type:String,required:!0},resourceId:{type:Number,required:!0},media:{type:Array,required:!0},authorizeDelete:{required:!0,type:Boolean},isFloating:{type:Boolean,required:!1}},emits:["deleted","uploaded"],setup(e,{emit:t}){const n=e,o=t,a=O(()=>Vt(n.media,c=>new Date(c.created_at),["desc"])),r=O(()=>n.media.length),s=O(()=>r.value>0);function i(c){o("uploaded",c)}async function u(c){await Innoclapps.request().delete(`/${n.resourceName}/${n.resourceId}/media/${c.id}`),o("deleted",c)}return(c,m)=>{const f=d("IText");return g(),D("div",null,[l(cc,{items:a.value,"authorize-delete":e.authorizeDelete,onDeleteRequested:m[0]||(m[0]=v=>c.$confirm(()=>u(v)))},null,8,["items","authorize-delete"]),ne(l(f,{class:"mt-2",text:c.$t("core::app.no_attachments")},null,8,["text"]),[[pe,!s.value]]),_("div",wbe,[l(Dl,{"input-id":"media-"+e.resourceName+"-"+e.resourceId+(e.isFloating?"-floating":""),"action-url":`${c.$scriptConfig("apiURL")}/${e.resourceName}/${e.resourceId}/media`,onFileUploaded:i},null,8,["input-id","action-url"])])])}}};function _a(e,t){const n=cn(),o=O(()=>n.state.comments.requestInProgress),a=O({set(c){n.commit("comments/SET_LOADED",{commentableId:pt(e),commentableType:t,value:c})},get(){return n.getters["comments/areLoadedFor"](pt(e),t)}}),r=O({set(c){n.commit("comments/SET_VISIBILITY",{commentableId:pt(e),commentableType:t,visible:c})},get(){return n.getters["comments/areVisibleFor"](pt(e),t)}}),s=O({set(c){n.commit("comments/SET_ADD_COMMENT_VISIBILITY",{commentableId:pt(e),commentableType:t,value:c})},get(){return n.getters["comments/isCommentBeingCreatedFor"](pt(e),t)}});function i(){r.value=!r.value}function u(c,m){return n.dispatch("comments/getAll",{resourceName:t,resourceId:pt(e),viaResource:c,viaResourceId:m})}return{requestInProgress:o,commengIsBeingCreated:s,commentsAreLoaded:a,commentsAreVisible:r,getAllComments:u,toggleCommentsVisibility:i}}const xbe=["v-tooltip-placement"],kd={__name:"ActivityStateChange",props:{activityId:{required:!0,type:Number},isCompleted:{required:!0,type:Boolean},tooltipPlacement:{type:String,default:"top"},disabled:Boolean},emits:["changed"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{updateResource:r,resourceBeingUpdated:s}=Dt(Innoclapps.resourceName("activities")),i=O(()=>{let m=["inline-block mr-0.5 focus:outline-none"];return n.isCompleted?m.push("text-success-500 hover:text-neutral-500 dark:text-success-400 dark:hover:text-neutral-300"):m.push("text-neutral-500 hover:text-success-600 dark:text-neutral-300 dark:hover:text-success-400"),(n.disabled||s.value)&&m.push("pointer-events-none opacity-60"),m}),u=O(()=>n.disabled?a("users::user.not_authorized"):n.isCompleted?a("activities::activity.mark_as_incomplete"):a("activities::activity.mark_as_completed"));function c(){r({is_completed:!n.isCompleted},n.activityId).then(m=>o("changed",m))}return(m,f)=>{const v=d("ISpinner"),y=d("Icon"),b=d("ILink"),w=Ve("i-tooltip");return ne((g(),D("span",{class:"inline-block","v-tooltip-placement":e.tooltipPlacement},[l(b,{class:be(i.value),plain:"",onClick:c},{default:p(()=>[h(s)?(g(),A(v,{key:0,class:be(["size-4",e.isCompleted?"text-neutral-500 dark:text-neutral-300":"text-success-500 dark:text-success-400"])},null,8,["class"])):(g(),D("span",{key:1,class:be(["flex size-4 items-center justify-center rounded-full border",e.isCompleted?"border-success-300 dark:border-success-400":"border-neutral-300 dark:border-neutral-600"])},[e.isCompleted?(g(),A(y,{key:0,icon:"Check"})):K("",!0)],2))]),_:1},8,["class"])],8,xbe)),[[w,u.value]])}}},kbe={key:0,class:"flex items-center"},$be={key:0,class:"absolute -top-3 right-5 sm:top-2"},Cbe={key:2,class:"mt-10 sm:mt-0"},Sbe={class:"mt-5"},Tbe={class:"my-3 text-right"},Ak={__name:"EditActivityModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},isReady:{required:!0,type:Boolean},updateUsing:{required:!0,type:Function}},emits:["actionExecuted"],setup(e){const t=e,n=Innoclapps.resourceName("activities"),{t:o}=Ee(),a=It(),{form:r}=Ze(),{localizedDateTime:s}=rt(),i=M(!1),u=M(!1),c=M(!1),m=M(a.query.comment_id?1:0),f=O(()=>t.resource.id),v=O(()=>f.value||[]),y=O(()=>t.resource.actions||[]),b=O(()=>t.isReady?`${o("core::app.created_at")}: ${s(t.resource.created_at)} - ${t.resource.creator.name}`:""),w=Pe("synchronizeResourceSilently"),k=Pe("synchronizeResource"),x=Pe("hydrateFields"),I=Pe("incrementResourceCount"),C=Pe("decrementResourceCount"),{getAllComments:S,commentsAreLoaded:T}=_a(f,n);async function E(){w({comments:await S()}),T.value=!0}function $(F,R){k({[F]:R}),x({[F]:R}),r[F].push(R.id)}return(F,R)=>{var Q;const B=d("FieldsPlaceholder"),V=d("ITab"),P=d("ITabList"),z=d("ILink"),H=d("FormFields"),j=d("IText"),N=d("ITextDisplay"),L=d("ITabPanel"),U=d("CommentsAdd"),ee=d("CommentsList"),G=d("IOverlay"),W=d("ITabPanels"),ae=d("ITabGroup"),ue=d("CreateDealModal"),ce=d("CreateContactModal"),oe=d("CreateCompanyModal"),ie=d("ISlideover");return g(),A(ie,{id:"editActivityModal","ok-disabled":h(r).busy||!((Q=e.resource.authorizations)!=null&&Q.update),"ok-text":F.$t("core::app.save"),"hide-footer":m.value===1,title:e.resource.title,"sub-title":b.value,visible:"",form:"","static-backdrop":"",onSubmit:R[21]||(R[21]=se=>e.updateUsing(h(r)))},{title:p(({title:se})=>[e.isReady?(g(),D("div",kbe,[l(kd,{class:"mr-1 mt-0.5 self-start","tooltip-placement":"bottom","is-completed":e.resource.is_completed,disabled:!e.resource.authorizations.update,"activity-id":f.value,onChanged:R[0]||(R[0]=me=>h(k)(me,!0))},null,8,["is-completed","disabled","activity-id"]),_("span",null,Z(se),1)])):K("",!0)]),default:p(()=>[e.isReady?(g(),D("div",$be,[l(fs,{type:"dropdown",ids:v.value,actions:y.value,"resource-name":h(n),onRun:R[1]||(R[1]=se=>F.$emit("actionExecuted",se))},null,8,["ids","actions","resource-name"])])):K("",!0),e.isReady?(g(),D("div",Cbe,[l(ae,{modelValue:m.value,"onUpdate:modelValue":R[12]||(R[12]=se=>m.value=se)},{default:p(()=>[l(P,null,{default:p(()=>[l(V,{title:F.$t("activities::activity.activity")},null,8,["title"]),l(V,{title:F.$t("comments::comment.comments")+" ("+e.resource.comments_count+")",onActivatedOnce:E},null,8,["title"])]),_:1}),l(W,null,{default:p(()=>[l(L,null,{default:p(()=>[l(H,{fields:e.fields,form:h(r),"resource-id":f.value,"resource-name":h(n),onUpdateFieldValue:R[5]||(R[5]=se=>h(r).fill(se.attribute,se.value)),onSetInitialValue:R[6]||(R[6]=se=>h(r).set(se.attribute,se.value))},{"after-deals-field":p(()=>[l(z,{class:"-mt-1 block text-right",onClick:R[2]||(R[2]=se=>i.value=!0)},{default:p(()=>[le(" + "+Z(F.$t("deals::deal.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(z,{class:"-mt-1 block text-right",onClick:R[3]||(R[3]=se=>c.value=!0)},{default:p(()=>[le(" + "+Z(F.$t("contacts::company.create")),1)]),_:1})]),"after-contacts-field":p(()=>[l(z,{class:"-mt-1 block text-right",onClick:R[4]||(R[4]=se=>u.value=!0)},{default:p(()=>[le(" + "+Z(F.$t("contacts::contact.create")),1)]),_:1})]),_:1},8,["fields","form","resource-id","resource-name"]),_("div",Sbe,[l(N,null,{default:p(()=>[le(Z(F.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(j,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":h(n),"resource-id":f.value,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,onDeleted:R[7]||(R[7]=se=>h(k)({media:{id:se.id,_delete:!0}})),onUploaded:R[8]||(R[8]=se=>h(k)({media:[se]}))},null,8,["resource-name","resource-id","media","authorize-delete"])])]),_:1}),l(L,{lazy:""},{default:p(()=>[_("div",Tbe,[l(U,{"commentable-type":"activities","commentable-id":f.value,onCreated:R[9]||(R[9]=se=>(h(I)("comments_count"),h(w)({comments:[se]})))},null,8,["commentable-id"])]),l(G,{show:!h(T)},{default:p(()=>[h(T)?(g(),A(ee,{key:0,"commentable-type":"activities",comments:e.resource.comments||[],"commentable-id":f.value,"auto-focus-if-required":!0,onUpdated:R[10]||(R[10]=se=>h(w)({comments:se})),onDeleted:R[11]||(R[11]=se=>(h(C)("comments_count"),h(w)({comments:{id:se,_delete:!0}})))},null,8,["comments","commentable-id"])):K("",!0)]),_:1},8,["show"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(g(),A(B,{key:1})),l(ue,{visible:i.value,"onUpdate:visible":R[13]||(R[13]=se=>i.value=se),overlay:!1,onCreated:R[14]||(R[14]=se=>($("deals",se.deal),i.value=!1))},null,8,["visible"]),l(ce,{visible:u.value,"onUpdate:visible":R[15]||(R[15]=se=>u.value=se),overlay:!1,onCreated:R[16]||(R[16]=se=>($("contacts",se.contact),u.value=!1)),onRestored:R[17]||(R[17]=se=>($("contacts",se),u.value=!1))},null,8,["visible"]),l(oe,{visible:c.value,"onUpdate:visible":R[18]||(R[18]=se=>c.value=se),overlay:!1,onCreated:R[19]||(R[19]=se=>($("companies",se.company),c.value=!1)),onRestored:R[20]||(R[20]=se=>($("companies",se),c.value=!1))},null,8,["visible"])]),_:1},8,["ok-disabled","ok-text","hide-footer","title","sub-title"])}}},Ebe={__name:"ActivityFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},setup(e){const t=Pe("synchronizeResource"),n=Pe("synchronizeAndEmitUpdatedEvent");return st("synchronizeResourceSilently",t),st("synchronizeResource",n),(o,a)=>(g(),A(Ak,{"update-using":e.updateHandler,"is-ready":e.floatingReady,fields:e.fields,resource:e.resource},null,8,["update-using","is-ready","fields","resource"]))}},Fbe={__name:"CreateActivityModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,withExtendedSubmitButtons:Boolean,title:String,note:{},description:{},activityTypeId:{},contacts:{},companies:{},deals:{},dueDate:{},endDate:{},reminderMinutesBefore:{}},emits:["created","update:visible"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("activities"),{t:r}=Ee(),s=_t(),{fields:i,hasFields:u,findField:c,getCreateFields:m}=yn(),{form:f}=Ze(),{createResource:v}=Dt(a),y=M(!1),b=M(!1),w=M(!1);La(()=>n.visible,$,{immediate:!0});function k(F,R){c(F).options.push(R),f[F].push(R.id)}function x(){S().then(E)}function I(){S("create-another").then(F=>{f.reset(),E(F)})}function C(){S("go-to-list").then(E)}async function S(F=null){try{let B={activity:await v(f),isRegularAction:F===null,action:F};return o("created",B),Innoclapps.success(r("activities::activity.created")),B}catch(R){return R.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(R)}}function T(){i.value=[]}function E(F){if(F.indexRoute={name:"activity-index"},F.action==="go-to-list")return s.push(F.indexRoute);if(F.action!=="create-another"&&n.redirectToView){let R=F.activity;s.activity=R,s.push({name:"view-activity",params:{id:R.id}})}}async function $(){const F=await m(a),R=V=>F.some(P=>P.attribute===V),B=V=>Et(F,["attribute",V]);if(R("contacts")&&R("companies")){let V=B("contacts"),P=B("companies");const{lazyLoad:z}=F[V],{lazyLoad:H}=F[P];F[P].lazyLoad=O(()=>f.contacts.length?f.contacts.map(j=>({url:`/contacts/${j}/companies`})):H),F[V].lazyLoad=O(()=>f.companies.length?f.companies.map(j=>({url:`/companies/${j}/contacts`})):z)}i.value=Tn(F,V=>(["contacts","companies","deals","title","note","description"].indexOf(V.attribute)>-1?V.value=n[V.attribute]:V.attribute==="activity_type_id"&&n.activityTypeId?V.value=n.activityTypeId:V.attribute==="due_date"&&n.dueDate?V.value=n.dueDate:V.attribute==="end_date"&&n.endDate?V.value=n.endDate:V.attribute==="reminder_minutes_before"&&n.reminderMinutesBefore&&(V.value=n.reminderMinutesBefore),V))}return(F,R)=>{const B=d("FieldsPlaceholder"),V=d("ILink"),P=d("FormFields"),z=d("IDropdownItem"),H=d("IDropdownMenu"),j=d("IExtendedDropdown"),N=d("CreateDealModal"),L=d("CreateContactModal"),U=d("CreateCompanyModal"),ee=d("ISlideover");return g(),A(ee,{id:"createActivityModal",visible:e.visible,title:e.title||F.$t("activities::activity.create"),"ok-text":F.$t("core::app.create"),"ok-disabled":h(f).busy,"static-backdrop":"",form:"",onHidden:T,"onUpdate:visible":R[13]||(R[13]=G=>F.$emit("update:visible",G)),onSubmit:x},bn({default:p(()=>[h(u)?K("",!0):(g(),A(B,{key:0})),l(P,{fields:h(i),form:h(f),"resource-name":h(a),"is-floating":"","focus-first":"",onUpdateFieldValue:R[3]||(R[3]=G=>h(f).fill(G.attribute,G.value)),onSetInitialValue:R[4]||(R[4]=G=>h(f).set(G.attribute,G.value))},{"after-deals-field":p(()=>[l(V,{class:"-mt-1 block text-right",onClick:R[0]||(R[0]=G=>y.value=!0)},{default:p(()=>[le(" + "+Z(F.$t("deals::deal.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(V,{class:"-mt-1 block text-right",onClick:R[1]||(R[1]=G=>w.value=!0)},{default:p(()=>[le(" + "+Z(F.$t("contacts::company.create")),1)]),_:1})]),"after-contacts-field":p(()=>[l(V,{class:"-mt-1 block text-right",onClick:R[2]||(R[2]=G=>b.value=!0)},{default:p(()=>[le(" + "+Z(F.$t("contacts::contact.create")),1)]),_:1})]),_:1},8,["fields","form","resource-name"]),l(N,{visible:y.value,"onUpdate:visible":R[5]||(R[5]=G=>y.value=G),overlay:!1,onCreated:R[6]||(R[6]=G=>(k("deals",G.deal),y.value=!1))},null,8,["visible"]),l(L,{visible:b.value,"onUpdate:visible":R[7]||(R[7]=G=>b.value=G),overlay:!1,onCreated:R[8]||(R[8]=G=>(k("contacts",G.contact),b.value=!1)),onRestored:R[9]||(R[9]=G=>(k("contacts",G),b.value=!1))},null,8,["visible"]),l(U,{visible:w.value,"onUpdate:visible":R[10]||(R[10]=G=>w.value=G),overlay:!1,onCreated:R[11]||(R[11]=G=>(k("companies",G.company),w.value=!1)),onRestored:R[12]||(R[12]=G=>(k("companies",G),w.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(j,{type:"submit",placement:"top-end",disabled:h(f).busy,loading:h(f).busy,text:F.$t("core::app.create")},{default:p(()=>[l(H,{class:"min-w-48"},{default:p(()=>[l(z,{text:F.$t("core::app.create_and_add_another"),onClick:I},null,8,["text"]),e.goToList?(g(),A(z,{key:0,text:F.$t("core::app.create_and_go_to_list"),onClick:C},null,8,["text"])):K("",!0)]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled"])}}},Abe={class:"-mt-1"},Rbe=["textContent"],Dbe={class:"relative"},Obe={class:"group flex items-center"},Bbe={class:"mr-1.5 mt-1 self-start sm:self-auto"},Nbe={class:"whitespace-normal group-hover:left-6 hover:max-w-none sm:max-w-[13rem] sm:truncate sm:whitespace-nowrap sm:group-hover:absolute sm:hover:whitespace-normal"},Pbe={__name:"MyActivitiesCard",props:{card:Object},setup(e){const t=M(null),n=M(!1),{floatResourceInEditMode:o}=ao();function a(){r(),n.value=!1}function r(){t.value.reload()}return(s,i)=>{const u=d("CreateActivityModal"),c=d("IButton"),m=d("Icon"),f=d("IText"),v=d("ILink"),y=d("IBadge"),b=d("CardAsyncTable");return g(),D(fe,null,[l(u,{visible:n.value,onCreated:a,onHidden:i[0]||(i[0]=w=>n.value=!1)},null,8,["visible"]),l(b,{ref_key:"tableRef",ref:t,card:e.card},{actions:p(()=>[_("div",Abe,[l(c,{class:"hide-when-editing mt-2",variant:"secondary",icon:"PlusSolid",text:s.$t("activities::activity.create"),small:"",onClick:i[1]||(i[1]=w=>n.value=!0)},null,8,["text"])])]),empty:p(w=>[_("div",{class:be(["flex flex-col justify-center",{"items-center py-4":!w.search&&!w.loading}])},[ne(l(m,{icon:"Check",class:"size-8 text-success-500"},null,512),[[pe,!w.search&&!w.loading]]),l(f,{class:be(!w.search&&!w.loading?"mt-2":"")},{default:p(()=>[ne(_("span",{textContent:Z(w.text)},null,8,Rbe),[[pe,w.loading]]),ne(_("span",null,Z(w.search?w.text:s.$t("core::app.all_caught_up")),513),[[pe,!w.loading]])]),_:2},1032,["class"])],2)]),title:p(({row:w,formatted:k})=>[_("div",Dbe,[_("div",Obe,[_("div",Bbe,[l(kd,{"activity-id":w.id,"is-completed":w.is_completed,disabled:!w.authorizations.update,onChanged:r},null,8,["activity-id","is-completed","disabled"])]),_("div",Nbe,[l(v,{text:k,onClick:x=>h(o)({resourceName:"activities",resourceId:w.id})},null,8,["text","onClick"])])])])]),"type.name":p(({row:w,formatted:k})=>[l(y,{text:k,color:w.type.swatch_color,icon:w.type.icon},null,8,["text","color","icon"])]),_:1},8,["card"])],64)}}},Mbe=fn(Pbe,[["__scopeId","data-v-56cce77e"]]),Vbe={__name:"RecordTabActivity",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=O(()=>{const o=(t.resource.activities||[]).filter(r=>!r.is_completed);let a=t.resource.incomplete_activities_for_user_count;return a===0&&o.length>0?o.length:a});return(o,a)=>{const r=d("Icon"),s=d("IBadge"),i=d("ITab");return Un([n.value],()=>l(i,null,{default:p(()=>[l(r,{icon:"Calendar"}),le(" "+Z(o.$t("activities::activity.activities"))+" ",1),ne(l(s,{variant:"danger",text:n.value,pill:""},null,8,["text"]),[[pe,n.value]])]),_:1}),a,0)}}};function gs(e){const t=M(1),n=M(null),o=M(null),a=M(!1),r=M(e.perPage||15),{gate:s}=ss(),i=O(()=>n.value!==null),u=O(()=>o.value&&o.value.length>0);function c(k){if(e.infinityRef.value.state.reset(),t.value=1,!k){m(),n.value=null,o.value=null;return}o.value=[],n.value=k,m(!0)}function m(k=!1){e.infinityRef.value.attemptLoad(k)}function f(k){e.handleInfinityResult?e.handleInfinityResult(k):e.synchronizeResource({[e.timelineRelation]:k.data})}function v(k,x){return x=x||r.value,e.makeRequestForData?e.makeRequestForData(k,x):Innoclapps.request(`${e.resource.value.path}/${e.timelineRelation}`,{params:{page:k,q:n.value,per_page:x,timeline:1}})}async function y(k){if(s.denies("view",e.resource.value)){k.complete();return}let x=null;if({data:x}=await v(t.value),x.data.length===0){i.value&&t.value===1&&(o.value=[]),k.complete(),a.value=!0;return}t.value+=1,i.value?o.value=u.value?o.value.concat(...x.data):x.data:(f(x),ze(()=>a.value=!0)),k.loaded()}function b(){v(1,r.value*t.value).then(({data:k})=>{k.data.length===0?e.synchronizeResource({[e.timelineRelation]:{_reset:[]}}):f(k)})}async function w(k,x){let{data:I}=await Innoclapps.request(`/${e.timelineRelation}/${k}`,{params:{via_resource:e.resourceName,via_resource_id:e.resource.value.id}});e.synchronizeResource({[e.timelineRelation]:[I]}),await ze();const S=document.getElementById("tabPanel-"+e.timelineRelation).querySelector(`.${x}-${I.id}`),T=e.scrollElement?document.querySelector(e.scrollElement):window;S&&T.scrollTo({top:S.getBoundingClientRect().top,behavior:"smooth"})}return{focusToAssociateableElement:w,dataLoadedFirstTime:a,searchResults:o,hasSearchResults:u,infiniteHandler:y,search:n,loadData:m,performSearch:c,isSearching:i,defaultPerPage:r,refresh:b}}const Lbe={class:"flex items-center"},$1=2,qbe=5,za={__name:"AssociationsPopover",props:{widthClass:{type:String,default:"w-72"},modelValue:Object,resourceName:String,resourceId:[String,Number],associationsCount:Number,primaryResourceName:String,primaryRecord:Object,primaryRecordDisabled:Boolean,initialAssociateables:Object,associateables:Object,limitInitialAssociateables:{type:Number,default:3},excludedResources:[String,Array]},emits:["update:modelValue","update:associationsCount","synced","change"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),{setLoading:s,isLoading:i}=An(),u=M(0),c=M(!1),m=M(""),f=M([]),v=M({}),y=M({}),b=M({}),w={},k={contacts:{title:r("contacts::contact.contacts"),resource:"contacts"},companies:{title:r("contacts::company.companies"),resource:"companies"},deals:{title:r("deals::deal.deals"),resource:"deals"}},{syncAssociations:x,associationsBeingSaved:I}=Dt(gt(o,"resourceName"));o.excludedResources&&qn(o.excludedResources).forEach(ue=>{delete k[ue]});const C=O(()=>$1-u.value),S=O(()=>m.value!=""),T=O(()=>!!o.primaryRecord),E=O(()=>Xr(Object.keys(k),ue=>[ue!==o.primaryResourceName,ue])),$=O(()=>{let ue=[];for(let ce in E.value)ue=ue.concat(W(ce));return ue.join(",")}),F=O(()=>E.value.some(ue=>b.value[ue]&&b.value[ue].records.length>0)),R=O(()=>{if(F.value)return b.value;let ue={},ce=(oe,ie)=>{Et(ue[oe].records,["id",parseInt(ie.id)])===-1&&ue[oe].records.push(ie)};return E.value.forEach(oe=>{ue[oe]=Object.assign({},k[oe],{records:[]}),T.value&&oe===o.primaryResourceName&&ce(oe,o.primaryRecord),o.initialAssociateables&&j(oe).forEach(ie=>ce(oe,ie)),Object.hasOwn(o.associateables||{},oe)&&o.associateables[oe].forEach(ie=>ce(oe,ie)),Object.hasOwn(f.value,oe)&&f.value[oe].forEach(ie=>ce(oe,ie)),Object.hasOwn(y.value,oe)&&y.value[oe].records.forEach(ie=>ce(oe,ie))}),ue}),B=O(()=>{let ue=o.associationsCount||0;return E.value.some(ce=>v.value[ce]&&v.value[ce].length>0)&&(ue=P()),ue}),V=O(()=>B.value===0?r("core::app.no_associations"):r("core::app.associated_with_total_records",{count:B.value}));function P(){return Object.values(v.value).reduce((ue,ce)=>ue+ce.length,0)}function z(){s(!0),Innoclapps.request(`/associations/${o.resourceName}/${o.resourceId}`,{perPage:100}).then(({data:ue})=>{f.value=ue,ae()}).finally(()=>s(!1))}function H(){o.resourceName&&o.resourceId&&z()}function j(ue){return Vt((o.initialAssociateables[ue]||[]).slice(0,o.limitInitialAssociateables),"created_at","desc")}function N(ue){let ce=[];return E.value.forEach(oe=>{ce.push(Innoclapps.request(`/${oe}/search`,{params:{q:ue,take:qbe},cancelToken:new Kr(ie=>w[oe]=ie)}))}),ce}function L(){Object.values(w).forEach(ue=>{ue&&ue()})}async function U(ue,ce,oe){if(!y.value[ce]&&oe&&(y.value[ce]={records:[],is_search:oe}),await ze(),v.value[ce].includes(ue.id)&&oe)y.value[ce].records.push(ue);else if(y.value[ce]){let ie=Et(y.value[ce].records,["id",parseInt(ue.id)]);ie!=-1&&y.value[ce].records.splice(ie,1)}o.modelValue==null?x(o.resourceId,v.value).then(ie=>{a("synced",ie),a("change",v.value),z()}):a("change",v.value),await ze(),a("update:associationsCount",P())}function ee(){m.value="",G(""),L()}function G(ue){const ce=ue.length;if(ce===0){b.value={};return}if(u.value=ce,ce<$1)return c.value=!0,ue;c.value=!1,L(),s(!0),Promise.all(N(ue)).then(oe=>{let ie={};E.value.forEach((Q,se)=>{ie[Q]=Object.assign({},k[Q],{records:Tn(oe[se].data,me=>{var xe,de;return me.from_search=!0,me.disabled=((de=ut(((xe=R.value[Q])==null?void 0:xe.records)||[],["id",me.id]))==null?void 0:de.disabled)||!1,me}),is_search:!0})}),b.value=ie,s(!1)})}function W(ue){var oe;let ce=((oe=o.modelValue)==null?void 0:oe[ue])??[];return Object.hasOwn(f.value,ue)&&(ce=ce.concat(Tn(f.value[ue],"id"))),Object.hasOwn(o.associateables||{},ue)&&(ce=ce.concat(Tn(o.associateables[ue],"id"))),[...new Set(ce)]}function ae(){const ue={};for(let ce of E.value)ue[ce]=W(ce),ce===o.primaryResourceName&&o.primaryRecordDisabled===!0&&T.value&&!ue[ce].includes(o.primaryRecord.id)&&ue[ce].push(o.primaryRecord.id);v.value=ue,a("update:modelValue",ue)}return $e($,()=>{ae()}),Je(ae),t({retrieveAssociatedResources:z}),(ue,ce)=>{const oe=d("IPopoverButton"),ie=d("IPopoverHeading"),Q=d("IPopoverHeader"),se=d("IFormInput"),me=d("IButton"),xe=d("IFormGroup"),de=d("IText"),he=d("ITextDark"),Y=d("IFormCheckbox"),X=d("IFormCheckboxLabel"),re=d("Icon"),we=d("ILink"),Ce=d("IFormCheckboxField"),ge=d("IPopoverBody"),Re=d("IOverlay"),et=d("IPopoverPanel"),kt=d("IPopover");return g(),A(kt,{onHide:ee,onShow:H},{default:p(()=>[l(oe,{text:V.value,link:""},null,8,["text"]),l(et,{class:be(e.widthClass)},{default:p(()=>[l(Re,{show:h(I)||h(i)},{default:p(()=>[l(Q,null,{default:p(()=>[l(ie,{text:ue.$t("core::app.associate_with_record")},null,8,["text"])]),_:1}),l(ge,null,{default:p(()=>[l(xe,{class:"relative"},{default:p(()=>[l(se,{modelValue:m.value,"onUpdate:modelValue":ce[0]||(ce[0]=lt=>m.value=lt),class:"pr-8",placeholder:ue.$t("core::app.search_records"),debounce:"",onInput:G},null,8,["modelValue","placeholder"]),ne(l(me,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:ee},null,512),[[pe,m.value]])]),_:1}),ne(l(de,{class:"text-center",text:ue.$t("core::app.no_search_results")},null,8,["text"]),[[pe,S.value&&!F.value&&!h(i)&&!c.value]]),ne(l(de,{class:"text-center",text:ue.$t("core::app.type_more_to_search",{characters:C.value})},null,8,["text"]),[[pe,S.value&&c.value]]),(g(!0),D(fe,null,Ie(R.value,lt=>(g(),D("div",{key:lt.resource},[ne(l(he,{class:"mb-2 mt-3 font-medium",text:lt.title},null,8,["text"]),[[pe,lt.records.length>0]]),(g(!0),D(fe,null,Ie(lt.records,(ft,zt)=>(g(),A(Ce,{key:lt.resource+"-"+ft.id},{default:p(()=>[l(Y,{id:lt.resource+"-"+ft.id,checked:v.value[lt.resource],"onUpdate:checked":De=>v.value[lt.resource]=De,value:ft.id,disabled:ft.disabled||e.primaryRecordDisabled===!0&&e.primaryResourceName===lt.resource&&T.value&&parseInt(e.primaryRecord.id)===parseInt(ft.id),onChange:De=>U(ft,lt.resource,lt.is_search)},null,8,["id","checked","onUpdate:checked","value","disabled","onChange"]),_("div",Lbe,[l(X,{class:"grow",for:lt.resource+"-"+ft.id},{default:p(()=>[le(Z(ft.display_name),1)]),_:2},1032,["for"]),ft.path&&ft.path!==ue.$route.path?(g(),A(we,{key:0,class:"-mr-1 -mt-1",variant:"neutral",to:ft.path},{default:p(()=>[l(re,{icon:"Eye",class:"size-4"})]),_:2},1032,["to"])):K("",!0),Se(ue.$slots,"after-record",{index:zt,title:lt.title,resource:lt.resource,record:ft,isSearching:S.value,isSelected:v.value[lt.resource].includes(ft.id),selectedRecords:v.value[lt.resource]})])]),_:2},1024))),128))]))),128))]),_:3})]),_:3},8,["show"])]),_:3},8,["class"])]),_:3})}}},al=M([]),Ha=()=>{const{setLoading:e,isLoading:t}=An(),{scriptConfig:n}=Ne();al.value=[...n("activities.types")||[]],on(()=>{n("activities.types",[...al.value])});const o=O(()=>Vt(al.value,"name")),a=O(()=>i(o.value));function r(m){return o.value.find(f=>f.id==m)}function s(m){return o.value.find(f=>f.flag==m)}function i(m){return m.map(f=>({id:f.id,icon:f.icon,tooltip:f.name}))}function u(m){al.value=m}function c(m={}){e(!0),Innoclapps.request("/activity-types",Object.assign({},{params:{per_page:100}},m)).then(({data:f})=>al.value=f.data).finally(()=>e(!1))}return{activityTypes:al,typesByName:o,typesAreBeingFetched:t,typesForIconPicker:a,findTypeById:r,findTypeByFlag:s,formatTypesForIcons:i,setActivityTypes:u,fetchActivityTypes:c}},Ube={class:"flex shrink-0"},jbe={key:0,class:"ml-1 truncate"},zbe=_("span",null,"-",-1),Hbe={__name:"ActivityDateDisplay",props:{dueDate:{required:!0},endDate:{required:!0},isDue:{required:!0,type:Boolean},withIcon:{type:Boolean,default:!0}},setup(e){const t=e,{DateTime:n,localizedDate:o,localizedTime:a,localizedDateTime:r,hasTime:s}=rt(),i=O(()=>{if(!t.endDate)return"";const u=s(t.endDate),c=s(t.dueDate),m=n.fromISO(t.endDate),f=n.fromISO(t.dueDate);if(!u&&!c){if(!m.hasSame(f,"day"))return o(t.endDate)}else if(u&&c)if(m.hasSame(f,"day")){if(m.toFormat("HH:mm")!==f.toFormat("HH:mm"))return a(t.endDate)}else return r(t.endDate);else if(!m.hasSame(f,"day"))return u?r(t.endDate):o(t.endDate);return""});return(u,c)=>{const m=d("Icon");return g(),D("div",{class:be(["flex items-center text-base/6 sm:text-sm/6",e.isDue?"text-danger-500 dark:text-danger-400":"text-neutral-800 dark:text-white"])},[_("div",Ube,[e.withIcon?(g(),A(m,{key:0,icon:"Calendar",class:be(["mr-2 size-5",{"text-neutral-800 dark:text-white":!e.isDue,"text-danger-400":e.isDue}])},null,8,["class"])):K("",!0),le(" "+Z(h(s)(e.dueDate)?h(r)(e.dueDate):h(o)(e.dueDate)),1)]),i.value?(g(),D("span",jbe,[zbe,le(" "+Z(i.value),1)])):K("",!0)],2)}}},Wbe={class:"flex w-full flex-col sm:w-auto sm:flex-row sm:items-center sm:justify-end"},Gbe={__name:"RelatedActivityEdit",props:{activityId:{type:Number,required:!0},relatedResource:{required:!0,type:Object},viaResource:{type:String,required:!0},viaResourceId:{type:[String,Number],required:!0}},emits:["cancelled","updated"],setup(e,{emit:t}){const n=e,o=t,a=Pe("synchronizeResource"),r=Pe("incrementResourceCount"),s=Pe("decrementResourceCount"),i=Innoclapps.resourceName("activities"),{t:u}=Ee(),{fields:c,hydrateFields:m,updateField:f,getUpdateFields:v}=yn(),{form:y}=Ze(),{updateResource:b,retrieveResource:w}=Dt(i);let k=!1;const x=O(()=>c.value.length>0),I=O(()=>n.viaResource==="contacts"?[n.relatedResource]:n.relatedResource.contacts||[]);function C(){b(y.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),n.activityId).then(S)}function S(T){T.is_completed!==k&&(T.is_completed?s("incomplete_activities_for_user_count"):r("incomplete_activities_for_user_count"),k=T.is_completed),a({activities:T}),o("updated",T),Innoclapps.success(u("core::resource.updated"))}return Pa(async()=>{const T=await w(n.activityId);k=T.is_completed,c.value=await v(i,n.activityId,{viaResource:n.viaResource,viaResourceId:n.viaResourceId}),f("guests",{contacts:I}),m(T),y.set("is_completed",T.is_completed)}),(T,E)=>{const $=d("FormFields"),F=d("ICardBody"),R=d("IFormSwitchLabel"),B=d("IFormSwitch"),V=d("IFormSwitchField"),P=d("IButton"),z=d("ICardFooter"),H=d("ICard");return g(),A(H,{as:"form",overlay:!x.value,onSubmit:ot(C,["prevent"])},{default:p(()=>[l(F,null,{default:p(()=>[l($,{fields:h(c),form:h(y),"resource-id":e.activityId,"resource-name":h(i),onUpdateFieldValue:E[0]||(E[0]=j=>h(y).fill(j.attribute,j.value)),onSetInitialValue:E[1]||(E[1]=j=>h(y).set(j.attribute,j.value))},null,8,["fields","form","resource-id","resource-name"])]),_:1}),l(z,null,{default:p(()=>[_("div",Wbe,[l(V,{class:"mb-4 sm:mb-0 sm:mr-4 sm:border-r sm:border-neutral-200 sm:pr-4 sm:dark:border-neutral-500/30"},{default:p(()=>[l(R,{text:T.$t("activities::activity.mark_as_completed")},null,8,["text"]),l(B,{modelValue:h(y).is_completed,"onUpdate:modelValue":E[2]||(E[2]=j=>h(y).is_completed=j)},null,8,["modelValue"])]),_:1}),l(P,{class:"mb-2 ml-0 sm:mb-0 sm:mr-2",variant:"secondary",text:T.$t("core::app.cancel"),onClick:E[3]||(E[3]=j=>T.$emit("cancelled",j))},null,8,["text"]),l(P,{type:"submit",variant:"primary",disabled:h(y).busy,text:T.$t("core::app.save"),onClick:C},null,8,["disabled","text"])])]),_:1})]),_:1},8,["overlay"])}}},Kbe={class:"flex w-full flex-1"},Zbe={class:"mr-2 mt-px flex shrink-0 self-start"},Ybe={class:"flex grow flex-col space-y-1 lg:flex-row lg:space-x-3 lg:space-y-0"},Xbe={class:"flex grow flex-col items-start"},Qbe={class:"space-x-2 lg:space-x-0"},Jbe=["textContent"],e1e={key:0,class:"-mt-px border-y border-warning-600/20 bg-warning-50 dark:border-warning-400/20 dark:bg-warning-400/10"},t1e=["onClick"],n1e={class:"space-y-4 sm:space-y-6"},o1e={key:0,class:"mb-8"},a1e={class:"ml-8"},r1e={class:"flex flex-col flex-wrap space-y-2 align-baseline lg:flex-row lg:space-y-0"},l1e={key:0,class:"mr-0 self-start sm:self-auto lg:-ml-2 lg:mr-4"},s1e=["textContent"],i1e={class:"border-t border-neutral-200 px-4 py-2.5 dark:border-neutral-500/30 sm:px-6"},u1e={class:"border-t border-neutral-200 px-4 py-2.5 dark:border-neutral-500/30 sm:px-6"},Rk=Object.assign({inheritAttrs:!1},{__name:"RelatedActivity",props:{activityId:{required:!0,type:Number},title:{required:!0,type:String},commentsCount:{required:!0,type:Number},isCompleted:{required:!0,type:Boolean},isReminded:{required:!0,type:Boolean},isDue:{required:!0,type:Boolean},typeId:{required:!0,type:Number},userId:{required:!0,type:Number},note:{required:!0},description:{required:!0},reminderMinutesBefore:{required:!0},dueDate:{required:!0},endDate:{required:!0},attachmentsCount:{required:!0,type:Number},media:{required:!0,type:Array},authorizations:{required:!0,type:Object},comments:{required:!0,type:Array},associationsCount:{required:!0,type:Number},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},relatedResource:{required:!0,type:Object}},setup(e){const t=e,n=Innoclapps.resourceName("activities"),o=Pe("synchronizeResource"),a=Pe("incrementResourceCount"),r=Pe("decrementResourceCount"),{t:s}=Ee(),{localizedDateTime:i,localizedDate:u,hasTime:c}=rt(),{updateResource:m,deleteResource:f}=Dt(n),{users:v,findUserById:y}=Ne(),{commentsAreVisible:b}=_a(t.activityId,"activities"),w=M(!1),k=M(!1),{typesByName:x,findTypeById:I}=Ha(),C=O(()=>I(t.typeId)),S=O(()=>y(t.userId)),T=O(()=>s("core::app.reminder_set_for",{value:V_(t.reminderMinutesBefore),type:s("core::dates."+Ip(t.reminderMinutesBefore))}));function E(){Innoclapps.request({method:"post",data:{ids:[t.activityId]},responseType:"blob",url:"/activities/actions/download-ics-file/run"}).then(_x)}function $(z={}){m({via_resource:t.viaResource,via_resource_id:t.viaResourceId,...z},t.activityId).then(H=>o({activities:H}))}async function F(z){await f(z),o({activities:{id:z,_delete:!0}}),r("incomplete_activities_for_user_count"),Innoclapps.success(s("activities::activity.deleted"))}function R(z){o({activities:z}),z.is_completed?r("incomplete_activities_for_user_count"):a("incomplete_activities_for_user_count")}function B(z){z.type=="dblclick"&&w.value||t.authorizations.update&&(w.value=!w.value)}function V(z){o({activities:{id:t.activityId,media:[z]}})}function P(z){o({activities:{id:t.activityId,media:{id:z.id,_delete:!0}}})}return(z,H)=>{const j=d("ICardHeading"),N=d("ITextDark"),L=d("IDropdownButton"),U=d("IDropdownItem"),ee=d("IDropdownMenu"),G=d("IDropdown"),W=d("IDropdownMinimal"),ae=d("ICardActions"),ue=d("ICardHeader"),ce=d("Icon"),oe=d("ILink"),ie=d("TextCollapse"),Q=d("ITextBlockDark"),se=d("IAvatar"),me=d("IText"),xe=d("ICardBody"),de=d("CollapseableCommentsLink"),he=d("CollapsableCommentsList"),Y=d("CommentsAdd"),X=d("ICardFooter"),re=d("ICard"),we=Ve("t"),Ce=Ve("i-tooltip");return g(),D(fe,null,[ne(l(re,Ue(z.$attrs,{class:"activity-"+e.activityId}),{default:p(()=>[l(ue,null,{default:p(()=>[_("div",Kbe,[_("div",Zbe,[Un([e.isCompleted],()=>l(kd,{class:"ml-px md:mt-px","activity-id":e.activityId,"is-completed":e.isCompleted,disabled:!e.authorizations.update,onChanged:R},null,8,["activity-id","is-completed","disabled"]),H,0)]),_("div",Ybe,[_("div",Xbe,[l(j,{class:be(["text-base/6 font-medium sm:text-sm/6",e.isCompleted?"line-through":""]),text:e.title},null,8,["class","text"]),l(za,{"associations-count":e.associationsCount,"initial-associateables":e.relatedResource,"resource-id":e.activityId,"resource-name":h(n),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:H[1]||(H[1]=ge=>h(o)({activities:ge}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"])]),_("div",Qbe,[ne(l(N,{class:"inline font-medium lg:hidden"},null,512),[[we,"activities::activity.type.type"]]),l(G,null,{default:p(()=>[l(L,{class:"lg:mt-1.5",as:h(bd),disabled:!e.authorizations.update,color:C.value.swatch_color},{default:p(()=>[_("span",{class:"max-w-32 truncate",textContent:Z(C.value.name)},null,8,Jbe)]),_:1},8,["as","disabled","color"]),l(ee,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(x),ge=>(g(),A(U,{key:ge.id,text:ge.name,active:e.typeId===ge.id,icon:ge.icon,onClick:Re=>$({activity_type_id:ge.id})},null,8,["text","active","icon","onClick"]))),128))]),_:1})]),_:1})])])]),l(ae,{class:"mt-1 self-start"},{default:p(()=>[l(W,{small:""},{default:p(()=>[e.authorizations.update?(g(),A(U,{key:0,text:z.$t("core::app.edit"),onClick:B},null,8,["text"])):K("",!0),l(U,{text:z.$t("activities::activity.download_ics"),onClick:E},null,8,["text"]),e.authorizations.delete?(g(),A(U,{key:1,text:z.$t("core::app.delete"),onClick:H[2]||(H[2]=ge=>z.$confirm(()=>F(e.activityId)))},null,8,["text"])):K("",!0)]),_:1})]),_:1})]),_:1}),e.isDue?(g(),D("div",{key:0,class:be(["-mt-px flex items-center border-warning-600/20 bg-warning-50 px-4 py-1.5 text-base text-warning-800 dark:border-warning-400/20 dark:bg-warning-400/10 dark:text-warning-400 sm:px-6 sm:text-sm",e.note?"border-t":"border-y"])},[l(ce,{icon:"Clock",class:"mr-3 size-5"}),_("span",null,Z(z.$t("activities::activity.activity_was_due",{date:h(c)(e.dueDate)?h(i)(e.dueDate):h(u)(e.dueDate)})),1)],2)):K("",!0),_("div",{onDblclick:B},[e.note?(g(),D("div",e1e,[l(ie,{class:"wysiwyg-text px-4 py-1.5 leading-5 text-warning-800 dark:text-warning-400 sm:px-6",text:e.note,length:100,lightbox:""},{action:p(({collapsed:ge,toggle:Re})=>[ne(_("div",{class:"absolute bottom-0 h-6 w-full cursor-pointer bg-gradient-to-t from-warning-50 to-transparent dark:from-warning-400/20",onClick:Re},null,8,t1e),[[pe,ge]]),ne(l(oe,{variant:"warning",class:"my-2.5 inline-block px-4 text-base font-medium sm:px-6 sm:text-sm",text:z.$t("core::app.show_less"),onClick:Re},null,8,["text","onClick"]),[[pe,!ge]])]),_:1},8,["text"])])):K("",!0),l(xe,null,{default:p(()=>[_("div",n1e,[e.description?(g(),D("div",o1e,[l(Q,{class:"mb-1 inline-flex font-medium"},{default:p(()=>[l(ce,{icon:"Bars3BottomLeft",class:"mr-3 size-5 text-neutral-500 dark:text-neutral-300"}),ne(_("span",null,null,512),[[we,"activities::activity.description"]])]),_:1}),_("div",a1e,[l(ie,{class:"wysiwyg-text leading-5 dark:text-neutral-300 sm:mb-0",text:e.description,length:200,lightbox:""},null,8,["text"])])])):K("",!0),_("div",r1e,[S.value?ne((g(),D("div",l1e,[e.authorizations.update?(g(),A(G,{key:0},{default:p(()=>[l(L,{class:"-ml-3.5 lg:-ml-1",basic:""},{default:p(()=>[l(se,{size:"xs",src:S.value.avatar_url},null,8,["src"]),le(" "+Z(S.value.name),1)]),_:1}),l(ee,{class:"max-h-64"},{default:p(()=>[(g(!0),D(fe,null,Ie(h(v),ge=>(g(),A(U,{key:ge.id,text:ge.name,active:e.userId===ge.id,onClick:Re=>$({user_id:ge.id})},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})):(g(),A(Q,{key:1,class:"ml-2 flex items-center space-x-1.5 font-medium"},{default:p(()=>[l(se,{size:"xs",src:S.value.avatar_url},null,8,["src"]),_("span",{textContent:Z(S.value.name)},null,8,s1e)]),_:1}))])),[[Ce,z.$t("activities::activity.owner"),void 0,{top:!0}]]):K("",!0),l(Hbe,{"due-date":e.dueDate,"end-date":e.endDate,"is-due":e.isDue},null,8,["due-date","end-date","is-due"])])]),e.reminderMinutesBefore&&!e.isReminded?(g(),A(me,{key:0,class:"mt-1 flex items-center"},{default:p(()=>[l(ce,{icon:"Bell",class:"mr-2 size-5"}),le(" "+Z(T.value),1)]),_:1})):K("",!0)]),_:1})],32),_("div",i1e,[l(oe,{class:"group inline-flex items-center",basic:"",onClick:H[3]||(H[3]=ge=>k.value=!k.value)},{default:p(()=>[l(ce,{icon:"PaperClip",class:"mr-3 size-5 text-neutral-500 group-hover:text-neutral-700 dark:text-neutral-300 dark:group-hover:text-white"}),_("span",null,Z(z.$t("core::app.attachments"))+" ("+Z(e.attachmentsCount)+") ",1),l(ce,{class:"ml-2 size-4",icon:k.value?"ChevronDownSolid":"ChevronRightSolid"},null,8,["icon"])]),_:1}),ne(l(yr,{class:"ml-8","resource-name":h(n),"resource-id":e.activityId,media:e.media,"authorize-delete":e.authorizations.update,onDeleted:P,onUploaded:V},null,8,["resource-name","resource-id","media","authorize-delete"]),[[pe,k.value]])]),ne(_("div",u1e,[l(he,{"commentable-type":"activities",class:"ml-8 mt-3","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.activityId,count:e.commentsCount,comments:e.comments,onUpdated:H[4]||(H[4]=ge=>h(o)({activities:{id:e.activityId,comments:ge}})),onDeleted:H[5]||(H[5]=ge=>h(o)({activities:{id:e.activityId,comments:{id:ge,_delete:!0}}})),"onUpdate:comments":H[6]||(H[6]=ge=>h(o)({activities:{id:e.activityId,comments:ge}})),"onUpdate:count":H[7]||(H[7]=ge=>h(o)({activities:{id:e.activityId,comments_count:ge}}))},{default:p(({hasComments:ge,totalComments:Re,commentsAreBeingLoaded:et,toggleCommentsVisibility:kt})=>[ge?(g(),A(de,{key:0,loading:et,total:Re,collapsed:h(b),onClick:kt},null,8,["loading","total","collapsed","onClick"])):K("",!0)]),_:1},8,["via-resource","via-resource-id","commentable-id","count","comments"])],512),[[pe,e.commentsCount]]),l(X,{class:"text-right"},{default:p(()=>[l(Y,{"commentable-type":"activities","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.activityId,onCreated:H[8]||(H[8]=ge=>(b.value=!0,h(o)({activities:{id:e.activityId,comments:[ge]}})))},null,8,["via-resource","via-resource-id","commentable-id"])]),_:1})]),_:1},16,["class"]),[[pe,!w.value]]),w.value?(g(),A(Gbe,{key:0,"activity-id":e.activityId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"related-resource":e.relatedResource,onCancelled:H[9]||(H[9]=ge=>w.value=!1),onUpdated:H[10]||(H[10]=ge=>w.value=!1)},null,8,["activity-id","via-resource","via-resource-id","related-resource"])):K("",!0)],64)}}}),c1e={class:"flex w-full flex-wrap items-center justify-between sm:w-auto"},d1e={class:"mt-sm-0 mt-2 flex w-full flex-col sm:w-auto sm:flex-row sm:items-center sm:justify-end"},m1e={__name:"RelatedActivityCreate",props:{viaResource:{type:String,required:!0},viaResourceId:{type:[String,Number],required:!0},relatedResource:{required:!0,type:Object}},emits:["cancel"],setup(e){const t=e,n=Pe("synchronizeResource"),o=Pe("incrementResourceCount"),a=Innoclapps.resourceName("activities"),{t:r}=Ee(),{fields:s,hasFields:i,updateField:u,getCreateFields:c}=yn(),{form:m}=Ze({is_completed:!1,associations:{[t.viaResource]:[t.viaResourceId]}},{resetOnSuccess:!0}),{createResource:f}=Dt(a),v=O(()=>t.viaResource==="contacts"?[t.relatedResource]:t.relatedResource.contacts||[]);async function y(){s.value=await c(a,{viaResource:t.viaResource,viaResourceId:t.viaResourceId}),u("guests",{contacts:v})}async function b(){let w=await f(m.withQueryString({via_resource:t.viaResource,via_resource_id:t.viaResourceId}));Innoclapps.success(r("activities::activity.created")),w.is_completed||o("incomplete_activities_for_user_count"),n({activities:[w]})}return y(),(w,k)=>{const x=d("FormFields"),I=d("IAlertBody"),C=d("IAlert"),S=d("ICardBody"),T=d("IFormSwitchLabel"),E=d("IFormSwitch"),$=d("IFormSwitchField"),F=d("IButton"),R=d("ICardFooter"),B=d("ICard");return g(),A(B,{as:"form",overlay:!h(i),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(S,null,{default:p(()=>[l(x,{fields:h(s),form:h(m),"resource-name":h(a),"focus-first":"",onUpdateFieldValue:k[0]||(k[0]=V=>h(m).fill(V.attribute,V.value)),onSetInitialValue:k[1]||(k[1]=V=>h(m).set(V.attribute,V.value))},null,8,["fields","form","resource-name"]),l(C,{class:"mt-1",variant:"success",show:h(m).recentlySuccessful},{default:p(()=>[l(I,{text:w.$t("activities::activity.created")},null,8,["text"])]),_:1},8,["show"])]),_:1}),l(R,null,{default:p(()=>[_("div",c1e,[_("div",null,[l(za,{modelValue:h(m).associations,"onUpdate:modelValue":k[2]||(k[2]=V=>h(m).associations=V),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,"primary-record-disabled":!0,"initial-associateables":e.relatedResource},null,8,["modelValue","primary-record","primary-resource-name","initial-associateables"])]),_("div",d1e,[l($,{class:"mb-4 sm:mb-0 sm:mr-4 sm:border-r sm:border-neutral-200 sm:pr-4 sm:dark:border-neutral-500/30"},{default:p(()=>[l(T,{text:w.$t("activities::activity.mark_as_completed")},null,8,["text"]),l(E,{modelValue:h(m).is_completed,"onUpdate:modelValue":k[3]||(k[3]=V=>h(m).is_completed=V)},null,8,["modelValue"])]),_:1}),l(F,{class:"mb-2 sm:mb-0 sm:mr-2",variant:"secondary",text:w.$t("core::app.cancel"),onClick:k[4]||(k[4]=V=>w.$emit("cancel"))},null,8,["text"]),l(F,{variant:"primary",type:"submit",disabled:h(m).busy,text:w.$t("activities::activity.add")},null,8,["disabled","text"])])])]),_:1})]),_:1},8,["overlay"])}}},f1e={class:"sm:flex sm:items-start sm:justify-between"},p1e={class:"mt-5 sm:ml-6 sm:mt-0"},v1e={class:"mt-3 sm:mt-7 sm:block"},h1e={class:"border-b border-neutral-200 dark:border-neutral-500/30"},g1e={class:"flex items-center justify-center"},b1e={class:"overlow-y-hidden -mb-px flex grow snap-x snap-mandatory overflow-x-auto sm:grow-0 sm:space-x-4 lg:space-x-6"},y1e={class:"ml-2"},_1e={class:"py-2 sm:py-4"},I1e={class:"mt-3 space-y-4"},Am="activities",w1e={__name:"RecordTabActivityPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Pe("synchronizeResource"),o=M("all"),a=M(null),r=M(!1),{DateTime:s,LocalDateTimeInstance:i,hasTime:u}=rt(),{t:c}=Ee(),m=It(),{commentsAreVisible:f}=_a(m.query.resourceId,Am),{dataLoadedFirstTime:v,focusToAssociateableElement:y,searchResults:b,isSearching:w,hasSearchResults:k,performSearch:x,search:I,loadData:C,infiniteHandler:S}=gs({resourceName:t.resourceName,resource:gt(t,"resource"),scrollElement:t.scrollElement,perPage:100,infinityRef:a,synchronizeResource:n,timelineRelation:Am}),T=O(()=>L.value.find(U=>U.id===o.value)),E=O(()=>V.value.filter(U=>N(U.due_date).hasSame(i,"day"))),$=O(()=>V.value.filter(U=>N(U.due_date).hasSame(i.plus({days:1}),"day"))),F=O(()=>V.value.filter(U=>N(U.due_date).hasSame(i,"week",{useLocaleWeeks:!0}))),R=O(()=>V.value.filter(U=>N(U.due_date).hasSame(i.plus({weeks:1}),"week",{useLocaleWeeks:!0}))),B=O(()=>Vt(b.value||t.resource.activities,["is_completed",U=>N(U.due_date).toJSDate()],["asc","asc"])),V=O(()=>B.value.filter(U=>!U.is_completed)),P=O(()=>B.value.filter(U=>U.is_completed)),z=O(()=>B.value.length>0),H=O(()=>T.value.total===0&&v.value&&!(w.value&&!k.value));function j(U){o.value=U.id,C()}function N(U){return u(U)?s.fromISO(U):s.fromFormat(U,"yyyy-MM-dd")}const L=O(()=>[{id:"all",title:c("activities::activity.filters.all"),data:B.value,total:B.value.length,empty:{text:c("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"today",title:c("activities::activity.filters.today"),data:E.value,total:E.value.length,empty:{text:c("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"tomorrow",title:c("activities::activity.filters.tomorrow"),data:$.value,total:$.value.length,empty:{text:c("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"this_week",title:c("activities::activity.filters.this_week"),data:F.value,total:F.value.length,empty:{text:c("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"next_week",title:c("activities::activity.filters.next_week"),data:R.value,total:R.value.length,empty:{text:c("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"done",title:c("activities::activity.filters.done"),data:P.value,total:P.value.length,empty:{text:c("activities::activity.filters.done_empty_state"),icon:"CheckCircle",iconClass:"text-neutral-500 dark:text-neutral-300"}}]);return m.query.resourceId&&m.query.section===Am&&Yr(v,()=>{y(m.query.resourceId,"activity").then(()=>{m.query.comment_id&&(f.value=!0)})}),(U,ee)=>{const G=d("ITextDark"),W=d("IText"),ae=d("IButton"),ue=d("SearchInput"),ce=d("ICardBody"),oe=d("ICard"),ie=d("ILink"),Q=d("Icon"),se=d("ITabPanel");return g(),A(se,{lazy:!h(v),onActivatedOnce:h(C)},{default:p(()=>[ne(l(oe,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(ce,null,{default:p(()=>[_("div",f1e,[_("div",null,[l(G,{class:"font-semibold",text:U.$t("activities::activity.manage_activities")},null,8,["text"]),l(W,{class:"max-w-xl",text:U.$t("activities::activity.info")},null,8,["text"])]),_("div",p1e,[l(ae,{variant:"primary",icon:"PlusSolid",text:U.$t("activities::activity.add"),onClick:ee[0]||(ee[0]=me=>r.value=!0)},null,8,["text"])])]),ne(l(ue,{modelValue:h(I),"onUpdate:modelValue":[ee[1]||(ee[1]=me=>$n(I)?I.value=me:null),h(x)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[pe,z.value||h(I)]])]),_:1})]),_:1},512),[[pe,!r.value]]),r.value?(g(),A(m1e,{key:0,class:"rounded-t-none","via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,onCancel:ee[2]||(ee[2]=me=>r.value=!1)},null,8,["via-resource","via-resource-id","related-resource"])):K("",!0),_("div",v1e,[ne(_("div",h1e,[_("div",g1e,[_("nav",b1e,[(g(!0),D(fe,null,Ie(L.value,me=>(g(),A(ie,{key:me.id,class:be([o.value===me.id?"border-neutral-700 text-neutral-700 dark:border-neutral-400 dark:text-neutral-200":"border-transparent text-neutral-500 hover:border-neutral-300 hover:text-neutral-700 dark:text-neutral-100 dark:hover:border-neutral-500 dark:hover:text-neutral-300","group inline-flex min-w-full shrink-0 snap-start snap-always items-center justify-center whitespace-nowrap border-b-2 px-1 py-4 text-base/5 font-medium sm:min-w-0 sm:text-sm/5"]),plain:"",onClick:xe=>j(me)},{default:p(()=>[le(Z(me.title)+" ",1),_("span",y1e,"("+Z(me.total)+")",1)]),_:2},1032,["class","onClick"]))),128))])])],512),[[pe,z.value]])]),_("div",_1e,[H.value?(g(),A(G,{key:0,class:"mt-6 flex items-center justify-center font-medium"},{default:p(()=>[l(Q,{icon:T.value.empty.icon,class:be(["mr-2 size-5",T.value.empty.iconClass])},null,8,["icon","class"]),le(" "+Z(T.value.empty.text),1)]),_:1})):K("",!0),_("div",I1e,[(g(!0),D(fe,null,Ie(T.value.data,me=>(g(),D("div",{key:me.id},[l(Rk,{"activity-id":me.id,title:me.title,"comments-count":me.comments_count,"is-completed":me.is_completed,"is-reminded":me.is_reminded,"is-due":me.is_due,"type-id":me.activity_type_id,"user-id":me.user_id,note:me.note,description:me.description,"reminder-minutes-before":me.reminder_minutes_before,"due-date":me.due_date,"end-date":me.end_date,"attachments-count":me.media.length,media:me.media,"associations-count":me.associations_count,authorizations:me.authorizations,comments:me.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["activity-id","title","comments-count","is-completed","is-reminded","is-due","type-id","user-id","note","description","reminder-minutes-before","due-date","end-date","attachments-count","media","associations-count","authorizations","comments","via-resource","via-resource-id","related-resource"])]))),128))])]),ne(l(W,{class:"mt-6 text-center",text:U.$t("core::app.no_search_results")},null,8,["text"]),[[pe,h(w)&&!h(k)]]),l(gr,{ref_key:"infinityRef",ref:a,"scroll-element":e.scrollElement,onHandle:ee[3]||(ee[3]=me=>h(S)(me))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},x1e={__name:"RecordTabTimelineEntryPin",props:{resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},isPinned:{type:Boolean,required:!0},timelineSubjectKey:{type:String,required:!0},timelineRelationship:{type:String,required:!0},timelineableKey:{type:String,required:!0},timelineableId:{type:[Number,String],required:!0}},setup(e){const t=e,n=Pe("synchronizeResource");function o(){Innoclapps.request().post("timeline/pin",{subject_id:parseInt(t.resourceId),subject_type:t.timelineSubjectKey,timelineable_id:parseInt(t.timelineableId),timelineable_type:t.timelineableKey}).then(()=>{n({[t.timelineRelationship]:{id:t.timelineableId,is_pinned:!0,pinned_date:new Date().toISOString()}})})}function a(){Innoclapps.request().post("timeline/unpin",{subject_id:parseInt(t.resourceId),subject_type:t.timelineSubjectKey,timelineable_id:parseInt(t.timelineableId),timelineable_type:t.timelineableKey}).then(()=>{n({[t.timelineRelationship]:{id:t.timelineableId,is_pinned:!1,pinned_date:null}})})}return(r,s)=>{const i=d("ILink");return e.isPinned?(g(),A(i,{key:1,class:"text-sm/6 sm:text-xs/6",text:r.$t("core::timeline.unpin"),basic:"",onClick:a},null,8,["text"])):(g(),A(i,{key:0,class:"text-sm/6 sm:text-xs/6",text:r.$t("core::timeline.pin"),basic:"",onClick:o},null,8,["text"]))}}},k1e={class:"hidden sm:relative sm:block sm:px-1.5"},$1e={class:"min-w-0 flex-1 sm:py-1"},C1e={class:"flex justify-between space-x-4"},S1e={class:"flex-1 md:flex md:items-center"},T1e=_("span",{class:"hidden md:inline-block"},"-",-1),yo={__name:"BaseRecordTabTimelineItem",props:{heading:String,headingClass:[String,Object,Array],resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},isPinned:{type:Boolean,required:!0},createdAt:{type:String,required:!0},timelineRelationship:{type:String,required:!0},timelineSubjectKey:{type:String,required:!0},timelineableKey:{type:String,required:!0},timelineableId:{type:[Number,String],required:!0},icon:{type:String,required:!0}},setup(e){const{localizedDateTime:t}=rt();return(n,o)=>{const a=d("Icon"),r=d("ITextDark"),s=d("ITextSmall");return g(),D(fe,null,[_("div",k1e,[_("div",{class:be([e.isPinned?"bg-warning-300":"bg-neutral-200 dark:bg-neutral-700","flex size-7 items-center justify-center rounded-full ring-8 ring-neutral-100 dark:ring-neutral-800"])},[l(a,{icon:e.icon,class:be(["size-5 sm:size-4",e.isPinned?"text-warning-900":"text-neutral-600 dark:text-neutral-100"])},null,8,["icon","class"])],2)]),_("div",$1e,[_("div",C1e,[_("div",S1e,[l(r,{class:be(["mr-2",e.headingClass])},{default:p(()=>[Se(n.$slots,"heading",{},()=>[le(Z(e.heading),1)])]),_:3},8,["class"]),o[0]||(je(-1),o[0]=l(s,{class:"whitespace-nowrap"},{default:p(()=>[Se(n.$slots,"date",{},()=>[T1e,le(" "+Z(h(t)(e.createdAt)),1)])]),_:3}),je(1),o[0])]),l(x1e,{"resource-name":e.resourceName,"resource-id":e.resourceId,"timeline-subject-key":e.timelineSubjectKey,"timeline-relationship":e.timelineRelationship,"timelineable-key":e.timelineableKey,"timelineable-id":e.timelineableId,"is-pinned":e.isPinned},null,8,["resource-name","resource-id","timeline-subject-key","timeline-relationship","timelineable-key","timelineable-id","is-pinned"])]),Se(n.$slots,"default")])],64)}}},E1e={class:"mt-3"},F1e={__name:"RecordTabTimelineActivity",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const t=e,{findTypeById:n}=Ha(),o=O(()=>n(t.log.activity_type_id));return(a,r)=>(g(),A(yo,{"heading-class":"font-medium","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,icon:o.value.icon,heading:a.$t("activities::activity.timeline.heading")},{default:p(()=>[_("div",E1e,[l(Rk,{"activity-id":e.log.id,title:e.log.title,"comments-count":e.log.comments_count,"is-completed":e.log.is_completed,"is-reminded":e.log.is_reminded,"is-due":e.log.is_due,"type-id":e.log.activity_type_id,"user-id":e.log.user_id,note:e.log.note,description:e.log.description,"reminder-minutes-before":e.log.reminder_minutes_before,"due-date":e.log.due_date,"end-date":e.log.end_date,"attachments-count":e.log.media.length,media:e.log.media,authorizations:e.log.authorizations,comments:e.log.comments||[],"associations-count":e.log.associations_count,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["activity-id","title","comments-count","is-completed","is-reminded","is-due","type-id","user-id","note","description","reminder-minutes-before","due-date","end-date","attachments-count","media","authorizations","comments","associations-count","via-resource","via-resource-id","related-resource"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","icon","heading"]))}},A1e={__name:"ActivitiesTypesIndex",setup(e){const t=Innoclapps.resourceName("activity-types"),{fetchActivityTypes:n}=Ha();return(o,a)=>{const r=d("ICardHeading");return g(),A(Ci,{"resource-name":h(t),"with-cancel":!1,onCreated:h(n),onUpdated:h(n),onDeleted:h(n)},{header:p(()=>[l(r,{text:o.$t("activities::activity.type.types")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},R1e={class:"space-y-8"},D1e={__name:"SettingsActivities",setup(e){const{resetStoreState:t}=Ne(),{form:n,submit:o,isReady:a}=To(),r=M(null),{typesByName:s}=Ha();function i(u){n.default_activity_type=u.id,o(t)}return Yr(a,()=>{r.value=s.value.find(u=>u.id==n.default_activity_type)}),(u,c)=>{const m=d("ICardHeading"),f=d("ICardHeader"),v=d("IFormSwitchLabel"),y=d("IFormSwitchDescription"),b=d("IFormSwitch"),w=d("IFormSwitchField"),k=d("ICustomSelect"),x=d("IFormGroup"),I=d("ICardBody"),C=d("ICard");return g(),D("div",R1e,[_("div",null,[l(f,null,{default:p(()=>[l(m,{text:u.$t("activities::activity.activities")},null,8,["text"])]),_:1}),l(C,{overlay:!h(a)},{default:p(()=>[l(I,{class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},{default:p(()=>[l(w,null,{default:p(()=>[l(v,{text:u.$t("activities::activity.settings.send_contact_email")},null,8,["text"]),l(y,{text:u.$t("activities::activity.settings.send_contact_email_info")},null,8,["text"]),l(b,{modelValue:h(n).send_contact_attends_to_activity_mail,"onUpdate:modelValue":c[0]||(c[0]=S=>h(n).send_contact_attends_to_activity_mail=S),onChange:h(o)},null,8,["modelValue","onChange"])]),_:1}),l(x,{class:"mt-3 pt-3","label-for":"default_activity_type",label:u.$t("activities::activity.type.default_type")},{default:p(()=>[l(k,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=S=>r.value=S),"input-id":"default_activity_type",class:"xl:w-1/3",label:"name",clearable:!1,options:h(s),onOptionSelected:i},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(A1e)])])}}},O1e={class:"flex items-center space-x-1"},B1e=_("div",{class:"absolute -right-3 hidden text-neutral-900 dark:text-neutral-300 md:block"}," - ",-1),N1e={__name:"ActivityDueDateField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),{DateTime:r,timeFormatForLuxon:s,localizedTime:i,hasTime:u}=rt(),c=M(""),m=M(""),f=M(""),v=M(""),y=O(()=>m.value&&!v.value),b=O(()=>mf("00:00",15,"minutes").map(T=>i(r.fromFormat(T,"HH:mm").toUTC().toISO()))),w=O(()=>v.value?k(f.value,v.value).toISO():f.value);function k(T,E){return r.fromFormat(`${T} ${r.fromFormat(`${T} ${E}`,`yyyy-MM-dd ${s.value}`).toFormat("HH:mm")}`,"yyyy-MM-dd HH:mm").setZone(a("timezone"))}function x(T){At("update-end-time",T)}async function I(){await ze(),!v.value&&m.value&&x("")}function C(T){o("update:modelValue",T)}function S(){let T=n.field.value;if(T)if(u(T)){const E=r.fromISO(T,{zone:a("timezone")}),$=E.toLocal();o("setInitialValue",E.toISO()),f.value=$.toISODate(),v.value=i($.toUTC().toISO())}else o("setInitialValue",T),f.value=T;else{const E=r.now().setZone(a("timezone")).plus({hour:1}).startOf("hour"),$=E.toLocal();f.value=$.toISODate(),v.value=i($.toUTC().toISO()),o("setInitialValue",E.toISO())}At("due-date-initial-value-set",{date:f.value,time:v.value})}return Ut("end-time-changed",T=>m.value=T.newVal),Ut("end-date-changed",T=>c.value=T.newVal),Je(S),$e(w,T=>C(T)),$e(f,(T,E)=>At("due-date-changed",{newVal:T,oldVal:E})),$e(v,(T,E)=>{if(At("due-time-changed",{newVal:T,oldVal:E}),!m.value||m.value===f.value)return;let $=k(f.value,T),F=k(c.value,m.value),R=k(f.value,E),B=i($.plus({minutes:F.diff(R,"minutes").minutes}).toISO());x(B)}),(T,E)=>{const $=d("IFormLabel"),F=d("DatePicker"),R=d("IFormInputDropdown"),B=d("BaseFormField");return g(),A(B,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:V,fieldId:P})=>[l(dn,{class:"relative",field:e.field,"field-id":P,"validation-errors":e.validationErrors},{default:p(()=>[l($,{for:P+"-due-date",class:be(["mb-1 block",e.field.hideLabel?"sm:hidden":""]),label:T.$t("activities::activity.due_date"),required:e.field.isRequired},null,8,["for","class","label","required"]),_("div",O1e,[l(F,Ue({id:P+"-due-date",modelValue:f.value,"onUpdate:modelValue":E[0]||(E[0]=z=>f.value=z),name:e.field.attribute,disabled:V,"with-icon":!1,required:e.field.isRequired},e.field.attributes),null,16,["id","modelValue","name","disabled","required"]),l(R,{modelValue:v.value,"onUpdate:modelValue":E[1]||(E[1]=z=>v.value=z),"max-height":"300px",items:b.value,placeholder:h(s),"input-id":P+"-due-time",class:be(["sm:max-w-[150px]",{"!border-danger-500 ring-danger-500 focus:border-danger-500 focus:ring-danger-500":y.value}]),condensed:"",onBlur:I,onCleared:I},null,8,["modelValue","items","placeholder","input-id","class"]),B1e])]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},P1e={class:"flex items-center space-x-1"},M1e={__name:"ActivityEndDateField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),{DateTime:r,timeFormatForLuxon:s,localizedTime:i,hasTime:u}=rt(),c=M(""),m=M(""),f=M(""),v=M(""),y=O(()=>!!(!m.value&&v.value&&c.value>f.value)),b=O(()=>{if(!v.value||c.value>f.value)return mf("00:00",15,"minutes",23).map(T=>i(r.fromFormat(T,"HH:mm").toUTC().toISO()));const S=r.fromFormat(`${f.value} ${v.value}`,`yyyy-MM-dd ${s.value}`).toFormat("HH:mm");return mf(S,15,"minutes",23).map(T=>i(r.fromFormat(T,"HH:mm").toUTC().toISO()))}),w=O(()=>m.value?k(c.value,m.value).toISO():c.value);function k(S,T){return r.fromFormat(`${S} ${r.fromFormat(`${S} ${T}`,`yyyy-MM-dd ${s.value}`).toFormat("HH:mm")}`,"yyyy-MM-dd HH:mm").setZone(a("timezone"))}function x(){m.value||(m.value=v.value)}function I(S){o("update:modelValue",S)}function C(){let S=n.field.value;if(S)if(u(S)){const T=r.fromISO(S,{zone:a("timezone")}),E=T.toLocal();o("setInitialValue",T.toISO());let $=i(E.toUTC().toISO());c.value=E.toISODate(),$===v.value&&c.value===f.value?o("setInitialValue",T.toISODate()):(m.value=$,o("setInitialValue",T.toISO()))}else o("setInitialValue",S),c.value=S;else{let T;v.value?T=k(f.value,v.value):T=r.now().setZone(a("timezone")),o("setInitialValue",T.toISODate()),c.value=T.toISODate()}}return Ut("due-date-initial-value-set",({date:S,time:T})=>{f.value=S,v.value=T,C()}),Ut("update-end-time",S=>m.value=S),Ut("due-time-changed",S=>v.value=S.newVal),Ut("due-date-changed",S=>{f.value=S.newVal,S.newVal>c.value&&(c.value=S.newVal)}),$e(w,S=>I(S)),$e(v,S=>{S||(m.value="")}),$e(m,(S,T)=>At("end-time-changed",{newVal:S,oldVal:T})),$e(c,(S,T)=>At("end-date-changed",{newVal:S,oldVal:T})),(S,T)=>{const E=d("IFormLabel"),$=d("IFormInputDropdown"),F=d("DatePicker"),R=d("BaseFormField");return g(),A(R,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({isReadonly:B,fieldId:V})=>[l(dn,{field:e.field,"field-id":V,"validation-errors":e.validationErrors},{default:p(()=>[l(E,{for:V+"-end-date",class:be(["mb-1 block",e.field.hideLabel?"sm:hidden":""]),label:S.$t("activities::activity.end_date"),required:e.field.isRequired},null,8,["for","class","label","required"]),_("div",P1e,[l($,{modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=P=>m.value=P),"max-height":"300px",items:b.value,"input-id":V+"-end-time",placeholder:h(s),disabled:!v.value,class:be(["sm:max-w-[150px]",{"!border-danger-500 ring-danger-500 focus:border-danger-500 focus:ring-danger-500":y.value}]),condensed:"",onShow:x},null,8,["modelValue","items","input-id","placeholder","disabled","class"]),l(F,Ue({id:V+"-end-date",modelValue:c.value,"onUpdate:modelValue":T[1]||(T[1]=P=>c.value=P),required:e.field.isRequired,"min-date":f.value,"with-icon":!1,name:e.field.attribute,disabled:B},e.field.attributes),null,16,["id","modelValue","required","min-date","name","disabled"])])]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},V1e={__name:"ActivityTypeField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue"),{typesForIconPicker:r}=Ha();function s(){o("setInitialValue",Rn(n.field.value)?null:typeof n.field.value=="object"?n.field.value.id:n.field.value)}return s(),(i,u)=>{const c=d("IFormLabel"),m=d("IIconPicker"),f=d("BaseFormField");return g(),A(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:v})=>[l(dn,{field:e.field,"field-id":v,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[l(c,{class:"mb-1 block sm:hidden",for:v,label:i.$t("activities::activity.type.type")},null,8,["for","label"]),l(m,Ue({modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=y=>a.value=y),class:"flex-nowrap overflow-auto p-px sm:flex-wrap sm:overflow-visible","value-field":"id",size:"md",icons:h(r)},e.field.attributes),null,16,["modelValue","icons"])]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},L1e={class:"max-h-96 overflow-y-auto break-all px-1"},C1=2,q1e=5,U1e={__name:"ActivityGuestsSelect",props:{modelValue:{},contacts:{},guests:{},placement:{type:String,default:"bottom"}},emits:["update:modelValue","change"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),{setLoading:s,isLoading:i}=An(),u=M(0),c=M(!1),m=M(""),f=M({}),v=M({}),y=M({}),b={},w={contacts:{title:r("contacts::contact.contacts"),resource:"contacts"},users:{title:r("users::user.users"),resource:"users"}},{users:k}=Ne();$e(f,H=>{a("update:modelValue",H)},{deep:!0}),$e(()=>o.guests,()=>{z()});const x=O(()=>Object.keys(w)),I=O(()=>C1-u.value),C=O(()=>r("core::app.search_records")),S=O(()=>{let H=!1;return x.value.every(j=>(H=y.value[j]?y.value[j].records.length>0:!1,!H)),H}),T=O(()=>m.value!=""),E=O(()=>{let H=0;return x.value.forEach(j=>{H+=f.value[j]?f.value[j].length:0}),r("activities::activity.count_guests",H)}),$=O(()=>{if(S.value)return y.value;let H={},j=(N,L)=>{Et(H[N].records,["id",parseInt(L.id)])===-1&&H[N].records.push(L)};return x.value.forEach(N=>{H[N]=Object.assign({},w[N],{records:[]}),o.guests&&Vo(o.guests,["resource_name",N]).forEach(L=>j(N,L)),v.value[N]&&v.value[N].records.forEach(L=>j(N,L))}),k.value.forEach(N=>j("users",N)),o.contacts.forEach(N=>j("contacts",N)),Tn(H,N=>(N.records=Xr(N.records,"guest_display_name"),N))});function F(H){let j=[];return x.value.forEach(N=>{j.push(Innoclapps.request().get(`/${N}/search`,{params:{q:H,take:q1e},cancelToken:new Kr(L=>b[N]=L)}))}),j}function R(){Object.keys(b).forEach(H=>{b[H]&&b[H]()})}function B(H,j,N){!v.value[j]&&N&&(v.value[j]={records:[],is_search:N}),ze(()=>{if(f.value[j].includes(H.id)&&N)v.value[j].records.push(H);else if(v.value[j]){let L=Et(v.value[j].records,["id",parseInt(H.id)]);L!=-1&&v.value[j].records.splice(L,1)}a("change",f.value)})}function V(){m.value="",P("")}function P(H){const j=H.length;if(j===0){y.value={};return}if(u.value=j,j<C1)return c.value=!0,H;c.value=!1,R(),s(!0),Promise.all(F(H)).then(N=>{x.value.forEach((L,U)=>{y.value[L]=Object.assign({},w[L],{records:Tn(N[U].data,ee=>(ee.from_search=!0,ee)),is_search:!0})}),s(!1)})}function z(){let H={};x.value.forEach(j=>{let N=[];o.modelValue&&o.modelValue[j]&&(N=$l(o.modelValue[j][0])?Tn(o.modelValue[j],"id"):o.modelValue[j]),o.guests&&(N=N.concat(Tn(Vo(o.guests,["resource_name",j]),"id"))),H[j]=Ck(N)}),f.value=H}return Je(()=>{ze(z)}),t({setSelectedGuests:z}),(H,j)=>{const N=d("IPopoverButton"),L=d("IPopoverHeading"),U=d("IPopoverHeader"),ee=d("IFormInput"),G=d("IButton"),W=d("IFormGroup"),ae=d("IText"),ue=d("ITextDark"),ce=d("IFormCheckbox"),oe=d("IFormCheckboxLabel"),ie=d("IFormCheckboxDescription"),Q=d("IFormCheckboxField"),se=d("IPopoverBody"),me=d("IOverlay"),xe=d("IPopoverPanel"),de=d("IPopover");return g(),A(de,{onHide:V},{default:p(()=>[l(N,{link:""},{default:p(()=>[le(Z(E.value),1)]),_:1}),l(xe,{class:"w-72"},{default:p(()=>[l(me,{show:h(i)},{default:p(()=>[l(U,null,{default:p(()=>[l(L,{text:H.$t("activities::activity.guests")},null,8,["text"])]),_:1}),l(se,null,{default:p(()=>[l(W,{class:"relative"},{default:p(()=>[l(ee,{modelValue:m.value,"onUpdate:modelValue":j[0]||(j[0]=he=>m.value=he),class:"pr-8",placeholder:C.value,debounce:"",onInput:P},null,8,["modelValue","placeholder"]),ne(l(G,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:V},null,512),[[pe,m.value]])]),_:1}),ne(l(ae,{class:"text-center",text:H.$t("core::app.no_search_results")},null,8,["text"]),[[pe,T.value&&!S.value&&!h(i)&&!c.value]]),ne(l(ae,{class:"text-center",text:H.$t("core::app.type_more_to_search",{characters:I.value})},null,8,["text"]),[[pe,T.value&&c.value]]),_("div",L1e,[(g(!0),D(fe,null,Ie($.value,he=>(g(),D("div",{key:he.resource},[ne(l(ue,{class:"mb-2 mt-3 font-medium",text:he.title},null,8,["text"]),[[pe,he.records.length>0]]),(g(!0),D(fe,null,Ie(he.records,Y=>(g(),A(Q,{key:he.resource+"-"+Y.id,class:"mb-2 gap-y-0"},{default:p(()=>[l(ce,{checked:f.value[he.resource],"onUpdate:checked":X=>f.value[he.resource]=X,value:Y.id,onChange:X=>B(Y,he.resource,he.is_search)},null,8,["checked","onUpdate:checked","value","onChange"]),l(oe,{text:Y.guest_display_name},null,8,["text"]),l(ie,{class:be(Y.guest_email?"-mt-1":""),text:Y.guest_email},null,8,["class","text"])]),_:2},1024))),128))]))),128))])]),_:1})]),_:1},8,["show"])]),_:1})]),_:1})}}},j1e={class:"block"},z1e={class:"inline-block"},H1e={__name:"GuestsSelectField",props:{field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean,modelValue:{type:Object,default:()=>({contacts:[],users:[]})}},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=M([]),r=M(null),s=O(()=>n.field.contacts||[]);function i(c){o("update:modelValue",c)}function u(){a.value=n.field.value||[];const c={contacts:[],users:[]};a.value.forEach(m=>{m.resource_name==="users"?c.users.push(m.id):c.contacts.push(m.id)}),o("setInitialValue",c)}return u(),(c,m)=>{const f=d("BaseFormField");return g(),A(f,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({fieldId:v})=>[l(dn,{field:e.field,label:e.field.label,"field-id":v,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[_("div",j1e,[_("div",z1e,[l(U1e,{ref_key:"guestsSelectRef",ref:r,"model-value":e.modelValue,guests:a.value,contacts:s.value,"onUpdate:modelValue":i},null,8,["model-value","guests","contacts"])])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},W1e={key:0},G1e={__name:"ActivityDueDateField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{localizedDate:n,localizedDateTime:o,hasTime:a}=rt(),r=O(()=>{const s=t.row[t.column.attribute];return s?a(s)?o(s):n(s):""});return(s,i)=>{const u=d("BaseIndexField");return g(),A(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:c})=>[le(Z(r.value)+" ",1),c?K("",!0):(g(),D("span",W1e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},K1e={key:0},Z1e={__name:"ActivityEndDateField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{localizedDate:n,localizedDateTime:o,hasTime:a}=rt(),r=O(()=>{const s=t.row[t.column.attribute];return s?a(s)?o(s):n(s):""});return(s,i)=>{const u=d("BaseIndexField");return g(),A(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:c})=>[le(Z(r.value)+" ",1),c?K("",!0):(g(),D("span",K1e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Y1e={__name:"ActivityTypeField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(ja,{value:e.field.value,"label-key":e.field.labelKey,"on-option-click":e.field.onOptionClick,"display-as-badges":!0},null,8,["value","label-key","on-option-click"])]),_:1},8,["resource-name","resource-id","row","field"])}}},X1e={class:"h-full w-full bg-white dark:bg-neutral-900"},Q1e={class:"block self-start truncate font-normal"},J1e=["textContent"],eye={__name:"FullCalendarEvent",props:{arg:{type:Object,required:!0},color:{type:String,required:!0},minHeight:{type:Number,default:26}},setup(e){const t=e,{DateTime:n,localizedTime:o}=rt(),a=M(!0),r=O(()=>t.arg.view.type==="dayGridMonth"),s=O(()=>!a.value||r.value),i=O(()=>{const{arg:c}=t;if(c.event.allDay)return"";let m=n.fromISO(c.event.startStr),f,v=o(m.toUTC().toISO());if(c.isMirror&&c.isDragging&&c.event.extendedProps.isAllDay?f=n.fromISO(c.event.startStr).plus({hours:1}):(c.isMirror&&c.isResizing||c.isMirror&&c.isDragging||c.event.endStr&&c.event.extendedProps.hasEndTime===!0)&&c.event.endStr!=c.event.startStr&&(f=n.fromISO(c.event.endStr)),f){let y=o(f.toUTC().toISO());f.day!=m.day?v+=" - "+y+" "+f.toFormat("LLL d"):v+=" - "+y}return v});function u(){let c;t.arg.isMirror?c=document.querySelector(".fc-event-mirror"):c=document.getElementById(`event-${t.arg.event.id}`),a.value=c.offsetHeight<=t.minHeight-1}return Ll(u),Je(u),(c,m)=>{const f=d("IBadge");return g(),D("div",X1e,[l(f,{id:"event-"+e.arg.event.id,class:"h-full w-full",color:e.color},{default:p(()=>[_("div",Q1e,[Se(c.$slots,"default",{usesExtendedView:s.value,timeForDisplay:i.value},()=>[_("span",{textContent:Z(e.arg.event.title)},null,8,J1e)])])]),_:3},8,["id","color"])])}}},tye={class:"space-x-0.5"},Dk={__name:"ActivitiesNavbarViewSelector",props:{active:{type:String,required:!0}},setup(e){return(t,n)=>{const o=d("IButton"),a=Ve("i-tooltip");return g(),D("div",tye,[ne(l(o,{icon:"TableCells",to:{name:"activity-index"},active:e.active==="index",basic:""},null,8,["active"]),[[a,t.$t("core::app.list_view"),void 0,{bottom:!0}]]),ne(l(o,{icon:"Calendar",to:{name:"activity-calendar"},active:e.active==="calendar",basic:""},null,8,["active"]),[[a,t.$t("activities::calendar.calendar"),void 0,{bottom:!0}]])])}}},nye={class:"px-3 py-4 sm:px-5"},oye={key:0,class:"block space-x-1 opacity-90"},aye=["textContent"],rye=["textContent"],lye=["textContent"],sye={key:1},iye={class:"flex items-center space-x-2"},uye={key:0,class:"flex items-center space-x-2"},cye={__name:"ActivitiesCalendar",setup(e){const t=Innoclapps.resourceName("activities"),{setLoading:n,isLoading:o}=An(),{floatResourceInEditMode:a}=ao(),{currentUser:r,users:s}=Ne(),{DateTime:i}=rt(),{typesByName:u,findTypeById:c}=Ha(),{updateResource:m}=Dt(t),f=M(null),v=M(null),y=M(null),b=M(!1),w=xi("activitiesCalendar",{activity_type_id:null,user_id:r.value.id}),k=O(()=>s.value.find(P=>P.id==w.value.user_id)),x=O(()=>c(w.value.activity_type_id));$e(()=>[w.value.activity_type_id,w.value.user_id],V);function I(P,z,H){Innoclapps.request("/calendar",{params:{resource_name:t,activity_type_id:w.value.activity_type_id,user_id:w.value.user_id,start_date:i.fromJSDate(P.start).toUTC().toFormat("yyyy-MM-dd HH:mm:ss"),end_date:i.fromJSDate(P.end).toUTC().toFormat("yyyy-MM-dd HH:mm:ss")}}).then(({data:j})=>z(B(j))).catch(j=>{console.error(j),H("Error while retrieving events",j)})}function C(P){v.value=P.allDay?P.dateStr:i.fromISO(w.dateStr).toUTC().toISO(),y.value=P.allDay?P.dateStr:i.fromISO(P.dateStr).toUTC().toISODate(),b.value=!0}function S(P){const{id:z,allDay:H,startStr:j,endStr:N}=P.event;if(H){m({due_date:j,end_date:R(N)},z);return}const L=i.fromISO(j).toUTC(),U=i.fromISO(N).toUTC();m({due_date:L.toISO(),end_date:U.toISO()},z)}function T(P){const z={},{event:H}=P,{allDay:j,startStr:N,endStr:L}=H;if(j)z.due_date=N,H.end?z.end_date=R(L):z.end_date=z.due_date,H.setExtendedProp("isAllDay",!0),H.setEnd(F(z.end_date));else{const U=i.fromISO(N).toUTC();if(z.due_date=U.toISO(),P.oldEvent.allDay&&!j){let ee=i.fromISO(N).plus({hours:1});z.end_date=ee.toUTC().toISO(),H.setEnd(ee.toISO()),H.setExtendedProp("hasEndTime",!0)}else z.end_date=L?i.fromISO(L).toUTC().toISODate():z.due_date,(P.view.type!=="dayGridMonth"||H.extendedProps.hasEndTime)&&(z.end_date=L?i.fromISO(L).toUTC().toISO():z.due_date,H.setExtendedProp("hasEndTime",!0));H.setExtendedProp("isAllDay",!1)}m(z,H.id)}function E(){V(),b.value=!1}function $(){b.value=!1,v.value=null,y.value=null}function F(P){return i.fromISO(P).plus({days:1}).toISODate()}function R(P){return i.fromISO(P).minus({days:1}).toISODate()}function B(P){return P.map(z=>{if(z.backgroundColor="inherit",z.borderColor="transparent",z.extendedProps.isAllDay=z.allDay,z.allDay)z.end=F(z.end);else if(/\d{4}-\d{2}-\d{2}\T?\d{2}:\d{2}:\d{2}$/.test(z.end))z.extendedProps.hasEndTime=!0;else{const H=i.fromISO(z.start),j=i.fromISO(z.end);z.end=j.set({hour:H.hour,minute:H.minute,second:0}).plus({minutes:30}).toFormat("yyyy-MM-dd'T'HH:mm:ss"),z.extendedProps.hasEndTime=!1}return z.isReadOnly&&(z.editable=!1),z})}function V(){f.value.refresh()}return Ui(`Modules.Users.App.Models.User.${r.value.id}`,".Modules\\Activities\\App\\Events\\CalendarSyncFinished",V),Ut("floating-resource-hidden",V),(P,z)=>{const H=d("NavbarSeparator"),j=d("IButton"),N=d("NavbarItems"),L=d("IFormLabel"),U=d("IDropdownButton"),ee=d("IDropdownItem"),G=d("IDropdownSeparator"),W=d("IDropdownMenu"),ae=d("IDropdown"),ue=d("FullCalendar"),ce=d("CreateActivityModal"),oe=d("MainLayout");return g(),A(oe,{overlay:h(o),"no-padding":""},{actions:p(()=>[l(H,{class:"hidden lg:block"}),l(N,null,{default:p(()=>[l(Dk,{active:"calendar"}),l(j,{icon:"PlusSolid",variant:"primary",text:P.$t("activities::activity.create"),onClick:z[0]||(z[0]=ie=>b.value=!0)},null,8,["text"])]),_:1})]),default:p(()=>[_("div",nye,[l(ue,{ref_key:"calendarRef",ref:f,"calendar-id":"activities",config:{events:I},onEventDrop:T,onEventResize:S,onLoading:h(n),onEventClick:z[3]||(z[3]=ie=>h(a)({resourceName:h(t),resourceId:parseInt(ie.event.id)})),onDateClick:C},{eventContent:p(ie=>[l(eye,{color:ie.event.extendedProps.type.swatch_color,arg:ie},{default:p(({usesExtendedView:Q,timeForDisplay:se})=>[Q?(g(),D(fe,{key:0},[Q?(g(),D("span",oye,[ie.event.allDay?K("",!0):(g(),D("span",{key:0,textContent:Z(se)},null,8,aye)),_("span",{textContent:Z(ie.event.extendedProps.type.name)},null,8,rye)])):K("",!0),_("span",{class:"font-semibold",textContent:Z(ie.event.title)},null,8,lye)],64)):(g(),D("span",sye,Z(se+" "+ie.event.extendedProps.type.name+" - "+ie.event.title),1))]),_:2},1032,["color","arg"])]),header:p(()=>[_("div",iye,[l(L,{label:P.$t("activities::activity.type.type")},null,8,["label"]),l(ae,null,{default:p(()=>{var ie;return[l(U,{as:h(bd),color:x.value?x.value.swatch_color:"#94a3b8",text:((ie=x.value)==null?void 0:ie.name)||P.$t("core::app.all")},null,8,["as","color","text"]),l(W,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(u),Q=>(g(),A(ee,{key:Q.id,text:Q.name,icon:Q.icon,active:h(w).activity_type_id===Q.id,onClick:se=>h(w).activity_type_id=Q.id},null,8,["text","icon","active","onClick"]))),128)),l(G),l(ee,{text:P.$t("core::app.all"),active:!h(w).activity_type_id,onClick:z[1]||(z[1]=Q=>h(w).activity_type_id=null)},null,8,["text","active"])]),_:1})]}),_:1})]),P.$gate.userCan("view all activities")?(g(),D("div",uye,[l(L,{label:P.$t("activities::activity.owner")},null,8,["label"]),l(ae,null,{default:p(()=>{var ie;return[l(U,{text:((ie=k.value)==null?void 0:ie.name)||P.$t("core::app.all"),basic:""},null,8,["text"]),l(W,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(s),Q=>(g(),A(ee,{key:Q.id,text:Q.name,active:h(w).user_id===Q.id,onClick:se=>h(w).user_id=Q.id},null,8,["text","active","onClick"]))),128)),l(G),l(ee,{text:P.$t("core::app.all"),active:!h(w).user_id,onClick:z[2]||(z[2]=Q=>h(w).user_id=null)},null,8,["text","active"])]),_:1})]}),_:1})])):K("",!0)]),_:1},8,["config","onLoading"]),l(ce,{visible:b.value,"due-date":v.value,"end-date":y.value,onCreated:E,onHidden:$},null,8,["visible","due-date","end-date"])])]),_:1},8,["overlay"])}}},dye={};function mye(e,t){const n=d("CreateActivityModal");return g(),A(n,{"with-extended-submit-buttons":!0})}const fye=fn(dye,[["render",mye]]),S1={__name:"ActivitiesEdit",setup(e){const t=Innoclapps.resourceName("activities"),n=It(),o=O(()=>parseInt(n.params.id)),{t:a}=Ee(),r=_t(),{fields:s,hasFields:i,hydrateFields:u,getUpdateFields:c}=yn(),{resource:m,fetchResource:f,synchronizeResource:v,incrementResourceCount:y,decrementResourceCount:b,updateResource:w}=Vi(t,o);st("hydrateFields",u),st("synchronizeResource",v),st("synchronizeResourceSilently",v),st("incrementResourceCount",y),st("decrementResourceCount",b);function k(C){C.destroyable?r.push({name:"activity-index"}):I()}async function x(C){await w(C),Innoclapps.success(a("core::resource.updated"))}async function I(){await f(),s.value=await c(t,o.value),u(m.value)}return I(),(C,S)=>(g(),A(Ak,{"update-using":x,"is-ready":h(i),fields:h(s),resource:h(m),onActionExecuted:k,onHidden:S[0]||(S[0]=T=>C.$router.back())},null,8,["is-ready","fields","resource"]))}},pye=_("option",{value:"csv"},"CSV",-1),vye=_("option",{value:"xls"},"XLS",-1),hye=_("option",{value:"xlsx"},"XLSX",-1),gye={class:"inline-flex items-center space-x-2"},bye={key:1},yye={class:"grid grid-cols-3 gap-x-4 gap-y-2"},_ye={class:"mt-5 rounded-lg border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-500 dark:bg-neutral-700"},Hi={__name:"ResourceExport",props:{resourceName:String,filtersView:String,title:String,urlPath:{required:!0,type:String},modalId:{default:"export-modal",type:String}},setup(e){const t=e,{t:n}=Ee(),{UTCDateTimeInstance:o}=rt(),{form:a}=Ze({period:"last_7_days",type:"csv",fields:[],customPeriod:{start:o.startOf("month").toISODate(),end:o.toISODate()}}),r=M([]),s=M(null),i=M(!1),u=O(()=>r.value.length>0),c=O(()=>r.value.filter($=>$.dateable===!0)),m=[{text:n("core::dates.today"),value:"today"},{text:n("core::dates.periods.7_days"),value:"last_7_days"},{text:n("core::dates.this_month"),value:"this_month"},{text:n("core::dates.last_month"),value:"last_month"},{text:n("core::app.all"),value:"all",id:"all"},{text:n("core::dates.custom"),value:"custom",id:"custom"}],{queryBuilderRules:f,hasRulesApplied:v,rulesAreValid:y}=la(t.resourceName,t.filtersView),b=M(!0),w=M(!1),k=O(()=>t.title||n("core::app.export.export")),x=O(()=>a.period==="custom"),I=O(()=>v.value&&y.value);function C($){return $.headers["content-disposition"].split("filename=")[1]}async function S(){u.value||(r.value=await T())}async function T(){const{data:$}=await Innoclapps.request(`${t.resourceName}/export-fields`);return $}function E(){var $;w.value=!0,Innoclapps.request().post(t.urlPath,{fields:i.value?a.fields:null,date_range_field:a.period!=="all"?($=s.value)==null?void 0:$.attribute:null,period:x.value?a.customPeriod:a.period==="all"?null:a.period,type:a.type,filters:b.value&&I.value?f.value:null},{responseType:"blob"}).then(F=>{Ys(F.data,C(F))}).finally(()=>w.value=!1)}return La(i,async()=>{await S(),a.fields.length===0&&r.value.forEach($=>{a.fields.push($.attribute)})}),($,F)=>{const R=d("IFormSelect"),B=d("IFormGroup"),V=d("IFormLabel"),P=d("IDropdownButton"),z=d("ISpinner"),H=d("IDropdownItem"),j=d("IDropdownMenu"),N=d("IDropdown"),L=d("IFormRadio"),U=d("IFormRadioLabel"),ee=d("IFormRadioField"),G=d("DateRangePicker"),W=d("IFormCheckbox"),ae=d("IFormCheckboxLabel"),ue=d("IFormCheckboxField"),ce=d("IModal");return g(),A(ce,{id:e.modalId,title:k.value,"ok-loading":w.value,"ok-disabled":w.value,"ok-text":$.$t("core::app.export.export"),onOk:E},{default:p(()=>[l(B,{label:$.$t("core::app.export.type")},{default:p(()=>[l(R,{modelValue:h(a).type,"onUpdate:modelValue":F[0]||(F[0]=oe=>h(a).type=oe)},{default:p(()=>[pye,vye,hye]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(B,{class:"space-y-1"},{label:p(()=>[_("div",gye,[l(V,{as:"p",label:$.$t("core::dates.range")},null,8,["label"]),h(a).period!=="all"?(g(),A(N,{key:0,onShow:S},{default:p(()=>[l(P,{class:"mt-0.5",text:s.value?s.value.label:$.$t("core::app.created_at"),basic:""},null,8,["text"]),l(j,null,{default:p(()=>[c.value.length?K("",!0):(g(),A(z,{key:0,class:"h-5 w-5 text-neutral-400"})),(g(!0),D(fe,null,Ie(c.value,oe=>(g(),A(H,{key:oe.attribute,text:oe.label,active:s.value&&s.value.attribute===oe.attribute||!s.value&&oe.attribute==="created_at",onClick:ie=>s.value=oe},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})):K("",!0)])]),default:p(()=>[(g(),D(fe,null,Ie(m,oe=>l(ee,{key:oe.text},{default:p(()=>[l(L,{modelValue:h(a).period,"onUpdate:modelValue":ie=>h(a).period=ie,name:"period",value:oe.value},null,8,["modelValue","onUpdate:modelValue","value"]),l(U,{text:oe.text},null,8,["text"])]),_:2},1024)),64))]),_:1}),x.value?(g(),A(B,{key:0,class:"sm:ml-6"},{default:p(()=>[l(V,{for:"custom-period-start",class:"mb-1",label:$.$t("core::app.export.select_range")},null,8,["label"]),l(G,{id:"custom-period",modelValue:h(a).customPeriod,"onUpdate:modelValue":F[1]||(F[1]=oe=>h(a).customPeriod=oe),name:"custom-period"},null,8,["modelValue"])]),_:1})):K("",!0),l(B,{class:"mt-6"},{default:p(()=>[l(ee,null,{default:p(()=>[l(L,{modelValue:i.value,"onUpdate:modelValue":F[2]||(F[2]=oe=>i.value=oe),name:"select_fields",value:!1},null,8,["modelValue"]),l(U,{text:$.$t("core::fields.all")},null,8,["text"])]),_:1}),l(ee,null,{default:p(()=>[l(L,{modelValue:i.value,"onUpdate:modelValue":F[3]||(F[3]=oe=>i.value=oe),name:"select_fields",value:!0},null,8,["modelValue"]),l(U,{text:$.$t("core::fields.select")},null,8,["text"])]),_:1})]),_:1}),i.value?(g(),D("div",bye,[_("div",yye,[(g(!0),D(fe,null,Ie(r.value,oe=>(g(),D("div",{key:oe.attribute,class:"flex items-center rounded-md border border-neutral-200 px-3 py-1 dark:border-neutral-500/30"},[l(ue,null,{default:p(()=>[l(W,{checked:h(a).fields,"onUpdate:checked":F[4]||(F[4]=ie=>h(a).fields=ie),value:oe.attribute,disabled:oe.primary},null,8,["checked","value","disabled"]),l(ae,{class:"max-w-full truncate",text:oe.label},null,8,["text"])]),_:2},1024)]))),128))])])):K("",!0),ne(_("div",_ye,[l(ue,null,{default:p(()=>[l(W,{checked:b.value,"onUpdate:checked":F[5]||(F[5]=oe=>b.value=oe)},null,8,["checked"]),l(ae,{text:$.$t("core::app.export.apply_filters")},null,8,["text"])]),_:1})],512),[[pe,I.value]])]),_:1},8,["id","title","ok-loading","ok-disabled","ok-text"])}}},Iye={class:"flex w-full max-w-2xl items-center overflow-x-auto p-px"},T1={__name:"ActivitiesTableTypePicker",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue"),{hasAnyBuilderRules:n,rulesAreValid:o,findRule:a}=la("activities"),{typesForIconPicker:r}=Ha(),s=O(()=>!!a("activity_type_id")),i=O(()=>s.value||!o.value);return $e(n,u=>{u&&o.value&&(t.value=void 0)}),$e(o,u=>{n.value&&u&&(t.value=void 0)}),(u,c)=>{const m=d("ILink"),f=d("IIconPicker"),v=Ve("i-tooltip");return g(),D("div",Iye,[ne(l(m,{class:"mr-3 border-r-2 border-neutral-200 pr-3 dark:border-neutral-500/30",text:u.$t("core::app.all"),onClick:c[0]||(c[0]=y=>t.value=null)},null,8,["text"]),[[pe,t.value&&!i.value]]),ne((g(),D("span",null,[l(f,{modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=y=>t.value=y),class:"min-w-max","value-field":"id",icons:h(r),disabled:i.value},null,8,["modelValue","icons","disabled"])])),[[v,s.value?u.$t("activities::activity.filters.activity_type_disabled"):"",void 0,{bottom:!0,light:!0}]])])}}},wye={class:"mb-2 block lg:hidden"},xye={class:"hidden lg:block"},kye={class:"flex items-center space-x-1"},$ye=Object.assign({inheritAttrs:!1},{__name:"ActivitiesTable",props:{tableId:{required:!0,type:String},initialize:{default:!0,type:Boolean}},emits:["deleted"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("activities"),{t:r}=Ee(),{reloadTable:s}=eo(n.tableId),{deleteResource:i}=Dt(a),u=M(void 0),c=O(()=>({activity_type_id:u.value}));async function m(f){await i(f),o("deleted",f),s(),Innoclapps.success(r("core::resource.deleted"))}return(f,v)=>{const y=d("ITextDark"),b=d("ITableRowAction"),w=d("ITableRowActions"),k=d("ResourceTable"),x=d("RouterView");return g(),D(fe,null,[_("div",wye,[l(T1,{modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=I=>u.value=I)},null,8,["modelValue"])]),e.initialize?(g(),A(k,Ue({key:0,"resource-name":h(a),"data-request-query-string":c.value,"table-id":e.tableId,"empty-state":{to:{name:"create-activity"},title:f.$t("activities::activity.empty_state.title"),buttonText:f.$t("activities::activity.create"),description:f.$t("activities::activity.empty_state.description"),secondButtonText:f.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:h(a)}}}},f.$attrs),{header:p(({total:I})=>[_("div",xye,[l(T1,{modelValue:u.value,"onUpdate:modelValue":v[1]||(v[1]=C=>u.value=C)},null,8,["modelValue"])]),l(y,{class:"font-medium",text:f.$t("activities::activity.count",{count:I})},null,8,["text"])]),title:p(({row:I})=>[_("div",kye,[I.authorizations.update?(g(),A(kd,{key:0,class:"mr-1 mt-0.5","is-completed":I.is_completed,"activity-id":I.id,onChanged:h(s)},null,8,["is-completed","activity-id","onChanged"])):K("",!0),_("span",null,Z(I.title),1)])]),actions:p(({row:I})=>[I.authorizations.update||I.authorizations.update?(g(),A(w,{key:0},{default:p(()=>[I.authorizations.update?(g(),A(b,{key:0,icon:"PencilAlt",text:f.$t("core::app.edit"),to:{name:"edit-activity",params:{id:I.id}}},null,8,["text","to"])):K("",!0),I.authorizations.delete?(g(),A(b,{key:1,icon:"Trash",text:f.$t("core::app.delete"),onClick:C=>f.$confirm(()=>m(I.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)):K("",!0)]),_:1},16,["resource-name","data-request-query-string","table-id","empty-state"])):K("",!0),l(x,{name:"edit"})],64)}}}),Rm="activities",Cye={__name:"ActivitiesIndex",setup(e){const t=Innoclapps.resourceName("activities"),n=It(),{reloadTable:o,customizeTable:a}=eo(Rm),r=M(n.meta.initialize),s=M(!0);function i(){r.value&&o()}return Va((u,c,m)=>{r.value=!0,m()}),(u,c)=>{const m=d("NavbarSeparator"),f=d("IDropdownItem"),v=d("IDropdownMinimal"),y=d("IButton"),b=d("NavbarItems"),w=d("RouterView"),k=d("MainLayout");return g(),A(k,null,{actions:p(()=>[l(m,{class:"hidden lg:block"}),l(b,null,{default:p(()=>[l(v,{placement:s.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(f,{icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:h(t)}},text:u.$t("core::import.import")},null,8,["to","text"]),u.$gate.userCan("export activities")?(g(),A(f,{key:0,icon:"DocumentDownload",text:u.$t("core::app.export.export"),onClick:c[0]||(c[0]=x=>u.$dialog.show("export-modal"))},null,8,["text"])):K("",!0),l(f,{icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:h(t)}},text:u.$t("core::app.soft_deletes.trashed")},null,8,["to","text"]),l(f,{icon:"Cog",text:u.$t("core::table.list_settings"),onClick:h(a)},null,8,["text","onClick"])]),_:1},8,["placement"]),l(Dk,{active:"index"}),ne(l(y,{variant:"primary",icon:"PlusSolid",to:{name:"create-activity"},text:u.$t("activities::activity.create")},null,8,["text"]),[[pe,!s.value]])]),_:1})]),default:p(()=>[l($ye,{"table-id":Rm,initialize:r.value,"filter-id":u.$route.query.filter_id?parseInt(u.$route.query.filter_id):void 0,onLoaded:c[1]||(c[1]=x=>s.value=x.isPreEmpty)},null,8,["initialize","filter-id"]),l(Hi,{"url-path":"/activities/export","resource-name":h(t),"filters-view":Rm,title:u.$t("activities::activity.export")},null,8,["resource-name","title"]),l(w,{name:"create",onCreated:c[2]||(c[2]=({isRegularAction:x,action:I})=>(i(),x||I==="go-to-list"?u.$router.back():void 0)),onHidden:u.$router.back},null,8,["onHidden"])]),_:1})}}},Sye={},Tye={id:"Layer_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Eye=_("path",{style:{fill:"#fbbb00"},d:`M113.47,309.408L95.648,375.94l-65.139,1.378C11.042,341.211,0,299.9,0,256
    c0-42.451,10.324-82.483,28.624-117.732h0.014l57.992,10.632l25.404,57.644c-5.317,15.501-8.215,32.141-8.215,49.456
    C103.821,274.792,107.225,292.797,113.47,309.408z`},null,-1),Fye=_("path",{style:{fill:"#518ef8"},d:`M507.527,208.176C510.467,223.662,512,239.655,512,256c0,18.328-1.927,36.206-5.598,53.451
    c-12.462,58.683-45.025,109.925-90.134,146.187l-0.014-0.014l-73.044-3.727l-10.338-64.535
    c29.932-17.554,53.324-45.025,65.646-77.911h-136.89V208.176h138.887L507.527,208.176L507.527,208.176z`},null,-1),Aye=_("path",{style:{fill:"#28b446"},d:`M416.253,455.624l0.014,0.014C372.396,490.901,316.666,512,256,512
    c-97.491,0-182.252-54.491-225.491-134.681l82.961-67.91c21.619,57.698,77.278,98.771,142.53,98.771
    c28.047,0,54.323-7.582,76.87-20.818L416.253,455.624z`},null,-1),Rye=_("path",{style:{fill:"#f14336"},d:`M419.404,58.936l-82.933,67.896c-23.335-14.586-50.919-23.012-80.471-23.012
    c-66.729,0-123.429,42.957-143.965,102.724l-83.397-68.276h-0.014C71.23,56.123,157.06,0,256,0
    C318.115,0,375.068,22.126,419.404,58.936z`},null,-1),Dye=[Eye,Fye,Aye,Rye];function Oye(e,t){return g(),D("svg",Tye,Dye)}const Ok=fn(Sye,[["render",Oye]]),Bye={},Nye={id:"Capa_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Pye=_("path",{style:{fill:"#1976d2"},d:`M496,112.011H272c-8.832,0-16,7.168-16,16s7.168,16,16,16h177.376l-98.304,76.448l-70.496-44.832
    l-17.152,27.008l80,50.88c2.592,1.664,5.6,2.496,8.576,2.496c3.456,0,6.944-1.12,9.824-3.36L480,160.715v207.296H272
    c-8.832,0-16,7.168-16,16s7.168,16,16,16h224c8.832,0,16-7.168,16-16v-256C512,119.179,504.832,112.011,496,112.011z`},null,-1),Mye=_("path",{style:{fill:"#2196f3"},d:`M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352
    c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68
    c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z`},null,-1),Vye=_("path",{style:{fill:"#fafafa"},d:`M144,368.011c-44.096,0-80-43.072-80-96s35.904-96,80-96s80,43.072,80,96
    S188.096,368.011,144,368.011z M144,208.011c-26.464,0-48,28.704-48,64s21.536,64,48,64s48-28.704,48-64
    S170.464,208.011,144,208.011z`},null,-1),Lye=[Pye,Mye,Vye];function qye(e,t){return g(),D("svg",Nye,Lye)}const Bk=fn(Bye,[["render",qye]]),Uye={class:"flex justify-center space-x-2 py-3"},jye=["onClick"],E1="flex flex-col items-center space-y-1 rounded-lg border border-neutral-200 px-5 py-3 shadow-sm hover:bg-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-800",zye={__name:"CalendarSyncConnectAccount",setup(e){const{isGoogleApiConfigured:t,isMicrosoftGraphConfigured:n,scriptConfig:o}=Ne(),a=[{id:"google",title:"Google Calendar",icon:Ok,settingsRouteName:"settings-integrations-google",popoverContentLangKey:"activities::calendar.missing_google_integration",configured:t()},{id:"microsoft",title:"Outlook Calendar",icon:Bk,settingsRouteName:"settings-integrations-microsoft",popoverContentLangKey:"activities::calendar.missing_outlook_integration",configured:n()}];function r(s){window.location.href=`${o("url")}/calendar/sync/${s}/connect`}return(s,i)=>{const u=d("IPopoverButton"),c=d("ILink"),m=d("IText"),f=d("IPopoverBody"),v=d("IPopoverPanel"),y=d("IPopover"),b=d("IModal");return g(),A(b,{id:"calendarConnectNewAccountModal",size:"sm",title:s.$t("core::oauth.connect_new_account"),"sub-title":s.$t("activities::calendar.choose_oauth_account"),"hide-footer":""},{default:p(()=>[_("div",Uye,[(g(),D(fe,null,Ie(a,w=>(g(),D(fe,{key:w.id},[w.configured?(g(),D("button",{key:0,type:"button",class:be(["text-base text-neutral-800 dark:text-neutral-200 sm:text-sm",E1]),onClick:k=>r(w.id)},[(g(),A(Rt(w.icon),{class:"mb-2"})),le(" "+Z(w.title),1)],10,jye)):(g(),A(y,{key:1,placement:"top"},{default:p(()=>[l(u,{as:"button",class:be(["text-base text-neutral-800 dark:text-neutral-200 sm:text-sm",E1])},{default:p(()=>[(g(),A(Rt(w.icon),{class:"mb-2"})),le(" "+Z(w.title),1)]),_:2},1032,["class"]),l(v,{class:"max-w-xs sm:max-w-sm"},{default:p(()=>[l(f,null,{default:p(()=>[l(m,{class:"whitespace-pre-wrap"},{default:p(()=>[le(Z(s.$t(w.popoverContentLangKey))+" ",1),s.$gate.isSuperAdmin()?(g(),A(c,{key:0,class:"mt-2 block text-right",text:s.$t("core::settings.go_to_settings"),to:{name:w.settingsRouteName}},null,8,["text","to"])):K("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))],64))),64))])]),_:1},8,["title","sub-title"])}}},Hye={class:"mx-auto max-w-5xl"},Wye={key:1},Gye={key:0,class:"mb-4 block sm:inline-flex sm:items-center sm:space-x-2"},Kye={key:1},Zye={key:2},Yye=["textContent"],Xye={class:"mb-3"},Qye={class:"grid grid-cols-12 gap-1 lg:gap-6"},Jye={class:"col-span-12 self-start lg:col-span-3 lg:flex lg:items-center lg:justify-end"},e_e={class:"col-span-12 lg:col-span-4"},t_e={class:"mb-3"},n_e={class:"grid grid-cols-12 gap-1 lg:gap-6"},o_e={class:"col-span-12 self-start lg:col-span-3 lg:flex lg:items-center lg:justify-end"},a_e={class:"col-span-12 lg:col-span-4"},r_e={class:"grid grid-cols-12 gap-1 lg:gap-6"},l_e={class:"col-span-12 lg:col-span-3 lg:text-right"},s_e={class:"col-span-12 lg:col-span-4"},i_e={class:"flex flex-col lg:flex-row lg:items-center"},u_e={class:"mb-2 grow lg:mb-0"},c_e={class:"flex items-center space-x-2"},d_e={__name:"CalendarSync",setup(e){const{t}=Ee(),n=It(),{localizedDateTime:o}=rt(),{scriptConfig:a}=Ne(),{form:r}=Ze(),{typesByName:s}=Ha(),i=M(!1),u=M(!1),c=M(null),m=M(null),f=M(null),v=M(!1),y=M([]),b=M([]),w=O(()=>y.value.length>0),k=O(()=>s.value.find(V=>V.id==r.activity_type_id)),x=O(()=>b.value.find(V=>V.id==r.calendar_id)),I=O(()=>!f.value||!f.value.account?!1:f.value.account.requires_auth),C=O(()=>{if(!m.value&&!f.value||f.value&&f.value.is_sync_stopped)return"";if(!f.value)return t("activities::calendar.only_future_events_will_be_synced");const V=Vo(f.value.previously_used,["calendar_id",r.calendar_id]);return f.value.calendar_id===r.calendar_id&&!m.value?t("activities::calendar.events_being_synced_from",{date:o(f.value.start_sync_from)}):m.value||f.value.calendar_id!==r.calendar_id?V.length>0?t("activities::calendar.events_will_sync_from",{date:o(V[0].start_sync_from)}):f.value.calendar_id===r.calendar_id?t("activities::calendar.events_will_sync_from",{date:o(f.value.start_sync_from)}):t("activities::calendar.only_future_events_will_be_synced"):""});function S(){return Vt(y.value,V=>new Date(V.created_at),["desc"])[0]}function T(){r.clear().set({access_token_id:null,activity_type_id:a("activities.default_activity_type_id"),activity_types:s.value.map(V=>V.id),calendar_id:null})}function E(V){m.value=V,r.fill("access_token_id",V.id),R(V.id).then(P=>{r.set("calendar_id",P[0].id)})}function $(){r.post("/calendar/account").then(V=>{f.value=V,m.value=null})}function F(){v.value=!0,Innoclapps.request().delete("/calendar/account").then(({data:V})=>{f.value=V,m.value=null,T()}).finally(()=>v.value=!1)}async function R(V){u.value=!0,c.value=null;try{let{data:P}=await Innoclapps.request(`/calendars/${V}`);return b.value=P,P}catch(P){throw c.value=P.response.data.message,P}finally{u.value=!1}}function B(V){r.set({activity_type_id:V.activity_type_id,activity_types:V.activity_types,access_token_id:V.account?V.account.id:null})}return T(),Promise.all([Innoclapps.request("oauth/accounts"),Innoclapps.request("calendar/account")]).then(V=>{y.value=V[0].data,f.value=V[1].data,f.value&&B(f.value),n.query.viaOAuth?E(S()):f.value.account&&!I.value&&R(f.value.account.id).then(()=>{r.set("calendar_id",f.value.calendar_id)}),i.value=!0}),(V,P)=>{const z=d("IBadge"),H=d("ICardHeading"),j=d("ITextDark"),N=d("I18nT"),L=d("IText"),U=d("ICardHeader"),ee=d("IAlertBody"),G=d("IAlert"),W=d("IButton"),ae=d("IFormLabel"),ue=d("ICustomSelect"),ce=d("IFormError"),oe=d("IFormCheckbox"),ie=d("IFormCheckboxLabel"),Q=d("IFormCheckboxField"),se=d("ICardBody"),me=d("Icon"),xe=d("ICardFooter"),de=d("ICard"),he=d("MainLayout"),Y=Ve("dialog");return g(),A(he,null,{default:p(()=>[_("div",Hye,[l(U,null,{default:p(()=>[_("div",null,[l(H,{class:"flex items-center"},{default:p(()=>[le(Z(V.$t("activities::calendar.calendar_sync"))+" ",1),f.value&&!f.value.is_sync_disabled&&!f.value.is_sync_stopped?(g(),A(z,{key:0,class:"ml-2",variant:"success",icon:"Refresh",text:f.value.is_synchronizing_via_webhook?"Webhook":"Polling"},null,8,["text"])):K("",!0)]),_:1}),m.value&&(!f.value||f.value&&f.value.is_sync_disabled)?(g(),A(L,{key:0},{default:p(()=>[l(N,{scope:"global",keypath:"activities::calendar.account_being_connected"},{email:p(()=>[l(j,{as:"span",class:"font-medium",text:m.value.email},null,8,["text"])]),_:1})]),_:1})):K("",!0)])]),_:1}),l(de,{overlay:!i.value},{default:p(()=>[l(se,null,{default:p(()=>[c.value?(g(),A(G,{key:0,variant:"warning",dismissible:"",onDismissed:P[0]||(P[0]=X=>c.value=null)},{default:p(()=>[l(ee,{text:c.value},null,8,["text"])]),_:1})):K("",!0),(!f.value||f.value&&f.value.is_sync_disabled||!f.value.account)&&!m.value?(g(),D("div",Wye,[l(zye),!f.value||f.value&&f.value.is_sync_disabled?(g(),D("div",Gye,[ne(l(W,{variant:"primary",text:V.$t("core::oauth.add"),soft:""},null,8,["text"]),[[Y,"calendarConnectNewAccountModal"]]),ne(l(L,{text:V.$t("core::oauth.or_choose_existing")},null,8,["text"]),[[pe,w.value]])])):K("",!0),w.value&&!m.value?(g(),D("div",Kye,[(g(!0),D(fe,null,Ie(y.value,X=>(g(),A(Xu,{key:X.id,class:"mb-3",account:X},{default:p(()=>[l(W,{class:"ml-2",variant:"info",disabled:X.requires_auth,text:V.$t("core::oauth.connect"),soft:"",onClick:re=>E(X)},null,8,["disabled","text","onClick"])]),_:2},1032,["account"]))),128))])):K("",!0)])):K("",!0),m.value||f.value&&!f.value.is_sync_disabled?(g(),D("div",Zye,[f.value&&!f.value.is_sync_disabled&&f.value.account?(g(),A(Xu,{key:0,class:"mb-10",account:f.value.account},bn({default:p(()=>[l(W,{variant:"danger",class:"ml-2",disabled:v.value,loading:v.value,onClick:F},{default:p(()=>[le(Z(f.value.is_sync_stopped?V.$t("core::app.cancel"):V.$t("core::oauth.stop_syncing")),1)]),_:1},8,["disabled","loading"])]),_:2},[f.value.sync_state_comment?{name:"after-name",fn:p(()=>[_("span",{class:"text-base/6 text-danger-500 sm:text-sm/6",textContent:Z(f.value.sync_state_comment)},null,8,Yye)]),key:"0"}:void 0]),1032,["account"])):K("",!0),_("div",Xye,[_("div",Qye,[_("div",Jye,[l(ae,{as:"p",label:V.$t("activities::calendar.calendar")},null,8,["label"])]),_("div",e_e,[l(ue,{label:"title",options:b.value,"model-value":x.value,loading:u.value,disabled:I.value,placeholder:u.value?V.$t("core::app.loading"):"",clearable:!1,onOptionSelected:P[1]||(P[1]=X=>h(r).calendar_id=X.id)},null,8,["options","model-value","loading","disabled","placeholder"]),l(L,{class:"mt-2",text:V.$t("activities::calendar.sync_support_only_primary")},null,8,["text"]),l(ce,{error:h(r).getError("calendar_id")},null,8,["error"])])])]),_("div",t_e,[_("div",n_e,[_("div",o_e,[l(ae,{as:"p",label:V.$t("activities::calendar.save_events_as")},null,8,["label"])]),_("div",a_e,[l(ue,{label:"name",options:h(s),"model-value":k.value,clearable:!1,onOptionSelected:P[2]||(P[2]=X=>h(r).activity_type_id=X.id)},null,8,["options","model-value"]),l(ce,{error:h(r).getError("activity_type_id")},null,8,["error"])])])]),_("div",r_e,[_("div",l_e,[l(ae,{as:"p",label:V.$t("activities::calendar.sync_activity_types")},null,8,["label"])]),_("div",s_e,[(g(!0),D(fe,null,Ie(h(s),X=>(g(),A(Q,{key:X.id},{default:p(()=>[l(oe,{checked:h(r).activity_types,"onUpdate:checked":P[3]||(P[3]=re=>h(r).activity_types=re),value:X.id},null,8,["checked","value"]),l(ie,{text:X.name},null,8,["text"])]),_:2},1024))),128)),l(ce,{error:h(r).getError("activity_types")},null,8,["error"])])])])):K("",!0)]),_:1}),m.value||f.value&&!f.value.is_sync_disabled?(g(),A(xe,{key:0},{default:p(()=>[_("div",i_e,[_("div",u_e,[C.value?(g(),A(j,{key:0},{default:p(()=>[l(me,{icon:"ExclamationTriangle",class:"-mt-1 mr-1 inline-flex size-5"}),le(" "+Z(C.value),1)]),_:1})):K("",!0)]),_("div",c_e,[!f.value||f.value&&f.value.is_sync_disabled||f.value.is_sync_stopped?(g(),A(W,{key:0,disabled:h(r).busy,text:V.$t("core::app.cancel"),onClick:P[4]||(P[4]=X=>m.value=null)},null,8,["disabled","text"])):K("",!0),ne(l(W,{variant:"primary",disabled:h(r).busy,loading:h(r).busy,onClick:$},{default:p(()=>[le(Z(!f.value||f.value&&f.value.is_sync_disabled||f.value.is_sync_stopped?V.$t("core::oauth.start_syncing"):V.$t("core::app.save")),1)]),_:1},8,["disabled","loading"]),[[pe,!f.value||f.value&&!f.value.is_sync_stopped]]),ne(l(W,{variant:"secondary",disabled:h(r).busy||I.value,loading:h(r).busy,text:V.$t("activities::calendar.reconfigure"),onClick:$},null,8,["disabled","loading","text"]),[[pe,f.value&&f.value.is_sync_stopped]])])])]),_:1})):K("",!0)]),_:1},8,["overlay"])])]),_:1})}}},Dm=xi("activity-calendar-view-default",!1),m_e=[{path:"/calendar/sync",name:"calendar-sync",component:d_e,meta:{title:at("activities::calendar.calendar_sync")}},{path:"/activities/calendar",name:"activity-calendar",component:cye,meta:{title:at("activities::calendar.calendar")},beforeEnter:()=>{Dm.value=!0}},{path:"/activities",name:"activity-index",component:Cye,meta:{title:at("activities::activity.activities"),subRoutes:["create-activity","edit-activity","view-activity"],calendarRoute:"activity-calendar",initialize:!1},beforeEnter:async(e,t)=>{if(Dm.value&&t.name!=e.meta.calendarRoute&&e.meta.subRoutes.indexOf(e.name)===-1&&!e.query.filter_id)return{name:e.meta.calendarRoute};e.meta.initialize=e.name==="activity-index",e.meta.subRoutes.indexOf(e.name)===-1&&!e.query.filter_id&&(Dm.value=!1)},children:[{path:"create",name:"create-activity",components:{create:fye},meta:{title:at("activities::activity.create")}},{path:":id",name:"view-activity",meta:{scrollToTop:!1},components:{edit:S1}},{path:":id/edit",name:"edit-activity",meta:{scrollToTop:!1},components:{edit:S1}}]}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("MyActivitiesCard",Mbe),e.component("RecordTabTimelineActivity",F1e),e.component("CreateActivityModal",Fbe),e.component("ActivityFloatingModal",Ebe),e.component("FormActivityDueDateField",N1e),e.component("FormActivityEndDateField",M1e),e.component("FormGuestsSelectField",H1e),e.component("FormActivityTypeField",V1e),e.component("IndexActivityTypeField",Y1e),e.component("IndexActivityDueDateField",G1e),e.component("IndexActivityEndDateField",Z1e),e.component("ActivitiesTab",Vbe),e.component("ActivitiesTabPanel",w1e),m_e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"activities",name:"activity-settings",component:D1e,meta:{title:at("activities::activity.activities")}})});const f_e={class:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-6"},p_e={class:"sm:col-span-2"},v_e={class:"sm:col-span-2"},h_e={__name:"SettingsProducts",setup(e){const{form:t,isReady:n,submit:o}=To(),{scriptConfig:a}=Ne(),r=a("taxes.types"),s=[{label:a("currency.iso_code"),value:"fixed"},{label:"%",value:"percent"}];return(i,u)=>{const c=d("ICardHeading"),m=d("ICardHeader"),f=d("IFormInput"),v=d("IFormGroup"),y=d("IFormNumericInput"),b=d("IFormRadio"),w=d("IFormRadioLabel"),k=d("IFormRadioField"),x=d("ICardBody"),I=d("IButton"),C=d("ICardFooter"),S=d("ICard");return g(),D(fe,null,[l(m,null,{default:p(()=>[l(c,{text:i.$t("billable::product.products")},null,8,["text"])]),_:1}),l(S,{as:"form",overlay:!h(n),onSubmit:ot(h(o),["prevent"])},{default:p(()=>[l(x,null,{default:p(()=>[_("div",f_e,[_("div",p_e,[l(v,{"label-for":"tax_label",label:i.$t("billable::product.tax_label"),required:""},{default:p(()=>[l(f,{id:"tax_label",modelValue:h(t).tax_label,"onUpdate:modelValue":u[0]||(u[0]=T=>h(t).tax_label=T)},null,8,["modelValue"])]),_:1},8,["label"])]),_("div",v_e,[l(v,{"label-for":"tax_rate",label:i.$t("billable::product.tax_rate")},{default:p(()=>[l(y,{id:"tax_rate",modelValue:h(t).tax_rate,"onUpdate:modelValue":u[1]||(u[1]=T=>h(t).tax_rate=T),placeholder:i.$t("billable::product.tax_percent"),precision:3,minus:!0},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])]),l(v,{class:"mt-3 space-y-1","label-for":"tax_type",label:i.$t("billable::product.settings.default_tax_type")},{default:p(()=>[(g(!0),D(fe,null,Ie(h(r),T=>(g(),A(k,{key:T},{default:p(()=>[l(b,{modelValue:h(t).tax_type,"onUpdate:modelValue":u[2]||(u[2]=E=>h(t).tax_type=E),name:"tax_type",value:T},null,8,["modelValue","value"]),l(w,{text:i.$t("billable::billable.tax_types."+T)},null,8,["text"])]),_:2},1024))),128))]),_:1},8,["label"]),l(v,{"label-for":"tax_type",class:"mt-3 space-y-1",label:i.$t("billable::product.settings.default_discount_type")},{default:p(()=>[(g(),D(fe,null,Ie(s,T=>l(k,{key:T.value},{default:p(()=>[l(b,{modelValue:h(t).discount_type,"onUpdate:modelValue":u[3]||(u[3]=E=>h(t).discount_type=E),name:"discount_type",value:T.value},null,8,["modelValue","value"]),l(w,{text:T.label},null,8,["text"])]),_:2},1024)),64))]),_:1},8,["label"])]),_:1}),l(C,{class:"text-right"},{default:p(()=>[l(I,{type:"submit",variant:"primary",disabled:h(t).busy,text:i.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay","onSubmit"])],64)}}};var g_e=Zc,b_e=ra,y_e=Wc,__e=Ov,F1=Gp,I_e=UI,w_e=y_e(function(e){var t=I_e(e);return F1(t)&&(t=void 0),__e(g_e(e,1,F1,!0),b_e(t))}),x_e=w_e;const k_e=Bt(x_e),Vv=rs(()=>{const{setLoading:e,isLoading:t}=An(),n=M([]),o=M(!1);async function a(u,c){const{data:m}=await Innoclapps.request(`/products/${u}`,c);return m}async function r(u){const{data:c}=await Innoclapps.request("/products/search",{params:{q:u,search_fields:"name:="}});return c.length>0?c[0]:null}async function s(u=100){if(o.value)return n.value;e(!0);try{const{data:c}=await i({params:{take:u}});return n.value=c,c}finally{e(!1),o.value=!0}}function i(u){return Innoclapps.request("/products/active",u)}return{limitedNumberOfActiveProducts:n,limitedNumberOfActiveProductsRetrieved:o,limitedNumberOfProductsLoading:t,fetchProduct:a,fetchProductByName:r,retrieveLimitedNumberOfActiveProducts:s,fetchActiveProducts:i}});function Nk(e={}){return Object.assign({product_id:null,name:null,description:null,tax_rate:null,tax_label:null,unit_price:0,qty:1,discount_type:null,discount_total:0,unit:null,note:null,display_order:-1},e)}function $_e(e,t,n){return n?parseFloat(parseFloat(e))-parseFloat(parseFloat(e))/(1+parseFloat(t)/100):parseFloat(e)*(parseFloat(t)/100)}function Pk(e,t){if(e.discount_type==="fixed")return parseFloat(e.discount_total);const n=parseFloat(e.discount_total),o=parseFloat(e.unit_price),a=parseFloat(e.qty);return t?n/100*o*a:n/100*(o*a)}function Uf(e,t){const n=parseFloat(e.unit_price),o=parseFloat(e.qty);return n*o-Pk(e,t)}const C_e={width:"30%",class:"px-3 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},S_e={class:"relative w-60 sm:w-auto"},T_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},E_e={class:"w-32 sm:w-auto"},F_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},A_e={class:"w-40 sm:w-auto"},R_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},D_e={class:"w-44 sm:w-auto"},O_e={class:"flex items-center rounded-lg shadow-sm"},B_e={class:"relative"},N_e=_("div",{class:"pointer-events-none absolute inset-y-0 right-0 z-20 flex items-center pr-3",textContent:"%"},null,-1),P_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},M_e={class:"relative w-44 rounded-lg shadow-sm sm:w-auto"},V_e={class:"absolute inset-y-0 right-0 flex items-center"},L_e=["value","textContent"],q_e={class:"px-2 py-4 text-center align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},U_e={__name:"BillableFormTableProductRow",props:{modelValue:{type:Object,default:()=>({})},taxType:{required:!0,type:String},index:{required:!0,type:Number}},emits:["update:modelValue","productSelected"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{formatMoney:r}=ro(),{scriptConfig:s,setting:i}=Ne(),{limitedNumberOfActiveProducts:u,retrieveLimitedNumberOfActiveProducts:c,limitedNumberOfActiveProductsRetrieved:m,fetchActiveProducts:f,fetchProductByName:v}=Vv(),y=Pt(null),b=M(!1),w=M(n.modelValue||[]);let k=M(null);const x=O(()=>y.value||u.value);function I(){m.value||(b.value=!0,c().then(()=>b.value=!1))}function C(B,V){if(B==""){V(!1),y.value=null;return}V(!0),f({params:{q:B}}).then(({data:P})=>{y.value=P}).finally(()=>V(!1))}Je(()=>{k.value=n.modelValue||[]});const S=[{label:s("currency.iso_code"),value:"fixed"},{label:"%",value:"percent"}],T=O(()=>Uf(n.modelValue,n.taxType==="inclusive"));function E(B){return Nk({name:B,discount_type:i("discount_type"),tax_rate:i("tax_rate"),tax_label:i("tax_label")})}function $(B){return B.sku?`${B.sku}: ${B.name}`:B.name}async function F(B){if(!B){R({name:null,product_id:null});return}const V={product_id:B.id,name:B.name,description:B.description,unit_price:B.unit_price||0,unit:B.unit,tax_rate:B.tax_rate||0,tax_label:B.tax_label},P=await v(B.name);P?(V.product_id=P.id,u.value.find(z=>z.id==P.id)||u.value.unshift(P)):(Innoclapps.info(a("billable::product.will_be_added_as_new",{name:B.name})),V.product_id=null),R(V),o("productSelected",{product:B.value,index:n.index})}function R(B,V=null){let P=xI(n.modelValue,typeof B=="object"?B:{[B]:V});o("update:modelValue",P),w.value=P}return(B,V)=>{const P=d("ICustomSelect"),z=d("IFormTextarea"),H=d("IFormNumericInput"),j=d("IFormInput"),N=d("IFormSelect");return g(),D("tr",null,[_("td",C_e,[_("div",S_e,[l(P,{modelValue:h(k),"onUpdate:modelValue":V[0]||(V[0]=L=>$n(k)?k.value=L:k=L),label:"name","create-option-provider":E,"option-label":$,placeholder:B.$t("billable::product.choose_or_enter"),options:x.value,loading:b.value,truncate:"",filterable:"",taggable:"",debounce:"",onOptionSelected:F,onCleared:V[1]||(V[1]=L=>F(null)),onSearch:C,onOpen:I},null,8,["modelValue","placeholder","options","loading"]),Se(B.$slots,"after-product-select",{product:w.value,index:e.index}),ne(l(z,{class:"mt-1","model-value":w.value.description,name:"products."+e.index+".description",placeholder:B.$t("billable::product.description")+" ("+B.$t("core::app.optional")+")",rows:3,"onUpdate:modelValue":V[2]||(V[2]=L=>R({description:L}))},null,8,["model-value","name","placeholder"]),[[pe,h(k)]])])]),_("td",T_e,[_("div",E_e,[l(H,{class:"text-right","decimal-separator":".",pattern:".*",precision:2,"empty-value":1,placeholder:B.$t("billable::product.quantity"),"model-value":w.value.qty,"onUpdate:modelValue":V[3]||(V[3]=L=>R({qty:L}))},null,8,["placeholder","model-value"]),l(j,{class:"mt-1 text-right",placeholder:B.$t("billable::product.unit"),"model-value":w.value.unit,"onUpdate:modelValue":V[4]||(V[4]=L=>R({unit:L}))},null,8,["placeholder","model-value"])])]),_("td",F_e,[_("div",A_e,[l(H,{class:"text-right",placeholder:B.$t("billable::product.unit_price"),minus:!0,"model-value":w.value.unit_price,"onUpdate:modelValue":V[5]||(V[5]=L=>R({unit_price:L}))},null,8,["placeholder","model-value"])])]),ne(_("td",R_e,[_("div",D_e,[_("div",O_e,[_("div",B_e,[l(H,{class:"z-10 grow rounded-r-none !pr-8",placeholder:B.$t("billable::product.tax_percent"),precision:3,minus:!0,max:100,"model-value":w.value.tax_rate,"onUpdate:modelValue":V[6]||(V[6]=L=>R({tax_rate:L}))},null,8,["placeholder","model-value"]),N_e]),l(j,{class:"-ml-px w-16 rounded-l-none text-center focus:z-20","model-value":w.value.tax_label,"onUpdate:modelValue":V[7]||(V[7]=L=>R({tax_label:L}))},null,8,["model-value"])])])],512),[[pe,e.taxType!=="no_tax"]]),_("td",P_e,[_("div",M_e,[e.modelValue.discount_type=="fixed"?(g(),A(H,{key:0,class:"!pr-12",placeholder:B.$t("billable::product.discount_amount"),"model-value":w.value.discount_total,"onUpdate:modelValue":V[8]||(V[8]=L=>R({discount_total:L}))},null,8,["placeholder","model-value"])):(g(),A(H,{key:1,class:"!pr-12",placeholder:B.$t("billable::product.discount_percent"),max:100,precision:2,"model-value":w.value.discount_total,"onUpdate:modelValue":V[9]||(V[9]=L=>R({discount_total:L}))},null,8,["placeholder","model-value"])),_("div",V_e,[l(N,{class:"rounded-l-none bg-transparent bg-none !pl-1 !pr-2 text-center ring-0 dark:bg-transparent","model-value":w.value.discount_type,"onUpdate:modelValue":V[10]||(V[10]=L=>R({discount_type:L}))},{default:p(()=>[(g(),D(fe,null,Ie(S,L=>_("option",{key:L.value,value:L.value,textContent:Z(L.label)},null,8,L_e)),64))]),_:1},8,["model-value"])])])]),_("td",q_e,Z(h(r)(T.value)),1),Se(B.$slots,"default")])}}},j_e={class:"mb-2 mt-4 grid grid-cols-12 gap-2"},z_e={class:"col-span-8 text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-5 sm:col-start-5 sm:text-right sm:text-sm/5"},H_e=["textContent"],W_e={class:"col-span-8 text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-5 sm:col-start-5 sm:text-right sm:text-sm/5"},G_e={class:"col-span-4 text-right text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-3 sm:text-sm/5"},K_e={class:"grid grid-cols-12 gap-2"},Z_e={class:"col-span-8 text-base/5 font-semibold text-neutral-900 dark:text-neutral-100 sm:col-span-5 sm:col-start-5 sm:text-right sm:text-sm/5"},Y_e=["textContent"],X_e={__name:"BillableTotalSection",props:{taxType:{required:!0},total:{required:!0},totalDiscount:{required:!0},subtotal:{required:!0},taxes:{default:()=>[]}},setup(e){const t=e,{formatMoney:n}=ro(),o=O(()=>t.totalDiscount>0),a=O(()=>t.taxType!=="no_tax"),r=O(()=>t.taxType==="inclusive");return(s,i)=>{const u=Ve("t");return g(),D(fe,null,[_("div",j_e,[_("div",z_e,[le(Z(s.$t("billable::billable.sub_total"))+" ",1),ne(_("p",{class:"italic text-neutral-500 dark:text-neutral-300"}," ("+Z(s.$t("billable::billable.includes_discount",{amount:h(n)(e.totalDiscount)}))+") ",513),[[pe,o.value]])]),_("div",{class:"col-span-4 text-right text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-3 sm:text-sm/5",textContent:Z(h(n)(e.subtotal))},null,8,H_e)]),(g(!0),D(fe,null,Ie(e.taxes,c=>ne((g(),D("div",{key:c.key,class:"mb-2 grid grid-cols-12 gap-2"},[_("div",W_e,Z(c.label)+" ("+Z(c.rate)+"%) ",1),_("div",G_e,[_("span",null,[ne(_("span",null,null,512),[[pe,r.value],[u,"billable::billable.tax_amount_is_inclusive"]]),le(" "+Z(h(n)(c.raw_total)),1)])])])),[[pe,a.value]])),128)),_("div",K_e,[ne(_("div",Z_e,null,512),[[u,"billable::billable.total"]]),_("div",{class:"col-span-4 text-right text-base/5 font-medium text-neutral-900 dark:text-neutral-100 sm:col-span-3 sm:text-sm/5",textContent:Z(h(n)(e.total))},null,8,Y_e)])],64)}}},Q_e={class:"overflow-hidden rounded-lg border border-neutral-900/10 bg-white dark:border-white/10 dark:bg-neutral-900"},J_e={class:"touch-auto overflow-x-auto"},e2e={class:"bg-neutral-50 dark:bg-neutral-500/10"},t2e={class:"py-3 pl-4 pr-2 text-left text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},n2e={class:"p-2 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},o2e={class:"px-2 py-3 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},a2e={class:"px-2 py-3 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},r2e={class:"px-2 py-3 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},l2e={class:"px-2 py-3 text-center text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},s2e=_("th",null,null,-1),i2e={class:"bg-white dark:bg-neutral-800/20"},u2e=["colspan"],c2e={class:"bg-white dark:bg-neutral-800/20"},d2e={class:"p-2 text-right align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},m2e={class:"-mt-1.5 flex items-center justify-between space-x-1"},f2e={key:0},p2e=["colspan"],v2e={class:"relative z-auto mb-1 rounded-sm p-2"},Lv={__name:"BillableFormTableProducts",props:{products:{type:Array,default:()=>[]},removedProducts:{type:Array,default:()=>[]},taxType:{required:!0,type:String}},emits:["update:products","update:removedProducts","productSelected","productRemoved"],setup(e,{expose:t,emit:n}){const o=e,a=n,{toFixed:r}=ro(),{scriptConfig:s,setting:i}=Ne(),{limitedNumberOfActiveProductsRetrieved:u,limitedNumberOfActiveProducts:c}=Vv(),m=M(null),f=s("currency.precision"),v=M(null),y=M([]);rn(()=>{u.value=!1,c.value=[]}),$e(y,B=>{a("update:products",B),T()},{deep:!0}),$e(()=>o.products,B=>{y.value=B},{immediate:!0});const b=O(()=>o.taxType!=="no_tax"),w=O(()=>o.taxType==="inclusive"),k=O(()=>{let B=parseFloat(I.value)+parseFloat(w.value?0:S.value);return parseFloat(r(B,f))}),x=O(()=>parseFloat(r(y.value.reduce((B,V)=>B+Pk(V,w.value),0),f))),I=O(()=>parseFloat(r(y.value.reduce((B,V)=>B+Uf(V,w.value),0),f))),C=O(()=>b.value?Xr(k_e(y.value,B=>B.tax_label+B.tax_rate),"tax_rate").filter(B=>B.tax_rate>0).reduce((B,V)=>{let P={key:V.tax_label+V.tax_rate,rate:V.tax_rate,label:V.tax_label,raw_total:Vo(y.value,{tax_label:V.tax_label,tax_rate:V.tax_rate}).reduce((z,H)=>(z+=$_e(Uf(H,w.value),H.tax_rate,w.value),z),0)};return B.push(P),B},[]):[]),S=O(()=>parseFloat(r(C.value.reduce((B,V)=>B+parseFloat(r(V.raw_total,f)),0),f)));function T(){y.value.filter(B=>!B._key).forEach(B=>{B._key=$o()})}function E(B){v.value=B,ze(()=>m.value.focus())}function $(B){let V=y.value[B];y.value.splice(B,1),v.value===B&&(v.value=null),a("productRemoved",{product:V,index:B}),V.id&&a("update:removedProducts",[...o.removedProducts,V.id])}function F(){y.value.push(Nk({discount_type:i("discount_type"),tax_rate:i("tax_rate"),tax_label:i("tax_label")})),R()}function R(){y.value.forEach((B,V)=>B.display_order=V+1)}return t({insertNewLine:F}),(B,V)=>{const P=d("IDropdownItem"),z=d("IDropdownMinimal"),H=d("Icon"),j=d("IFormLabel"),N=d("IFormTextarea"),L=d("SortableDraggable"),U=d("ILink"),ee=Ve("t");return g(),D(fe,null,[_("div",Q_e,[_("div",J_e,[l(L,Ue({modelValue:y.value,"onUpdate:modelValue":V[1]||(V[1]=G=>y.value=G),tag:"table",class:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-500/20",handle:".product-draggable-handle","item-key":G=>G._key},B.$draggable.common,{onEnd:R,onStart:V[2]||(V[2]=G=>v.value=null)}),{header:p(()=>[_("thead",e2e,[_("tr",null,[ne(_("th",t2e,null,512),[[ee,"billable::product.table_heading"]]),ne(_("th",n2e,null,512),[[ee,"billable::product.qty"]]),ne(_("th",o2e,null,512),[[ee,"billable::product.unit_price"]]),ne(_("th",a2e,null,512),[[pe,b.value],[ee,"billable::product.tax"]]),ne(_("th",r2e,null,512),[[ee,"billable::product.discount"]]),ne(_("th",l2e,null,512),[[ee,"billable::product.amount"]]),s2e])]),ne(_("tbody",i2e,[_("tr",null,[ne(_("td",{class:"p-3 text-center text-sm text-neutral-900 dark:text-neutral-200",colspan:b.value?6:5},null,8,u2e),[[ee,"billable::product.resource_has_no_products"]])])],512),[[pe,!y.value.length]])]),item:p(({element:G,index:W})=>[_("tbody",c2e,[l(U_e,{modelValue:y.value[W],"onUpdate:modelValue":ae=>y.value[W]=ae,"tax-type":e.taxType,index:W,onProductSelected:V[0]||(V[0]=ae=>B.$emit("productSelected",ae))},{"after-product-select":p(ae=>[Se(B.$slots,"after-product-select",en(un(ae)))]),default:p(()=>[_("td",d2e,[_("div",m2e,[l(z,{class:"mt-2",horizontal:"",small:""},{default:p(()=>[ne(l(P,{text:B.$t("core::app.add_note"),onClick:ae=>E(W)},null,8,["text","onClick"]),[[pe,(v.value===null||v.value!==W)&&!y.value[W].note]]),l(P,{text:B.$t("core::app.remove"),onClick:ae=>$(W)},null,8,["text","onClick"])]),_:2},1024),l(H,{icon:"Selector",class:"product-draggable-handle mt-2 size-5 cursor-move text-neutral-500"})])])]),_:2},1032,["modelValue","onUpdate:modelValue","tax-type","index"]),v.value===W||G.note||y.value[W].note?(g(),D("tr",f2e,[_("td",{class:"px-1",colspan:b.value?7:6},[_("div",v2e,[l(j,{class:"mb-1",for:"product-note-"+W},{default:p(()=>[le(Z(B.$t("core::app.note_is_private")),1)]),_:2},1032,["for"]),l(N,{ref_key:"productNoteRef",ref:m,modelValue:y.value[W].note,"onUpdate:modelValue":ae=>y.value[W].note=ae,rows:"2",class:"bg-warning-100 ring-warning-300 focus:ring-warning-400 dark:bg-warning-200 dark:text-neutral-800 dark:focus:ring-warning-400"},null,8,["modelValue","onUpdate:modelValue"])])],8,p2e)])):K("",!0)])]),_:3},16,["modelValue","item-key"])])]),l(U,{class:"mt-3 inline-block font-medium",onClick:F},{default:p(()=>[le(" + "+Z(B.$t("core::app.insert_new_line")),1)]),_:1}),l(X_e,{"tax-type":e.taxType,total:k.value,"total-discount":x.value,subtotal:I.value,taxes:C.value},null,8,["tax-type","total","total-discount","subtotal","taxes"])],64)}}},h2e={class:"flex flex-col space-y-1 sm:flex-row sm:space-x-2 sm:space-y-0"},qv={__name:"BillableFormTaxTypes",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue"),{t:n}=Ee(),{scriptConfig:o}=Ne(),a=o("taxes.types"),r=O(()=>a.map(s=>({value:s,label:n("billable::billable.tax_types."+s)})));return(s,i)=>{const u=d("IFormRadio"),c=d("IFormRadioLabel"),m=d("IFormRadioField");return g(),D("div",h2e,[(g(!0),D(fe,null,Ie(r.value,f=>(g(),A(m,{key:f.value},{default:p(()=>[l(u,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=v=>t.value=v),name:"tax_type",value:f.value},null,8,["modelValue","value"]),l(c,{text:f.label},null,8,["text"])]),_:2},1024))),128))])}}},$d={__name:"BillableFormProductsModal",props:{billable:Object,visible:Boolean,prefetch:Boolean,resourceName:{required:!0,type:String},resourceId:{required:!0,type:Number}},emits:["saved","hidden"],setup(e,{emit:t}){const n=e,o=t,{form:a}=Ze({products:[],removed_products:[]}),r=M(null),s=M(!1);function i(){o("hidden"),s.value=!1}async function u(){let f=await a.post(`${n.resourceName}/${n.resourceId}/billable`);o("saved",f),Innoclapps.dialog().hide("productsModal")}async function c(){let f=structuredClone(n.prefetch?await m():n.billable||{});a.set("tax_type",f.tax_type||"exclusive"),a.set("products",f.products||[]),s.value=!0}La(s,()=>{a.products.length===0&&ze(r.value.insertNewLine)},{flush:"post"});async function m(){let{data:f}=await Innoclapps.request(`/${n.resourceName}/${n.resourceId}/billable`);return f}return(f,v)=>{const y=d("IFormError"),b=d("IOverlay"),w=d("IModal");return g(),A(w,{id:"productsModal",size:"xxl","ok-text":f.$t("core::app.save"),"ok-disabled":h(a).busy,title:f.$t("billable::product.manage"),visible:e.visible,"static-backdrop":"",onOk:u,onHidden:i,onShow:c},{default:p(()=>[l(b,{show:!s.value},{default:p(()=>[l(qv,{modelValue:h(a).tax_type,"onUpdate:modelValue":v[0]||(v[0]=k=>h(a).tax_type=k),class:"mb-4 mt-6"},null,8,["modelValue"]),s.value?(g(),A(Lv,{key:0,ref_key:"productsRef",ref:r,products:h(a).products,"onUpdate:products":v[1]||(v[1]=k=>h(a).products=k),"removed-products":h(a).removed_products,"onUpdate:removedProducts":v[2]||(v[2]=k=>h(a).removed_products=k),"tax-type":h(a).tax_type},{"after-product-select":p(({index:k})=>[l(y,{error:h(a).getError("products."+k+".name")},null,8,["error"])]),_:1},8,["products","removed-products","tax-type"])):K("",!0)]),_:1},8,["show"])]),_:1},8,["ok-text","ok-disabled","title","visible"])}}},g2e={key:0,class:"ml-1 text-xs text-neutral-500 dark:text-neutral-400"},b2e=Object.assign({inheritAttrs:!1},{__name:"BillableAmountField",props:["resource","resourceName","resourceId","field","isFloating"],emits:["updated"],setup(e,{emit:t}){const n=e,o=t,a=O(()=>n.resource.products_count>0),r=M(!1);function s(u){o("updated",Object.assign({},n.resource,{billable:u,[n.field.attribute]:u.total,products_count:u.products.length}))}function i(u){u&&u.preventDefault(),r.value=!0}return(u,c)=>{const m=d("Icon"),f=d("ILink"),v=d("DetailNumericField"),y=Ve("t");return g(),D(fe,null,[r.value?(g(),A($d,{key:0,"resource-name":e.resourceName,"resource-id":e.resourceId,visible:"",prefetch:"",onSaved:s,onHidden:c[0]||(c[0]=b=>r.value=!1)},null,8,["resource-name","resource-id"])):K("",!0),l(v,Ue(u.$attrs,{"resource-name":e.resourceName,"resource-id":e.resourceId,"is-floating":e.isFloating,field:{...e.field,readonly:a.value},resource:e.resource,"edit-action":e.field.onlyProducts||a.value?i:void 0,onUpdated:c[1]||(c[1]=b=>u.$emit("updated",b))}),{"numeric-field":p(({formattedValue:b})=>[le(Z(b)+" ",1),a.value?(g(),D("span",g2e," ("+Z(u.$t("billable::product.count",{count:e.resource.products_count}))+") ",1)):K("",!0)]),"after-inline-edit-form-fields":p(({hidePopover:b})=>[l(f,{class:"inline-flex items-center",onClick:w=>(i(),b())},{default:p(()=>[ne(_("span",null,null,512),[[y,"billable::product.manage"]]),l(m,{icon:"Window",class:"ml-2 mt-px size-4"})]),_:2},1032,["onClick"])]),_:1},16,["resource-name","resource-id","is-floating","field","resource","edit-action"])],64)}}}),y2e={key:0,class:"ml-1 text-xs text-neutral-500 dark:text-neutral-400"},_2e=Object.assign({inheritAttrs:!1},{__name:"BillableAmountField",props:["resourceName","resourceId","row","field"],emits:["reload"],setup(e,{emit:t}){const n=e,o=t,a=M(!1),r=O(()=>n.row.products_count>0);function s(u){u&&u.preventDefault(),a.value=!0}function i(){o("reload")}return(u,c)=>{const m=d("Icon"),f=d("ILink"),v=d("IndexNumericField"),y=Ve("t");return g(),D(fe,null,[a.value?(g(),A($d,{key:0,"resource-name":e.resourceName,"resource-id":e.resourceId,visible:"",prefetch:"",onSaved:i,onHidden:c[0]||(c[0]=b=>a.value=!1)},null,8,["resource-name","resource-id"])):K("",!0),l(v,Ue(u.$attrs,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field,"edit-action":e.field.onlyProducts||r.value?s:void 0,onReload:c[1]||(c[1]=b=>u.$emit("reload"))}),{"numeric-field":p(({formattedValue:b})=>[le(Z(b)+" ",1),r.value?(g(),D("span",y2e," ("+Z(u.$t("billable::product.count",{count:e.row.products_count}))+") ",1)):K("",!0)]),"after-inline-edit-form-fields":p(({hidePopover:b})=>[l(f,{class:"flex items-center",onClick:w=>(s(),b())},{default:p(()=>[ne(_("span",null,null,512),[[y,"billable::product.manage"]]),l(m,{icon:"Window",class:"ml-2 mt-px size-4"})]),_:2},1032,["onClick"])]),_:1},16,["resource-name","resource-id","row","field","edit-action"])],64)}}}),I2e={__name:"ProductsCreate",emits:["created","restored"],setup(e,{emit:t}){const n=t,o=Innoclapps.resourceName("products"),{t:a}=Ee(),r=_t(),{fields:s,hasFields:i,getCreateFields:u}=yn(),{form:c}=Ze(),{createResource:m}=Dt(o),f=M(null),v=M({byName:!1});ma(()=>c.name,C=>{if(!C){f.value=null;return}Innoclapps.request("/trashed/products/search",{params:{q:C,search_fields:"name:="}}).then(({data:S})=>{f.value=S.length>0?S[0]:null})},{debounce:500});function y(){k().then(()=>r.back())}function b(){k().then(()=>c.reset())}function w(){k().then(()=>r.push("/products"))}async function k(){try{let C=await m(c);return n("created",C),Innoclapps.success(a("billable::product.created")),C}catch(C){return C.isValidationError()&&Innoclapps.error(a("core::app.form_validation_failed"),3e3),Promise.reject(C)}}async function x(C,S){await Innoclapps.request().post(`/trashed/products/${C}`),v.value[S]=!0,n("restored",f)}async function I(){const C=await u(o);s.value=C}return I(),(C,S)=>{const T=d("FieldsPlaceholder"),E=d("IAlertBody"),$=d("IButton"),F=d("IAlertActions"),R=d("IAlert"),B=d("FormFields"),V=d("IDropdownItem"),P=d("IDropdownMenu"),z=d("IExtendedDropdown"),H=d("ISlideover");return g(),A(H,{id:"createProductModal",title:C.$t("billable::product.create"),visible:"","static-backdrop":"",form:"",onSubmit:y,onHidden:C.$router.back},{"modal-ok":p(()=>[l(z,{type:"submit",disabled:h(c).busy,loading:h(c).busy,text:C.$t("core::app.create")},{default:p(()=>[l(P,{class:"min-w-48"},{default:p(()=>[l(V,{text:C.$t("core::app.create_and_add_another"),onClick:b},null,8,["text"]),l(V,{text:C.$t("core::app.create_and_go_to_list"),onClick:w},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])]),default:p(()=>[h(i)?K("",!0):(g(),A(T,{key:0})),l(B,{fields:h(s),form:h(c),"resource-name":h(o),"is-floating":"","focus-first":"",onUpdateFieldValue:S[3]||(S[3]=j=>h(c).fill(j.attribute,j.value)),onSetInitialValue:S[4]||(S[4]=j=>h(c).set(j.attribute,j.value))},bn({_:2},[f.value!==null?{name:"after-name-field",fn:p(()=>[l(R,{class:"mb-3",dismissible:"",onDismissed:S[2]||(S[2]=j=>{v.value.byName=!1,f.value=null})},{default:p(({variant:j})=>[l(E,null,{default:p(()=>[le(Z(C.$t("billable::product.exists_in_trash_by_name")),1)]),_:1}),l(F,null,{default:p(()=>[v.value.byName?K("",!0):(g(),A($,{key:0,variant:j,text:C.$t("core::app.soft_deletes.restore"),ghost:"",onClick:S[0]||(S[0]=N=>x(f.value.id,"byName"))},null,8,["variant","text"])),v.value.byName?(g(),A($,{key:1,variant:j,text:C.$t("core::app.view_record"),ghost:"",onClick:S[1]||(S[1]=N=>C.$router.replace({name:"view-product",params:{id:f.value.id}}))},null,8,["variant","text"])):K("",!0)]),_:2},1024)]),_:1})]),key:"0"}:void 0]),1032,["fields","form","resource-name"])]),_:1},8,["title","onHidden"])}}},A1={__name:"ProductsEdit",emits:["updated"],setup(e,{emit:t}){const n=t,o=Innoclapps.resourceName("products"),{t:a}=Ee(),r=_t(),s=It(),{fetchProduct:i}=Vv(),{fields:u,hasFields:c,getUpdateFields:m,hydrateFields:f}=yn(),{form:v}=Ze(),{updateResource:y}=Dt(o),b=M(null);async function w(){let x=await y(v,s.params.id);n("updated",x),Innoclapps.success(a("billable::product.updated")),r.back()}async function k(){const[x,I]=await Promise.all([i(s.params.id),m(o,s.params.id)]);u.value=I,f(x),b.value=x}return k(),(x,I)=>{const C=d("FieldsPlaceholder"),S=d("FormFields"),T=d("ISlideover");return g(),A(T,{id:"editProductModal","ok-disabled":h(v).busy||h(c)&&!b.value.authorizations.update,"ok-loading":h(v).busy,"ok-text":x.$t("core::app.save"),title:x.$t("billable::product.edit"),visible:"","static-backdrop":"",form:"",onHidden:x.$router.back,onSubmit:w},{default:p(()=>[h(c)?K("",!0):(g(),A(C,{key:0})),l(S,{fields:h(u),form:h(v),"resource-name":h(o),"resource-id":x.$route.params.id,"is-floating":"",onUpdateFieldValue:I[0]||(I[0]=E=>h(v).fill(E.attribute,E.value)),onSetInitialValue:I[1]||(I[1]=E=>h(v).set(E.attribute,E.value))},null,8,["fields","form","resource-name","resource-id"])]),_:1},8,["ok-disabled","ok-loading","ok-text","title","onHidden"])}}},R1="products",w2e={__name:"ProductsIndex",setup(e){const t=Innoclapps.resourceName("products"),{t:n}=Ee(),{reloadTable:o,customizeTable:a}=eo(R1),{deleteResource:r,cloneResource:s}=Dt(t),i=_t(),u=M(!0);async function c(f){const v=await s(f);o(),i.push({name:"edit-product",params:{id:v.id}})}async function m(f){await r(f),o(),Innoclapps.success(n("billable::product.deleted"))}return(f,v)=>{const y=d("NavbarSeparator"),b=d("IDropdownItem"),w=d("IDropdownMinimal"),k=d("IButton"),x=d("NavbarItems"),I=d("ITextDark"),C=d("ITableRowAction"),S=d("ITableRowActions"),T=d("ResourceTable"),E=d("RouterView"),$=d("MainLayout");return g(),A($,null,{actions:p(()=>[l(y,{class:"hidden lg:block"}),l(x,null,{default:p(()=>[l(w,{placement:u.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(b,{icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:h(t)}},text:f.$t("core::import.import")},null,8,["to","text"]),f.$gate.userCan("export products")?(g(),A(b,{key:0,icon:"DocumentDownload",text:f.$t("core::app.export.export"),onClick:v[0]||(v[0]=F=>f.$dialog.show("export-modal"))},null,8,["text"])):K("",!0),l(b,{icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:h(t)}},text:f.$t("core::app.soft_deletes.trashed")},null,8,["to","text"]),l(b,{icon:"Cog",text:f.$t("core::table.list_settings"),onClick:h(a)},null,8,["text","onClick"])]),_:1},8,["placement"]),ne(l(k,{variant:"primary",icon:"PlusSolid",to:{name:"create-product"},text:f.$t("billable::product.create")},null,8,["text"]),[[pe,!u.value]])]),_:1})]),default:p(()=>[l(T,{"resource-name":h(t),"table-id":R1,"empty-state":{to:{name:"create-product"},title:f.$t("billable::product.empty_state.title"),buttonText:f.$t("billable::product.create"),description:f.$t("billable::product.empty_state.description"),secondButtonText:f.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:h(t)}}},onLoaded:v[1]||(v[1]=F=>u.value=F.isPreEmpty)},{header:p(({total:F})=>[l(I,{class:"font-medium",text:f.$t("billable::product.count",{count:F})},null,8,["text"])]),actions:p(({row:F})=>[l(S,null,{default:p(()=>[l(C,{icon:"Duplicate",text:f.$t("core::app.clone"),onClick:R=>c(F.id)},null,8,["text","onClick"]),F.authorizations.delete?(g(),A(C,{key:0,icon:"Trash",text:f.$t("core::app.delete"),onClick:R=>f.$confirm(()=>m(F.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),_:1},8,["resource-name","empty-state"]),l(Hi,{"url-path":"/products/export","resource-name":h(t),title:f.$t("billable::product.export")},null,8,["resource-name","title"]),l(E,{onCreated:h(o),onRestored:h(o),onUpdated:h(o)},null,8,["onCreated","onRestored","onUpdated"])]),_:1})}}},x2e=[{path:"/products",name:"product-index",component:w2e,meta:{title:at("billable::product.products")},children:[{path:"create",name:"create-product",component:I2e,meta:{title:at("billable::product.create")}},{path:":id",name:"view-product",component:A1},{path:":id/edit",name:"edit-product",component:A1}]}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("DetailBillableAmountField",b2e),e.component("IndexBillableAmountField",_2e),x2e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"products",component:h_e,name:"settings-products",meta:{title:at("billable::product.products")}})});const Wi=rs(()=>{const{setLoading:e,isLoading:t}=An(),n=M([]),o=O(()=>Vt(n.value,"name")),a=O(()=>Vt(n.value,["is_default","name"],["desc","asc"]));y();function r(b){return n.value.findIndex(w=>w.id==b)}function s(b){n.value.splice(r(b),1)}function i(b){b.is_default&&v(),n.value.push(b)}function u(b,w){w.is_default&&v(),n.value[r(b)]=w}function c(b,w){w.is_default&&v();const k=r(b);n.value[k]=Object.assign(n.value[k],w)}async function m(b,w){const{data:k}=await Innoclapps.request(`/brands/${b}`,w);return k}async function f(b){await Innoclapps.request().delete(`/brands/${b}`),s(b)}function v(){n.value.forEach(b=>{b.is_default=!1})}function y(b){e(!0),Innoclapps.request("/brands",b).then(({data:w})=>n.value=w).finally(()=>e(!1))}return{brands:n,brandsByName:o,orderedBrands:a,brandsAreBeingFetched:t,addBrand:i,removeBrand:s,setBrand:u,patchBrand:c,fetchBrands:y,fetchBrand:m,deleteBrand:f,unmarkAllAsDefault:v}}),k2e={class:"px-6"},$2e={__name:"BrandsIndex",setup(e){const{orderedBrands:t,brandsAreBeingFetched:n,deleteBrand:o}=Wi();return(a,r)=>{const s=d("ICardHeading"),i=d("IButton"),u=d("ICardActions"),c=d("ICardHeader"),m=d("ITableHeader"),f=d("ITableRow"),v=d("ITableHead"),y=d("ITableCell"),b=d("ILink"),w=d("IBadge"),k=d("ITableRowAction"),x=d("ITableRowActions"),I=d("ITableBody"),C=d("ITable"),S=d("ICard");return g(),D(fe,null,[l(c,null,{default:p(()=>[l(s,{text:a.$t("brands::brand.brands")},null,8,["text"]),l(u,null,{default:p(()=>[l(i,{variant:"primary",icon:"PlusSolid",to:{name:"create-brand"},text:a.$t("brands::brand.create")},null,8,["text"])]),_:1})]),_:1}),l(S,{overlay:h(n)},{default:p(()=>[_("div",k2e,[l(C,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(v,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(f,null,{default:p(()=>[l(m,{width:"5%"},{default:p(()=>[le(Z(a.$t("core::app.id")),1)]),_:1}),l(m,null,{default:p(()=>[le(Z(a.$t("brands::brand.brand")),1)]),_:1}),l(m,{width:"8%"})]),_:1})]),_:1}),l(I,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(t),T=>(g(),A(f,{key:T.id},{default:p(()=>[l(y,null,{default:p(()=>[le(Z(T.id),1)]),_:2},1024),l(y,null,{default:p(()=>[l(b,{class:"font-medium",to:{name:"edit-brand",params:{id:T.id}},text:T.name},null,8,["to","text"]),T.is_default?(g(),A(w,{key:0,class:"ml-2",variant:"primary",text:a.$t("core::app.is_default")},null,8,["text"])):K("",!0)]),_:2},1024),l(y,null,{default:p(()=>[l(x,null,{default:p(()=>[l(k,{icon:"PencilAlt",to:{name:"edit-brand",params:{id:T.id}},text:a.$t("core::app.edit")},null,8,["to","text"]),l(k,{icon:"Trash",text:a.$t("core::app.delete"),onClick:E=>a.$confirm(()=>h(o)(T.id))},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["overlay"])],64)}}},C2e={__name:"SettingsBrands",setup(e){return(t,n)=>(g(),A($2e))}},S2e={__name:"BrandsCreate",setup(e){const{t}=Ee(),n=_t(),{addBrand:o}=Wi(),{form:a}=Ze({name:"",display_name:"",is_default:!1,config:{primary_color:"#4f46e5"},visibility_group:{type:"all",depends_on:[]}});function r(){a.post("/brands").then(s=>{o(s),Innoclapps.success(t("brands::brand.created")),n.push({name:"edit-brand",params:{id:s.id}})})}return(s,i)=>{const u=d("IFormInput"),c=d("IFormError"),m=d("IFormGroup"),f=d("IColorSwatch"),v=d("IFormCheckbox"),y=d("IFormCheckboxLabel"),b=d("IFormCheckboxField"),w=d("IModal");return g(),A(w,{size:"sm","ok-text":s.$t("core::app.create"),"ok-disabled":h(a).busy,title:s.$t("brands::brand.create"),visible:"","static-backdrop":"",form:"",onSubmit:r,onHidden:s.$router.back,onShown:i[7]||(i[7]=()=>s.$refs.inputNameRef.focus())},{default:p(()=>[l(m,{"label-for":"name",label:s.$t("brands::brand.form.name"),required:""},{default:p(()=>[l(u,{id:"name",ref:"inputNameRef",modelValue:h(a).name,"onUpdate:modelValue":i[0]||(i[0]=k=>h(a).name=k),onChange:i[1]||(i[1]=k=>h(a).display_name?void 0:h(a).display_name=k)},null,8,["modelValue"]),l(c,{error:h(a).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(m,{"label-for":"display_name",label:s.$t("brands::brand.form.display_name"),required:""},{default:p(()=>[l(u,{id:"display_name",modelValue:h(a).display_name,"onUpdate:modelValue":i[2]||(i[2]=k=>h(a).display_name=k)},null,8,["modelValue"]),l(c,{error:h(a).getError("display_name")},null,8,["error"])]),_:1},8,["label"]),l(m,{label:s.$t("brands::brand.form.primary_color")},{default:p(()=>[l(f,{modelValue:h(a).config.primary_color,"onUpdate:modelValue":i[3]||(i[3]=k=>h(a).config.primary_color=k),swatches:s.$scriptConfig("favourite_colors")},null,8,["modelValue","swatches"]),l(c,{error:h(a).getError("config.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(m,null,{default:p(()=>[l(b,null,{default:p(()=>[l(v,{checked:h(a).is_default,"onUpdate:checked":i[4]||(i[4]=k=>h(a).is_default=k)},null,8,["checked"]),l(y,{text:s.$t("brands::brand.form.is_default")},null,8,["text"])]),_:1}),l(c,{error:h(a).getError("is_default")},null,8,["error"])]),_:1}),l(m,{class:"mt-4"},{default:p(()=>[l(Id,{type:h(a).visibility_group.type,"onUpdate:type":i[5]||(i[5]=k=>h(a).visibility_group.type=k),dependsOn:h(a).visibility_group.depends_on,"onUpdate:dependsOn":i[6]||(i[6]=k=>h(a).visibility_group.depends_on=k)},null,8,["type","dependsOn"])]),_:1})]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},T2e={class:"mb-1 flex justify-between"},er={__name:"TranslateableLabel",props:["labelFor","label","locale"],emits:["update:locale"],setup(e){const{locales:t}=Ne();return(n,o)=>{const a=d("IFormLabel"),r=d("IDropdownButton"),s=d("IDropdownItem"),i=d("IDropdownMenu"),u=d("IDropdown");return g(),D("div",T2e,[l(a,{for:e.labelFor,label:e.label},null,8,["for","label"]),l(u,null,{default:p(()=>[l(r,{text:e.locale,basic:"",small:""},null,8,["text"]),l(i,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(t),c=>(g(),A(s,{key:c,text:c,active:c===e.locale,condensed:"",onClick:m=>n.$emit("update:locale",c)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])}}},E2e=["src"],F2e=["src"],A2e={__name:"BrandsEdit",setup(e){const{t}=Ee(),n=It(),{scriptConfig:o,currentUser:a}=Ne(),{brands:r,setBrand:s,fetchBrand:i,patchBrand:u}=Wi(),c=M(!1),m=M(null),f=o("favourite_colors"),v=o("contentbuilder.fonts"),y=uo({documentSendMailSubject:a.value.locale,documentSendMailMessage:a.value.locale,documentSendMailButton:a.value.locale,documentSignedMailSubject:a.value.locale,documentSignedMailMessage:a.value.locale,documentSignedThankyouMessage:a.value.locale,documentAcceptedThankyouMessage:a.value.locale,signatureBoundText:a.value.locale}),{form:b}=Ze({visibility_group:{type:"all",depends_on:[]}}),w=O(()=>v.map(E=>E["font-family"])),k=O(()=>r.value.length===1&&m.value.is_default===!1?!0:r.value.length>1&&m.value.is_default===!1);function x(E){i(E,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}}).then($=>{let F=$;b.set({name:F.name,display_name:F.display_name,config:F.config,is_default:F.is_default}),F.visibility_group&&b.set("visibility_group",F.visibility_group),m.value=F}).finally(()=>c.value=!0)}function I(){b.put(`/brands/${m.value.id}`,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}}).then(E=>{m.value=E,s(E.id,E),Innoclapps.success(t("brands::brand.updated"))}).catch(E=>{E.isValidationError()&&Innoclapps.error(t("core::app.form_validation_failed_with_sections"),3e3)})}function C(E){Innoclapps.request().delete(`/brands/${m.value.id}/logo/${E}`).then(()=>{T(E,null)})}function S(E,$){T($,E.path)}function T(E,$){m.value["logo_"+E]=$,m.value["logo_"+E+"_url"]=$,u(m.value.id,{["logo_"+E]:$,["logo_"+E+"_url"]:$})}return x(n.params.id),(E,$)=>{const F=d("ICardHeading"),R=d("ICardHeader"),B=d("ITab"),V=d("ITabList"),P=d("IFormCheckbox"),z=d("IFormCheckboxLabel"),H=d("IFormCheckboxField"),j=d("IFormError"),N=d("IFormGroup"),L=d("IFormInput"),U=d("IColorSwatch"),ee=d("ITabPanel"),G=d("CropsAndUploadsImage"),W=d("IText"),ae=d("ITextDisplay"),ue=d("Editor"),ce=d("ICustomSelect"),oe=d("IFormTextarea"),ie=d("ITabPanels"),Q=d("ITabGroup"),se=d("IButton"),me=d("ICardFooter"),xe=d("ICard");return g(),D(fe,null,[l(R,null,{default:p(()=>[l(F,{text:E.$t("brands::brand.update")},null,8,["text"])]),_:1}),l(xe,{as:"form",overlay:!c.value,onSubmit:ot(I,["prevent"])},{default:p(()=>[c.value?(g(),A(Q,{key:0},{default:p(()=>[l(V,{class:"sm:px-1"},{default:p(()=>[l(B,{title:E.$t("brands::brand.form.sections.general")},null,8,["title"]),l(B,{title:E.$t("brands::brand.form.sections.navigation")},null,8,["title"]),l(B,{title:E.$t("brands::brand.form.sections.email")},null,8,["title"]),l(B,{title:E.$t("brands::brand.form.sections.thank_you")},null,8,["title"]),l(B,{title:E.$t("brands::brand.form.sections.pdf")},null,8,["title"]),l(B,{title:E.$t("brands::brand.form.sections.signature")},null,8,["title"])]),_:1}),l(ie,{class:"px-4 sm:px-6"},{default:p(()=>[l(ee,null,{default:p(()=>[k.value?(g(),A(N,{key:0,class:"mb-6"},{default:p(()=>[l(H,null,{default:p(()=>[l(P,{checked:h(b).is_default,"onUpdate:checked":$[0]||($[0]=de=>h(b).is_default=de)},null,8,["checked"]),l(z,{text:E.$t("brands::brand.form.is_default")},null,8,["text"])]),_:1}),l(j,{error:h(b).getError("is_default")},null,8,["error"])]),_:1})):K("",!0),l(N,{"label-for":"name",label:E.$t("brands::brand.form.name"),required:""},{default:p(()=>[l(L,{id:"name",modelValue:h(b).name,"onUpdate:modelValue":$[1]||($[1]=de=>h(b).name=de)},null,8,["modelValue"]),l(j,{error:h(b).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(N,{"label-for":"display_name",label:E.$t("brands::brand.form.display_name"),required:""},{default:p(()=>[l(L,{id:"display_name",modelValue:h(b).display_name,"onUpdate:modelValue":$[2]||($[2]=de=>h(b).display_name=de)},null,8,["modelValue"]),l(j,{error:h(b).getError("display_name")},null,8,["error"])]),_:1},8,["label"]),l(N,{label:E.$t("brands::brand.form.primary_color")},{default:p(()=>[l(U,{modelValue:h(b).config.primary_color,"onUpdate:modelValue":$[3]||($[3]=de=>h(b).config.primary_color=de),swatches:h(f)},null,8,["modelValue","swatches"]),l(j,{error:h(b).getError("config.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(N,{class:"mt-4"},{default:p(()=>[l(Id,{type:h(b).visibility_group.type,"onUpdate:type":$[4]||($[4]=de=>h(b).visibility_group.type=de),dependsOn:h(b).visibility_group.depends_on,"onUpdate:dependsOn":$[5]||($[5]=de=>h(b).visibility_group.depends_on=de)},null,8,["type","dependsOn"])]),_:1})]),_:1}),l(ee,null,{default:p(()=>[l(N,{class:"mb-5 max-w-xl",label:E.$t("brands::brand.form.upload_logo")},{default:p(()=>[l(G,{name:"logo_view","upload-url":`${E.$scriptConfig("apiURL")}/brands/${m.value.id}/logo/view`,image:m.value.logo_view_url,"show-delete":!!m.value.logo_view,"cropper-options":{aspectRatio:null},"choose-text":h(b).logo_view?E.$t("core::app.change"):E.$t("core::settings.choose_logo"),onCleared:$[6]||($[6]=de=>C("view")),onSuccess:$[7]||($[7]=de=>S(de,"view"))},{image:p(({src:de})=>[_("img",{class:"h-8 w-auto",src:de},null,8,E2e)]),_:1},8,["upload-url","image","show-delete","choose-text"]),l(W,{class:"mt-4",text:E.$t("brands::brand.form.navigation.upload_logo_info")},null,8,["text"])]),_:1},8,["label"]),l(N,{label:E.$t("brands::brand.form.navigation.background_color")},{default:p(()=>[l(U,{modelValue:h(b).config.navigation.background_color,"onUpdate:modelValue":$[8]||($[8]=de=>h(b).config.navigation.background_color=de),swatches:h(f)},null,8,["modelValue","swatches"]),l(j,{error:h(b).getError("config.navigation.background_color")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(ee,null,{default:p(()=>[l(N,{class:"mb-5 max-w-xl",label:E.$t("brands::brand.form.upload_logo")},{default:p(()=>[l(G,{name:"logo_mail","upload-url":`${E.$scriptConfig("apiURL")}/brands/${m.value.id}/logo/mail`,image:m.value.logo_mail_url,"show-delete":!!m.value.logo_mail,"cropper-options":{aspectRatio:null},"choose-text":h(b).logo_mail?E.$t("core::app.change"):E.$t("core::settings.choose_logo"),onCleared:$[9]||($[9]=de=>C("mail")),onSuccess:$[10]||($[10]=de=>S(de,"mail"))},{image:p(({src:de})=>[_("img",{class:"h-8 w-auto",src:de},null,8,F2e)]),_:1},8,["upload-url","image","show-delete","choose-text"]),l(W,{class:"mt-4",text:E.$t("brands::brand.form.email.upload_logo_info")},null,8,["text"])]),_:1},8,["label"]),l(ae,{class:"mb-4",text:E.$t("brands::brand.form.document.send.info")},null,8,["text"]),l(N,{"label-for":"document_mail_subject",label:E.$t("brands::brand.form.document.send.subject")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentSendMailSubject,"onUpdate:locale":$[11]||($[11]=Y=>y.documentSendMailSubject=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(L,{id:"document_mail_subject",modelValue:h(b).config.document.mail_subject[y.documentSendMailSubject],"onUpdate:modelValue":$[12]||($[12]=de=>h(b).config.document.mail_subject[y.documentSendMailSubject]=de)},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.mail_subject")},null,8,["error"])]),_:1},8,["label"]),l(N,{label:E.$t("brands::brand.form.document.send.message")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentSendMailMessage,"onUpdate:locale":$[13]||($[13]=Y=>y.documentSendMailMessage=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(ue,{modelValue:h(b).config.document.mail_message[y.documentSendMailMessage],"onUpdate:modelValue":$[14]||($[14]=de=>h(b).config.document.mail_message[y.documentSendMailMessage]=de),"with-image":!1,"absolute-urls":""},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.mail_message")},null,8,["error"])]),_:1},8,["label"]),l(N,{"label-for":"document_mail_button_text",label:E.$t("brands::brand.form.document.send.button_text")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentSendMailButton,"onUpdate:locale":$[15]||($[15]=Y=>y.documentSendMailButton=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(L,{id:"document_mail_button_text",modelValue:h(b).config.document.mail_button_text[y.documentSendMailButton],"onUpdate:modelValue":$[16]||($[16]=de=>h(b).config.document.mail_button_text[y.documentSendMailButton]=de)},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.mail_button_text")},null,8,["error"])]),_:1},8,["label"]),l(ae,{class:"mb-4 mt-6",text:E.$t("brands::brand.form.document.sign.info")},null,8,["text"]),l(N,{"label-for":"signed_mail_subject",label:E.$t("brands::brand.form.document.sign.subject")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentSignedMailSubject,"onUpdate:locale":$[17]||($[17]=Y=>y.documentSignedMailSubject=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(L,{id:"signed_mail_subject",modelValue:h(b).config.document.signed_mail_subject[y.documentSignedMailSubject],"onUpdate:modelValue":$[18]||($[18]=de=>h(b).config.document.signed_mail_subject[y.documentSignedMailSubject]=de)},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.signed_mail_subject")},null,8,["error"])]),_:1},8,["label"]),l(N,{label:E.$t("brands::brand.form.document.sign.message")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentSignedMailMessage,"onUpdate:locale":$[19]||($[19]=Y=>y.documentSignedMailMessage=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(ue,{modelValue:h(b).config.document.signed_mail_message[y.documentSignedMailMessage],"onUpdate:modelValue":$[20]||($[20]=de=>h(b).config.document.signed_mail_message[y.documentSignedMailMessage]=de),"with-image":!1,"absolute-urls":""},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.signed_mail_message")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(ee,null,{default:p(()=>[l(N,{label:E.$t("brands::brand.form.document.sign.after_sign_message")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentSignedThankyouMessage,"onUpdate:locale":$[21]||($[21]=Y=>y.documentSignedThankyouMessage=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(ue,{modelValue:h(b).config.document.signed_thankyou_message[y.documentSignedThankyouMessage],"onUpdate:modelValue":$[22]||($[22]=de=>h(b).config.document.signed_thankyou_message[y.documentSignedThankyouMessage]=de),"with-image":!1,minimal:""},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.signed_thankyou_message")},null,8,["error"])]),_:1},8,["label"]),l(N,{label:E.$t("brands::brand.form.document.accept.after_accept_message")},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.documentAcceptedThankyouMessage,"onUpdate:locale":$[23]||($[23]=Y=>y.documentAcceptedThankyouMessage=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(ue,{modelValue:h(b).config.document.accepted_thankyou_message[y.documentAcceptedThankyouMessage],"onUpdate:modelValue":$[24]||($[24]=de=>h(b).config.document.accepted_thankyou_message[y.documentAcceptedThankyouMessage]=de),"with-image":!1,minimal:""},null,8,["modelValue"]),l(j,{error:h(b).getError("config.document.accepted_thankyou_message")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(ee,null,{default:p(()=>[l(N,{"label-for":"pdf-font",label:E.$t("brands::brand.form.pdf.default_font"),description:E.$t("brands::brand.form.pdf.default_font_info",{fontName:"DejaVu Sans"}),required:""},{default:p(()=>[l(ce,{modelValue:h(b).config.pdf.font,"onUpdate:modelValue":$[25]||($[25]=de=>h(b).config.pdf.font=de),"input-id":"pdf-font",clearable:!1,options:w.value},null,8,["modelValue","options"]),l(j,{error:h(b).getError("config.pdf.font")},null,8,["error"])]),_:1},8,["label","description"]),l(N,{"label-for":"pdf-size",label:E.$t("brands::brand.form.pdf.size"),required:""},{default:p(()=>[l(ce,{modelValue:h(b).config.pdf.size,"onUpdate:modelValue":$[26]||($[26]=de=>h(b).config.pdf.size=de),"input-id":"pdf-size",clearable:!1,options:["a4","letter"]},null,8,["modelValue"]),l(j,{error:h(b).getError("config.pdf.size")},null,8,["error"])]),_:1},8,["label"]),l(N,{"label-for":"pdf-orientation",label:E.$t("brands::brand.form.pdf.orientation"),required:""},{default:p(()=>[l(ce,{modelValue:h(b).config.pdf.orientation,"onUpdate:modelValue":$[27]||($[27]=de=>h(b).config.pdf.orientation=de),"input-id":"pdf-orientation",clearable:!1,options:["portrait","landscape"]},{label:p(({option:de})=>[le(Z(E.$t("brands::brand.form.pdf.orientation_"+de)),1)]),option:p(de=>[le(Z(E.$t("brands::brand.form.pdf.orientation_"+de.label)),1)]),_:1},8,["modelValue"]),l(j,{error:h(b).getError("config.pdf.orientation")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(ee,null,{default:p(()=>[l(N,{"label-for":"bound_text",label:E.$t("brands::brand.form.signature.bound_text"),required:""},{label:p(({label:de,labelFor:he})=>[l(er,{locale:y.signatureBoundText,"onUpdate:locale":$[28]||($[28]=Y=>y.signatureBoundText=Y),label:de,"label-for":he},null,8,["locale","label","label-for"])]),default:p(()=>[l(oe,{id:"bound_text",modelValue:h(b).config.signature.bound_text[y.signatureBoundText],"onUpdate:modelValue":$[29]||($[29]=de=>h(b).config.signature.bound_text[y.signatureBoundText]=de)},null,8,["modelValue"]),l(j,{error:h(b).getError("config.signature.bound_text")},null,8,["error"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})):K("",!0),l(me,{class:"text-right"},{default:p(()=>[l(se,{type:"submit",variant:"primary",disabled:h(b).busy,text:E.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/brands",component:C2e,meta:{title:at("brands::brand.brands"),superAdmin:!0}}),t.addRoute("settings",{path:"/settings/brands/create",component:S2e,name:"create-brand",meta:{superAdmin:!0}}),t.addRoute("settings",{path:"/settings/brands/:id/edit",component:A2e,name:"edit-brand",meta:{superAdmin:!0}})});const R2e={class:"text-right"},D2e=["textContent"],O2e={__name:"LoggedCallsCard",props:{card:Object},setup(e){const t=M(null),n=M(!1);function o(a){t.value=a,n.value=!0}return(a,r)=>{const s=d("ITextBlock"),i=d("IButton"),u=d("IModal"),c=d("Icon"),m=d("ILink"),f=d("IText"),v=d("IBadge"),y=d("CardAsyncTable");return g(),D(fe,null,[l(u,{id:"readCallOutcomeModal",visible:n.value,"onUpdate:visible":r[0]||(r[0]=b=>n.value=b),size:"sm",title:a.$t("calls.call.outcome.call_outcome")},{"modal-footer":p(({cancel:b})=>[_("div",R2e,[l(i,{variant:"secondary",text:a.$t("core::app.hide"),onClick:b},null,8,["text","onClick"])])]),default:p(()=>[l(s,{innerHTML:t.value},null,8,["innerHTML"])]),_:1},8,["visible","title"]),l(y,{card:e.card},{date:p(({formatted:b,row:w})=>[l(f,null,{default:p(()=>[le(Z(w.user.name)+" - ",1),l(m,{class:"inline-flex items-center",onClick:k=>o(w.body)},{default:p(()=>[_("span",{textContent:Z(b)},null,8,D2e),l(c,{icon:"Window",class:"ml-2 size-4"})]),_:2},1032,["onClick"])]),_:2},1024),(g(!0),D(fe,null,Ie(w.associations,(k,x)=>(g(),D("div",{key:x},[(g(!0),D(fe,null,Ie(k,I=>(g(),D("div",{key:I.id,class:"flex space-x-2"},[l(m,{class:"font-normal underline underline-offset-2",to:I.path,text:I.display_name,basic:""},null,8,["to","text"])]))),128))]))),128))]),"outcome.name":p(({row:b,formatted:w})=>[l(v,{class:"shrink-0",text:w,color:b.outcome.swatch_color},null,8,["text","color"])]),_:1},8,["card"])],64)}}},B2e={__name:"RecordTabCall",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("Icon"),a=d("IBadge"),r=d("ITab");return Un([e.resource.calls_count],()=>l(r,null,{default:p(()=>[l(o,{icon:"Phone"}),le(" "+Z(t.$t("calls::call.calls"))+" ",1),ne(l(a,{variant:"neutral",text:e.resource.calls_count,pill:""},null,8,["text"]),[[pe,e.resource.calls_count]])]),_:1}),n,0)}}};function Cd(){const{scriptConfig:e}=Ne(),t=Innoclapps.app.config.globalProperties.$voip,n=e("voip.client")!==null;return{voip:t,hasVoIPClient:n}}const N2e={class:"text-xs"},P2e={__name:"CallMakeButton",props:{resourceName:{required:!0,type:String},resource:{required:!0,type:Object}},emits:["requested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{gate:r}=ss(),{hasVoIPClient:s}=Cd(),i=O(()=>{if(s){if(r.userCant("use voip"))return a("calls::call.no_voip_permissions")}else return a("core::app.integration_not_configured");return""}),u=O(()=>r.userCant("use voip")||!s),c=O(()=>{let k=[];switch(k.push(...w(n.resource)),n.resourceName){case"contacts":k.push(...w(n.resource.companies||[]));break;case"companies":k.push(...w(n.resource.contacts||[]));break;case"deals":k.push(...w(n.resource.companies||[])),k.push(...w(n.resource.contacts||[]));break}return k}),m=O(()=>c.value.map(k=>k.phoneNumber)),f=O(()=>m.value.length),v=O(()=>f.value>0),y=O(()=>f.value>1);function b(k){o("requested",k)}function w(k){let x=[];return qn(k).forEach(I=>{x=x.concat(...(I.phones||[]).map(C=>({type:C.type,phoneNumber:C.number,resourceDisplayName:I.display_name})))}),x}return(k,x)=>{const I=d("IDropdownButton"),C=d("IDropdownItem"),S=d("IDropdownMenu"),T=d("IDropdown"),E=d("IButton"),$=Ve("i-tooltip");return ne((g(),D("span",null,[y.value?(g(),A(T,{key:0},{default:p(()=>[l(I,{variant:"primary",icon:"Phone",class:"w-full",disabled:u.value,text:k.$t("calls::call.make"),soft:""},null,8,["disabled","text"]),l(S,null,{default:p(()=>[(g(!0),D(fe,null,Ie(c.value,(F,R)=>(g(),A(C,{key:F.phoneNumber+F.type+R,icon:F.type=="mobile"?"DeviceMobile":"Phone",onClick:B=>b(F.phoneNumber)},{default:p(()=>[le(Z(F.phoneNumber)+" ",1),_("span",N2e," ("+Z(F.resourceDisplayName)+") ",1)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})):(g(),A(E,{key:1,icon:"Phone",variant:"primary",disabled:!v.value||u.value,text:k.$t("calls::call.make"),soft:"",onClick:x[0]||(x[0]=F=>b(m.value[0]))},null,8,["disabled","text"]))])),[[$,u.value?i.value:null]])}}},M2e={class:"flex items-center"},V2e={key:0,class:"flex sm:ml-2"},L2e={class:"shrink-0"},q2e=["value"],bs={__name:"CreateFollowUpTask",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e,{expose:t}){const n=Zt(e,"modelValue"),{t:o}=Ee(),{DateTime:a,LocalDateTimeInstance:r,UTCDateTimeInstance:s}=rt(),i=M(""),u=M(!1),c=O(()=>({label:o("core::dates.today"),value:s.toISODate()})),m=O(()=>({label:o("core::dates.tomorrow"),value:s.plus({days:1}).toISODate(),default:!0})),f=O(()=>({label:o("core::dates.in_x_days",2)+" ("+r.plus({days:2}).toFormat("cccc")+")",value:s.plus({days:2}).toISODate()})),v=O(()=>({label:o("core::dates.in_x_days",3)+" ("+r.plus({days:3}).toFormat("cccc")+")",value:s.plus({days:3}).toISODate()})),y=O(()=>({label:o("core::dates.in_x_days",4)+" ("+r.plus({days:4}).toFormat("cccc")+")",value:s.plus({days:4}).toISODate()})),b=O(()=>({label:o("core::dates.in_x_days",5)+" ("+r.plus({days:5}).toFormat("cccc")+")",value:s.plus({days:5}).toISODate()})),w=O(()=>{const B=T(r,"weeks",1);return{label:o("core::dates.in_x_weeks",1)+" ("+B.toLocaleString(a.DATE_MED_WITH_WEEKDAY)+")",value:B.toUTC().toISODate()}}),k=O(()=>{const B=T(r,"weeks",2);return{label:o("core::dates.in_x_weeks",2)+" ("+B.toLocaleString(a.DATE_MED_WITH_WEEKDAY)+")",value:B.toUTC().toISODate()}}),x=O(()=>{const B=T(r,"month",1);return{label:o("core::dates.in_x_months",1)+" ("+B.toLocaleString(a.DATE_MED_WITH_WEEKDAY)+")",value:B.toUTC().toISODate()}}),I=O(()=>i.value==="custom"),C=O(()=>[h(c),h(m),h(f),h(v),h(y),h(b),h(w),h(k),h(x),{label:o("core::dates.custom"),value:"custom"}]),S=O(()=>{let B=ut(C.value,["value",i.value]);return B?B.label:""});function T(B,V,P){let z=B.plus({[V]:P});return z.weekday===6?z=z.plus({days:2}):z.weekday===7&&(z=z.plus({days:1})),z}const E=O(()=>ut(C.value,["default",!0]).value);function $(B){B!=="custom"&&(n.value=B),Gn(()=>i.value=B,300)}function F(B){B&&!n.value?ze(()=>{n.value=E.value,i.value=E.value}):B||(n.value=null)}function R(){u.value=!1}return t({reset:R}),(B,V)=>{const P=d("IFormCheckbox"),z=d("IFormCheckboxLabel"),H=d("IFormCheckboxField"),j=d("IDropdownButton"),N=d("IDropdownItem"),L=d("IDropdownMenu"),U=d("IDropdown"),ee=d("DatePicker");return g(),D("div",M2e,[l(H,{class:"shrink-0"},{default:p(()=>[l(P,{checked:u.value,"onUpdate:checked":V[0]||(V[0]=G=>u.value=G),onChange:F},null,8,["checked"]),l(z,{class:be(u.value?"hidden sm:block":""),text:B.$t("activities::activity.create_follow_up_task")},null,8,["class","text"])]),_:1}),u.value?(g(),D("div",V2e,[ne(_("div",L2e,[l(U,null,{default:p(()=>[l(j,{basic:""},{default:p(()=>[le(Z(S.value),1)]),_:1}),l(L,null,{default:p(()=>[(g(!0),D(fe,null,Ie(C.value,G=>(g(),A(N,{key:G.value,text:G.label,condensed:"",onClick:W=>$(G.value)},null,8,["text","onClick"]))),128))]),_:1})]),_:1})],512),[[pe,!I.value]]),I.value?(g(),A(ee,{key:0,modelValue:n.value,"onUpdate:modelValue":V[1]||(V[1]=G=>n.value=G),required:!0},{default:p(({inputValue:G,inputEvents:W})=>[_("input",Ue({class:"cursor-pointer rounded-md border-neutral-300 bg-transparent py-1 text-base font-medium text-neutral-700 ring-primary-600 focus:border-transparent focus:ring-primary-600 dark:border-neutral-500/30 dark:text-neutral-100 dark:ring-primary-500 dark:focus:ring-primary-500 sm:text-sm",value:G},Ur(W,!0)),null,16,q2e)]),_:1},8,["modelValue"])):K("",!0)])):K("",!0)])}}};function Gi(){const{t:e}=Ee(),{findTypeByFlag:t}=Ha(),{scriptConfig:n,currentUser:o}=Ne(),{DateTime:a}=rt();async function r(s,i,u,c,m={}){let f=a.fromFormat(s,"yyyy-MM-dd").set({hour:n("activities.defaults.hour"),minute:n("activities.defaults.minutes"),second:0}).toUTC();const{createResource:v}=Dt(Innoclapps.resourceName("activities"));return await v(Object.assign({title:e("activities::activity.follow_up_with_title",{with:c}),activity_type_id:t("task").id,due_date:f.toISO(),end_date:f.toISODate(),reminder_minutes_before:n("defaults.reminder_minutes"),user_id:o.value.id,[i]:[u]},m))}return{createFollowUpActivity:r}}const U2e={class:"mt-2 space-y-2 sm:mt-0 sm:space-x-2 sm:space-y-0"},j2e={__name:"CallsCreate",props:{viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},relatedResourceDisplayName:{required:!0,type:String}},emits:["cancel"],setup(e){const t=e,n=Pe("synchronizeResource"),o=Pe("incrementResourceCount"),a=Innoclapps.resourceName("calls"),{t:r}=Ee(),{fields:s,hasFields:i,getCreateFields:u}=yn(),{createFollowUpActivity:c}=Gi(),{createResource:m}=Dt(a),{form:f}=Ze({task_date:null}),v=M(null);async function y(k){if(f.task_date){let x=await c(f.task_date,t.viaResource,t.viaResourceId,t.relatedResourceDisplayName,{note:r("calls::call.follow_up_task_body",{content:k.body})});v.value.reset(),x&&(n({activities:[x]}),o("incomplete_activities_for_user_count"))}n({calls:[k]}),o("calls_count"),Innoclapps.success(r("calls::call.created")),f.reset()}function b(){m(f.set(t.viaResource,[t.viaResourceId]).withQueryString({via_resource:t.viaResource,via_resource_id:t.viaResourceId})).then(y)}async function w(){s.value=await u(a,{viaResource:t.viaResource,viaResourceId:t.viaResourceId})}return w(),(k,x)=>{const I=d("FormFields"),C=d("ICardBody"),S=d("IButton"),T=d("ICardFooter"),E=d("ICard");return g(),A(E,{as:"form",overlay:!h(i),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(C,null,{default:p(()=>[l(I,{form:h(f),fields:h(s),"resource-name":h(a),onUpdateFieldValue:x[0]||(x[0]=$=>h(f).fill($.attribute,$.value)),onSetInitialValue:x[1]||(x[1]=$=>h(f).set($.attribute,$.value))},null,8,["form","fields","resource-name"])]),_:1}),l(T,{class:"flex flex-col sm:flex-row sm:items-center"},{default:p(()=>[l(bs,{ref_key:"createFollowUpTaskRef",ref:v,modelValue:h(f).task_date,"onUpdate:modelValue":x[2]||(x[2]=$=>h(f).task_date=$),class:"grow"},null,8,["modelValue"]),_("div",U2e,[l(S,{class:"w-full sm:w-auto",variant:"secondary",text:k.$t("core::app.cancel"),onClick:x[3]||(x[3]=$=>k.$emit("cancel"))},null,8,["text"]),l(S,{class:"w-full sm:w-auto",variant:"primary",disabled:h(f).busy,text:k.$t("calls::call.add"),onClick:b},null,8,["disabled","text"])])]),_:1})]),_:1},8,["overlay"])}}},z2e=["innerHTML"],Ki={__name:"HtmlableLightbox",props:{html:String},setup(e){const t=e,n=M(null),o=M(null),a=M([]);function r(i){var u;i.target.tagName==="IMG"&&i.target.dataset!==void 0&&i.target.dataset.lightboxIndex>=0&&((u=i.target.parents("a")[0])==null?void 0:u.tagName)!=="A"&&(n.value=parseInt(i.target.dataset.lightboxIndex))}function s(){a.value=[],Array.from(o.value.getElementsByTagName("img")).forEach(i=>{var u;i.src&&a.value.indexOf(i.src)===-1&&((u=i.parents("a")[0])==null?void 0:u.tagName)!=="A"&&(a.value.push(i.src),i.classList.add("cursor-pointer"),i.classList.add("hover:opacity-90"),i.dataset.lightboxIndex=a.value.length-1)})}return $e(()=>t.html,s,{flush:"post"}),Je(s),(i,u)=>(g(),D("div",null,[l(Mv,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),urls:a.value},null,8,["modelValue","urls"]),_("div",{ref_key:"htmlWrapperRef",ref:o,onClick:r,innerHTML:e.html},null,8,z2e)]))}},rl=M([]),Mk=()=>{const{setLoading:e,isLoading:t}=An(),{scriptConfig:n}=Ne();rl.value=[...n("calls.outcomes")||[]],on(()=>{n("calls.outcomes",[...rl.value])});const o=O(()=>Vt(rl.value,"name"));function a(s){rl.value=s}function r(s={}){e(!0),Innoclapps.request("/call-outcomes",Object.assign({},{params:{per_page:100}},s)).then(({data:i})=>rl.value=i.data).finally(()=>e(!1))}return{callOutcomes:rl,outcomesByName:o,outcomesAreBeingFetched:t,setCallOutcomes:a,fetchCallOutcomes:r}},H2e={__name:"CallsEdit",props:{callId:{required:!0,type:Number},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]}},emits:["updated","cancelled"],setup(e,{emit:t}){const n=e,o=t,a=Pe("synchronizeResource"),r=Innoclapps.resourceName("calls"),{t:s}=Ee(),{fields:i,hasFields:u,hydrateFields:c,getUpdateFields:m}=yn(),{form:f}=Ze(),{updateResource:v,retrieveResource:y}=Dt(r);function b(){v(f.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),n.callId).then(w)}function w(x){a({calls:x}),o("updated",x),Innoclapps.success(s("calls::call.updated"))}async function k(){const x=await y(n.callId);i.value=await m(r,n.callId,{viaResource:n.viaResource,viaResourceId:n.viaResourceId}),c(x)}return k(),(x,I)=>{const C=d("FormFields"),S=d("ICardBody"),T=d("IButton"),E=d("ICardFooter"),$=d("ICard");return g(),A($,{as:"form",overlay:!h(u),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(S,null,{default:p(()=>[l(C,{fields:h(i),form:h(f),"resource-name":h(r),"resource-id":e.callId,onUpdateFieldValue:I[0]||(I[0]=F=>h(f).fill(F.attribute,F.value)),onSetInitialValue:I[1]||(I[1]=F=>h(f).set(F.attribute,F.value))},null,8,["fields","form","resource-name","resource-id"])]),_:1}),l(E,{class:"space-x-2 text-right"},{default:p(()=>[l(T,{variant:"secondary",text:x.$t("core::app.cancel"),onClick:I[2]||(I[2]=F=>x.$emit("cancelled"))},null,8,["text"]),l(T,{type:"submit",variant:"primary",disabled:h(f).busy,text:x.$t("core::app.save"),onClick:b},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])}}},W2e={class:"flex flex-1"},G2e={class:"mr-1 mt-1 shrink-0"},K2e={class:"flex grow flex-col lg:flex-row lg:items-center lg:space-x-2"},Z2e=["textContent"],Y2e=["textContent"],X2e={class:"ml-1 mt-1 space-x-2 lg:ml-0 lg:mt-0 lg:space-x-0"},Q2e=["textContent"],Vk=Object.assign({inheritAttrs:!1},{__name:"CallsView",props:{callId:{required:!0,type:Number},commentsCount:{required:!0,type:Number},callDate:{required:!0,type:String},body:{required:!0,type:String},userId:{required:!0,type:Number},outcomeId:{required:!0,type:Number},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},authorizations:{required:!0,type:Object},comments:{required:!0,type:Array},collapsable:Boolean},setup(e){const t=e,n=Pe("synchronizeResource"),o=Pe("decrementResourceCount"),{t:a}=Ee(),{localizedDateTime:r}=rt(),{outcomesByName:s}=Mk(),{findUserById:i}=Ne(),{updateResource:u,deleteResource:c}=Dt(Innoclapps.resourceName("calls")),m=O(()=>s.value.find(x=>x.id==t.outcomeId)),f=O(()=>i(t.userId)),{commentsAreVisible:v}=_a(t.callId,"calls"),y=M(!1);async function b(x={}){let I=await u({call_outcome_id:t.outcomeId,date:t.callDate,body:t.body,via_resource:t.viaResource,via_resource_id:t.viaResourceId,...x},t.callId);n({calls:I})}async function w(x){await c(x),n({calls:{id:x,_delete:!0}}),o("calls_count"),Innoclapps.success(a("calls::call.deleted"))}function k(x){x.type=="dblclick"&&y.value||t.authorizations.update&&(y.value=!y.value)}return(x,I)=>{const C=d("IAvatar"),S=d("I18nT"),T=d("ITextBlockDark"),E=d("ITextDark"),$=d("IDropdownButton"),F=d("IDropdownItem"),R=d("IDropdownMenu"),B=d("IDropdown"),V=d("IDropdownMinimal"),P=d("ICardActions"),z=d("ICardHeader"),H=d("TextCollapse"),j=d("CollapseableCommentsLink"),N=d("CollapsableCommentsList"),L=d("ICardBody"),U=d("CommentsAdd"),ee=d("ICardFooter"),G=d("ICard");return g(),D(fe,null,[ne(l(G,Ue(x.$attrs,{class:"call-"+e.callId}),{default:p(()=>[l(z,null,{default:p(()=>[_("div",W2e,[_("div",G2e,[l(C,{src:f.value.avatar_url},null,8,["src"])]),_("div",K2e,[l(T,{class:"ml-1 mt-1.5 grow lg:mt-0.5"},{default:p(()=>[l(S,{scope:"global",keypath:"calls::call.info_created"},{user:p(()=>[_("span",{class:"font-medium",textContent:Z(f.value.name)},null,8,Z2e)]),date:p(()=>[_("span",{class:"font-medium",textContent:Z(h(r)(e.callDate))},null,8,Y2e)]),_:1})]),_:1}),_("div",X2e,[l(E,{class:"inline font-medium lg:hidden",text:x.$t("calls::call.outcome.outcome")},null,8,["text"]),l(B,null,{default:p(()=>[l($,{as:h(bd),disabled:!e.authorizations.update,color:m.value.swatch_color},{default:p(()=>[_("span",{class:"truncate lg:max-w-36",textContent:Z(m.value.name)},null,8,Q2e)]),_:1},8,["as","disabled","color"]),l(R,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(s),W=>(g(),A(F,{key:W.id,text:W.name,active:e.outcomeId===W.id,onClick:ae=>b({call_outcome_id:W.id})},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])])]),l(P,{class:"mt-1 self-start lg:self-auto"},{default:p(()=>[e.authorizations.update&&e.authorizations.delete?(g(),A(V,{key:0,small:""},{default:p(()=>[ne(l(F,{text:x.$t("core::app.edit"),onClick:k},null,8,["text"]),[[pe,e.authorizations.update]]),ne(l(F,{text:x.$t("core::app.delete"),onClick:I[0]||(I[0]=W=>x.$confirm(()=>w(e.callId)))},null,8,["text"]),[[pe,e.authorizations.delete]])]),_:1})):K("",!0)]),_:1})]),_:1}),l(L,null,{default:p(()=>[e.collapsable?(g(),A(H,{key:0,class:"wysiwyg-text",text:e.body,length:250,lightbox:"",onDblclick:k},null,8,["text"])):(g(),A(Ki,{key:1,class:"wysiwyg-text",html:e.body,onDblclick:k},null,8,["html"])),l(N,{class:"mt-3","commentable-type":"calls","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.callId,count:e.commentsCount,comments:e.comments,onUpdated:I[1]||(I[1]=W=>h(n)({calls:{id:e.callId,comments:W}})),onDeleted:I[2]||(I[2]=W=>h(n)({calls:{id:e.callId,comments:{id:W,_delete:!0}}})),"onUpdate:comments":I[3]||(I[3]=W=>h(n)({calls:{id:e.callId,comments:W}})),"onUpdate:count":I[4]||(I[4]=W=>h(n)({calls:{id:e.callId,comments_count:W}}))},{default:p(({hasComments:W,totalComments:ae,commentsAreBeingLoaded:ue,toggleCommentsVisibility:ce})=>[W?(g(),A(j,{key:0,class:"mt-6",loading:ue,total:ae,collapsed:h(v),onClick:ce},null,8,["loading","total","collapsed","onClick"])):K("",!0)]),_:1},8,["via-resource","via-resource-id","commentable-id","count","comments"])]),_:1}),l(ee,{class:"text-right"},{default:p(()=>[l(U,{"commentable-type":"calls","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.callId,onCreated:I[5]||(I[5]=W=>(v.value=!0,h(n)({calls:{id:e.callId,comments:[W]}})))},null,8,["via-resource","via-resource-id","commentable-id"])]),_:1})]),_:1},16,["class"]),[[pe,!y.value]]),y.value?(g(),A(H2e,{key:0,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"call-id":e.callId,onCancelled:I[6]||(I[6]=W=>y.value=!1),onUpdated:I[7]||(I[7]=W=>y.value=!1)},null,8,["via-resource","via-resource-id","call-id"])):K("",!0)],64)}}}),J2e={class:"sm:flex sm:items-start sm:justify-between"},eIe={class:"mt-5 space-x-0 space-y-1 sm:ml-6 sm:mt-0 sm:flex sm:shrink-0 sm:items-center sm:space-x-2 sm:space-y-0"},tIe={class:"mt-3 space-y-4 sm:mt-7"},Om="calls",nIe={__name:"RecordTabCallPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Pe("synchronizeResource"),o=It(),a=M(null),r=M(!1),{voip:s}=Cd(),{commentsAreVisible:i}=_a(o.query.resourceId,Om),{dataLoadedFirstTime:u,focusToAssociateableElement:c,searchResults:m,isSearching:f,hasSearchResults:v,performSearch:y,search:b,loadData:w,infiniteHandler:k}=gs({resourceName:t.resourceName,resource:gt(t,"resource"),scrollElement:t.scrollElement,synchronizeResource:n,infinityRef:a,timelineRelation:Om}),x=O(()=>Vt(m.value||t.resource.calls,"date","desc")),I=O(()=>x.value.length>0);async function C(S){r.value=!0,await s.makeCall(S)}return o.query.resourceId&&o.query.section===Om&&Yr(u,()=>{c(o.query.resourceId,"call").then(()=>{o.query.comment_id&&(i.value=!0)})}),(S,T)=>{const E=d("ITextDark"),$=d("IText"),F=d("IButton"),R=d("SearchInput"),B=d("ICardBody"),V=d("ICard"),P=d("ITabPanel");return g(),A(P,{lazy:!h(u),onActivatedOnce:h(w)},{default:p(()=>[ne(l(V,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(B,null,{default:p(()=>[_("div",J2e,[_("div",null,[l(E,{class:"font-semibold",text:S.$t("calls::call.manage_calls")},null,8,["text"]),l($,{class:"max-w-xl",text:S.$t("calls::call.info")},null,8,["text"])]),_("div",eIe,[l(F,{variant:"primary",icon:"PlusSolid",class:"w-full sm:w-auto",text:S.$t("calls::call.add"),onClick:T[0]||(T[0]=z=>r.value=!0)},null,8,["text"]),S.$gate.userCan("use voip")?(g(),A(P2e,{key:0,class:"block w-full sm:w-auto","resource-name":e.resourceName,resource:e.resource,onRequested:C},null,8,["resource-name","resource"])):K("",!0)])]),ne(l(R,{modelValue:h(b),"onUpdate:modelValue":[T[1]||(T[1]=z=>$n(b)?b.value=z:null),h(y)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[pe,I.value||h(b)]])]),_:1})]),_:1},512),[[pe,!r.value]]),r.value?(g(),A(j2e,{key:0,class:"rounded-t-none","via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource-display-name":e.resource.display_name,onCancel:T[2]||(T[2]=z=>r.value=!1)},null,8,["via-resource","via-resource-id","related-resource-display-name"])):K("",!0),_("div",tIe,[(g(!0),D(fe,null,Ie(x.value,(z,H,j,N)=>{const L=[z.updated_at,z.comments_count,z.call_outcome_id];if(N&&N.key===z.id&&pc(N,L))return N;const U=(g(),D("div",{key:z.id},[l(Vk,{"call-id":z.id,"comments-count":z.comments_count,"call-date":z.date,body:z.body,"user-id":z.user_id,"outcome-id":z.call_outcome_id,authorizations:z.authorizations,comments:z.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId},null,8,["call-id","comments-count","call-date","body","user-id","outcome-id","authorizations","comments","via-resource","via-resource-id"])]));return U.memo=L,U},T,3),128))]),ne(l($,{class:"mt-6 text-center",text:S.$t("core::app.no_search_results")},null,8,["text"]),[[pe,h(f)&&!h(v)]]),l(gr,{ref_key:"infinityRef",ref:a,"scroll-element":e.scrollElement,onHandle:T[5]||(T[5]=z=>h(k)(z))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},oIe={class:"mt-3"},aIe={__name:"RecordTabTimelineCall",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),A(yo,{"heading-class":"font-medium",icon:"Phone","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:t.$t("calls::call.timeline.heading")},{default:p(()=>[_("div",oIe,[l(Vk,{"call-id":e.log.id,"comments-count":e.log.comments_count,"call-date":e.log.date,body:e.log.body,"user-id":e.log.user_id,"outcome-id":e.log.call_outcome_id,authorizations:e.log.authorizations,comments:e.log.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,collapsable:""},null,8,["call-id","comments-count","call-date","body","user-id","outcome-id","authorizations","comments","via-resource","via-resource-id"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"]))}},rIe={__name:"CallsOutcomesIndex",setup(e){const t=Innoclapps.resourceName("call-outcomes"),{fetchCallOutcomes:n}=Mk();return(o,a)=>{const r=d("ICardHeading");return g(),A(Ci,{"resource-name":h(t),"with-cancel":!1,onCreated:h(n),onUpdated:h(n),onDeleted:h(n)},{header:p(()=>[l(r,{text:o.$t("calls::call.outcome.outcomes")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},lIe={__name:"SettingsCalls",setup(e){return(t,n)=>(g(),A(rIe))}},sIe={class:"flex items-center"},iIe={class:"lg:flex lg:space-y-4"},uIe={class:"w-full"},cIe={class:"grid grid-cols-12 gap-2 lg:gap-4"},dIe={class:"col-span-12 lg:col-span-6"},mIe={class:"mb-1 flex"},fIe={class:"grow"},pIe={class:"col-span-12 lg:col-span-6"},vIe={class:"mb-1 flex"},hIe={class:"grow"},gIe={class:"mt-1 flex space-x-2"},bIe={class:"relative flex grow rounded-lg shadow-sm"},yIe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},_Ie=_("option",{value:""},null,-1),IIe=["value"],wIe={class:"mt-1 flex space-x-2"},xIe={__name:"SettingsTwilio",setup(e){const{t}=Ee(),{form:n}=Ze(),{scriptConfig:o}=Ne(),a=M([]),r=M(!1),s=M(!1),i=M(!1),u=M(!1),c=M(!1),m=o("is_secure"),f=O(()=>!Gt(n.twilio_auth_token)),v=O(()=>!Gt(n.twilio_account_sid)),y=O(()=>!Gt(n.twilio_app_sid)),b=O(()=>f.value&&v.value),w=O(()=>!Gt(n.twilio_number)),k=O(()=>f.value&&v.value&&y.value),x=O(()=>ut(a.value,["phoneNumber",n.twilio_number])),I=O(()=>x.value?x.value.capabilities.voice===!1:!1);function C(){!n.twilio_account_sid&&!n.twilio_account_sid.twilio_auth_token&&(n.twilio_number=null),n.post("settings").then(()=>{Innoclapps.success(t("core::settings.updated")),window.location.reload()})}function S(){Innoclapps.request().delete("/twilio").then(()=>{window.location.reload()})}function T(){Innoclapps.request().put(`/twilio/app/${n.twilio_app_sid}`,{voiceUrl:o("voip.endpoints.call")}).then(()=>{window.location.reload()})}function E(){u.value=!0,Innoclapps.request("/twilio/numbers",{params:{account_sid:n.twilio_account_sid,auth_token:n.twilio_auth_token}}).then(({data:P})=>{a.value=P}).finally(()=>u.value=!1)}async function $(){let{data:P}=await Innoclapps.request(`/twilio/app/${n.twilio_app_sid}`);return P}function F(){s.value=!0,Innoclapps.request().post("/twilio/app",{number:n.twilio_number,account_sid:n.twilio_account_sid,auth_token:n.twilio_auth_token,voiceMethod:"POST",voiceUrl:o("voip.endpoints.call"),friendlyName:"Concord CRM"}).then(({data:P})=>{n.twilio_app_sid=P.app_sid}).finally(()=>s.value=!1)}function R(){Innoclapps.confirm().then(B)}function B(){Innoclapps.request().delete(`/twilio/app/${n.twilio_app_sid}`,{params:{account_sid:n.twilio_account_sid,auth_token:n.twilio_auth_token}}).then(()=>{i.value=!0,n.twilio_app_sid=null})}function V(){Innoclapps.request("/settings").then(({data:P})=>{n.set({twilio_account_sid:P.twilio_account_sid,twilio_auth_token:P.twilio_auth_token,twilio_app_sid:P.twilio_app_sid,twilio_number:P.twilio_number}),r.value=!0,f.value&&v.value&&(E(),y.value&&$().then(z=>{z.voiceUrl!==o("voip.endpoints.call")&&(c.value=!0)}).catch(z=>{z.response.data.deleted?B():console.error(z)}))})}return V(),(P,z)=>{const H=d("Icon"),j=d("ICardHeading"),N=d("IStepCircle"),L=d("IStepsCircle"),U=d("IButton"),ee=d("ICardActions"),G=d("ICardHeader"),W=d("IAlertBody"),ae=d("IAlertActions"),ue=d("IAlert"),ce=d("IFormLabel"),oe=d("ILink"),ie=d("IFormInput"),Q=d("IFormGroup"),se=d("IFormSelect"),me=d("ICardBody"),xe=d("ICardFooter"),de=d("ICard");return g(),D(fe,null,[l(G,null,{default:p(()=>[_("div",sIe,[k.value&&r.value&&!u.value?(g(),A(H,{key:0,icon:a.value.length===0||I.value||!h(m)?"XCircleSolid":"CheckCircle",class:be(["mr-1 size-5",a.value.length===0||I.value||!h(m)?"text-danger-500":"text-success-600"])},null,8,["icon","class"])):K("",!0),l(j,null,{default:p(()=>[le("Twilio")]),_:1}),l(L,{class:"pointer-events-none ml-4"},{default:p(()=>[l(N,{status:b.value?"complete":"current"},null,8,["status"]),l(N,{status:h(n).twilio_number?"complete":""},null,8,["status"]),l(N,{status:k.value&&h(n).twilio_number?"complete":"","is-last":""},null,8,["status"])]),_:1})]),l(ee,null,{default:p(()=>[ne(l(U,{variant:"danger",text:P.$t("calls::twilio.disconnect"),onClick:S},null,8,["text"]),[[pe,k.value]])]),_:1})]),_:1}),l(de,{overlay:!r.value},{default:p(()=>[l(me,null,{default:p(()=>[_("div",iIe,[_("div",uIe,[l(ue,{class:"mb-10",variant:"warning",show:c.value},{default:p(({variant:he})=>[l(W,null,{default:p(()=>[le(" Your Twilio application URL does match your installation URL. ")]),_:1}),l(ae,null,{default:p(()=>[l(U,{text:"Update URL",variant:he,ghost:"",onClick:T},null,8,["variant"])]),_:2},1024)]),_:1},8,["show"]),l(ue,{class:"mb-10",variant:"warning",show:!h(m)},{default:p(()=>[l(W,null,{default:p(()=>[le(" Application must be served over HTTPS URL in order to use the Twilio integration. ")]),_:1})]),_:1},8,["show"]),_("div",cIe,[_("div",dIe,[l(Q,null,{label:p(()=>[_("div",mIe,[_("div",fIe,[l(ce,{for:"twilio_account_sid"},{default:p(()=>[le(" Account SID ")]),_:1})]),l(oe,{href:"https://www.twilio.com/console"},{default:p(()=>[le(" https://www.twilio.com/console ")]),_:1})])]),default:p(()=>[l(ie,{id:"twilio_account_sid",modelValue:h(n).twilio_account_sid,"onUpdate:modelValue":z[0]||(z[0]=he=>h(n).twilio_account_sid=he),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_("div",pIe,[l(Q,null,{label:p(()=>[_("div",vIe,[_("div",hIe,[l(ce,{for:"twilio_auth_token"},{default:p(()=>[le(" Auth Token ")]),_:1})]),l(oe,{href:"https://www.twilio.com/console"},{default:p(()=>[le(" https://www.twilio.com/console ")]),_:1})])]),default:p(()=>[l(ie,{id:"twilio_auth_token",modelValue:h(n).twilio_auth_token,"onUpdate:modelValue":z[1]||(z[1]=he=>h(n).twilio_auth_token=he),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_("div",{class:be(["mt-2 border-t border-neutral-200 pt-5 dark:border-neutral-500/30",{"pointer-events-none opacity-50 blur-sm":!b.value}])},[l(ce,{label:P.$t("calls::twilio.number")},null,8,["label"]),l(ue,{class:"my-3",variant:"danger",show:I.value},{default:p(()=>[l(W,null,{default:p(()=>[le(" This phone number does not have enabled voice capabilities. ")]),_:1})]),_:1},8,["show"]),_("div",gIe,[_("div",bIe,[_("div",yIe,[l(H,{icon:"Phone",class:"size-5 text-neutral-500 dark:text-neutral-300"})]),l(se,{modelValue:h(n).twilio_number,"onUpdate:modelValue":z[2]||(z[2]=he=>h(n).twilio_number=he),class:"!pl-11",disabled:!a.value.length},{default:p(()=>[_Ie,(g(!0),D(fe,null,Ie(a.value,he=>(g(),D("option",{key:he.phoneNumber,value:he.phoneNumber},Z(he.phoneNumber),9,IIe))),128))]),_:1},8,["modelValue","disabled"])]),l(U,{variant:"secondary",loading:u.value,disabled:u.value,text:P.$t("calls::twilio.retrieve_numbers"),onClick:E},null,8,["loading","disabled","text"])])],2),_("div",{class:be(["mt-5 border-t border-neutral-200 pt-5 dark:border-neutral-500/30",{"pointer-events-none opacity-50 blur-sm":!w.value}])},[l(ce,{label:P.$t("calls::twilio.app")},null,8,["label"]),_("div",wIe,[l(ie,{modelValue:h(n).twilio_app_sid,"onUpdate:modelValue":z[3]||(z[3]=he=>h(n).twilio_app_sid=he),class:"grow",disabled:!0},null,8,["modelValue"]),l(U,{variant:"primary",class:"shrink-0",loading:s.value,disabled:s.value||y.value||I.value,text:P.$t("calls::twilio.create_app"),onClick:F},null,8,["loading","disabled","text"]),y.value?(g(),A(U,{key:0,class:"shrink-0",icon:"Trash",basic:"",onClick:R})):K("",!0)])],2)])])]),_:1}),k.value||i.value?(g(),A(xe,{key:0,class:"text-right"},{default:p(()=>[l(U,{variant:"primary",disabled:I.value,text:P.$t("core::app.save"),onClick:C},null,8,["disabled","text"])]),_:1})):K("",!0)]),_:1},8,["overlay"])],64)}}},kIe={key:0},$Ie={key:0},CIe={key:1},SIe={__name:"PhoneCallableField",props:["resource","resourceName","resourceId","field","isFloating"],emits:["updated"],setup(e){const t=e,n=Innoclapps.resourceName("calls"),o=Pe("synchronizeResource",null),a=Pe("incrementResourceCount",null),r=M(!1),{t:s}=Ee(),{gate:i}=ss(),{voip:u,hasVoIPClient:c}=Cd(),{fields:m,hasFields:f,getCreateFields:v}=yn(),{form:y}=Ze({task_date:null}),{createResource:b}=Dt(n),{createFollowUpActivity:w}=Gi(),k=O(()=>!c||!i.userCan("use voip")),x=O(()=>{if(c){if(i.userCant("use voip"))return s("calls::call.no_voip_permissions")}else return s("core::app.integration_not_configured");return""});async function I(T){if(y.task_date){let E=await w(y.task_date,t.resourceName,t.resourceId,t.resource.display_name,{note:s("calls::call.follow_up_task_body",{content:T.body})});E&&(o&&o({activities:[E]}),a&&a("incomplete_activities_for_user_count"))}o&&o({calls:[T]}),a&&a("calls_count"),Innoclapps.success(s("calls::call.created")),y.reset(),r.value=!1}async function C(T){y.set("task_date",null),(await u.makeCall(T)).on("Disconnect",()=>{r.value=!0}),m.value=await v(n,{viaResource:t.resourceName,viaResourceId:t.resourceId})}function S(){b(y.set(t.resourceName,[t.resourceId]).withQueryString({via_resource:t.resourceName,via_resource_id:t.resourceId})).then(I)}return(T,E)=>{const $=d("FormFields"),F=d("IOverlay"),R=d("IModal"),B=d("IDropdownButton"),V=d("IDropdownItem"),P=d("IButtonCopy"),z=d("IDropdownMenu"),H=d("IDropdown"),j=d("BaseDetailField"),N=Ve("i-tooltip");return g(),D(fe,null,[l(R,{visible:r.value,"onUpdate:visible":E[3]||(E[3]=L=>r.value=L),size:"md",title:T.$t("calls::call.add"),"ok-text":T.$t("calls::call.add"),"ok-disabled":h(y).busy,onShown:E[4]||(E[4]=L=>r.value=!0),onHidden:E[5]||(E[5]=L=>r.value=!1),onOk:S},{default:p(()=>[r.value?(g(),D("div",kIe,[l(F,{show:!h(f)},{default:p(()=>[l($,{fields:h(m),form:h(y),"resource-name":h(n),onUpdateFieldValue:E[0]||(E[0]=L=>h(y).fill(L.attribute,L.value)),onSetInitialValue:E[1]||(E[1]=L=>h(y).set(L.attribute,L.value))},null,8,["fields","form","resource-name"])]),_:1},8,["show"]),l(bs,{modelValue:h(y).task_date,"onUpdate:modelValue":E[2]||(E[2]=L=>h(y).task_date=L),class:"mt-2"},null,8,["modelValue"])])):K("",!0)]),_:1},8,["visible","title","ok-text","ok-disabled"]),l(j,{field:e.field,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"is-floating":e.isFloating,onUpdated:E[6]||(E[6]=L=>T.$emit("updated",L))},{default:p(({hasValue:L,value:U})=>[L?(g(!0),D(fe,{key:0},Ie(U,(ee,G)=>(g(),D("div",{key:G},[l(H,null,{default:p(()=>[ne(l(B,{text:ee.number,link:"","no-caret":""},null,8,["text"]),[[N,T.$t("contacts::fields.phone.types."+ee.type)]]),l(z,null,{default:p(()=>[e.isFloating?K("",!0):ne((g(),D("span",$Ie,[l(V,{disabled:k.value,text:T.$t("calls::call.make"),onClick:W=>C(ee.number)},null,8,["disabled","text","onClick"])])),[[N,k.value?x.value:null]]),l(P,{as:"IDropdownItem",text:ee.number,"success-message":T.$t("contacts::fields.phone.copied")},{default:p(()=>[le(Z(T.$t("core::app.copy")),1)]),_:2},1032,["text","success-message"]),l(V,{href:"tel:"+ee.number,text:T.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)]))),128)):K("",!0),L?K("",!0):(g(),D("span",CIe,"—"))]),_:1},8,["field","resource","resource-name","resource-id","is-floating"])],64)}}},TIe={key:1},Lk={__name:"PhoneField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("IDropdownButton"),a=d("IButtonCopy"),r=d("IDropdownItem"),s=d("IDropdownMenu"),i=d("IDropdown"),u=d("BaseIndexField"),c=Ve("i-tooltip");return g(),A(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:m,value:f})=>[m?(g(!0),D(fe,{key:0},Ie(f,(v,y)=>(g(),D("div",{key:y,class:be(e.column.wrap?"":"mr-2.5 inline last:mr-0")},[l(i,null,{default:p(()=>[ne(l(o,{text:v.number,link:"","no-caret":""},null,8,["text"]),[[c,t.$t("contacts::fields.phone.types."+v.type)]]),l(s,null,{default:p(()=>[Se(t.$slots,"start",{phone:v}),l(a,{as:"IDropdownItem",text:v.number,"success-message":t.$t("contacts::fields.phone.copied")},{default:p(()=>[le(Z(t.$t("core::app.copy")),1)]),_:2},1032,["text","success-message"]),l(r,{href:"tel:"+v.number,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)],2))),128)):(g(),D("span",TIe,"—"))]),_:3},8,["resource-name","resource-id","row","field"])}}},EIe={key:0},FIe=Object.assign({inheritAttrs:!1},{__name:"PhoneCallableField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,n=Innoclapps.resourceName("calls"),{t:o}=Ee(),{gate:a}=ss(),{voip:r,hasVoIPClient:s}=Cd(),{createFollowUpActivity:i}=Gi(),{fields:u,hasFields:c,getCreateFields:m}=yn(),{form:f}=Ze({task_date:null}),{createResource:v}=Dt(n),y=M(!1),b=O(()=>!s||!a.userCan("use voip")),w=O(()=>{if(s){if(a.userCant("use voip"))return o("calls::call.no_voip_permissions")}else return o("core::app.integration_not_configured");return""});async function k(C){f.set("task_date",null),(await r.makeCall(C)).on("Disconnect",()=>{y.value=!0}),u.value=await m(n,{viaResource:t.resourceName,viaResourceId:t.row.id})}async function x(C){f.task_date&&i(f.task_date,t.resourceName,t.resourceId,t.row.display_name||t.row.name,{note:o("calls::call.follow_up_task_body",{content:C.body})}),f.reset(),y.value=!1}function I(){v(f.set(t.resourceName,[t.row.id]).withQueryString({via_resource:t.resourceName,via_resource_id:t.row.id})).then(x)}return(C,S)=>{const T=d("FormFields"),E=d("IOverlay"),$=d("IModal"),F=d("IDropdownItem"),R=Ve("i-tooltip");return g(),D(fe,null,[l($,{visible:y.value,"onUpdate:visible":S[3]||(S[3]=B=>y.value=B),size:"md",title:C.$t("calls::call.add"),"ok-text":C.$t("calls::call.add"),"ok-disabled":h(f).busy,onShown:S[4]||(S[4]=B=>y.value=!0),onHidden:S[5]||(S[5]=B=>y.value=!1),onOk:I},{default:p(()=>[y.value?(g(),D("div",EIe,[l(E,{show:!h(c)},{default:p(()=>[l(T,{fields:h(u),form:h(f),"resource-name":h(n),onUpdateFieldValue:S[0]||(S[0]=B=>h(f).fill(B.attribute,B.value)),onSetInitialValue:S[1]||(S[1]=B=>h(f).set(B.attribute,B.value))},null,8,["fields","form","resource-name"])]),_:1},8,["show"]),l(bs,{modelValue:h(f).task_date,"onUpdate:modelValue":S[2]||(S[2]=B=>h(f).task_date=B),class:"mt-2"},null,8,["modelValue"])])):K("",!0)]),_:1},8,["visible","title","ok-text","ok-disabled"]),l(Lk,en(un({...C.$props,...C.$attrs})),{start:p(({phone:B})=>[ne((g(),D("span",null,[l(F,{disabled:b.value,text:C.$t("calls::call.make"),onClick:V=>k(B.number)},null,8,["disabled","text","onClick"])])),[[R,b.value?w.value:null]])]),_:1},16)],64)}}});var AIe=M_,RIe=ho,DIe="Expected a function";function OIe(e,t,n){var o=!0,a=!0;if(typeof e!="function")throw new TypeError(DIe);return RIe(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),AIe(e,t,{leading:o,maxWait:t,trailing:a})}var BIe=OIe;const NIe=Bt(BIe),PIe={data:()=>({error:null,isCallInProgress:!1,callStartedDate:null,callEndedDate:null,isIncoming:!1,duration:null,durationInterval:null,visible:!1,isMuted:!1,lastConnectedNumber:null,personDisplayName:null,askForActivationIn:1,audioDevices:{speaker:{items:[],selected:null},ringtone:{items:[],selected:null}}}),computed:{showCallComponent(){return this.visible===!0||this.isCallInProgress},cardHeader(){return this.isIncoming&&!this.isCallInProgress?this.$t("calls::call.new_from",{number:this.personDisplayName||this.lastConnectedNumber}):this.isCallInProgress?this.$t("calls::call.connected_with",{number:this.personDisplayName||this.lastConnectedNumber}):this.lastConnectedNumber?this.$t("calls::call.ended",{number:this.personDisplayName||this.lastConnectedNumber}):""}},watch:{lastConnectedNumber:function(e){e&&this.findDisplayNameForCall(e)}},created(){document.documentElement.addEventListener("mousedown",NIe(this.bootVoIPDevice,500)),window.addEventListener("beforeunload",()=>{this.getDevice()&&this.getDevice().unregister()}),setTimeout(()=>{this.getDevice()||this.$dialog.show("callingActivation")},this.askForActivationIn*60*1e3)},methods:{strTruncate:IA,findDisplayNameForCall(e){let t={search_fields:"phones.number:=",q:e};Promise.all([Innoclapps.request("/contacts/search",{params:t}),Innoclapps.request("/companies/search",{params:t})]).then(n=>{let o=n[0].data,a=n[1].data;o.length>0?this.personDisplayName=o[0].display_name:a.length>0?this.personDisplayName=a[0].display_name:this.personDisplayName=null})},hideCallHandler(){this.visible=!1,this.duration=null},callingModalHiddenEvent(){Innoclapps.success(this.$t("calls::call.voip_activated"))},updateDuration(){let t=(this.callEndedDate||dt.now()).diff(this.callStartedDate),n=t.as("minutes"),o=t.as("seconds")%60;this.duration=(Math.floor(n)<10?"0"+Math.floor(n):Math.floor(n))+":"+(Math.floor(o)<10?"0"+Math.floor(o):Math.floor(o))},prepareComponent(e){try{e.on("Registering",t=>{}),e.on("Registered",t=>{t.instance.audio.on("deviceChange",this.updateAllDevices)}),e.on("Error",({error:t,Call:n})=>this.error=t.message),this.setDevice(e),this.$voip.onCall(({Call:t,isIncoming:n})=>{this.callEndedDate=null,this.callStartedDate=null,this.duration=null,this.$options.call=t,this.isIncoming=n,this.visible=!0,n?this.lastConnectedNumber=t.instance.parameters.From:this.lastConnectedNumber=t.instance.customParameters.get("To"),t.on("Mute",({isMuted:o,Call:a})=>this.isMuted=o),t.on("Error",o=>{this.visible=!0,this.call=null,this.isIncoming=!1,this.error=o.message}),t.on("Accept",o=>{this.isCallInProgress=!0,this.callStartedDate=dt.now(),this.bindVolumeIndicators(o.instance),this.durationInterval=setInterval(this.updateDuration,1e3)}),t.on("Cancel",()=>{this.isCallInProgress=!1,this.visibility=!0,this.isIncoming=!1,this.$options.call=null}),t.on("Reject",()=>{this.duration=null,this.callStartedDate=null,this.isIncoming=!1,this.isCallInProgress=!1,this.$options.call=null}),t.on("Disconnect",o=>{this.visible=!0,this.isCallInProgress=!1,this.$options.call=null,this.isMuted=!1,this.isIncoming=!1,this.callEndedDate=dt.now(),clearInterval(this.durationInterval)})})}catch(t){this.error=t.message,this.visible=!0}},setDevice(e){this.$options.device=e},getDevice(){return this.$options.device},bootVoIPDevice(){if(this.getDevice()){document.documentElement.removeEventListener("mousedown",this.bootVoIPDevice);return}this.$voip.ready(this.prepareComponent),this.$voip.ready(this.getMediaDevices),this.$voip.ready(e=>e.instance.register()),this.$voip.connect()},updateAllDevices(){this.updateDevices(this.getDevice().instance.audio.speakerDevices.get(),"speaker"),this.updateDevices(this.getDevice().instance.audio.ringtoneDevices.get(),"ringtone")},updateDevices(e,t){this.audioDevices[t].items=[],this.audioDevices[t].selected=null,this.getDevice().instance.audio.availableOutputDevices.forEach((o,a)=>{let r=e.size===0&&a==="default";e.forEach(function(i){i.deviceId===a&&(r=!0)});let s={label:o.label,id:a};this.audioDevices[t].items.push(s),r&&(this.audioDevices[t].selected=s)})},getMediaDevices(){navigator.mediaDevices.getUserMedia({audio:!0}).then(this.updateAllDevices).catch(e=>this.error=e)},bindVolumeIndicators(e){e.on("volume",(t,n)=>{let o="red";t<.5?o="green":t<.75&&(o="yellow"),this.$refs.inputVolumeBar.style.width=Math.floor(t*300)+"px",this.$refs.inputVolumeBar.style.background=o;let a="red";n<.5?a="green":n<.75&&(a="yellow"),this.$refs.outputVolumeBar.style.width=Math.floor(n*300)+"px",this.$refs.outputVolumeBar.style.background=a})}}},MIe={class:"sticky top-0 -mx-4 border-b border-neutral-300 bg-white/50 px-7 py-3 dark:border-neutral-700 dark:bg-neutral-700/30"},VIe={class:"flex items-center px-4"},LIe={class:"grow"},qIe={class:"flex items-center space-x-4"},UIe=["textContent"],jIe={class:"ml-0 mt-2 space-x-2 sm:ml-2 sm:mt-0"},zIe={class:"mt-4 flex flex-col items-center md:flex-row"},HIe={class:"flex flex-col items-center space-y-2 sm:flex-row md:space-x-2 md:space-y-0"},WIe=["textContent"],GIe=["textContent"],KIe={class:"ml-5 flex space-x-3 pl-5 sm:border-l sm:border-neutral-300"},ZIe={class:"flex items-center"},YIe={ref:"outputVolumeBar",class:"ml-1 h-4 rounded-md"},XIe={class:"flex items-center"},QIe={ref:"inputVolumeBar",class:"ml-1 h-4 rounded-md"};function JIe(e,t,n,o,a,r){const s=d("ITextDark"),i=d("IModal"),u=d("IAlertBody"),c=d("IAlert"),m=d("Icon"),f=d("IBadge"),v=d("IButton"),y=d("IDropdownButton"),b=d("IDropdownItem"),w=d("IDropdownMenu"),k=d("IDropdown"),x=d("ILink"),I=Ve("i-tooltip");return g(),D(fe,null,[l(i,{id:"callingActivation","cancel-variant":"success","cancel-text":e.$t("calls::call.activate_voip"),title:e.$t("calls::call.activation_required"),onHidden:r.callingModalHiddenEvent},{"modal-ok":p(()=>[le(" ")]),default:p(()=>[l(s,null,{default:p(()=>[le(Z(e.$t("calls::call.activation_gesture_required",{askForActivationIn:e.askForActivationIn})),1)]),_:1})]),_:1},8,["cancel-text","title","onHidden"]),ne(_("div",MIe,[l(c,{class:"mb-4",variant:"danger",show:e.error!==null,dismissible:"",onDismissed:t[0]||(t[0]=C=>e.error=null)},{default:p(()=>[l(u,null,{default:p(()=>[le(Z(e.error),1)]),_:1})]),_:1},8,["show"]),_("div",VIe,[_("div",LIe,[_("div",qIe,[_("p",{class:be(["text-base font-medium",e.isCallInProgress||e.isIncoming&&!e.isCallInProgress?"text-success-500":"text-neutral-800 dark:text-neutral-100"]),textContent:Z(r.cardHeader)},null,10,UIe),ne(l(f,{variant:"info"},{default:p(()=>[l(m,{icon:"Clock",class:"mr-1 size-4"}),le(" "+Z(e.isCallInProgress||e.lastConnectedNumber?e.duration:null),1)]),_:1},512),[[pe,e.isCallInProgress||e.lastConnectedNumber&&e.duration]]),_("div",null,[_("div",jIe,[e.isCallInProgress?ne((g(),A(v,{key:0,variant:"secondary",icon:"VolumeUp",pill:"",onClick:t[1]||(t[1]=C=>e.$options.call.mute(!1))},null,512)),[[pe,e.isMuted],[I,e.$t("calls::call.unmute")]]):K("",!0),e.isCallInProgress?ne((g(),A(v,{key:1,variant:"secondary",icon:"VolumeOff",pill:"",onClick:t[2]||(t[2]=C=>e.$options.call.mute(!0))},null,512)),[[pe,!e.isMuted],[I,e.$t("calls::call.mute")]]):K("",!0),ne(l(v,{variant:"success",icon:"Phone",pill:"",onClick:t[3]||(t[3]=C=>e.$options.call.accept())},null,512),[[pe,e.isIncoming&&!e.isCallInProgress],[I,e.$t("calls::call.answer")]]),ne(l(v,{variant:"danger",icon:"XSolid",pill:"",onClick:t[4]||(t[4]=C=>e.$options.call.disconnect())},null,512),[[pe,e.isCallInProgress],[I,e.$t("calls::call.hangup")]]),ne(l(v,{variant:"danger",icon:"PhoneXMark",pill:"",onClick:t[5]||(t[5]=C=>e.$options.call.reject())},null,512),[[pe,e.isIncoming&&!e.isCallInProgress],[I,e.$t("calls::call.reject")]])])])])]),_("div",null,[ne(l(v,{icon:"XSolid",basic:"",onClick:r.hideCallHandler},null,8,["onClick"]),[[pe,e.visible===!0],[I,e.$t("calls::call.hide_bar"),void 0,{left:!0}]])])]),_("div",zIe,[_("div",HIe,[l(k,null,{default:p(()=>[l(y,{icon:"Megaphone",basic:""},{default:p(()=>{var C;return[_("span",{class:"max-w-[13rem] truncate",textContent:Z((C=e.audioDevices.speaker.selected)==null?void 0:C.label)},null,8,WIe)]}),_:1}),l(w,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.audioDevices.speaker.items,C=>(g(),A(b,{key:C.id,text:C.label,onClick:S=>r.getDevice().instance.audio.speakerDevices.set([C.id])},null,8,["text","onClick"]))),128))]),_:1})]),_:1}),l(k,null,{default:p(()=>[l(y,{icon:"Microphone",basic:""},{default:p(()=>{var C;return[_("span",{class:"max-w-[13rem] truncate",textContent:Z((C=e.audioDevices.ringtone.selected)==null?void 0:C.label)},null,8,GIe)]}),_:1}),l(w,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.audioDevices.ringtone.items,C=>(g(),A(b,{key:C.id,text:C.label,onClick:S=>r.getDevice().instance.audio.ringtoneDevices.set([C.id])},null,8,["text","onClick"]))),128))]),_:1})]),_:1}),l(x,{class:"hidden lg:block",text:e.$t("calls::call.unknown_devices"),onClick:r.getMediaDevices},null,8,["text","onClick"])]),ne(_("div",KIe,[_("div",ZIe,[ne(l(m,{icon:"VolumeUp",class:"size-5 text-current dark:text-neutral-200"},null,512),[[I,e.$t("calls::call.speaker_volume"),void 0,{bottom:!0}]]),_("div",YIe,null,512)]),_("div",XIe,[ne(l(m,{icon:"Microphone",class:"h-4 w-5 text-current dark:text-neutral-200"},null,512),[[I,e.$t("calls::call.mic_volume"),void 0,{bottom:!0}]]),_("div",QIe,null,512)])],512),[[pe,e.isCallInProgress]])])],512),[[pe,r.showCallComponent]])],64)}const ewe=fn(PIe,[["render",JIe]]);class twe{constructor(){this.instance=null,this.emitter=xc(),this.events={Registering:"registering",Registered:"registered",Error:"error"}}async createCall(t){}async connect(){}incoming(t){}unregister(){}on(t,n){return Object.hasOwn(this.events,t)?(this.emitter.on(this.events[t],n),this):(console.error(`${t} event listener does not exists for this device.`),this)}}class nwe{constructor(t){this.instance=t,this.emitter=xc(),this.events={Accept:"accept",Disconnect:"disconnect",Reject:"reject",Cancel:"Cancel",Mute:"mute",Error:"error"}}accept(){}reject(){}disconnect(){}mute(t=!0){}get isMuted(){}on(t,n){return Object.hasOwn(this.events,t)?(this.emitter.on(this.events[t],n),this):(console.error(`${t} event listener does not exists for the call.`),this)}}class Bm extends nwe{constructor(t){super(t),t.on("accept",n=>this.emitter.emit(this.events.Accept,this)),t.on("disconnect",n=>this.emitter.emit(this.events.Disconnect,this)),t.on("reject",()=>this.emitter.emit(this.events.Reject)),t.on("cancel",()=>this.emitter.emit(this.events.Cancel)),t.on("mute",(n,o)=>this.emitter.emit(this.events.Mute,{isMuted:n,Call:this})),t.on("Error",n=>this.emitter.emit(this.events.Error,n))}accept(){this.instance.accept()}reject(){this.instance.reject()}disconnect(){this.instance.disconnect()}mute(t=!0){this.instance.mute(t)}get isMuted(){return this.instance.isMuted()}}let qk;(async()=>(await us(()=>import("./twilio.min-5KJe3qF0.js").then(e=>e.t),__vite__mapDeps([])),qk=window.Twilio.Device))();let owe=class extends twe{constructor(){super(),this.incomingCallbacks=[],this.instance=null}async createCall(t){let n={...wx(t)?{To:t}:t,viaApp:!0};const o=await this.instance.connect({params:n});return new Bm(o)}incoming(t){this.incomingCallbacks.push(t)}unregister(){this.instance.unregister()}async getAccessToken(t){let{data:n}=await Innoclapps.request("/voip/token",{params:{ttl:t}});return n.token}async connect(){const o=await this.getAccessToken(6e5),a=this.createTwilioDevice(o);return this.instance=a,this.instance.on("error",(r,s)=>this.emitter.emit(this.events.Error,{Call:new Bm(s),error:r})),this.instance.on("registering",r=>this.emitter.emit(this.events.Registering,this)),this.instance.on("registered",r=>this.emitter.emit(this.events.Registered,this)),this.instance.on("incoming",r=>{this.incomingCallbacks.forEach(s=>s(new Bm(r)))}),setInterval(async()=>{const r=await this.getAccessToken(6e5);this.instance.updateToken(r)},57e4),this}createTwilioDevice(t){return new qk(t,{logLevel:"silent"})}};const D1={CallComponent:ewe,Device:owe};class awe{constructor(t){this.client=t,this.device=null,this.readyCallbacks=[],this.callCallbacks=[]}onCall(t){this.callCallbacks.push(t)}ready(t){this.readyCallbacks.push(t)}async makeCall(t){const n=await this.device.createCall(t);return this.callCallbacks.forEach(o=>o({Call:n,isIncoming:!1})),n}connect(){if(this.client=="twilio")this.device=new D1.Device;else{console.error("VoIP client not found.");return}this.device.connect().then(t=>{t.incoming(n=>{this.callCallbacks.forEach(o=>o({Call:n,isIncoming:!0}))}),this.readyCallbacks.forEach(n=>n(t)),this.readyCallbacks=[]})}get callComponent(){return this.client=="twilio"?D1.CallComponent:(console.error("VoIP call component not found."),"")}}window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("CallsTab",B2e),e.component("CallsTabPanel",nIe),e.component("RecordTabTimelineCall",aIe),e.component("LoggedCallsCard",O2e),e.component("DetailPhoneCallableField",SIe),e.component("IndexPhoneCallableField",FIe),t.addRoute("settings",{path:"integrations/twilio",component:xIe,name:"settings-integrations-twilio",meta:{title:"Twilio"}}),t.addRoute("settings",{path:"calls",name:"calls-settings",component:lIe,meta:{title:at("calls::call.calls"),superAdmin:!0}});const n=this.scriptConfig("voip")||{};if(n.client&&this.scriptConfig("user_id")&&e.config.globalProperties.$gate.userCan("use voip")){const o=new awe(n.client);e.config.globalProperties.$voip=o,e.component("CallComponent",o.callComponent)}});const rwe={class:"mt-2 space-x-2 text-right"},lwe={__name:"CommentsEdit",props:{commentId:{required:!0,type:Number},body:{required:!0,type:String},commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["updated","cancelled"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{form:r}=Ze({body:n.body});async function s(){n.viaResource&&r.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId});let i=await r.put(`/comments/${n.commentId}`);o("updated",i),Innoclapps.success(a("comments::comment.updated"))}return(i,u)=>{const c=d("Editor"),m=d("IFormError"),f=d("IButton");return g(),D("div",null,[l(c,{modelValue:h(r).body,"onUpdate:modelValue":u[0]||(u[0]=v=>h(r).body=v),"with-mention":"",minimal:""},null,8,["modelValue"]),l(m,{error:h(r).getError("body")},null,8,["error"]),_("div",rwe,[l(f,{variant:"secondary",text:i.$t("core::app.cancel"),onClick:u[1]||(u[1]=v=>i.$emit("cancelled"))},null,8,["text"]),l(f,{variant:"primary",disabled:h(r).busy,text:i.$t("core::app.save"),onClick:s},null,8,["disabled","text"])])])}}},swe=["id"],iwe={class:"flex flex-wrap"},uwe=["textContent"],cwe={class:"flex justify-end space-x-2 py-2 text-base sm:text-sm"},dwe={__name:"CommentsListItem",props:{commentId:{required:!0,type:Number},body:{required:!0,type:String},createdBy:{required:!0,type:Number},createdAt:{required:!0,type:String},authorizations:{required:!0,type:Object},commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},highlighted:Boolean,viaResource:String,viaResourceId:[String,Number]},emits:["deleted","updated"],setup(e,{emit:t}){const n=e,o=t,{localizedDateTime:a}=rt(),{currentUser:r,findUserById:s}=Ne(),i=O(()=>s(n.createdBy)),{commengIsBeingCreated:u}=_a(n.commentableId,n.commentableType),c=M(!1);function m(){u.value=!0,ze(()=>{document.getElementById("add-comment-"+n.commentableType+"-"+n.commentableId).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),Gn(()=>{tinymce.activeEditor.setContent(""),tinymce.activeEditor.concordCommands.insertMentionUser(i.value.id,i.value.name)},650)})}async function f(v){await Innoclapps.request().delete(`/comments/${v}`),o("deleted",n.commentId)}return(v,y)=>{const b=d("IAvatar"),w=d("I18nT"),k=d("ITextBlockDark"),x=d("ITextBlock"),I=d("ILink");return g(),D("div",null,[_("div",{id:"comment-"+e.commentId,class:be(["comment rounded-lg",e.highlighted?"bg-info-50 dark:bg-info-600/30":"bg-white dark:bg-neutral-800",{"border border-neutral-200 px-4 py-2.5 shadow-sm dark:border-neutral-500/30":!c.value}])},[ne(_("div",iwe,[y[0]||(je(-1),y[0]=_("div",{class:"flex grow items-center"},[l(b,{class:"mr-1",src:i.value.avatar_url},null,8,["src"]),l(k,null,{default:p(()=>[l(w,{scope:"global",keypath:"comments::comment.user_left_comment"},{user:p(()=>[_("b",{class:"font-medium",textContent:Z(i.value.name)},null,8,uwe)]),_:1},8,["keypath"])]),_:1})]),je(1),y[0]),y[1]||(je(-1),y[1]=l(x,{class:"mt-1"},{default:p(()=>[le(Z(h(a)(e.createdAt)),1)]),_:1}),je(1),y[1])],512),[[pe,!c.value]]),Un([c.value],()=>ne(l(Ki,{class:"wysiwyg-text mt-3",html:e.body},null,8,["html"]),[[pe,!c.value]]),y,2),c.value?(g(),A(lwe,{key:0,class:"mt-3","comment-id":e.commentId,body:e.body,"commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,onCancelled:y[3]||(y[3]=C=>c.value=!1),onUpdated:y[4]||(y[4]=C=>(c.value=!1,v.$emit("updated",C)))},null,8,["comment-id","body","commentable-type","commentable-id","via-resource","via-resource-id"])):K("",!0)],10,swe),_("div",cwe,[e.createdBy!==h(r).id&&!c.value?(g(),A(I,{key:0,text:v.$t("comments::comment.reply"),onClick:m},null,8,["text"])):K("",!0),ne(l(I,{text:v.$t("core::app.edit"),onClick:y[5]||(y[5]=C=>c.value=!0)},null,8,["text"]),[[pe,e.authorizations.update&&!c.value]]),ne(l(I,{variant:"danger",text:v.$t("core::app.delete"),onClick:y[6]||(y[6]=C=>v.$confirm(()=>f(e.commentId)))},null,8,["text"]),[[pe,e.authorizations.delete&&!c.value]])])])}}},Uk={__name:"CommentsList",props:{autoFocusIfRequired:Boolean,comments:Array,commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["deleted","updated"],setup(e){const t=e,n=It(),o=M(null),a=M(null),r=O(()=>t.comments.length>0);function s(){!n.query.comment_id||!t.autoFocusIfRequired||ze(()=>{const i=o.value.querySelector("#comment-"+n.query.comment_id);i&&(i.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"}),a.value=parseInt(n.query.comment_id),Gn(()=>a.value=null,1e4))})}return Je(s),(i,u)=>{const c=d("IText");return g(),D("div",{ref_key:"commentsRef",ref:o},[r.value?K("",!0):(g(),A(c,{key:0,class:"text-center",text:i.$t("comments::comment.no_comments")},null,8,["text"])),(g(!0),D(fe,null,Ie(e.comments,m=>(g(),A(dwe,{key:m.id,class:"mb-3","commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"comment-id":m.id,highlighted:m.id===a.value,body:m.body,"created-by":m.created_by,"created-at":m.created_at,authorizations:m.authorizations,onDeleted:u[0]||(u[0]=f=>i.$emit("deleted",f)),onUpdated:u[1]||(u[1]=f=>i.$emit("updated",f))},null,8,["commentable-type","commentable-id","via-resource","via-resource-id","comment-id","highlighted","body","created-by","created-at","authorizations"]))),128))],512)}}},mwe=Object.assign({inheritAttrs:!1},{__name:"CollapsableCommentsList",props:{count:Number,listWrapperClass:[Array,Object,String],commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},comments:{required:!0,type:Array},viaResource:String,viaResourceId:[String,Number]},emits:["update:count","update:comments","deleted","updated"],setup(e,{emit:t}){const n=e,o=t,{requestInProgress:a,commentsAreVisible:r,commentsAreLoaded:s,toggleCommentsVisibility:i,getAllComments:u}=_a(n.commentableId,n.commentableType),c=O(()=>s.value?n.comments.length:n.count||0),m=O(()=>c.value>0);$e(c,b=>{o("update:count",b)}),$e(c,b=>{b===0&&(r.value=!1)},{flush:"post"}),La(r,()=>{if(n.count===0&&n.comments.length===1&&n.comments[0].was_recently_created===!0){s.value=!0;return}s.value||f()});async function f(){let b=await u(n.viaResource,n.viaResource?n.viaResourceId:null);s.value=!0,o("update:comments",b)}async function v(b){await ze(),m.value||(r.value=!1),o("deleted",b)}function y(b){o("updated",b)}return En(()=>{r.value=!1,s.value=!1}),(b,w)=>(g(),D(fe,null,[Se(b.$slots,"default",{commentsAreVisible:h(r),totalComments:c.value,hasComments:m.value,commentsAreBeingLoaded:h(a),toggleCommentsVisibility:h(i)}),ne(_("div",en(un(b.$attrs)),[h(s)?(g(),A(Uk,{key:0,comments:e.comments,"commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"auto-focus-if-required":!0,onUpdated:y,onDeleted:v},null,8,["comments","commentable-type","commentable-id","via-resource","via-resource-id"])):K("",!0)],16),[[pe,h(r)&&h(s)]])],64))}}),fwe={class:"mr-3 size-5 text-neutral-500 group-hover:text-neutral-700 dark:text-neutral-300 dark:group-hover:text-white"},pwe={__name:"CollapseableCommentsLink",props:{total:{type:Number,required:!0},collapsed:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},setup(e){return(t,n)=>{const o=d("Icon"),a=d("ISpinner"),r=d("ILink"),s=Ve("t");return g(),A(r,{class:"group mt-1 inline-flex items-center",basic:""},{default:p(()=>[_("span",fwe,[ne(l(o,{icon:"ChatAlt",class:"size-5"},null,512),[[pe,!e.loading]]),e.loading?(g(),A(a,{key:0,class:"mt-px size-4"})):K("",!0)]),ne(_("span",null,null,512),[[s,{path:"comments::comment.total",args:{total:e.total}}]]),l(o,{class:"ml-2 size-4",icon:e.collapsed?"ChevronDownSolid":"ChevronRightSolid"},null,8,["icon"])]),_:1})}}},vwe=["id"],hwe={class:"mt-2 flex justify-end space-x-2"},gwe={__name:"CommentsCreate",props:{commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["created","cancelled"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{form:r}=Ze({body:""},{resetOnSuccess:!0});function s(u){o("created",u),Innoclapps.success(a("comments::comment.created"))}function i(){n.viaResource&&r.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),r.post(`${n.commentableType}/${n.commentableId}/comments`).then(s)}return(u,c)=>{const m=d("Editor"),f=d("IFormError"),v=d("IButton");return g(),D("div",{id:"add-comment-"+e.commentableType+"-"+e.commentableId},[l(m,{ref:"editorRef",modelValue:h(r).body,"onUpdate:modelValue":c[0]||(c[0]=y=>h(r).body=y),placeholder:u.$t("comments::comment.add_placeholder"),"with-mention":"",minimal:"",onInit:c[1]||(c[1]=()=>u.$refs.editorRef.focus())},null,8,["modelValue","placeholder"]),l(f,{error:h(r).getError("body")},null,8,["error"]),_("div",hwe,[l(v,{variant:"secondary",text:u.$t("core::app.cancel"),onClick:c[2]||(c[2]=y=>u.$emit("cancelled"))},null,8,["text"]),l(v,{variant:"primary",disabled:h(r).busy,text:u.$t("core::app.save"),onClick:i},null,8,["disabled","text"])])],8,vwe)}}},bwe=Object.assign({inheritAttrs:!1},{__name:"CommentsAdd",props:{commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["created"],setup(e,{emit:t}){const n=e,o=t,{commengIsBeingCreated:a}=_a(n.commentableId,n.commentableType);function r(s){o("created",s)}return rn(()=>{a.value=!1}),(s,i)=>{const u=d("Icon"),c=d("ILink");return g(),D(fe,null,[ne(l(c,Ue(s.$attrs,{class:"inline-flex items-center",onClick:i[0]||(i[0]=m=>a.value=!0)}),{default:p(()=>[l(u,{icon:"PlusSolid",class:"mr-1.5 size-4"}),le(" "+Z(s.$t("comments::comment.add")),1)]),_:1},16),[[pe,!h(a)]]),h(a)?(g(),A(gwe,{key:0,"commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,onCreated:r,onCancelled:i[1]||(i[1]=m=>a.value=!1)},null,8,["commentable-type","commentable-id","via-resource","via-resource-id"])):K("",!0)],64)}}}),ywe={visible:{},loaded:{},commentBeingCreated:{},requestInProgress:!1},_we={SET_VISIBILITY(e,t){e.visible[String(t.commentableId+t.commentableType)]=t.visible},SET_ADD_COMMENT_VISIBILITY(e,t){e.commentBeingCreated=Object.assign({},e.commentBeingCreated,{[String(t.commentableId+t.commentableType)]:t.value})},SET_LOADED(e,t){e.loaded=Object.assign({},e.loaded,{[String(t.commentableId+t.commentableType)]:t.value})},SET_REQUEST_IN_PROGRESS(e,t){e.requestInProgress=t}},Iwe={areVisibleFor:e=>(t,n)=>!!e.visible[String(t+n)],isCommentBeingCreatedFor:e=>(t,n)=>!!e.commentBeingCreated[String(t+n)],areLoadedFor:e=>(t,n)=>!!e.loaded[String(t+n)]},wwe={async getAll({commit:e},{resourceName:t,resourceId:n,viaResource:o,viaResourceId:a}){e("SET_REQUEST_IN_PROGRESS",!0);let{data:r}=await Innoclapps.request(`${t}/${n}/comments`,{params:a&&a?{via_resource:o,via_resource_id:a}:{}});return e("SET_REQUEST_IN_PROGRESS",!1),r}},xwe={state:ywe,mutations:_we,getters:Iwe,actions:wwe,namespaced:!0};window.Innoclapps&&Innoclapps.booting(function(e,t,n){e.component("CollapseableCommentsLink",pwe),e.component("CommentsAdd",bwe),e.component("CollapsableCommentsList",mwe),e.component("CommentsList",Uk),n.registerModule("comments",xwe)});const kwe={class:"mb-2 flex items-center justify-between"},$we={class:"flex items-center space-x-2"},Cwe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},Swe={class:"shrink-0 self-start"},Twe={class:"min-w-0 flex-1"},Ewe={class:"max-w-44 truncate sm:max-w-full"},Fwe={class:"block shrink-0 md:hidden md:group-hover:block"},Awe={class:"flex items-center sm:space-x-1"},jk={__name:"ContactsList",props:{contacts:{type:[Object,Array],required:!0},limit:{type:Number,default:3},emptyText:String,title:String,floatMode:{type:String,default:"detail"}},setup(e){const t=e,n=Innoclapps.resourceName("contacts"),{t:o}=Ee(),{floatResource:a}=ao(),r=M(!1),s=O(()=>Vt(qn(t.contacts),m=>new Date(m.created_at),["asc"])),i=O(()=>s.value.length),u=O(()=>i.value>0),c=O(()=>t.title||o("contacts::contact.contacts"));return(m,f)=>{const v=d("IText"),y=d("ITextDisplay"),b=d("ILink"),w=d("ITextSmall"),k=d("IAvatar"),x=d("IButton"),I=Ve("t");return g(),D(fe,null,[_("div",kwe,[l(y,null,{default:p(()=>[le(Z(c.value)+" ",1),ne(l(v,{class:"ml-0.5 inline",text:"("+i.value+")"},null,8,["text"]),[[pe,i.value>0]])]),_:1}),_("div",$we,[i.value>e.limit?(g(),A(b,{key:0,class:"shrink-0 text-sm sm:text-xs",text:r.value?m.$t("core::app.show_less"):m.$t("core::app.show_all"),onClick:f[0]||(f[0]=C=>r.value=!r.value)},null,8,["text"])):K("",!0),i.value>e.limit?ne((g(),A(w,{key:1},null,512)),[[pe,!r.value],[I,{path:"core::app.has_more",args:{count:i.value-e.limit}}]]):K("",!0),Se(m.$slots,"top-actions")])]),_("ul",Cwe,[(g(!0),D(fe,null,Ie(s.value,(C,S)=>ne((g(),D("li",{key:C.id,class:"group flex items-center space-x-2 py-3 last:pb-0"},[_("div",Swe,[l(k,{size:"sm",src:C.avatar_url},null,8,["src"])]),_("div",Twe,[_("div",Ewe,[l(b,{class:"font-medium",href:C.path,text:C.display_name,basic:"",onClick:T=>h(a)({resourceName:h(n),resourceId:C.id,mode:e.floatMode})},null,8,["href","text","onClick"]),l(v,{class:"truncate",text:C.job_title},null,8,["text"])])]),_("div",Fwe,[_("div",Awe,[C.authorizations.view?(g(),A(x,{key:0,class:"hidden sm:inline-flex",text:m.$t("core::app.view_record"),to:C.path,basic:"",small:""},null,8,["text","to"])):K("",!0),C.authorizations.view?(g(),A(x,{key:1,class:"inlnie-flex sm:hidden",icon:"ChevronRightSolid",to:C.path,small:"",basic:""},null,8,["to"])):K("",!0),Se(m.$slots,"actions",{contact:C})])])])),[[pe,S<=e.limit-1||r.value]])),128))]),ne(l(v,{text:e.emptyText},null,8,["text"]),[[pe,!u.value]])],64)}}},zk={__name:"CompanyContactsList",props:{contacts:{required:!0,type:Array},companyId:{required:!0,type:Number},authorizeDissociate:{required:!0,type:Boolean},showCreateButton:{required:!0,type:Boolean}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=t,o=Pe("detachResourceAssociations"),{t:a}=Ee();async function r(s){await o({contacts:[s]}),n("dissociated",s),Innoclapps.success(a("core::resource.dissociated"))}return(s,i)=>{const u=d("IButton"),c=Ve("i-tooltip");return g(),A(jk,{contacts:e.contacts,"empty-text":s.$t("contacts::company.no_contacts_associated")},{actions:p(({contact:m})=>[ne(l(u,{icon:"XSolid",basic:"",small:"",onClick:f=>s.$confirm(()=>r(m.id))},null,8,["onClick"]),[[pe,e.authorizeDissociate],[c,s.$t("contacts::contact.dissociate"),void 0,{left:!0}]])]),"top-actions":p(()=>[e.showCreateButton?ne((g(),A(u,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:i[0]||(i[0]=m=>s.$emit("createRequested"))},null,512)),[[c,s.$t("contacts::contact.add")]]):K("",!0)]),_:1},8,["contacts","empty-text"])}}},Rwe={class:"mb-2 flex items-center justify-between"},Dwe={class:"flex items-center space-x-2"},Owe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},Bwe={class:"min-w-0 flex-1"},Nwe={class:"max-w-44 truncate sm:max-w-full"},Pwe={class:"sm:flex sm:space-x-2"},Mwe={key:0,class:"-mt-0.5 hidden sm:inline"},Vwe={class:"block shrink-0 md:hidden md:group-hover:block"},Lwe={class:"flex items-center sm:space-x-1"},Hk={__name:"DealsList",props:{deals:{type:[Object,Array],required:!0},limit:{type:Number,default:3},emptyText:String,title:String,floatMode:{type:String,default:"detail"}},setup(e){const t=e,n=Innoclapps.resourceName("deals"),{t:o}=Ee(),{floatResource:a}=ao(),{formatMoney:r}=ro(),s=M(!1),i=O(()=>qn(t.deals)),u=O(()=>Vt(i.value.filter(w=>w.status==="won"),w=>new Date(w.won_date),"desc")),c=O(()=>Vt(i.value.filter(w=>w.status==="lost"),w=>new Date(w.lost_date),"desc")),m=O(()=>Vt(i.value.filter(w=>w.status==="open"),w=>new Date(w.created_at))),f=O(()=>[...m.value,...c.value,...u.value]),v=O(()=>i.value.length),y=O(()=>v.value>0),b=O(()=>t.title||o("deals::deal.deals"));return(w,k)=>{const x=d("IText"),I=d("ITextDisplay"),C=d("ILink"),S=d("ITextSmall"),T=d("IBadge"),E=d("IButton"),$=Ve("t");return g(),D(fe,null,[_("div",Rwe,[l(I,null,{default:p(()=>[le(Z(b.value)+" ",1),ne(l(x,{class:"ml-0.5 inline",text:"("+v.value+")"},null,8,["text"]),[[pe,v.value>0]])]),_:1}),_("div",Dwe,[v.value>e.limit?(g(),A(C,{key:0,class:"shrink-0 text-sm sm:text-xs",text:s.value?w.$t("core::app.show_less"):w.$t("core::app.show_all"),onClick:k[0]||(k[0]=F=>s.value=!s.value)},null,8,["text"])):K("",!0),v.value>e.limit?ne((g(),A(S,{key:1},null,512)),[[pe,!s.value],[$,{path:"core::app.has_more",args:{count:v.value-e.limit}}]]):K("",!0),Se(w.$slots,"top-actions")])]),_("ul",Owe,[(g(!0),D(fe,null,Ie(f.value,(F,R)=>ne((g(),D("li",{key:F.id,class:"group flex items-center space-x-2 py-3 last:pb-0"},[l(T,{class:"shrink-0",variant:F.status==="won"?"success":F.status==="lost"?"danger":"neutral",text:w.$t("deals::deal.status."+F.status)},null,8,["variant","text"]),_("div",Bwe,[_("div",Nwe,[l(C,{class:"font-medium",href:F.path,text:F.display_name,basic:"",onClick:B=>h(a)({resourceName:h(n),resourceId:F.id,mode:e.floatMode})},null,8,["href","text","onClick"]),_("div",Pwe,[l(x,{text:F.stage.name},null,8,["text"]),Object.hasOwn(F,"amount")?(g(),D("span",Mwe," – ")):K("",!0),Object.hasOwn(F,"amount")?(g(),A(x,{key:1,text:h(r)(F.amount)},null,8,["text"])):K("",!0)])])]),_("div",Vwe,[_("div",Lwe,[F.authorizations.view?(g(),A(E,{key:0,class:"hidden sm:inline-flex",text:w.$t("core::app.view_record"),to:F.path,basic:"",small:""},null,8,["text","to"])):K("",!0),F.authorizations.view?(g(),A(E,{key:1,class:"inlnie-flex sm:hidden",icon:"ChevronRightSolid",to:F.path,small:"",basic:""},null,8,["to"])):K("",!0),Se(w.$slots,"actions",{deal:F})])])])),[[pe,R<=e.limit-1||s.value]])),128))]),ne(l(x,{text:e.emptyText},null,8,["text"]),[[pe,!y.value]])],64)}}},Wk={__name:"CompanyDealsList",props:{deals:{required:!0,type:Array},companyId:{required:!0,type:Number},authorizeDissociate:{required:!0,type:Boolean},showCreateButton:{required:!0,type:Boolean}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=t,o=Pe("detachResourceAssociations"),{t:a}=Ee();async function r(s){await o({deals:[s]}),n("dissociated",s),Innoclapps.success(a("core::resource.dissociated"))}return(s,i)=>{const u=d("IButton"),c=Ve("i-tooltip");return g(),A(Hk,{deals:e.deals,"empty-text":s.$t("contacts::company.no_deals_associated")},{actions:p(({deal:m})=>[ne(l(u,{icon:"XSolid",basic:"",small:"",onClick:f=>s.$confirm(()=>r(m.id))},null,8,["onClick"]),[[pe,e.authorizeDissociate],[c,s.$t("deals::deal.dissociate"),void 0,{left:!0}]])]),"top-actions":p(()=>[e.showCreateButton?ne((g(),A(u,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:i[0]||(i[0]=m=>s.$emit("createRequested"))},null,512)),[[c,s.$t("deals::deal.add")]]):K("",!0)]),_:1},8,["deals","empty-text"])}}},qwe={key:1,class:"flex flex-col"},Uwe={class:"mt-6 h-2 border-t border-neutral-200 dark:border-neutral-500/30"},jwe={class:"flex justify-end space-x-2"},zwe={__name:"CompanyFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},emits:["viewRequested"],setup(e){const t=e,n=Innoclapps.resourceName("companies"),{form:o}=Ze(),a=M(!0),r=M(!1),s=M(!1),i=Pe("synchronizeAndEmitUpdatedEvent"),u=Pe("hydrateFields"),c=Pe("totalCollapsableFields");function m(y,b){u({[y]:b}),o.fill(y,b.map(w=>w.id))}function f(y){r.value=!1,i({contacts:y.contact}),ze(()=>{m("contacts",t.resource.contacts)})}function v(y){s.value=!1,i({deals:y.deal}),ze(()=>{m("deals",t.resource.deals)})}return(y,b)=>{const w=d("FieldsPlaceholder"),k=d("FieldsButtonCollapse"),x=d("FormFields"),I=d("DetailFields"),C=d("IText"),S=d("ITextDisplay"),T=d("CreateContactModal"),E=d("CreateDealModal"),$=d("IButton"),F=d("ISlideover");return g(),A(F,{id:"companyFloatingModal",title:e.resource.display_name,"static-backdrop":"",form:"",onSubmit:b[13]||(b[13]=R=>e.updateHandler(h(o)))},{"modal-footer":p(()=>[_("div",jwe,[l($,{variant:"secondary",disabled:!e.floatingReady,text:y.$t("core::app.view_record"),onClick:b[12]||(b[12]=R=>y.$emit("viewRequested",R))},null,8,["disabled","text"]),e.mode==="edit"?(g(),A($,{key:0,type:"submit",variant:"primary",loading:h(o).busy,text:y.$t("core::app.save"),disabled:!e.floatingReady||h(o).busy||!e.resource.authorizations.update},null,8,["loading","text","disabled"])):K("",!0)])]),default:p(()=>[e.floatingReady?(g(),D("div",qwe,[h(c)>0?(g(),A(k,{key:0,collapsed:a.value,"onUpdate:collapsed":b[0]||(b[0]=R=>a.value=R),class:"mb-2 ml-auto",total:h(c)},null,8,["collapsed","total"])):K("",!0),e.mode==="edit"?(g(),A(x,{key:1,fields:e.fields,form:h(o),"resource-name":h(n),"resource-id":e.resource.id,collapsed:a.value,"is-floating":"",onUpdateFieldValue:b[1]||(b[1]=R=>h(o).fill(R.attribute,R.value)),onSetInitialValue:b[2]||(b[2]=R=>h(o).set(R.attribute,R.value))},null,8,["fields","form","resource-name","resource-id","collapsed"])):(g(),A(I,{key:2,fields:e.fields,"resource-name":h(n),"resource-id":e.resource.id,resource:e.resource,collapsed:a.value,"is-floating":"",onUpdated:b[3]||(b[3]=R=>h(i)(R,!0))},null,8,["fields","resource-name","resource-id","resource","collapsed"])),ne(_("div",Uwe,null,512),[[pe,e.mode==="detail"]]),_("div",{class:be(["mt-6 space-y-6 sm:space-y-8",e.mode==="detail"?"sm:px-10":"px-1"])},[_("div",null,[l(zk,{"float-mode":e.mode,"company-id":e.resource.id,contacts:e.resource.contacts,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onDissociated:b[4]||(b[4]=R=>(m("contacts",e.resource.contacts),h(i)({contacts:{id:R,_delete:!0}}))),onCreateRequested:b[5]||(b[5]=R=>r.value=!0)},null,8,["float-mode","company-id","contacts","authorize-dissociate","show-create-button"])]),_("div",null,[l(Wk,{"float-mode":e.mode,"company-id":e.resource.id,deals:e.resource.deals,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onDissociated:b[6]||(b[6]=R=>(m("deals",e.resource.deals),h(i)({deals:{id:R,_delete:!0}}))),onCreateRequested:b[7]||(b[7]=R=>s.value=!0)},null,8,["float-mode","company-id","deals","authorize-dissociate","show-create-button"])]),_("div",null,[l(S,null,{default:p(()=>[le(Z(y.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(C,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":h(n),"resource-id":e.resource.id,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,"is-floating":"",onUploaded:b[8]||(b[8]=R=>h(i)({media:[R]})),onDeleted:b[9]||(b[9]=R=>h(i)({media:{id:R.id,_delete:!0}}))},null,8,["resource-name","resource-id","media","authorize-delete"])])],2),l(T,{visible:r.value,"onUpdate:visible":b[10]||(b[10]=R=>r.value=R),overlay:!1,companies:[e.resource],onCreated:f,onRestored:f},null,8,["visible","companies"]),l(E,{visible:s.value,"onUpdate:visible":b[11]||(b[11]=R=>s.value=R),overlay:!1,companies:[e.resource],onCreated:v,onRestored:v},null,8,["visible","companies"])])):(g(),A(w,{key:0}))]),_:1},8,["title"])}}},Hwe={},Wwe={class:"inline-flex size-8 items-center justify-center rounded-full bg-neutral-200 dark:bg-neutral-600"};function Gwe(e,t){const n=d("Icon");return g(),D("span",Wwe,[l(n,{icon:"OfficeBuilding",class:"size-5 text-neutral-400 dark:text-neutral-300"})])}const Gk=fn(Hwe,[["render",Gwe]]),Kwe={class:"mb-2 flex items-center justify-between"},Zwe={class:"flex items-center space-x-2"},Ywe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},Xwe={class:"shrink-0"},Qwe={class:"min-w-0 flex-1 truncate"},Jwe={class:"block shrink-0 md:hidden md:group-hover:block"},exe={class:"flex items-center sm:space-x-1"},Uv={__name:"CompaniesList",props:{companies:{type:[Object,Array],required:!0},limit:{type:Number,default:3},emptyText:String,title:String,floatMode:{type:String,default:"detail"}},setup(e){const t=e,n=Innoclapps.resourceName("companies"),{t:o}=Ee(),{floatResource:a}=ao(),r=M(!1),s=O(()=>Vt(qn(t.companies),m=>new Date(m.created_at),["asc"])),i=O(()=>s.value.length),u=O(()=>i.value>0),c=O(()=>t.title||o("contacts::company.companies"));return(m,f)=>{const v=d("IText"),y=d("ITextDisplay"),b=d("ILink"),w=d("ITextSmall"),k=d("IButton"),x=Ve("t");return g(),D(fe,null,[_("div",Kwe,[l(y,null,{default:p(()=>[le(Z(c.value)+" ",1),ne(l(v,{class:"ml-0.5 inline",text:"("+i.value+")"},null,8,["text"]),[[pe,i.value>0]])]),_:1}),_("div",Zwe,[i.value>e.limit?(g(),A(b,{key:0,class:"shrink-0 text-sm sm:text-xs",text:r.value?m.$t("core::app.show_less"):m.$t("core::app.show_all"),onClick:f[0]||(f[0]=I=>r.value=!r.value)},null,8,["text"])):K("",!0),i.value>e.limit?ne((g(),A(w,{key:1},null,512)),[[pe,!r.value],[x,{path:"core::app.has_more",args:{count:i.value-e.limit}}]]):K("",!0),Se(m.$slots,"top-actions")])]),_("ul",Ywe,[(g(!0),D(fe,null,Ie(s.value,(I,C)=>ne((g(),D("li",{key:I.id,class:"group flex items-center space-x-2 py-3 last:pb-0"},[_("div",Xwe,[l(Gk)]),_("div",Qwe,[l(b,{class:"font-medium",href:I.path,text:I.display_name,basic:"",onClick:S=>h(a)({resourceName:h(n),resourceId:I.id,mode:e.floatMode})},null,8,["href","text","onClick"]),ne(_("p",null,[l(b,{class:"opacity-90",href:"http://"+I.domain,text:I.domain,basic:""},null,8,["href","text"])],512),[[pe,I.domain]])]),_("div",Jwe,[_("div",exe,[I.authorizations.view?(g(),A(k,{key:0,class:"hidden sm:inline-flex",text:m.$t("core::app.view_record"),to:I.path,basic:"",small:""},null,8,["text","to"])):K("",!0),I.authorizations.view?(g(),A(k,{key:1,class:"inlnie-flex sm:hidden",icon:"ChevronRightSolid",to:I.path,small:"",basic:""},null,8,["to"])):K("",!0),Se(m.$slots,"actions",{company:I})])])])),[[pe,C<=e.limit-1||r.value]])),128))]),ne(l(v,{text:e.emptyText},null,8,["text"]),[[pe,!u.value]])],64)}}},Kk={__name:"ContactCompaniesList",props:{companies:{required:!0,type:Array},contactId:{required:!0,type:Number},authorizeDissociate:{required:!0,type:Boolean},showCreateButton:{required:!0,type:Boolean}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=t,o=Pe("detachResourceAssociations"),{t:a}=Ee();async function r(s){await o({companies:[s]}),n("dissociated",s),Innoclapps.success(a("core::resource.dissociated"))}return(s,i)=>{const u=d("IButton"),c=Ve("i-tooltip");return g(),A(Uv,{companies:e.companies,"empty-text":s.$t("contacts::contact.no_companies_associated")},{actions:p(({company:m})=>[ne(l(u,{icon:"XSolid",basic:"",small:"",onClick:f=>s.$confirm(()=>r(m.id))},null,8,["onClick"]),[[pe,e.authorizeDissociate],[c,s.$t("contacts::company.dissociate"),void 0,{left:!0}]])]),"top-actions":p(()=>[e.showCreateButton?ne((g(),A(u,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:i[0]||(i[0]=m=>s.$emit("createRequested"))},null,512)),[[c,s.$t("contacts::company.add")]]):K("",!0)]),_:1},8,["companies","empty-text"])}}},Zk={__name:"ContactDealsList",props:{deals:{required:!0,type:Array},contactId:{required:!0,type:Number},authorizeDissociate:{required:!0,type:Boolean},showCreateButton:{required:!0,type:Boolean},displayMode:{default:"Boolean"}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=t,{t:o}=Ee(),a=Pe("detachResourceAssociations");async function r(s){await a({deals:[s]}),n("dissociated",s),Innoclapps.success(o("core::resource.dissociated"))}return(s,i)=>{const u=d("IButton"),c=Ve("i-tooltip");return g(),A(Hk,{deals:e.deals,"empty-text":s.$t("contacts::contact.no_deals_associated")},{actions:p(({deal:m})=>[ne(l(u,{icon:"XSolid",basic:"",small:"",onClick:f=>s.$confirm(()=>r(m.id))},null,8,["onClick"]),[[pe,e.authorizeDissociate],[c,s.$t("deals::deal.dissociate"),void 0,{left:!0}]])]),"top-actions":p(()=>[e.showCreateButton?ne((g(),A(u,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:i[0]||(i[0]=m=>s.$emit("createRequested"))},null,512)),[[c,s.$t("deals::deal.add")]]):K("",!0)]),_:1},8,["deals","empty-text"])}}},txe={key:1,class:"flex flex-col"},nxe={class:"mt-6 h-2 border-t border-neutral-200 dark:border-neutral-500/30"},oxe={class:"flex justify-end space-x-2"},axe={__name:"ContactFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},emits:["viewRequested"],setup(e){const t=e,n=Innoclapps.resourceName("contacts"),{form:o}=Ze(),a=M(!0),r=M(!1),s=M(!1),i=Pe("synchronizeAndEmitUpdatedEvent"),u=Pe("hydrateFields"),c=Pe("totalCollapsableFields");function m(y,b){u({[y]:b}),o.fill(y,b.map(w=>w.id))}function f(y){r.value=!1,i({companies:y.company}),ze(()=>{m("companies",t.resource.companies)})}function v(y){s.value=!1,i({deals:y.deal}),ze(()=>{m("deals",t.resource.deals)})}return(y,b)=>{const w=d("FieldsPlaceholder"),k=d("FieldsButtonCollapse"),x=d("FormFields"),I=d("DetailFields"),C=d("IText"),S=d("ITextDisplay"),T=d("CreateCompanyModal"),E=d("CreateDealModal"),$=d("IButton"),F=d("ISlideover");return g(),A(F,{id:"contactFloatingModal",title:e.resource.display_name,"static-backdrop":"",form:"",onSubmit:b[13]||(b[13]=R=>e.updateHandler(h(o)))},{"modal-footer":p(()=>[_("div",oxe,[l($,{variant:"secondary",disabled:!e.floatingReady,text:y.$t("core::app.view_record"),onClick:b[12]||(b[12]=R=>y.$emit("viewRequested",R))},null,8,["disabled","text"]),e.mode==="edit"?(g(),A($,{key:0,type:"submit",variant:"primary",loading:h(o).busy,text:y.$t("core::app.save"),disabled:!e.floatingReady||h(o).busy||!e.resource.authorizations.update},null,8,["loading","text","disabled"])):K("",!0)])]),default:p(()=>[e.floatingReady?(g(),D("div",txe,[h(c)>0?(g(),A(k,{key:0,collapsed:a.value,"onUpdate:collapsed":b[0]||(b[0]=R=>a.value=R),class:"mb-2 ml-auto",total:h(c)},null,8,["collapsed","total"])):K("",!0),e.mode==="edit"?(g(),A(x,{key:1,fields:e.fields,form:h(o),"resource-name":h(n),"resource-id":e.resource.id,collapsed:a.value,"is-floating":"",onUpdateFieldValue:b[1]||(b[1]=R=>h(o).fill(R.attribute,R.value)),onSetInitialValue:b[2]||(b[2]=R=>h(o).set(R.attribute,R.value))},null,8,["fields","form","resource-name","resource-id","collapsed"])):(g(),A(I,{key:2,fields:e.fields,"resource-name":h(n),"resource-id":e.resource.id,resource:e.resource,collapsed:a.value,"is-floating":"",onUpdated:b[3]||(b[3]=R=>h(i)(R,!0))},null,8,["fields","resource-name","resource-id","resource","collapsed"])),ne(_("div",nxe,null,512),[[pe,e.mode==="detail"]]),_("div",{class:be(["mt-6 space-y-6 sm:space-y-8",e.mode==="detail"?"sm:px-10":"px-1"])},[_("div",null,[l(Kk,{"float-mode":e.mode,"contact-id":e.resource.id,companies:e.resource.companies,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onDissociated:b[4]||(b[4]=R=>(m("companies",e.resource.companies),h(i)({companies:{id:R,_delete:!0}}))),onCreateRequested:b[5]||(b[5]=R=>r.value=!0)},null,8,["float-mode","contact-id","companies","authorize-dissociate","show-create-button"])]),_("div",null,[l(Zk,{"float-mode":e.mode,"contact-id":e.resource.id,deals:e.resource.deals,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onDissociated:b[6]||(b[6]=R=>(m("deals",e.resource.deals),h(i)({deals:{id:R,_delete:!0}}))),onCreateRequested:b[7]||(b[7]=R=>s.value=!0)},null,8,["float-mode","contact-id","deals","authorize-dissociate","show-create-button"])]),_("div",null,[l(S,null,{default:p(()=>[le(Z(y.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(C,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":h(n),"resource-id":e.resource.id,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,"is-floating":"",onUploaded:b[8]||(b[8]=R=>h(i)({media:[R]})),onDeleted:b[9]||(b[9]=R=>h(i)({media:{id:R.id,_delete:!0}}))},null,8,["resource-name","resource-id","media","authorize-delete"])])],2),l(T,{visible:r.value,"onUpdate:visible":b[10]||(b[10]=R=>r.value=R),overlay:!1,contacts:[e.resource],onCreated:f,onRestored:f},null,8,["visible","contacts"]),l(E,{visible:s.value,"onUpdate:visible":b[11]||(b[11]=R=>s.value=R),overlay:!1,contacts:[e.resource],onCreated:v,onRestored:v},null,8,["visible","contacts"])])):(g(),A(w,{key:0}))]),_:1},8,["title"])}}},rxe={__name:"CreateCompanyModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,createUsing:Function,withExtendedSubmitButtons:Boolean,fieldsVisible:{type:Boolean,default:!0},title:String,contacts:Array,deals:Array},emits:["created","restored","update:visible","ready"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),r=_t(),s=Innoclapps.resourceName("companies"),i=M(!1),u=M(!1),c=O(()=>k("phones")),m=Pt(null),f=Pt(null),v=M([]),y=M({byName:!1,byEmail:!1,byPhone:{}}),{fields:b,hasFields:w,findField:k,getCreateFields:x}=yn(),{form:I}=Ze(),{createResource:C}=Dt(s);La(()=>n.visible,z,{immediate:!0}),ma(()=>I.email,H=>{if(!H){m.value=null;return}$(H,"email").then(({data:j})=>{m.value=j.length>0?j[0]:null})},{debounce:500}),ma(()=>I.name,H=>{if(!H){f.value=null;return}$(H,"name").then(({data:j})=>{f.value=j.length>0?j[0]:null})},{debounce:500}),ma(()=>I.phones,H=>{if(!H)return;const j=H.filter(N=>!N.number||!(c.value.callingPrefix&&c.value.callingPrefix.trim()===N.number)).map(N=>N.number);if(j.length===0){v.value=[];return}Innoclapps.request("/trashed/companies/search",{params:{q:j.join(","),search_fields:"phones.number:in"}}).then(({data:N})=>{v.value=N})},{debounce:500,deep:!0});function S(H){if(H.indexRoute={name:"company-index"},H.action==="go-to-list")return r.push(H.indexRoute);if(H.action!=="create-another"&&n.redirectToView){let j=H.company;r.company=j,r.push({name:"view-company",params:{id:j.id}})}}function T(H,j){k(H).options.push(j),I[H].push(j.id)}function E(){b.value=[],I.reset()}function $(H,j){return Innoclapps.request("/trashed/companies/search",{params:{q:H,search_fields:j+":="}})}function F(H,j){Innoclapps.request().post(`/trashed/companies/${H}`).then(({data:N})=>{typeof y.value[j]=="object"?y.value[j][N.id]=!0:y.value[j]=!0,o("restored",N)})}function R(){P().then(S)}function B(){P("create-another").then(H=>{I.reset(),S(H)})}function V(){P("go-to-list").then(S)}async function P(H=null){let N={company:await C(I).catch(L=>(L.isValidationError()&&Innoclapps.error(a("core::app.form_validation_failed"),3e3),Promise.reject(L))),isRegularAction:H===null,action:H};return o("created",N),Innoclapps.success(a("core::resource.created")),N}async function z(){const H=await x(s),j=N=>Et(H,["attribute",N]);for(let N of["contacts","deals"]){if(!n[N])continue;let L=j(N);L===-1?I.set(N,n[N].map(U=>typeof U=="object"?U.id:U)):H[L].value=n[N]}b.value=H,o("ready",{fields:b,form:I})}return(H,j)=>{const N=d("FieldsPlaceholder"),L=d("ILink"),U=d("IAlertBody"),ee=d("IButton"),G=d("IAlertActions"),W=d("IAlert"),ae=d("FormFields"),ue=d("IDropdownItem"),ce=d("IDropdownMenu"),oe=d("IExtendedDropdown"),ie=d("CreateDealModal"),Q=d("CreateContactModal"),se=d("ISlideover");return g(),A(se,{id:"createCompanyModal",visible:e.visible,title:e.title||H.$t("contacts::company.create"),"ok-text":H.$t("core::app.create"),"ok-disabled":h(I).busy,"static-backdrop":"",form:"",onHidden:E,onSubmit:j[13]||(j[13]=me=>e.createUsing?e.createUsing(R):R()),"onUpdate:visible":j[14]||(j[14]=me=>H.$emit("update:visible",me))},bn({default:p(()=>[h(w)?K("",!0):(g(),A(N,{key:0})),Se(H.$slots,"top",{isReady:h(w)}),ne(_("div",null,[l(ae,{fields:h(b),form:h(I),"resource-name":h(s),"is-floating":"","focus-first":"",onUpdateFieldValue:j[6]||(j[6]=me=>h(I).fill(me.attribute,me.value)),onSetInitialValue:j[7]||(j[7]=me=>h(I).set(me.attribute,me.value))},bn({"after-deals-field":p(()=>[l(L,{class:"-mt-1 block text-right",onClick:j[0]||(j[0]=me=>i.value=!0)},{default:p(()=>[le(" + "+Z(H.$t("deals::deal.create")),1)]),_:1})]),"after-contacts-field":p(()=>[l(L,{class:"-mt-1 block text-right",onClick:j[1]||(j[1]=me=>u.value=!0)},{default:p(()=>[le(" + "+Z(H.$t("contacts::contact.create")),1)]),_:1})]),_:2},[m.value!==null?{name:"after-email-field",fn:p(()=>[l(W,{class:"mb-3",dismissible:"",onDismissed:j[3]||(j[3]=me=>{y.value.byEmail=!1,m.value=null})},{default:p(({variant:me})=>[l(U,null,{default:p(()=>[le(Z(H.$t("contacts::company.exists_in_trash_by_email")),1)]),_:1}),l(G,null,{default:p(()=>[y.value.byEmail?K("",!0):(g(),A(ee,{key:0,variant:me,text:H.$t("core::app.soft_deletes.restore"),ghost:"",onClick:j[2]||(j[2]=xe=>F(m.value.id,"byEmail"))},null,8,["variant","text"])),y.value.byEmail?(g(),A(ee,{key:1,variant:me,to:{name:"view-company",params:{id:m.value.id}},text:H.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):K("",!0)]),_:2},1024)]),_:1})]),key:"0"}:void 0,f.value!==null?{name:"after-name-field",fn:p(()=>[f.value?(g(),A(W,{key:0,class:"mb-3",dismissible:"",onDismissed:j[5]||(j[5]=me=>{y.value.byName=!1,f.value=null})},{default:p(({variant:me})=>[l(U,null,{default:p(()=>[le(Z(H.$t("contacts::company.exists_in_trash_by_name")),1)]),_:1}),l(G,null,{default:p(()=>[y.value.byName?K("",!0):(g(),A(ee,{key:0,variant:me,text:H.$t("core::app.soft_deletes.restore"),ghost:"",onClick:j[4]||(j[4]=xe=>F(f.value.id,"byName"))},null,8,["variant","text"])),y.value.byName?(g(),A(ee,{key:1,variant:me,to:{name:"view-company",params:{id:f.value.id}},text:H.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):K("",!0)]),_:2},1024)]),_:1})):K("",!0)]),key:"1"}:void 0,v.value.length>0?{name:"after-phones-field",fn:p(()=>[(g(!0),D(fe,null,Ie(v.value,(me,xe)=>(g(),A(W,{key:me.id,class:"mb-3",dismissible:"",onDismissed:de=>{y.value.byPhone[me.id]=!1,v.value[xe]=null}},{default:p(({variant:de})=>[l(U,null,{default:p(()=>[le(Z(H.$t("contacts::company.exists_in_trash_by_phone",{company:me.display_name,phone_numbers:me.phones.map(he=>he.number).join(",")})),1)]),_:2},1024),l(G,null,{default:p(()=>[y.value.byPhone[me.id]?K("",!0):(g(),A(ee,{key:0,variant:de,text:H.$t("core::app.soft_deletes.restore"),ghost:"",onClick:he=>F(me.id,"byPhone")},null,8,["variant","text","onClick"])),y.value.byPhone[me.id]?(g(),A(ee,{key:1,variant:de,to:{name:"view-company",params:{id:me.id}},text:H.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):K("",!0)]),_:2},1024)]),_:2},1032,["onDismissed"]))),128))]),key:"2"}:void 0]),1032,["fields","form","resource-name"])],512),[[pe,e.fieldsVisible]]),l(ie,{visible:i.value,"onUpdate:visible":j[8]||(j[8]=me=>i.value=me),overlay:!1,onCreated:j[9]||(j[9]=me=>(T("deals",me.deal),i.value=!1))},null,8,["visible"]),l(Q,{visible:u.value,"onUpdate:visible":j[10]||(j[10]=me=>u.value=me),overlay:!1,onCreated:j[11]||(j[11]=me=>(T("contacts",me.contact),u.value=!1)),onRestored:j[12]||(j[12]=me=>(T("contacts",me),u.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(oe,{type:"submit",placement:"top-end",disabled:h(I).busy,loading:h(I).busy,text:H.$t("core::app.create")},{default:p(()=>[l(ce,{class:"min-w-48"},{default:p(()=>[l(ue,{text:H.$t("core::app.create_and_add_another"),onClick:B},null,8,["text"]),ne(l(ue,{text:H.$t("core::app.create_and_go_to_list"),onClick:V},null,8,["text"]),[[pe,e.goToList]])]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled"])}}},lxe={__name:"CreateContactModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,createUsing:Function,withExtendedSubmitButtons:Boolean,fieldsVisible:{type:Boolean,default:!0},title:String,firstName:String,lastName:String,email:String,associations:Object,companies:Array,deals:Array},emits:["created","restored","update:visible","ready"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("contacts"),{t:r}=Ee(),s=_t(),i=M(!1),u=M(!1),c=Pt(null),m=M([]),f=M({byEmail:!1,byPhone:{}}),{fields:v,hasFields:y,findField:b,getCreateFields:w}=yn(),{createResource:k}=Dt(a),{form:x}=Ze({avatar:null});La(()=>n.visible,B,{immediate:!0}),ma(()=>x.email,V=>{if(!V){c.value=null;return}Innoclapps.request("/trashed/contacts/search",{params:{q:V,search_fields:"email:="}}).then(({data:P})=>{c.value=P.length>0?P[0]:null})},{debounce:500}),ma(()=>x.phones,V=>{const P=V.map(z=>z.number);if(P.length===0){m.value=[];return}Innoclapps.request("/trashed/contacts/search",{params:{q:P.join(","),search_fields:"phones.number:in"}}).then(({data:z})=>{m.value=z})},{debounce:500,deep:!0});function I(V){if(V.indexRoute={name:"contact-index"},V.action==="go-to-list")return s.push(V.indexRoute);if(V.action!=="create-another"&&n.redirectToView){let P=V.contact;s.contact=P,s.push({name:"view-contact",params:{id:P.id}})}}function C(V,P){b(V).options.push(P),x[V].push(P.id)}function S(){v.value=[],x.reset()}function T(V,P){Innoclapps.request().post(`/trashed/contacts/${V}`).then(({data:z})=>{typeof f.value[P]=="object"?f.value[P][z.id]=!0:f.value[P]=!0,o("restored",z)})}function E(){R().then(I)}function $(){R("create-another").then(V=>{x.reset(),I(V)})}function F(){R("go-to-list").then(I)}async function R(V=null){n.associations&&x.fill(n.associations);let z={contact:await k(x).catch(H=>(H.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(H))),isRegularAction:V===null,action:V};return o("created",z),Innoclapps.success(r("core::resource.created")),z}async function B(){const V=await w(a),P=j=>Et(V,["attribute",j]);for(let j of["companies","deals"]){if(!n[j])continue;let N=P(j);N===-1?x.set(j,n[j].map(L=>typeof L=="object"?L.id:L)):V[N].value=n[j]}n.firstName&&(V[P("first_name")].value=n.firstName);const z=n.lastName&&P("last_name");z&&V[z]&&(V[z].value=n.lastName);const H=n.email&&P("email");H&&V[H]&&(V[H].value=n.email),v.value=V,o("ready",{fields:v,form:x})}return(V,P)=>{const z=d("FieldsPlaceholder"),H=d("ILink"),j=d("IAlertBody"),N=d("IButton"),L=d("IAlertActions"),U=d("IAlert"),ee=d("FormFields"),G=d("IDropdownItem"),W=d("IDropdownMenu"),ae=d("IExtendedDropdown"),ue=d("CreateDealModal"),ce=d("CreateCompanyModal"),oe=d("ISlideover");return g(),A(oe,{id:"createContactModal",visible:e.visible,title:e.title||V.$t("contacts::contact.create"),"ok-text":V.$t("core::app.create"),"ok-disabled":h(x).busy,"static-backdrop":"",form:"",onHidden:S,onSubmit:P[11]||(P[11]=ie=>e.createUsing?e.createUsing(E):E()),"onUpdate:visible":P[12]||(P[12]=ie=>V.$emit("update:visible",ie))},bn({default:p(()=>[h(y)?K("",!0):(g(),A(z,{key:0})),Se(V.$slots,"top",{isReady:h(y)}),ne(l(ee,{fields:h(v),form:h(x),"resource-name":h(a),"is-floating":"","focus-first":"",onUpdateFieldValue:P[4]||(P[4]=ie=>h(x).fill(ie.attribute,ie.value)),onSetInitialValue:P[5]||(P[5]=ie=>h(x).set(ie.attribute,ie.value))},bn({"after-deals-field":p(()=>[l(H,{class:"-mt-1 block text-right",onClick:P[0]||(P[0]=ie=>i.value=!0)},{default:p(()=>[le(" + "+Z(V.$t("deals::deal.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(H,{class:"-mt-1 block text-right",onClick:P[1]||(P[1]=ie=>u.value=!0)},{default:p(()=>[le(" + "+Z(V.$t("contacts::company.create")),1)]),_:1})]),_:2},[c.value!==null?{name:"after-email-field",fn:p(()=>[l(U,{class:"mb-3",dismissible:"",onDismissed:P[3]||(P[3]=ie=>{f.value.byEmail=!1,c.value=null})},{default:p(({variant:ie})=>[l(j,null,{default:p(()=>[le(Z(V.$t("contacts::contact.exists_in_trash_by_email")),1)]),_:1}),l(L,null,{default:p(()=>[f.value.byEmail?K("",!0):(g(),A(N,{key:0,variant:ie,text:V.$t("core::app.soft_deletes.restore"),ghost:"",onClick:P[2]||(P[2]=Q=>T(c.value.id,"byEmail"))},null,8,["variant","text"])),f.value.byEmail?(g(),A(N,{key:1,variant:ie,to:{name:"view-contact",params:{id:c.value.id}},text:V.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):K("",!0)]),_:2},1024)]),_:1})]),key:"0"}:void 0,m.value.length>0?{name:"after-phones-field",fn:p(()=>[(g(!0),D(fe,null,Ie(m.value,(ie,Q)=>(g(),A(U,{key:ie.id,class:"mb-3",dismissible:"",onDismissed:se=>{f.value.byPhone[ie.id]=!1,m.value[Q]=null}},{default:p(({variant:se})=>[l(j,null,{default:p(()=>[le(Z(V.$t("contacts::contact.exists_in_trash_by_phone",{contact:ie.display_name,phone_numbers:ie.phones.map(me=>me.number).join(",")})),1)]),_:2},1024),l(L,null,{default:p(()=>[f.value.byPhone[ie.id]?K("",!0):(g(),A(N,{key:0,variant:se,text:V.$t("core::app.soft_deletes.restore"),ghost:"",onClick:me=>T(ie.id,"byPhone")},null,8,["variant","text","onClick"])),f.value.byPhone[ie.id]?(g(),A(N,{key:1,variant:se,to:{name:"view-contact",params:{id:ie.id}},text:V.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):K("",!0)]),_:2},1024)]),_:2},1032,["onDismissed"]))),128))]),key:"1"}:void 0]),1032,["fields","form","resource-name"]),[[pe,e.fieldsVisible]]),l(ue,{visible:i.value,"onUpdate:visible":P[6]||(P[6]=ie=>i.value=ie),overlay:!1,onCreated:P[7]||(P[7]=ie=>(C("deals",ie.deal),i.value=!1))},null,8,["visible"]),l(ce,{visible:u.value,"onUpdate:visible":P[8]||(P[8]=ie=>u.value=ie),overlay:!1,onCreated:P[9]||(P[9]=ie=>(C("companies",ie.company),u.value=!1)),onRestored:P[10]||(P[10]=ie=>(C("companies",ie),u.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(ae,{type:"submit",placement:"top-end",disabled:h(x).busy,loading:h(x).busy,text:V.$t("core::app.create")},{default:p(()=>[l(W,{class:"min-w-48"},{default:p(()=>[l(G,{text:V.$t("core::app.create_and_add_another"),onClick:$},null,8,["text"]),ne(l(G,{text:V.$t("core::app.create_and_go_to_list"),onClick:F},null,8,["text"]),[[pe,e.goToList]])]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled"])}}},sxe={__name:"SettingsCompanies",setup(e){const{form:t,submit:n,isReady:o}=To();return(a,r)=>{const s=d("ICardHeading"),i=d("ICardHeader"),u=d("IFormSwitchLabel"),c=d("IFormSwitchDescription"),m=d("IFormSwitch"),f=d("IFormSwitchField"),v=d("ICardBody"),y=d("ICard");return g(),D(fe,null,[l(i,null,{default:p(()=>[l(s,{text:a.$t("contacts::company.companies")},null,8,["text"])]),_:1}),l(y,{overlay:!h(o)},{default:p(()=>[l(v,null,{default:p(()=>[l(f,null,{default:p(()=>[l(u,{text:a.$t("contacts::company.settings.automatically_associate_with_contacts")},null,8,["text"]),l(c,{text:a.$t("contacts::company.settings.automatically_associate_with_contacts_info")},null,8,["text"]),l(m,{modelValue:h(t).auto_associate_company_to_contact,"onUpdate:modelValue":r[0]||(r[0]=b=>h(t).auto_associate_company_to_contact=b),onChange:h(n)},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1},8,["overlay"])],64)}}},ixe={key:1},uxe={__name:"PhoneField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=d("IDropdownButton"),a=d("IButtonCopy"),r=d("IDropdownItem"),s=d("IDropdownMenu"),i=d("IDropdown"),u=d("BaseDetailField"),c=Ve("i-tooltip");return g(),A(u,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:m,value:f})=>[m?(g(!0),D(fe,{key:0},Ie(f,(v,y)=>(g(),D("div",{key:y},[l(i,null,{default:p(()=>[ne(l(o,{text:v.number,link:"","no-caret":""},null,8,["text"]),[[c,t.$t("contacts::fields.phone.types."+v.type)]]),l(s,null,{default:p(()=>[l(a,{as:"IDropdownItem",text:v.number,"success-message":t.$t("contacts::fields.phone.copied")},{default:p(()=>[le(Z(t.$t("core::app.copy")),1)]),_:2},1032,["text","success-message"]),l(r,{href:"tel:"+v.number,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)]))),128)):(g(),D("span",ixe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},cxe={class:"absolute left-1 top-1 z-20 flex"},dxe={class:"truncate"},mxe={class:"absolute right-1.5 top-1.5 z-20 flex sm:top-1"},fxe=["textContent"],pxe={class:"text-right"},vxe={__name:"PhoneField",props:{field:{type:Object,required:!0},modelValue:{type:Array,default:()=>[]},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=M([]),r=M({}),s=O(()=>n.field.callingPrefix),i=O(()=>a.value.length);$e(i,x=>{x===0&&f()}),$e(a,x=>u(x.map(I=>_l(sr(I,"id"),I._formUniqueId)).filter(I=>!!I.number).filter(I=>!s.value||I.number.trim()!==s.value.trim())),{deep:!0});function u(x){o("update:modelValue",x)}function c(){let x=n.field.value||[];o("setInitialValue",x.map(v))}function m(x){r.value[x]=null,a.value.splice(x,1),i.value===0&&f()}function f(){a.value.push(_l({number:s.value||"",type:n.field.type}))}function v(x){return{number:x.number,type:x.type}}function y(){a.value=(n.field.value||[]).map(v),a.value.forEach(_l),c(),a.value.length===0&&f()}async function b(x,I){if(await ze(),!w.value||!I||s.value&&s.value===I){r.value[x]=null;return}r.value[x]=await k(I)}const w=O(()=>!n.resourceId&&n.field.checkDuplicatesWith&&Object.keys(n.field.checkDuplicatesWith).length>0);async function k(x){const{data:I}=await Innoclapps.request(n.field.checkDuplicatesWith.url,{params:{q:x,...n.field.checkDuplicatesWith.params}});return I.length>0?I[0]:null}return y(),(x,I)=>{const C=d("IFormInput"),S=d("IDropdownButton"),T=d("IDropdownItem"),E=d("IDropdownMenu"),$=d("IDropdown"),F=d("IButton"),R=d("IFormError"),B=d("I18nT"),V=d("IAlertBody"),P=d("IAlertActions"),z=d("IAlert"),H=d("IFormGroup"),j=d("ILink"),N=d("BaseFormField");return g(),A(N,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({fieldId:L})=>[l(dn,{class:"multiple",field:e.field,label:e.field.label,"field-id":L,"validation-errors":e.validationErrors},{default:p(()=>[(g(!0),D(fe,null,Ie(a.value,(U,ee)=>(g(),A(H,{key:ee,class:"relative"},{default:p(()=>[l(C,{modelValue:a.value[ee].number,"onUpdate:modelValue":G=>a.value[ee].number=G,class:"pl-32 pr-12 sm:pl-28 sm:pr-11",name:e.field.attribute+"."+ee+".number",debounce:w.value,onInput:G=>b(ee,a.value[ee].number)},null,8,["modelValue","onUpdate:modelValue","name","debounce","onInput"]),_("div",cxe,[l($,{"adaptive-width":""},{default:p(()=>[l(S,{class:"w-28 sm:w-24",icon:U.type=="mobile"?"DeviceMobile":"Phone",basic:"",small:""},{default:p(()=>[_("span",dxe,Z(a.value[ee].type?e.field.types[a.value[ee].type]:x.$t("contacts::fields.phone.types.type")),1)]),_:2},1032,["icon"]),l(E,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.field.types,(G,W)=>(g(),A(T,{key:W,text:G,onClick:ae=>a.value[ee].type=W},null,8,["text","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_("div",mxe,[l(F,{icon:"XSolid",basic:"",small:"",onClick:G=>m(ee)},null,8,["onClick"])]),e.validationErrors&&e.validationErrors.array&&e.validationErrors.array[e.field.attribute+"."+ee+".number"]?(g(),A(R,{key:0,error:e.validationErrors.array[e.field.attribute+"."+ee+".number"]},null,8,["error"])):K("",!0),r.value[ee]?(g(),A(z,{key:1,class:"mt-1",dismissible:"",onDismissed:G=>r.value[ee]=null},{default:p(({variant:G})=>[l(V,null,{default:p(()=>[l(B,{scope:"global",keypath:e.field.checkDuplicatesWith.lang_keypath},{display_name:p(()=>[_("span",{class:"font-medium",textContent:Z(r.value[ee].display_name)},null,8,fxe)]),_:2},1032,["keypath"])]),_:2},1024),l(P,null,{default:p(()=>[l(F,{target:"_blank",rel:"noopener noreferrer",icon:"ExternalLink",href:r.value[ee].path,variant:G,text:x.$t("core::app.view_record"),ghost:""},null,8,["href","variant","text"])]),_:2},1024)]),_:2},1032,["onDismissed"])):K("",!0)]),_:2},1024))),128)),_("div",pxe,[l(j,{text:x.$t("contacts::fields.phone.add"),onClick:f},null,8,["text"])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},hxe={key:0,class:"mb-4 rounded-lg border border-neutral-300 bg-neutral-50/80 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-500/10"},jf={__name:"DealsCreate",props:{viaResource:String,parentResource:Object},emits:["associated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),{t:r}=Ee(),{fields:s}=yn([{asyncUrl:"/deals/search",attribute:"deals",formComponent:"FormSelectField",helpText:r("deals::deal.associate_field_info"),helpTextDisplay:"text",label:r("deals::deal.deal"),labelKey:"name",valueKey:"id",lazyLoad:{url:"/deals",params:{order:"created_at|desc"}}}]),{form:i}=Ze(),u=O(()=>!!i.deals),c=O(()=>n.viaResource?u.value?r("deals::deal.associate_with",{name:n.parentResource.display_name}):r("deals::deal.create_with",{name:n.parentResource.display_name}):r("deals::deal.create"));async function m(){await i.set({deals:[i.deals]}).put(`associations/${n.viaResource}/${n.parentResource.id}`),o("associated",i.deals[0]),Innoclapps.success(r("core::resource.associated"))}return n.viaResource||bo(r("deals::deal.create")),(f,v)=>{const y=d("FormFields"),b=d("CreateDealModal");return g(),A(b,en({title:c.value,"ok-text":u.value?f.$t("core::app.associate"):f.$t("core::app.create"),[e.viaResource||""]:e.viaResource?[e.parentResource]:void 0,"fields-visible":!u.value,"with-extended-submit-buttons":!u.value,"create-using":w=>u.value?m():w()}),{top:p(({isReady:w})=>[e.viaResource?ne((g(),D("div",hxe,[l(y,{fields:h(s),form:h(i),"resource-name":h(a),"is-floating":"",onUpdateFieldValue:v[0]||(v[0]=k=>h(i).fill(k.attribute,k.value)),onSetInitialValue:v[1]||(v[1]=k=>h(i).set(k.attribute,k.value))},null,8,["fields","form","resource-name"])],512)),[[pe,w]]):K("",!0)]),_:1},16,["title","ok-text","fields-visible","with-extended-submit-buttons","create-using"])}}},gxe={key:0,class:"mb-4 rounded-lg border border-neutral-300 bg-neutral-50/80 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-500/10"},zf={__name:"CompaniesCreate",props:{viaResource:String,parentResource:Object},emits:["associated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("companies"),{t:r}=Ee(),{fields:s}=yn([{asyncUrl:"/companies/search",attribute:"companies",formComponent:"FormSelectField",helpText:r("contacts::company.associate_field_info"),helpTextDisplay:"text",label:r("contacts::company.company"),labelKey:"name",valueKey:"id",lazyLoad:{url:"/companies",params:{order:"created_at|desc"}}}]),{form:i}=Ze(),u=O(()=>!!i.companies),c=O(()=>n.viaResource?u.value?r("contacts::company.associate_with",{name:n.parentResource.display_name}):r("contacts::company.create_with",{name:n.parentResource.display_name}):r("contacts::company.create"));async function m(){await i.set({companies:[i.companies]}).put(`associations/${n.viaResource}/${n.parentResource.id}`),o("associated",i.companies[0]),Innoclapps.success(r("core::resource.associated"))}return n.viaResource||bo(r("contacts::company.create")),(f,v)=>{const y=d("FormFields"),b=d("CreateCompanyModal");return g(),A(b,en({title:c.value,"ok-text":u.value?f.$t("core::app.associate"):f.$t("core::app.create"),[e.viaResource||""]:e.viaResource?[e.parentResource]:void 0,"fields-visible":!u.value,"with-extended-submit-buttons":!u.value,"create-using":w=>u.value?m():w()}),{top:p(({isReady:w})=>[e.viaResource?ne((g(),D("div",gxe,[l(y,{fields:h(s),form:h(i),"resource-name":h(a),"is-floating":"",onUpdateFieldValue:v[0]||(v[0]=k=>h(i).fill(k.attribute,k.value)),onSetInitialValue:v[1]||(v[1]=k=>h(i).set(k.attribute,k.value))},null,8,["fields","form","resource-name"])],512)),[[pe,w]]):K("",!0)]),_:1},16,["title","ok-text","fields-visible","with-extended-submit-buttons","create-using"])}}},bxe={class:"flex flex-wrap space-x-0 space-y-4 lg:flex-nowrap lg:space-x-4 lg:space-y-0"},Sd={__name:"CardsRenderer",props:{resourceName:{required:!0,type:String},totalPlaceholders:{default:2,type:Number}},setup(e){const t=e,n=Pt([]),o=M(!1);async function a(){let{data:r}=await Innoclapps.request(`/${t.resourceName}/cards`);n.value=r,o.value=!0}return a(),(r,s)=>(g(),D("div",bxe,[o.value?K("",!0):(g(!0),D(fe,{key:0},Ie(e.totalPlaceholders,i=>(g(),D("div",{key:i,class:"w-full lg:w-1/2"},[l(Sa,{pulse:""})]))),128)),(g(!0),D(fe,null,Ie(n.value,i=>(g(),D("div",{key:i.uriKey,class:be(i.width==="half"?"w-full lg:w-1/2":"w-full")},[(g(),A(Rt(i.component),{card:i},null,8,["card"]))],2))),128))]))}},yxe=Object.assign({inheritAttrs:!1},{__name:"CompaniesTable",props:{tableId:{required:!0,type:String},initialize:{default:!0,type:Boolean}},emits:["deleted"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("companies"),{t:r}=Ee(),{reloadTable:s}=eo(n.tableId),{floatResourceInEditMode:i}=ao(),{deleteResource:u}=Dt(a),c=M(null);async function m(f){await u(f),o("deleted",f),s(),Innoclapps.success(r("core::resource.deleted"))}return(f,v)=>{const y=d("ITextDark"),b=d("ITableRowAction"),w=d("ITableRowActions"),k=d("ResourceTable"),x=d("CreateActivityModal");return g(),D(fe,null,[e.initialize?(g(),A(k,Ue({key:0,"resource-name":h(a),"table-id":e.tableId,"empty-state":{to:{name:"create-company"},title:f.$t("contacts::company.empty_state.title"),buttonText:f.$t("contacts::company.create"),description:f.$t("contacts::company.empty_state.description"),secondButtonText:f.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:h(a)}}}},f.$attrs),{header:p(({total:I})=>[l(y,{class:"font-medium",text:f.$t("contacts::company.count.all",{count:I})},null,8,["text"])]),actions:p(({row:I})=>[l(w,null,{default:p(()=>[l(b,{icon:"Clock",text:f.$t("activities::activity.create"),onClick:C=>c.value=I},null,8,["text","onClick"]),I.authorizations.update?(g(),A(b,{key:0,icon:"PencilAlt",text:f.$t("core::app.edit"),onClick:C=>h(i)({resourceName:h(a),resourceId:I.id})},null,8,["text","onClick"])):K("",!0),I.authorizations.delete?(g(),A(b,{key:1,icon:"Trash",text:f.$t("core::app.delete"),onClick:C=>f.$confirm(()=>m(I.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),_:1},16,["resource-name","table-id","empty-state"])):K("",!0),l(x,{visible:c.value!==null,companies:[c.value],"with-extended-submit-buttons":!0,"go-to-list":!1,onCreated:v[0]||(v[0]=({isRegularAction:I})=>(I&&(c.value=null),h(s)())),onHidden:v[1]||(v[1]=I=>c.value=null)},null,8,["visible","companies"])],64)}}}),Nm="companies",_xe={__name:"CompaniesIndex",setup(e){const t=Innoclapps.resourceName("companies"),n=It(),{reloadTable:o,customizeTable:a}=eo(Nm),r=M(n.meta.initialize),s=M(!0),i=O(()=>r.value&&!s.value);function u(){At("refresh-cards"),o()}return Va((c,m,f)=>{r.value=!0,f()}),(c,m)=>{const f=d("NavbarSeparator"),v=d("IDropdownItem"),y=d("IDropdownMinimal"),b=d("IButton"),w=d("NavbarItems"),k=d("RouterView"),x=d("MainLayout");return g(),A(x,null,{actions:p(()=>[l(f,{class:"hidden lg:block"}),l(w,null,{default:p(()=>[l(y,{placement:s.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(v,{icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:h(t)}},text:c.$t("core::import.import")},null,8,["to","text"]),c.$gate.userCan("export companies")?(g(),A(v,{key:0,icon:"DocumentDownload",text:c.$t("core::app.export.export"),onClick:m[0]||(m[0]=I=>c.$dialog.show("export-modal"))},null,8,["text"])):K("",!0),l(v,{icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:h(t)}},text:c.$t("core::app.soft_deletes.trashed")},null,8,["to","text"]),l(v,{icon:"Cog",text:c.$t("core::table.list_settings"),onClick:h(a)},null,8,["text","onClick"])]),_:1},8,["placement"]),ne(l(b,{variant:"primary",icon:"PlusSolid",to:{name:"create-company"},text:c.$t("contacts::company.create")},null,8,["text"]),[[pe,!s.value]])]),_:1})]),default:p(()=>[i.value?(g(),A(Sd,{key:0,class:"mb-6","resource-name":h(t)},null,8,["resource-name"])):K("",!0),l(yxe,{"table-id":Nm,initialize:r.value,onLoaded:m[1]||(m[1]=I=>s.value=I.isPreEmpty),onDeleted:u},null,8,["initialize"]),l(Hi,{"url-path":"/companies/export","resource-name":h(t),"filters-view":Nm,title:c.$t("contacts::company.export")},null,8,["resource-name","title"]),l(k,{name:"create","redirect-to-view":!0,onCreated:m[2]||(m[2]=({isRegularAction:I})=>I?void 0:u()),onHidden:c.$router.back},null,8,["onHidden"])]),_:1})}}},Ixe={key:0},wxe={class:"mb-4"},xxe={class:"flex items-center rounded-lg border border-neutral-200 bg-white px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-900"},kxe={class:"grow"},$xe={class:"mt-3 flex items-center justify-end space-x-1.5"},jv={__name:"ManageViewSections",props:{sections:{type:Array,required:!0},show:Boolean,identifier:{type:String,required:!0}},emits:["saved","update:show","update:sections"],setup(e,{emit:t}){const n=e,o=t,a=M({});n.sections.forEach(i=>{a.value[i.id]=i.enabled});const r=M(!1);function s(){r.value=!0,Innoclapps.request().post("/settings",{[n.identifier+"_view_sections"]:n.sections.map((i,u)=>({id:i.id,order:u+1,enabled:a.value[i.id]}))}).then(()=>{o("saved");const i=n.sections.map((u,c)=>Object.assign({},u,{order:c+1,enabled:a.value[u.id]}));o("update:sections",i)}).finally(()=>r.value=!1)}return(i,u)=>{const c=d("ITextDisplay"),m=d("IText"),f=d("IFormCheckbox"),v=d("IFormCheckboxLabel"),y=d("IFormCheckboxField"),b=d("Icon"),w=d("SortableDraggable"),k=d("IButton");return e.show?(g(),D("div",Ixe,[_("div",wxe,[l(c,{text:i.$t("core::app.record_view.sections.edit_heading")},null,8,["text"]),l(m,{text:i.$t("core::app.record_view.sections.edit_subheading")},null,8,["text"])]),l(w,Ue({"item-key":"id",class:"space-y-2",handle:".section-reorder-handle","model-value":e.sections},i.$draggable.common,{"onUpdate:modelValue":u[0]||(u[0]=x=>i.$emit("update:sections",x))}),{item:p(({element:x})=>[_("div",xxe,[_("div",kxe,[l(y,null,{default:p(()=>[l(f,{checked:a.value[x.id],"onUpdate:checked":I=>a.value[x.id]=I},null,8,["checked","onUpdate:checked"]),l(v,{text:x.heading||x.id},null,8,["text"])]),_:2},1024)]),l(b,{icon:"Selector",class:"section-reorder-handle size-5 cursor-move text-neutral-500"})])]),_:1},16,["model-value"]),_("div",$xe,[l(k,{text:i.$t("core::app.cancel"),basic:"",onClick:u[1]||(u[1]=x=>i.$emit("update:show",!1))},null,8,["text"]),l(k,{variant:"primary",disabled:r.value,loading:r.value,text:i.$t("core::app.save"),soft:"",onClick:s},null,8,["disabled","loading","text"])])])):K("",!0)}}},zv=Object.assign({inheritAttrs:!1},{__name:"RecordTabTimeline",setup(e){return(t,n)=>{const o=d("Icon"),a=d("ITab");return n[0]||(je(-1),n[0]=l(a,null,{default:p(()=>[l(o,{icon:"Bars3BottomLeft"}),le(" "+Z(t.$t("core::app.all")),1)]),_:1}),je(1),n[0])}}});function Cxe(e,t,n,o){for(var a=-1,r=e==null?0:e.length;++a<r;){var s=e[a];t(o,s,n(s),e)}return o}var Sxe=Cxe,Txe=$i;function Exe(e,t,n,o){return Txe(e,function(a,r,s){t(o,a,n(a),s)}),o}var Fxe=Exe,Axe=Sxe,Rxe=Fxe,Dxe=ra,Oxe=Fn;function Bxe(e,t){return function(n,o){var a=Oxe(n)?Axe:Rxe,r=t?t():{};return a(n,e,Dxe(o),r)}}var Nxe=Bxe,Pxe=Ic,Mxe=Nxe,Vxe=Object.prototype,Lxe=Vxe.hasOwnProperty,qxe=Mxe(function(e,t,n){Lxe.call(e,n)?e[n].push(t):Pxe(e,n,[t])}),Uxe=qxe;const jxe=Bt(Uxe),zxe=["textContent"],Hxe={__name:"RecordTabTimelineAttached",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=d("I18nT"),a=d("ILink");return g(),A(yo,{icon:"Plus","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(je(-1),n[0]=l(o,{scope:"global",keypath:"core::timeline.attached",user:e.log.causer_name},{user:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,zxe)]),_:1},8,["user"]),je(1),n[0]),l(a,{class:"ml-1 font-medium",to:e.log.properties.path,text:e.log.properties.name},null,8,["to","text"])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Wxe=["textContent"],Gxe={__name:"RecordTabTimelineCreated",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=d("I18nT");return g(),A(yo,{icon:"User","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(je(-1),n[0]=l(o,{scope:"global",keypath:"core::timeline.created"},{causer:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,Wxe)]),_:1}),je(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Kxe=["textContent"],Zxe={__name:"RecordTabTimelineDeleted",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=d("I18nT");return g(),A(yo,{icon:"User","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(je(-1),n[0]=l(o,{scope:"global",keypath:"core::timeline.deleted"},{causer:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,Kxe)]),_:1}),je(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Yxe=["textContent"],Xxe={__name:"RecordTabTimelineDetached",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=d("I18nT"),a=d("ILink");return g(),A(yo,{icon:"XSolid","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(je(-1),n[0]=l(o,{scope:"global",keypath:"core::timeline.detached",user:e.log.causer_name},{user:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,Yxe)]),_:1},8,["user"]),je(1),n[0]),l(a,{class:"ml-1 font-medium",to:e.log.properties.path,text:e.log.properties.name},null,8,["to","text"])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Qxe={__name:"RecordTabTimelineGeneric",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const t=e,{locale:n}=Ne(),o=O(()=>{let a=t.log.properties.lang.attrs;return a?((Ma(window.lang[n.value],t.log.properties.lang.key.replace("::",".")).indexOf("{user}")>-1&&Object.keys(a).indexOf("user")===-1||Object.keys(a).indexOf("user")>-1&&a.user===null)&&(a=Object.assign({},a,{user:t.log.causer_name})),a):null});return(a,r)=>(g(),A(yo,{"resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,icon:e.log.properties.icon||"User",heading:a.$t(e.log.properties.lang.key,o.value)},null,8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","icon","heading"]))}},Jxe=["textContent"],eke={__name:"RecordTabTimelineImported",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=d("I18nT");return g(),A(yo,{icon:"User","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(je(-1),n[0]=l(o,{scope:"global",keypath:"core::timeline.imported"},{causer:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,Jxe)]),_:1}),je(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},tke=["textContent"],nke={__name:"RecordTabTimelineRestored",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=d("I18nT");return g(),A(yo,{icon:"Refresh","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(je(-1),n[0]=l(o,{scope:"global",keypath:"core::timeline.restored"},{causer:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,tke)]),_:1}),je(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},oke=["textContent"],ake=["textContent"],rke={class:"mt-1"},lke={key:0},ske={__name:"RecordTabTimelineUpdated",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const t=e,{t:n,te:o}=Ee(),{localizeIfDate:a}=rt(),r=M(!1),s=O(()=>r.value?n("core::fields.hide_updated"):n("core::fields.view_updated")+" ("+u.value+")"),i=O(()=>yx(t.log.properties.attributes,(f,v)=>v.indexOf("_id")===-1)),u=O(()=>Object.keys(i.value).length);function c(f,v){return f&&f.label?f.label:(t.log.module,t.log.module+"::fields."+t.resourceName+"."+v&&o(t.log.module+"::fields."+t.resourceName+"."+v)?n(t.log.module+"::fields."+t.resourceName+"."+v):v)}function m(f,v){return f&&Object.hasOwn(f,"value")?a(f.value,f.value):o("core::timeline."+v+"."+f)?n("core::timeline."+v+"."+f):a(f,f)}return(f,v)=>{const y=d("I18nT"),b=d("ITextDark"),w=d("ITableHeader"),k=d("ITableRow"),x=d("ITableHead"),I=d("ITableCell"),C=d("ITableBody"),S=d("ITable"),T=d("ITableOuter"),E=d("ILink");return g(),A(yo,{icon:"PencilAlt","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[v[0]||(je(-1),v[0]=e.log.causer_name?(g(),A(y,{key:0,scope:"global",keypath:"core::timeline.updated"},{causer:p(()=>[_("span",{class:"font-medium",textContent:Z(e.log.causer_name)},null,8,oke)]),_:1})):(g(),D("span",{key:1,textContent:Z(f.$t("core::timeline.updated"))},null,8,ake)),je(1),v[0])]),default:p(()=>[_("div",rke,[r.value?(g(),D("div",lke,[l(b,{class:"font-medium"},{default:p(()=>[le(Z(f.$t("core::fields.updated"))+" ("+Z(u.value)+") ",1)]),_:1}),l(T,{class:"mt-2 px-6 pb-8 pt-6"},{default:p(()=>[l(S,{class:"[--gutter:theme(spacing.6)] sm:[--gutter:theme(spacing.8)]",condensed:"",bleed:""},{default:p(()=>[l(x,null,{default:p(()=>[l(k,null,{default:p(()=>[l(w,null,{default:p(()=>[le(Z(f.$t("core::fields.updated_field")),1)]),_:1}),l(w,null,{default:p(()=>[le(Z(f.$t("core::fields.new_value")),1)]),_:1}),l(w,null,{default:p(()=>[le(Z(f.$t("core::fields.old_value")),1)]),_:1})]),_:1})]),_:1}),l(C,null,{default:p(()=>[(g(!0),D(fe,null,Ie(i.value,($,F)=>(g(),A(k,{key:e.resourceName+F},{default:p(()=>[l(I,{class:"font-medium"},{default:p(()=>[le(Z(c($,F)),1)]),_:2},1024),l(I,null,{default:p(()=>[le(Z(m($,F)),1)]),_:2},1024),l(I,null,{default:p(()=>[le(Z(m(e.log.properties.old[F],F)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):K("",!0),l(E,{class:"mt-1 block",text:s.value,onClick:$=>r.value=!r.value},null,8,["text","onClick"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},ike={class:"mt-4 inline-flex items-center sm:ml-1 sm:mt-2"},uke={class:"pt-6"},cke={class:"flow-root"},dke={role:"list",class:"sm:-mb-6"},mke={class:"relative sm:pb-6"},fke={key:0,class:"absolute left-5 top-5 -ml-px hidden h-full w-0.5 bg-neutral-200 dark:bg-neutral-700 sm:block","aria-hidden":"true"},pke={class:"relative flex items-start sm:space-x-3"},vke={key:0,class:"block sm:hidden","aria-hidden":"true"},hke=_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})],-1),gke=[hke],bke="changelog",Hv={__name:"RecordTabTimelinePanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Pe("synchronizeResource"),o={"timeline-restored":nke,"timeline-deleted":Zxe,"timeline-created":Gxe,"timeline-updated":ske,"timeline-attached":Hxe,"timeline-detached":Xxe,"timeline-imported":eke,"timeline-generic":Qxe},{t:a}=Ee(),r=M(null),{loadData:s,infiniteHandler:i,search:u,refresh:c}=gs({resourceName:t.resourceName,resource:gt(t,"resource"),scrollElement:t.scrollElement,timelineRelation:bke,synchronizeResource:n,infinityRef:r,handleInfinityResult:k,makeRequestForData:w});ma(()=>t.resource._sync_timestamp,()=>c(),{debounce:500});const m=M([]),f=O(()=>[{id:null,name:a("core::app.all")},{id:"changelog",name:a("core::app.changelog")},...m.value.map(x=>({id:x.name,name:x.label}))]),v=M({id:null,name:a("core::app.all")}),y=O(()=>!v.value.id||v.value.id==="changelog"?t.resource.changelog||[]:[]),b=O(()=>{const x=[...y.value];return m.value.forEach(I=>{x.push(...!v.value.id||v.value.id===I.name?t.resource[I.timeline_relation]||[]:[])}),Vt(x,["is_pinned","pinned_date",I=>new Date(I[I.timeline_sort_column])],["desc","desc","desc"])});function w(x,I){return Innoclapps.request(`${t.resource.path}/timeline`,{params:{page:x,per_page:I,q:u.value}})}function k(x){m.value=x.resources,n(jxe(x.data,"timeline_relation"))}return Je(s),(x,I)=>{const C=d("ITextDark"),S=d("IDropdownButton"),T=d("IDropdownItem"),E=d("IDropdownMenu"),$=d("IDropdown"),F=d("ITabPanel"),R=Ve("t");return g(),A(F,null,{default:p(()=>[_("div",ike,[ne(l(C,{class:"-mt-0.5 mr-1.5 font-medium"},null,512),[[R,"core::filters.filter_by"]]),l($,null,{default:p(()=>[l(S,{text:v.value.name,basic:""},null,8,["text"]),l(E,null,{default:p(()=>[(g(!0),D(fe,null,Ie(f.value,B=>(g(),A(T,{key:B.id,text:B.name,active:v.value.id===B.id,onClick:V=>(v.value=B,h(s)())},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),_("div",uke,[_("div",cke,[_("ul",dke,[(g(!0),D(fe,null,Ie(b.value,(B,V)=>(g(),D("li",{key:"timeline-"+B.timeline_component+"-"+B.id},[_("div",mke,[V!==b.value.length-1?(g(),D("span",fke)):K("",!0),_("div",pke,[(g(),A(Rt(Object.hasOwn(o,"timeline-"+B.timeline_component)?o["timeline-"+B.timeline_component]:B.timeline_component),{log:B,"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource},null,8,["log","resource-name","resource-id","resource"]))])]),V!==b.value.length-1?(g(),D("div",vke,gke)):K("",!0)]))),128))]),l(gr,{ref_key:"infinityRef",ref:r,"scroll-element":e.scrollElement,onHandle:I[0]||(I[0]=B=>h(i)(B))},null,8,["scroll-element"])])])]),_:1})}}},yke={class:"max-w-36 truncate sm:max-w-48"},Wv={__name:"UserOwnerDropdown",props:["owner","authorizeUpdate"],emits:["change"],setup(e){const{users:t}=Ne();return(n,o)=>{const a=d("IAvatar"),r=d("IDropdownButton"),s=d("IDropdownItem"),i=d("IDropdownSeparator"),u=d("IDropdownMenu"),c=d("IDropdown"),m=Ve("i-tooltip");return g(),A(c,null,{default:p(()=>[l(r,{disabled:!e.authorizeUpdate,basic:""},{default:p(()=>[ne((g(),D("span",yke,[e.owner?(g(),A(a,{key:0,size:"xs",class:"mr-1.5",src:e.owner.avatar_url},null,8,["src"])):K("",!0),le(" "+Z(e.owner?e.owner.name:n.$t("core::app.no_owner")),1)])),[[m,n.$t("deals::fields.deals.user.name"),void 0,{top:!0}]])]),_:1},8,["disabled"]),l(u,{class:"max-h-80"},{default:p(()=>[(g(!0),D(fe,null,Ie(h(t),f=>(g(),A(s,{key:f.id,text:f.name,active:e.owner&&f.id===e.owner.id,onClick:v=>n.$emit("change",f)},null,8,["text","active","onClick"]))),128)),e.owner?(g(),A(i,{key:0})):K("",!0),e.owner?(g(),A(s,{key:1,icon:"XSolid",text:n.$t("core::app.no_owner"),onClick:o[0]||(o[0]=f=>n.$emit("change",null))},null,8,["text"])):K("",!0)]),_:1})]),_:1})}}},_ke={class:"px-5 py-4"},Ike={__name:"CompaniesViewChildCompanies",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=O(()=>t.resource.parents.length),o=O(()=>n.value>0);return(a,r)=>{const s=d("ICard");return o.value?Un([e.resource.parents.map(i=>i.updated_at)],()=>(g(),A(s,{key:0},{default:p(()=>[_("div",_ke,[l(Uv,{title:a.$t("contacts::company.child",{count:n.value}),companies:e.resource.parents},null,8,["title","companies"])])]),_:1})),r,0):K("",!0)}}},wke={class:"px-5 py-4"},xke={__name:"CompaniesViewContacts",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("ICard");return Un([e.resource.contacts.map(a=>a.updated_at)],()=>l(o,null,{default:p(()=>[_("div",wke,[l(zk,{"company-id":e.resourceId,contacts:e.resource.contacts,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onCreateRequested:n[0]||(n[0]=a=>t.$router.push({name:"createContactViaCompany",params:{id:e.resourceId}}))},null,8,["company-id","contacts","authorize-dissociate","show-create-button"])])]),_:1}),n,1)}}},kke={class:"px-5 py-4"},$ke={__name:"CompaniesViewDeals",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("ICard");return Un([e.resource.deals.map(a=>a.updated_at)],()=>l(o,null,{default:p(()=>[_("div",kke,[l(Wk,{"company-id":e.resourceId,deals:e.resource.deals,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onCreateRequested:n[0]||(n[0]=a=>t.$router.push({name:"createDealViaCompany",params:{id:e.resourceId}}))},null,8,["company-id","deals","authorize-dissociate","show-create-button"])])]),_:1}),n,1)}}},Cke={class:"mb-2 flex items-center justify-between px-5 py-4"},Ske={class:"-my-1.5 flex items-center space-x-1"},Tke=Object.assign({inheritAttrs:!1},{__name:"CompaniesViewDetails",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=M(!0),{fields:o,hasFields:a,setResource:r,totalCollapsable:s,getDetailFields:i}=yn(),{floatResourceInEditMode:u}=ao();return i(t.resourceName,t.resource.id).then(c=>{o.value=c,r(gt(t,"resource"))}),(c,m)=>{const f=d("ITextDisplay"),v=d("IButton"),y=d("FieldsButtonCollapse"),b=d("DetailFields"),w=d("ICard"),k=Ve("i-tooltip");return g(),A(w,{overlay:!h(a)},{default:p(()=>[_("div",Cke,[ne(l(f,{text:c.$t("core::app.record_view.sections.details")},null,8,["text"]),[[pe,h(a)]]),ne(_("div",Ske,[e.resource.authorizations.update?ne((g(),A(v,{key:0,icon:"PencilAlt",basic:"",small:"",onClick:m[0]||(m[0]=x=>h(u)({resourceName:e.resourceName,resourceId:e.resourceId}))},null,512)),[[k,c.$t("core::app.edit")]]):K("",!0),c.$gate.isSuperAdmin()?ne((g(),A(v,{key:1,icon:"AdjustmentsVertical",to:{name:"resource-fields",params:{resourceName:e.resourceName},query:{view:c.$scriptConfig("fields.views.detail")}},basic:"",small:""},null,8,["to"])),[[k,c.$t("core::fields.manage")]]):K("",!0),h(s)>0?(g(),A(y,{key:2,collapsed:n.value,"onUpdate:collapsed":m[1]||(m[1]=x=>n.value=x),total:h(s)},null,8,["collapsed","total"])):K("",!0)],512),[[pe,h(a)]])]),h(a)?(g(),A(b,Ue({key:0},c.$attrs,{class:"overflow-y-auto px-2 py-1","initial-height-class":"h-[10rem]",collapsed:n.value,fields:h(o),"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource,resizeable:""}),null,16,["collapsed","fields","resource-name","resource-id","resource"])):K("",!0)]),_:1},8,["overlay"])}}}),Eke={class:"px-5 py-4"},Fke={__name:"CompaniesViewMedia",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=Pe("synchronizeResource");return(n,o)=>{const a=d("IText"),r=d("ITextDisplay"),s=d("ICard");return Un([e.resource.media.map(i=>i.updated_at)],()=>l(s,null,{default:p(()=>[_("div",Eke,[l(r,null,{default:p(()=>[le(Z(n.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(a,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":e.resourceName,"resource-id":e.resourceId,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,onDeleted:o[0]||(o[0]=i=>h(t)({media:{id:i.id,_delete:!0}})),onUploaded:o[1]||(o[1]=i=>h(t)({media:[i]}))},null,8,["resource-name","resource-id","media","authorize-delete"])])]),_:1}),o,2)}}},Ake={class:"mx-auto max-w-7xl"},Rke={key:1,class:"relative"},Dke={class:"px-3 py-4 sm:p-6"},Oke={class:"flex grow flex-col lg:flex-row lg:items-center"},Bke={class:"overflow-hidden text-center lg:flex lg:grow lg:items-center lg:space-x-4 lg:text-left"},Nke={class:"space-y-2 overflow-hidden lg:space-y-0"},Pke={class:"flex flex-col items-center space-y-1 lg:flex-row lg:space-x-4 lg:space-y-0"},Mke={class:"shrink-0"},Vke={class:"flex shrink-0 flex-col items-center lg:ml-6 lg:flex-row lg:space-x-2"},Lke={class:"mt-5 flex shrink-0 justify-center space-x-0.5 lg:mt-0 lg:items-center lg:justify-normal"},qke={key:2,class:"mt-8"},Uke={class:"lg:grid lg:grid-cols-12 lg:gap-8"},jke={class:"col-span-4 space-y-3"},zke={class:"col-span-8 mt-4 lg:mt-0"},Hke={__name:"CompaniesView",setup(e){const t={"timeline-tab":zv,"timeline-tab-panel":Hv},n={"details-section":Tke,"deals-section":$ke,"contacts-section":xke,"media-section":Fke,"child-companies-section":Ike},o=Innoclapps.resourceName("companies"),a=_t(),r=It(),{form:s}=Ze(),i=M(!1),u=M(Innoclapps.resource("companies").pages.detail),c=r.query.section?u.value.tabs.findIndex(F=>F.id===r.query.section):0,m=O(()=>r.params.id),{resource:f,resourceSingularName:v,synchronizeResource:y,detachResourceAssociations:b,incrementResourceCount:w,decrementResourceCount:k,fetchResource:x,updateResource:I,resourceReady:C}=Vi(o,m),S=O(()=>{var F,R;return(R=(F=f.value)==null?void 0:F.authorizations)!=null&&R.view?`Modules.Contacts.App.Models.Company.${m.value}`:null});st("synchronizeResource",y),st("detachResourceAssociations",b),st("incrementResourceCount",w),st("decrementResourceCount",k),bo(O(()=>f.value.display_name)),Ui(S,".CompanyUpdated",()=>x()),Ut("refresh-details-view",()=>x()),Ut("floating-resource-updated",()=>x());const T=O(()=>u.value.sections.filter(F=>F.enabled===!0));function E(F){F.destroyable?a.push({name:"company-index"}):x()}function $(){return I(s)}return x(),(F,R)=>{const B=d("IAlertBody"),V=d("IAlert"),P=d("IPopoverButton"),z=d("IFormError"),H=d("IFormGroup"),j=d("IPopoverBody"),N=d("IButton"),L=d("IPopoverFooter"),U=d("IPopoverPanel"),ee=d("IPopover"),G=d("ILink"),W=d("ICard"),ae=d("Icon"),ue=d("IDropdownButton"),ce=d("IDropdownItem"),oe=d("IDropdownMenu"),ie=d("IDropdown"),Q=d("ITabList"),se=d("ITabPanels"),me=d("ITabGroup"),xe=d("RouterView"),de=d("MainLayout");return g(),A(de,{overlay:!h(C)},{default:p(()=>[_("div",Ake,[h(C)&&!h(f).authorizations.view?(g(),A(V,{key:0,class:"mb-6",variant:"warning"},{default:p(()=>[l(B,null,{default:p(()=>[le(Z(F.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})):K("",!0),h(C)?(g(),D("div",Rke,[l(W,null,{default:p(()=>[_("div",Dke,[_("div",Oke,[_("div",Bke,[l(Gk,{class:"lg:shrink-0 lg:self-start"}),_("div",Nke,[_("div",Pke,[l(ee,{onShow:R[1]||(R[1]=he=>h(s).name=h(f).name),onHide:R[2]||(R[2]=he=>h(s).errors.clear())},{default:p(({hide:he})=>[l(P,{as:"button",class:"relative rounded-md text-2xl font-bold text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:text-white dark:hover:bg-neutral-800 lg:truncate",text:h(f).display_name,disabled:!h(f).authorizations.update},null,8,["text","disabled"]),l(U,{class:"w-80"},{default:p(()=>[_("form",{onSubmit:ot($,["prevent"])},[l(j,null,{default:p(()=>[l(H,{"label-for":"editCompanyName",label:F.$t("contacts::fields.companies.name"),required:""},{default:p(()=>[(g(),A(Rt(h(f).name.length<=60?"IFormInput":"IFormTextarea"),{id:"editCompanyName",modelValue:h(s).name,"onUpdate:modelValue":R[0]||(R[0]=Y=>h(s).name=Y)},null,8,["modelValue"])),l(z,{error:h(s).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(L,{class:"flex justify-end space-x-2"},{default:p(()=>[l(N,{disabled:h(s).busy,text:F.$t("core::app.cancel"),basic:"",onClick:he},null,8,["disabled","text","onClick"]),l(N,{variant:"primary",loading:h(s).busy,disabled:h(s).busy||!h(s).name,text:F.$t("core::app.save"),onClick:Y=>$().then(he)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)],32)]),_:2},1024)]),_:1}),_("div",Mke,[l(hs,{disabled:!h(f).authorizations.update,type:F.$scriptConfig("contacts.tags_type"),"model-value":h(f).tags,simple:"","onUpdate:modelValue":R[3]||(R[3]=he=>h(I)({tags:he}))},null,8,["disabled","type","model-value"])])]),h(f).domain?(g(),A(G,{key:0,href:"http://"+h(f).domain,text:h(f).domain},null,8,["href","text"])):K("",!0)])]),_("div",Vke,[R[4]||(je(-1),R[4]=ne(l(N,{variant:"success",class:"mr-3 mt-5 lg:mt-0 lg:shrink-0",icon:"PlusSolid",to:{name:"createDealViaCompany"},text:F.$t("deals::deal.add")},null,8,["text"]),[[pe,h(f).authorizations.update]]),je(1),R[4]),_("div",Lke,[l(Wv,{owner:h(f).user,"authorize-update":h(f).authorizations.update,onChange:R[5]||(R[5]=he=>h(I)({user_id:(he==null?void 0:he.id)||null}))},null,8,["owner","authorize-update"]),l(fs,{type:"dropdown",ids:h(f).id||[],actions:h(f).actions||[],"resource-name":h(o),onRun:E},null,8,["ids","actions","resource-name"])])])])])]),_:1}),R[6]||(je(-1),R[6]=F.$gate.isSuperAdmin()?(g(),A(ie,{key:0,placement:"bottom-end"},{default:p(()=>[l(ue,{as:"button",class:"absolute -top-7 right-2 rotate-90 p-1 text-neutral-500 dark:text-neutral-300 lg:-right-7 lg:top-1.5 lg:rotate-0","no-caret":""},{default:p(()=>[l(ae,{icon:"EllipsisVerticalSolid",class:"size-5"})]),_:1}),l(oe,null,{default:p(()=>[l(ce,{text:F.$t("core::app.record_view.manage_sidebar"),onClick:he=>i.value=!0},null,8,["text","onClick"])]),_:1})]),_:1})):K("",!0),je(1),R[6])])):K("",!0),h(C)?(g(),D("div",qke,[_("div",Uke,[_("div",jke,[(g(!0),D(fe,null,Ie(T.value,he=>ne((g(),D("div",{key:he.id},[(g(),A(Rt(n[he.component]||he.component),{"resource-name":h(o),"resource-id":h(f).id,resource:h(f),onUpdated:R[7]||(R[7]=Y=>h(y)(Y,!0))},null,40,["resource-name","resource-id","resource"]))])),[[pe,!i.value]])),128)),l(jv,{sections:u.value.sections,"onUpdate:sections":R[8]||(R[8]=he=>u.value.sections=he),show:i.value,"onUpdate:show":R[9]||(R[9]=he=>i.value=he),class:"-mt-3 inline",identifier:h(v),onSaved:R[10]||(R[10]=he=>i.value=!1)},null,8,["sections","show","identifier"])]),_("div",zke,[l(me,{"default-index":h(c)},{default:p(()=>[l(W,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:rounded-b-none"},{default:p(()=>[l(Q,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:pb-2.5 has-[[data-headlessui-state=selected]:not(:first-child)]:sm:pb-0",centered:""},{default:p(()=>[(g(!0),D(fe,null,Ie(u.value.tabs,he=>(g(),A(Rt(t[he.component]||he.component),{key:he.id,"resource-name":h(o),"resource-id":h(f).id,resource:h(f)},null,8,["resource-name","resource-id","resource"]))),128))]),_:1})]),_:1}),l(se,{class:"[&_[data-slot=panel]]:-mt-[18px]"},{default:p(()=>[(g(!0),D(fe,null,Ie(u.value.tabs,he=>(g(),A(Rt(t[he.panelComponent]||he.panelComponent),{id:"tabPanel-"+he.id,key:he.id,"scroll-element":"#main","resource-name":h(o),"resource-id":h(f).id,resource:h(f)},null,8,["id","resource-name","resource-id","resource"]))),128))]),_:1})]),_:1},8,["default-index"])])])])):K("",!0)]),h(C)?(g(),A(xe,{key:0,"via-resource":h(o),"parent-resource":h(f),"go-to-list":!1,onAssociated:R[11]||(R[11]=he=>(h(x)(),F.$router.back())),onCreated:R[12]||(R[12]=({isRegularAction:he})=>(he&&F.$router.back(),h(x)())),onHidden:F.$router.back},null,8,["via-resource","parent-resource","onHidden"])):K("",!0)]),_:1},8,["overlay"])}}},Wke={key:0,class:"mb-4 rounded-lg border border-neutral-300 bg-neutral-50/80 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-500/10"},Hf={__name:"ContactsCreate",props:{viaResource:String,parentResource:Object},emits:["associated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("contacts"),{t:r}=Ee(),{fields:s}=yn([{asyncUrl:"/contacts/search",attribute:"contacts",formComponent:"FormSelectField",helpText:r("contacts::contact.associate_field_info"),helpTextDisplay:"text",label:r("contacts::contact.contact"),labelKey:"display_name",valueKey:"id",lazyLoad:{url:"/contacts",params:{order:"created_at|desc"}}}]),{form:i}=Ze(),u=O(()=>!!i.contacts),c=O(()=>n.viaResource?u.value?r("contacts::contact.associate_with",{name:n.parentResource.display_name}):r("contacts::contact.create_with",{name:n.parentResource.display_name}):r("contacts::contact.create"));async function m(){await i.set({contacts:[i.contacts]}).put(`associations/${n.viaResource}/${n.parentResource.id}`),o("associated",i.contacts[0]),Innoclapps.success(r("core::resource.associated"))}return n.viaResource||bo(r("contacts::contact.create")),(f,v)=>{const y=d("FormFields"),b=d("CreateContactModal");return g(),A(b,en({title:c.value,"ok-text":u.value?f.$t("core::app.associate"):f.$t("core::app.create"),[e.viaResource||""]:e.viaResource?[e.parentResource]:void 0,"fields-visible":!u.value,"with-extended-submit-buttons":!u.value,"create-using":w=>u.value?m():w()}),{top:p(({isReady:w})=>[e.viaResource?ne((g(),D("div",Wke,[l(y,{fields:h(s),form:h(i),"resource-name":h(a),"is-floating":"",onUpdateFieldValue:v[0]||(v[0]=k=>h(i).fill(k.attribute,k.value)),onSetInitialValue:v[1]||(v[1]=k=>h(i).set(k.attribute,k.value))},null,8,["fields","form","resource-name"])],512)),[[pe,w]]):K("",!0)]),_:1},16,["title","ok-text","fields-visible","with-extended-submit-buttons","create-using"])}}},Gke=Object.assign({inheritAttrs:!1},{__name:"ContactsTable",props:{tableId:{required:!0,type:String},initialize:{default:!0,type:Boolean}},emits:["deleted"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("contacts"),{t:r}=Ee(),{reloadTable:s}=eo(n.tableId),{floatResourceInEditMode:i}=ao(),{deleteResource:u}=Dt(a),c=M(null);async function m(f){await u(f),o("deleted",f),s(),Innoclapps.success(r("core::resource.deleted"))}return(f,v)=>{const y=d("ITextDark"),b=d("ITableRowAction"),w=d("ITableRowActions"),k=d("ResourceTable"),x=d("CreateActivityModal");return g(),D(fe,null,[e.initialize?(g(),A(k,Ue({key:0,"resource-name":h(a),"table-id":e.tableId,"empty-state":{to:{name:"create-contact"},title:f.$t("contacts::contact.empty_state.title"),buttonText:f.$t("contacts::contact.create"),description:f.$t("contacts::contact.empty_state.description"),secondButtonText:f.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:h(a)}}}},f.$attrs),{header:p(({total:I})=>[l(y,{class:"font-medium",text:f.$t("contacts::contact.count.all",{count:I})},null,8,["text"])]),actions:p(({row:I})=>[l(w,null,{default:p(()=>[l(b,{icon:"Clock",text:f.$t("activities::activity.create"),onClick:C=>c.value={...I,name:I.display_name}},null,8,["text","onClick"]),I.authorizations.update?(g(),A(b,{key:0,icon:"PencilAlt",text:f.$t("core::app.edit"),onClick:C=>h(i)({resourceName:h(a),resourceId:I.id})},null,8,["text","onClick"])):K("",!0),I.authorizations.delete?(g(),A(b,{key:1,icon:"Trash",text:f.$t("core::app.delete"),onClick:C=>f.$confirm(()=>m(I.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),_:1},16,["resource-name","table-id","empty-state"])):K("",!0),l(x,{visible:c.value!==null,contacts:[c.value],"with-extended-submit-buttons":!0,"go-to-list":!1,onCreated:v[0]||(v[0]=({isRegularAction:I})=>(I&&(c.value=null),h(s)())),onHidden:v[1]||(v[1]=I=>c.value=null)},null,8,["visible","contacts"])],64)}}}),Pm="contacts",Kke={__name:"ContactsIndex",setup(e){const t=Innoclapps.resourceName("contacts"),n=It(),{reloadTable:o,customizeTable:a}=eo(Pm),r=M(n.meta.initialize),s=M(!0),i=O(()=>r.value&&!s.value);function u(){At("refresh-cards"),o()}return Va((c,m,f)=>{r.value=!0,f()}),(c,m)=>{const f=d("NavbarSeparator"),v=d("IDropdownItem"),y=d("IDropdownMinimal"),b=d("IButton"),w=d("NavbarItems"),k=d("RouterView"),x=d("MainLayout");return g(),A(x,null,{actions:p(()=>[l(f,{class:"hidden lg:block"}),l(w,null,{default:p(()=>[l(y,{placement:s.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(v,{icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:h(t)}},text:c.$t("core::import.import")},null,8,["to","text"]),c.$gate.userCan("export contacts")?(g(),A(v,{key:0,icon:"DocumentDownload",text:c.$t("core::app.export.export"),onClick:m[0]||(m[0]=I=>c.$dialog.show("export-modal"))},null,8,["text"])):K("",!0),l(v,{icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:h(t)}},text:c.$t("core::app.soft_deletes.trashed")},null,8,["to","text"]),l(v,{icon:"Cog",text:c.$t("core::table.list_settings"),onClick:h(a)},null,8,["text","onClick"])]),_:1},8,["placement"]),ne(l(b,{variant:"primary",icon:"PlusSolid",to:{name:"create-contact"},text:c.$t("contacts::contact.create")},null,8,["text"]),[[pe,!s.value]])]),_:1})]),default:p(()=>[i.value?(g(),A(Sd,{key:0,class:"mb-6","resource-name":h(t)},null,8,["resource-name"])):K("",!0),l(Gke,{"table-id":Pm,initialize:r.value,onLoaded:m[1]||(m[1]=I=>s.value=I.isPreEmpty),onDeleted:u},null,8,["initialize"]),l(Hi,{"url-path":"/contacts/export","resource-name":h(t),"filters-view":Pm,title:c.$t("contacts::contact.export")},null,8,["resource-name","title"]),l(k,{name:"create","redirect-to-view":!0,onCreated:m[2]||(m[2]=({isRegularAction:I})=>I?void 0:u()),onHidden:c.$router.back},null,8,["onHidden"])]),_:1})}}},Zke={class:"px-5 py-4"},Yke={__name:"ContactsViewCompanies",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("ICard");return Un([e.resource.companies.map(a=>a.updated_at)],()=>l(o,null,{default:p(()=>[_("div",Zke,[l(Kk,{"contact-id":e.resourceId,companies:e.resource.companies,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onCreateRequested:n[0]||(n[0]=a=>t.$router.push({name:"createCompanyViaContact",params:{id:e.resourceId}}))},null,8,["contact-id","companies","authorize-dissociate","show-create-button"])])]),_:1}),n,1)}}},Xke={class:"px-5 py-4"},Qke={__name:"ContactsViewDeals",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("ICard");return Un([e.resource.deals.map(a=>a.updated_at)],()=>l(o,null,{default:p(()=>[_("div",Xke,[l(Zk,{"contact-id":e.resourceId,deals:e.resource.deals,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onCreateRequested:n[0]||(n[0]=a=>t.$router.push({name:"createDealViaContact",params:{id:e.resourceId}}))},null,8,["contact-id","deals","authorize-dissociate","show-create-button"])])]),_:1}),n,1)}}},Jke={class:"mb-2 flex items-center justify-between px-5 py-4"},e5e={class:"-my-1.5 flex items-center space-x-1"},t5e=Object.assign({inheritAttrs:!1},{__name:"ContactsViewDetails",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=M(!0),{fields:o,hasFields:a,setResource:r,totalCollapsable:s,getDetailFields:i}=yn(),{floatResourceInEditMode:u}=ao();return i(t.resourceName,t.resource.id).then(c=>{o.value=c,r(gt(t,"resource"))}),(c,m)=>{const f=d("ITextDisplay"),v=d("IButton"),y=d("FieldsButtonCollapse"),b=d("DetailFields"),w=d("ICard"),k=Ve("i-tooltip");return g(),A(w,{overlay:!h(a)},{default:p(()=>[_("div",Jke,[ne(l(f,{text:c.$t("core::app.record_view.sections.details")},null,8,["text"]),[[pe,h(a)]]),ne(_("div",e5e,[e.resource.authorizations.update?ne((g(),A(v,{key:0,icon:"PencilAlt",basic:"",small:"",onClick:m[0]||(m[0]=x=>h(u)({resourceName:e.resourceName,resourceId:e.resourceId}))},null,512)),[[k,c.$t("core::app.edit")]]):K("",!0),c.$gate.isSuperAdmin()?ne((g(),A(v,{key:1,icon:"AdjustmentsVertical",to:{name:"resource-fields",params:{resourceName:e.resourceName},query:{view:c.$scriptConfig("fields.views.detail")}},basic:"",small:""},null,8,["to"])),[[k,c.$t("core::fields.manage")]]):K("",!0),h(s)>0?(g(),A(y,{key:2,collapsed:n.value,"onUpdate:collapsed":m[1]||(m[1]=x=>n.value=x),total:h(s)},null,8,["collapsed","total"])):K("",!0)],512),[[pe,h(a)]])]),h(a)?(g(),A(b,Ue({key:0},c.$attrs,{class:"overflow-y-auto px-2 py-1","initial-height-class":"h-[10rem]",collapsed:n.value,fields:h(o),"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource,resizeable:""}),null,16,["collapsed","fields","resource-name","resource-id","resource"])):K("",!0)]),_:1},8,["overlay"])}}}),n5e={class:"px-5 py-4"},o5e={__name:"ContactsViewMedia",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=Pe("synchronizeResource");return(n,o)=>{const a=d("IText"),r=d("ITextDisplay"),s=d("ICard");return Un([e.resource.media.map(i=>i.updated_at)],()=>l(s,null,{default:p(()=>[_("div",n5e,[l(r,null,{default:p(()=>[le(Z(n.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(a,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":e.resourceName,"resource-id":e.resourceId,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,onDeleted:o[0]||(o[0]=i=>h(t)({media:{id:i.id,_delete:!0}})),onUploaded:o[1]||(o[1]=i=>h(t)({media:[i]}))},null,8,["resource-name","resource-id","media","authorize-delete"])])]),_:1}),o,2)}}},a5e={class:"mx-auto max-w-7xl"},r5e={key:1,class:"relative"},l5e={class:"px-3 py-4 sm:p-6"},s5e={class:"flex grow flex-col lg:flex-row lg:items-center"},i5e={class:"overflow-hidden text-center lg:flex lg:grow lg:items-center lg:space-x-3 lg:text-left"},u5e={class:"space-y-2 overflow-hidden lg:space-y-0"},c5e={class:"flex flex-col items-center space-y-1 lg:flex-row lg:space-x-4 lg:space-y-0"},d5e={class:"shrink-0"},m5e={class:"flex shrink-0 flex-col items-center lg:ml-6 lg:flex-row lg:space-x-2"},f5e={class:"mt-5 flex shrink-0 justify-center space-x-0.5 lg:mt-0 lg:items-center lg:justify-normal"},p5e={key:2,class:"mt-8"},v5e={class:"lg:grid lg:grid-cols-12 lg:gap-8"},h5e={class:"col-span-4 space-y-3"},g5e={class:"col-span-8 mt-4 lg:mt-0"},b5e={__name:"ContactsView",setup(e){const t={"timeline-tab":zv,"timeline-tab-panel":Hv},n={"details-section":t5e,"deals-section":Qke,"companies-section":Yke,"media-section":o5e},o=Innoclapps.resourceName("contacts"),a=_t(),r=It(),{form:s}=Ze({first_name:null,last_name:null}),i=M(!1),u=M(Innoclapps.resource("contacts").pages.detail),c=r.query.section?u.value.tabs.findIndex(R=>R.id===r.query.section):0,m=O(()=>r.params.id),{resource:f,resourceSingularName:v,synchronizeResource:y,detachResourceAssociations:b,incrementResourceCount:w,decrementResourceCount:k,fetchResource:x,updateResource:I,resourceReady:C}=Vi(o,m),S=O(()=>{var R,B;return(B=(R=f.value)==null?void 0:R.authorizations)!=null&&B.view?`Modules.Contacts.App.Models.Contact.${m.value}`:null});st("synchronizeResource",y),st("detachResourceAssociations",b),st("incrementResourceCount",w),st("decrementResourceCount",k),bo(O(()=>f.value.display_name)),Ui(S,".ContactUpdated",()=>x()),Ut("refresh-details-view",()=>x()),Ut("floating-resource-updated",()=>x());const T=O(()=>f.value.companies.length==1),E=O(()=>u.value.sections.filter(R=>R.enabled===!0));function $(R){R.destroyable?a.push({name:"contact-index"}):x()}function F(){return I(s)}return x(),(R,B)=>{const V=d("IAlertBody"),P=d("IAlert"),z=d("IAvatar"),H=d("IPopoverButton"),j=d("IFormInput"),N=d("IFormError"),L=d("IFormGroup"),U=d("IPopoverBody"),ee=d("IButton"),G=d("IPopoverFooter"),W=d("IPopoverPanel"),ae=d("IPopover"),ue=d("IText"),ce=d("ICard"),oe=d("Icon"),ie=d("IDropdownButton"),Q=d("IDropdownItem"),se=d("IDropdownMenu"),me=d("IDropdown"),xe=d("ITabList"),de=d("ITabPanels"),he=d("ITabGroup"),Y=d("RouterView"),X=d("MainLayout");return g(),A(X,{overlay:!h(C)},{default:p(()=>[_("div",a5e,[h(C)&&!h(f).authorizations.view?(g(),A(P,{key:0,class:"mb-6",variant:"warning"},{default:p(()=>[l(V,null,{default:p(()=>[le(Z(R.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})):K("",!0),h(C)?(g(),D("div",r5e,[l(ce,null,{default:p(()=>[_("div",l5e,[_("div",s5e,[_("div",i5e,[l(z,{class:"lg:shrink-0 lg:self-start",size:"md",src:h(f).avatar_url,title:h(f).name},null,8,["src","title"]),_("div",u5e,[_("div",c5e,[l(ae,{onShow:B[2]||(B[2]=re=>{h(s).first_name=h(f).first_name,h(s).last_name=h(f).last_name}),onHide:B[3]||(B[3]=re=>h(s).errors.clear())},{default:p(({hide:re})=>[l(H,{as:"button",class:"relative rounded-md text-2xl font-bold text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:text-white dark:hover:bg-neutral-800 lg:truncate",text:h(f).display_name,disabled:!h(f).authorizations.update},null,8,["text","disabled"]),l(W,{class:"w-80"},{default:p(()=>[_("form",{onSubmit:ot(F,["prevent"])},[l(U,null,{default:p(()=>[l(L,{"label-for":"editFirstName",label:R.$t("contacts::fields.contacts.first_name"),required:""},{default:p(()=>[l(j,{id:"editFirstName",modelValue:h(s).first_name,"onUpdate:modelValue":B[0]||(B[0]=we=>h(s).first_name=we)},null,8,["modelValue"]),l(N,{error:h(s).getError("first_name")},null,8,["error"])]),_:1},8,["label"]),l(L,{"label-for":"editLastName",label:R.$t("contacts::fields.contacts.last_name")},{default:p(()=>[l(j,{id:"editLastName",modelValue:h(s).last_name,"onUpdate:modelValue":B[1]||(B[1]=we=>h(s).last_name=we)},null,8,["modelValue"]),l(N,{error:h(s).getError("last_name")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(G,{class:"flex justify-end space-x-2"},{default:p(()=>[l(ee,{disabled:h(s).busy,text:R.$t("core::app.cancel"),basic:"",onClick:re},null,8,["disabled","text","onClick"]),l(ee,{type:"submit",variant:"primary",loading:h(s).busy,disabled:h(s).busy||!h(s).first_name,text:R.$t("core::app.save"),onClick:we=>F().then(re)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)],32)]),_:2},1024)]),_:1}),_("div",d5e,[l(hs,{disabled:!h(f).authorizations.update,type:R.$scriptConfig("contacts.tags_type"),"model-value":h(f).tags,simple:"","onUpdate:modelValue":B[4]||(B[4]=re=>h(I)({tags:re}))},null,8,["disabled","type","model-value"])])]),h(f).job_title?(g(),A(ue,{key:0,class:"block overflow-hidden truncate"},{default:p(()=>[le(Z(T.value?R.$t("contacts::contact.works_at",{job_title:h(f).job_title,company:h(f).companies[0].name}):h(f).job_title),1)]),_:1})):K("",!0)])]),_("div",m5e,[B[5]||(je(-1),B[5]=ne(l(ee,{variant:"success",class:"mr-3 mt-5 lg:mt-0 lg:shrink-0",icon:"PlusSolid",to:{name:"createDealViaContact"},text:R.$t("deals::deal.add")},null,8,["text"]),[[pe,h(f).authorizations.update]]),je(1),B[5]),_("div",f5e,[l(Wv,{owner:h(f).user,"authorize-update":h(f).authorizations.update,onChange:B[6]||(B[6]=re=>h(I)({user_id:(re==null?void 0:re.id)||null}))},null,8,["owner","authorize-update"]),l(fs,{type:"dropdown",ids:h(f).id||[],actions:h(f).actions||[],"resource-name":h(o),onRun:$},null,8,["ids","actions","resource-name"])])])])])]),_:1}),B[7]||(je(-1),B[7]=R.$gate.isSuperAdmin()?(g(),A(me,{key:0,placement:"bottom-end"},{default:p(()=>[l(ie,{as:"button",class:"absolute -top-7 right-2 rotate-90 p-1 text-neutral-500 dark:text-neutral-300 lg:-right-7 lg:top-1.5 lg:rotate-0","no-caret":""},{default:p(()=>[l(oe,{icon:"EllipsisVerticalSolid",class:"size-5"})]),_:1}),l(se,null,{default:p(()=>[l(Q,{text:R.$t("core::app.record_view.manage_sidebar"),onClick:re=>i.value=!0},null,8,["text","onClick"])]),_:1})]),_:1})):K("",!0),je(1),B[7])])):K("",!0),h(C)?(g(),D("div",p5e,[_("div",v5e,[_("div",h5e,[(g(!0),D(fe,null,Ie(E.value,re=>ne((g(),D("div",{key:re.id},[(g(),A(Rt(n[re.component]||re.component),{"resource-name":h(o),"resource-id":h(f).id,resource:h(f),onUpdated:B[8]||(B[8]=we=>h(y)(we,!0))},null,40,["resource-name","resource-id","resource"]))])),[[pe,!i.value]])),128)),l(jv,{sections:u.value.sections,"onUpdate:sections":B[9]||(B[9]=re=>u.value.sections=re),show:i.value,"onUpdate:show":B[10]||(B[10]=re=>i.value=re),class:"-mt-3 inline",identifier:h(v),onSaved:B[11]||(B[11]=re=>i.value=!1)},null,8,["sections","show","identifier"])]),_("div",g5e,[l(he,{"default-index":h(c)},{default:p(()=>[l(ce,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:rounded-b-none"},{default:p(()=>[l(xe,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:pb-2.5 has-[[data-headlessui-state=selected]:not(:first-child)]:sm:pb-0",centered:""},{default:p(()=>[(g(!0),D(fe,null,Ie(u.value.tabs,re=>(g(),A(Rt(t[re.component]||re.component),{key:re.id,"resource-name":h(o),"resource-id":h(f).id,resource:h(f)},null,8,["resource-name","resource-id","resource"]))),128))]),_:1})]),_:1}),l(de,{class:"[&_[data-slot=panel]]:-mt-[18px]"},{default:p(()=>[(g(!0),D(fe,null,Ie(u.value.tabs,re=>(g(),A(Rt(t[re.panelComponent]||re.panelComponent),{id:"tabPanel-"+re.id,key:re.id,"scroll-element":"#main","resource-name":h(o),"resource-id":h(f).id,resource:h(f)},null,8,["id","resource-name","resource-id","resource"]))),128))]),_:1})]),_:1},8,["default-index"])])])])):K("",!0)]),h(C)?(g(),A(Y,{key:0,"via-resource":h(o),"parent-resource":h(f),"go-to-list":!1,onAssociated:B[12]||(B[12]=re=>(h(x)(),R.$router.back())),onCreated:B[13]||(B[13]=({isRegularAction:re})=>(re&&R.$router.back(),h(x)())),onHidden:R.$router.back},null,8,["via-resource","parent-resource","onHidden"])):K("",!0)]),_:1},8,["overlay"])}}},y5e=[{path:"/companies",name:"company-index",component:_xe,meta:{title:at("contacts::company.companies"),initialize:!1},beforeEnter:(e,t)=>{e.meta.initialize=e.name==="company-index"},children:[{path:"create",name:"create-company",components:{create:zf},meta:{title:at("contacts::company.create")}}]},{path:"/companies/:id",name:"view-company",component:Hke,children:[{path:"contacts/create",component:Hf,name:"createContactViaCompany"},{path:"deals/create",component:jf,name:"createDealViaCompany"}].map(e=>Object.assign(e,{meta:{scrollToTop:!1}}))},{path:"/contacts",name:"contact-index",component:Kke,meta:{title:at("contacts::contact.contacts"),initialize:!1},beforeEnter:(e,t)=>{e.meta.initialize=e.name==="contact-index"},children:[{path:"create",name:"create-contact",components:{create:Hf},meta:{title:at("contacts::contact.create")}}]},{path:"/contacts/:id",name:"view-contact",component:b5e,children:[{path:"companies/create",component:zf,name:"createCompanyViaContact"},{path:"deals/create",component:jf,name:"createDealViaContact"}].map(e=>Object.assign(e,{meta:{scrollToTop:!1}}))}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("CompanyFloatingModal",zwe),e.component("ContactFloatingModal",axe),e.component("CreateCompanyModal",rxe),e.component("CreateContactModal",lxe),e.component("FormPhoneField",vxe),e.component("DetailPhoneField",uxe),e.component("IndexPhoneField",Lk),y5e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"companies",component:sxe,name:"settings-companies",meta:{title:at("contacts::company.companies")}})});const _5e={key:0,class:"mb-4 border-b border-neutral-200 pb-8"},I5e={class:"-mt-2 block text-right"},w5e={__name:"CreateDealModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,createUsing:Function,withExtendedSubmitButtons:Boolean,fieldsVisible:{type:Boolean,default:!0},title:String,disabledFields:[Array,String],hiddenFields:[Array,String],associations:Object,pipeline:Object,stageId:Number,name:String,contacts:Array,companies:Array},emits:["created","update:visible","ready"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),{t:r}=Ee(),s=_t(),i=M(!1),u=M(!1),c=M(!1),{setting:m}=Ne(),{fields:f,hasFields:v,updateField:y,findField:b,getCreateFields:w}=yn(),{form:k}=Ze({billable:{tax_type:m("tax_type"),products:[]}}),{createResource:x}=Dt(a);La(()=>n.visible,P,{immediate:!0});function I(z){if(z.indexRoute={name:"deal-index"},z.action==="go-to-list")return s.push(z.indexRoute);if(z.action!=="create-another"&&n.redirectToView){let H=z.deal;s.deal=H,s.push({name:"view-deal",params:{id:H.id}})}}function C(z,H){b(z).options.push(H),k[z].push(H.id)}function S(){c.value=!1,T(),f.value=[],k.reset()}function T(){k.billable.products=[],k.billable.tax_type=m("tax_type")}function E(){c.value=!0,y("amount",{readonly:!0})}function $(){c.value=!1,y("amount",{readonly:!1})}function F(){V().then(I)}function R(){V("create-another").then(z=>{k.reset(),I(z)})}function B(){V("go-to-list").then(I)}async function V(z=null){c.value||T(),n.associations&&k.fill(n.associations);let j={deal:await x(k).catch(N=>(N.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(N))),isRegularAction:z===null,action:z};return o("created",j),Innoclapps.success(r("core::resource.created")),j}async function P(){let z=await w(a);const H=N=>z.some(L=>L.attribute===N),j=N=>Et(z,["attribute",N]);for(let N of["contacts","companies"]){if(!n[N])continue;let L=j(N);L!==-1?z[L].value=n[N]:k.set(N,n[N].map(U=>typeof U=="object"?U.id:U))}if(H("contacts")&&H("companies")){let N=j("contacts"),L=j("companies");const{lazyLoad:U}=z[N],{lazyLoad:ee}=z[L];z[L].lazyLoad=O(()=>k.contacts.length?k.contacts.map(G=>({url:`/contacts/${G}/companies`})):ee),z[N].lazyLoad=O(()=>k.companies.length?k.companies.map(G=>({url:`/companies/${G}/contacts`})):U)}n.name&&(z[j("name")].value=n.name),n.pipeline&&(z[j("pipeline_id")].value=n.pipeline,n.stageId||(z[j("stage_id")].value=n.pipeline.stages[0])),n.stageId&&(z[j("stage_id")].value=n.stageId?ut(n.pipeline.stages,N=>N.id===n.stageId):null),f.value=z,n.disabledFields&&qn(n.disabledFields).forEach(N=>y(N,{readonly:!0})),n.hiddenFields&&qn(n.hiddenFields).forEach(N=>y(N,{displayNone:!0})),o("ready",{fields:f,form:k})}return(z,H)=>{const j=d("FieldsPlaceholder"),N=d("ILink"),L=d("ITextDisplay"),U=d("IFormError"),ee=d("FormFields"),G=d("IDropdownItem"),W=d("IDropdownMenu"),ae=d("IExtendedDropdown"),ue=d("CreateContactModal"),ce=d("CreateCompanyModal"),oe=d("ISlideover");return g(),A(oe,{id:"createDealModal",visible:e.visible,title:e.title||z.$t("deals::deal.create"),"ok-text":z.$t("core::app.create"),"ok-disabled":h(k).busy,size:c.value?"xxl":"md","static-backdrop":"",form:"",onHidden:S,onSubmit:H[10]||(H[10]=ie=>e.createUsing?e.createUsing(F):F()),"onUpdate:visible":H[11]||(H[11]=ie=>z.$emit("update:visible",ie))},bn({default:p(()=>[h(v)?K("",!0):(g(),A(j,{key:0})),Se(z.$slots,"top",{isReady:h(v)}),ne(_("div",null,[c.value?(g(),D("div",_5e,[l(L,{class:"mb-5 inline-flex items-center"},{default:p(()=>[le(Z(z.$t("billable::product.products"))+" ",1),ne(l(N,{class:"ml-2 mt-0.5",text:z.$t("deals::deal.dont_add_products"),onClick:$},null,8,["text"]),[[pe,c.value]])]),_:1}),l(qv,{modelValue:h(k).billable.tax_type,"onUpdate:modelValue":H[0]||(H[0]=ie=>h(k).billable.tax_type=ie),class:"mb-4"},null,8,["modelValue"]),l(Lv,{products:h(k).billable.products,"onUpdate:products":H[1]||(H[1]=ie=>h(k).billable.products=ie),"tax-type":h(k).billable.tax_type},{"after-product-select":p(({index:ie})=>[l(U,{error:h(k).getError("billable.products."+ie+".name")},null,8,["error"])]),_:1},8,["products","tax-type"])])):K("",!0),l(ee,{fields:h(f),form:h(k),"resource-name":h(a),"is-floating":"","focus-first":"",onUpdateFieldValue:H[4]||(H[4]=ie=>h(k).fill(ie.attribute,ie.value)),onSetInitialValue:H[5]||(H[5]=ie=>h(k).set(ie.attribute,ie.value))},{"after-contacts-field":p(()=>[l(N,{class:"-mt-1 block text-right",onClick:H[2]||(H[2]=ie=>i.value=!0)},{default:p(()=>[le(" + "+Z(z.$t("contacts::contact.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(N,{class:"-mt-1 block text-right",onClick:H[3]||(H[3]=ie=>u.value=!0)},{default:p(()=>[le(" + "+Z(z.$t("contacts::company.create")),1)]),_:1})]),"after-amount-field":p(()=>[_("span",I5e,[ne(l(N,{onClick:E},{default:p(()=>[le(" + "+Z(z.$t("deals::deal.add_products")),1)]),_:1},512),[[pe,!c.value]]),ne(l(N,{text:z.$t("deals::deal.dont_add_products"),onClick:$},null,8,["text"]),[[pe,c.value]])])]),_:1},8,["fields","form","resource-name"])],512),[[pe,e.fieldsVisible]]),l(ue,{visible:i.value,"onUpdate:visible":H[6]||(H[6]=ie=>i.value=ie),overlay:!1,onCreated:H[7]||(H[7]=ie=>(C("contacts",ie.contact),i.value=!1))},null,8,["visible"]),l(ce,{visible:u.value,"onUpdate:visible":H[8]||(H[8]=ie=>u.value=ie),overlay:!1,onCreated:H[9]||(H[9]=ie=>(C("companies",ie.company),u.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(ae,{type:"submit",placement:"top-end",disabled:h(k).busy,loading:h(k).busy,text:z.$t("core::app.create")},{default:p(()=>[l(W,{class:"min-w-48"},{default:p(()=>[l(G,{text:z.$t("core::app.create_and_add_another"),onClick:R},null,8,["text"]),e.goToList?(g(),A(G,{key:0,text:z.$t("core::app.create_and_go_to_list"),onClick:B},null,8,["text"])):K("",!0)]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled","size"])}}},Yk={__name:"DealCompaniesList",props:{companies:{required:!0,type:Array},dealId:{required:!0,type:Number},authorizeDissociate:{required:!0,type:Boolean},showCreateButton:{required:!0,type:Boolean}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=t,{t:o}=Ee(),a=Pe("detachResourceAssociations");async function r(s){await a({companies:[s]}),n("dissociated",s),Innoclapps.success(o("core::resource.dissociated"))}return(s,i)=>{const u=d("IButton"),c=Ve("i-tooltip");return g(),A(Uv,{companies:e.companies,"empty-text":s.$t("deals::deal.no_companies_associated")},{actions:p(({company:m})=>[ne(l(u,{icon:"XSolid",basic:"",small:"",onClick:f=>s.$confirm(()=>r(m.id))},null,8,["onClick"]),[[pe,e.authorizeDissociate],[c,s.$t("contacts::company.dissociate"),void 0,{left:!0}]])]),"top-actions":p(()=>[e.showCreateButton?ne((g(),A(u,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:i[0]||(i[0]=m=>s.$emit("createRequested"))},null,512)),[[c,s.$t("contacts::company.add")]]):K("",!0)]),_:1},8,["companies","empty-text"])}}},Xk={__name:"DealContactsList",props:{contacts:{required:!0,type:Array},dealId:{required:!0,type:Number},authorizeDissociate:{required:!0,type:Boolean},showCreateButton:{required:!0,type:Boolean}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=t,o=Pe("detachResourceAssociations"),{t:a}=Ee();async function r(s){await o({contacts:[s]}),n("dissociated",s),Innoclapps.success(a("core::resource.dissociated"))}return(s,i)=>{const u=d("IButton"),c=Ve("i-tooltip");return g(),A(jk,{contacts:e.contacts,"empty-text":s.$t("deals::deal.no_contacts_associated")},{actions:p(({contact:m})=>[ne(l(u,{icon:"XSolid",basic:"",small:"",onClick:f=>s.$confirm(()=>r(m.id))},null,8,["onClick"]),[[pe,e.authorizeDissociate],[c,s.$t("contacts::contact.dissociate"),void 0,{left:!0}]])]),"top-actions":p(()=>[e.showCreateButton?ne((g(),A(u,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:i[0]||(i[0]=m=>s.$emit("createRequested"))},null,512)),[[c,s.$t("contacts::contact.add")]]):K("",!0)]),_:1},8,["contacts","empty-text"])}}},zo=M([]),Wa=()=>{const{setLoading:e,isLoading:t}=An(),{scriptConfig:n}=Ne();zo.value=[...n("deals.pipelines")||[]],on(()=>{n("deals.pipelines",[...zo.value])});const o=O(()=>Vt(zo.value,["user_display_order","is_primary","name"],["asc","desc","asc"])),a=O({get(){return o.value},set(k){const x=Tn(k,(I,C)=>Object.assign({},I,{user_display_order:C+1}));i(x),r(x)}});function r(k){Innoclapps.request().post("/pipelines/order",{order:Tn(k,x=>({id:x.id,display_order:x.user_display_order}))})}function s(k){return zo.value.findIndex(x=>x.id==k)}function i(k){zo.value=k}function u(k){return zo.value[s(k)]}function c(k,x){const I=u(k);return I==null?void 0:I.stages.filter(C=>parseInt(x)===parseInt(C.id))[0]}function m(k){zo.value.splice(s(k),1)}function f(k){zo.value.push(k)}function v(k,x){zo.value[s(k)]=x}async function y(k,x){const{data:I}=await Innoclapps.request(`/pipelines/${k}`,x);return I}async function b(k){await Innoclapps.request().delete(`/pipelines/${k}`),m(k)}function w(k){e(!0),Innoclapps.request("/pipelines",k).then(({data:x})=>zo.value=x).finally(()=>e(!1))}return{pipelines:zo,orderedPipelines:o,pipelinesAreBeingFetched:t,addPipeline:f,removePipeline:m,setPipelines:i,setPipeline:v,findPipelineById:u,findPipelineStageById:c,fetchPipelines:w,fetchPipeline:y,deletePipeline:b,orderedPipelinesForDraggable:a}},x5e=["textContent"],k5e=["textContent"],$5e={key:1,class:"flex flex-wrap items-center justify-center text-base/6 font-medium sm:justify-center sm:text-sm/6"},C5e=["textContent"],S5e=["textContent"],Qk={__name:"DealStagePopover",props:{dealId:{required:!0,type:Number},pipeline:{required:!0,type:Object},stageId:{required:!0,type:Number},status:{required:!0,type:String},authorizedToUpdate:{required:!0,type:Boolean}},emits:["updated"],setup(e,{emit:t}){const n=e,o=t,{orderedPipelines:a}=Wa(),{form:r}=Ze(),{updateResource:s}=Dt(Innoclapps.resourceName("deals")),i=O(()=>n.pipeline),u=O(()=>n.pipeline.stages.filter(b=>b.id==n.stageId)[0]),c=Pt(null),m=Pt(null);async function f(){let b=await s(r.fill({pipeline_id:c.value.id,stage_id:m.value.id}),n.dealId);o("updated",b)}function v(){c.value=i.value,m.value=u.value}function y(b){b.id!=n.pipeline.id?m.value=b.stages[0]||null:b.id===n.pipeline.id&&(m.value=u.value)}return(b,w)=>{const k=d("Icon"),x=d("IPopoverButton"),I=d("ICustomSelect"),C=d("IFormError"),S=d("IPopoverBody"),T=d("IButton"),E=d("IPopoverFooter"),$=d("IPopoverPanel"),F=d("IPopover");return e.authorizedToUpdate&&e.status==="open"?(g(),A(F,{key:0,onShow:v},{default:p(({hide:R})=>[l(x,{as:"button",class:"flex flex-wrap items-center justify-center text-base/6 font-medium focus:outline-none sm:text-sm/6 md:flex-nowrap md:justify-start"},{default:p(()=>[_("span",{class:"w-auto max-w-[15rem] truncate",textContent:Z(i.value.name)},null,8,x5e),l(k,{icon:"ChevronRightSolid",class:"size-4"}),_("span",{class:"w-auto max-w-[15rem] truncate text-left",textContent:Z(u.value.name)},null,8,k5e),l(k,{icon:"ChevronDownSolid",class:"ml-2 hidden size-4 shrink-0 md:block"})]),_:1}),l($,{class:"w-80"},{default:p(()=>[l(S,null,{default:p(()=>[l(I,{modelValue:c.value,"onUpdate:modelValue":[w[0]||(w[0]=B=>c.value=B),w[1]||(w[1]=B=>(h(r).errors.clear("pipeline_id"),h(r).errors.clear("stage_id")))],class:"mb-2",label:"name",options:h(a),clearable:!1,onOptionSelected:y},null,8,["modelValue","options"]),l(C,{error:h(r).getError("pipeline_id")},null,8,["error"]),l(I,{modelValue:m.value,"onUpdate:modelValue":[w[2]||(w[2]=B=>m.value=B),w[3]||(w[3]=B=>h(r).errors.clear("stage_id"))],label:"name",options:c.value?c.value.stages:[],clearable:!1},null,8,["modelValue","options"]),l(C,{error:h(r).getError("stage_id")},null,8,["error"])]),_:1}),l(E,{class:"flex justify-end space-x-2"},{default:p(()=>[l(T,{disabled:h(r).busy,text:b.$t("core::app.cancel"),basic:"",onClick:R},null,8,["disabled","text","onClick"]),l(T,{variant:"primary",text:b.$t("core::app.save"),loading:h(r).busy,disabled:h(r).busy||!m.value,onClick:B=>f().then(R)},null,8,["text","loading","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:1})):(g(),D("div",$5e,[_("span",{class:"max-w-[15rem] truncate",textContent:Z(i.value.name)},null,8,C5e),l(k,{icon:"ChevronRightSolid",class:"size-4"}),_("span",{class:"max-w-[15rem] truncate",textContent:Z(u.value.name)},null,8,S5e)]))}}},ll=M([]),Jk=()=>{const{setLoading:e,isLoading:t}=An(),{scriptConfig:n}=Ne();ll.value=[...n("deals.lost_reasons")||[]],on(()=>{n("deals.lost_reasons",[...ll.value])});const o=O(()=>Vt(ll.value,"name"));function a(s){ll.value=s}function r(s={}){e(!0),Innoclapps.request("/lost-reasons",Object.assign({},{params:{per_page:100}},s)).then(({data:i})=>ll.value=i.data).finally(()=>e(!1))}return{lostReasons:ll,lostReasonsByName:o,lostReasonsAreBeingFetched:t,setLostReasons:a,fetchLostReasons:r}},T5e={key:1,class:"mt-2 inline-flex items-center space-x-1"},Gv={__name:"DealLostReasonField",props:{modelValue:String,allowCustom:{type:Boolean,default:void 0},attribute:{default:"lost_reason",type:String}},emits:["update:modelValue"],setup(e){const t=e,{setting:n}=Ne(),o=M(!1),a=O(()=>t.allowCustom===void 0?n("allow_lost_reason_enter"):t.allowCustom),{lostReasonsByName:r}=Jk();return r.value.length===0&&a.value&&(o.value=!0),Je(()=>{ze(()=>{t.modelValue&&(o.value=!0)})}),(s,i)=>{const u=d("ICustomSelect"),c=d("IFormTextarea"),m=d("ILink"),f=d("Icon");return g(),D(fe,null,[!o.value&&h(r).length>0||!a.value?(g(),A(u,{key:0,label:"name",options:h(r),"input-id":o.value?`${e.attribute}-hidden`:e.attribute,"input-name":e.attribute,"onUpdate:modelValue":i[0]||(i[0]=v=>s.$emit("update:modelValue",v?v.name:null))},null,8,["options","input-id","input-name"])):K("",!0),ne(_("div",null,[l(c,{id:o.value?e.attribute:`${e.attribute}-hidden`,rows:"2","model-value":e.modelValue,name:e.attribute,"onUpdate:modelValue":i[1]||(i[1]=v=>s.$emit("update:modelValue",v))},null,8,["id","model-value","name"])],512),[[pe,o.value]]),h(r).length>0&&a.value?(g(),D("div",T5e,[l(m,{tabindex:"-1",text:s.$t(`deals::deal.lost_reasons.${o.value?"choose_lost_reason":"choose_lost_reason_or_enter"}`),basic:"",onClick:i[2]||(i[2]=v=>o.value=!o.value)},null,8,["text"]),l(m,{onClick:i[3]||(i[3]=v=>o.value=!o.value)},{default:p(()=>[l(f,{icon:"ArrowRight",class:"size-4"})]),_:1})])):K("",!0)],64)}}},E5e={key:0},F5e={class:"inline-flex"},A5e={key:1,class:"flex items-center space-x-2"},e5={__name:"DealStatusChange",props:{dealId:{type:Number,required:!0},dealStatus:{type:String,required:!0},lostPopoverPlacement:{type:String,default:"bottom"}},emits:["updated"],setup(e,{emit:t}){const n=e,o=t,{setting:a}=Ne(),{form:r}=Ze({lost_reason:null},{resetOnSuccess:!0}),{updateResource:s}=Dt(Innoclapps.resourceName("deals")),i=uo({won:!1,lost:!1,open:!1});async function u(c){i[c]=!0;try{let m=await s(r.fill({status:c}),n.dealId);c==="won"&&mp(),o("updated",m)}finally{i[c]=!1}}return(c,m)=>{const f=d("IButton"),v=d("IPopoverButton"),y=d("IPopoverHeading"),b=d("IPopoverHeader"),w=d("IFormError"),k=d("IFormGroup"),x=d("IPopoverBody"),I=d("IPopoverPanel"),C=d("IPopover"),S=d("IBadge"),T=Ve("i-tooltip"),E=Ve("t");return e.dealStatus==="open"?(g(),D("div",E5e,[_("div",F5e,[e.dealStatus!=="won"?ne((g(),A(f,{key:0,variant:"success",class:"mr-1.5 px-5",loading:i.won,disabled:i.won,text:c.$t("deals::deal.status.won"),onClick:m[0]||(m[0]=$=>u("won"))},null,8,["loading","disabled","text"])),[[T,c.$t("deals::deal.actions.mark_as_won")]]):K("",!0),e.dealStatus!=="lost"?(g(),A(C,{key:1,placement:e.lostPopoverPlacement},{default:p(()=>[l(v,{variant:"danger",class:"px-5"},{default:p(()=>[ne(_("span",null,null,512),[[T,c.$t("deals::deal.actions.mark_as_lost")],[E,"deals::deal.status.lost"]])]),_:1}),l(I,{class:"w-72 lg:w-[22rem]"},{default:p(()=>[l(b,null,{default:p(()=>[l(y,{text:c.$t("deals::deal.actions.mark_as_lost")},null,8,["text"])]),_:1}),l(x,{class:"flex flex-col"},{default:p(()=>[l(k,{"label-for":"lost_reason",label:c.$t("deals::deal.lost_reasons.lost_reason"),optional:!h(a)("lost_reason_is_required"),required:h(a)("lost_reason_is_required")},{default:p(()=>[l(Gv,{modelValue:h(r).lost_reason,"onUpdate:modelValue":m[1]||(m[1]=$=>h(r).lost_reason=$)},null,8,["modelValue"]),l(w,{error:h(r).getError("lost_reason")},null,8,["error"])]),_:1},8,["label","optional","required"]),l(f,{variant:"danger",loading:i.lost,disabled:i.lost,text:c.$t("deals::deal.actions.mark_as_lost"),block:"",onClick:m[2]||(m[2]=$=>u("lost"))},null,8,["loading","disabled","text"])]),_:1})]),_:1})]),_:1},8,["placement"])):K("",!0)])])):(g(),D("div",A5e,[l(S,{variant:e.dealStatus==="won"?"success":"danger",icon:e.dealStatus==="won"?"CheckBadge":"XSolid",text:c.$t("deals::deal.status."+e.dealStatus)},null,8,["variant","icon","text"]),l(f,{variant:"secondary",disabled:i.open,loading:i.open,text:c.$t("deals::deal.reopen"),onClick:m[3]||(m[3]=$=>u("open"))},null,8,["disabled","loading","text"])]))}}},R5e={key:1,class:"flex flex-col"},D5e={class:"flex flex-col items-center sm:-mt-1 md:flex-row"},O5e={class:"shrink-0 text-base sm:text-sm md:mr-3"},B5e=["textContent"],N5e=["textContent"],P5e={class:"mt-6 h-2 border-t border-neutral-200 dark:border-neutral-500/30"},M5e={class:"flex justify-end space-x-2"},V5e={__name:"DealFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},emits:["viewRequested"],setup(e){const t=e,n=Innoclapps.resourceName("deals"),{form:o}=Ze(),a=M(!0),r=M(!1),s=M(!1),i=Pe("synchronizeAndEmitUpdatedEvent"),u=Pe("hydrateFields"),c=Pe("totalCollapsableFields"),{t:m}=Ee(),{humanizeDuration:f,localizedDateTime:v}=rt(),y=O(()=>t.floatingReady?`${m("core::app.created_at")} ${v(t.resource.created_at)}`:""),b=O(()=>m("deals::deal.been_in_stage_time",{time:f(t.resource.time_in_stages[t.resource.stage.id])}));function w(I,C){u({[I]:C}),o.fill(I,C.map(S=>S.id))}function k(I){r.value=!1,i({companies:I.company}),ze(()=>{w("companies",t.resource.companies)})}function x(I){s.value=!1,i({contacts:I.contact}),ze(()=>{w("contacts",t.resource.contacts)})}return(I,C)=>{const S=d("FieldsPlaceholder"),T=d("FieldsButtonCollapse"),E=d("FormFields"),$=d("DetailFields"),F=d("IText"),R=d("ITextDisplay"),B=d("CreateContactModal"),V=d("CreateCompanyModal"),P=d("IButton"),z=d("ISlideover");return g(),A(z,{id:"dealFloatingModal",title:e.resource.display_name,"sub-title":y.value,"static-backdrop":"",form:"",onSubmit:C[15]||(C[15]=H=>e.updateHandler(h(o)))},{"modal-footer":p(()=>[_("div",M5e,[l(P,{variant:"secondary",disabled:!e.floatingReady,text:I.$t("core::app.view_record"),onClick:C[14]||(C[14]=H=>I.$emit("viewRequested",H))},null,8,["disabled","text"]),e.mode==="edit"?(g(),A(P,{key:0,type:"submit",variant:"primary",loading:h(o).busy,text:I.$t("core::app.save"),disabled:!e.floatingReady||h(o).busy||!e.resource.authorizations.update},null,8,["loading","text","disabled"])):K("",!0)])]),default:p(()=>[e.floatingReady?(g(),D("div",R5e,[_("div",{class:be(["mb-7 rounded-lg border px-4 py-3 md:px-5",{"border-primary-100 bg-primary-50/60 text-primary-800 dark:border-primary-400/20 dark:bg-primary-800/10 dark:text-primary-400":e.resource.status==="open","border-danger-100 bg-danger-50/50 text-danger-800 dark:border-danger-400/20 dark:bg-danger-800/10 dark:text-danger-400":e.resource.status==="lost","border-success-300/30 bg-success-50/50 text-success-800 dark:border-success-400/20 dark:bg-success-900/10 dark:text-success-400":e.resource.status==="won"}])},[_("div",D5e,[_("div",O5e,[l(Qk,{"deal-id":e.resource.id,pipeline:e.resource.pipeline,"stage-id":e.resource.stage_id,status:e.resource.status,"authorized-to-update":e.resource.authorizations.update,onUpdated:C[0]||(C[0]=H=>h(i)(H,!0))},null,8,["deal-id","pipeline","stage-id","status","authorized-to-update"])]),_("p",{class:"text-base/5 opacity-90 sm:text-sm/5 md:hidden",textContent:Z(b.value)},null,8,B5e),l(e5,{class:"my-2 md:my-0 md:ml-auto","lost-popover-placement":"bottom-end","deal-id":e.resource.id,"deal-status":e.resource.status,onUpdated:C[1]||(C[1]=H=>h(i)(H,!0))},null,8,["deal-id","deal-status"])]),_("p",{class:"-mt-1.5 hidden text-center text-base/5 opacity-90 sm:text-sm/5 md:block md:text-left",textContent:Z(b.value)},null,8,N5e)],2),h(c)>0?(g(),A(T,{key:0,collapsed:a.value,"onUpdate:collapsed":C[2]||(C[2]=H=>a.value=H),class:"mb-2 ml-auto",total:h(c)},null,8,["collapsed","total"])):K("",!0),e.mode==="edit"?(g(),A(E,{key:1,fields:e.fields,form:h(o),"resource-name":h(n),"resource-id":e.resource.id,collapsed:a.value,"is-floating":"",onUpdateFieldValue:C[3]||(C[3]=H=>h(o).fill(H.attribute,H.value)),onSetInitialValue:C[4]||(C[4]=H=>h(o).set(H.attribute,H.value))},null,8,["fields","form","resource-name","resource-id","collapsed"])):(g(),A($,{key:2,fields:e.fields,"resource-name":h(n),"resource-id":e.resource.id,resource:e.resource,collapsed:a.value,"is-floating":"",onUpdated:C[5]||(C[5]=H=>h(i)(H,!0))},null,8,["fields","resource-name","resource-id","resource","collapsed"])),ne(_("div",P5e,null,512),[[pe,e.mode==="detail"]]),_("div",{class:be(["mt-6 space-y-6 sm:space-y-8",e.mode==="detail"?"sm:px-10":"px-1"])},[_("div",null,[l(Xk,{"float-mode":e.mode,"deal-id":e.resource.id,contacts:e.resource.contacts,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onDissociated:C[6]||(C[6]=H=>(w("contacts",e.resource.contacts),h(i)({contacts:{id:H,_delete:!0}}))),onCreateRequested:C[7]||(C[7]=H=>s.value=!0)},null,8,["float-mode","deal-id","contacts","authorize-dissociate","show-create-button"])]),_("div",null,[l(Yk,{"float-mode":e.mode,"deal-id":e.resource.id,companies:e.resource.companies,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onDissociated:C[8]||(C[8]=H=>(w("companies",e.resource.companies),h(i)({companies:{id:H,_delete:!0}}))),onCreateRequested:C[9]||(C[9]=H=>r.value=!0)},null,8,["float-mode","deal-id","companies","authorize-dissociate","show-create-button"])]),_("div",null,[l(R,null,{default:p(()=>[le(Z(I.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(F,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":h(n),"resource-id":e.resource.id,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,"is-floating":"",onUploaded:C[10]||(C[10]=H=>h(i)({media:[H]})),onDeleted:C[11]||(C[11]=H=>h(i)({media:{id:H.id,_delete:!0}}))},null,8,["resource-name","resource-id","media","authorize-delete"])])],2),l(B,{visible:s.value,"onUpdate:visible":C[12]||(C[12]=H=>s.value=H),overlay:!1,deals:[e.resource],onCreated:x,onRestored:x},null,8,["visible","deals"]),l(V,{visible:r.value,"onUpdate:visible":C[13]||(C[13]=H=>r.value=H),overlay:!1,deals:[e.resource],onCreated:k,onRestored:k},null,8,["visible","deals"])])):(g(),A(S,{key:0}))]),_:1},8,["title","sub-title"])}}},L5e=["textContent"],q5e={__name:"DealPresentationCard",props:{card:Object},setup(e){const t=e,{orderedPipelines:n,findPipelineById:o}=Wa(),a=Pt(o(t.card.pipeline_id)),r=O(()=>({pipeline_id:a.value.id}));return(s,i)=>{const u=d("IDropdownButton"),c=d("IDropdownItem"),m=d("IDropdownMenu"),f=d("IDropdown"),v=d("PresentationChart");return g(),A(v,{card:e.card,"request-query-string":r.value},{actions:p(()=>[l(f,null,{default:p(()=>[l(u,{class:"md:mr-3",basic:""},{default:p(()=>[_("span",{class:"block max-w-32 truncate",textContent:Z(a.value.name)},null,8,L5e)]),_:1}),l(m,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(n),y=>(g(),A(c,{key:y.id,text:y.name,active:a.value.id===y.id,onClick:b=>a.value=y},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["card","request-query-string"])}}},U5e={__name:"DealsLostReasonsIndex",setup(e){const t=Innoclapps.resourceName("lost-reasons"),{fetchLostReasons:n}=Jk();return(o,a)=>{const r=d("ICardHeading");return g(),A(Ci,{"resource-name":h(t),"with-cancel":!1,onCreated:h(n),onUpdated:h(n),onDeleted:h(n)},{header:p(()=>[l(r,{text:o.$t("deals::deal.lost_reasons.lost_reasons")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},j5e={class:"px-6"},z5e=_("tbody",null,null,-1),H5e={__name:"DealsPipelinesIndex",setup(e){const{t}=Ee(),{orderedPipelinesForDraggable:n,deletePipeline:o}=Wa();async function a(r){await o(r),Innoclapps.success(t("deals::deal.pipeline.deleted"))}return(r,s)=>{const i=d("ICardHeading"),u=d("IButton"),c=d("ICardActions"),m=d("ICardHeader"),f=d("ITableHeader"),v=d("ITableRow"),y=d("ITableHead"),b=d("ITableCell"),w=d("ILink"),k=d("ITableRowAction"),x=d("ITableRowActions"),I=d("SortableDraggable"),C=d("ITable"),S=d("ICard"),T=d("RouterView");return g(),D(fe,null,[l(m,null,{default:p(()=>[l(i,{text:r.$t("deals::deal.pipeline.pipelines")},null,8,["text"]),l(c,null,{default:p(()=>[l(u,{variant:"primary",icon:"PlusSolid",to:{name:"create-pipeline"},text:r.$t("deals::deal.pipeline.create")},null,8,["text"])]),_:1})]),_:1}),l(S,null,{default:p(()=>[_("div",j5e,[l(C,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(y,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(v,null,{default:p(()=>[l(f,{class:"text-center",width:"5%"},{default:p(()=>[le(Z(r.$t("core::app.id")),1)]),_:1}),l(f,null,{default:p(()=>[le(Z(r.$t("deals::deal.pipeline.pipeline")),1)]),_:1}),l(f,{width:"8%"})]),_:1})]),_:1}),l(I,Ue(r.$draggable.common,{modelValue:h(n),"onUpdate:modelValue":s[0]||(s[0]=E=>$n(n)?n.value=E:null),"item-key":"id",tag:"tbody"}),{item:p(({element:E})=>[l(v,null,{default:p(()=>[l(b,{class:"text-center"},{default:p(()=>[le(Z(E.id),1)]),_:2},1024),l(b,null,{default:p(()=>[l(w,{class:"font-medium",to:{name:"edit-pipeline",params:{id:E.id}},text:E.name},null,8,["to","text"])]),_:2},1024),l(b,null,{default:p(()=>[l(x,null,{default:p(()=>[l(k,{icon:"PencilAlt",to:{name:"edit-pipeline",params:{id:E.id}},text:r.$t("core::app.edit")},null,8,["to","text"]),l(k,{icon:"Trash",text:r.$t("core::app.delete"),onClick:$=>r.$confirm(()=>a(E.id))},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},16,["modelValue"]),z5e]),_:1})])]),_:1}),l(T)],64)}}},W5e={class:"space-y-8"},G5e={__name:"SettingsDeals",setup(e){const{form:t,submit:n,isReady:o}=To();return(a,r)=>{const s=d("ICardHeading"),i=d("ICardHeader"),u=d("IFormSwitchLabel"),c=d("IFormSwitchDescription"),m=d("IFormSwitch"),f=d("IFormSwitchField"),v=d("IFormSwitchGroup"),y=d("ICardBody"),b=d("ICard");return g(),D("div",W5e,[_("div",null,[l(H5e)]),_("div",null,[l(i,null,{default:p(()=>[l(s,{text:a.$t("deals::deal.deals")},null,8,["text"])]),_:1}),l(b,{overlay:!h(o)},{default:p(()=>[l(y,null,{default:p(()=>[l(v,null,{default:p(()=>[l(f,null,{default:p(()=>[l(u,{text:a.$t("deals::deal.settings.allow_lost_reason_enter")},null,8,["text"]),l(c,{text:a.$t("deals::deal.settings.allow_lost_reason_enter_info")},null,8,["text"]),l(m,{modelValue:h(t).allow_lost_reason_enter,"onUpdate:modelValue":r[0]||(r[0]=w=>h(t).allow_lost_reason_enter=w),onChange:h(n)},null,8,["modelValue","onChange"])]),_:1}),l(f,null,{default:p(()=>[l(u,{text:a.$t("deals::deal.settings.lost_reason_is_required")},null,8,["text"]),l(c,{text:a.$t("deals::deal.settings.lost_reason_is_required_info")},null,8,["text"]),l(m,{modelValue:h(t).lost_reason_is_required,"onUpdate:modelValue":r[1]||(r[1]=w=>h(t).lost_reason_is_required=w),onChange:h(n)},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(U5e)])])}}},K5e={__name:"LostReasonField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("BaseFormField");return g(),A(u,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:c})=>[l(dn,{field:e.field,label:e.field.label,"field-id":c,"validation-errors":e.validationErrors},{default:p(()=>[l(Gv,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=m=>a.value=m),attribute:e.field.attribute},null,8,["modelValue","attribute"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Z5e={__name:"PipelineStageField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){var f;const n=e,o=t,a=M(((f=n.field.value)==null?void 0:f.pipeline_id)||null),r=O(()=>i(a.value)),s=O(()=>r.value.length>0);function i(v){return n.field.options.filter(y=>y[n.field.dependsOn]==v)}async function u(v){a.value=v,ze(()=>c(r.value[0]))}function c(v){o("update:modelValue",v&&v[n.field.valueKey]||null)}function m(){var v;o("setInitialValue",(v=n.field.value)==null?void 0:v.id)}return Ut("field-pipeline_id-value-changed",u),m(),(v,y)=>{const b=d("IAlertBody"),w=d("IAlert"),k=d("IText"),x=d("ICustomSelect"),I=d("BaseSelectField");return g(),A(I,{field:e.field,value:e.modelValue,options:r.value,"is-floating":e.isFloating},{default:p(({isReadonly:C,fieldId:S,lazyLoadingOptions:T,filterable:E,onSearch:$,onDropdownOpen:F,noOptionsText:R,headerText:B,selectValue:V,handleSelectInputChange:P})=>[l(dn,{field:e.field,label:e.field.label,"field-id":S,"validation-errors":e.validationErrors},{default:p(()=>[s.value?K("",!0):(g(),A(w,{key:0,class:"mb-2"},{default:p(()=>[l(b,null,{default:p(()=>[le(Z(v.$t("deals::deal.pipeline.missing_stages")),1)]),_:1})]),_:1})),l(x,Ue({"model-value":V,class:s.value?"":"hidden","input-id":S,disabled:C,filterable:E,options:r.value,loading:T,name:e.field.attribute,label:e.field.labelKey},e.field.attributes,{onSearch:$,onOpen:F,"onUpdate:modelValue":z=>(c(z),P(z))}),{"no-options":p(()=>[le(Z(R),1)]),header:p(()=>[ne(l(k,{class:"px-3 py-2",text:B},null,8,["text"]),[[pe,B]])]),_:2},1040,["model-value","class","input-id","disabled","filterable","options","loading","name","label","onSearch","onOpen","onUpdate:modelValue"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["field","value","options","is-floating"])}}},Y5e={};function X5e(e,t){const n=d("IndexTextareaField");return g(),A(n)}const Q5e=fn(Y5e,[["render",X5e]]),J5e=["textContent"],e$e=["textContent"],t$e={__name:"PipelineStageField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=d("BaseIndexField");return g(),A(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>{var a,r;return[_("span",{class:"font-medium",textContent:Z((a=e.field.value)==null?void 0:a.name)},null,8,J5e),_("span",{class:be(["text-sm text-neutral-500 dark:text-neutral-400 sm:text-xs",e.column.wrap?"block":"ml-1"]),textContent:Z((r=e.row.pipeline)==null?void 0:r.name)},null,10,e$e)]}),_:1},8,["resource-name","resource-id","row","field"])}}},n$e={__name:"DealsPipelinesCreate",setup(e){const t=_t(),{addPipeline:n}=Wa(),{resetStoreState:o}=Ne(),{form:a}=Ze({name:null});function r(){a.post("/pipelines").then(s=>{n(s),o(),t.push("/settings/deals/pipelines/"+s.id+"/edit")})}return(s,i)=>{const u=d("IFormInput"),c=d("IFormError"),m=d("IFormGroup"),f=d("IModal");return g(),A(f,{size:"sm","ok-text":s.$t("core::app.create"),"ok-disabled":h(a).busy,title:s.$t("deals::deal.pipeline.create"),form:"",visible:"",onSubmit:r,onShown:i[1]||(i[1]=()=>s.$refs.inputNameRef.focus()),onHidden:s.$router.back},{default:p(()=>[l(m,{"label-for":"name",label:s.$t("deals::deal.pipeline.name"),required:""},{default:p(()=>[l(u,{id:"name",ref:"inputNameRef",modelValue:h(a).name,"onUpdate:modelValue":i[0]||(i[0]=v=>h(a).name=v),name:"name",type:"text"},null,8,["modelValue"]),l(c,{error:h(a).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},o$e={class:"px-6"},a$e={class:"flex space-x-2"},r$e={class:"relative flex grow"},l$e={class:"absolute inset-y-0 left-0 flex items-center pl-3"},s$e={key:0,class:"absolute inset-y-0 left-11 hidden w-14 truncate px-1 sm:flex sm:items-center sm:justify-center"},i$e={class:"flex items-center"},u$e={class:"mr-4 grow"},c$e=["onUpdate:modelValue"],d$e={__name:"DealsPipelinesEdit",setup(e){const{t}=Ee(),n=It(),{resetStoreState:o}=Ne(),{setPipeline:a,fetchPipeline:r}=Wa(),{updateResource:s}=Dt("pipelines"),i=M(null),u=M({}),c=M(!1),{form:m}=Ze({name:null,stages:[],visibility_group:{type:"all",depends_on:[]}});async function f(){m.stages=Tn(m.stages,(x,I)=>(x.display_order=I,x));const k=await s(m,n.params.id,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}});a(k.id,k),o(),m.stages=k.stages,Innoclapps.success(t("deals::deal.pipeline.updated"))}function v(){m.stages.push({name:"",win_probability:100}),ze(()=>{i.value.focus()})}function y(k){m.stages.splice(k,1)}async function b(k){let x=m.stages[k].id;if(!x){y(k);return}await Innoclapps.confirm(),await Innoclapps.request().delete(`/pipeline-stages/${x}`),o(),y(k)}async function w(){try{const k=await r(n.params.id,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}});u.value=k,m.fill("name",k.name),m.fill("stages",k.stages),k.visibility_group&&m.fill("visibility_group",k.visibility_group),m.stages.length===0&&v()}finally{c.value=!0}}return w(),(k,x)=>{const I=d("ICardHeading"),C=d("ICardHeader"),S=d("IFormInput"),T=d("IFormError"),E=d("IFormGroup"),$=d("IAlertBody"),F=d("IAlert"),R=d("ICardBody"),B=d("ITableHeader"),V=d("ITableRow"),P=d("ITableHead"),z=d("Icon"),H=d("IButton"),j=d("ITableCell"),N=d("SortableDraggable"),L=d("ITable"),U=d("ICardFooter"),ee=d("ICard");return g(),D(fe,null,[l(C,null,{default:p(()=>[l(I,{text:k.$t("deals::deal.pipeline.edit")},null,8,["text"])]),_:1}),l(ee,{as:"form",overlay:!c.value,onSubmit:ot(f,["prevent"])},{default:p(()=>[l(R,null,{default:p(()=>[l(E,{"label-for":"name",label:k.$t("deals::deal.pipeline.name"),required:""},{default:p(()=>[l(S,{id:"name",modelValue:h(m).name,"onUpdate:modelValue":x[0]||(x[0]=G=>h(m).name=G),name:"name",type:"text"},null,8,["modelValue"]),l(T,{error:h(m).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(E,{class:"mt-4"},{default:p(()=>[l(Id,{type:h(m).visibility_group.type,"onUpdate:type":x[1]||(x[1]=G=>h(m).visibility_group.type=G),dependsOn:h(m).visibility_group.depends_on,"onUpdate:dependsOn":x[2]||(x[2]=G=>h(m).visibility_group.depends_on=G),disabled:u.value.is_primary},null,8,["type","dependsOn","disabled"])]),_:1}),l(F,{class:"mt-4",show:c.value&&u.value.is_primary},{default:p(()=>[l($,null,{default:p(()=>[le(Z(k.$t("deals::deal.pipeline.visibility_group.primary_restrictions")),1)]),_:1})]),_:1},8,["show"])]),_:1}),_("div",o$e,[l(L,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(P,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(V,null,{default:p(()=>[l(B,null,{default:p(()=>[le(Z(k.$t("deals::deal.stage.name")),1)]),_:1}),l(B,null,{default:p(()=>[le(Z(k.$t("deals::deal.stage.win_probability")),1)]),_:1})]),_:1})]),_:1}),l(N,Ue({modelValue:h(m).stages,"onUpdate:modelValue":x[3]||(x[3]=G=>h(m).stages=G),tag:"tbody"},k.$draggable.common,{handle:".draggable-handle","item-key":(G,W)=>W}),{item:p(({element:G,index:W})=>[l(V,null,{default:p(()=>[l(j,{class:"w-full sm:w-auto"},{default:p(()=>[_("div",a$e,[_("div",r$e,[_("div",l$e,[l(z,{icon:"Selector",class:"draggable-handle size-5 cursor-move text-neutral-500"})]),G.id?(g(),D("div",s$e," ID: "+Z(G.id),1)):K("",!0),l(S,{ref_key:"stageNameInputRef",ref:i,modelValue:h(m).stages[W].name,"onUpdate:modelValue":ae=>h(m).stages[W].name=ae,class:be(G.id?"pl-10 sm:pl-28":"!pl-10"),onKeydown:fo(ot(v,["prevent"]),["enter"])},null,8,["modelValue","onUpdate:modelValue","class","onKeydown"])]),l(H,{icon:"Trash",basic:"",onClick:ae=>b(W)},null,8,["onClick"])]),l(T,{error:h(m).getError("stages."+W+".name")},null,8,["error"])]),_:2},1024),l(j,null,{default:p(()=>[_("div",i$e,[_("div",u$e,[ne(_("input",{"onUpdate:modelValue":ae=>h(m).stages[W].win_probability=ae,type:"range",class:"h-2 w-full appearance-none rounded-lg border border-neutral-200 bg-neutral-200 focus:bg-neutral-300 focus:outline-none dark:border-neutral-500 dark:bg-neutral-700 dark:focus:bg-neutral-800",min:1,max:100},null,8,c$e),[[ua,h(m).stages[W].win_probability]])]),_("div",null,Z(h(m).stages[W].win_probability),1)]),l(T,{error:h(m).getError("stages."+W+".win_probability")},null,8,["error"])]),_:2},1024)]),_:2},1024)]),_:1},16,["modelValue","item-key"]),_("tfoot",null,[l(V,null,{default:p(()=>[l(j,{colspan:"2",class:"px-5 py-3"},{default:p(()=>[l(H,{variant:"primary",text:k.$t("deals::deal.stage.add"),soft:"",onClick:v},null,8,["text"])]),_:1})]),_:1})])]),_:1})]),l(U,{class:"text-right"},{default:p(()=>[l(H,{type:"submit",variant:"primary",disabled:h(m).busy,text:k.$t("core::app.save"),onClick:f},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},m$e={class:"board-top px-4 py-3 sm:px-6"},f$e=["id"],p$e={__name:"BaseBoard",props:{boardClass:[String,Array,Object],boardId:{required:!0,type:String}},setup(e){return(t,n)=>(g(),D("div",null,[_("div",m$e,[Se(t.$slots,"top")]),_("div",{id:e.boardId,class:be(["board block space-x-4 overflow-x-scroll whitespace-nowrap px-4 pb-2 sm:px-6",e.boardClass])},[Se(t.$slots,"default")],10,f$e)]))}},v$e={class:"inline-flex h-full w-80 flex-col overflow-y-hidden rounded-lg border border-neutral-300/40 bg-neutral-200/40 align-top shadow dark:border-neutral-500/30 dark:bg-neutral-900"},h$e={class:"px-3 py-2"},g$e={class:"flex items-center"},b$e=["textContent"],y$e=["id"],_$e={class:"m-2 overflow-hidden whitespace-normal rounded-md bg-white shadow dark:bg-neutral-800"},I$e={class:"px-4 py-5 sm:p-6"},w$e=_("div",{class:"flex items-center p-3"},null,-1),x$e={__name:"BaseBoardColumn",props:yt({name:{required:!0,type:String},columnId:{required:!0,type:Number},boardId:{required:!0,type:String},loader:{required:!0,type:Function},move:Function},{modelValue:{type:Array,required:!0},modelModifiers:{}}),emits:yt(["dragStart","dragEnd","updated","added","removed"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(m){n.loader(n.columnId,m)}function s(m){o("dragStart",m)}function i(m){o("dragEnd",m)}function u(m,f){if(n.move&&n.move(m,f)===!1)return!1}function c(m){m.removed&&o("removed",{columnId:n.columnId,event:m}),m.moved&&o("updated",{columnId:n.columnId,event:m}),m.added&&(o("added",{columnId:n.columnId,event:m}),o("updated",{columnId:n.columnId,event:m}))}return(m,f)=>{const v=d("SortableDraggable");return g(),D("div",v$e,[_("div",h$e,[_("div",g$e,[Se(m.$slots,"header",{},()=>[_("div",{class:"mr-auto truncate text-base font-medium text-neutral-800 dark:text-white sm:text-sm",textContent:Z(e.name)},null,8,b$e),_("div",null,[Se(m.$slots,"actions")])])]),Se(m.$slots,"after-header")]),_("div",{id:"boardColumn"+e.columnId,class:"h-auto overflow-y-auto overflow-x-hidden"},[l(v,Ue({...m.$draggable.scrollable,delay:5,preventOnFilter:!1,itemKey:y=>y.id,emptyInsertThreshold:100,move:u,group:{name:e.boardId}},{modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=y=>a.value=y),"data-column":e.columnId,onStart:s,onEnd:i,onChange:c}),{item:p(({element:y})=>[_("div",_$e,[Se(m.$slots,"card",{card:y},()=>[_("div",I$e,Z(y.display_name),1)])])]),_:3},16,["modelValue","data-column"])],8,y$e),w$e,l(gr,{"scroll-element":"#boardColumn"+e.columnId,onHandle:f[1]||(f[1]=y=>r(y))},null,8,["scroll-element"])])}}},k$e={class:"h-dropper fixed bottom-0 left-0 right-0 border-t border-neutral-300 bg-white shadow-sm dark:border-neutral-700 dark:bg-neutral-800 sm:left-56"},$$e={class:"flex justify-end"},C$e={class:"h-dropper relative w-1/3 border-t-2 border-success-500 sm:w-1/5"},S$e=_("div",null,null,-1),T$e={class:"dropper-header h-dropper absolute inset-0 flex place-content-center items-center font-medium text-neutral-600 dark:text-neutral-200"},E$e={class:"h-dropper relative w-1/3 border-t-2 border-danger-500 sm:w-1/5"},F$e=_("div",null,null,-1),A$e={class:"dropper-header h-dropper absolute inset-0 flex place-content-center items-center font-medium text-neutral-600 dark:text-neutral-200"},R$e={class:"h-dropper relative w-1/3 border-t-2 border-neutral-800 sm:w-1/5"},D$e=_("div",null,null,-1),O$e={class:"dropper-header h-dropper absolute inset-0 flex place-content-center items-center font-medium text-neutral-600 dark:text-neutral-200"},B$e={__name:"DealsBoardBottomDropper",props:{resourceId:{required:!0}},emits:["deleted","won","refreshRequested"],setup(e,{emit:t}){const n=t,{setting:o}=Ne(),a=M(null),{form:r}=Ze({lost_reason:null},{resetOnSuccess:!0}),{updateResource:s,deleteResource:i}=Dt(Innoclapps.resourceName("deals"));async function u(w){if(w.added)try{await Innoclapps.confirm(),await i(w.added.element.id),n("deleted",w.added.element)}catch{c()}}function c(){n("refreshRequested")}function m(w){w.added&&(a.value=w.added.element.id,Innoclapps.dialog().show("markAsLostModal"))}function f(){r.reset(),r.errors.clear(),a.value=null,c()}function v(w){s(r.fill({status:"lost"}),w).then(()=>Innoclapps.dialog().hide("markAsLostModal"))}function y(w){s(r.fill({status:"won"}),w).then(k=>{mp(),n("won",k),c()}).catch(()=>c())}function b(w){w.added&&y(w.added.element.id)}return(w,k)=>{const x=d("IFormError"),I=d("IFormGroup"),C=d("IModal"),S=d("SortableDraggable"),T=Ve("t");return g(),D("div",k$e,[l(C,{id:"markAsLostModal","ok-variant":"danger",size:"sm",title:w.$t("deals::deal.actions.mark_as_lost"),"ok-disabled":h(r).busy,"ok-text":w.$t("deals::deal.actions.mark_as_lost"),form:"",onSubmit:k[1]||(k[1]=E=>v(a.value)),onHidden:f},{default:p(()=>[l(I,{"label-for":"lost_reason",label:w.$t("deals::deal.lost_reasons.lost_reason"),optional:!h(o)("lost_reason_is_required"),required:h(o)("lost_reason_is_required")},{default:p(()=>[l(Gv,{modelValue:h(r).lost_reason,"onUpdate:modelValue":k[0]||(k[0]=E=>h(r).lost_reason=E)},null,8,["modelValue"]),l(x,{error:h(r).getError("lost_reason")},null,8,["error"])]),_:1},8,["label","optional","required"])]),_:1},8,["title","ok-disabled","ok-text"]),_("div",$$e,[_("div",C$e,[l(S,{class:"h-dropper dropper-won dropper","model-value":[],"item-key":E=>E.id,group:{group:"won",put:!0,pull:!1},onChange:b},{item:p(()=>[S$e]),header:p(()=>[ne(_("div",T$e,null,512),[[T,"deals::deal.status.won"]])]),_:1},8,["item-key"])]),_("div",E$e,[l(S,{class:"h-dropper dropper-lost dropper","model-value":[],"item-key":E=>E.id,group:{name:"lost",put:!0,pull:!1},onChange:m},{item:p(()=>[F$e]),header:p(()=>[ne(_("div",A$e,null,512),[[T,"deals::deal.status.lost"]])]),_:1},8,["item-key"])]),_("div",R$e,[l(S,{class:"h-dropper dropper-delete dropper","model-value":[],"item-key":E=>E.id,group:{name:"delete",put:!0,pull:!1},async:"",onChange:u},{item:p(()=>[D$e]),header:p(()=>[ne(_("div",O$e,null,512),[[T,"core::app.delete"]])]),_:1},8,["item-key"])])])])}}},N$e={class:"flex"},P$e={class:"grow truncate"},M$e={class:"-mt-0.5 flex text-sm"},V$e={class:"px-4 py-2 text-sm sm:text-xs"},L$e={class:"text-neutral-500 dark:text-neutral-300"},q$e=["textContent"],U$e=["onSubmit"],j$e=["textContent"],z$e={class:"flex flex-col items-center space-y-1"},H$e={class:"px-3 py-2 text-xs"},W$e={class:"text-neutral-500 dark:text-neutral-300"},G$e=["textContent"],K$e={key:0,class:"mt-1"},Z$e={class:"text-neutral-500 dark:text-neutral-300"},Y$e=["textContent"],xu=!1,X$e={__name:"DealsBoardCard",props:{dealId:{required:!0,type:Number},displayName:{required:!0,type:String},amount:{required:!0,type:[String,Number]},path:{required:!0,type:String},status:{required:!0,type:String},incompleteActivitiesCount:{required:!0,type:Number},productsCount:{required:!0,type:Number},expectedCloseDate:String,nextActivityDate:String,swatchColor:String,fallsBehindExpectedCloseDate:Boolean,updatedAt:String,createdAt:String},emits:["createActivityRequested","update:amount","update:productsCount","update:swatchColor"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),r=M(!1),{localizedDate:s,localizedDateTime:i,isMidnight:u}=rt(),{formatMoney:c}=ro(),{floatResourceInDetailMode:m,floatResourceInEditMode:f}=ao(),{form:v}=Ze({amount:n.amount}),{updateResource:y}=Dt(a),b=O(()=>{const V=["bottom-hidden group px-4 py-2"];return n.fallsBehindExpectedCloseDate&&V.push("bg-warning-200/20","dark:bg-warning-400/30"),n.status==="lost"?V.push("bg-danger-50","dark:bg-danger-500/30"):n.status==="won"&&V.push("bg-success-50/70","dark:bg-success-500/30"),{class:V}}),w=O(()=>c(n.amount)),k=O(()=>s(n.expectedCloseDate)),x=O(()=>i(n.createdAt)),I=O(()=>i(n.updatedAt)),C=O(()=>u(n.nextActivityDate)?s(n.nextActivityDate):i(n.nextActivityDate));function S(){m({resourceName:a,resourceId:n.dealId})}function T(V){r.value=!0,V()}function E(){f({resourceName:a,resourceId:n.dealId})}function $(){return y(v,n.dealId).then(V=>{o("update:amount",V.amount),v.set("amount",V.amount)})}function F(V){n.productsCount>0&&(V.preventDefault(),B())}async function R(V){o("update:amount",V.total),v.set("amount",V.total),o("update:productsCount",V.products.length)}function B(){r.value=!0}return(V,P)=>{const z=d("ILink"),H=d("IDropdownButton"),j=d("IDropdownSeparator"),N=d("IDropdownItem"),L=d("IDropdownMenu"),U=d("IDropdown"),ee=d("IPopoverButton"),G=d("IFormNumericInput"),W=d("IFormError"),ae=d("IFormGroup"),ue=d("Icon"),ce=d("IPopoverBody"),oe=d("IButton"),ie=d("IPopoverFooter"),Q=d("IPopoverPanel"),se=d("IPopover"),me=d("IDropdownMinimal"),xe=d("IColorSwatch"),de=Ve("t");return g(),D(fe,null,[e.swatchColor?(g(),D("div",{key:0,class:"bottom-hidden p-2",style:Nt({background:e.swatchColor})},null,4)):K("",!0),_("div",en(un(b.value)),[_("div",N$e,[_("div",P$e,[l(z,{class:"font-medium",href:e.path,text:e.displayName,basic:"",onClick:S},null,8,["href","text"]),_("div",M$e,[l(U,{portal:xu,offset:5},{default:p(()=>[l(H,{as:"button",class:be({"text-warning-500":e.incompleteActivitiesCount>0,"text-success-500":e.incompleteActivitiesCount===0}),"no-caret":""},{default:p(()=>[le(Z(V.$t("activities::activity.count",e.incompleteActivitiesCount,{count:e.incompleteActivitiesCount})),1)]),_:1},8,["class"]),l(L,null,{default:p(()=>[e.nextActivityDate?(g(),D(fe,{key:0},[_("div",V$e,[ne(_("p",L$e,null,512),[[de,"activities.activity.next_activity_date"]]),_("p",{class:"font-medium text-neutral-700 dark:text-neutral-100",textContent:Z(C.value)},null,8,q$e)]),l(j)],64)):K("",!0),l(N,{icon:"Clock",text:V.$t("activities::activity.create"),onClick:P[0]||(P[0]=he=>V.$emit("createActivityRequested",e.dealId))},null,8,["text"])]),_:1})]),_:1}),r.value?(g(),A($d,{key:0,"resource-name":h(a),"resource-id":e.dealId,visible:"",prefetch:"",onSaved:R,onHidden:P[1]||(P[1]=he=>r.value=!1)},null,8,["resource-name","resource-id"])):K("",!0),l(se,{portal:xu},{default:p(({hide:he})=>[l(ee,{class:"ml-2",text:w.value,link:"",basic:"",onClick:F},null,8,["text"]),l(Q,{class:"w-80"},{default:p(()=>[l(ce,null,{default:p(()=>[_("form",{onSubmit:ot(Y=>$().then(he),["prevent"])},[l(ae,{"label-for":"editDealAmount",label:V.$t("deals::fields.deals.amount"),required:""},{default:p(()=>[l(G,{id:"editDealAmount",modelValue:h(v).amount,"onUpdate:modelValue":P[2]||(P[2]=Y=>h(v).amount=Y)},null,8,["modelValue"]),l(W,{error:h(v).getError("amount")},null,8,["error"])]),_:1},8,["label"]),l(z,{class:"inline-flex items-center",onClick:Y=>T(he)},{default:p(()=>[le(Z(V.$t("billable::product.manage"))+" ",1),l(ue,{icon:"Window",class:"ml-2 mt-px size-4"})]),_:2},1032,["onClick"])],40,U$e)]),_:2},1024),l(ie,{class:"flex justify-end space-x-2"},{default:p(()=>[l(oe,{disabled:h(v).busy,text:V.$t("core::app.cancel"),basic:"",onClick:he},null,8,["disabled","text","onClick"]),l(oe,{variant:"primary",loading:h(v).busy,disabled:h(v).busy,text:V.$t("core::app.save"),onClick:Y=>$().then(he)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)]),_:2},1024)]),_:1})]),e.expectedCloseDate?(g(),D("p",{key:0,class:be(["-mt-1 text-sm/6 sm:text-xs/6",e.fallsBehindExpectedCloseDate?"animate-[pulse_4s_cubic-bezier(0.4,_0,_0.6,_1)_infinite] text-warning-600 dark:text-warning-300":"text-neutral-500 dark:text-neutral-300"]),textContent:Z(k.value)},null,10,j$e)):K("",!0)]),_("div",z$e,[l(me,{"items-class":"min-w-[180px]",placement:"bottom-end",portal:xu,small:""},{default:p(()=>[_("div",H$e,[ne(_("p",W$e,null,512),[[de,"core::app.created_at"]]),_("p",{class:"font-medium text-neutral-700 dark:text-neutral-100",textContent:Z(x.value)},null,8,G$e),e.updatedAt&&e.updatedAt!==e.createdAt?(g(),D("div",K$e,[ne(_("p",Z$e,null,512),[[de,"core::app.updated_at"]]),_("p",{class:"font-medium text-neutral-700 dark:text-neutral-100",textContent:Z(I.value)},null,8,Y$e)])):K("",!0)]),l(j),l(N,{icon:"Clock",text:V.$t("activities::activity.create"),onClick:P[3]||(P[3]=he=>V.$emit("createActivityRequested",e.dealId))},null,8,["text"]),l(N,{icon:"Eye",text:V.$t("core::app.view_record"),to:e.path},null,8,["text","to"]),l(N,{icon:"PencilAlt",text:V.$t("core::app.edit")+" "+V.$t("deals::deal.deal"),onClick:E},null,8,["text"])]),_:1}),l(se,{placement:"bottom-end",portal:xu,offset:0},{default:p(()=>[P[4]||(je(-1),P[4]=l(ee,{class:"opacity-100 md:opacity-0 md:group-hover:opacity-100",icon:"ColorSwatch",basic:"",small:""}),je(1),P[4]),l(Q,{class:"w-56"},{default:p(()=>[l(ce,null,{default:p(()=>[l(xe,{"model-value":e.swatchColor,swatches:V.$scriptConfig("favourite_colors"),customable:!1,onInput:P[5]||(P[5]=he=>V.$emit("update:swatchColor",he))},null,8,["model-value","swatches"])]),_:1})]),_:1})]),_:1})])])],16)],64)}}},Q$e={class:"flex"},J$e={class:"mr-2 grow"},eCe={value:"expected_close_date"},tCe={value:"created_at"},nCe={value:"amount"},oCe={value:"name"},aCe={value:"asc"},rCe={value:"desc"},lCe={__name:"DealsBoardSortOptions",emits:["applied"],setup(e,{emit:t}){const n=t,o=M({field:null,direction:"asc"});function a(){Innoclapps.dialog().hide("boardSortModal")}function r(){n("applied",o.value),a()}return(s,i)=>{const u=d("ITextDark"),c=d("IFormSelect"),m=d("IModal"),f=Ve("t");return g(),A(m,{id:"boardSortModal",size:"sm","ok-disabled":!o.value.field,"ok-text":s.$t("core::app.apply"),"hide-header":"",form:"",onSubmit:r},{default:p(()=>[l(u,{class:"mb-2 font-semibold"},{default:p(()=>[le(Z(s.$t("deals::deal.sort_by")),1)]),_:1}),_("div",Q$e,[_("div",J$e,[l(c,{modelValue:o.value.field,"onUpdate:modelValue":i[0]||(i[0]=v=>o.value.field=v)},{default:p(()=>[ne(_("option",eCe,null,512),[[f,"deals::fields.deals.expected_close_date"]]),ne(_("option",tCe,null,512),[[f,"core::app.creation_date"]]),ne(_("option",nCe,null,512),[[f,"deals::fields.deals.amount"]]),ne(_("option",oCe,null,512),[[f,"deals::deal.name"]])]),_:1},8,["modelValue"])]),_("div",null,[l(c,{modelValue:o.value.direction,"onUpdate:modelValue":i[1]||(i[1]=v=>o.value.direction=v)},{default:p(()=>[_("option",aCe,[le(" Asc ("),ne(_("span",null,null,512),[[f,"core::app.ascending"]]),le(") ")]),_("option",rCe,[le(" Desc ("),ne(_("span",null,null,512),[[f,"core::app.descending"]]),le(") ")])]),_:1},8,["modelValue"])])])]),_:1},8,["ok-disabled","ok-text"])}}},sCe={class:"space-x-0.5"},t5={__name:"DealsNavbarViewSelector",props:{active:{type:String,required:!0}},setup(e){return(t,n)=>{const o=d("IButton"),a=Ve("i-tooltip");return g(),D("div",sCe,[ne(l(o,{icon:"TableCells",to:{name:"deal-index"},active:e.active==="index",basic:""},null,8,["active"]),[[a,t.$t("core::app.list_view"),void 0,{bottom:!0}]]),ne(l(o,{icon:"ViewColumns",to:{name:"deal-board"},active:e.active==="board",basic:""},null,8,["active"]),[[a,t.$t("deals::board.board"),void 0,{bottom:!0}]])])}}},iCe={class:"sm:flex sm:flex-wrap"},uCe={key:0,class:"ml-0 mt-1 sm:ml-2 sm:mt-0"},cCe={class:"mt-4 flex w-full flex-wrap justify-between sm:ml-auto sm:mt-0 sm:w-auto md:justify-end"},dCe={class:"flex justify-between rounded-lg border border-neutral-300 p-3 text-sm dark:border-neutral-500/30"},mCe=["textContent"],fCe={class:"text-right"},pCe={class:"w-52"},vCe=["textContent"],hCe={class:"-mt-1 flex items-center text-sm"},gCe=["textContent"],bCe={key:1,class:"inline-flex items-center text-neutral-600 dark:text-neutral-300"},yCe=["textContent"],_Ce=_("span",{class:"mx-1 text-neutral-900 dark:text-neutral-300"},"-",-1),ICe=["textContent"],sl="deals",ku="deals-board",wCe={__name:"DealsBoard",setup(e){const t={field:"board_order",direction:"asc"},{t:n}=Ee(),{setLoading:o,isLoading:a}=An(),r=xi("dealsBoard",{pipeline_id:null}),s=It(),i=_t(),{formatMoney:u}=ro(),c=M(!1),m=sl,f=M({}),v=M({q:""}),y=M(null),b=M(null),w=M(!1),k=M(!1),x=Pt(new Map),I=M(0),C=M(t),S=M(!1),T=M(!1),E=M(null),{orderedPipelinesForDraggable:$}=Wa(),{availableRules:F,queryBuilderRules:R,rulesAreValid:B,findRule:V}=la(m,ku),{activeFilter:P,availableRules:z,filtersBuilderVisible:H,hasRules:j,filters:N,findFilter:L,currentUserDefaultFilter:U}=Pi(m,ku);F.value=z.value;const ee=O(()=>ut($.value,["id",parseInt(E.value)])||{});$e(ee,De=>{r.value.pipeline_id=De.id,Ce()});const G=O(()=>{var De,_e;return((_e=(De=V("status"))==null?void 0:De.query)==null?void 0:_e.value)==="lost"}),W=O(()=>{var De,_e;return((_e=(De=V("status"))==null?void 0:De.query)==null?void 0:_e.value)==="won"}),ae=O(()=>W.value||G.value),ue=O(()=>{var De;return!!((De=ee.value.authorizations)!=null&&De.update)}),ce=O(()=>"/deals/board/"+ee.value.id),oe=O(()=>{let De={},_e=[];return De.pipeline=ee.value,_e.push("pipeline_id"),b.value&&(De["stage-id"]=b.value,_e.push("stage_id")),De["hidden-fields"]=_e,De});function ie(){return{order:C.value,rules:B.value?R.value:[],...v.value}}function Q(De){if(!De.draggedContext.element.authorizations.update)return!1}async function se(De){C.value=De,await ge(),C.value=t,x.value.forEach(et),Innoclapps.info(n("deals::board.columns_sorted"))}async function me(){const De=[Innoclapps.request(sl+"/rules"),Innoclapps.request("/filters/"+sl)];let{0:_e,1:Te}=await Promise.all(De);z.value=_e.data.filter(Xe=>Xe.id!=="pipeline_id"),N.value=Te.data,xe()}async function xe(){o(!1);let De=r.value.pipeline_id,_e=De?ut($.value,["id",parseInt(De)]):void 0;if(_e||(_e=$.value[0]),s.query.filter_id){let Te=L(s.query.filter_id);R.value=Te.rules,P.value=Te.id,i.replace({query:sr(s.query,["filter_id"])})}else P.value?B.value||(R.value=P.value.rules):U.value&&(R.value=U.value.rules,P.value=U.value.id);E.value=_e.id,T.value=!0}function de(){I.value>0&&ge(),b.value=null,I.value=0}function he(De){b.value=parseInt(De.id),w.value=!0}function Y(){w.value=!0}function X(De){I.value++,De.isRegularAction&&(w.value=!1)}function re(){Rr(x)}async function we(De,_e){let Te=x.value.get(De);Object.hasOwn(Te,"infinityState")||(Te.infinityState=_e),Te.page+=1;const{data:Xe}=await Innoclapps.request(`${ce.value}/${Te.id}`,{params:{...ie(),page:Te.page}});Xe.cards.length===0?_e.complete():(x.value.set(Xe.id,Object.assign(x.value.get(Xe.id),sr(Xe,["cards","summary"]))),Xe.cards.forEach(Me=>x.value.get(Xe.id).cards.push(Me)),_e.loaded()),Rr(x)}function Ce(){ge(!1)}async function ge(De=!0){let _e={};if(De){let Te={};x.value.forEach(Xe=>{Te[Xe.id]=Xe.page}),v.value.pages=Te}else delete v.value.pages,x.value.forEach(Te=>{Te.infinityState&&(Te.infinityState.pause(),_e[Te.id]=Te.infinityState)});o(!0);try{const{data:Te}=await Innoclapps.request(ce.value,{params:ie()});return De||(x.value=new Map,f.value={}),Te.forEach(Xe=>{var Me;Xe.page=De&&((Me=x.value.get(Xe.id))==null?void 0:Me.page)||1,x.value.set(Xe.id,sr(Xe,["summary"])),ze(()=>{Gn(()=>{Object.hasOwn(_e,Xe.id)&&(x.value.set(Xe.id,Object.assign(x.value.get(Xe.id),{infinityState:_e[Xe.id]})),x.value.get(Xe.id).infinityState.resume(),delete _e[Xe.id])},300)}),f.value[Xe.id]=Xe.summary}),De&&Rr(x),Te}finally{o(!1),delete v.value.pages}}function Re(De=null){Innoclapps.request(`${ce.value}/summary${De?"/"+De:""}`,{params:ie()}).then(({data:_e})=>Object.keys(_e).forEach(Te=>f.value[Te]=_e[Te]))}function et(De){kt(De,!1)}function kt(De,_e=!0){lt(wd(De.cards,(Te,Xe,Me)=>(Te.push({id:Xe.id,board_order:Me+1,stage_id:De.id,swatch_color:Xe.swatch_color?Xe.swatch_color:null}),Te),[]),_e)}function lt(De,_e=!0){k.value=!0,Innoclapps.request().post(ce.value,De).finally(()=>{Rr(x),k.value=!1,_e&&Re()})}function ft(De){kt(x.value.get(De.columnId))}function zt(){k.value&&window.confirm("Update is in progress, please wait till the update finishes, if you still can see the message after few seconds, try to force-refresh the page.")}return me(),window.addEventListener("beforeunload",zt),Ut("floating-resource-updated",()=>ge()),rn(()=>{H.value=!1,window.removeEventListener("beforeunload",zt)}),(De,_e)=>{const Te=d("NavbarSeparator"),Xe=d("IButton"),Me=d("NavbarItems"),ke=d("SearchInput"),We=d("ITextDisplay"),$t=d("Icon"),Yt=d("SortableDraggable"),Fe=d("IModal"),Ge=d("IDropdownButton"),ht=d("IDropdownItem"),Xt=d("IDropdownSeparator"),Ke=d("IDropdownMenu"),He=d("IDropdown"),vt=d("CreateDealModal"),pn=d("CreateActivityModal"),Dn=d("MainLayout"),_o=Ve("i-tooltip"),Eo=Ve("dialog");return g(),A(Dn,{overlay:h(a),"no-padding":""},{actions:p(()=>[l(Te,{class:"hidden lg:block"}),l(Me,null,{default:p(()=>[l(t5,{active:"board"}),l(Xe,{variant:"primary",icon:"PlusSolid",text:De.$t("deals::deal.create"),onClick:Y},null,8,["text"])]),_:1})]),default:p(()=>[l(p$e,{"board-class":"deals-board","board-id":sl},{top:p(()=>[_("div",iCe,[l(ke,{modelValue:v.value.q,"onUpdate:modelValue":[_e[0]||(_e[0]=jt=>v.value.q=jt),Ce],class:"w-full sm:w-auto",placeholder:De.$t("core::app.search"),disabled:h(j)&&!h(B)},null,8,["modelValue","placeholder","disabled"]),T.value&&h(j)?(g(),D("div",uCe,[l(gx,{placement:"bottom-start",identifier:h(m),view:ku,onApply:Ce},null,8,["identifier"]),T.value?(g(),A(hx,{key:0,identifier:h(m),view:ku,"initial-apply":!1,onApply:Ce},null,8,["identifier"])):K("",!0)])):K("",!0),_("div",cCe,[l(Fe,{visible:c.value,"onUpdate:visible":_e[3]||(_e[3]=jt=>c.value=jt),size:"sm","hide-header":""},{"modal-footer":p(({cancel:jt})=>[_("div",fCe,[l(Xe,{variant:"secondary",text:De.$t("core::app.hide"),onClick:jt},null,8,["text","onClick"])])]),default:p(()=>[l(We,{class:"mb-2"},{default:p(()=>[le(Z(De.$t("deals::deal.pipeline.reorder")),1)]),_:1}),l(Yt,Ue({modelValue:h($),"onUpdate:modelValue":_e[1]||(_e[1]=jt=>$n($)?$.value=jt:null),"item-key":"id",class:"space-y-2 pb-2 last:pb-0",handle:".pipeline-order-handle"},De.$draggable.common,{onChange:_e[2]||(_e[2]=jt=>h(r).pipeline_id=null)}),{item:p(({element:jt})=>[_("div",dCe,[_("p",{class:"font-medium text-neutral-700 dark:text-neutral-200",textContent:Z(jt.name)},null,8,mCe),l($t,{icon:"Selector",class:"pipeline-order-handle size-5 cursor-move text-neutral-500"})])]),_:1},16,["modelValue"])]),_:1},8,["visible"]),_("div",{class:be(["inline-flex items-center space-x-2",T.value?"":"blur"])},[_("div",pCe,[l(He,{"adaptive-width":""},{default:p(()=>[l(Ge,{variant:"secondary",class:"w-full truncate"},{default:p(()=>[_("span",{class:"truncate",textContent:Z(ee.value.name)},null,8,vCe)]),_:1}),l(Ke,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h($),jt=>(g(),A(ht,{key:jt.id,text:jt.name,active:ee.value.id===jt.id,onClick:xn=>E.value=jt.id},null,8,["text","active","onClick"]))),128)),h($).length>1||ue.value?(g(),D(fe,{key:0},[l(Xt),h($).length>1?(g(),A(ht,{key:0,class:"font-medium",icon:"Bars3BottomLeft",text:De.$t("deals::deal.pipeline.reorder"),onClick:_e[4]||(_e[4]=jt=>c.value=!0)},null,8,["text"])):K("",!0),ue.value?(g(),A(ht,{key:1,class:"font-medium",icon:"PencilAlt",to:{name:"edit-pipeline",params:{id:ee.value.id}},text:De.$t("deals::deal.pipeline.edit")},null,8,["to","text"])):K("",!0)],64)):K("",!0)]),_:1})]),_:1})]),ne(l(Xe,{variant:"secondary",icon:"SortAscending"},null,512),[[_o,De.$t("core::app.sort")],[Eo,"boardSortModal"]]),l(lCe,{onApplied:se})],2)])])]),default:p(()=>[(g(!0),D(fe,null,Ie(x.value,([jt,xn])=>(g(),A(x$e,{key:xn.name,modelValue:xn.cards,"onUpdate:modelValue":[Ht=>xn.cards=Ht,re],name:xn.name,"column-id":jt,move:Q,loader:we,"board-id":sl,onDragStart:_e[5]||(_e[5]=Ht=>S.value=!0),onDragEnd:_e[6]||(_e[6]=Ht=>S.value=!1),onUpdated:ft},{"after-header":p(()=>[_("div",hCe,[xn.win_probability===100||ae.value||f.value[xn.id].value===0?(g(),D("span",{key:0,class:"text-neutral-600 dark:text-neutral-300",textContent:Z(h(u)(f.value[xn.id].value))},null,8,gCe)):ne((g(),D("span",bCe,[l($t,{icon:"Scale",class:"mr-1 size-4"}),_("span",{textContent:Z(h(u)(f.value[xn.id].weighted_value))},null,8,yCe)])),[[_o,De.$t("deals::deal.stage.weighted_value",{weighted_total:h(u)(f.value[xn.id].weighted_value),win_probability:xn.win_probability+"%",total:h(u)(f.value[xn.id].value)}),void 0,{right:!0}]]),_Ce,_("span",{class:"text-neutral-700 dark:text-neutral-300",textContent:Z(De.$t("deals::deal.count.all",{count:f.value[xn.id].count}))},null,8,ICe)])]),actions:p(()=>[l(Xe,{icon:"PlusSolid",basic:"",small:"",onClick:Ht=>he(xn)},null,8,["onClick"])]),card:p(({card:Ht})=>[l(X$e,{amount:Ht.amount,"onUpdate:amount":[ct=>Ht.amount=ct,ct=>Re(Ht.stage_id)],"products-count":Ht.products_count,"onUpdate:productsCount":[ct=>Ht.products_count=ct,ct=>Re(Ht.stage_id)],"swatch-color":Ht.swatch_color,"onUpdate:swatchColor":[ct=>Ht.swatch_color=ct,ct=>et(xn)],"deal-id":Ht.id,"display-name":Ht.display_name,path:Ht.path,status:Ht.status,"incomplete-activities-count":Ht.incomplete_activities_for_user_count,"next-activity-date":Ht.next_activity_date||void 0,"expected-close-date":Ht.expected_close_date||void 0,"falls-behind-expected-close-date":Ht.falls_behind_expected_close_date,"updated-at":Ht.updated_at,"created-at":Ht.created_at,onCreateActivityRequested:ct=>y.value=Ht},null,8,["amount","onUpdate:amount","products-count","onUpdate:productsCount","swatch-color","onUpdate:swatchColor","deal-id","display-name","path","status","incomplete-activities-count","next-activity-date","expected-close-date","falls-behind-expected-close-date","updated-at","created-at","onCreateActivityRequested"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","column-id"]))),128))]),_:1}),l(vt,Ue({visible:w.value,"onUpdate:visible":_e[7]||(_e[7]=jt=>w.value=jt),"with-extended-submit-buttons":!0,"go-to-list":!1},oe.value,{onHidden:de,onCreated:X}),null,16,["visible"]),l(pn,{visible:y.value!==null,deals:[y.value],"with-extended-submit-buttons":!0,"go-to-list":!1,onCreated:_e[8]||(_e[8]=({isRegularAction:jt})=>(jt&&(y.value=null),ge())),onHidden:_e[9]||(_e[9]=jt=>y.value=null)},null,8,["visible","deals"]),ne(l(B$e,{"resource-id":sl,onUpdateRequest:lt,onRefreshRequested:ge,onDeleted:_e[10]||(_e[10]=jt=>Re()),onWon:_e[11]||(_e[11]=jt=>Re())},null,512),[[pe,S.value]])]),_:1},8,["overlay"])}}},xCe={class:"ml-3 w-56"},kCe={__name:"DealsImport",setup(e){const t=Innoclapps.resourceName("deals"),{orderedPipelines:n}=Wa(),o=Pt(n.value[0]);return(a,r)=>{const s=d("ICustomSelect"),i=d("I18nT"),u=d("ICardHeading"),c=d("MainLayout");return g(),A(c,null,{default:p(()=>[l(qI,{"resource-name":h(t),"request-query-string":{pipeline_id:o.value.id}},{header:p(()=>[l(u,{class:"flex items-center"},{default:p(()=>[l(i,{scope:"global",keypath:"deals::deal.import_in"},{pipeline:p(()=>[_("div",xCe,[l(s,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=m=>o.value=m),label:"name",clearable:!1,options:h(n)},null,8,["modelValue","options"])])]),_:1})]),_:1})]),_:1},8,["resource-name","request-query-string"])]),_:1})}}},$Ce=["textContent"],CCe={class:"mx-1",textContent:"-"},SCe={class:"inline-flex items-center"},TCe=_("span",{class:"mx-1",textContent:"-"},null,-1),ECe=["textContent"],FCe=Object.assign({inheritAttrs:!1},{__name:"DealsTable",props:{tableId:{required:!0,type:String},initialize:{default:!0,type:Boolean}},emits:["deleted"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),{t:r}=Ee(),{formatMoney:s}=ro(),{reloadTable:i}=eo(n.tableId),{floatResourceInEditMode:u}=ao(),{deleteResource:c}=Dt(a),m=M(null),{findRule:f}=la(n.tableId),v=O(()=>{let b=f("status");return b?b.query.value==="won"||b.query.value==="lost":!1});async function y(b){await c(b),o("deleted",b),i(),Innoclapps.success(r("core::resource.deleted"))}return(b,w)=>{const k=d("Icon"),x=d("ITextBlockDark"),I=d("IBadge"),C=d("ITableRowAction"),S=d("ITableRowActions"),T=d("ResourceTable"),E=d("CreateActivityModal");return g(),D(fe,null,[e.initialize?(g(),A(T,Ue({key:0,"resource-name":h(a),"table-id":e.tableId,"empty-state":{to:{name:"create-deal"},title:b.$t("deals::deal.empty_state.title"),buttonText:b.$t("deals::deal.create"),description:b.$t("deals::deal.empty_state.description"),secondButtonText:b.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:h(a)}}}},b.$attrs),{header:p(({meta:$})=>[l(x,{class:"flex items-center font-medium"},{default:p(()=>{var F,R,B,V,P,z,H,j,N;return[_("span",{textContent:Z(h(s)((F=$.summary)==null?void 0:F.value))},null,8,$Ce),ne(_("span",CCe,null,512),[[pe,!v.value&&((R=$.summary)==null?void 0:R.weighted_value)>0&&((B=$.summary)==null?void 0:B.weighted_value)!==((V=$.summary)==null?void 0:V.value)]]),ne(_("span",SCe,[l(k,{icon:"Scale",class:"mr-1 size-4"}),_("span",null,Z(h(s)((P=$.summary)==null?void 0:P.weighted_value)),1)],512),[[pe,!v.value&&((z=$.summary)==null?void 0:z.weighted_value)>0&&((H=$.summary)==null?void 0:H.weighted_value)!==((j=$.summary)==null?void 0:j.value)]]),TCe,_("span",{textContent:Z(b.$t("deals::deal.count.all",{count:(N=$.summary)==null?void 0:N.count}))},null,8,ECe)]}),_:2},1024)]),status:p(({row:$,column:F})=>{var R,B;return[l(I,{variant:(R=F.statuses[$.status])==null?void 0:R.badge,text:b.$t("deals::deal.status."+((B=F.statuses[$.status])==null?void 0:B.name))},null,8,["variant","text"])]}),actions:p(({row:$})=>[l(S,null,{default:p(()=>[l(C,{icon:"Clock",text:b.$t("activities::activity.create"),onClick:F=>m.value=$},null,8,["text","onClick"]),$.authorizations.update?(g(),A(C,{key:0,icon:"PencilAlt",text:b.$t("core::app.edit"),onClick:F=>h(u)({resourceName:h(a),resourceId:$.id})},null,8,["text","onClick"])):K("",!0),$.authorizations.delete?(g(),A(C,{key:1,icon:"Trash",text:b.$t("core::app.delete"),onClick:F=>b.$confirm(()=>y($.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),_:1},16,["resource-name","table-id","empty-state"])):K("",!0),l(E,{visible:m.value!==null,deals:[m.value],"with-extended-submit-buttons":!0,"go-to-list":!1,onCreated:w[0]||(w[0]=({isRegularAction:$})=>($&&(m.value=null),h(i)())),onHidden:w[1]||(w[1]=$=>m.value=null)},null,8,["visible","deals"])],64)}}}),Mm="deals",ACe={__name:"DealsIndex",setup(e){const t=Innoclapps.resourceName("deals"),n=It(),{reloadTable:o,customizeTable:a}=eo(Mm),r=M(n.meta.initialize),s=M(!0),i=O(()=>r.value&&!s.value);function u(){At("refresh-cards"),o()}return Va((c,m,f)=>{r.value=!0,f()}),(c,m)=>{const f=d("NavbarSeparator"),v=d("IDropdownItem"),y=d("IDropdownMinimal"),b=d("IButton"),w=d("NavbarItems"),k=d("RouterView"),x=d("MainLayout");return g(),A(x,null,{actions:p(()=>[l(f,{class:"hidden lg:block"}),l(w,null,{default:p(()=>[l(y,{placement:s.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(v,{icon:"DocumentAdd",to:{name:"import-deal"},text:c.$t("core::import.import")},null,8,["text"]),c.$gate.userCan("export deals")?(g(),A(v,{key:0,icon:"DocumentDownload",text:c.$t("core::app.export.export"),onClick:m[0]||(m[0]=I=>c.$dialog.show("export-modal"))},null,8,["text"])):K("",!0),l(v,{icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:h(t)}},text:c.$t("core::app.soft_deletes.trashed")},null,8,["to","text"]),l(v,{icon:"Cog",text:c.$t("core::table.list_settings"),onClick:h(a)},null,8,["text","onClick"])]),_:1},8,["placement"]),l(t5,{active:"index"}),ne(l(b,{variant:"primary",icon:"PlusSolid",to:{name:"create-deal"},text:c.$t("deals::deal.create")},null,8,["text"]),[[pe,!s.value]])]),_:1})]),default:p(()=>[i.value?(g(),A(Sd,{key:0,class:"mb-6","resource-name":h(t)},null,8,["resource-name"])):K("",!0),l(FCe,{"table-id":Mm,initialize:r.value,"filter-id":c.$route.query.filter_id?parseInt(c.$route.query.filter_id):void 0,onLoaded:m[1]||(m[1]=I=>s.value=I.isPreEmpty),onDeleted:u},null,8,["initialize","filter-id"]),l(Hi,{"url-path":"/deals/export","resource-name":h(t),"filters-view":Mm,title:c.$t("deals::deal.export")},null,8,["resource-name","title"]),l(k,{name:"create","redirect-to-view":!0,onCreated:m[2]||(m[2]=({isRegularAction:I})=>I?void 0:u()),onHidden:c.$router.back},null,8,["onHidden"])]),_:1})}}},RCe={class:"flex items-center px-4 py-2 text-base font-medium sm:text-sm"},DCe={class:"ml-4 text-base font-medium text-neutral-900 dark:text-neutral-200 sm:text-sm"},OCe={__name:"DealMiniPipelineStageComplete",props:{dealStatus:{type:String,required:!0},requestInProgress:Boolean,stageIndex:{required:!0,type:Number},dealStageIndex:{required:!0,type:Number}},emits:["click"],setup(e){const t=e,n=O(()=>t.stageIndex>t.dealStageIndex),o=O(()=>t.stageIndex<=t.dealStageIndex);return(a,r)=>{const s=d("ISpinner"),i=d("Icon"),u=d("ILink");return g(),A(u,{class:"group flex w-full items-center",tabindex:"-1",plain:"",onClick:r[0]||(r[0]=c=>a.$emit("click"))},{default:p(()=>[_("span",RCe,[_("span",{class:be(["flex size-7 shrink-0 items-center justify-center rounded-full",{"bg-success-500 group-hover:bg-success-700 dark:bg-success-400 dark:group-hover:bg-success-500":e.dealStatus==="won"&&o.value||e.dealStatus==="open","border border-success-500 bg-transparent group-hover:border-success-600 dark:border-success-400 dark:group-hover:border-success-600":e.dealStatus==="won"&&n.value,"bg-danger-500 group-hover:bg-danger-700 dark:bg-danger-400 dark:group-hover:bg-danger-600":e.dealStatus==="lost"&&o.value,"border border-danger-500 bg-transparent group-hover:border-danger-600 dark:border-danger-400 dark:group-hover:border-danger-500":e.dealStatus==="lost"&&n.value}])},[e.requestInProgress?(g(),A(s,{key:0,class:"size-6"})):e.dealStatus==="open"||e.dealStatus==="won"?(g(),A(i,{key:1,icon:"Check",class:be(["size-6",e.dealStatus==="open"?"text-white":{"text-white":o.value,"text-success-500":n.value}])},null,8,["class"])):(g(),A(i,{key:2,icon:"XSolid",class:be(["size-6",{"text-white":o.value,"text-danger-500":n.value}])},null,8,["class"]))],2),_("span",DCe,[Se(a.$slots,"default")])])]),_:3})}}},BCe={class:"flex size-7 shrink-0 items-center justify-center rounded-full border-2 border-success-500 dark:border-success-400"},NCe={class:"text-success-500 dark:text-success-400"},PCe={class:"ml-4 text-base font-medium text-success-500 dark:text-success-400 sm:text-sm"},MCe={__name:"DealMiniPipelineStageCurrent",props:{requestInProgress:Boolean},emits:["click"],setup(e){return(t,n)=>{const o=d("ISpinner"),a=d("Icon"),r=d("ILink");return g(),A(r,{class:"flex items-center px-4 py-2 font-medium","aria-current":"step",tabindex:"-1",plain:"",onClick:n[0]||(n[0]=s=>t.$emit("click"))},{default:p(()=>[_("span",BCe,[_("span",NCe,[e.requestInProgress?(g(),A(o,{key:0,class:"size-6 text-success-500 dark:text-success-400"})):(g(),A(a,{key:1,icon:"Check",class:"size-6 text-success-500 dark:text-success-400"}))])]),_("span",PCe,[Se(t.$slots,"default")])]),_:3})}}},VCe={class:"flex items-center px-4 py-2 text-base font-medium sm:text-sm"},LCe={class:"flex size-7 shrink-0 items-center justify-center rounded-full border-2 border-neutral-300 group-hover:border-neutral-400 dark:border-neutral-500 dark:group-hover:border-neutral-100"},qCe={class:"ml-4 text-base font-medium text-neutral-500 group-hover:text-neutral-900 dark:text-neutral-400 dark:group-hover:text-neutral-100 sm:text-sm"},UCe={__name:"DealMiniPipelineStageFuture",props:{requestInProgress:Boolean},emits:["click"],setup(e){return(t,n)=>{const o=d("ISpinner"),a=d("Icon"),r=d("ILink");return g(),A(r,{class:"group flex items-center",tabindex:"-1",plain:"",onClick:n[0]||(n[0]=s=>t.$emit("click"))},{default:p(()=>[_("span",VCe,[_("span",LCe,[e.requestInProgress?(g(),A(o,{key:0,class:"size-6 text-neutral-500 dark:text-white/10"})):K("",!0),ne(l(a,{icon:"PlusSolid",class:"size-5 text-neutral-500 dark:text-neutral-100"},null,512),[[pe,!e.requestInProgress]])]),_("span",qCe,[Se(t.$slots,"default")])])]),_:3})}}},jCe={class:"relative overflow-hidden truncate bg-neutral-50 dark:bg-neutral-800 lg:flex lg:flex-1"},zCe={key:3,class:"absolute right-0 top-0 hidden h-full w-5 bg-neutral-50 dark:bg-neutral-800 lg:block","aria-hidden":"true"},HCe=_("svg",{class:"h-full w-full text-neutral-300 dark:text-neutral-500/30",viewBox:"0 0 22 80",fill:"none",preserveAspectRatio:"none"},[_("path",{d:"M0 -2L20 40L0 82","vector-effect":"non-scaling-stroke",stroke:"currentcolor","stroke-linejoin":"round"})],-1),WCe=[HCe],GCe={__name:"DealMiniPipelineStage",props:{dealStatus:{type:String,required:!0},stageId:{type:Number,required:!0},timeInStages:{type:Object,required:!0},stageName:{type:String,required:!0},totalStages:{type:Number,required:!0},dealId:{type:Number,required:!0},dealStageId:{type:Number,required:!0},dealStageIndex:{type:Number,required:!0},index:{required:!0,type:Number}},emits:["stageUpdated"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{humanizeDuration:r}=rt(),{updateResource:s,resourceBeingUpdated:i}=Dt(Innoclapps.resourceName("deals")),u=O(()=>n.index),c=O(()=>n.dealStageIndex>u.value),m=O(()=>n.dealStageIndex===u.value),f=O(()=>n.timeInStages[n.stageId]!=null),v=O(()=>{let b="";return n.totalStages>6&&(b+=n.stageName+" - "),f.value?b+=a("deals::deal.been_in_stage_time",{time:r(n.timeInStages[n.stageId])}):b+=a("deals::deal.hasnt_been_in_stage"),b});function y(){n.stageId===n.dealStageId||n.dealStatus!=="open"||s({stage_id:n.stageId},n.dealId).then(b=>{o("stageUpdated",b)})}return(b,w)=>{const k=Ve("i-tooltip");return g(),D("li",jCe,[c.value||e.dealStatus==="lost"||e.dealStatus==="won"?ne((g(),A(OCe,{key:0,"request-in-progress":h(i),"deal-status":e.dealStatus,"deal-stage-index":e.dealStageIndex,"stage-index":e.index,onClick:y},{default:p(()=>[le(Z(e.stageName),1)]),_:1},8,["request-in-progress","deal-status","deal-stage-index","stage-index"])),[[k,v.value]]):m.value?ne((g(),A(MCe,{key:1,"request-in-progress":h(i),onClick:y},{default:p(()=>[le(Z(e.stageName),1)]),_:1},8,["request-in-progress"])),[[k,v.value]]):ne((g(),A(UCe,{key:2,"request-in-progress":h(i),onClick:y},{default:p(()=>[le(Z(e.stageName),1)]),_:1},8,["request-in-progress"])),[[k,v.value]]),e.index!==e.totalStages-1?(g(),D("div",zCe,WCe)):K("",!0)])}}},KCe={"aria-label":"Progress"},ZCe={class:"divide-y divide-neutral-300 overflow-hidden rounded-md border border-neutral-300 dark:divide-neutral-500/30 dark:border-neutral-500/30 lg:flex lg:flex-wrap lg:divide-y-0"},YCe={__name:"DealMiniPipeline",props:{stages:{type:Array,required:!0},dealId:{type:Number,required:!0},dealStageId:{type:Number,required:!0},dealStatus:{type:String,required:!0},timeInStages:{type:Object,required:!0}},emits:["stageUpdated"],setup(e){const t=e,n=O(()=>t.stages.findIndex(o=>o.id==t.dealStageId));return(o,a)=>(g(),D("nav",KCe,[_("ol",ZCe,[(g(!0),D(fe,null,Ie(e.stages,(r,s)=>(g(),A(GCe,{key:r.id,"stage-id":r.id,"stage-name":r.name,"total-stages":e.stages.length,"time-in-stages":e.timeInStages,"deal-stage-id":e.dealStageId,"deal-id":e.dealId,"deal-status":e.dealStatus,"deal-stage-index":n.value,index:s,onStageUpdated:a[0]||(a[0]=i=>o.$emit("stageUpdated",i))},null,8,["stage-id","stage-name","total-stages","time-in-stages","deal-stage-id","deal-id","deal-status","deal-stage-index","index"]))),128))])]))}},XCe={class:"px-5 py-4"},QCe={__name:"DealsViewCompanies",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("ICard");return Un([e.resource.companies.map(a=>a.updated_at)],()=>l(o,null,{default:p(()=>[_("div",XCe,[l(Yk,{"deal-id":e.resourceId,companies:e.resource.companies,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onCreateRequested:n[0]||(n[0]=a=>t.$router.push({name:"createCompanyViaDeal",params:{id:e.resourceId}}))},null,8,["deal-id","companies","authorize-dissociate","show-create-button"])])]),_:1}),n,1)}}},JCe={class:"px-5 py-4"},e8e={__name:"DealsViewContacts",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("ICard");return Un([e.resource.contacts.map(a=>a.updated_at)],()=>l(o,null,{default:p(()=>[_("div",JCe,[l(Xk,{"deal-id":e.resourceId,contacts:e.resource.contacts,"authorize-dissociate":e.resource.authorizations.update,"show-create-button":e.resource.authorizations.update,onCreateRequested:n[0]||(n[0]=a=>t.$router.push({name:"createContactViaDeal",params:{id:e.resourceId}}))},null,8,["deal-id","contacts","authorize-dissociate","show-create-button"])])]),_:1}),n,1)}}},t8e={class:"mb-2 flex items-center justify-between px-5 py-4"},n8e={class:"-my-1.5 flex items-center space-x-1"},o8e=Object.assign({inheritAttrs:!1},{__name:"DealsViewDetails",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=M(!0),{fields:o,hasFields:a,setResource:r,totalCollapsable:s,getDetailFields:i}=yn(),{floatResourceInEditMode:u}=ao();return i(t.resourceName,t.resource.id).then(c=>{o.value=c,r(gt(t,"resource"))}),(c,m)=>{const f=d("ITextDisplay"),v=d("IButton"),y=d("FieldsButtonCollapse"),b=d("DetailFields"),w=d("ICard"),k=Ve("i-tooltip");return g(),A(w,{overlay:!h(a)},{default:p(()=>[_("div",t8e,[ne(l(f,{text:c.$t("core::app.record_view.sections.details")},null,8,["text"]),[[pe,h(a)]]),ne(_("div",n8e,[e.resource.authorizations.update?ne((g(),A(v,{key:0,icon:"PencilAlt",basic:"",small:"",onClick:m[0]||(m[0]=x=>h(u)({resourceName:e.resourceName,resourceId:e.resourceId}))},null,512)),[[k,c.$t("core::app.edit")]]):K("",!0),c.$gate.isSuperAdmin()?ne((g(),A(v,{key:1,icon:"AdjustmentsVertical",to:{name:"resource-fields",params:{resourceName:e.resourceName},query:{view:c.$scriptConfig("fields.views.detail")}},basic:"",small:""},null,8,["to"])),[[k,c.$t("core::fields.manage")]]):K("",!0),h(s)>0?(g(),A(y,{key:2,collapsed:n.value,"onUpdate:collapsed":m[1]||(m[1]=x=>n.value=x),total:h(s)},null,8,["collapsed","total"])):K("",!0)],512),[[pe,h(a)]])]),h(a)?(g(),A(b,Ue({key:0},c.$attrs,{class:"overflow-y-auto px-2 py-1","initial-height-class":"h-[8rem]",collapsed:n.value,fields:h(o),"resource-name":e.resourceName,"resource-id":e.resource.id,resource:e.resource,resizeable:""}),null,16,["collapsed","fields","resource-name","resource-id","resource"])):K("",!0)]),_:1},8,["overlay"])}}}),a8e={class:"px-5 py-4"},r8e={__name:"DealsViewMedia",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=Pe("synchronizeResource");return(n,o)=>{const a=d("IText"),r=d("ITextDisplay"),s=d("ICard");return Un([e.resource.media.map(i=>i.updated_at)],()=>l(s,null,{default:p(()=>[_("div",a8e,[l(r,null,{default:p(()=>[le(Z(n.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),A(a,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):K("",!0)]),_:1}),l(yr,{"resource-name":e.resourceName,"resource-id":e.resourceId,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,onDeleted:o[0]||(o[0]=i=>h(t)({media:{id:i.id,_delete:!0}})),onUploaded:o[1]||(o[1]=i=>h(t)({media:[i]}))},null,8,["resource-name","resource-id","media","authorize-delete"])])]),_:1}),o,2)}}},l8e={class:"mx-auto max-w-7xl"},s8e={key:1,class:"relative"},i8e={class:"px-3 py-4 sm:p-6"},u8e={class:"flex grow flex-col lg:flex-row lg:items-center"},c8e={class:"overflow-hidden text-center lg:flex lg:grow lg:items-center lg:space-x-4 lg:text-left"},d8e={class:"overflow-hidden"},m8e={class:"flex flex-col items-center space-y-1 lg:flex-row lg:space-x-4 lg:space-y-0"},f8e={class:"shrink-0"},p8e={class:"my-1 flex flex-col items-center justify-center space-y-2 lg:mb-1 lg:flex-row lg:justify-start lg:space-x-3 lg:space-y-0"},v8e={key:1},h8e=["textContent"],g8e={class:"order-1 shrink-0 justify-center font-medium text-neutral-800 hover:text-neutral-600 dark:text-neutral-200 dark:hover:text-neutral-400 sm:order-2 sm:text-sm/5 lg:justify-start"},b8e={class:"flex shrink-0 flex-col items-center lg:ml-6 lg:flex-row lg:space-x-2 lg:self-start"},y8e={class:"mt-5 flex shrink-0 justify-center space-x-0.5 lg:mt-0 lg:items-center lg:justify-normal"},_8e={key:2,class:"mt-8"},I8e={class:"lg:grid lg:grid-cols-12 lg:gap-8"},w8e={class:"col-span-4 space-y-3"},x8e={class:"col-span-8 mt-4 lg:mt-0"},k8e={__name:"DealsView",setup(e){const t={"timeline-tab":zv,"timeline-tab-panel":Hv},n={"details-section":o8e,"contacts-section":e8e,"companies-section":QCe,"media-section":r8e},o=Innoclapps.resourceName("deals"),a=_t(),r=It(),{formatMoney:s}=ro(),{localizedDateTime:i}=rt(),{form:u}=Ze({name:null}),c=M(!1),m=M(!1),f=M(Innoclapps.resource("deals").pages.detail),v=r.query.section?f.value.tabs.findIndex(P=>P.id===r.query.section):0;let y=O(()=>r.params.id);const{resource:b,resourceSingularName:w,synchronizeResource:k,detachResourceAssociations:x,incrementResourceCount:I,decrementResourceCount:C,fetchResource:S,updateResource:T,resourceReady:E}=Vi(o,y),$=O(()=>{var P,z;return(z=(P=b.value)==null?void 0:P.authorizations)!=null&&z.view?`Modules.Deals.App.Models.Deal.${y.value}`:null});Ut("refresh-details-view",()=>S()),Ut("floating-resource-updated",()=>S());const F=O(()=>f.value.sections.filter(P=>P.enabled===!0)),R=O(()=>b.value.pipeline.stages.map(({id:P,name:z})=>({id:P,name:z})));st("synchronizeResource",k),st("detachResourceAssociations",x),st("incrementResourceCount",I),st("decrementResourceCount",C),bo(O(()=>b.value.display_name)),Ui($,".DealUpdated",()=>S());function B(P){P.destroyable?a.push({name:"deal-index"}):S()}function V(){return T(u)}return S(),(P,z)=>{const H=d("IAlertBody"),j=d("IAlert"),N=d("IPopoverButton"),L=d("IFormError"),U=d("IFormGroup"),ee=d("IPopoverBody"),G=d("IButton"),W=d("IPopoverFooter"),ae=d("IPopoverPanel"),ue=d("IPopover"),ce=d("ILink"),oe=d("ITextBlock"),ie=d("ICard"),Q=d("Icon"),se=d("IDropdownButton"),me=d("IDropdownItem"),xe=d("IDropdownMenu"),de=d("IDropdown"),he=d("ITabList"),Y=d("ITabPanels"),X=d("ITabGroup"),re=d("RouterView"),we=d("MainLayout"),Ce=Ve("t");return g(),A(we,{overlay:!h(E)},{default:p(()=>[_("div",l8e,[h(E)&&!h(b).authorizations.view?(g(),A(j,{key:0,class:"mb-6",variant:"warning"},{default:p(()=>[l(H,null,{default:p(()=>[le(Z(P.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})):K("",!0),h(E)?(g(),D("div",s8e,[l(ie,null,{default:p(()=>[_("div",i8e,[_("div",u8e,[_("div",c8e,[_("div",d8e,[_("div",m8e,[l(ue,{onShow:z[1]||(z[1]=ge=>h(u).name=h(b).name),onHide:z[2]||(z[2]=ge=>h(u).errors.clear())},{default:p(({hide:ge})=>[l(N,{as:"button",class:"relative rounded-md text-2xl font-bold text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:text-white dark:hover:bg-neutral-800 lg:truncate",text:h(b).display_name,disabled:!h(b).authorizations.update},null,8,["text","disabled"]),l(ae,{class:"w-80"},{default:p(()=>[_("form",{onSubmit:ot(V,["prevent"])},[l(ee,null,{default:p(()=>[l(U,{"label-for":"editDealName",label:P.$t("deals::fields.deals.name"),required:""},{default:p(()=>[(g(),A(Rt(h(b).name.length<=60?"IFormInput":"IFormTextarea"),{id:"editDealName",modelValue:h(u).name,"onUpdate:modelValue":z[0]||(z[0]=Re=>h(u).name=Re)},null,8,["modelValue"])),l(L,{error:h(u).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(W,{class:"flex justify-end space-x-1"},{default:p(()=>[l(G,{disabled:h(u).busy,text:P.$t("core::app.cancel"),basic:"",onClick:ge},null,8,["disabled","text","onClick"]),l(G,{variant:"primary",loading:h(u).busy,disabled:h(u).busy||!h(u).name,text:P.$t("core::app.save"),onClick:Re=>V().then(ge)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)],32)]),_:2},1024)]),_:1}),_("div",f8e,[l(hs,{disabled:!h(b).authorizations.update,type:P.$scriptConfig("deals.tags_type"),"model-value":h(b).tags,simple:"","onUpdate:modelValue":z[3]||(z[3]=ge=>h(T)({tags:ge}))},null,8,["disabled","type","model-value"])])]),h(b).authorizations.update?(g(),A($d,{key:0,"resource-name":h(o),"resource-id":h(b).id,visible:m.value,prefetch:"",onHidden:z[4]||(z[4]=ge=>m.value=!1),onSaved:z[5]||(z[5]=ge=>h(k)({_sync_timestamp:new Date,billable:ge,amount:ge.total,products_count:ge.products.length}))},null,8,["resource-name","resource-id","visible"])):K("",!0),_("div",p8e,[l(oe,{class:"order-2 shrink-0 space-x-1 sm:order-1"},{default:p(()=>[h(b).authorizations.update?(g(),A(ce,{key:0,text:P.$t("billable::product.count",{count:h(b).products_count}),onClick:z[6]||(z[6]=ge=>m.value=!0)},null,8,["text"])):ne((g(),D("span",v8e,null,512)),[[Ce,{path:"billable::product.count",args:{count:h(b).products_count}}]]),Object.hasOwn(h(b),"amount")?(g(),D("span",{key:2,class:be(["font-medium text-neutral-700 dark:text-neutral-100",h(b).authorizations.update&&h(b).products_count?"cursor-pointer":""]),onClick:z[7]||(z[7]=ge=>h(b).authorizations.update&&h(b).products_count?m.value=!0:void 0),textContent:Z(h(s)(h(b).amount))},null,10,h8e)):K("",!0)]),_:1}),_("div",g8e,[l(Qk,{"deal-id":h(b).id,pipeline:h(b).pipeline,"stage-id":h(b).stage_id,status:h(b).status,"authorized-to-update":h(b).authorizations.update,onUpdated:z[8]||(z[8]=ge=>h(k)(ge,!0))},null,8,["deal-id","pipeline","stage-id","status","authorized-to-update"])])]),z[9]||(je(-1),z[9]=_("p",{class:"text-base/6 text-neutral-600 dark:text-neutral-300 sm:text-sm/6"},[le(Z(P.$t("core::app.created_at"))+" "+Z(h(i)(h(b).created_at)),1)]),je(1),z[9])])]),_("div",b8e,[h(b).authorizations.update?(g(),A(e5,{key:0,class:"mr-2 mt-5 lg:mt-0 lg:shrink-0","deal-id":h(b).id,"deal-status":h(b).status,onUpdated:z[10]||(z[10]=ge=>h(k)(ge,!0))},null,8,["deal-id","deal-status"])):K("",!0),_("div",y8e,[l(Wv,{owner:h(b).user,"authorize-update":h(b).authorizations.update,onChange:z[11]||(z[11]=ge=>h(T)({user_id:(ge==null?void 0:ge.id)||null}))},null,8,["owner","authorize-update"]),l(fs,{type:"dropdown",ids:h(b).id||[],actions:h(b).actions||[],"resource-name":h(o),onRun:B},null,8,["ids","actions","resource-name"])])])]),l(YCe,{class:"mt-5",stages:R.value,"time-in-stages":h(b).time_in_stages,"deal-status":h(b).status,"deal-stage-id":h(b).stage_id,"deal-id":h(b).id,onStageUpdated:z[12]||(z[12]=ge=>h(k)(ge,!0))},null,8,["stages","time-in-stages","deal-status","deal-stage-id","deal-id"])])]),_:1}),z[13]||(je(-1),z[13]=P.$gate.isSuperAdmin()?(g(),A(de,{key:0,placement:"bottom-end"},{default:p(()=>[l(se,{as:"button",class:"absolute -top-7 right-2 rotate-90 p-1 text-neutral-500 dark:text-neutral-300 lg:-right-7 lg:top-1.5 lg:rotate-0","no-caret":""},{default:p(()=>[l(Q,{icon:"EllipsisVerticalSolid",class:"size-5"})]),_:1}),l(xe,null,{default:p(()=>[l(me,{text:P.$t("core::app.record_view.manage_sidebar"),onClick:ge=>c.value=!0},null,8,["text","onClick"])]),_:1})]),_:1})):K("",!0),je(1),z[13])])):K("",!0),h(E)?(g(),D("div",_8e,[_("div",I8e,[_("div",w8e,[(g(!0),D(fe,null,Ie(F.value,ge=>ne((g(),D("div",{key:ge.id},[(g(),A(Rt(n[ge.component]||ge.component),{"resource-name":h(o),"resource-id":h(b).id,resource:h(b),onUpdated:z[14]||(z[14]=Re=>h(k)(Re,!0))},null,40,["resource-name","resource-id","resource"]))])),[[pe,!c.value]])),128)),l(jv,{sections:f.value.sections,"onUpdate:sections":z[15]||(z[15]=ge=>f.value.sections=ge),show:c.value,"onUpdate:show":z[16]||(z[16]=ge=>c.value=ge),class:"-mt-3 inline",identifier:h(w),onSaved:z[17]||(z[17]=ge=>c.value=!1)},null,8,["sections","show","identifier"])]),_("div",x8e,[l(X,{"default-index":h(v)},{default:p(()=>[l(ie,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:rounded-b-none"},{default:p(()=>[l(he,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:pb-2.5 has-[[data-headlessui-state=selected]:not(:first-child)]:sm:pb-0",centered:""},{default:p(()=>[(g(!0),D(fe,null,Ie(f.value.tabs,ge=>(g(),A(Rt(t[ge.component]||ge.component),{key:ge.id,"resource-name":h(o),"resource-id":h(b).id,resource:h(b)},null,8,["resource-name","resource-id","resource"]))),128))]),_:1})]),_:1}),l(Y,{class:"[&_[data-slot=panel]]:-mt-[18px]"},{default:p(()=>[(g(!0),D(fe,null,Ie(f.value.tabs,ge=>(g(),A(Rt(t[ge.panelComponent]||ge.panelComponent),{id:"tabPanel-"+ge.id,key:ge.id,"scroll-element":"#main","resource-name":h(o),"resource-id":h(b).id,resource:h(b)},null,8,["id","resource-name","resource-id","resource"]))),128))]),_:1})]),_:1},8,["default-index"])])])])):K("",!0)]),h(E)?(g(),A(re,{key:0,"via-resource":h(o),"parent-resource":h(b),"go-to-list":!1,onAssociated:z[18]||(z[18]=ge=>(h(S)(),P.$router.back())),onCreated:z[19]||(z[19]=({isRegularAction:ge})=>(ge&&P.$router.back(),h(S)())),onHidden:P.$router.back},null,8,["via-resource","parent-resource","onHidden"])):K("",!0)]),_:1},8,["overlay"])}}},Vm=xi("deals-board-view-default",!1),$8e=[{path:"/deals",name:"deal-index",component:ACe,meta:{title:at("deals::deal.deals"),subRoutes:["create-deal"],boardRoute:"deal-board",initialize:!1},beforeEnter:async(e,t)=>{if(Vm.value&&t.name!=e.meta.boardRoute&&e.meta.subRoutes.indexOf(e.name)===-1)return{name:e.meta.boardRoute,query:e.query};e.meta.initialize=e.name==="deal-index",e.meta.subRoutes.indexOf(e.name)===-1&&(Vm.value=!1)},children:[{path:"create",name:"create-deal",components:{create:jf},meta:{title:at("deals::deal.create")}}]},{path:"/import/deals",name:"import-deal",component:kCe,meta:{title:at("deals::deal.import")}},{path:"/deals/board",name:"deal-board",component:wCe,meta:{title:at("deals::deal.deals")},beforeEnter:()=>{Vm.value=!0}},{path:"/deals/:id",name:"view-deal",component:k8e,children:[{path:"contacts/create",component:Hf,name:"createContactViaDeal"},{path:"companies/create",component:zf,name:"createCompanyViaDeal"}].map(e=>Object.assign(e,{meta:{scrollToTop:!1}}))}];window.Innoclapps&&Innoclapps.booting((e,t)=>{e.component("DealPresentationCard",q5e),e.component("DealFloatingModal",V5e),e.component("CreateDealModal",w5e),e.component("FormLostReasonField",K5e),e.component("FormPipelineStageField",Z5e),e.component("IndexPipelineStageField",t$e),e.component("IndexLostReasonField",Q5e),$8e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"deals",name:"deals-settings-index",component:G5e,meta:{title:at("deals::deal.deals")},children:[{path:"pipelines/create",name:"create-pipeline",component:n$e,meta:{title:at("deals::deal.pipeline.create")}}]}),t.addRoute("settings",{path:"deals/pipelines/:id/edit",name:"edit-pipeline",component:d$e,meta:{title:at("deals::deal.pipeline.edit")}})});const C8e={__name:"RecordTabDocument",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=O(()=>t.resource.draft_documents_count>0?t.resource.draft_documents_count:t.resource.documents_count),o=O(()=>(t.resource.documents||[]).filter(a=>a.status==="draft").length>0?"danger":"neutral");return(a,r)=>{const s=d("Icon"),i=d("IBadge"),u=d("ITab");return Un([n.value,o.value],()=>l(u,null,{default:p(()=>[l(s,{icon:"DocumentText"}),le(" "+Z(a.$t("documents::document.documents"))+" ",1),ne(l(i,{text:n.value,variant:o.value,pill:""},null,8,["text","variant"]),[[pe,n.value]])]),_:1}),r,0)}}},S8e=(e,t)=>{if(T8e(e)){t&&t();return}var n=document.createElement("script");n.onload=()=>{t&&t()},n.src=e,document.head.appendChild(n)},dc=e=>{e.forEach(t=>{n5(`https://fonts.googleapis.com/css2?family=${decodeURI(t.name)}${t.stylesQueryString}&display=swap`)})},n5=(e,t=!1)=>{if(!E8e(e)){var n=document.createElement("link");n.rel="stylesheet",n.href=e,t?document.head.prepend(n):document.head.appendChild(n)}},T8e=e=>{const t=document.getElementsByTagName("script");for(let n=0;n<t.length;n++)if(t[n].getAttribute("src")===e)return!0;return!1},E8e=e=>{const t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)if(t[n].getAttribute("href")===e)return!0;return!1},F8e=e=>{const t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)t[n].getAttribute("href")===e&&t[n].parentNode.removeChild(t[n])},A8e=_("div",{class:"contentbuilder"},null,-1),R8e=["innerHTML"],Kv={__name:"ContentBuilder",props:{modelValue:{},disabled:Boolean,placeholders:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),{appUrl:s,scriptConfig:i,isDarkMode:u,locale:c}=Ne(),m=M(""),f=M(!1),v=$o(),y=i("favourite_colors").concat(["#388d3c","#616161","#e64918","#d32f2f","#5d4038"]);window._txt=window.lang[c.value].core.contentbuilder.builder;const b=["elm-remove","cell-remove","row-remove"];let w=null;const k=S("contentbuilder/contentbuilder.css"),x=S("contentbuilder/contentbuilder.min.js");$e(()=>o.disabled,(P,z)=>{P?I():!P&&z&&F()},{immediate:!0}),$e(m,P=>{P!=o.modelValue&&a("update:modelValue",P)}),$e(()=>o.modelValue,P=>{P!=m.value&&w&&w.loadHtml(P||"")},{immediate:!0});function I(){let P=document.querySelector(".add-more");P&&P.removeEventListener("click",C),document.removeEventListener("click",B),w&&w.destroy(),w=null}function C(){w.viewSnippets();let z=document.querySelector(".is-modal.snippets").querySelector("iframe");if(z){z.classList.add("rounded-lg");let H=z.contentDocument||z.contentWindow.document,j=document.createElement("style");H.head.appendChild(j),j.appendChild(document.createTextNode(u.value?`
          .light *::-webkit-scrollbar-thumb { background-color: rgba(148, 163, 184, 0.5); }
          .is-pop-close {margin-top: 5px; margin-right: 5px;}
           svg { fill: white; !important;}
          .is-pop-close:hover svg {fill: #cbd5e1; !important;}
          .is-category-list>div {background:#1e293a !important;}
          .is-more-categories {margin-top: 1px;}
          .is-more-categories a {color:white;}
          .is-category-list a {background: #64748b !important; color: white !important}
          .is-category-list a.active, .is-category-list a:hover {background: #475569 !important;}
          .is-more-categories a.active, .is-more-categories a:hover, .is-more-categories a:focus {background:#475569 !important;}
          .is-design-list, .is-more-categories a {background:#0f172a !important;}
        `:`
          .light *::-webkit-scrollbar-thumb { background-color: rgba(148, 163, 184, 0.7); }
          .is-pop-close {margin-top: 5px; margin-right: 5px;}
           svg { fill: #475569; !important;}
          .is-pop-close:hover svg {fill: #64748b; !important;}
          .is-category-list>div {background:#e2e8f0 !important;}
          .is-more-categories {margin-top: 1px;}
          .is-more-categories a {color:white;}
          .is-category-list a {background: #f1f5f9 !important; color: #334155 !important}
          .is-category-list a.active, .is-category-list a:hover {background: #cbd5e1 !important;}
          .is-more-categories a {color:#334155 !important;}
          .is-more-categories a.active, .is-more-categories a:hover, .is-more-categories a:focus {background:#cbd5e1 !important;}
          .is-design-list, .is-more-categories a {background:white !important;}
        `))}}function S(P){return`${s}/static/contentbuilder/${P}`}async function T(P,z,H){H=H||(P.match(/^data:([^;]+);/)||"")[1];const N=await(await fetch(P)).arrayBuffer();return new File([N],z,{type:H})}function E(P){return new Promise((z,H)=>{const j=new FormData;j.append("file",P),Innoclapps.request().post(`/media/pending/${v}`,j).then(({data:N})=>z(N.preview_path)).catch(N=>{let L=N.message&&N.message.includes("413")?r("core::app.file_too_large"):N.response.data.message;Innoclapps.error(L),H(L)})})}function $(){return new Promise((P,z)=>{if(!w){P();return}w.saveImages("",()=>{m.value=w.html(),P()},(H,j,N)=>{T(H.getAttribute("src"),N).then(L=>{E(L).then(U=>H.setAttribute("src",U)).catch(U=>z(U))}).catch(L=>z(L))})})}function F(){if(o.disabled)return;I();const P=".contentbuilder";w=new ContentBuilder({container:P,colors:y,useCssClasses:!1,toolStyle:"gray",outlineStyle:"grayoutline",rowHtmlEditor:!1,columnHtmlEditor:!1,enableDragResize:!0,customTags:o.placeholders.map(z=>{let H=`${z.interpolation_start} ${z.tag} ${z.interpolation_end}`;return[z.description||H,H]}),buttons:["bold","italic","underline","formatting","formatPara","color","align","createLink","tags","|","undo","redo","more"],buttonsMore:["textsettings","icon","image","|","list","font"],elementButtons:["left","center","right","full","undo","redo","more"],elementButtonsMore:[],iconButtons:["icon","color","textsettings","createLink","|","undo","redo","more"],iconButtonsMore:[],onChange:()=>{m.value=w.html()},snippetUrl:S("assets/minimalist-blocks/content.js"),snippetPath:S("assets/minimalist-blocks/"),modulePath:S("assets/modules/"),assetPath:S("assets/"),fontAssetPath:S("assets/fonts/"),maxColumns:3,snippetCategories:[[120,r("core::contentbuilder.snippets.basic")],[118,r("core::contentbuilder.snippets.text")],[101,r("core::contentbuilder.snippets.headline")],[119,r("core::contentbuilder.snippets.buttons")],[102,r("core::contentbuilder.snippets.photos")],[103,r("core::contentbuilder.snippets.profile")],[116,r("core::contentbuilder.snippets.contact")],[104,r("core::contentbuilder.snippets.products")],[105,r("core::contentbuilder.snippets.features")],[106,r("core::contentbuilder.snippets.process")],[107,r("core::contentbuilder.snippets.pricing")],[108,r("core::contentbuilder.snippets.skills")],[109,r("core::contentbuilder.snippets.achievements")],[110,r("core::contentbuilder.snippets.quotes")],[111,r("core::contentbuilder.snippets.partners")],[112,r("core::contentbuilder.snippets.as_featured_on")],[115,r("core::contentbuilder.snippets.help_and_faq")]],defaultSnippetCategory:120,plugins:[{name:"pagebreak",showInMainToolbar:!1,showInElementToolbar:!1},{name:"products",showInMainToolbar:!1,showInElementToolbar:!1},{name:"signatures",showInMainToolbar:!1,showInElementToolbar:!1}],pluginPath:S("contentbuilder/"),imageSelect:S("assets.html"),fileSelect:S("assets.html"),videoSelect:S("assets.html"),onMediaUpload:z=>{E(z.target.files[0]).then(H=>{w.returnUrl(H)})},onVideoUpload:z=>{E(z.target.files[0]).then(H=>{w.returnUrl(H)})}}),w.loadSnippets(S("assets/minimalist-blocks/content.js")),w.loadHtml(o.modelValue),f.value=!0}function R(P){b.forEach(z=>{if(P.target.classList.contains(z)){let H=document.querySelector(".is-modal.is-confirm");H&&H.querySelector("button").focus();return}})}function B(){document.addEventListener("click",R)}function V(){let P=document.querySelector(".add-more");if(P){let z=P.cloneNode(!0);P.parentNode.replaceChild(z,P),z.addEventListener("click",C)}}return Je(()=>{n5(k,!0),S8e(x,F),Gn(()=>{V(),B()},1e3)}),En(()=>{F8e(k),I()}),t({saveBase64Images:$,viewSnippets:C}),(P,z)=>{const H=d("IOverlay");return g(),A(H,{show:!f.value&&!e.disabled},{default:p(()=>[A8e,e.disabled?(g(),D("div",{key:0,class:"contentbuilder",innerHTML:e.modelValue},null,8,R8e)):K("",!0)]),_:1},8,["show"])}}},Zi={form:{required:!0},visible:Boolean,document:{default:()=>({}),type:Object}},D8e={class:"mx-auto max-w-6xl"},O8e={class:"mb-8 flex justify-end space-x-2 text-right"},B8e={class:"relative w-72"},N8e={class:"space-y-1 border-b border-neutral-200 pb-3 dark:border-neutral-500/30"},P8e={class:"grid auto-cols-max grid-flow-col gap-4"},M8e={class:"w-72"},V8e={class:"grid auto-cols-max grid-flow-col gap-4"},L8e={class:"w-72"},q8e={class:"mt-2.5"},U8e={class:"grid auto-cols-max grid-flow-col gap-4"},j8e={class:"w-72"},z8e={class:"grid auto-cols-max grid-flow-col gap-4"},H8e={class:"w-72"},W8e={class:"mt-10"},G8e={class:"prose prose-sm prose-neutral relative max-w-none dark:prose-invert"},o5={__name:"DocumentFormContent",props:{...Zi,isReady:{default:!0,type:Boolean}},setup(e,{expose:t}){const n=e,{scriptConfig:o}=Ne(),a=o("contentbuilder.fonts"),r=O(()=>a.map(P=>P["font-family"])),s=M(!1),i=M(null),u=M(null),c=M([]),m=M(null),f=M(!1),v=M(!1),y=o("documents.placeholders"),b=M(!1),{form:w}=Ze({name:"",content:"",is_shared:!1});$e(()=>n.document.updated_at,()=>{n.visible&&E()}),La(()=>n.visible,()=>{!f.value&&V(),s.value=!0,E()},{immediate:!0});const k=O(()=>n.form.content&&n.form.content.indexOf("{{ ")>-1),x=O(()=>n.form.content&&n.form.content.match(/(contact.|deal.|company.)/)),I=O(()=>n.form.billable.products.length>0&&(!n.form.content||n.form.content.indexOf("products-section")===-1)),C=O(()=>n.form.signers.length>0&&(!n.form.content||n.form.content.indexOf("signatures-section")===-1)),S=O(()=>n.document.associations_count===0&&n.isReady&&n.document.id&&k.value&&x.value),T=O(()=>Xr(c.value,["name","asc"]).map(P=>sr(P,["content"])));function E(){dc(n.document.google_fonts||[])}function $(){i.value.viewSnippets()}function F(){u.value.focus(),w.content=n.form.content}function R(){w.post("/document-templates").then(P=>{c.value.push(P),Innoclapps.dialog().hide("saveAsTemplateModal")})}function B(P){dc(P.google_fonts),n.form.content===null&&(n.form.content="");let z=ut(c.value,["id",P.id]);n.form.content+=z.content,z.view_type&&(n.form.view_type=z.view_type),Gn(()=>m.value=null,500)}function V(){v.value=!0,Innoclapps.request("document-templates",{params:{per_page:100}}).then(({data:P})=>{c.value=P.data,f.value=!0}).finally(()=>v.value=!1)}return t({builderRef:i}),(P,z)=>{const H=d("IFormInput"),j=d("IFormError"),N=d("IFormGroup"),L=d("IFormCheckbox"),U=d("IFormCheckboxLabel"),ee=d("IFormCheckboxField"),G=d("IModal"),W=d("IButton"),ae=d("ICustomSelect"),ue=d("Icon"),ce=d("ILink"),oe=d("ITextBlockDark"),ie=d("IFormLabel"),Q=d("IAlertBody"),se=d("IAlert"),me=d("I18nT"),xe=Ve("dialog"),de=Ve("i-tooltip");return ne((g(),D("div",D8e,[_("div",O8e,[l(G,{id:"saveAsTemplateModal",size:"sm","ok-text":P.$t("core::app.save"),"ok-disabled":h(w).busy,title:P.$t("documents::document.template.save_as_template"),"static-backdrop":"",form:"",onShown:F,onSubmit:R},{default:p(()=>[l(N,{"label-for":"name",label:P.$t("documents::document.template.name"),required:""},{default:p(()=>[l(H,{id:"name",ref_key:"inputNameRef",ref:u,modelValue:h(w).name,"onUpdate:modelValue":z[0]||(z[0]=he=>h(w).name=he)},null,8,["modelValue"]),l(j,{error:h(w).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(N,null,{default:p(()=>[l(ee,null,{default:p(()=>[l(L,{checked:h(w).is_shared,"onUpdate:checked":z[1]||(z[1]=he=>h(w).is_shared=he)},null,8,["checked"]),l(U,{text:P.$t("documents::document.template.share_with_team_members")},null,8,["text"])]),_:1}),l(j,{error:h(w).getError("is_shared")},null,8,["error"])]),_:1})]),_:1},8,["ok-text","ok-disabled","title"]),l(W,{icon:"AdjustmentsVertical",class:"shrink-0 self-start",basic:"",onClick:z[2]||(z[2]=he=>b.value=!b.value)}),l(W,{icon:"Sparkles",variant:"secondary",class:"shrink-0 self-start",disabled:P.document.status==="accepted",text:P.$t("core::contentbuilder.builder.Snippets"),onClick:$},null,8,["disabled","text"]),ne(l(W,{variant:"secondary",icon:"Bookmark",class:"shrink-0 self-start",text:P.$t("documents::document.template.save_as_template")},null,8,["text"]),[[pe,P.form.content],[xe,"saveAsTemplateModal"]]),_("div",B8e,[l(ae,{modelValue:m.value,"onUpdate:modelValue":z[3]||(z[3]=he=>m.value=he),label:"name",clearable:!1,loading:v.value,disabled:P.document.status==="accepted",placeholder:P.$t("documents::document.template.insert_template"),options:T.value,onOptionSelected:B},null,8,["modelValue","loading","disabled","placeholder","options"]),ne(_("a",{href:"#",class:"absolute right-9 top-2.5 text-neutral-400 hover:text-neutral-600 focus:outline-none",onClick:ot(V,["prevent","stop"])},[l(ue,{icon:"Refresh",class:"size-4"})],512),[[pe,!v.value]]),l(ce,{target:"_blank",class:"inline-flex items-center",to:{name:"document-templates-index"}},{default:p(()=>[le(Z(P.$t("documents::document.template.manage"))+" ",1),l(ue,{icon:"ExternalLink",class:"ml-2 size-4"})]),_:1})])]),ne(_("div",N8e,[l(oe,{class:"mb-4 inline-flex w-full items-center border-b border-neutral-200 pb-2 font-medium dark:border-neutral-500/30"},{default:p(()=>[l(ue,{icon:"Document",class:"mr-1.5 size-4"}),le(" "+Z(P.$t("documents::pdf.settings")),1)]),_:1}),_("div",P8e,[l(ie,{for:"pdf-padding",class:"mt-2.5 w-32",label:P.$t("documents::pdf.padding")},null,8,["label"]),_("div",M8e,[l(H,{id:"pdf-padding",modelValue:P.form.pdf.padding,"onUpdate:modelValue":z[4]||(z[4]=he=>P.form.pdf.padding=he),placeholder:P.$t("documents::pdf.no_padding")},null,8,["modelValue","placeholder"]),l(j,{error:P.form.getError("pdf.padding")},null,8,["error"])])]),_("div",V8e,[l(ie,{for:"pdf-font",class:"mt-2.5 w-32",label:P.$t("documents::pdf.default_font")},null,8,["label"]),_("div",L8e,[l(ae,{modelValue:P.form.pdf.font,"onUpdate:modelValue":z[5]||(z[5]=he=>P.form.pdf.font=he),"input-id":"pdf-font",placeholder:P.$t("documents::document.settings.inherits_setting_from_brand"),options:r.value},null,8,["modelValue","placeholder","options"]),l(j,{error:P.form.getError("pdf.font")},null,8,["error"])]),ne((g(),D("span",q8e,[l(ue,{icon:"QuestionMarkCircle",class:"size-5 text-neutral-500 dark:text-neutral-200"})])),[[de,P.$t("documents::pdf.default_font_info",{fontName:"DejaVu Sans"})]])]),_("div",U8e,[l(ie,{for:"pdf-size",class:"mt-2.5 w-32",label:P.$t("documents::pdf.size")},null,8,["label"]),_("div",j8e,[l(ae,{modelValue:P.form.pdf.size,"onUpdate:modelValue":z[6]||(z[6]=he=>P.form.pdf.size=he),"input-id":"pdf-size",options:["a4","letter"],placeholder:P.$t("documents::document.settings.inherits_setting_from_brand")},null,8,["modelValue","placeholder"]),l(j,{error:P.form.getError("pdf.size")},null,8,["error"])])]),_("div",z8e,[l(ie,{for:"pdf-orientation",class:"mt-2.5 w-32",label:P.$t("documents::pdf.orientation")},null,8,["label"]),_("div",H8e,[l(ae,{modelValue:P.form.pdf.orientation,"onUpdate:modelValue":z[7]||(z[7]=he=>P.form.pdf.orientation=he),"input-id":"pdf-orientation",options:["portrait","landscape"],placeholder:P.$t("documents::document.settings.inherits_setting_from_brand")},null,8,["modelValue","placeholder"]),l(j,{error:P.form.getError("pdf.orientation")},null,8,["error"])])])],512),[[pe,b.value]]),_("div",W8e,[S.value?(g(),A(se,{key:0,class:"mb-4"},{default:p(()=>[l(Q,null,{default:p(()=>[le(Z(P.$t("documents::document.placeholders_replacement_info")),1)]),_:1})]),_:1})):K("",!0),I.value?(g(),A(se,{key:1,class:"mb-4"},{default:p(()=>[l(Q,null,{default:p(()=>[l(me,{scope:"global",tag:"span",class:"inline-flex items-center",keypath:"documents::document.products_snippet_missing"},{icon:p(()=>[l(ue,{icon:"PlusSolid",class:"size-5"})]),_:1},8,["keypath"])]),_:1})]),_:1})):K("",!0),C.value?(g(),A(se,{key:2,class:"mb-4"},{default:p(()=>[l(Q,null,{default:p(()=>[l(me,{scope:"global",tag:"span",class:"inline-flex items-center",keypath:"documents::document.signatures_snippet_missing"},{icon:p(()=>[l(ue,{icon:"PlusSolid",class:"size-5"})]),_:1},8,["keypath"])]),_:1})]),_:1})):K("",!0),_("div",G8e,[s.value?(g(),A(Kv,{key:0,ref_key:"builderRef",ref:i,modelValue:P.form.content,"onUpdate:modelValue":z[8]||(z[8]=he=>P.form.content=he),disabled:P.document.status==="accepted",placeholders:h(y)},null,8,["modelValue","disabled","placeholders"])):K("",!0)])])],512)),[[pe,P.visible]])}}},il=M([]),Yi=()=>{const{setLoading:e,isLoading:t}=An(),{scriptConfig:n}=Ne();il.value=[...n("documents.types")||[]],on(()=>{n("documents.types",[...il.value])});const o=O(()=>Vt(il.value,"name"));function a(i){return o.value.find(u=>u.id==i)}function r(i){il.value=i}function s(i={}){e(!0),Innoclapps.request("/document-types",Object.assign({},{params:{per_page:100}},i)).then(({data:u})=>il.value=u.data).finally(()=>e(!1))}return{documentTypes:il,typesByName:o,typesAreBeingFetched:t,findTypeById:a,setDocumentTypes:r,fetchDocumentTypes:s}},K8e={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},Z8e={class:"flex flex-1"},Y8e={class:"flex flex-col"},X8e={class:"mt-2 h-[104px] w-full overflow-hidden rounded border border-neutral-200 bg-white dark:border-neutral-500/30 dark:bg-neutral-400"},Q8e={key:0,class:"flex flex-col"},J8e=_("div",{class:"h-5 w-full bg-neutral-100 dark:bg-neutral-300"},null,-1),eSe=_("div",{class:"mt-1 space-y-1 px-5 py-2"},[_("div",{class:"h-3 w-1/3 rounded bg-neutral-200 dark:bg-neutral-300"}),_("div",{class:"h-3 w-full rounded bg-neutral-100 dark:bg-neutral-200"}),_("div",{class:"mt h-3 w-1/2 rounded bg-neutral-100 dark:bg-neutral-200"}),_("div",{class:"mt h-3 w-full rounded bg-neutral-100 dark:bg-neutral-200"})],-1),tSe=[J8e,eSe],nSe={key:1,class:"flex"},oSe=_("div",{class:"h-[102px] w-6 bg-neutral-200"},null,-1),aSe=_("div",{class:"mt-1 flex-1 space-y-1 p-2"},[_("div",{class:"h-3 w-1/3 rounded bg-neutral-200"}),_("div",{class:"h-3 w-full rounded bg-neutral-100"}),_("div",{class:"mt h-3 w-1/2 rounded bg-neutral-100"}),_("div",{class:"mt h-3 w-full rounded bg-neutral-100"}),_("div",{class:"h-3 w-1/3 rounded bg-neutral-100"})],-1),rSe=[oSe,aSe],lSe={key:2,class:"flex"},sSe=_("div",{class:"h-[102px] w-6 bg-neutral-200 dark:bg-neutral-200"},null,-1),iSe=_("div",{class:"flex-1"},[_("div",{class:"flex flex-col"},[_("div",{class:"flex"},[_("div",{class:"flex h-8 w-full flex-col items-center justify-center space-y-1 bg-neutral-100 p-2.5 dark:bg-neutral-300"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200"})]),_("div",{class:"flex h-8 w-full flex-col items-center justify-center space-y-1 bg-neutral-100 p-2.5 dark:bg-neutral-300"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200"})])]),_("div",{class:"flex h-12 w-full flex-col items-center justify-center space-y-1 bg-neutral-300 p-2.5 dark:bg-neutral-400"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200 dark:bg-neutral-300"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200 dark:bg-neutral-300"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200 dark:bg-neutral-300"})]),_("div",{class:"flex h-[22px] w-full flex-col justify-center space-y-1 bg-neutral-200/70 p-2"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200"})])])],-1),uSe=[sSe,iSe],Zv={__name:"DocumentFormViewTypes",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue"),{scriptConfig:n}=Ne(),{t:o}=Ee(),a=[{id:"nav-top",title:o("documents::document.view_type.nav_top.name"),description:o("documents::document.view_type.nav_top.description")},{id:"nav-left",title:o("documents::document.view_type.nav_left.name"),description:o("documents::document.view_type.nav_left.description",{headingTagName:n("documents.navigation_heading_tag_name")})},{id:"nav-left-full-width",title:o("documents::document.view_type.nav_left_full_width.name"),description:o("documents::document.view_type.nav_left_full_width.description",{headingTagName:n("documents.navigation_heading_tag_name")})}];return(r,s)=>{const i=d("Icon");return g(),A(h(ds),{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value=u)},{default:p(()=>[l(h(cr),{class:"sr-only"},{default:p(()=>[le("Select HTML view type")]),_:1}),_("div",K8e,[(g(),D(fe,null,Ie(a,u=>l(h(od),{key:u.id,as:"template",value:u.id},{default:p(({checked:c,active:m})=>[_("div",{class:be([c?"border-transparent":"border-neutral-300 dark:border-neutral-500/30",m?"border-primary-600 ring-2 ring-primary-600":"","relative flex cursor-pointer rounded-lg border bg-white p-4 shadow-sm focus:outline-none dark:bg-neutral-500/10"])},[_("span",Z8e,[_("span",Y8e,[l(h(cr),{as:"span",class:"block text-base font-medium text-neutral-900 dark:text-white sm:text-sm"},{default:p(()=>[le(Z(u.title),1)]),_:2},1024),l(h(Xs),{as:"span",class:"mt-1 flex items-center text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6"},{default:p(()=>[le(Z(u.description),1)]),_:2},1024),l(h(Xs),{class:"mt-auto"},{default:p(()=>[_("div",X8e,[u.id==="nav-top"?(g(),D("div",Q8e,tSe)):u.id==="nav-left"?(g(),D("div",nSe,rSe)):u.id==="nav-left-full-width"?(g(),D("div",lSe,uSe)):K("",!0)])]),_:2},1024)])]),l(i,{icon:"CheckCircle",class:be([c?"":"invisible","size-5 shrink-0 text-primary-600"])},null,8,["class"]),_("span",{"aria-hidden":"true",class:be([m?"border":"border-2",c?"border-primary-600":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"])},null,2)],2)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])}}},cSe={class:"mx-auto max-w-3xl"},dSe={class:"relative"},mSe={class:"mb-4 mt-3 flex items-center md:absolute md:right-1 md:top-3.5 md:my-0 md:space-x-2.5"},fSe={class:"order-last ml-auto mr-0 place-self-end md:-order-none md:mr-2.5"},pSe=["textContent"],vSe={class:"sm:grid sm:grid-cols-12 sm:gap-x-4"},hSe={role:"list",class:"space-y-6"},gSe=_("div",{class:"w-px bg-neutral-200 dark:bg-neutral-500"},null,-1),bSe=[gSe],ySe={class:"relative flex size-6 flex-none items-center justify-center bg-white dark:bg-neutral-900"},_Se={key:0,class:"flex-auto rounded-md p-3 ring-1 ring-inset ring-neutral-200 dark:ring-neutral-700"},ISe={class:"flex justify-between gap-x-4"},wSe={class:"mt-1.5 py-0.5"},xSe={class:"flex-none"},a5={__name:"DocumentFormDetails",props:Zi,setup(e){const t=e,{localizedDateTime:n}=rt(),{scriptConfig:o,users:a,currentUser:r,locales:s}=Ne(),{typesByName:i}=Yi(),u=o("documents.statuses"),c=M(null),m=M(null),f=M(null),v=Pe("brands"),y=O(()=>t.document.changelog?t.document.changelog.slice().reverse():[]);function b(){Object.keys(t.document).length===0?(f.value=ut(v.value,w=>w.is_default),f.value&&t.form.set("brand_id",f.value.id),m.value=ut(i.value,["id",parseInt(o("documents.default_document_type"))]),m.value&&t.form.set("document_type_id",m.value.id),c.value=r.value,t.form.set("user_id",c.value.id)):(f.value=t.document.brand,m.value=t.document.type,c.value=t.document.user)}return b(),(w,k)=>{const x=d("Icon"),I=d("ITab"),C=d("IBadge"),S=d("ITabList"),T=d("IAlertBody"),E=d("IAlert"),$=d("ICustomSelect"),F=d("IFormError"),R=d("IFormGroup"),B=d("IFormInput"),V=d("IFormLabel"),P=d("ITabPanel"),z=d("IText"),H=d("ITextSmall"),j=d("ITextDark"),N=d("ITabPanels"),L=d("ITabGroup");return ne((g(),D("div",cSe,[_("div",dSe,[l(L,null,{default:p(()=>[l(S,null,{default:p(()=>[l(I,{class:"sm:-ml-3.5"},{default:p(()=>[l(x,{icon:"AdjustmentsVertical"}),le(" "+Z(w.$t("documents::document.document_details")),1)]),_:1}),l(I,{disabled:Object.keys(w.document).length===0},{default:p(()=>[l(x,{icon:"DocumentText"}),le(" "+Z(w.$t("documents::document.document_activity"))+" ",1),ne(l(C,{variant:"neutral",text:y.value.length,pill:""},null,8,["text"]),[[pe,y.value.length]])]),_:1},8,["disabled"])]),_:1}),l(N,null,{default:p(()=>[l(P,null,{default:p(()=>[w.document.status==="accepted"?(g(),A(E,{key:0,class:"mb-6"},{default:p(()=>[l(T,null,{default:p(()=>[le(Z(w.$t("documents::document.limited_editing")),1)]),_:1})]),_:1})):K("",!0),_("div",mSe,[_("div",fSe,[Se(w.$slots,"actions")]),m.value?(g(),A(C,{key:0,class:"mr-2.5 md:mr-0",color:m.value.swatch_color,icon:m.value.icon},{default:p(()=>[_("span",{class:"max-w-[90px] truncate",textContent:Z(m.value.name)},null,8,pSe)]),_:1},8,["color","icon"])):K("",!0),l(C,{class:"mr-2.5 md:mr-0",color:w.document.status?h(u)[w.document.status].color:h(u).draft.color,text:w.document.status?h(u)[w.document.status].display_name:h(u).draft.display_name},null,8,["color","text"])]),Se(w.$slots,"top"),_("div",vSe,[l(R,{class:"sm:col-span-6","label-for":"brand_id",label:w.$t("brands::brand.brand"),required:""},{default:p(()=>[l($,{modelValue:f.value,"onUpdate:modelValue":[k[0]||(k[0]=U=>f.value=U),k[1]||(k[1]=U=>w.form.brand_id=U.id)],"input-id":"brand_id",label:"name",options:h(v),clearable:!1,disabled:w.document.status==="accepted"},null,8,["modelValue","options","disabled"]),l(F,{error:w.form.getError("brand_id")},null,8,["error"])]),_:1},8,["label"]),l(R,{class:"sm:col-span-6","label-for":"document_type_id",label:w.$t("documents::document.type.type"),required:""},{default:p(()=>[l($,{modelValue:m.value,"onUpdate:modelValue":[k[2]||(k[2]=U=>m.value=U),k[3]||(k[3]=U=>w.form.document_type_id=U.id)],"input-id":"document_type_id",label:"name",options:h(i),clearable:!1},null,8,["modelValue","options"]),l(F,{error:w.form.getError("document_type_id")},null,8,["error"])]),_:1},8,["label"])]),l(R,{"label-for":"user_id",label:w.$t("documents::fields.documents.user.name"),required:""},{default:p(()=>[l($,{modelValue:c.value,"onUpdate:modelValue":[k[4]||(k[4]=U=>c.value=U),k[5]||(k[5]=U=>w.form.user_id=U?U.id:null)],label:"name","input-id":"user_id",clearable:!1,options:h(a),disabled:w.document.status==="accepted"},null,8,["modelValue","options","disabled"]),l(F,{error:w.form.getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(R,{"label-for":"title",label:w.$t("documents::document.title"),required:""},{default:p(()=>[l(B,{id:"title",modelValue:w.form.title,"onUpdate:modelValue":k[6]||(k[6]=U=>w.form.title=U),disabled:w.document.status==="accepted"},null,8,["modelValue","disabled"]),l(F,{error:w.form.getError("title")},null,8,["error"])]),_:1},8,["label"]),l(R,{"label-for":"locale",label:w.$t("core::app.locale"),required:""},{default:p(()=>[l($,{modelValue:w.form.locale,"onUpdate:modelValue":k[7]||(k[7]=U=>w.form.locale=U),"input-id":"locale",clearable:!1,options:h(s)},null,8,["modelValue","options"]),l(F,{error:w.form.getError("locale")},null,8,["error"])]),_:1},8,["label"]),l(V,{as:"p",class:"my-2",label:w.$t("documents::document.view_type.html_view_type")},null,8,["label"]),l(Zv,{modelValue:w.form.view_type,"onUpdate:modelValue":k[8]||(k[8]=U=>w.form.view_type=U)},null,8,["modelValue"]),l(F,{error:w.form.getError("view_type")},null,8,["error"])]),_:3}),l(P,null,{default:p(()=>[_("ul",hSe,[(g(!0),D(fe,null,Ie(y.value,(U,ee)=>(g(),D("li",{key:U.id,class:"relative flex gap-x-4"},[_("div",{class:be([ee===y.value.length-1?"h-6":"-bottom-6","absolute left-0 top-0 flex w-6 justify-center"])},bSe,2),_("div",ySe,[_("div",{class:be(["h-1.5 w-1.5 rounded-full ring-1",U.properties.type==="success"?"bg-success-200 ring-success-500 dark:bg-success-400":"bg-neutral-100 ring-neutral-300 dark:bg-neutral-300"])},null,2)]),U.properties.section?(g(),D("div",_Se,[_("div",ISe,[l(z,{class:"py-0.5",text:w.$t(U.properties.lang.key,U.properties.lang.attrs)},null,8,["text"]),l(H,{as:"time",class:"flex-none py-0.5",datetime:U.dateTime,text:h(n)(U.created_at)},null,8,["datetime","text"])]),_("div",wSe,[l(j,{class:"font-medium"},{default:p(()=>[le(Z(w.$t(U.properties.section.lang.key,U.properties.section.lang.attrs||{})),1)]),_:2},1024),_("ul",xSe,[(g(!0),D(fe,null,Ie(U.properties.section.list,(G,W)=>(g(),D("li",{key:W},[l(z,null,{default:p(()=>[le(Z(w.$t(G.lang.key,G.lang.attrs||{})),1)]),_:2},1024)]))),128))])])])):(g(),D(fe,{key:1},[l(z,{class:"flex-auto py-0.5",text:w.$t(U.properties.lang.key,U.properties.lang.attrs)},null,8,["text"]),l(H,{class:"flex-none py-0.5",as:"time",datetime:U.dateTime,text:h(n)(U.created_at)},null,8,["datetime","text"])],64))]))),128))])]),_:1})]),_:3})]),_:3})])],512)),[[pe,w.visible]])}}},kSe={class:"absolute inset-0 z-40 h-full max-h-full min-h-screen w-full bg-white dark:bg-neutral-900"},$Se={class:"sticky top-0 z-50 border-b border-neutral-200 bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-800"},CSe={class:"container mx-auto"},SSe={class:"mx-auto max-w-6xl"},TSe={class:"px-3 py-4 sm:px-0"},ESe={class:"flex items-center justify-between space-x-4 sm:space-x-0"},FSe=["value"],ASe={class:"hidden justify-center sm:flex"},RSe={class:"inline-flex"},DSe=["textContent"],OSe={class:"h-full min-h-full overflow-y-auto"},BSe={class:"px-4 py-6 sm:px-0"},NSe={style:{"padding-bottom":"200px"}},r5={__name:"DocumentFormLayout",props:{activeSection:{required:!0,type:String},totalProducts:Number,totalSigners:Number,remainingSigners:Number},emits:["exitRequested","update:active-section"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),r=O(()=>[{name:a("documents::document.sections.details"),id:"details"},{name:a("documents::document.sections.products"),id:"products",badge:n.totalProducts},{name:a("documents::document.sections.signature"),id:"signature",badge:n.totalSigners>0&&n.remainingSigners>0?n.remainingSigners:n.totalSigners,badgeVariant:n.remainingSigners>0?"warning":n.remainingSigners===0&&n.totalSigners>0?"success":"primary"},{name:a("documents::document.sections.content"),id:"content"},{name:a("documents::document.sections.send"),id:"send"}]);function s(i){o("update:active-section",i)}return Pa(()=>{document.body.classList.add("overflow-y-hidden")}),En(()=>{document.body.classList.remove("overflow-y-hidden"),document.body.classList.remove("document-section-"+n.activeSection)}),$e(()=>n.activeSection,(i,u)=>{document.body.classList.remove("document-section-"+u),document.body.classList.add("document-section-"+i)},{immediate:!0}),(i,u)=>{const c=d("ILink"),m=d("IFormSelect"),f=d("IBadge"),v=d("Icon");return g(),D("div",kSe,[_("div",$Se,[_("div",CSe,[_("div",SSe,[_("div",TSe,[_("div",ESe,[l(c,{class:"sm:!text-base/6",text:i.$t("core::app.exit"),onClick:u[0]||(u[0]=y=>i.$emit("exitRequested"))},null,8,["text"]),l(m,{class:"block sm:hidden","model-value":e.activeSection,"onUpdate:modelValue":u[1]||(u[1]=y=>s(y))},{default:p(()=>[(g(!0),D(fe,null,Ie(r.value,y=>(g(),D("option",{key:y.id,value:y.id},Z(y.name),9,FSe))),128))]),_:1},8,["model-value"]),_("div",ASe,[(g(!0),D(fe,null,Ie(r.value,(y,b)=>(g(),A(c,{key:y.id,variant:"primary",basic:y.id!==e.activeSection,class:be(["flex items-center font-medium sm:!text-base/6",b!==r.value.length-1?"mr-6 space-x-4":""]),onClick:w=>s(y.id)},{default:p(()=>[_("div",RSe,[_("span",{textContent:Z(y.name)},null,8,DSe),ne(l(f,{class:"-mt-px ml-1.5",variant:y.badgeVariant||"primary",text:y.badge,pill:""},null,8,["variant","text"]),[[pe,y.badge]])]),b!==r.value.length-1?(g(),A(v,{key:0,icon:"ChevronRight",class:"mt-0.5 size-4 shrink-0 text-neutral-400 dark:text-neutral-500"})):K("",!0)]),_:2},1032,["basic","class","onClick"]))),128))]),Se(i.$slots,"actions")])])])])]),_("div",OSe,[_("div",BSe,[_("div",NSe,[Se(i.$slots,"default")])])])])}}},PSe={class:"mx-auto max-w-5xl"},l5={__name:"DocumentFormProducts",props:Zi,setup(e){return(t,n)=>{const o=d("ITextDisplay"),a=d("IFormError");return ne((g(),D("div",PSe,[l(o,{class:"mb-6",text:t.$t("documents::document.document_products")},null,8,["text"]),_("div",{class:be({"pointer-events-none opacity-70":t.document.status==="accepted"})},[l(qv,{modelValue:t.form.billable.tax_type,"onUpdate:modelValue":n[0]||(n[0]=r=>t.form.billable.tax_type=r),class:"mb-4"},null,8,["modelValue"]),l(Lv,{products:t.form.billable.products,"onUpdate:products":n[1]||(n[1]=r=>t.form.billable.products=r),"removed-products":t.form.billable.removed_products,"onUpdate:removedProducts":n[2]||(n[2]=r=>t.form.billable.removed_products=r),"tax-type":t.form.billable.tax_type},{"after-product-select":p(({index:r})=>[l(a,{error:t.form.getError("billable.products."+r+".name")},null,8,["error"])]),_:1},8,["products","removed-products","tax-type"])],2)],512)),[[pe,t.visible]])}}},MSe={class:"mx-auto max-w-3xl"},VSe={key:1,class:"mb-6"},LSe={class:"mb-3 inline-flex items-center"},qSe={class:"ml-1 inline-flex min-w-full items-center justify-center"},USe={class:"mt-1.5 inline-flex min-w-full justify-center"},jSe={key:2},zSe={class:"mb-4"},HSe={class:"inline-block"},WSe={class:"inline-block"},s5={__name:"DocumentFormSend",props:{...Zi,sending:Boolean},emits:["sendRequested","saveRequested"],setup(e){const t=e,{localizedDateTime:n}=rt(),{emailAccounts:o,fetchEmailAccounts:a}=ya(),r=Pe("brands"),s=M(null),i=M(null),u=M(!!t.form.send_at),c=O(()=>t.form.brand_id?ut(r.value,["id",parseInt(t.form.brand_id)]):null),m=O(()=>t.form.signers.filter(I=>!Gt(I.name)&&!Gt(I.email))),f=O(()=>t.form.recipients.filter(I=>I.send_email&&!Gt(I.name)&&!Gt(I.email))),v=O(()=>t.form.signers.filter(I=>I.send_email&&!Gt(I.name)&&!Gt(I.email))),y=O(()=>t.form.recipients.filter(I=>Gt(I.name)||Gt(I.email)).length>0),b=O(()=>!(!t.form.send_mail_body||!t.form.send_mail_subject||!t.form.send_mail_account_id||f.value.length===0&&v.value.length===0));function w(I){t.form.recipients.splice(I,1)}function k(){t.form.recipients.push({name:"",email:"",send_email:!0}),ze(()=>{s.value[t.form.recipients.length-1].focus()})}function x(I){t.form.send_mail_account_id?i.value=ut(I,["id",parseInt(t.form.send_mail_account_id)]):(i.value=I.length?I[0]:null,i.value&&(t.form.send_mail_account_id=i.value.id))}return $e(c,(I,C)=>{(I&&Gt(t.form.send_mail_body)||C&&t.form.send_mail_body===C.config.document.mail_message[t.form.locale])&&(t.form.send_mail_body=I.config.document.mail_message[t.form.locale]),(I&&Gt(t.form.send_mail_subject)||C&&C.config.document.mail_subject[t.form.locale]===t.form.send_mail_subject)&&(t.form.send_mail_subject=I.config.document.mail_subject[t.form.locale])},{immediate:!0}),a().then(x),(I,C)=>{const S=d("IAlertBody"),T=d("IAlert"),E=d("ITextDisplay"),$=d("IText"),F=d("IFormCheckbox"),R=d("IFormCheckboxLabel"),B=d("IFormCheckboxDescription"),V=d("IFormCheckboxField"),P=d("ITableHeader"),z=d("ITableRow"),H=d("ITableHead"),j=d("ITableCell"),N=d("IFormInput"),L=d("IFormError"),U=d("IButton"),ee=d("ITableBody"),G=d("ITable"),W=d("ITableOuter"),ae=d("ILink"),ue=d("IFormLabel"),ce=d("ICustomSelect"),oe=d("Icon"),ie=d("IFormGroup"),Q=d("Editor"),se=d("DatePicker"),me=Ve("t"),xe=Ve("i-tooltip");return ne((g(),D("div",MSe,[I.form.originalData.send_at?(g(),A(T,{key:0,class:"mb-5"},{default:p(()=>[l(S,null,{default:p(()=>[le(Z(I.$t("documents::document.send.is_scheduled",{date:h(n)(I.form.originalData.send_at)})),1)]),_:1})]),_:1})):K("",!0),I.form.requires_signature?(g(),D("div",VSe,[l(E,{text:I.$t("documents::document.send.send_to_signers"),class:be(["mb-3",{hidden:m.value.length===0&&I.document.status==="accepted"}])},null,8,["text","class"]),ne(l($,{class:"-mt-3",text:I.$t("documents::document.send.send_to_signers_empty")},null,8,["text"]),[[pe,m.value.length===0&&I.document.status!=="accepted"]]),(g(!0),D(fe,null,Ie(m.value,de=>(g(),A(V,{key:de.email,class:"gap-y-0"},{default:p(()=>[l(F,{checked:de.send_email,"onUpdate:checked":he=>de.send_email=he},null,8,["checked","onUpdate:checked"]),l(R,null,{default:p(()=>[le(Z(de.name+" ("+de.email+")"),1)]),_:2},1024),de.sent_at?(g(),A(B,{key:0,class:"-mt-1"},{default:p(()=>[le(Z(I.$t("documents::document.sent_at",{date:h(n)(de.sent_at)})),1)]),_:2},1024)):K("",!0)]),_:2},1024))),128))])):K("",!0),_("div",LSe,[l(E,{text:I.$t("documents::document.recipients.recipients")},null,8,["text"]),l($,{class:"ml-1 mt-1"},{default:p(()=>[le(" ("+Z(I.$t("documents::document.recipients.additional_recipients"))+") ",1)]),_:1})]),l(W,null,{default:p(()=>[l(G,null,{default:p(()=>[l(H,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(z,null,{default:p(()=>[l(P,{class:"w-0 !p-0"}),ne(l(P,null,null,512),[[me,"documents::document.recipients.recipient_name"]]),ne(l(P,null,null,512),[[me,"documents::document.recipients.recipient_email"]]),ne(l(P,{class:"text-center"},null,512),[[me,"documents::document.recipients.is_sent"]]),l(P,{class:"w-0 !p-0"})]),_:1})]),_:1}),l(ee,null,{default:p(()=>[I.form.recipients.length===0?(g(),A(z,{key:0},{default:p(()=>[l(j,{colspan:"5",class:"align-middle"},{default:p(()=>[l($,{class:"ml-2"},{default:p(()=>[le(Z(I.$t("documents::document.recipients.no_recipients")),1)]),_:1})]),_:1})]),_:1})):K("",!0),(g(!0),D(fe,null,Ie(I.form.recipients,(de,he)=>(g(),A(z,{key:he},{default:p(()=>[l(j,{class:"border-r border-neutral-900/5 dark:border-white/5"},{default:p(()=>[_("span",qSe,[l(F,{checked:de.send_email,"onUpdate:checked":Y=>de.send_email=Y},null,8,["checked","onUpdate:checked"])])]),_:2},1024),l(j,{class:"align-top"},{default:p(()=>[l(N,{ref_for:!0,ref_key:"recipientNameInputRef",ref:s,modelValue:de.name,"onUpdate:modelValue":Y=>de.name=Y,placeholder:I.$t("documents::document.recipients.enter_full_name")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(L,{error:I.form.getError("recipients."+he+".name")},null,8,["error"])]),_:2},1024),l(j,{class:"align-top"},{default:p(()=>[l(N,{modelValue:de.email,"onUpdate:modelValue":Y=>de.email=Y,type:"email",placeholder:I.$t("documents::document.recipients.enter_email"),onKeyup:fo(k,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(L,{error:I.form.getError("recipients."+he+".email")},null,8,["error"])]),_:2},1024),l(j,{class:"align-middle"},{default:p(()=>[_("span",USe,[ne(_("span",{class:be(["inline-block size-4 rounded-full",de.sent_at?"bg-success-400":"bg-danger-400"])},null,2),[[xe,de.sent_at?h(n)(de.sent_at):null]])])]),_:2},1024),l(j,{class:"align-middle"},{default:p(()=>[l(U,{class:"mt-0.5",icon:"XSolid",basic:"",onClick:Y=>w(he)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),ne(l(ae,{class:"mt-3 inline-block font-medium",onClick:k},{default:p(()=>[le(" + "+Z(I.$t("documents::document.recipients.add")),1)]),_:1},512),[[pe,!y.value]]),l(E,{class:"mb-3 mt-6",text:I.$t("documents::document.send.send")},null,8,["text"]),ne(l(ue,{as:"p",class:"mt-3",text:I.$t("documents::document.send.select_brand")},null,8,["text"]),[[pe,!c.value]]),c.value?(g(),D("div",jSe,[l(ie,{"label-for":"send_mail_account_id",label:I.$t("documents::document.send.send_from_account")},{default:p(()=>[h(o).length?(g(),A(ce,{key:0,"input-id":"send_mail_account_id",label:"email","model-value":i.value,clearable:!1,options:h(o),"onUpdate:modelValue":C[0]||(C[0]=de=>I.form.send_mail_account_id=de.id),onOptionSelected:C[1]||(C[1]=de=>x(h(o)))},null,8,["model-value","options"])):(g(),A($,{key:1,class:"mt-2 inline-flex items-center"},{default:p(()=>[l(oe,{icon:"ExclamationTriangle",class:"mr-1 size-5 text-warning-500"}),le(" "+Z(I.$t("documents::document.send.connect_an_email_account")),1)]),_:1}))]),_:1},8,["label"]),l(ie,{"label-for":"send_mail_subject",class:"mt-4",label:I.$t("documents::document.send.send_subject")},{default:p(()=>[l(N,{id:"send_mail_subject",modelValue:I.form.send_mail_subject,"onUpdate:modelValue":C[2]||(C[2]=de=>I.form.send_mail_subject=de)},null,8,["modelValue"])]),_:1},8,["label"]),l(ie,{"label-for":"send_mail_body",label:I.$t("documents::document.send.send_body")},{default:p(()=>[l(Q,{id:"send_mail_body",modelValue:I.form.send_mail_body,"onUpdate:modelValue":C[3]||(C[3]=de=>I.form.send_mail_body=de),"with-image":!1,"absolute-urls":""},null,8,["modelValue"])]),_:1},8,["label"]),_("div",zSe,[_("div",HSe,[l(V,null,{default:p(()=>[l(F,{checked:u.value,"onUpdate:checked":[C[4]||(C[4]=de=>u.value=de),C[5]||(C[5]=de=>de?"":I.form.send_at=null)],disabled:!I.document.id},null,8,["checked","disabled"]),l(R,{text:I.$t("documents::document.send.send_later")},null,8,["text"]),I.document.id?K("",!0):(g(),A(B,{key:0},{default:p(()=>[le(Z(I.$t("documents::document.send.save_to_schedule")),1)]),_:1}))]),_:1})]),u.value&&I.document.id?(g(),A(se,{key:0,modelValue:I.form.send_at,"onUpdate:modelValue":C[6]||(C[6]=de=>I.form.send_at=de),class:"mt-3","min-date":"now",mode:"dateTime",placeholder:I.$t("documents::document.send.select_schedule_date"),required:!0},null,8,["modelValue","placeholder"])):K("",!0)]),ne((g(),D("span",WSe,[ne(l(U,{variant:"primary",icon:"Mail",loading:e.sending,text:I.$t("core::app.send"),disabled:e.sending||!b.value||I.document.authorizations&&!I.document.authorizations.update,onClick:C[7]||(C[7]=de=>I.$emit("sendRequested"))},null,8,["loading","text","disabled"]),[[pe,!u.value]]),ne(l(U,{variant:"primary",icon:"Clock",text:I.$t("documents::document.send.schedule"),disabled:I.form.busy||!b.value||!I.form.send_at||I.document.authorizations&&!I.document.authorizations.update,onClick:C[8]||(C[8]=de=>I.$emit("saveRequested"))},null,8,["text","disabled"]),[[pe,u.value]])])),[[xe,I.document.authorizations&&!I.document.authorizations.update?I.$t("core::app.action_not_authorized"):""]])])):K("",!0)],512)),[[pe,I.visible]])}}},GSe={class:"mx-auto max-w-3xl"},KSe={class:"-space-y-px rounded-md bg-white dark:bg-neutral-900"},ZSe=_("span",{class:"h-1.5 w-1.5 rounded-full bg-white"},null,-1),YSe=[ZSe],XSe={class:"ml-3 flex flex-col"},QSe={class:"hidden sm:block"},JSe={class:"bg-success-50 px-5 py-2 text-success-500 dark:bg-success-600/20"},e3e={class:"font-medium"},t3e=["textContent"],n3e={class:"mt-1 inline-flex flex-row space-x-2"},o3e={class:"font-medium"},a3e=["textContent"],r3e={class:"font-medium"},l3e=["textContent"],s3e={class:"mt-1.5 inline-flex min-w-full justify-center"},i5={__name:"DocumentFormSignature",props:Zi,setup(e){const t=e,{t:n}=Ee(),{localizedDateTime:o}=rt(),a=M(null),r=[{name:n("documents::document.signature.no_signature"),description:n("documents::document.signature.no_signature_description"),value:!1},{name:n("documents::document.signature.e_signature"),description:n("documents::document.signature.e_signature_description"),value:!0}],s=O(()=>t.form.signers.filter(c=>Gt(c.name)||Gt(c.email)).length>0);function i(){t.form.signers.push({name:"",email:"",send_email:!0}),ze(()=>{a.value[t.form.signers.length-1].focus()})}function u(c){t.form.signers.splice(c,1)}return(c,m)=>{const f=d("ITextDisplay"),v=d("ITableHeader"),y=d("ITableRow"),b=d("ITableHead"),w=d("IText"),k=d("ITableCell"),x=d("IFormInput"),I=d("IFormError"),C=d("IButton"),S=d("ITableBody"),T=d("ITable"),E=d("ITableOuter"),$=d("ILink"),F=Ve("t"),R=Ve("i-tooltip");return ne((g(),D("div",GSe,[l(f,{class:"mb-3",text:c.$t("documents::document.sections.signature")},null,8,["text"]),l(h(ds),{modelValue:c.form.requires_signature,"onUpdate:modelValue":m[0]||(m[0]=B=>c.form.requires_signature=B)},{default:p(()=>[l(h(cr),{class:"sr-only"},{default:p(()=>[le(Z(c.$t("documents::document.sections.signature")),1)]),_:1}),_("div",KSe,[(g(),D(fe,null,Ie(r,(B,V)=>l(h(od),{key:B.name,as:"template",value:B.value},{default:p(({checked:P,active:z})=>[_("div",{class:be(["relative flex cursor-pointer border p-4 focus:outline-none",c.document.status==="accepted"?"pointer-events-none opacity-70":"",V===0?"rounded-tl-md rounded-tr-md":"",V===r.length-1?"rounded-bl-md rounded-br-md":"",P?"z-10 border-primary-700/10 bg-primary-50 text-primary-700 dark:border-primary-400/20 dark:bg-primary-400/10":"border-neutral-200 bg-white dark:border-neutral-500/30 dark:bg-neutral-800"])},[_("span",{"aria-hidden":"true",class:be([P?"border-transparent bg-primary-600":"border-neutral-300 bg-white",z?"ring-2 ring-primary-500 ring-offset-2":"","mt-0.5 flex size-4 shrink-0 cursor-pointer items-center justify-center rounded-full border"])},YSe,2),_("span",XSe,[l(h(cr),{as:"span",class:be([P?"text-primary-800 dark:text-primary-400":"text-neutral-900 dark:text-neutral-200","block text-base font-medium sm:text-sm"])},{default:p(()=>[le(Z(B.name),1)]),_:2},1032,["class"]),l(h(Xs),{as:"span",class:be([P?"text-primary-700 dark:text-primary-300":"text-neutral-500 dark:text-neutral-400","block text-base/6 sm:text-sm/6"])},{default:p(()=>[le(Z(B.description),1)]),_:2},1032,["class"])])],2)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"]),ne(_("div",null,[l(f,{class:"mb-3 mt-6",text:c.$t("documents::document.signers.document_signers")},null,8,["text"]),l(E,null,{default:p(()=>[l(T,null,{default:p(()=>[l(b,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(y,null,{default:p(()=>[l(v,null,{default:p(()=>[le(Z(c.$t("documents::document.signers.signer_name")),1)]),_:1}),l(v,null,{default:p(()=>[le(Z(c.$t("documents::document.signers.signer_email")),1)]),_:1}),l(v,{class:"text-center"},{default:p(()=>[ne(_("span",QSe,null,512),[[F,"documents::document.signers.is_signed"]])]),_:1}),l(v)]),_:1})]),_:1}),l(S,null,{default:p(()=>[c.form.signers.length===0?(g(),A(y,{key:0},{default:p(()=>[l(k,{colspan:"4",class:"align-middle"},{default:p(()=>[l(w,{class:"ml-2"},{default:p(()=>[le(Z(c.$t("documents::document.signers.no_signers")),1)]),_:1})]),_:1})]),_:1})):K("",!0),(g(!0),D(fe,null,Ie(c.form.signers,(B,V)=>(g(),D(fe,{key:"signer-"+V},[B.signed_at?(g(),A(y,{key:0},{default:p(()=>[l(k,{colspan:"4",class:"!p-0"},{default:p(()=>[_("div",JSe,[_("p",null,[_("span",e3e,Z(c.$t("documents::document.signature.signature"))+": ",1),_("span",{class:"font-signature text-[1.4rem] text-success-700",textContent:Z(B.signature)},null,8,t3e)]),_("div",n3e,[_("p",null,[_("span",o3e,Z(c.$t("documents::document.signature.signed_on"))+": ",1),_("span",{textContent:Z(h(o)(B.signed_at))},null,8,a3e)]),_("p",null,[_("span",r3e,Z(c.$t("documents::document.signature.sign_ip"))+": ",1),_("span",{textContent:Z(B.sign_ip)},null,8,l3e)])])])]),_:2},1024)]),_:2},1024)):K("",!0),l(y,null,{default:p(()=>[l(k,{class:"align-top"},{default:p(()=>[l(x,{ref_for:!0,ref_key:"signerNameInputRef",ref:a,modelValue:B.name,"onUpdate:modelValue":P=>B.name=P,placeholder:c.$t("documents::document.signers.enter_full_name"),disabled:c.document.status==="accepted"},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),l(I,{error:c.form.getError("signers."+V+".name")},null,8,["error"])]),_:2},1024),l(k,{class:"align-top"},{default:p(()=>[l(x,{modelValue:B.email,"onUpdate:modelValue":P=>B.email=P,type:"email",disabled:c.document.status==="accepted",placeholder:c.$t("documents::document.signers.enter_email"),onKeyup:fo(i,["enter"])},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"]),l(I,{error:c.form.getError("signers."+V+".email")},null,8,["error"])]),_:2},1024),l(k,{class:"align-middle"},{default:p(()=>[_("span",s3e,[ne(_("span",{class:be(["inline-block size-4 rounded-full",B.signed_at?"bg-success-400":"bg-danger-400"])},null,2),[[R,B.signed_at?h(o)(B.signed_at):null]])])]),_:2},1024),l(k,{class:"align-middle"},{default:p(()=>[l(C,{class:"mt-0.5",icon:"XSolid",basic:"",onClick:P=>u(V)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1}),ne(l($,{class:"mt-3 inline-block font-medium",onClick:i},{default:p(()=>[le(" + "+Z(c.$t("documents::document.signers.add")),1)]),_:1},512),[[pe,!s.value&&c.document.status!=="accepted"]])],512),[[pe,c.form.requires_signature]])],512)),[[pe,c.visible]])}}},i3e={key:0},u3e={class:"inline-block"},c3e={key:0,class:"ml-1.5 self-start"},d3e=["textContent"],u5={__name:"DocumentsCreate",props:{viaResource:String,viaResourceId:[String,Number],relatedResource:Object,editRedirectHandler:Function,exitUsing:Function},emits:["created","sent"],setup(e,{emit:t}){const n=e,o=t,a=Pe("synchronizeResource",null),r=Pe("incrementResourceCount",null),{t:s}=Ee(),i=_t(),u=It(),{setting:c,currentUser:m}=Ne(),{createResource:f,updateResource:v}=Dt(Innoclapps.resourceName("documents")),y=M(null),b=M(!1),{orderedBrands:w,brandsAreBeingFetched:k}=Wi(),x=M(u.query.section||"details"),I=M({}),C=M(!1),S=M(null),T=M(!0),E=M([]);st("brands",w);const $=O(()=>!k.value),{documentTypes:F}=Yi(),{form:R}=Ze({title:null,brand_id:null,user_id:null,content:null,view_type:"nav-top",locale:m.value.locale,document_type_id:null,requires_signature:!0,signers:[],recipients:[],pdf:{padding:"15px"},billable:{tax_type:c("tax_type"),products:[]},send:!1,send_mail_account_id:null,send_mail_body:null,send_mail_subject:null,associations:{}});function B(){if(n.exitUsing){n.exitUsing();return}i.back()}function V(oe,ie={}){if(i.document=oe,n.editRedirectHandler){n.editRedirectHandler(oe,ie);return}i.replace({name:"edit-document",params:{id:oe.id},query:ie})}function P(){b.value=!0,j().then(oe=>{if(R.send=!0,!oe.authorizations.view){V(oe,{section:"send"}),Innoclapps.error("Document not sent, your account not authorized to perform this action.");return}R.billable=oe.billable,R.signers=oe.signers,v(R,oe.id).then(ie=>{Innoclapps.success(s("documents::document.sent")),o("sent",ie),V(ie,{section:"send"})})}).catch(()=>b.value=!1)}function z(){j().then(B)}async function H(){let oe=await j();return V(oe,{section:x.value}),oe}async function j(){R.busy=!0,y.value.builderRef&&await y.value.builderRef.saveBase64Images(),await ze();let oe=await f(R).catch(ie=>(ie.isValidationError()&&Innoclapps.error(s("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(ie)));return n.viaResource&&oe.authorizations.view&&(a({documents:[oe]}),r(["documents_count","documents_for_user_count","draft_documents_for_user_count"])),o("created",oe),oe}function N({deal:oe}){S.value=oe,E.value.push(oe),ee(oe),C.value=!1}function L(oe,ie){let Q=Et(I.value[ie],["id",oe]),se=R.associations[ie].findIndex(me=>me===oe);Q!==-1&&I.value[ie].splice(Q,1),se!==-1&&R.associations[ie].splice(se,1)}function U(oe,ie){Object.hasOwn(R.associations,ie)||(R.associations[ie]=[]),Object.hasOwn(I.value,ie)||(I.value[ie]=[]),ut(R.associations[ie],["id",oe.id])||(R.associations[ie].push(oe.id),I.value[ie].push(oe))}function ee(oe){oe&&(U({id:oe.id,display_name:oe.display_name},"deals"),W(oe))}function G(oe){!oe&&S.value&&L(S.value.id,"deals"),S.value=oe}function W(oe){!R.title&&R.document_type_id&&(R.title=`${oe.display_name} ${ut(F.value,["id",parseInt(R.document_type_id)]).name}`),oe.billable&&(R.billable.products=oe.billable.products.map(ie=>sr(ie,["id"])),R.billable.tax_type=oe.billable.tax_type),R.requires_signature&&(oe.contacts||[]).filter(ie=>!!ie.email).forEach(ie=>R.signers.unshift({name:ie.display_name,email:ie.email,send_email:!0}))}function ae(){U({id:n.viaResourceId,display_name:n.relatedResource.display_name},n.viaResource),n.viaResource==="deals"&&(W(n.relatedResource),T.value=!1),n.viaResource==="contacts"&&n.relatedResource.email&&R.signers.unshift({name:n.relatedResource.display_name,email:n.relatedResource.email,send_email:!0}),n.viaResource==="companies"&&(n.relatedResource.contacts||[]).filter(oe=>!!oe.email).forEach(oe=>{R.signers.unshift({name:oe.display_name,email:oe.email,send_email:!0})})}async function ue(oe,ie){if(oe==""){E.value=[];return}ie(!0);let{data:Q}=await Innoclapps.request("/deals/search",{params:{q:oe,with:"billable.products"}});E.value=Q,ie(!1)}function ce(){n.viaResource&&ae(),R.set("user_id",m.value.id)}return ce(),(oe,ie)=>{const Q=d("IDropdownItem"),se=d("IDropdownMenu"),me=d("IExtendedDropdown"),xe=d("Icon"),de=d("ILink"),he=d("ICustomSelect"),Y=d("IFormGroup"),X=d("CreateDealModal"),re=Ve("i-tooltip"),we=Ve("t");return g(),A(ta,{to:"body"},[l(r5,{"active-section":x.value,"onUpdate:activeSection":ie[2]||(ie[2]=Ce=>x.value=Ce),"total-products":h(R).billable.products.length,"total-signers":h(R).requires_signature?h(R).signers.length:void 0,onExitRequested:B},{actions:p(()=>[l(me,{placement:"bottom-end",disabled:h(R).busy,loading:h(R).busy,text:oe.$t("core::app.save"),onClick:H},{default:p(()=>[l(se,null,{default:p(()=>[l(Q,{text:oe.$t("core::app.save_and_exit"),onClick:z},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])]),default:p(()=>[$.value?(g(),D("div",i3e,[l(a5,{form:h(R),visible:x.value=="details"},{actions:p(()=>[_("div",u3e,[l(za,{modelValue:h(R).associations,"onUpdate:modelValue":ie[0]||(ie[0]=Ce=>h(R).associations=Ce),"width-class":"w-80","primary-resource-name":e.viaResource,"primary-record":e.viaResource?e.relatedResource:void 0,"primary-record-disabled":!0,"initial-associateables":e.viaResource?e.relatedResource:void 0,associateables:I.value},{"after-record":p(({record:Ce,selectedRecords:ge,isSearching:Re,title:et})=>[ge[0]===Ce.id&&!Re?ne((g(),D("span",c3e,[l(xe,{icon:"CodeBracket",class:"size-5 text-neutral-500 dark:text-neutral-400"})])),[[re,oe.$t("documents::document.will_use_placeholders_from_record",{resourceName:et}),void 0,{top:!0}]]):K("",!0)]),_:1},8,["modelValue","primary-resource-name","primary-record","initial-associateables","associateables"])])]),top:p(()=>[T.value?(g(),A(Y,{key:0,class:"mb-6 mt-3 rounded-lg border border-neutral-200 bg-info-50/40 p-5 dark:border-info-400/10 dark:bg-info-900/10",description:oe.$t("documents::document.deal_description")},{default:p(()=>[l(he,{ref:"createDealSelectRef",label:"name","input-id":"deal_id",placeholder:oe.$t("deals::deal.choose_or_create"),options:E.value,filterable:!1,"model-value":S.value,debounce:"","onUpdate:modelValue":G,onSearch:ue,onOptionSelected:ee},{"no-options":p(({searching:Ce,text:ge})=>[ne(_("span",{textContent:Z(ge)},null,8,d3e),[[pe,Ce]]),ne(_("span",null,null,512),[[pe,!Ce],[we,"core::app.type_to_search"]])]),footer:p(()=>[l(de,{class:"block border-t border-neutral-200 px-4 py-2 hover:bg-neutral-50 dark:border-neutral-500/30 dark:hover:bg-neutral-700",onClick:ie[1]||(ie[1]=Ce=>{C.value=!0,oe.$refs.createDealSelectRef.hide()})},{default:p(()=>[le(" + "+Z(oe.$t("deals::deal.create")),1)]),_:1})]),_:1},8,["placeholder","options","model-value"])]),_:1},8,["description"])):K("",!0)]),_:1},8,["form","visible"]),l(l5,{form:h(R),visible:x.value=="products"},null,8,["form","visible"]),l(o5,{ref_key:"sectionContentRef",ref:y,form:h(R),visible:x.value=="content"},null,8,["form","visible"]),l(i5,{form:h(R),visible:x.value=="signature"},null,8,["form","visible"]),l(s5,{sending:b.value,form:h(R),visible:x.value=="send",onSendRequested:P,onSaveRequested:H},null,8,["sending","form","visible"])])):K("",!0)]),_:1},8,["active-section","total-products","total-signers"]),l(X,{visible:C.value,"onUpdate:visible":ie[3]||(ie[3]=Ce=>C.value=Ce),onCreated:N},null,8,["visible"])])}}},m3e={class:"flex space-x-0.5"},f3e={class:"inline-block"},p3e={key:0,class:"container mx-auto"},v3e={key:0,class:"mx-auto mb-6 max-w-6xl"},h3e={class:"inline-block"},g3e={key:0,class:"ml-1.5 self-start"},mc={__name:"DocumentsEdit",props:{id:Number,viaResource:String,viaResourceId:[String,Number],relatedResource:Object,section:String,exitUsing:Function},emits:["changed","updated","deleted","cloned","lost","reactivated","accept","sent","associations-updated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("documents"),r=Pe("synchronizeResource",null),s=Pe("incrementResourceCount",null),{t:i}=Ee(),{retrieveResource:u,deleteResource:c,cloneResource:m}=Dt(a),f=_t(),v=It(),y=bo(),b=M(null),w=M(!1),k=M(!1),{orderedBrands:x,brandsAreBeingFetched:I}=Wi(),C=M(n.section||v.query.section||"details"),S=M({}),T=M(!1),{form:E}=Ze(),$=O(()=>k.value&&!I.value);st("brands",x),st("document",S);function F(G){return f.document?new Promise(W=>W(f.document)):u(G)}function R(G){F(G).then(W=>{E.set({send:!1}),B(W),k.value=!0,f.document&&delete f.document}).catch(W=>{W.response.status===404&&(T.value=!0)})}function B(G){S.value=G,n.viaResource||(y.value=G.title),E.set({title:G.title,view_type:G.view_type,locale:G.locale,user_id:G.user_id,brand_id:G.brand_id,document_type_id:G.document_type_id,content:G.content,requires_signature:G.requires_signature,signers:G.signers,recipients:G.recipients,pdf:G.pdf,billable:{tax_type:G.billable.tax_type,products:G.billable.products,removed_products:[]},send_at:G.send_at,send_mail_account_id:G.send_mail_account_id,send_mail_body:G.send_mail_body,send_mail_subject:G.send_mail_subject})}async function V(){await Innoclapps.confirm({message:i("documents::document.actions.mark_as_lost_message"),title:!1,icon:"QuestionMarkCircle",iconWrapperColorClass:"bg-info-100",iconColorClass:"text-info-400",html:!0,confirmText:i("core::app.confirm"),confirmVariant:"info"}),Innoclapps.request().post(`/documents/${S.value.id}/lost`).then(({data:G})=>{o("lost",G),o("changed",G),Innoclapps.success(i("documents::document.marked_as_lost")),ee()})}function P(){Innoclapps.request().post(`/documents/${S.value.id}/accept`).then(({data:G})=>{o("accept",G),o("changed",G),Innoclapps.success(i("documents::document.marked_as_accepted")),B(G)})}async function z(){Innoclapps.request().post(`/documents/${S.value.id}/draft`).then(({data:G})=>{Innoclapps.success(i("documents::document.reactivated")),o("reactivated",G),o("changed",G),B(G)})}function H(){w.value=!0,j().then(()=>{E.send=!0,j().then(()=>Innoclapps.success(i("documents::document.sent"))).finally(G=>{E.send=!1,w.value=!1,o("sent",G)})}).catch(G=>{console.error(G),w.value=!1})}async function j(){E.busy=!0,b.value.builderRef&&await b.value.builderRef.saveBase64Images(),await ze();let G=await E.put(`/documents/${S.value.id}`).catch(W=>(W.isValidationError()&&Innoclapps.error(i("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(W)));return B(G),o("updated",G),o("changed",G),G}function N(){j().then(ee)}async function L(){const G=await m(S.value.id);o("cloned",G),n.viaResource?(f.push({name:v.name,params:{documentId:G.id}}),n.viaResource&&G.authorizations.view&&(r({documents:[G]}),s(["documents_count","documents_for_user_count","draft_documents_for_user_count"]))):f.push({name:v.name,params:{id:G.id}}),B(G)}async function U(){await c(S.value.id),o("deleted",S.value),Innoclapps.success(i("documents::document.deleted")),ee()}function ee(){if(n.exitUsing){n.exitUsing();return}f.back()}return R(n.id||v.params.id),(G,W)=>{const ae=d("IButtonCopy"),ue=d("IDropdownButton"),ce=d("IDropdownItem"),oe=d("IDropdownMenu"),ie=d("IDropdown"),Q=d("IDropdownSeparator"),se=d("IExtendedDropdown"),me=d("IAlertBody"),xe=d("IAlert"),de=d("Icon"),he=d("IOverlay"),Y=Ve("i-tooltip");return g(),A(ta,{to:"body",disabled:T.value},[l(r5,{"active-section":C.value,"onUpdate:activeSection":W[2]||(W[2]=X=>C.value=X),"total-products":$.value?h(E).billable.products.length:void 0,"total-signers":$.value&&h(E).requires_signature?h(E).signers.length:void 0,"remaining-signers":$.value?h(E).signers.filter(X=>!X.signed_at).length:void 0,onExitRequested:ee},{actions:p(()=>[_("div",m3e,[$.value&&S.value.authorizations.view?ne((g(),A(ae,{key:0,class:"shrink-0",text:S.value.public_url,"success-message":G.$t("documents::document.url_copied")},null,8,["text","success-message"])),[[Y,G.$t("documents::document.copy_url"),void 0,{bottom:!0}]]):K("",!0),$.value&&S.value.authorizations.view?(g(),A(ie,{key:1,placement:"bottom-end"},{default:p(()=>[l(ue,{icon:"DocumentDownload",basic:"","no-caret":""}),l(oe,null,{default:p(()=>[l(ce,{target:"_blank",rel:"noopener noreferrer",href:S.value.public_url+"/pdf",text:G.$t("documents::document.view_pdf")},null,8,["href","text"]),l(ce,{href:S.value.public_url+"/pdf?output=download",text:G.$t("documents::document.download_pdf")},null,8,["href","text"])]),_:1})]),_:1})):K("",!0),ne((g(),D("span",f3e,[$.value?(g(),A(se,{key:0,placement:"bottom-end",disabled:h(E).busy||!S.value.authorizations.update,loading:h(E).busy,text:G.$t("core::app.save"),onClick:j},{default:p(()=>[l(oe,null,{default:p(()=>[l(ce,{text:G.$t("core::app.save_and_exit"),onClick:N},null,8,["text"]),S.value.status!=="accepted"&&S.value.status!=="lost"?(g(),A(ce,{key:0,text:G.$t("documents::document.actions.mark_as_lost"),onClick:V},null,8,["text"])):K("",!0),S.value.status!=="accepted"?(g(),A(ce,{key:1,text:G.$t("documents::document.actions.mark_as_accepted"),onClick:P},null,8,["text"])):K("",!0),S.value.status==="lost"?(g(),A(ce,{key:2,text:G.$t("documents::document.actions.reactivate"),confirmable:"",onConfirmed:z},null,8,["text"])):K("",!0),S.value.status==="accepted"&&S.value.marked_accepted_by?(g(),A(ce,{key:3,text:G.$t("documents::document.actions.undo_acceptance"),confirmable:"",onConfirmed:z},null,8,["text"])):K("",!0),l(ce,{text:G.$t("core::app.clone"),onClick:L},null,8,["text"]),l(Q),S.value.authorizations.delete?(g(),A(ce,{key:4,text:G.$t("core::app.delete"),"confirm-text":G.$t("core::app.confirm"),confirmable:"",onConfirmed:U},null,8,["text","confirm-text"])):K("",!0)]),_:1})]),_:1},8,["disabled","loading","text"])):K("",!0)])),[[Y,S.value.authorizations&&!S.value.authorizations.update?G.$t("core::app.action_not_authorized"):"",void 0,{bottom:!0}]])])]),default:p(()=>[l(he,{show:!$.value},{default:p(()=>[$.value?(g(),D("div",p3e,[$.value&&!S.value.authorizations.view?(g(),D("div",v3e,[l(xe,{variant:"warning"},{default:p(()=>[l(me,null,{default:p(()=>[le(Z(G.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})])):K("",!0),l(a5,{form:h(E),document:S.value,visible:C.value=="details"},{actions:p(()=>[_("div",h3e,[l(za,{"associations-count":S.value.associations_count,"onUpdate:associationsCount":W[0]||(W[0]=X=>S.value.associations_count=X),"width-class":"w-80","resource-name":h(a),"resource-id":S.value.id,"initial-associateables":e.viaResource?e.relatedResource:void 0,"primary-resource-name":e.viaResource,onSynced:W[1]||(W[1]=X=>G.$emit("changed",X))},{"after-record":p(({record:X,isSelected:re,isSearching:we,title:Ce})=>[X.is_primary_associated&&re&&!we?ne((g(),D("span",g3e,[l(de,{icon:"CodeBracket",class:"size-5 text-neutral-500 dark:text-neutral-400"})])),[[Y,G.$t("documents::document.will_use_placeholders_from_record",{resourceName:Ce}),void 0,{top:!0}]]):K("",!0)]),_:1},8,["associations-count","resource-name","resource-id","initial-associateables","primary-resource-name"])])]),_:1},8,["form","document","visible"]),l(l5,{form:h(E),visible:C.value=="products",document:S.value},null,8,["form","visible","document"]),l(o5,{ref_key:"sectionContentRef",ref:b,form:h(E),document:S.value,visible:C.value=="content","is-ready":$.value},null,8,["form","document","visible","is-ready"]),l(i5,{form:h(E),document:S.value,visible:C.value=="signature"},null,8,["form","document","visible"]),l(s5,{sending:w.value,form:h(E),document:S.value,visible:C.value=="send",onSendRequested:H,onSaveRequested:j},null,8,["sending","form","document","visible"])])):K("",!0)]),_:1},8,["show"])]),_:1},8,["active-section","total-products","total-signers","remaining-signers"])],8,["disabled"])}}},b3e={class:"my-1 flex items-center"},y3e={class:"mt-5"},_3e={class:"rounded-md bg-neutral-50 px-6 py-5 dark:bg-neutral-800 sm:flex sm:items-start sm:justify-between"},I3e={class:"sm:flex sm:items-start"},w3e={class:"mt-3 sm:ml-4 sm:mt-0"},x3e=["textContent"],k3e={class:"mt-4 sm:ml-6 sm:mt-0 sm:shrink-0"},$3e={class:"flex items-center space-x-2"},c5=Object.assign({inheritAttrs:!1},{__name:"RelatedDocument",props:{documentId:{type:Number,required:!0},typeId:{type:Number,required:!0},status:{type:String,required:!0},displayName:{type:String,required:!0},path:{type:String,required:!0},publicUrl:{type:String,required:!0},acceptedAt:String,lastDateSent:String,amount:{required:!0},authorizations:{type:Object,required:!0},associationsCount:{type:Number,required:!0},viaResource:{type:String,required:!0},viaResourceId:{required:!0,type:[String,Number]},relatedResource:{required:!0,type:Object}},setup(e){const t=e,n=Innoclapps.resourceName("documents"),o=Pe("synchronizeResource"),a=Pe("decrementResourceCount"),{t:r}=Ee(),{deleteResource:s}=Dt(n),{formatMoney:i}=ro(),{localizedDateTime:u}=rt(),{scriptConfig:c}=Ne(),{findTypeById:m}=Yi(),f=M(!1),v=M(null),y=O(()=>m(t.typeId)),b=c("documents.statuses");function w(S){o({documents:S})}function k(S){o({documents:{id:S.id,_delete:!0}}),I()}function x(S=null){v.value=typeof S=="string"?S:"details",f.value=!0}function I(){At("refresh-details-view")}async function C(S){await s(S),t.status==="draft"&&a("draft_documents_for_user_count"),o({documents:{id:S,_delete:!0}}),a("documents_count"),a("documents_for_user_count"),Innoclapps.success(r("documents::document.deleted"))}return(S,T)=>{const E=d("ILink"),$=d("IBadge"),F=d("ITextBlockDark"),R=d("IText"),B=d("ITextBlock"),V=d("IButton"),P=d("IDropdownItem"),z=d("IDropdownSeparator"),H=d("IDropdownMinimal"),j=d("ICardBody"),N=d("ICard");return g(),D(fe,null,[f.value?(g(),A(mc,{key:0,id:e.documentId,section:v.value,"via-resource":e.viaResource,"exit-using":()=>f.value=!1,onReactivated:I,onSent:I,onLost:I,onAccept:I,onChanged:w,onDeleted:k},null,8,["id","section","via-resource","exit-using"])):K("",!0),l(N,Ue(S.$attrs,{class:"document-"+e.documentId}),{default:p(()=>[l(j,null,{default:p(()=>[_("div",b3e,[l(E,{class:"font-medium",href:e.path,text:e.displayName,basic:"",onClick:x},null,8,["href","text"]),l($,{class:"ml-3",text:y.value.name,color:y.value.swatch_color,icon:y.value.icon},null,8,["text","color","icon"])]),l(za,{"associations-count":e.associationsCount,"initial-associateables":e.relatedResource,"resource-id":e.documentId,"resource-name":h(n),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:T[0]||(T[0]=L=>h(o)({documents:L}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"]),_("div",y3e,[_("div",_3e,[_("div",I3e,[l($,{class:"w-auto self-start sm:shrink-0",text:h(b)[e.status].display_name,color:h(b)[e.status].color},null,8,["text","color"]),_("div",w3e,[l(F,{class:"font-medium",text:h(i)(e.amount)},null,8,["text"]),l(R,{class:"mt-1",text:S.$t("documents::document.sent_at",{date:e.lastDateSent?h(u)(e.lastDateSent):"N/A"})},null,8,["text"]),e.acceptedAt?(g(),A(B,{key:0,class:"mt-1 space-x-1 sm:flex sm:items-center"},{default:p(()=>[_("span",null,Z(S.$t("documents::document.accepted_at"))+":",1),_("span",{textContent:Z(h(u)(e.acceptedAt))},null,8,x3e)]),_:1})):K("",!0)])]),_("div",k3e,[_("div",$3e,[ne(l(V,{variant:"secondary",text:S.$t("core::app.edit"),onClick:x},null,8,["text"]),[[pe,e.authorizations.view]]),e.status==="draft"?ne((g(),A(V,{key:0,variant:"secondary",icon:"Mail",text:S.$t("documents::document.send.send"),onClick:T[1]||(T[1]=L=>x("send"))},null,8,["text"])),[[pe,e.authorizations.view]]):K("",!0),l(H,null,{default:p(()=>[l(P,{href:e.publicUrl,text:S.$t("documents::document.view")},null,8,["href","text"]),l(z),l(P,{target:"_blank",rel:"noopener noreferrer",href:e.publicUrl+"/pdf",text:S.$t("documents::document.view_pdf")},null,8,["href","text"]),l(P,{href:e.publicUrl+"/pdf?output=download",text:S.$t("documents::document.download_pdf")},null,8,["href","text"]),l(z),e.authorizations.update?(g(),A(P,{key:0,text:S.$t("core::app.edit"),onClick:x},null,8,["text"])):K("",!0),e.authorizations.delete?(g(),A(P,{key:1,text:S.$t("core::app.delete"),onClick:T[2]||(T[2]=L=>S.$confirm(()=>C(e.documentId)))},null,8,["text"])):K("",!0)]),_:1})])])])])]),_:1})]),_:1},16,["class"])],64)}}}),C3e={class:"sm:flex sm:items-start sm:justify-between"},S3e={class:"mt-5 sm:ml-6 sm:mt-0"},T3e={class:"mt-3 space-y-4 sm:mt-7"},E3e="documents",F3e={__name:"RecordTabDocumentPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Pe("synchronizeResource"),o=M(null),a=M(!1),r=M(null),{dataLoadedFirstTime:s,searchResults:i,isSearching:u,hasSearchResults:c,performSearch:m,search:f,loadData:v,infiniteHandler:y}=gs({resourceName:t.resourceName,resource:gt(t,"resource"),scrollElement:t.scrollElement,infinityRef:o,synchronizeResource:n,timelineRelation:E3e}),b=O(()=>u.value?i.value||[]:t.resource.documents||[]),w=O(()=>Vt(b.value.filter(R=>R.status==="lost"),R=>new Date(R.created_at),"asc")),k=O(()=>Vt(b.value.filter(R=>R.status==="accepted"),R=>new Date(R.accepted_at),"asc")),x=O(()=>Vt(b.value.filter(R=>R.status==="draft"),R=>new Date(R.created_at),"asc")),I=O(()=>Vt(b.value.filter(R=>R.status==="sent"),R=>new Date(R.last_date_sent),"desc")),C=O(()=>[...x.value,...I.value,...w.value,...k.value]),S=O(()=>C.value.length>0);function T(R){n({documents:R})}function E(R){n({documents:{id:R.id,_delete:!0}}),F()}function $(R){r.value=R.id,a.value=!1}function F(){At("refresh-details-view")}return(R,B)=>{const V=d("ITextDark"),P=d("IText"),z=d("IButton"),H=d("SearchInput"),j=d("ICardBody"),N=d("ICard"),L=d("ITabPanel");return g(),A(L,{lazy:!h(s),onActivatedOnce:h(v)},{default:p(()=>[l(N,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(j,null,{default:p(()=>[_("div",C3e,[_("div",null,[l(V,{class:"font-semibold",text:R.$t("documents::document.manage_documents")},null,8,["text"]),l(P,{class:"max-w-xl",text:R.$t("documents::document.info")},null,8,["text"])]),_("div",S3e,[l(z,{variant:"primary",icon:"PlusSolid",text:R.$t("documents::document.create"),onClick:B[0]||(B[0]=U=>a.value=!0)},null,8,["text"])])]),ne(l(H,{modelValue:h(f),"onUpdate:modelValue":[B[1]||(B[1]=U=>$n(f)?f.value=U:null),h(m)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[pe,S.value||h(f)]])]),_:1})]),_:1}),a.value?(g(),A(u5,{key:0,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,"exit-using":()=>a.value=null,"edit-redirect-handler":$},null,8,["via-resource","via-resource-id","related-resource","exit-using"])):K("",!0),r.value?(g(),A(mc,{key:1,id:r.value,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,"exit-using":()=>r.value=!1,onReactivated:F,onSent:F,onLost:F,onAccept:F,onChanged:T,onDeleted:E},null,8,["id","via-resource","via-resource-id","related-resource","exit-using"])):K("",!0),_("div",T3e,[(g(!0),D(fe,null,Ie(C.value,U=>(g(),A(c5,{key:U.id,"document-id":U.id,"type-id":U.document_type_id,status:U.status,"display-name":U.display_name,path:U.path,"public-url":U.public_url,"accepted-at":U.accepted_at,"last-date-sent":U.last_date_sent,amount:U.amount,authorizations:U.authorizations,"associations-count":U.associations_count,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["document-id","type-id","status","display-name","path","public-url","accepted-at","last-date-sent","amount","authorizations","associations-count","via-resource","via-resource-id","related-resource"]))),128))]),ne(l(P,{class:"mt-6 text-center",text:R.$t("core::app.no_search_results")},null,8,["text"]),[[pe,h(u)&&!h(c)]]),l(gr,{ref_key:"infinityRef",ref:o,"scroll-element":e.scrollElement,onHandle:B[2]||(B[2]=U=>h(y)(U))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},A3e={__name:"RecordTabTimelineDocument",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),A(yo,{"heading-class":"font-medium","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,icon:e.log.type.icon,heading:t.$t("documents::document.timeline.heading")},{default:p(()=>[l(c5,{class:"mt-3","document-id":e.log.id,"type-id":e.log.document_type_id,status:e.log.status,"display-name":e.log.display_name,path:e.log.path,"public-url":e.log.public_url,"accepted-at":e.log.accepted_at,"last-date-sent":e.log.last_date_sent,amount:e.log.amount,authorizations:e.log.authorizations,"associations-count":e.log.associations_count,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["document-id","type-id","status","display-name","path","public-url","accepted-at","last-date-sent","amount","authorizations","associations-count","via-resource","via-resource-id","related-resource"])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","icon","heading"]))}},R3e={__name:"DocumentsTypeIndex",setup(e){const t=Innoclapps.resourceName("document-types"),{fetchDocumentTypes:n}=Yi();return(o,a)=>{const r=d("ICardHeading");return g(),A(Ci,{"resource-name":h(t),"with-cancel":!1,onCreated:h(n),onUpdated:h(n),onDeleted:h(n)},{header:p(()=>[l(r,{text:o.$t("documents::document.type.types")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},D3e={class:"space-y-8"},O3e={class:"divide-y divide-neutral-200 dark:divide-neutral-700"},B3e={class:"px-4 py-4 sm:px-6"},N3e={__name:"SettingsDocuments",setup(e){const{resetStoreState:t}=Ne(),{form:n,submit:o,isReady:a}=To(),r=M(null),{typesByName:s}=Yi();function i(u){n.default_document_type=u.id,o(t)}return Yr(a,()=>{r.value=s.value.find(u=>u.id==n.default_document_type)}),(u,c)=>{const m=d("ICardHeading"),f=d("ICardHeader"),v=d("ICustomSelect"),y=d("IFormGroup"),b=d("ICard");return g(),D("div",D3e,[_("div",null,[l(f,null,{default:p(()=>[l(m,{text:u.$t("documents::document.documents")},null,8,["text"])]),_:1}),l(b,{overlay:!h(a)},{default:p(()=>[_("ul",O3e,[_("li",B3e,[l(y,{class:"mb-0","label-for":"default_document_type",label:u.$t("documents::document.type.default_type")},{default:p(()=>[l(v,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=w=>r.value=w),"input-id":"default_document_type",class:"xl:w-1/3",label:"name",clearable:!1,options:h(s),onOptionSelected:i},null,8,["modelValue","options"])]),_:1},8,["label"])])])]),_:1},8,["overlay"])]),_("div",null,[l(R3e)])])}}},P3e={class:"container mx-auto"},M3e={class:"mx-auto max-w-6xl"},V3e={class:"px-4 py-4"},L3e={class:"flex items-center justify-between"},q3e={class:"min-w-0 flex-1"},U3e=["href"],j3e=["src","alt"],z3e={class:"flex space-x-3 md:ml-3"},H3e={class:"py-6"},W3e={class:"container mx-auto"},G3e={class:"mx-auto max-w-6xl"},K3e={__name:"DocumentsPublicViewNavbar",props:["publicUrl","brandName","logo","backgroundColor"],setup(e){return(t,n)=>{const o=d("Icon");return g(),D(fe,null,[_("div",{class:"sticky top-0 z-50 drop-shadow-[0_1.5px_1.5px_rgba(0,0,0,0.15)]",style:Nt({backgroundColor:e.backgroundColor})},[_("div",P3e,[_("div",M3e,[_("div",V3e,[_("div",L3e,[_("div",q3e,[_("a",{class:"focus:outline-none",href:e.publicUrl},[e.logo?(g(),D("img",{key:0,class:"h-12 w-auto",src:e.logo,alt:e.brandName},null,8,j3e)):(g(),A(o,{key:1,icon:"Document",class:"size-8 text-neutral-400"}))],8,U3e)]),_("div",z3e,[Se(t.$slots,"actions")])])])])])],4),_("div",H3e,[_("div",W3e,[_("div",G3e,[Se(t.$slots,"content")])])])],64)}}},Z3e=_("div",{class:"fixed inset-0 bg-neutral-900/75 transition-opacity dark:bg-neutral-700/90"},null,-1),Y3e={class:"fixed inset-0 z-40 flex"},X3e={class:"absolute right-0 top-0 -mr-12 pt-2"},Q3e=_("span",{class:"sr-only"},"Close sidebar",-1),J3e={class:"h-0 flex-1 overflow-y-auto py-10"},eTe={class:"flex shrink-0 items-center px-4"},tTe=["href"],nTe=["src","alt"],oTe={class:"mt-5 space-y-1 px-3"},aTe=["href","textContent"],rTe={class:"flex shrink-0 space-x-3 p-4"},lTe=_("div",{class:"w-14 shrink-0"},null,-1),sTe={class:"z-10 hidden md:fixed md:inset-y-0 md:flex md:w-72 md:flex-col"},iTe={class:"flex flex-1 flex-col overflow-y-auto py-10"},uTe={class:"flex shrink-0 items-center px-4"},cTe=["href"],dTe=["src","alt"],mTe=["href","textContent"],fTe={class:"flex shrink-0 justify-center space-x-3 p-4"},pTe={class:"flex flex-1 flex-col md:pl-72"},vTe={class:"sticky top-0 z-10 bg-white pl-1 pt-1 sm:pl-3 sm:pt-3 md:hidden"},hTe={class:"size-12"},gTe=_("span",{class:"sr-only"},"Open sidebar",-1),bTe={class:"flex-1"},yTe={__name:"DocumentsPublicViewSidebar",props:["navigation","publicUrl","brandName","logo","backgroundColor","full","navigationHeadingTagName"],setup(e){const t=e,n=M(!1),o=M(null);document.body.classList.add("h-full");var a=document.getElementsByTagName("html")[0];return a.className+=" h-full scroll-smooth",o.value=window.location.hash,!o.value&&t.navigation.length>0&&(o.value=t.navigation[0].href),window.addEventListener("hashchange",r=>{o.value=r.currentTarget.location.hash}),Je(()=>{let r=document.querySelectorAll(t.navigationHeadingTagName),s=[];r.forEach(u=>{const c=ut(t.navigation,{name:u.innerText});c&&(u.getAttribute("id")||u.setAttribute("id",c.id),s.push({...c,element:u}))});const i=function(u){const c=u.getBoundingClientRect();return c.top>=0&&c.left>=0&&c.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth)};window.addEventListener("scroll",ga(()=>{let u=[];s.forEach(c=>{i(c.element)&&u.push(c),u.length>0&&(o.value=`${u[0].href}`)})},150))}),(r,s)=>{const i=d("Icon");return g(),D("div",null,[l(h(ms),{as:"template",show:n.value},{default:p(()=>[l(h(Di),{as:"div",class:"relative z-40 md:hidden",onClose:s[1]||(s[1]=u=>n.value=!1)},{default:p(()=>[l(h(vo),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[Z3e]),_:1}),_("div",Y3e,[l(h(vo),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:p(()=>[l(h(Oi),{class:"relative flex w-full max-w-xs flex-1 flex-col",style:Nt({backgroundColor:e.backgroundColor})},{default:p(()=>[l(h(vo),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[_("div",X3e,[_("button",{type:"button",class:"ml-1 flex size-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:s[0]||(s[0]=u=>n.value=!1)},[Q3e,l(i,{icon:"XSolid",class:"size-6 text-white"})])])]),_:1}),_("div",J3e,[_("div",eTe,[_("a",{class:"focus:outline-none",href:e.publicUrl},[e.logo?(g(),D("img",{key:0,class:"h-8 w-auto",src:e.logo,alt:e.brandName},null,8,nTe)):(g(),A(i,{key:1,icon:"Document",class:"size-8 text-neutral-400"}))],8,tTe)]),_("nav",oTe,[(g(!0),D(fe,null,Ie(e.navigation,u=>(g(),D("a",{key:u.name,href:u.href,style:Nt({color:h(jr)(e.backgroundColor)}),class:be([o.value===u.href?"font-medium":"font-normal","flex px-2 py-2 text-base focus:outline-none"]),textContent:Z(u.name)},null,14,aTe))),128))])]),_("div",rTe,[Se(r.$slots,"actions")])]),_:3},8,["style"])]),_:3}),lTe])]),_:3})]),_:3},8,["show"]),_("div",sTe,[_("div",{class:"flex min-h-0 flex-1 flex-col shadow-[0px_0px_25px_0px_rgba(0,0,0,0.3)]",style:Nt({backgroundColor:e.backgroundColor})},[_("div",iTe,[_("div",uTe,[_("a",{class:"focus:outline-none",href:e.publicUrl},[e.logo?(g(),D("img",{key:0,class:"h-8 w-auto",src:e.logo,alt:e.brandName},null,8,dTe)):(g(),A(i,{key:1,icon:"Document",class:"size-8 text-neutral-400"}))],8,cTe)]),_("nav",{class:"mt-5 flex-1 space-y-1 px-3",style:Nt({backgroundColor:e.backgroundColor})},[(g(!0),D(fe,null,Ie(e.navigation,u=>(g(),D("a",{key:u.name,href:u.href,style:Nt({color:h(jr)(e.backgroundColor)}),class:be([o.value===u.href?"font-medium":"font-normal","flex px-2 py-2 text-base focus:outline-none sm:text-sm"]),textContent:Z(u.name)},null,14,mTe))),128))],4)]),_("div",fTe,[Se(r.$slots,"actions")])],4)]),_("div",pTe,[_("div",vTe,[_("div",hTe,[_("button",{type:"button",class:"mt-1.5 inline-flex items-center justify-center rounded-md p-1 text-neutral-500 hover:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:s[2]||(s[2]=u=>n.value=!0)},[gTe,l(i,{icon:"Bars3BottomLeft",class:"size-6"})])])]),_("main",bTe,[_("div",{class:be({"py-6":!e.full})},[_("div",{class:be({"mx-auto max-w-7xl px-4 sm:px-6 md:px-8":!e.full})},[Se(r.$slots,"content")],2)],2)])])])}}},_Te={class:"h-full max-h-full w-full bg-white"},ITe={class:"hidden sm:block"},wTe={key:0,xmlns:"http://www.w3.org/2000/svg","data-slot":"icon",viewBox:"0 0 640 512",class:"fill-white"},xTe=_("path",{d:"M192 128c0-17.7 14.3-32 32-32s32 14.3 32 32v7.8c0 27.7-2.4 55.3-7.1 82.5l-84.4 25.3c-40.6 12.2-68.4 49.6-68.4 92v71.9c0 40 32.5 72.5 72.5 72.5c26 0 50-13.9 62.9-36.5l13.9-24.3c26.8-47 46.5-97.7 58.4-150.5l94.4-28.3-12.5 37.5c-3.3 9.8-1.6 20.5 4.4 28.8s15.7 13.3 26 13.3H544c17.7 0 32-14.3 32-32s-14.3-32-32-32H460.4l18-53.9c3.8-11.3 .9-23.8-7.4-32.4s-20.7-11.8-32.2-8.4L316.4 198.1c2.4-20.7 3.6-41.4 3.6-62.3V128c0-53-43-96-96-96s-96 43-96 96v32c0 17.7 14.3 32 32 32s32-14.3 32-32V128zm-9.2 177l49-14.7c-10.4 33.8-24.5 66.4-42.1 97.2l-13.9 24.3c-1.5 2.6-4.3 4.3-7.4 4.3c-4.7 0-8.5-3.8-8.5-8.5V335.6c0-14.1 9.3-26.6 22.8-30.7zM24 368c-13.3 0-24 10.7-24 24s10.7 24 24 24H64.3c-.2-2.8-.3-5.6-.3-8.5V368H24zm592 48c13.3 0 24-10.7 24-24s-10.7-24-24-24H305.9c-6.7 16.3-14.2 32.3-22.3 48H616z"},null,-1),kTe=[xTe],$Te=["innerHTML"],CTe=["innerHTML"],STe=["innerHTML"],TTe={class:"relative pb-3"},ETe={class:"shrink-0"},FTe={__name:"DocumentsPublicView",props:["requiresSignature","title","content","uuid","status","publicUrl","signatureBoundText","acceptThankYouMessage","signThankYouMessage","navigationBackgroundColor","brandName","logo","viewType","navigation","navigationHeadingTagName"],setup(e){const t=e,n=M(null),o=M(!1),a=M(!1),r=M(!1),s=M(!1),i=M(!1),{form:u}=Ze({email:null,signature:null}),c=O(()=>t.viewType==="nav-top"?K3e:yTe),m=O(()=>{let b={publicUrl:t.publicUrl,brandName:t.brandName,logo:t.logo,backgroundColor:t.navigationBackgroundColor};return t.viewType!=="nav-top"&&(b.navigation=t.navigation,b.navigationHeadingTagName=t.navigationHeadingTagName,b.full=t.viewType==="nav-left-full-width"),b});function f(){t.requiresSignature?i.value=!0:(s.value=!0,Innoclapps.request().post(`/d/${t.uuid}/accept`).then(()=>window.location.href=`${t.publicUrl}?accepted=1`).finally(()=>s.value=!1))}function v(){u.post(`/d/${t.uuid}/sign`).then(()=>window.location.href=`${t.publicUrl}?signed=1`)}function y(){a.value=!1,r.value=!0,Innoclapps.request().post(`/d/${t.uuid}/validate`,{email:u.email}).then(({data:b})=>{typeof b=="object"?(n.value=b.name,o.value=!0):a.value=!0}).finally(()=>r.value=!1)}return(b,w)=>{const k=d("IButton"),x=d("IAlertBody"),I=d("IAlert"),C=d("IFormInput"),S=d("IFormError"),T=d("IFormGroup"),E=d("IText"),$=d("IModal"),F=Ve("t");return g(),D("div",_Te,[(g(),A(Rt(c.value),en(un(m.value)),{actions:p(()=>[l(k,{class:"shrink-0",icon:"DocumentDownload",href:e.publicUrl+"/pdf?output=download"},{default:p(()=>[ne(_("span",ITe,null,512),[[F,"documents::document.download_pdf"]])]),_:1},8,["href"]),e.status!=="accepted"?(g(),A(k,{key:0,class:"shrink-0",variant:"success",icon:e.requiresSignature?"":"Check",disabled:s.value,loading:s.value,onClick:f},{default:p(()=>[e.requiresSignature?(g(),D("svg",wTe,kTe)):K("",!0),le(" "+Z(e.requiresSignature?b.$t("documents::document.sign"):b.$t("documents::document.accept")),1)]),_:1},8,["icon","disabled","loading"])):K("",!0)]),content:p(()=>[b.$route.query.accepted?(g(),A(I,{key:0,class:"mb-6",variant:"success"},{default:p(()=>[l(x,null,{default:p(()=>[_("div",{innerHTML:e.acceptThankYouMessage},null,8,$Te)]),_:1})]),_:1})):b.$route.query.signed?(g(),A(I,{key:1,class:"mb-6",variant:"success"},{default:p(()=>[l(x,null,{default:p(()=>[_("div",{innerHTML:e.signThankYouMessage},null,8,CTe)]),_:1})]),_:1})):K("",!0),_("div",{class:"contentbuilder prose prose-sm prose-neutral relative max-w-none",innerHTML:e.content},null,8,STe)]),_:1},16)),l($,{id:"signModal",visible:i.value,"onUpdate:visible":w[3]||(w[3]=R=>i.value=R),size:"sm","ok-text":"Sign","ok-disabled":h(u).busy,title:o.value?b.$t("documents::document.sign"):b.$t("documents::document.signers.confirm_email"),"hide-footer":!o.value,"static-backdrop":"",form:"",onSubmit:v},{default:p(()=>[ne(_("div",TTe,[l(C,{modelValue:h(u).email,"onUpdate:modelValue":w[0]||(w[0]=R=>h(u).email=R),type:"email",class:"pr-28",placeholder:b.$t("documents::document.signers.enter_email"),onKeyup:fo(y,["enter"])},null,8,["modelValue","placeholder"]),_("div",ETe,[ne(l(k,{class:"absolute right-1.5 top-1.5 sm:top-1",loading:r.value,disabled:r.value,text:b.$t("core::app.confirm"),small:"",basic:"",onClick:y},null,8,["loading","disabled","text"]),[[pe,h(u).email]])])],512),[[pe,!o.value]]),ne(l(T,{"label-for":"emailAddress",label:b.$t("documents::document.signers.signer_email")},{default:p(()=>[l(C,{id:"emailAddress",modelValue:h(u).email,"onUpdate:modelValue":w[1]||(w[1]=R=>h(u).email=R),type:"email",disabled:!0,placeholder:b.$t("documents::document.signers.enter_email")},null,8,["modelValue","placeholder"]),l(S,{error:h(u).getError("email")},null,8,["error"])]),_:1},8,["label"]),[[pe,o.value]]),a.value?(g(),A(I,{key:0,variant:"warning",class:"mt-3"},{default:p(()=>[l(x,null,{default:p(()=>[le(Z(b.$t("documents::document.signature.verification_failed")),1)]),_:1})]),_:1})):K("",!0),ne(l(T,{"label-for":"signature",label:b.$t("documents::document.signature.accept_name")},{default:p(()=>[l(C,{id:"signature",modelValue:h(u).signature,"onUpdate:modelValue":w[2]||(w[2]=R=>h(u).signature=R),class:"font-signature text-[1.3rem] sm:text-[1.2rem]"},null,8,["modelValue"]),l(S,{error:h(u).getError("signature")},null,8,["error"])]),_:1},8,["label"]),[[pe,o.value]]),ne(l(E,{class:"mb-3",text:e.signatureBoundText.replace("{{ signerName }}",n.value).replace("{{signerName}}",e.signatureBoundText)},null,8,["text"]),[[pe,o.value]])]),_:1},8,["visible","ok-disabled","title","hide-footer"])])}}},ATe={class:"flex w-full items-center overflow-x-auto"},RTe={class:"flex space-x-2"},O1={__name:"DocumentsTableStatusPicker",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue"),{scriptConfig:n}=Ne(),{hasAnyBuilderRules:o,rulesAreValid:a,findRule:r}=la("documents"),s=n("documents.statuses"),i=O(()=>!!r("status")),u=O(()=>i.value||!a.value);return $e(o,c=>{c&&a.value&&(t.value=void 0)}),$e(a,c=>{o.value&&c&&(t.value=void 0)}),(c,m)=>{const f=d("ILink"),v=d("Icon"),y=Ve("i-tooltip");return g(),D("div",ATe,[ne(l(f,{class:"mr-3 border-r-2 border-neutral-200 pr-3 dark:border-neutral-500/30",text:c.$t("core::app.all"),onClick:m[0]||(m[0]=b=>t.value=null)},null,8,["text"]),[[pe,t.value&&!u.value]]),ne((g(),D("div",RTe,[(g(!0),D(fe,null,Ie(h(s),b=>(g(),A(uk,{key:b.name,class:be(["inline-flex items-center justify-center gap-x-1.5 rounded-lg bg-[rgba(var(--color-custom-100))] px-3 py-1.5 text-base/5 text-[rgba(var(--color-custom-700))] dark:bg-[rgba(var(--color-custom-400),0.1)] dark:text-[rgba(var(--color-custom-300))] sm:text-sm/5",b.name===t.value?"ring-1 ring-inset ring-[rgba(var(--color-custom-600),0.1)] dark:ring-[rgba(var(--color-custom-400),0.2)]":"",u.value?"pointer-events-none opacity-70":"cursor-pointer"]),color:b.color,onClick:w=>t.value=b.name},{default:p(()=>[l(v,{class:"size-4",icon:b.icon},null,8,["icon"]),le(" "+Z(b.display_name),1)]),_:2},1032,["class","color","onClick"]))),128))])),[[y,i.value?c.$t("documents::document.filters.status_disabled"):"",void 0,{bottom:!0,light:!0}]])])}}},DTe={class:"mb-2 block lg:hidden"},OTe={class:"hidden lg:ml-6 lg:block"},BTe=Object.assign({inheritAttrs:!1},{__name:"DocumentsTable",props:{tableId:{required:!0,type:String},initialize:{default:!0,type:Boolean}},emits:["deleted"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("documents"),r=_t(),{t:s}=Ee(),{scriptConfig:i}=Ne(),{reloadTable:u}=eo(n.tableId),{deleteResource:c,cloneResource:m}=Dt(a),f=i("documents.statuses"),v=M(null),y=O(()=>({status:v.value}));async function b(k){const x=await m(k);u(),r.push({name:"edit-document",params:{id:x.id}})}async function w(k){await c(k),o("deleted",k),u(),Innoclapps.success(s("core::resource.deleted"))}return(k,x)=>{const I=d("ITextDark"),C=d("IBadge"),S=d("ITableRowAction"),T=d("ITableRowActions"),E=d("ResourceTable");return g(),D(fe,null,[_("div",DTe,[l(O1,{modelValue:v.value,"onUpdate:modelValue":x[0]||(x[0]=$=>v.value=$)},null,8,["modelValue"])]),e.initialize?(g(),A(E,Ue({key:0,"resource-name":h(a),"table-id":e.tableId,"data-request-query-string":y.value,"empty-state":{to:{name:"create-document"},title:k.$t("documents::document.empty_state.title"),buttonText:k.$t("documents::document.create"),description:k.$t("documents::document.empty_state.description")}},k.$attrs),{header:p(({total:$})=>[_("div",OTe,[l(O1,{modelValue:v.value,"onUpdate:modelValue":x[1]||(x[1]=F=>v.value=F)},null,8,["modelValue"])]),l(I,{class:"font-medium",text:k.$t("documents::document.count.all",{count:$})},null,8,["text"])]),status:p(({row:$})=>[l(C,{color:h(f)[$.status].color,text:h(f)[$.status].display_name},null,8,["color","text"])]),actions:p(({row:$})=>[l(T,null,{default:p(()=>[l(S,{icon:"Eye",href:$.public_url,text:k.$t("documents::document.view")},null,8,["href","text"]),$.authorizations.update&&$.status==="draft"?(g(),A(S,{key:0,icon:"Mail",to:{name:"edit-document",params:{id:$.id},query:{section:"send"}},text:k.$t("documents::document.send.send")},null,8,["to","text"])):K("",!0),l(S,{icon:"Duplicate",text:k.$t("core::app.clone"),onClick:F=>b($.id)},null,8,["text","onClick"]),$.authorizations.delete?(g(),A(S,{key:1,icon:"Trash",text:k.$t("core::app.delete"),onClick:F=>k.$confirm(()=>w($.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),_:1},16,["resource-name","table-id","data-request-query-string","empty-state"])):K("",!0)],64)}}}),B1="documents",NTe={__name:"DocumentsIndex",setup(e){const t=Innoclapps.resourceName("documents"),n=It(),{reloadTable:o,customizeTable:a}=eo(B1),r=M(n.meta.initialize),s=M(!0),i=O(()=>r.value&&!s.value);function u(){At("refresh-cards"),o()}return Va((c,m,f)=>{r.value=!0,f()}),(c,m)=>{const f=d("NavbarSeparator"),v=d("IDropdownItem"),y=d("IDropdownMinimal"),b=d("IButton"),w=d("NavbarItems"),k=d("RouterView"),x=d("MainLayout");return g(),A(x,null,{actions:p(()=>[l(f,{class:"hidden lg:block"}),l(w,null,{default:p(()=>[l(y,{placement:s.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(v,{icon:"Bars3CenterLeft",to:{name:"document-templates-index"},text:c.$t("documents::document.template.manage")},null,8,["text"]),l(v,{icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:h(t)}},text:c.$t("core::app.soft_deletes.trashed")},null,8,["to","text"]),l(v,{icon:"Cog",text:c.$t("core::table.list_settings"),onClick:h(a)},null,8,["text","onClick"])]),_:1},8,["placement"]),ne(l(b,{variant:"primary",icon:"PlusSolid",to:{name:"create-document"},text:c.$t("documents::document.create")},null,8,["text"]),[[pe,!s.value]])]),_:1})]),default:p(()=>[i.value?(g(),A(Sd,{key:0,class:"mb-6","resource-name":h(t)},null,8,["resource-name"])):K("",!0),l(BTe,{"table-id":B1,initialize:r.value,onLoaded:m[0]||(m[0]=I=>s.value=I.isPreEmpty),onDeleted:u},null,8,["initialize"]),l(k,{name:"create",onCreated:u,onSent:u}),l(k,{name:"edit","exit-using":()=>c.$router.push({name:"document-index"}),onChanged:u,onDeleted:u,onCloned:u},null,8,["exit-using"])]),_:1})}}},PTe={class:"absolute inset-0 z-40 h-full max-h-full w-full bg-white dark:bg-neutral-900"},MTe={class:"sticky top-0 z-50 border-b border-neutral-200 bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-800"},VTe={class:"container mx-auto"},LTe={class:"mx-auto max-w-6xl"},qTe={class:"px-3 py-4 sm:-mx-1.5"},UTe={class:"flex items-center justify-between space-x-4 sm:space-x-0"},jTe={class:"h-full min-h-full overflow-y-auto"},zTe={class:"px-4 py-6 sm:px-0"},HTe={class:"container mx-auto max-w-6xl"},WTe={class:"flex"},GTe={class:"prose prose-sm prose-neutral relative max-w-none dark:prose-invert",style:{"padding-bottom":"200px"}},KTe={__name:"DocumentsTemplatesCreate",emits:["created"],setup(e,{emit:t}){const n=t,o=_t(),{t:a}=Ee(),{scriptConfig:r}=Ne(),s=r("documents.placeholders"),i=M(null),{form:u}=Ze({name:"Template name",is_shared:!1,content:"",view_type:null});function c(){m(!1).then(()=>o.back())}async function m(f=!0){u.busy=!0,await i.value.saveBase64Images(),await ze();let v=await u.post("/document-templates").catch(y=>(y.isValidationError()&&Innoclapps.error(a("core::app.form_validation_failed"),3e3),Promise.reject(y)));return n("created",v),f&&o.replace({name:"edit-document-template",params:{id:v.id}}),v}return Pa(()=>{document.body.classList.add("overflow-y-hidden")}),En(()=>{document.body.classList.remove("overflow-y-hidden")}),(f,v)=>{const y=d("ILink"),b=d("IDropdownItem"),w=d("IDropdownMenu"),k=d("IExtendedDropdown"),x=d("IFormInput"),I=d("IFormError"),C=d("IFormGroup"),S=d("IFormCheckbox"),T=d("IFormCheckboxLabel"),E=d("IFormCheckboxField"),$=d("IFormLabel"),F=d("IText"),R=d("IFormText");return g(),A(ta,{to:"body"},[_("div",PTe,[_("div",MTe,[_("div",VTe,[_("div",LTe,[_("div",qTe,[_("div",UTe,[l(y,{class:"sm:!text-base/6",text:f.$t("core::app.exit"),onClick:f.$router.back},null,8,["text","onClick"]),l(k,{placement:"bottom-end",disabled:h(u).busy,loading:h(u).busy,text:f.$t("core::app.save"),onClick:m},{default:p(()=>[l(w,null,{default:p(()=>[l(b,{text:f.$t("core::app.save_and_exit"),onClick:c},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])])])])])]),_("div",jTe,[_("div",zTe,[_("div",HTe,[l(C,{"label-for":"templateName",label:f.$t("documents::document.template.name"),required:""},{default:p(()=>[l(x,{id:"templateName",modelValue:h(u).name,"onUpdate:modelValue":v[0]||(v[0]=B=>h(u).name=B)},null,8,["modelValue"]),l(I,{error:h(u).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(C,null,{default:p(()=>[l(E,null,{default:p(()=>[l(S,{checked:h(u).is_shared,"onUpdate:checked":v[1]||(v[1]=B=>h(u).is_shared=B)},null,8,["checked"]),l(T,{text:f.$t("documents::document.template.share_with_team_members")},null,8,["text"])]),_:1}),l(I,{error:h(u).getError("is_shared")},null,8,["error"])]),_:1}),l(C,{class:"mt-6"},{default:p(()=>[_("div",WTe,[l($,{as:"p",label:f.$t("documents::document.view_type.html_view_type")},null,8,["label"]),l(F,{class:"ml-1 self-end",text:f.$t("core::app.optional")},null,8,["text"])]),l(R,{class:"-mt-px mb-3",text:f.$t("documents::document.view_type.template_info")},null,8,["text"]),l(Zv,{modelValue:h(u).view_type,"onUpdate:modelValue":v[2]||(v[2]=B=>h(u).view_type=B)},null,8,["modelValue"]),l(I,{error:h(u).getError("view_type")},null,8,["error"])]),_:1}),l(C,{class:"mt-6"},{default:p(()=>[_("div",GTe,[l(Kv,{ref_key:"builderRef",ref:i,modelValue:h(u).content,"onUpdate:modelValue":v[3]||(v[3]=B=>h(u).content=B),placeholders:h(s)},null,8,["modelValue","placeholders"]),l(I,{error:h(u).getError("content")},null,8,["error"])])]),_:1})])])])])])}}},ZTe={class:"absolute inset-0 z-40 h-full max-h-full w-full bg-white dark:bg-neutral-900"},YTe={class:"sticky top-0 z-50 border-b border-neutral-200 bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-800"},XTe={class:"container mx-auto"},QTe={class:"mx-auto max-w-6xl"},JTe={class:"px-3 py-4 sm:-mx-1"},e4e={class:"flex items-center justify-between space-x-4 sm:space-x-0"},t4e={class:"h-full min-h-full overflow-y-auto"},n4e={class:"px-4 py-6 sm:px-0"},o4e={class:"container mx-auto max-w-6xl"},a4e={class:"flex"},r4e={class:"ml-1 self-end text-xs text-neutral-600 dark:text-neutral-200"},l4e={class:"prose prose-sm prose-neutral relative max-w-none dark:prose-invert",style:{"padding-bottom":"200px"}},s4e={__name:"DocumentsTemplatesEdit",emits:["updated"],setup(e,{emit:t}){const n=t,o=_t(),a=It(),{t:r}=Ee(),{scriptConfig:s}=Ne(),i=M(null),u=s("documents.placeholders"),c=M(!0),m=M(null),{form:f}=Ze({name:null,is_shared:!1,content:"",view_type:null});function v(k){Innoclapps.request(`/document-templates/${k}`).then(({data:x})=>{m.value=x,y(x),dc(x.google_fonts)}).finally(()=>c.value=!1)}function y(k){f.set({name:k.name,is_shared:k.is_shared,content:k.content,view_type:k.view_type})}function b(){w().then(()=>o.back())}async function w(){f.busy=!0,await i.value.saveBase64Images(),await ze();let k=await f.put(`/document-templates/${m.value.id}`).catch(x=>(x.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(x)));return dc(k.google_fonts),y(k),n("updated",k),k}return Pa(()=>{v(a.params.id),document.body.classList.add("overflow-y-hidden")}),En(()=>{document.body.classList.remove("overflow-y-hidden")}),(k,x)=>{const I=d("ILink"),C=d("IDropdownItem"),S=d("IDropdownMenu"),T=d("IExtendedDropdown"),E=d("IFormInput"),$=d("IFormError"),F=d("IFormGroup"),R=d("IFormCheckbox"),B=d("IFormCheckboxLabel"),V=d("IFormCheckboxField"),P=d("IFormLabel"),z=d("IText"),H=d("IOverlay"),j=Ve("t");return g(),A(ta,{to:"body"},[_("div",ZTe,[_("div",YTe,[_("div",XTe,[_("div",QTe,[_("div",JTe,[_("div",e4e,[l(I,{class:"sm:!text-base/6",text:k.$t("core::app.exit"),onClick:k.$router.back},null,8,["text","onClick"]),l(T,{placement:"bottom-end",disabled:h(f).busy,loading:h(f).busy,text:k.$t("core::app.save"),onClick:w},{default:p(()=>[l(S,null,{default:p(()=>[l(C,{text:k.$t("core::app.save_and_exit"),onClick:b},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])])])])])]),_("div",t4e,[l(H,{class:"h-full",show:c.value},{default:p(()=>[_("div",n4e,[_("div",o4e,[l(F,{"label-for":"templateName",label:k.$t("documents::document.template.name"),required:""},{default:p(()=>[l(E,{id:"templateName",modelValue:h(f).name,"onUpdate:modelValue":x[0]||(x[0]=N=>h(f).name=N)},null,8,["modelValue"]),l($,{error:h(f).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(F,null,{default:p(()=>[l(V,null,{default:p(()=>[l(R,{checked:h(f).is_shared,"onUpdate:checked":x[1]||(x[1]=N=>h(f).is_shared=N)},null,8,["checked"]),l(B,{text:k.$t("documents::document.template.share_with_team_members")},null,8,["text"])]),_:1}),l($,{error:h(f).getError("is_shared")},null,8,["error"])]),_:1}),l(F,{class:"mt-6"},{default:p(()=>[_("div",a4e,[l(P,{as:"p",label:k.$t("documents::document.view_type.html_view_type")},null,8,["label"]),ne(_("span",r4e,null,512),[[j,"core::app.optional"]])]),l(z,{class:"-mt-px mb-3",text:k.$t("documents::document.view_type.template_info")},null,8,["text"]),l(Zv,{modelValue:h(f).view_type,"onUpdate:modelValue":x[2]||(x[2]=N=>h(f).view_type=N)},null,8,["modelValue"]),l($,{error:h(f).getError("view_type")},null,8,["error"])]),_:1}),l(F,{class:"mt-6"},{default:p(()=>[_("div",l4e,[l(Kv,{ref_key:"builderRef",ref:i,modelValue:h(f).content,"onUpdate:modelValue":x[3]||(x[3]=N=>h(f).content=N),placeholders:h(u)},null,8,["modelValue","placeholders"]),l($,{error:h(f).getError("content")},null,8,["error"])])]),_:1})])])]),_:1},8,["show"])])])])}}},N1="document-templates",i4e={__name:"DocumentsTemplatesIndex",setup(e){const t=Innoclapps.resourceName("document-templates"),{t:n}=Ee(),o=_t(),{reloadTable:a}=eo(N1),{deleteResource:r,cloneResource:s}=Dt(t),i=M(!0);async function u(m){const f=await s(m);a(),o.push({name:"edit-document-template",params:{id:f.id}})}async function c(m){await r(m),a(),Innoclapps.success(n("documents::document.template.deleted"))}return(m,f)=>{const v=d("NavbarSeparator"),y=d("IButton"),b=d("ITableRowAction"),w=d("ITableRowActions"),k=d("ResourceTable"),x=d("RouterView"),I=d("MainLayout");return g(),A(I,null,{actions:p(()=>[l(v,{class:"hidden lg:block"}),ne(l(y,{variant:"primary",icon:"PlusSolid",to:{name:"create-document-template"},text:m.$t("documents::document.template.create")},null,8,["text"]),[[pe,!i.value]])]),default:p(()=>[l(k,{"resource-name":h(t),"table-id":N1,"empty-state":{to:{name:"create-document-template"},title:m.$t("documents::document.template.empty_state.title"),buttonText:m.$t("documents::document.template.create"),description:m.$t("documents::document.template.empty_state.description")},onLoaded:f[0]||(f[0]=C=>i.value=C.isPreEmpty)},{actions:p(({row:C})=>[l(w,null,{default:p(()=>[C.authorizations.update?(g(),A(b,{key:0,icon:"PencilAlt",to:{name:"edit-document-template",params:{id:C.id}},text:m.$t("core::app.edit")},null,8,["to","text"])):K("",!0),l(b,{icon:"Duplicate",text:m.$t("core::app.clone"),onClick:S=>u(C.id)},null,8,["text","onClick"]),C.authorizations.delete?(g(),A(b,{key:1,icon:"Trash",text:m.$t("core::app.delete"),onClick:S=>m.$confirm(()=>c(C.id))},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),_:1},8,["resource-name","empty-state"]),l(x,{name:"create",onCreated:h(a)},null,8,["onCreated"]),l(x,{name:"edit",onUpdated:h(a)},null,8,["onUpdated"])]),_:1})}}},u4e=[{path:"/documents",name:"document-index",component:NTe,meta:{title:at("documents::document.documents")},beforeEnter:(e,t)=>{e.meta.initialize=e.name==="document-index"},children:[{path:"create",name:"create-document",components:{create:u5},meta:{title:at("documents::document.create")}},{path:":id",name:"view-document",components:{edit:mc}},{path:":id/edit",name:"edit-document",components:{edit:mc}}]},{path:"/document-templates",name:"document-templates-index",component:i4e,meta:{title:at("documents::document.template.templates")},children:[{path:"create",name:"create-document-template",components:{create:KTe},meta:{title:at("documents::document.template.create")}},{path:":id/edit",name:"edit-document-template",components:{edit:s4e}}]}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("DocumentPublicView",FTe),e.component("DocumentsTab",C8e),e.component("DocumentsTabPanel",F3e),e.component("RecordTabTimelineDocument",A3e),u4e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"documents",name:"document-settings",component:N3e,meta:{title:at("documents::document.documents")}})});function Bu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bu=function(t){return typeof t}:Bu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function c4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P1(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d4e(e,t,n){return t&&P1(e.prototype,t),n&&P1(e,n),e}function M1(e){return m4e(e)||f4e(e)||p4e(e)||v4e()}function m4e(e){if(Array.isArray(e))return Wf(e)}function f4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function p4e(e,t){if(e){if(typeof e=="string")return Wf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wf(e,t)}}function Wf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function v4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h4e(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function g4e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,r,s=function(u){for(var c=arguments.length,m=new Array(c>1?c-1:0),f=1;f<c;f++)m[f-1]=arguments[f];if(r=m,!(o&&u===a)){var v=n.leading;typeof v=="function"&&(v=v(u,a)),(!o||u!==a)&&v&&e.apply(void 0,[u].concat(M1(r))),a=u,clearTimeout(o),o=setTimeout(function(){e.apply(void 0,[u].concat(M1(r))),o=0},t)}};return s._clear=function(){clearTimeout(o),o=null},s}function d5(e,t){if(e===t)return!0;if(Bu(e)==="object"){for(var n in e)if(!d5(e[n],t[n]))return!1;return!0}return!1}var b4e=function(){function e(t,n,o){c4e(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,o)}return d4e(e,[{key:"createObserver",value:function(n,o){var a=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=h4e(n),this.callback=function(i,u){a.options.callback(i,u),i&&a.options.once&&(a.frozen=!0,a.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},s=r.leading;this.callback=g4e(this.callback,this.options.throttle,{leading:function(u){return s==="both"||s==="visible"&&u||s==="hidden"&&!u}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(i){var u=i[0];if(i.length>1){var c=i.find(function(f){return f.isIntersecting});c&&(u=c)}if(a.callback){var m=u.isIntersecting&&u.intersectionRatio>=a.threshold;if(m===a.oldResult)return;a.oldResult=m,a.callback(m,u)}},this.options.intersection),ze(function(){a.observer&&a.observer.observe(a.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function m5(e,t,n){var o=t.value;if(o)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new b4e(e,o,n);e._vue_visibilityState=a}}function y4e(e,t,n){var o=t.value,a=t.oldValue;if(!d5(o,a)){var r=e._vue_visibilityState;if(!o){f5(e);return}r?r.createObserver(o,n):m5(e,{value:o},n)}}function f5(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var _4e={beforeMount:m5,updated:y4e,unmounted:f5};function Yv(){const{findTagsByType:e}=_k(),{scriptConfig:t}=Ne(),n=t("mail.tags_type");async function o(r,s){let{data:i}=await Innoclapps.request().post(`/emails/${r}/tags`,{tags:s});return i}const a=O(()=>e(n));return{syncTags:o,availableTags:a,TAGS_TYPE:n}}const I4e=["textContent"],Xv={__name:"MessageAddress",props:{address:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=Ve("i-tooltip");return e.address.name?ne((g(),D("span",{key:0,class:be(["text-neutral-700 dark:text-neutral-300",{"border-b border-dashed border-neutral-400":e.address.address}])},[le(Z(e.address.name),1)],2)),[[o,e.address.address]]):(g(),D("span",{key:1,class:"text-neutral-700 dark:text-neutral-300",textContent:Z(e.address.address)},null,8,I4e))}}},w4e={class:"font-semibold"},x4e=["textContent"],Do={__name:"MessageAddresses",props:{showWhenEmpty:{default:!0,type:Boolean},label:String,addresses:{}},setup(e){const t=e,n=O(()=>qn(t.addresses?t.addresses:[])),o=O(()=>!t.addresses||n.value.length>0),a=O(()=>t.showWhenEmpty?!0:!(!o.value&&t.showWhenEmpty===!1));return(r,s)=>{const i=d("ITextDark");return ne((g(),D("div",null,[l(i,{class:"space-x-1"},{default:p(()=>[_("span",w4e,Z(e.label)+":",1),(g(!0),D(fe,null,Ie(n.value,u=>(g(),D("span",{key:u.address},[l(Xv,{address:u},null,8,["address"]),o.value?K("",!0):(g(),D("span",{key:0,textContent:Z("("+r.$t("mailclient::inbox.unknown_address")+")")},null,8,x4e))]))),128))]),_:1})],512)),[[pe,a.value]])}}},k4e=["href","target"],$4e={role:"list",class:"divide-y divide-neutral-100 rounded-lg border border-neutral-200 bg-white dark:divide-neutral-800 dark:border-neutral-800 dark:bg-neutral-900"},C4e={class:"flex w-0 flex-1 items-center"},S4e={class:"ml-4 flex min-w-0 flex-1 gap-2"},T4e={class:"truncate font-medium"},E4e=["textContent"],F4e={class:"ml-4 shrink-0"},p5={__name:"MessageAttachments",props:{attachments:{required:!0,type:Array}},setup(e){const t=e,n=M(null),o=O(()=>t.attachments.filter(i=>i.aggregate_type==="image")),a=O(()=>o.value.map(i=>i.preview_url)),r=O(()=>o.value[n.value]);function s(i){return t.attachments.findIndex(u=>u.preview_url===i)}return(i,u)=>{const c=d("Icon"),m=d("ILink"),f=d("ITextBlockDark");return g(),D(fe,null,[l(Mv,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=v=>n.value=v),urls:a.value},{toolbar:p(()=>[(g(),D(fe,null,Ie(["preview_url","download_url"],v=>_("a",{key:v,tabindex:"-1",rel:"noopener noreferrer",class:"toolbar-btn",href:r.value[v],target:v==="preview_url"?"_blank":void 0},[l(c,{class:"size-5",icon:v==="preview_url"?"Eye":"DownloadSolid"},null,8,["icon"])],8,k4e)),64))]),_:1},8,["modelValue","urls"]),l(f,{as:"dd"},{default:p(()=>[_("ul",$4e,[(g(!0),D(fe,null,Ie(e.attachments,v=>(g(),D("li",{key:v.id,class:"flex items-center justify-between py-4 pl-4 pr-5"},[_("div",C4e,[l(c,{icon:"PaperClip",class:"size-5 shrink-0 text-neutral-400"}),_("div",S4e,[_("span",T4e,[v.aggregate_type!=="image"?(g(),A(m,{key:0,class:"font-medium",tabindex:"0",href:v.view_url,text:v.file_name,basic:""},null,8,["href","text"])):(g(),A(m,{key:1,class:"font-medium",tabindex:"0",href:v.view_path,text:v.file_name,basic:"",onClick:ot(y=>n.value=s(v.preview_url),["prevent"])},null,8,["href","text","onClick"]))]),_("span",{class:"shrink-0 text-neutral-400",textContent:Z(h(Ay)(v.size))},null,8,E4e)])]),_("div",F4e,[l(m,{class:"font-medium",href:v.download_url,text:i.$t("core::app.download"),download:""},null,8,["href","text"])])]))),128))])]),_:1})],64)}}},A4e={class:"mt-5"},v5={__name:"MessageHiddenText",props:{text:{type:String,required:!0}},setup(e){const t=M(!1);return(n,o)=>{const a=d("Icon"),r=d("IButton"),s=Ve("i-tooltip");return ne((g(),D("div",null,[ne((g(),A(r,{class:"px-3 py-0",small:"",onClick:o[0]||(o[0]=i=>t.value=!t.value)},{default:p(()=>[l(a,{icon:"DotsHorizontal"})]),_:1})),[[s,n.$t("mailclient::mail.trimmed_content")]]),ne(_("div",A4e,[l(Ki,{html:e.text},null,8,["html"])],512),[[pe,t.value]])],512)),[[pe,e.text]])}}};function Qv(){const{currentUser:e}=Ne(),t=O(()=>e.value.mail_signature?e.value.mail_signature:"");function n(o=""){return o+t.value}return{addSignature:n,signature:t}}function h5(e,t,n){const{t:o}=Ee(),{addSignature:a}=Qv(),{createFollowUpActivity:r}=Gi(),{placeholders:s,allPlaceholders:i,allPlaceholdersInterpolations:u,makeParsePlaceholdersRequest:c}=$k(),m=M(!1),f=M(!1),v=M(!1),y=M({}),b=M($o()),w=M([]),k=M(null),x=M(null),{form:I}=Ze({subject:null,message:"<p></p>"+a(),to:[],cc:null,bcc:null,associations:{},task_date:null,scheduled_at:null}),C=O(()=>{if(!I.message)return!1;let Q=document.createElement("template");if(Q.innerHTML=I.message.trim(),!Q.content.firstChild.hasChildNodes())return!1;const se=Q.content.firstChild.querySelectorAll("._placeholder");return se.length===0?!1:Array.from(se).filter(me=>me.value.trim()==="").length>0});function S(Q,se,me,xe,de){if(de||!xe)return!1;const he=se[0]===Q.id;if(me==="contacts"||me==="companies"){const X=I.to.filter(re=>re.resourceName===me)[0];return X?X.id===Q.id:he}return he}const T=O(()=>{const Q=[];return Object.keys(I.associations).forEach(se=>{if(I.associations[se].length===0)return;if(se==="contacts"||se==="companies"){const xe=I.to.filter(de=>de.resourceName===se)[0];xe?Q.push({name:se,id:xe.id}):Q.push({name:se,id:I.associations[se][0]})}else Q.push({name:se,id:I.associations[se][0]})}),Q}),E=O(()=>{if(!s.value||!x.value)return[];const Q=[];return u.value.forEach(se=>{const me=new RegExp(`${se[0]}\\s?(.*?)\\s?${se[1]}`).exec(x.value);me&&Q.push({interpolation_start:se[0],interpolation_end:se[1],tag:me[1].trim()})}),Q}),$=O(()=>{let Q=!1;return E.value.forEach(se=>ut(i.value,["tag",se.tag])?!0:(Q=!0,!1)),Q}),F=O(()=>{if(!x.value)return!0;let Q=!0;return i.value.concat(E.value).every(se=>x.value.indexOf(se.tag)>-1&&!new RegExp(`${se.interpolation_start}\\s?${se.tag}\\s?${se.interpolation_end}`).test(x.value)?(Q=!1,!1):!0),Q}),R=O(()=>E.value.length>0),B=O(()=>!!(I.errors.first("to.0.address")||I.errors.first("cc.0.address")||I.errors.first("bcc.0.address"))),V=O(()=>I.cc!==null),P=O(()=>I.bcc!==null);function z(){v.value=!0,j(I.message,"input-fields").then(Q=>{I.message=Q,v.value=!1})}function H(){!R.value||!F.value||j(x.value,"interpolation").then(Q=>k.value=Q)}async function j(Q,se){if(Q)return T.value.length===0?Q:c(T.value,Q,se)}function N(Q){n({activities:[Q],incomplete_activities_for_user_count:t.incomplete_activities_for_user_count+1})}async function L(Q){m.value=!0,I.subject=k.value||x.value,I.fill("attachments_draft_id",b),e&&(I.fill("via_resource",e),I.fill("via_resource_id",pt(t).id));try{let se=await Innoclapps.request().post(Q,I.data());if(se.status===202?Innoclapps.info(o("mailclient::mail.message_queued_for_sending")):se.status===201?(Innoclapps.info(o("mailclient::schedule.message_scheduled")),At("email-scheduled")):(Innoclapps.success(o("mailclient::inbox.message_sent")),At("email-sent",se.data)),I.task_date&&e){let me=await r(I.task_date,e,pt(t).id,pt(t).display_name);N(me)}return I.reset(),se}catch(se){throw new Error(se)}finally{m.value=!1}}function U(){I.cc=[]}function ee(){I.bcc=[]}function G(Q){w.value.push(Q)}function W(Q){Innoclapps.request().delete(`/media/pending/${Q.pending_data.id}`).then(()=>{let se=Et(w.value,["id",Q.id]);w.value.splice(se,1)})}function ae(Q){ie(Q),z(),H()}function ue(Q){ce(Q),z(),H()}function ce(Q){if(!Q.resourceName||!y.value[Q.resourceName]||e===Q.resourceName&&pt(t).id===Q.id)return;let se=Et(y.value[Q.resourceName],["id",Q.id]),me=I.associations[Q.resourceName].findIndex(xe=>xe===Q.id);se!==-1&&y.value[Q.resourceName].splice(se,1),me!==-1&&I.associations[Q.resourceName].splice(me,1)}function oe(Q,se){y.value[se]||(y.value[se]=[]),ut(y.value[se],["id",Q.id])||y.value[se].push(Q),Object.hasOwn(I.associations,se)||(I.associations[se]=[]),I.associations[se].find(me=>me==Q.id)||I.associations[se].push(Q.id)}function ie(Q){Q.filter(se=>!!se.resourceName).forEach(se=>{se.disabled=!0,oe({...se,display_name:se.name},se.resourceName)})}return ma(x,()=>{H()},{debounce:600}),{form:I,sending:m,customAssociationsValue:y,attachments:w,attachmentsDraftId:b,placeholders:s,resourcesForPlaceholders:T,parsedSubject:k,hasEmptyPlaceholders:C,subject:x,hasInvalidAddresses:B,schedule:f,wantsCc:V,wantsBcc:P,sendRequest:L,subjectContainsPlaceholders:R,messagePlaceholdersBeingParsed:v,parsePlaceholdersForMessage:z,parsePlaceholdersForSubject:H,subjectPlaceholdersSyntaxIsValid:F,showWillUsePlaceholdersIconToAssociateResourceRecord:S,hasInvalidSubjectPlaceholders:$,handleAttachmentUploaded:G,destroyPendingAttachment:W,associateSelectedRecipients:ie,dissociateRemovedRecipients:ce,associateMessageRecord:oe,handleRecipientSelectedEvent:ae,handleToRecipientRemovedEvent:ue,setWantsBCC:ee,setWantsCC:U}}const Jv=rs(()=>{const{setLoading:e,isLoading:t}=An(),n=M([]),o=O(()=>Vt(n.value,"name"));f();function a(v){return n.value.findIndex(y=>y.id==v)}function r(v){return n.value[a(v)]}function s(v){n.value.splice(a(v),1)}function i(v){n.value.push(v)}function u(v,y){n.value[a(v)]=y}async function c(v,y){const{data:b}=await Innoclapps.request("/mails/templates/"+v,y);return b}async function m(v){await Innoclapps.request().delete(`/mails/templates/${v}`),s(v)}function f(v){e(!0),Innoclapps.request("/mails/templates",v).then(({data:y})=>n.value=y).finally(()=>e(!1))}return{mailTemplates:n,templatesByName:o,templatesAreBeingFetched:t,addTemplate:i,removeTemplate:s,setTemplate:u,findTemplateById:r,fetchMailTemplates:f,fetchTemplate:c,deleteTemplate:m}}),g5={__name:"PredefinedMailTemplatesForm",props:{isShared:{required:!0,type:Boolean},body:{required:!0,type:String},subject:{required:!0,type:String},name:{required:!0,type:String},form:{required:!0,type:Object}},emits:["update:isShared","update:body","update:subject","update:name"],setup(e){const t=M(!1),{placeholders:n}=$k();return(o,a)=>{const r=d("IFormInput"),s=d("IFormError"),i=d("IFormGroup"),u=d("IFormCheckbox"),c=d("IFormCheckboxLabel"),m=d("IFormCheckboxField");return g(),D("form",{onSubmit:a[7]||(a[7]=ot(()=>{},["prevent"]))},[l(i,{"label-for":"name",label:o.$t("mailclient::mail.templates.name"),required:""},{default:p(()=>[l(r,{"model-value":e.name,"onUpdate:modelValue":a[0]||(a[0]=f=>o.$emit("update:name",f))},null,8,["model-value"]),l(s,{error:e.form.getError("name")},null,8,["error"])]),_:1},8,["label"]),l(i,{"label-for":"subject",label:o.$t("mailclient::mail.templates.subject"),required:""},{default:p(()=>[l(r,{"model-value":e.subject,class:be({"border-dashed !border-neutral-400":t.value}),"onUpdate:modelValue":a[1]||(a[1]=f=>o.$emit("update:subject",f)),onDragover:a[2]||(a[2]=f=>t.value=!0),onDragleave:a[3]||(a[3]=f=>t.value=!1),onDrop:a[4]||(a[4]=f=>t.value=!1)},null,8,["model-value","class"]),l(s,{error:e.form.getError("subject")},null,8,["error"])]),_:1},8,["label"]),l(i,{"label-for":"body",label:o.$t("mailclient::mail.templates.body"),required:""},{default:p(()=>[l(ji,{"model-value":e.body,placeholders:h(n),"placeholders-disabled":!0,"onUpdate:modelValue":a[5]||(a[5]=f=>o.$emit("update:body",f))},null,8,["model-value","placeholders"]),l(s,{error:e.form.getError("body")},null,8,["error"])]),_:1},8,["label"]),l(i,null,{default:p(()=>[l(m,null,{default:p(()=>[l(u,{checked:e.isShared,"onUpdate:checked":a[6]||(a[6]=f=>o.$emit("update:isShared",f))},null,8,["checked"]),l(c,{text:o.$t("mailclient::mail.templates.is_shared")},null,8,["text"])]),_:1}),l(s,{error:e.form.getError("is_shared")},null,8,["error"])]),_:1}),Se(o.$slots,"bottom")],32)}}},R4e={class:"space-x-2 pt-6 text-right sm:pt-8"},D4e={__name:"PredefinedMailTemplatesCreate",emits:["created","cancelRequested"],setup(e,{emit:t}){const n=t,{t:o}=Ee(),{addTemplate:a}=Jv(),{form:r}=Ze({name:"",body:"",subject:"",is_shared:!0});function s(){r.post("/mails/templates").then(i=>{a(i),n("created",i),Innoclapps.success(o("mailclient::mail.templates.created"))})}return(i,u)=>{const c=d("IButton");return g(),A(g5,{"is-shared":h(r).is_shared,"onUpdate:isShared":u[1]||(u[1]=m=>h(r).is_shared=m),body:h(r).body,"onUpdate:body":u[2]||(u[2]=m=>h(r).body=m),subject:h(r).subject,"onUpdate:subject":u[3]||(u[3]=m=>h(r).subject=m),name:h(r).name,"onUpdate:name":u[4]||(u[4]=m=>h(r).name=m),form:h(r)},{bottom:p(()=>[_("div",R4e,[l(c,{variant:"secondary",text:i.$t("core::app.cancel"),onClick:u[0]||(u[0]=m=>i.$emit("cancelRequested"))},null,8,["text"]),l(c,{type:"submit",variant:"primary",text:i.$t("core::app.create"),onClick:s},null,8,["text"])])]),_:1},8,["is-shared","body","subject","name","form"])}}},O4e={class:"space-x-2 pt-6 text-right sm:pt-8"},B4e={__name:"PredefinedMailTemplatesEdit",props:{templateId:{required:!0,type:Number}},emits:["updated","cancelRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),{setTemplate:r,findTemplateById:s}=Jv(),{form:i}=Ze();function u(){i.put(`/mails/templates/${n.templateId}`).then(m=>{r(m.id,m),o("updated",m),Innoclapps.success(a("mailclient::mail.templates.updated"))})}function c(){i.set(nk(s(n.templateId),["subject","body","name","is_shared"]))}return c(),(m,f)=>{const v=d("IButton");return h(i).keys().length?(g(),A(g5,{key:0,"is-shared":h(i).is_shared,"onUpdate:isShared":f[1]||(f[1]=y=>h(i).is_shared=y),body:h(i).body,"onUpdate:body":f[2]||(f[2]=y=>h(i).body=y),subject:h(i).subject,"onUpdate:subject":f[3]||(f[3]=y=>h(i).subject=y),name:h(i).name,"onUpdate:name":f[4]||(f[4]=y=>h(i).name=y),form:h(i)},{bottom:p(()=>[_("div",O4e,[l(v,{variant:"secondary",text:m.$t("core::app.cancel"),onClick:f[0]||(f[0]=y=>m.$emit("cancelRequested"))},null,8,["text"]),l(v,{type:"submit",variant:"primary",text:m.$t("core::app.save"),onClick:u},null,8,["text"])])]),_:1},8,["is-shared","body","subject","name","form"])):K("",!0)}}},N4e={class:"mb-3 text-right"},P4e={class:"flex"},M4e={class:"grow"},V4e={class:"flex items-center space-x-2"},b5={__name:"PredefinedMailTemplatesList",emits:["selected","updated","created","willEdit","willCreate"],setup(e,{emit:t}){const n=t,{t:o}=Ee(),{localizedDateTime:a}=rt(),{templatesByName:r,deleteTemplate:s}=Jv(),i=M(null),u=M(!1),c=O(()=>r.value.length>0),m=O(()=>i.value||u.value);function f(x){n("willEdit",x),i.value=x}function v(){u.value=!0,n("willCreate")}function y(x){u.value=!1,n("created",x)}function b(x){i.value=!1,n("updated",x)}async function w(x){await s(x),Innoclapps.success(o("mailclient::mail.templates.deleted"))}function k(x){n("selected",r.value[x])}return(x,I)=>{const C=d("IButton"),S=d("ITableHeader"),T=d("ITableRow"),E=d("ITableHead"),$=d("ILink"),F=d("ITextSmall"),R=d("IDropdownItem"),B=d("IDropdownMinimal"),V=d("ITableCell"),P=d("IText"),z=d("ITableBody"),H=d("ITable"),j=Ve("t");return g(),D("div",null,[ne(_("div",null,[_("div",N4e,[l(C,{variant:"primary",text:x.$t("mailclient::mail.templates.create"),onClick:v},null,8,["text"])]),l(H,{class:"[--gutter:theme(spacing.8)]",bleed:""},{default:p(()=>[l(E,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(T,null,{default:p(()=>[l(S,{width:"50%"},{default:p(()=>[le(Z(x.$t("mailclient.mail.templates.name")),1)]),_:1}),l(S,null,{default:p(()=>[le(Z(x.$t("core::app.created_by")),1)]),_:1}),l(S,null,{default:p(()=>[le(Z(x.$t("core::app.last_modified_at")),1)]),_:1})]),_:1})]),_:1}),l(z,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(r),(N,L)=>(g(),A(T,{key:N.id},{default:p(()=>[l(V,{width:"50%"},{default:p(()=>[_("div",P4e,[_("div",M4e,[l($,{onClick:U=>f(N.id)},{default:p(()=>[le(Z(N.name),1)]),_:2},1032,["onClick"]),l(F,{class:"-mt-1"},{default:p(()=>[le(Z(x.$t("mailclient::mail.templates.subject"))+": "+Z(N.subject),1)]),_:2},1024)]),_("div",V4e,[l(C,{variant:"secondary",text:x.$t("mailclient::mail.templates.select"),small:"",onClick:U=>k(L)},null,8,["text","onClick"]),N.authorizations.update||N.authorizations.delete?(g(),A(B,{key:0},{default:p(()=>[N.authorizations.update?(g(),A(R,{key:0,text:x.$t("core::app.edit"),onClick:U=>f(N.id)},null,8,["text","onClick"])):K("",!0),N.authorizations.delete?(g(),A(R,{key:1,text:x.$t("core::app.delete"),"confirm-text":x.$t("core::app.confirm"),confirmable:"",onConfirmed:U=>w(N.id)},null,8,["text","confirm-text","onConfirmed"])):K("",!0)]),_:2},1024)):K("",!0)])])]),_:2},1024),l(V,null,{default:p(()=>[le(Z(N.user.name),1)]),_:2},1024),l(V,null,{default:p(()=>[le(Z(h(a)(N.updated_at)),1)]),_:2},1024)]),_:2},1024))),128)),ne(l(T,null,{default:p(()=>[l(V,{class:"p-5 text-center",colspan:3},{default:p(()=>[ne(l(P,null,null,512),[[j,"core::table.empty"]])]),_:1})]),_:1},512),[[pe,!c.value]])]),_:1})]),_:1})],512),[[pe,!m.value]]),u.value?(g(),A(D4e,{key:0,onCancelRequested:I[0]||(I[0]=N=>u.value=!1),onCreated:y})):K("",!0),i.value?(g(),A(B4e,{key:1,"template-id":i.value,onUpdated:b,onCancelRequested:I[1]||(I[1]=N=>i.value=null)},null,8,["template-id"])):K("",!0)])}}};var y5={},L4e=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;y5.validate=function(e){if(!e||e.length>254)return!1;var t=L4e.test(e);if(!t)return!1;var n=e.split("@");if(n[0].length>64)return!1;var o=n[1].split(".");return!o.some(function(a){return a.length>63})};const q4e={class:"mr-1 min-w-14"},U4e={class:"recipient grow"},j4e={class:"flex justify-between"},z4e={class:"mr-2 truncate"},H4e=["textContent"],W4e=["textContent"],G4e=["disabled","onClick"],K4e=Object.assign({inheritAttrs:!1},{__name:"RecipientSelectorField",props:{label:String,type:{type:String,required:!0},form:{required:!0}},emits:["recipientRemoved","recipientSelected"],setup(e,{expose:t,emit:n}){const o=n,a=M(null),r=Pt([]);let s=null;function i(b,w,k){return(w||"").toLowerCase().indexOf(k.toLowerCase())>-1||(b.name||"").toLowerCase().indexOf(k.toLowerCase())>-1}function u(b){o("recipientSelected",b)}function c(b,w){b(w),o("recipientRemoved",w)}function m(){a.value.focus()}function f(b,w){b&&(s&&s(),w(!0),Innoclapps.request("/search/email-address",v(b)).then(({data:k})=>{if(k){let x=[];k.forEach(I=>x.push(...I.data)),r.value=x}}).finally(()=>w(!1)))}function v(b){return{params:{q:b},cancelToken:new Kr(w=>s=w)}}function y(b){return y5.validate(b)}return t({focus:m}),(b,w)=>{const k=d("IFormLabel"),x=d("Icon"),I=d("ICustomSelect"),C=d("IFormError"),S=Ve("i-tooltip");return g(),D("div",{class:be(["flex items-center",e.type])},[_("div",q4e,[l(k,{label:e.label,for:e.type},null,8,["label","for"])]),_("div",U4e,[l(I,Ue({ref_key:"selectRef",ref:a},b.$attrs,{label:"address","input-id":e.type,options:r.value,filterable:!1,clearable:!1,taggable:!0,multiple:!0,"filter-by":i,"option-key":T=>String(T.address+T.id+T.resourceName+T.name),"create-option-provider":T=>({name:"",address:T}),"option-comparator-provider":(T,E,$)=>typeof T=="string"&&typeof E=="object"?T===E.address:typeof E=="string"&&typeof T=="object"?E===T.address:$(T)===$(E),"display-new-options-last":!0,placeholder:b.$t("mailclient::inbox.search_recipients"),debounce:400,onOptionSelected:u,onSearch:f}),{option:p(T=>[_("span",j4e,[_("span",z4e,Z(T.name)+" "+Z(T.address),1),T.resourceName?(g(),A(x,{key:0,class:"size-5",icon:T.resourceName==="contacts"?"User":"OfficeBuilding"},null,8,["icon"])):K("",!0)])]),"selected-option-container":p(({option:T,disabled:E,deselect:$,multiple:F})=>[(g(),D("span",{key:T.index,class:be(["mr-2 inline-flex rounded-md bg-neutral-100 px-2 dark:bg-neutral-500 dark:text-white",{"border border-danger-500":!y(T.address)}])},[T.name?ne((g(),D("span",{key:1,textContent:Z(T.name)},null,8,W4e)),[[S,T.address]]):(g(),D("span",{key:0,textContent:Z(T.address)},null,8,H4e)),F?(g(),D("button",{key:2,type:"button",class:"ml-1 text-neutral-400 hover:text-neutral-600 dark:text-neutral-200 dark:hover:text-neutral-400",title:"Remove recipient","aria-label":"Remove recipient",disabled:E,onClick:ot(R=>c($,T),["prevent","stop"])},[l(x,{icon:"XSolid",class:"size-4"})],8,G4e)):K("",!0)],2))]),_:1},16,["input-id","options","option-key","create-option-provider","option-comparator-provider","placeholder"]),l(C,{error:e.form.getError(e.type)},null,8,["error"])]),Se(b.$slots,"after",{},void 0,!0)],2)}}}),kl=fn(K4e,[["__scopeId","data-v-17f30641"]]),Z4e={class:"-mx-8 mb-4 border-y border-neutral-200 bg-neutral-50 px-8 py-2 dark:border-neutral-500/30 dark:bg-neutral-500/10"},Y4e={class:"flex"},X4e={class:"mr-4"},Q4e={class:"font-medium"},J4e={class:"ml-1.5 self-start"},eEe={class:"ml-2 space-x-2"},tEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),nEe={key:0},oEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),aEe={key:1},rEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),lEe={class:"flex items-center"},sEe={class:"mr-1 min-w-14"},iEe={class:"grow"},uEe={class:"relative"},cEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),dEe={class:"relative mt-3"},mEe={class:"flex flex-col sm:flex-row sm:items-center"},fEe={class:"grow"},pEe={class:"mt-2 space-y-2 sm:mt-0 sm:flex sm:items-center sm:space-y-0"},vEe=["value","placeholder"],_5={__name:"MessageReply",props:{resourceName:String,resourceId:[String,Number],relatedResource:Object,visible:Boolean,toAll:Boolean,forward:Boolean,message:{type:Object,required:!0}},setup(e){const t=e,n=Pe("synchronizeResource",null),o=["RE:","SV:","Antw:","VS:","RE:","REF:","ΑΠ:","ΣΧΕΤ:","Vá:","R:","RIF:","BLS:","RES:","Odp:","YNT:","ATB:","FW:","FWD:","Doorst:","VL:","TR:","WG:","ΠΡΘ:","Továbbítás:","I:","FS:","TRS:","VB:","RV:","ENC:","PD:","İLT:","YML:"],{t:a}=Ee(),{DateTime:r}=rt(),{addSignature:s}=Qv(),{scriptConfig:i}=Ne(),{form:u,attachments:c,attachmentsDraftId:m,handleAttachmentUploaded:f,destroyPendingAttachment:v,customAssociationsValue:y,placeholders:b,resourcesForPlaceholders:w,subject:k,parsedSubject:x,subjectPlaceholdersSyntaxIsValid:I,hasInvalidSubjectPlaceholders:C,subjectContainsPlaceholders:S,parsePlaceholdersForMessage:T,parsePlaceholdersForSubject:E,showWillUsePlaceholdersIconToAssociateResourceRecord:$,hasEmptyPlaceholders:F,sending:R,sendRequest:B,hasInvalidAddresses:V,associateSelectedRecipients:P,dissociateRemovedRecipients:z,handleRecipientSelectedEvent:H,handleToRecipientRemovedEvent:j,setWantsCC:N,setWantsBCC:L,wantsBcc:U,wantsCc:ee,schedule:G,messagePlaceholdersBeingParsed:W}=h5(t.resourceName,t.relatedResource,n),ae=M(!1),ue=M(!1);$e(F,(Fe,Ge)=>{Ge&&!Fe&&(ae.value=!1)});const ce=M(null),oe=M(null),ie=M(!1),Q=M([]),se=M(!1),me=O(()=>u.to.length===0||R.value||G.value&&!u.scheduled_at),xe=O(()=>t.message.cc&&t.message.cc.length>0),de=O(()=>t.message.reply_to&&t.message.reply_to.length>0);function he(){document.querySelector(".dialog").scrollTo({top:0,behavior:"instant"})}function Y(Fe){const Ge=Et(Q.value,["id",Fe.id]);Q.value.splice(Ge,1)}function X(Fe){u.message=Fe.body+u.message,ie.value=!1,T(),E(),he(),ze(()=>oe.value.focus())}function re(){Yt(),m.value=$o();let Fe=$t(t.message.subject);Fe=t.forward?we(Fe):Ce(Fe),u.message=s(u.message),k.value=Fe}function we(Fe){return Q.value=structuredClone(Vn(t.message.media)),ge(),u.message=Re(),Fe&&(Fe=i("mail.forward_prefix")+Fe),ce.value.focus(),Fe}function Ce(Fe){return Q.value=[],ke(),u.message=et(),Gn(()=>oe.value.focus(),1200),Fe&&(Fe=i("mail.reply_prefix")+Fe),Fe}function ge(){["cc","bcc","to"].forEach(Fe=>u.set(Fe,Fe==="to"?[]:null))}function Re(){let Fe="<br /><div class='concord_attr'>"+a("mailclient::inbox.forwarded_message_placeholder",{from:`${t.message.from.name?t.message.from.name+" ":""}&lt;${t.message.from.address}&gt;`,date:r.fromISO(t.message.date).toFormat("EEE, LLL d, yyyy, h:mm a"),subject:t.message.subject,to:t.message.to.reduce((Ge,ht)=>(Ge.push((ht.name?ht.name+" ":"")+`&lt;${ht.address}&gt;`),Ge),[]).join(", "),pre:"----------",after:"---------"})+"</div><br />";return lt(t.message.editor_text,Fe)}function et(){let Fe=t.message.editor_text;if(!Fe)return"";let Ge=`&lt;${t.message.from.address}&gt;`;t.message.from.name&&(Ge=t.message.from.name+" "+Ge);let ht=`On ${r.fromISO(t.message.date).toFormat("EEE, LLL d, yyyy, h:mm a")} ${Ge} wrote:`;if(kt(Fe)){let Xt=/(<body[^>]*>)([\s\S]*?)(<\/body>)/i,Ke=Fe.replace(Xt,function(He,vt,pn,Dn){return vt+"<blockquote>"+pn+"</blockquote>"+Dn});return lt(Ke,`<br /><div class="concord_attr">${ht}</div>`)}else return`<br /><div class="concord_attr">${ht}</div><blockquote style="all: unset;" class="concord_quote">${Fe}</blockquote>`}function kt(Fe){let Ge=Fe.includes("<html"),ht=Fe.includes("<body");return Ge&&ht}function lt(Fe,Ge){var ht=/<body[^>]*>/i;return kt(Fe)?Fe=Fe.replace(ht,function(Xt){return Xt+Ge}):Fe=Ge+Fe,Fe}function ft(){u.reset(),k.value=null,G.value=!1,x.value=null,c.value=[],y.value={}}function zt(Fe=!1){if(Fe===!1&&F.value){ae.value=!0;return}else ae.value&&(ae.value=!1);t.forward?(u.fill("forward_attachments",Q.value.map(Ge=>Ge.id)),B(`/emails/${t.message.id}/forward`).then(()=>Innoclapps.dialog().hide("replyMessageModal"))):B(`/emails/${t.message.id}/reply`).then(()=>Innoclapps.dialog().hide("replyMessageModal"))}function De(){if(We()?Xe():Te()||Me(),xe.value){const Fe=_e();Fe.length>0&&u.set("cc",Fe)}}function _e(){let Fe=t.message.cc;return de.value&&(Fe=Fe.filter(Ge=>!t.message.reply_to.some(ht=>ht.address===Ge.address))),Fe.map(Ge=>({address:Ge.address,name:Ge.name}))}function Te(){if(de.value){const Fe=t.message.reply_to.map(Ge=>({address:Ge.address,name:Ge.name}));return u.set("to",Fe),!0}return!1}function Xe(){u.set("to",t.message.to.map(Fe=>({address:Fe.address,name:Fe.name})))}function Me(){t.message.from&&u.set("to",[{address:t.message.from.address,name:t.message.from.name}])}function ke(){if(t.toAll){De();return}We()?Xe():Te()||Me(),u.set("cc",null)}function We(){const{message:Fe}=t;return Fe.reply_to.length===1&&Fe.reply_to[0].address===Fe.email_account_email||!de.value&&Fe.from.address===Fe.email_account_email}function $t(Fe){if(Fe===null)return Fe;const Ge=[...o,i("mail.reply_prefix"),i("mail.forward_prefix")];return Fe.replace(new RegExp(Ge.join("|"),"gmi"),"").trim()}function Yt(){Innoclapps.request(`/associations/emails/${t.message.id}`,{perPage:100}).then(({data:Fe})=>{let Ge={};for(let ht in Fe)Ge[ht]=Fe[ht].map(Xt=>Xt.id);u.set("associations",Ge)})}return(Fe,Ge)=>{const ht=d("ILink"),Xt=d("Icon"),Ke=d("IAlertBody"),He=d("IAlert"),vt=d("IFormLabel"),pn=d("IFormInput"),Dn=d("IFormError"),_o=d("IFormCheckbox"),Eo=d("IFormCheckboxLabel"),jt=d("IFormCheckboxField"),xn=d("DatePicker"),Ht=d("IButton"),ct=d("IModal"),jn=Ve("i-tooltip");return g(),A(ct,{id:"replyMessageModal",size:"xl","hide-footer":ie.value,visible:e.visible,title:Fe.$t("mailclient::inbox."+(e.forward?"forward_message":"reply_to_message"),{subject:e.message.subject}),"static-backdrop":"",onHidden:ft,onShown:re},{"modal-footer":p(({cancel:Lt})=>[_("div",mEe,[_("div",fEe,[ne(l(bs,{modelValue:h(u).task_date,"onUpdate:modelValue":Ge[14]||(Ge[14]=it=>h(u).task_date=it)},null,8,["modelValue"]),[[pe,!!e.resourceName]])]),_("div",pEe,[_("div",{class:be(["flex items-center ",h(G)?"sm:mr-1":"sm:mr-4"])},[l(jt,{class:"shrink-0"},{default:p(()=>[l(_o,{checked:h(G),"onUpdate:checked":Ge[15]||(Ge[15]=it=>$n(G)?G.value=it:null)},null,8,["checked"]),l(Eo,{text:h(G)?"":Fe.$t("mailclient::schedule.send_later")},null,8,["text"])]),_:1}),h(G)?(g(),A(xn,{key:0,modelValue:h(u).scheduled_at,"onUpdate:modelValue":Ge[16]||(Ge[16]=it=>h(u).scheduled_at=it),"min-date":"now",mode:"dateTime",required:!0},{default:p(({inputValue:it,inputEvents:Wt})=>[_("input",Ue({class:"cursor-pointer rounded-md border-neutral-300 bg-transparent py-1 text-base font-medium text-neutral-700 ring-primary-600 focus:border-transparent focus:ring-primary-600 dark:border-neutral-500/30 dark:text-neutral-100 dark:ring-primary-500 dark:focus:ring-primary-500 sm:text-sm",value:it,placeholder:Fe.$t("mailclient::schedule.choose_date")},Ur(Wt,!0)),null,16,vEe)]),_:1},8,["modelValue"])):K("",!0)],2),l(Ht,{class:"w-full sm:mr-1 sm:w-auto",text:Fe.$t("core::app.cancel"),basic:"",onClick:Lt},null,8,["text","onClick"]),l(Ht,{class:"w-full sm:w-auto",variant:ae.value?"danger":"primary",loading:h(R),disabled:me.value,text:ae.value?Fe.$t("core::app.confirm"):h(G)?Fe.$t("mailclient::schedule.schedule"):e.forward?Fe.$t("mailclient::inbox.forward"):Fe.$t("mailclient::inbox.reply"),onClick:Ge[17]||(Ge[17]=it=>zt(ae.value))},null,8,["variant","loading","disabled","text"])])])]),default:p(()=>[_("div",Z4e,[_("div",Y4e,[_("div",X4e,[ne(l(ht,{class:"font-medium",text:Fe.$t("mailclient.mail.templates.templates"),onClick:Ge[0]||(Ge[0]=Lt=>ie.value=!0)},null,8,["text"]),[[pe,!ie.value]]),ne(l(ht,{class:"font-medium",text:Fe.$t("mailclient.mail.compose"),onClick:Ge[1]||(Ge[1]=Lt=>ie.value=!1)},null,8,["text"]),[[pe,ie.value]])]),ne(_("div",Q4e,[l(za,{modelValue:h(u).associations,"onUpdate:modelValue":Ge[2]||(Ge[2]=Lt=>h(u).associations=Lt),"resource-name":"emails","resource-id":e.message.id,"associations-count":e.message.associations_count,"primary-resource-name":e.resourceName,"initial-associateables":e.resourceName?e.relatedResource:void 0,associateables:h(y),onChange:Ge[3]||(Ge[3]=Lt=>(h(T)(),h(E)()))},{"after-record":p(({title:Lt,resource:it,record:Wt,isSelected:Fo,isSearching:Jr,selectedRecords:Ed})=>[ne((g(),D("span",J4e,[h($)(Wt,Ed,it,Fo,Jr)?(g(),A(Xt,{key:0,icon:"CodeBracket",class:"size-5 text-neutral-500 dark:text-neutral-400"})):K("",!0)])),[[jn,Fe.$t("mailclient::inbox.will_use_placeholders_from_record",{resourceName:Lt}),void 0,{top:!0}]])]),_:1},8,["modelValue","resource-id","associations-count","primary-resource-name","initial-associateables","associateables"])],512),[[pe,!ie.value]])])]),ne(_("div",null,[l(He,{variant:"danger",show:h(V),dismissible:""},{default:p(()=>[l(Ke,null,{default:p(()=>[le(Z(Fe.$t("mailclient::mail.validation.invalid_recipients")),1)]),_:1})]),_:1},8,["show"]),l(kl,{ref_key:"toRef",ref:ce,modelValue:h(u).to,"onUpdate:modelValue":Ge[4]||(Ge[4]=Lt=>h(u).to=Lt),type:"to",form:h(u),label:Fe.$t("mailclient::inbox.to"),onRecipientRemoved:h(j),onRecipientSelected:h(H)},{after:p(()=>[_("div",eEe,[h(ee)?K("",!0):(g(),A(ht,{key:0,text:Fe.$t("mailclient.inbox.cc"),onClick:h(N)},null,8,["text","onClick"])),h(U)?K("",!0):(g(),A(ht,{key:1,text:Fe.$t("mailclient.inbox.bcc"),onClick:h(L)},null,8,["text","onClick"]))])]),_:1},8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),tEe,h(ee)?(g(),D("div",nEe,[l(kl,{modelValue:h(u).cc,"onUpdate:modelValue":Ge[5]||(Ge[5]=Lt=>h(u).cc=Lt),type:"cc",form:h(u),label:Fe.$t("mailclient::inbox.cc"),onRecipientRemoved:h(z),onRecipientSelected:h(P)},null,8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),oEe])):K("",!0),h(U)?(g(),D("div",aEe,[l(kl,{modelValue:h(u).bcc,"onUpdate:modelValue":Ge[6]||(Ge[6]=Lt=>h(u).bcc=Lt),type:"bcc",form:h(u),label:Fe.$t("mailclient::inbox.bcc")},null,8,["modelValue","form","label"]),rEe])):K("",!0),_("div",lEe,[_("div",sEe,[l(vt,{for:"subject",label:Fe.$t("mailclient::inbox.subject")},null,8,["label"])]),_("div",iEe,[_("div",uEe,[l(pn,{id:"subject",class:be({"border-danger-600":!h(I)||h(C),"border-dashed !border-neutral-400":ue.value}),"model-value":se.value?h(x):h(k),disabled:se.value,"onUpdate:modelValue":Ge[7]||(Ge[7]=Lt=>k.value=Lt),onDragover:Ge[8]||(Ge[8]=Lt=>se.value?void 0:ue.value=!0),onDragleave:Ge[9]||(Ge[9]=Lt=>ue.value=!1),onDrop:Ge[10]||(Ge[10]=Lt=>ue.value=!1)},null,8,["class","model-value","disabled"]),ne(l(ht,{tabindex:"-1",onClick:Ge[11]||(Ge[11]=Lt=>se.value=!1)},{default:p(()=>[l(Xt,{icon:"CodeBracket",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1},512),[[pe,se.value]]),h(S)&&!se.value&&h(w).length>0?(g(),A(ht,{key:0,tabindex:"-1",plain:"",onClick:Ge[12]||(Ge[12]=Lt=>se.value=!0)},{default:p(()=>[l(Xt,{icon:"ViewfinderCircle",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1})):K("",!0)]),l(Dn,{error:h(u).getError("subject")},null,8,["error"])])]),cEe,l(ji,{ref_key:"editorRef",ref:oe,modelValue:h(u).message,"onUpdate:modelValue":Ge[13]||(Ge[13]=Lt=>h(u).message=Lt),placeholders:h(b),"placeholders-parse-in-progress":h(W),"with-drop":!0,onPlaceholderInserted:h(T),onTemplateSelected:X},null,8,["modelValue","placeholders","placeholders-parse-in-progress","onPlaceholderInserted"]),_("div",dEe,[l(Dl,{"action-url":`${Fe.$scriptConfig("apiURL")}/media/pending/${h(m)}`,"select-file-text":Fe.$t("core::app.attach_files"),onFileUploaded:h(f)},{default:p(()=>[l(cc,{class:be({"border-b border-neutral-200 dark:border-neutral-500/30":Q.value.length>0&&h(c).length>0}),items:Q.value,"authorize-delete":!0,onDeleteRequested:Y},null,8,["class","items"]),l(cc,{class:"mb-3",items:h(c),"authorize-delete":!0,onDeleteRequested:h(v)},null,8,["items","onDeleteRequested"])]),_:1},8,["action-url","select-file-text","onFileUploaded"])]),ae.value?(g(),A(He,{key:2,variant:"warning",class:"mt-4"},{default:p(()=>[l(Ke,null,{default:p(()=>[le(Z(Fe.$t("mailclient::inbox.pre_send_empty_placeholders_found")),1)]),_:1})]),_:1})):K("",!0)],512),[[pe,!ie.value]]),ie.value?(g(),A(b5,{key:0,onSelected:X,onCreated:he,onUpdated:he,onWillCreate:he,onWillEdit:he})):K("",!0)]),_:1},8,["hide-footer","visible","title"])}}},hEe={class:"flex flex-1 grow flex-col space-y-1 lg:flex-row lg:space-x-3 lg:space-y-0"},gEe={class:"flex grow flex-col items-start"},bEe={class:"inline-flex items-center space-x-3"},yEe={class:"flex items-center space-x-1 self-start"},_Ee={class:"flex"},IEe={class:"-mt-0.5 ml-3"},wEe=_("span",{"aria-hidden":"true"},"→",-1),xEe={class:"flex flex-col px-3 py-2"},kEe={class:"font-sans text-base leading-[initial] dark:text-white sm:text-sm"},$Ee=_("div",{class:"clear-both"},null,-1),CEe={key:0,class:"-mx-6 mb-3 mt-4 border-t border-neutral-200 px-6 pt-4 dark:border-neutral-500/30"},I5={__name:"RelatedEmail",props:{viaResource:{type:String,required:!0},viaResourceId:{type:[String,Number],required:!0},relatedResource:{type:Object,required:!0},email:{type:Object,required:!0}},setup(e){const t=e,n=Innoclapps.resourceName("emails"),o=Pe("synchronizeResource"),a=Pe("decrementResourceCount"),r=_4e,s=cn(),{deleteResource:i}=Dt(n),{localizedDateTime:u}=rt(),{TAGS_TYPE:c,syncTags:m}=Yv(),f=M(!1),v=M(!1),y=M(!1),b=O(()=>t.email.cc&&t.email.cc.length>0);function w(){I(!1),C(!1)}function k(E){E&&!t.email.is_read&&Innoclapps.request().post(`/emails/${t.email.id}/read`).then(({data:$})=>{o({emails:$}),a("unread_emails_for_user_count"),s.dispatch("emailAccounts/decrementUnreadCountUI")})}async function x(){await i(t.email.id),t.email.is_read||(a("unread_emails_for_user_count"),s.dispatch("emailAccounts/decrementUnreadCountUI")),o({emails:{id:t.email.id,_delete:!0}})}function I(E=!0){f.value=E,y.value=!1}function C(E=!0){v.value=E}function S(){f.value=!0,y.value=!0}async function T(E){let $=await m(t.email.id,E);o({emails:{id:$.id,tags:{_reset:$.tags}}})}return(E,$)=>{const F=d("ICardHeading"),R=d("IButton"),B=d("IDropdownItem"),V=d("IDropdownMinimal"),P=d("ICardActions"),z=d("IBadge"),H=d("ICardHeader"),j=d("IPopoverButton"),N=d("IPopoverPanel"),L=d("IPopover"),U=d("ITextDark"),ee=d("IText"),G=d("TextCollapse"),W=d("ICardBody"),ae=d("ICard");return ne((g(),A(ae,{class:be("email-"+e.email.id)},{default:p(()=>[l(H,null,{default:p(()=>{var ue;return[_("div",hEe,[_("div",gEe,[l(F,{class:be(["text-base/6 sm:text-sm/6",e.email.is_read?"font-medium":"rounded-md bg-neutral-50 px-1.5 font-bold dark:bg-neutral-500/10"])},{default:p(()=>[$[0]||(je(-1),$[0]=_("span",{textContent:Z(e.email.subject?e.email.subject:"("+E.$t("mailclient::inbox.no_subject")+")")},null,8,["textContent"]),je(1),$[0])]),_:1},8,["class"]),_("div",bEe,[l(za,{"associations-count":e.email.associations_count,"initial-associateables":e.relatedResource,"resource-id":e.email.id,"resource-name":h(n),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:$[1]||($[1]=ce=>h(o)({emails:ce}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"]),l(hs,{class:"!w-auto",simple:!0,type:h(c),"model-value":e.email.tags,disabled:!((ue=e.email.authorizations)!=null&&ue.update),"onUpdate:modelValue":T},null,8,["type","model-value","disabled"])])]),_("div",yEe,[$[2]||(je(-1),$[2]=l(R,{class:"lg:mt-1.5",variant:"secondary",icon:"Reply",text:E.$t("mailclient::inbox.reply"),small:"",onClick:ce=>I(!0)},null,8,["text","onClick"]),je(1),$[2]),b.value?(g(),A(R,{key:0,class:"lg:mt-1.5",variant:"secondary",icon:"Reply",text:E.$t("mailclient::inbox.reply_all"),small:"",onClick:S},null,8,["text"])):K("",!0),$[3]||(je(-1),$[3]=l(R,{class:"lg:mt-1.5",variant:"secondary",icon:"Share",text:E.$t("mailclient::inbox.forward"),small:"",onClick:ce=>C(!0)},null,8,["text","onClick"]),je(1),$[3])])]),l(P,{class:"mt-1.5 self-start"},{default:p(()=>[l(V,{small:""},{default:p(()=>[l(B,{icon:"Eye",text:E.$t("mailclient::mail.view"),to:{name:"inbox-message",params:{id:e.email.id,account_id:e.email.email_account_id,folder_id:e.email.folders[0].id}}},null,8,["text","to"]),l(B,{icon:"Trash",text:E.$t("core::app.delete"),onClick:$[4]||($[4]=ce=>E.$confirm(x))},null,8,["text"])]),_:1})]),_:1}),$[5]||(je(-1),$[5]=e.email.opened_at?(g(),A(z,{key:0,class:"absolute -bottom-6 right-2",variant:"success",icon:"Eye"},{default:p(()=>[le(" ("+Z(e.email.opens)+") - "+Z(h(u)(e.email.opened_at)),1)]),_:1})):K("",!0),je(1),$[5])]}),_:1}),l(W,null,{default:p(()=>[$[6]||(je(-1),$[6]=l(Do,{label:E.$t("mailclient::inbox.from"),addresses:e.email.from},null,8,["label","addresses"]),je(1),$[6]),_("div",_Ee,[$[7]||(je(-1),$[7]=l(Do,{label:E.$t("mailclient::inbox.to"),addresses:e.email.to},null,8,["label","addresses"]),je(1),$[7]),_("div",IEe,[l(L,{placement:"top"},{default:p(()=>[l(j,{link:""},{default:p(()=>[le(Z(E.$t("core::app.details"))+" ",1),wEe]),_:1}),l(N,{class:"w-72"},{default:p(()=>[_("div",xEe,[$[8]||(je(-1),$[8]=l(Do,{label:E.$t("mailclient::inbox.from"),addresses:e.email.from},null,8,["label","addresses"]),je(1),$[8]),$[9]||(je(-1),$[9]=l(Do,{label:E.$t("mailclient::inbox.to"),addresses:e.email.to},null,8,["label","addresses"]),je(1),$[9]),$[10]||(je(-1),$[10]=l(Do,{label:E.$t("mailclient::inbox.reply_to"),addresses:e.email.reply_to,"show-when-empty":!1},null,8,["label","addresses"]),je(1),$[10]),$[11]||(je(-1),$[11]=l(Do,{label:E.$t("mailclient::inbox.cc"),addresses:e.email.cc,"show-when-empty":!1},null,8,["label","addresses"]),je(1),$[11]),$[12]||(je(-1),$[12]=l(Do,{label:E.$t("mailclient::inbox.bcc"),addresses:e.email.bcc,"show-when-empty":!1},null,8,["label","addresses"]),je(1),$[12])])]),_:1})]),_:1})])]),$[13]||(je(-1),$[13]=_("div",{class:"inline-flex space-x-1"},[l(U,{class:"font-semibold"},{default:p(()=>[le(Z(E.$t("mailclient::inbox.date"))+": ",1)]),_:1}),l(ee,{text:h(u)(e.email.date)},null,8,["text"])]),je(1),$[13]),$[14]||(je(-1),$[14]=_("div",{class:"mail-text all-revert"},[_("div",kEe,[e.email.visible_text?(g(),A(G,{key:0,class:"mt-3",text:e.email.visible_text,length:250,lightbox:""},null,8,["text"])):K("",!0),$Ee,l(v5,{text:e.email.hidden_text},null,8,["text"])])]),je(1),$[14]),$[15]||(je(-1),$[15]=e.email.media.length>0?(g(),D("div",CEe,[l(U,{class:"mb-2 font-medium",as:"dd",text:E.$t("mailclient.mail.attachments")},null,8,["text"]),l(p5,{attachments:e.email.media},null,8,["attachments"])])):K("",!0),je(1),$[15])]),_:1}),l(_5,{message:e.email,visible:f.value||v.value,forward:v.value,"resource-name":e.viaResource,"resource-id":e.viaResourceId,"related-resource":e.relatedResource,"to-all":y.value,onHidden:w},null,8,["message","visible","forward","resource-name","resource-id","related-resource","to-all"])]),_:1},8,["class"])),[[h(r),{callback:k,once:!0,throttle:300,intersection:{threshold:.5}}]])}}},SEe={class:"mt-3"},TEe={__name:"RecordTabTimelineEmail",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const{localizedDateTime:t}=rt();return(n,o)=>(g(),A(yo,{"heading-class":"font-medium",icon:"Mail","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:n.$t("mailclient::mail.message")},{date:p(()=>[le(Z(h(t)(e.log.date)),1)]),default:p(()=>[_("div",SEe,[l(I5,{email:e.log,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["email","via-resource","via-resource-id","related-resource"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"]))}};function w5(e,t){const n=M([]);return on(()=>{n.value=[];const o=pt(t),a=pt(e);Object.keys(o).length!==0&&(a==="deals"||a==="contacts"?o.companies.length===1&&n.value.push({id:o.companies[0].id,display_name:o.companies[0].display_name,path:o.companies[0].path,resourceName:Innoclapps.resourceName("companies")}):a===Innoclapps.resourceName("companies")&&o.contacts.length===1&&n.value.push({id:o.contacts[0].id,display_name:o.contacts[0].display_name,path:o.contacts[0].path,resourceName:Innoclapps.resourceName("contacts")}))}),{newMessageAdditionalAssociations:n}}const EEe={class:"-mx-8 mb-4 border-y border-neutral-200 bg-neutral-50 px-8 py-2 dark:border-neutral-500/30 dark:bg-neutral-500/10"},FEe={class:"flex"},AEe={class:"mr-4"},REe={class:"font-medium"},DEe={key:0,class:"ml-1.5 self-start"},OEe={key:0,class:"ml-2 space-x-2"},BEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),NEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),PEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),MEe={class:"flex items-center"},VEe={class:"mr-1 hidden sm:inline-block"},LEe=_("span",{class:"hidden sm:inline",textContent:"<"},null,-1),qEe=["textContent"],UEe=_("span",{class:"hidden sm:inline",textContent:">"},null,-1),jEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),zEe={class:"flex items-center"},HEe={class:"mr-1 min-w-14"},WEe={class:"grow"},GEe={class:"relative"},KEe=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1),ZEe={class:"relative mt-3"},YEe={class:"flex flex-col sm:flex-row sm:items-center"},XEe={class:"grow"},QEe={class:"mt-2 space-y-2 sm:mt-0 sm:flex sm:items-center sm:space-y-0"},JEe=["value","placeholder"],Td={__name:"ComposeMessage",props:{resourceName:String,resourceId:[String,Number],relatedResource:Object,visible:Boolean,defaultAccount:Object,to:{type:Array,default:()=>[]},associations:{type:Array,default:()=>[]}},setup(e,{expose:t}){const n=e,o=Pe("synchronizeResource",null),{form:a,attachments:r,attachmentsDraftId:s,handleAttachmentUploaded:i,destroyPendingAttachment:u,customAssociationsValue:c,placeholders:m,resourcesForPlaceholders:f,subject:v,parsedSubject:y,subjectPlaceholdersSyntaxIsValid:b,hasInvalidSubjectPlaceholders:w,subjectContainsPlaceholders:k,parsePlaceholdersForMessage:x,parsePlaceholdersForSubject:I,showWillUsePlaceholdersIconToAssociateResourceRecord:C,sending:S,sendRequest:T,hasInvalidAddresses:E,associateSelectedRecipients:$,dissociateRemovedRecipients:F,associateMessageRecord:R,handleRecipientSelectedEvent:B,handleToRecipientRemovedEvent:V,setWantsCC:P,setWantsBCC:z,wantsBcc:H,wantsCc:j,hasEmptyPlaceholders:N,schedule:L,messagePlaceholdersBeingParsed:U}=h5(n.resourceName,n.relatedResource,o),{signature:ee}=Qv(),{emailAccounts:G,fetchEmailAccounts:W}=ya(),ae=M(!1);$e(N,(ge,Re)=>{Re&&!ge&&(ae.value=!1)});const ue=M(null),ce=M(null),oe=M(!1),ie=M({}),Q=M(!1),se=M(!1),me=M(!1),xe=O(()=>a.to.length===0||!v.value||S.value||L.value&&!a.scheduled_at);$e(()=>n.defaultAccount,ge=>{ie.value=ge}),$e(()=>n.to,ge=>{a.to=ge,$(ge)},{immediate:!0});function de(ge){ge.forEach(Re=>R(Re,Re.resourceName))}$e(()=>n.associations,ge=>{de(ge)},{immediate:!0});function he(ge){v.value||(v.value=ge.subject),a.message&&a.message.startsWith("<p></p>"+ee.value)&&(a.message=a.message.replace("<p></p>","")),a.message=ge.body+a.message,se.value=!1,x(),I(),Y(),ze(()=>ue.value.focus())}function Y(){document.querySelector(".dialog").scrollTo({top:0,behavior:"instant"})}function X(){a.to&&$(a.to),de(n.associations),s.value=$o()}function re(){a.reset(),L.value=!1,n.to&&(a.to=n.to),v.value=null,y.value=null,r.value=[],c.value={}}function we(ge=!1){if(ge===!1&&N.value){ae.value=!0;return}else ae.value&&(ae.value=!1);T(`/inbox/emails/${ie.value.id}`).then(()=>Innoclapps.dialog().hide("composeMessageModal"))}function Ce(){W().then(ge=>{ie.value=n.defaultAccount||ge[0],Q.value=!0})}return Ce(),t({subjectRef:ce}),(ge,Re)=>{const et=d("ILink"),kt=d("Icon"),lt=d("IAlertBody"),ft=d("IAlert"),zt=d("IFormLabel"),De=d("IDropdownButton"),_e=d("IDropdownItem"),Te=d("IDropdownMenu"),Xe=d("IDropdown"),Me=d("IFormInput"),ke=d("IFormError"),We=d("IOverlay"),$t=d("IFormCheckbox"),Yt=d("IFormCheckboxLabel"),Fe=d("IFormCheckboxField"),Ge=d("DatePicker"),ht=d("IButton"),Xt=d("IModal"),Ke=Ve("i-tooltip");return g(),A(Xt,{id:"composeMessageModal",size:"xl","hide-footer":se.value,visible:e.visible,title:ge.$t("mailclient::inbox.new_message"),"static-backdrop":"",onHidden:re,onShown:X},{"modal-footer":p(({cancel:He})=>[_("div",YEe,[_("div",XEe,[ne(l(bs,{modelValue:h(a).task_date,"onUpdate:modelValue":Re[14]||(Re[14]=vt=>h(a).task_date=vt)},null,8,["modelValue"]),[[pe,!!e.resourceName]])]),_("div",QEe,[_("div",{class:be(["flex items-center ",h(L)?"sm:mr-1":"sm:mr-4"])},[l(Fe,{class:"shrink-0"},{default:p(()=>[l($t,{checked:h(L),"onUpdate:checked":Re[15]||(Re[15]=vt=>$n(L)?L.value=vt:null)},null,8,["checked"]),l(Yt,{text:h(L)?"":ge.$t("mailclient::schedule.send_later")},null,8,["text"])]),_:1}),h(L)?(g(),A(Ge,{key:0,modelValue:h(a).scheduled_at,"onUpdate:modelValue":Re[16]||(Re[16]=vt=>h(a).scheduled_at=vt),"min-date":"now",mode:"dateTime",required:!0},{default:p(({inputValue:vt,inputEvents:pn})=>[_("input",Ue({class:"cursor-pointer rounded-md border-neutral-300 bg-transparent py-1 text-base font-medium text-neutral-700 ring-primary-600 focus:border-transparent focus:ring-primary-600 dark:border-neutral-500/30 dark:text-neutral-100 dark:ring-primary-500 dark:focus:ring-primary-500 sm:text-sm",value:vt,placeholder:ge.$t("mailclient::schedule.choose_date")},Ur(pn,!0)),null,16,JEe)]),_:1},8,["modelValue"])):K("",!0)],2),l(ht,{class:"w-full sm:mr-1 sm:w-auto",text:ge.$t("core::app.cancel"),basic:"",onClick:He},null,8,["text","onClick"]),l(ht,{class:"w-full sm:w-auto",loading:h(S),variant:ae.value?"danger":"primary",disabled:xe.value,text:ae.value?ge.$t("core::app.confirm"):h(L)?ge.$t("mailclient::schedule.schedule"):ge.$t("mailclient::inbox.send"),onClick:Re[17]||(Re[17]=vt=>we(ae.value))},null,8,["loading","variant","disabled","text"])])])]),default:p(()=>[_("div",EEe,[_("div",FEe,[_("div",AEe,[ne(l(et,{class:"font-medium",text:ge.$t("mailclient.mail.templates.templates"),onClick:Re[0]||(Re[0]=He=>se.value=!0)},null,8,["text"]),[[pe,!se.value]]),ne(l(et,{class:"font-medium",text:ge.$t("mailclient.mail.compose"),onClick:Re[1]||(Re[1]=He=>se.value=!1)},null,8,["text"]),[[pe,se.value]])]),ne(_("div",REe,[l(za,{modelValue:h(a).associations,"onUpdate:modelValue":Re[2]||(Re[2]=He=>h(a).associations=He),"primary-record-disabled":!0,"primary-record":e.resourceName?e.relatedResource:void 0,"primary-resource-name":e.resourceName,"initial-associateables":e.resourceName?e.relatedResource:void 0,associateables:h(c),onChange:Re[3]||(Re[3]=He=>(h(x)(),h(I)()))},{"after-record":p(({title:He,resource:vt,record:pn,isSelected:Dn,isSearching:_o,selectedRecords:Eo})=>[h(C)(pn,Eo,vt,Dn,_o)?ne((g(),D("span",DEe,[l(kt,{icon:"CodeBracket",class:"size-5 text-neutral-500 dark:text-neutral-400"})])),[[Ke,ge.$t("mailclient::inbox.will_use_placeholders_from_record",{resourceName:He}),void 0,{top:!0}]]):K("",!0)]),_:1},8,["modelValue","primary-record","primary-resource-name","initial-associateables","associateables"])],512),[[pe,!se.value]])])]),ne(_("div",null,[l(We,{show:!Q.value},{default:p(()=>[l(ft,{variant:"danger",show:h(E),dismissible:""},{default:p(()=>[l(lt,null,{default:p(()=>[le(Z(ge.$t("mailclient::mail.validation.invalid_recipients")),1)]),_:1})]),_:1},8,["show"]),l(kl,{modelValue:h(a).to,"onUpdate:modelValue":Re[4]||(Re[4]=He=>h(a).to=He),type:"to",form:h(a),label:ge.$t("mailclient::inbox.to"),onRecipientRemoved:h(V),onRecipientSelected:h(B)},{after:p(()=>[!h(H)||!h(j)?(g(),D("div",OEe,[h(j)?K("",!0):(g(),A(et,{key:0,text:ge.$t("mailclient.inbox.cc"),onClick:h(P)},null,8,["text","onClick"])),h(H)?K("",!0):(g(),A(et,{key:1,text:ge.$t("mailclient.inbox.bcc"),onClick:h(z)},null,8,["text","onClick"]))])):K("",!0)]),_:1},8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),BEe,ne(_("div",null,[l(kl,{modelValue:h(a).cc,"onUpdate:modelValue":Re[5]||(Re[5]=He=>h(a).cc=He),type:"cc",form:h(a),label:ge.$t("mailclient::inbox.cc"),onRecipientRemoved:h(F),onRecipientSelected:h($)},null,8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),NEe],512),[[pe,h(j)]]),ne(_("div",null,[l(kl,{modelValue:h(a).bcc,"onUpdate:modelValue":Re[6]||(Re[6]=He=>h(a).bcc=He),type:"bcc",form:h(a),label:ge.$t("mailclient::inbox.bcc")},null,8,["modelValue","form","label"]),PEe],512),[[pe,h(H)]]),_("div",MEe,[l(zt,{as:"p",class:"mr-1 min-w-14",label:ge.$t("mailclient::inbox.from")},null,8,["label"]),l(Xe,{"adaptive-width":""},{default:p(()=>[l(De,{basic:""},{default:p(()=>[_("span",null,[_("span",VEe,Z(ie.value.formatted_from_name_header),1),LEe,_("span",{textContent:Z(ie.value.display_email)},null,8,qEe),UEe])]),_:1}),l(Te,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(G),He=>(g(),A(_e,{key:He.id,text:He.display_email,active:He.id===ie.value.id,onClick:vt=>ie.value=He},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),jEe,_("div",zEe,[_("div",HEe,[l(zt,{for:"subject",label:ge.$t("mailclient::inbox.subject")},null,8,["label"])]),_("div",WEe,[_("div",GEe,[l(Me,{id:"subject",ref_key:"subjectRef",ref:ce,class:be({"!border-danger-600":!h(b)||h(w),"border-dashed !border-neutral-400":me.value}),"model-value":oe.value?h(y):h(v),disabled:oe.value,"onUpdate:modelValue":Re[7]||(Re[7]=He=>v.value=He),onDragover:Re[8]||(Re[8]=He=>oe.value?void 0:me.value=!0),onDragleave:Re[9]||(Re[9]=He=>me.value=!1),onDrop:Re[10]||(Re[10]=He=>me.value=!1)},null,8,["class","model-value","disabled"]),ne(l(et,{tabindex:"-1",onClick:Re[11]||(Re[11]=He=>oe.value=!1)},{default:p(()=>[l(kt,{icon:"CodeBracket",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1},512),[[pe,oe.value]]),h(k)&&!oe.value&&h(f).length>0?(g(),A(et,{key:0,tabindex:"-1",plain:"",onClick:Re[12]||(Re[12]=He=>oe.value=!0)},{default:p(()=>[l(kt,{icon:"ViewfinderCircle",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1})):K("",!0)]),l(ke,{error:h(a).getError("subject")},null,8,["error"])])]),KEe,l(ji,{ref_key:"editorRef",ref:ue,modelValue:h(a).message,"onUpdate:modelValue":Re[13]||(Re[13]=He=>h(a).message=He),placeholders:h(m),"placeholders-parse-in-progress":h(U),"with-drop":!0,onPlaceholderInserted:h(x),onTemplateSelected:he},null,8,["modelValue","placeholders","placeholders-parse-in-progress","onPlaceholderInserted"]),_("div",ZEe,[l(Dl,{"action-url":`${ge.$scriptConfig("apiURL")}/media/pending/${h(s)}`,"select-file-text":ge.$t("core::app.attach_files"),onFileUploaded:h(i)},{default:p(()=>[l(cc,{class:"mb-3",items:h(r),"authorize-delete":!0,onDeleteRequested:h(u)},null,8,["items","onDeleteRequested"])]),_:1},8,["action-url","select-file-text","onFileUploaded"])])]),_:1},8,["show"]),ae.value?(g(),A(ft,{key:0,variant:"warning",class:"mt-4"},{default:p(()=>[l(lt,null,{default:p(()=>[le(Z(ge.$t("mailclient::inbox.pre_send_empty_placeholders_found")),1)]),_:1})]),_:1})):K("",!0)],512),[[pe,!se.value]]),se.value?(g(),A(b5,{key:0,onSelected:he,onCreated:Y,onUpdated:Y,onWillCreate:Y,onWillEdit:Y})):K("",!0)]),_:1},8,["hide-footer","visible","title"])}}},eFe=Object.assign({inheritAttrs:!1},{__name:"EmailSendableField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,n=M(!1),o=M(null),{newMessageAdditionalAssociations:a}=w5(gt(t,"resourceName"),gt(t,"resource")),{emailAccounts:r,fetchEmailAccounts:s}=ya(),i=O(()=>[{address:t.field.value,name:t.resource.display_name,path:t.resource.path,resourceName:t.resourceName,id:t.resourceId}]);function u(c=!0){n.value=c,ze(()=>{o.value.subjectRef.focus()})}return(c,m)=>{const f=d("IDropdownItem"),v=Ve("i-tooltip");return g(),D(fe,null,[n.value?(g(),A(Td,{key:0,ref_key:"composeRef",ref:o,visible:n.value,"resource-name":e.resourceName,"resource-id":e.resourceId,"related-resource":e.resource,associations:h(a),to:i.value,onHidden:m[0]||(m[0]=y=>n.value=!1)},null,8,["visible","resource-name","resource-id","related-resource","associations","to"])):K("",!0),l(Ik,Ue(c.$attrs,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,onShow:h(s)}),bn({_:2},[e.field.value&&!e.isFloating?{name:"start",fn:p(()=>[ne((g(),D("span",null,[l(f,{href:"#",disabled:!h(r).length,text:c.$t("mailclient::mail.create"),onClick:m[1]||(m[1]=y=>u(!0))},null,8,["disabled","text"])])),[[v,h(r).length?"":c.$t("mailclient::mail.account.integration_not_configured")]])]),key:"0"}:void 0]),1040,["field","is-floating","resource","resource-name","resource-id","onShow"])],64)}}}),tFe={__name:"MailEditorField",props:yt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:yt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Zt(e,"modelValue");function r(){o("setInitialValue",Rn(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=d("BaseFormField");return g(),A(u,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({isReadonly:c,fieldId:m})=>[l(dn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[l(ji,Ue({id:m,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),disabled:c},e.field.attributes),null,16,["id","modelValue","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},nFe=Object.assign({inheritAttrs:!1},{__name:"EmailSendableField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{emailAccounts:n,fetchEmailAccounts:o}=ya(),a=M(!1),r=M(null),s=O(()=>[{address:t.field.value,name:t.row.display_name||t.row.name,resourceName:t.resourceName,path:t.row.path,id:t.row.id}]);function i(u=!0){a.value=u,ze(()=>{r.value.subjectRef.focus()})}return(u,c)=>{const m=d("IDropdownItem"),f=Ve("i-tooltip");return g(),D(fe,null,[a.value?(g(),A(Td,{key:0,ref_key:"composeRef",ref:r,visible:a.value,to:s.value,onHidden:c[0]||(c[0]=v=>a.value=!1)},null,8,["visible","to"])):K("",!0),l(wk,Ue(u.$attrs,{column:e.column,row:e.row,field:e.field,"resource-name":e.resourceName,"resource-id":e.resourceId,onShow:h(o)}),bn({_:2},[e.field.value?{name:"start",fn:p(()=>[ne((g(),D("span",null,[l(m,{href:"#",disabled:!h(n).length,text:u.$t("mailclient::mail.create"),onClick:c[1]||(c[1]=v=>i(!0))},null,8,["disabled","text"])])),[[f,h(n).length?"":u.$t("mailclient::mail.account.integration_not_configured")]])]),key:"0"}:void 0]),1040,["column","row","field","resource-name","resource-id","onShow"])],64)}}}),x5={collection:[],collectionSet:!1,endpoint:"/mail/accounts"},oFe={SET(e,t){e.collection=t,e.collectionSet=!0},RESET(e){e.collection=[],e.collectionSet=!1},ADD(e,t){e.collection.push(t)},UPDATE(e,t){const n=Et(e.collection,["id",parseInt(t.id)]);n!==-1&&(e.collection[n]=t.item)},REMOVE(e,t){const n=Et(e.collection,["id",parseInt(t)]);n!=-1&&e.collection.splice(n,1)},SET_ACCOUNT_AS_PRIMARY(e,t){e.collection.forEach((n,o)=>{e.collection[o].is_primary=n.id==t})}},aFe={async fetch({state:e,commit:t},n={}){if(e.collectionSet)return e.collection;let{data:o}=await Innoclapps.request(e.endpoint,n);return t("SET",o),o},removePrimary({state:e,commit:t}){Innoclapps.request().delete(`${e.endpoint}/primary`).then(()=>{t("SET_ACCOUNT_AS_PRIMARY",null)})},setPrimary({state:e,commit:t},n){Innoclapps.request().put(`${e.endpoint}/${n}/primary`).then(()=>{t("SET_ACCOUNT_AS_PRIMARY",n)})},enableSync({state:e,commit:t},n){Innoclapps.request().post(`${e.endpoint}/${n}/sync/enable`).then(({data:o})=>{t("UPDATE",{id:o.id,item:o})})},disableSync({state:e,commit:t},n){Innoclapps.request().post(`${e.endpoint}/${n}/sync/disable`).then(({data:o})=>{t("UPDATE",{id:o.id,item:o})})},async destroy(e,t){let{data:n}=await Innoclapps.request().delete(`${x5.endpoint}/${t}`);return e.commit("REMOVE",t),e.dispatch("updateUnreadCountUI",n.unread_count),n},updateUnreadCountUI(e,t){e.commit("UPDATE_SIDEBAR_MENU_ITEM",{id:"inbox",data:{badge:t}},{root:!0})},decrementUnreadCountUI(e){let t=e.rootGetters.getSidebarMenuItem("inbox");t.badge<1||e.dispatch("updateUnreadCountUI",t.badge-1)}},rFe={namespaced:!0,state:x5,mutations:oFe,actions:aFe},lFe={__name:"RecordTabEmails",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("Icon"),a=d("IBadge"),r=d("ITab");return Un([e.resource.unread_emails_for_user_count],()=>l(r,null,{default:p(()=>[l(o,{icon:"Mail"}),le(" "+Z(t.$t("mailclient::mail.emails"))+" ",1),ne(l(a,{variant:"info",text:e.resource.unread_emails_for_user_count,pill:""},null,8,["text"]),[[pe,e.resource.unread_emails_for_user_count]])]),_:1}),n,0)}}},sFe=["title"],iFe={key:0},k5={__name:"ScheduledEmailsTable",props:{isFloating:Boolean},emits:["sent","deleted"],setup(e,{emit:t}){const n=t,o={sent:"success",sending:"neutral",pending:"info",failed:"danger"},{localizedDateTime:a}=rt(),{t:r}=Ee(),s=M(null),i=M(null),u=M([{key:"subject",label:r("mailclient::inbox.subject"),tdClass:"font-medium"},{key:"to",label:r("mailclient::inbox.to")},{key:"scheduled_by",label:r("mailclient::schedule.scheduled_by")},{key:"scheduled_at",label:r("mailclient::schedule.scheduled_at"),sortable:!0},{key:"status",label:r("mailclient::schedule.status")},{key:"actions",label:""}]);async function c(f){i.value=f,await Innoclapps.request().post(`/emails/scheduled/${f}/send`),i.value=null,n("sent",f),s.value.reload()}async function m(f,v=!0){v&&await Innoclapps.confirm(),await Innoclapps.request().delete(`/emails/scheduled/${f}`),n("deleted",f),s.value.reload()}return(f,v)=>{const y=d("ITextSmall"),b=d("IBadge"),w=d("ITableRowAction"),k=d("ITableRowActions"),x=d("ISpinner"),I=d("IAlertBody"),C=d("IAlert"),S=d("ITableCell"),T=d("ITableRow");return g(),A(Kp,{ref_key:"tableRef",ref:s,"table-id":"scheduled-emails","request-uri":"emails/scheduled",fields:u.value,searchable:!1},{scheduled_at:p(({row:E})=>[le(Z(h(a)(E.scheduled_at))+" ",1),E.sent_at?(g(),A(y,{key:0,class:"block"},{default:p(()=>[le(Z(f.$t("mailclient::schedule.sent_at"))+": "+Z(h(a)(E.sent_at)),1)]),_:2},1024)):K("",!0)]),status:p(({row:E})=>[l(b,{variant:o[E.status],text:f.$t("mailclient.schedule.statuses."+E.status)},null,8,["variant","text"])]),scheduled_by:p(({row:E})=>[le(Z(E.user.name)+" ",1),l(y,{class:"block"},{default:p(()=>[le(Z(h(a)(E.created_at)),1)]),_:2},1024)]),to:p(({row:E})=>[(g(!0),D(fe,null,Ie(E.to,$=>(g(),D("span",{key:$.address,class:"block",title:$.address},Z($.name||$.address),9,sFe))),128))]),actions:p(({row:E})=>[ne(_("div",null,[E.status!=="sending"?(g(),A(k,{key:0,disabled:!!i.value},{default:p(()=>[E.authorizations.delete?(g(),A(w,{key:0,text:f.$t(E.status==="pending"?"mailclient::schedule.cancel_and_delete":"core::app.delete"),"confirm-text":f.$t("core::app.confirm"),confirmable:e.isFloating,onConfirmed:$=>m(E.id,!1),onClick:$=>e.isFloating?void 0:m(E.id)},null,8,["text","confirm-text","confirmable","onConfirmed","onClick"])):K("",!0),E.status!=="sent"?(g(),A(w,{key:1,text:f.$t("mailclient::schedule.send_now"),onClick:$=>c(E.id)},null,8,["text","onClick"])):K("",!0)]),_:2},1032,["disabled"])):K("",!0)],512),[[pe,!i.value||i.value&&i.value!==E.id]]),i.value&&i.value==E.id?(g(),A(x,{key:0,class:"size-4 text-success-500"})):K("",!0)]),"before-row":p(({row:E})=>[E.fail_reason||E.retry_after?(g(),A(T,{key:0},{default:p(()=>[l(S,{colspan:"6"},{default:p(()=>[l(C,{class:"-mx-6 -my-3 rounded-none",variant:E.retry_after?"warning":"danger"},{default:p(()=>[l(I,null,{default:p(()=>[E.retry_after?(g(),D("p",iFe,Z(f.$t("mailclient::schedule.will_retry_at",{date:h(a)(E.retry_after)})),1)):K("",!0),_("p",null,Z(E.fail_reason),1)]),_:2},1024)]),_:2},1032,["variant"])]),_:2},1024)]),_:2},1024)):K("",!0)]),_:1},8,["fields"])}}},uFe={class:"[&>[data-slot=header]]:-mx-4 sm:[&>[data-slot=header]]:-mx-6"},cFe={class:"text-right"},dFe={__name:"ScheduledEmailsModalTable",props:{requestQueryString:Object},emits:["sent","deleted"],setup(e){return(t,n)=>{const o=d("IButton"),a=d("IModal");return g(),A(a,{size:"xxl",title:t.$t("mailclient::schedule.scheduled_emails")},{"modal-footer":p(({cancel:r})=>[_("div",cFe,[l(o,{variant:"secondary",text:t.$t("core::app.hide"),onClick:r},null,8,["text","onClick"])])]),default:p(()=>[_("div",uFe,[l(k5,{class:"[--gutter:theme(spacing.6)] sm:[--gutter:theme(spacing.8)]","request-query-string":e.requestQueryString,"is-floating":"",bleed:"",onSent:n[0]||(n[0]=r=>t.$emit("sent",r)),onDeleted:n[1]||(n[1]=r=>t.$emit("deleted",r))},null,8,["request-query-string"])])]),_:1},8,["title"])}}},mFe={class:"sm:flex sm:items-start sm:justify-between"},fFe={class:"mt-5 sm:ml-6 sm:mt-0"},pFe={class:"mt-3 space-x-3 text-base font-medium sm:text-sm"},vFe={class:"mt-3 space-y-4 sm:mt-7"},Lm="emails",hFe={__name:"RecordTabEmailsPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Pe("synchronizeResource"),o=It(),a=M(!1),r=M(!1),s=M(null),i=M(null),u=M(null),{dataLoadedFirstTime:c,focusToAssociateableElement:m,searchResults:f,isSearching:v,hasSearchResults:y,performSearch:b,search:w,loadData:k,infiniteHandler:x,refresh:I}=gs({resourceName:t.resourceName,resource:gt(t,"resource"),scrollElement:t.scrollElement,infinityRef:s,synchronizeResource:n,timelineRelation:Lm}),{newMessageAdditionalAssociations:C}=w5(gt(t,"resourceName"),gt(t,"resource")),{emailAccounts:S}=ya(),T=O(()=>Vt(f.value||t.resource.emails,"date","desc")),E=O(()=>T.value.length>0),$=O(()=>{if(t.resource.email)return V(t.resource,t.resourceName);if(Object.keys(t.resource).length===0)return[];if(t.resourceName==="contacts"){if(t.resource.companies[0])return V(t.resource.companies[0],"companies")}else if(t.resourceName==="companies"){if(t.resource.contacts[0])return V(t.resource.contacts[0],"contacts")}else if(t.resourceName==="deals"){if(t.resource.contacts[0])return V(t.resource.contacts[0],"contacts");if(t.resource.companies[0])return V(t.resource.companies[0],"companies")}return[]});function F(){R(),I()}async function R(){const{data:H}=await Innoclapps.request("/emails/scheduled/count",{params:{via_resource:t.resourceName,via_resource_id:t.resourceId}});u.value=H.count}function B(){k(),u.value===null&&R()}function V(H,j){return H.email?[{address:H.email,name:H.display_name,id:H.id,resourceName:j}]:[]}function P(H=!0){a.value=H,H&&ze(()=>i.value.subjectRef.focus())}function z(H){n({[Lm]:[H]})}return o.query.resourceId&&o.query.section===Lm&&Yr(c,()=>{m(o.query.resourceId,"email")}),Ut("email-accounts-sync-finished",I),Ut("email-sent",z),Ut("email-scheduled",R),(H,j)=>{const N=d("ITextDark"),L=d("IText"),U=d("IButton"),ee=d("ILink"),G=d("SearchInput"),W=d("ICardBody"),ae=d("ICard"),ue=d("ITabPanel"),ce=Ve("i-tooltip");return g(),A(ue,{lazy:!h(c),onActivatedOnce:B},{default:p(()=>[l(ae,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(W,null,{default:p(()=>[_("div",mFe,[_("div",null,[l(N,{class:"font-semibold",text:H.$t("mailclient.mail.manage_emails")},null,8,["text"]),l(L,{class:"max-w-xl",text:H.$t("mailclient.mail.info")},null,8,["text"])]),_("div",fFe,[ne((g(),D("div",null,[l(U,{variant:"primary",icon:"PlusSolid",disabled:!h(S).length,text:H.$t("mailclient::mail.create"),onClick:j[0]||(j[0]=oe=>P(!0))},null,8,["disabled","text"])])),[[ce,h(S).length?null:H.$t("mailclient::mail.account.integration_not_configured")]])])]),_("div",pFe,[l(ee,{to:{name:"email-accounts-index"},text:H.$t("mailclient::mail.account.connect")},null,8,["text"]),ne(l(ee,{onClick:j[1]||(j[1]=oe=>r.value=!0)},{default:p(()=>[le(Z(H.$t("mailclient::schedule.scheduled_emails"))+" ("+Z(u.value)+") ",1)]),_:1},512),[[pe,u.value&&u.value>0]])]),ne(l(G,{modelValue:h(w),"onUpdate:modelValue":[j[2]||(j[2]=oe=>$n(w)?w.value=oe:null),h(b)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[pe,E.value||h(w)]])]),_:1})]),_:1}),l(Td,{ref_key:"composeRef",ref:i,visible:a.value,"resource-name":e.resourceName,"resource-id":e.resourceId,"related-resource":e.resource,associations:h(C),to:$.value,onHidden:j[3]||(j[3]=oe=>P(!1))},null,8,["visible","resource-name","resource-id","related-resource","associations","to"]),l(dFe,{visible:r.value,"onUpdate:visible":j[4]||(j[4]=oe=>r.value=oe),"request-query-string":{via_resource:e.resourceName,via_resource_id:e.resourceId},onSent:F,onDeleted:R},null,8,["visible","request-query-string"]),_("div",vFe,[(g(!0),D(fe,null,Ie(T.value,oe=>(g(),A(I5,{key:oe.id,email:oe,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["email","via-resource","via-resource-id","related-resource"]))),128))]),ne(l(L,{class:"mt-6 text-center",text:H.$t("core::app.no_search_results")},null,8,["text"]),[[pe,h(v)&&!h(y)]]),l(gr,{ref_key:"infinityRef",ref:s,"scroll-element":e.scrollElement,onHandle:j[5]||(j[5]=oe=>h(x)(oe))},null,8,["scroll-element"])]),_:1},8,["lazy"])}}};function $5(e=!1){const{form:t}=Ze(),n=M(e);function o(a){return t.set({id:a.id||null,connection_type:a.connection_type,email:a.email,password:a.password,username:a.username,imap_server:a.imap_server,imap_port:a.imap_port,imap_encryption:a.imap_encryption,smtp_server:a.smtp_server,smtp_port:a.smtp_port,smtp_encryption:a.smtp_encryption,validate_cert:a.validate_cert}),new Promise((r,s)=>{t.post("/mail/accounts/connection").then(i=>{n.value=!0,r(i)}).catch(i=>{n.value=!1,s(i)})})}return{testConnection:o,isSuccessful:n,testConnectionForm:t}}const gFe=Object.assign({name:"EmailAccountsFormFolder"},{__name:"EmailAccountsFormFolder",props:{folder:{required:!0,type:Object},folders:{required:!0,type:Array},index:{required:!0,type:Number}},setup(e){return(t,n)=>{const o=d("IFormCheckbox"),a=d("IFormCheckboxLabel"),r=d("IFormCheckboxField"),s=d("EmailAccountsFormFolder",!0);return g(),D(fe,null,[l(r,null,{default:p(()=>[l(o,{checked:e.folders[e.index].syncable,"onUpdate:checked":n[0]||(n[0]=i=>e.folders[e.index].syncable=i),disabled:!e.folder.selectable},null,8,["checked","disabled"]),l(a,{text:e.folder.display_name},null,8,["text"])]),_:1}),e.folder.children?(g(!0),D(fe,{key:0},Ie(e.folder.children,(i,u)=>(g(),D("div",{key:u+i.name,class:"ml-6"},[l(s,{folder:i,index:u,folders:e.folder.children},null,8,["folder","index","folders"])]))),128)):K("",!0)],64)}}}),bFe={__name:"EmailAccountsFormFolders",props:{folders:Array},setup(e){return(t,n)=>(g(!0),D(fe,null,Ie(e.folders,(o,a)=>(g(),A(gFe,{key:a+o.name,folder:o,index:a,folders:e.folders},null,8,["folder","index","folders"]))),128))}},V1={__name:"EmailAccountsFormFolderTypeSelect",props:yt(["form","field","folders","label","required"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue");return(n,o)=>{const a=d("ICustomSelect"),r=d("IFormError"),s=d("IFormGroup");return g(),A(s,{label:e.label,"label-for":e.field,required:e.required},{default:p(()=>[l(a,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=i=>t.value=i),clearable:!1,"input-id":e.field,options:e.folders,"option-label":i=>"--"+i.parent_id+"--"+i.display_name,reduce:i=>i.id},{option:p(i=>[le(Z(i.display_name.replace("--"+i.parent_id+"--","")),1)]),"selected-option":p(i=>[le(Z(i.display_name.replace("--"+i.parent_id+"--","")),1)]),_:1},8,["modelValue","input-id","options","option-label","reduce"]),l(r,{error:e.form.getError(e.field)},null,8,["error"])]),_:1},8,["label","label-for","required"])}}},yFe=["innerHTML"],_Fe={key:0,class:"mb-3 rounded-lg border border-neutral-200 px-4 py-3 dark:border-neutral-500/30"},IFe={class:"mt-3 flex flex-col items-center sm:flex-row sm:space-x-2"},wFe={class:"mb-4 mt-6"},xFe={class:"mb-4 font-medium text-neutral-700 dark:text-neutral-100"},kFe={class:"grid grid-cols-6 gap-6"},$Fe={class:"col-span-2"},CFe={class:"col-span-4"},SFe={class:"mb-4 font-medium text-neutral-700 dark:text-neutral-100"},TFe={class:"grid grid-cols-6 gap-6"},EFe={class:"col-span-2"},FFe={class:"col-span-4"},AFe={class:"mb-3 rounded-lg border border-neutral-200 p-3 dark:border-neutral-500/30"},RFe={class:"rounded-lg border border-neutral-200 p-3 dark:border-neutral-500/30"},DFe={class:"flex items-center"},OFe={class:"mr-3"},BFe=["textContent"],NFe={key:1},PFe={key:2,class:"mt-4"},C5={__name:"EmailAccountsFormFields",props:{account:Object,type:{required:!0,type:String},form:{required:!0,type:Object},testConnectionForm:{required:!0,type:Object}},emits:["submit","ready","configError"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Ee(),{scriptConfig:s,currentUser:i,setting:u,isMicrosoftGraphConfigured:c,isGoogleApiConfigured:m}=Ne(),{localizedDate:f,UTCDateTimeInstance:v}=rt(),{emailAccounts:y}=ya(),b=[{text:r("mailclient::mail.account.sync_period_now"),value:v.toISO()},{text:r("mailclient::mail.account.sync_period_1_month_ago"),value:v.minus({months:1}).toISO()},{text:r("mailclient::mail.account.sync_period_3_months_ago"),value:v.minus({months:3}).toISO()},{text:r("mailclient::mail.account.sync_period_6_months_ago"),value:v.minus({months:6}).toISO(),warning:!0}],w=M(!1);Yr(()=>{var L;return(L=o.account)==null?void 0:L.alias_email},L=>{L&&(w.value=!0)});const k=s("mail.accounts.encryptions"),x=s("mail.accounts.connections"),I=M([]),C=M(null),S=O(()=>px(I.value,L=>ut(y.value,["email",L.email]))),T=O(()=>S.value.length>0),E=O(()=>{let L=ut(b,["value",o.form.initial_sync_from]);return L?L.warning===!0:!1}),$=O(()=>o.form.from_name_header?o.form.from_name_header.replace("{agent}",i.value.name).replace("{company}",u("company_name")||""):""),F=O(()=>!o.account),R=O(()=>o.form.connection_type==="Imap"),B=O(()=>F.value&&!R.value),V=O(()=>R.value),P=O(()=>o.form.folders?o.form.folders.length>0:!1);function z(L){C.value=L}function H(L){z(null),L=="Outlook"&&!c()?z(`Microsoft application not configured,
                        you must <a href="/settings/integrations/microsoft" rel="noopener noreferrer" target="_blank" class="font-medium underline text-danger-700 hover:text-danger-600 focus:outline-none">configure</a> your
                        Microsoft application in order to connect Outlook mail client.`):L=="Gmail"&&!m()?z(`Google application project not configured,
                        you must <a href="/settings/integrations/google" rel="noopener noreferrer" target="_blank" class="font-medium underline text-danger-700 hover:text-danger-600 focus:outline-none">configure</a> your
                        Google application project in order to connect Gmail mail client.`):L==="Imap"&&!s("requirements.imap")&&z('In order to use IMAP account type, you will need to enable the PHP extension "imap".')}function j(){Innoclapps.request("oauth/accounts").then(({data:L})=>I.value=L)}function N(L){switch(L.type){case"microsoft":o.form.fill("connection_type","Outlook");break;case"google":o.form.fill("connection_type","Gmail");break;default:o.form.fill("connection_type",L.type)}a("submit")}return Je(()=>{j(),a("ready")}),t({initialSyncOptions:b}),(L,U)=>{const ee=d("IAlertBody"),G=d("IAlert"),W=d("ICustomSelect"),ae=d("IFormError"),ue=d("IFormGroup"),ce=d("ITextDark"),oe=d("IButton"),ie=d("IFormLabel"),Q=d("IFormRadio"),se=d("IFormRadioLabel"),me=d("IFormRadioField"),xe=d("IFormInput"),de=d("IFormCheckbox"),he=d("IFormCheckboxLabel"),Y=d("IFormCheckboxField"),X=d("ITextDisplay"),re=d("IText"),we=d("Icon"),Ce=Ve("t");return g(),D(fe,null,[l(G,{class:"mb-5",show:C.value!==null},{default:p(()=>[l(ee,null,{default:p(()=>[_("div",{innerHTML:C.value},null,8,yFe)]),_:1})]),_:1},8,["show"]),_("div",{class:be({"mb-3 rounded-lg border border-warning-400 px-4 py-3":!e.form.connection_type})},[l(ue,{"label-for":"connection_type",label:L.$t("mailclient::mail.account.type"),required:""},{default:p(()=>[l(W,{modelValue:e.form.connection_type,"onUpdate:modelValue":U[0]||(U[0]=ge=>e.form.connection_type=ge),options:h(x),clearable:!1,placeholder:L.$t("mailclient::mail.account.select_type"),disabled:!F.value,onOptionSelected:H},null,8,["modelValue","options","placeholder","disabled"]),l(ae,{error:e.form.getError("connection_type")},null,8,["error"])]),_:1},8,["label"]),F.value&&T.value?(g(),D("div",{key:0,class:be({"mb-3":e.form.connection_type})},[l(ce,{class:"mb-2 mt-4",text:L.$t("core::oauth.or_choose_existing")},null,8,["text"]),(g(!0),D(fe,null,Ie(S.value,ge=>(g(),A(Xu,{key:ge.id,class:"mb-2",account:ge,"with-reconnect-link":!1},{default:p(()=>[l(oe,{class:"ml-2",variant:"info",disabled:ge.requires_auth,text:L.$t("core::oauth.connect"),soft:"",onClick:Re=>N(ge)},null,8,["disabled","text","onClick"])]),_:2},1032,["account"]))),128))],2)):K("",!0)],2),F.value?(g(),D("div",_Fe,[l(ie,{label:L.$t("mailclient::mail.account.sync_emails_from")},null,8,["label"]),_("div",IFe,[(g(),D(fe,null,Ie(b,ge=>l(me,{key:ge.value,class:"self-start"},{default:p(()=>[l(Q,{modelValue:e.form.initial_sync_from,"onUpdate:modelValue":U[1]||(U[1]=Re=>e.form.initial_sync_from=Re),name:"initial_sync_from",value:ge.value},null,8,["modelValue","value"]),l(se,{text:ge.text},null,8,["text"])]),_:2},1024)),64))]),E.value?(g(),A(G,{key:0,class:"mt-4"},{default:p(()=>[l(ee,null,{default:p(()=>[le(Z(L.$t("mailclient::mail.account.sync_period_note",{date:h(f)(e.form.initial_sync_from)})),1)]),_:1})]),_:1})):K("",!0)])):K("",!0),_("div",{class:be({"pointer-events-none blur-sm":B.value})},[l(ue,{"label-for":"email",label:L.$t("mailclient::mail.account.email_address"),required:""},{default:p(()=>[l(xe,{modelValue:e.form.email,"onUpdate:modelValue":U[2]||(U[2]=ge=>e.form.email=ge),name:"email",spellcheck:"false",autocomplete:"off",type:"email",disabled:!F.value},null,8,["modelValue","disabled"]),l(ae,{error:e.form.getError("email")},null,8,["error"])]),_:1},8,["label"]),w.value?(g(),A(ue,{key:0,"label-for":"alias_email",label:L.$t("mailclient::mail.account.enter_alias"),description:L.$t("mailclient::mail.account.use_aliass_info")},{default:p(()=>[l(xe,{modelValue:e.form.alias_email,"onUpdate:modelValue":U[3]||(U[3]=ge=>e.form.alias_email=ge),name:"alias_email",spellcheck:"false",autocomplete:"off",type:"email"},null,8,["modelValue"]),l(ae,{error:e.form.getError("email")},null,8,["error"])]),_:1},8,["label","description"])):K("",!0),l(ue,null,{default:p(()=>[F.value?K("",!0):(g(),A(Y,{key:0},{default:p(()=>[l(de,{checked:w.value,"onUpdate:checked":U[4]||(U[4]=ge=>w.value=ge),onChange:U[5]||(U[5]=ge=>e.form.alias_email=null)},null,8,["checked"]),l(he,{text:L.$t("mailclient::mail.account.use_aliass")},null,8,["text"])]),_:1})),l(Y,null,{default:p(()=>[l(de,{checked:e.form.create_contact,"onUpdate:checked":U[6]||(U[6]=ge=>e.form.create_contact=ge),onChange:U[7]||(U[7]=ge=>e.form.alias_email=null)},null,8,["checked"]),l(he,{text:L.$t("mailclient::mail.account.create_contact")},null,8,["text"])]),_:1})]),_:1})],2),ne(_("div",{class:be({"pointer-events-none blur-sm":B.value})},[l(ue,{"label-for":"password",label:L.$t("mailclient::mail.account.password"),required:""},{default:p(()=>[l(xe,{modelValue:e.form.password,"onUpdate:modelValue":U[8]||(U[8]=ge=>e.form.password=ge),spellcheck:"false",autocomplete:"new-password",type:"password",placeholder:e.form.id?"•••••••••••":""},null,8,["modelValue","placeholder"]),l(ae,{error:e.form.getError("password")},null,8,["error"])]),_:1},8,["label"]),l(ue,{"label-for":"username",label:L.$t("mailclient::mail.account.username"),optional:""},{default:p(()=>[l(xe,{id:"username",modelValue:e.form.username,"onUpdate:modelValue":U[9]||(U[9]=ge=>e.form.username=ge),autocomplete:"off",spellcheck:"false",name:"username"},null,8,["modelValue"])]),_:1},8,["label"]),_("div",wFe,[ne(_("h5",xFe,null,512),[[Ce,"mailclient.mail.account.incoming_mail"]]),l(ue,{"label-for":"imap_server",label:L.$t("mailclient::mail.account.server"),required:""},{default:p(()=>[l(xe,{modelValue:e.form.imap_server,"onUpdate:modelValue":U[10]||(U[10]=ge=>e.form.imap_server=ge),name:"imap_server",placeholder:"imap.example.com",spellcheck:"false",autocomplete:"off"},null,8,["modelValue"]),l(ae,{error:e.form.getError("imap_server")},null,8,["error"])]),_:1},8,["label"]),_("div",kFe,[_("div",$Fe,[l(ue,{"label-for":"imap_port",label:L.$t("mailclient::mail.account.port"),required:""},{default:p(()=>[l(xe,{modelValue:e.form.imap_port,"onUpdate:modelValue":U[11]||(U[11]=ge=>e.form.imap_port=ge),name:"imap_port",type:"number",autocomplete:"off"},null,8,["modelValue"]),l(ae,{error:e.form.getError("imap_port")},null,8,["error"])]),_:1},8,["label"])]),_("div",CFe,[l(ue,{"label-for":"imap_encryption",label:L.$t("mailclient::mail.account.encryption")},{default:p(()=>[l(W,{modelValue:e.form.imap_encryption,"onUpdate:modelValue":U[12]||(U[12]=ge=>e.form.imap_encryption=ge),options:h(k),placeholder:L.$t("mailclient::mail.account.without_encryption")},null,8,["modelValue","options","placeholder"]),l(ae,{error:e.form.getError("imap_encryption")},null,8,["error"])]),_:1},8,["label"])])])]),ne(_("h5",SFe,null,512),[[Ce,"mailclient.mail.account.outgoing_mail"]]),l(ue,{"label-for":"smtp_server",label:L.$t("mailclient::mail.account.server"),required:""},{default:p(()=>[l(xe,{modelValue:e.form.smtp_server,"onUpdate:modelValue":U[13]||(U[13]=ge=>e.form.smtp_server=ge),name:"smtp_server",placeholder:"smtp.example.com",spellcheck:"false",autocomplete:"off"},null,8,["modelValue"]),l(ae,{error:e.form.getError("smtp_server")},null,8,["error"])]),_:1},8,["label"]),_("div",TFe,[_("div",EFe,[l(ue,{"label-for":"smtp_port",label:L.$t("mailclient::mail.account.port"),required:""},{default:p(()=>[l(xe,{modelValue:e.form.smtp_port,"onUpdate:modelValue":U[14]||(U[14]=ge=>e.form.smtp_port=ge),name:"smtp_port",type:"number",autocomplete:"off"},null,8,["modelValue"]),l(ae,{error:e.form.getError("smtp_port")},null,8,["error"])]),_:1},8,["label"])]),_("div",FFe,[l(ue,{"label-for":"smtp_encryption",label:L.$t("mailclient::mail.account.encryption")},{default:p(()=>[l(W,{modelValue:e.form.smtp_encryption,"onUpdate:modelValue":U[15]||(U[15]=ge=>e.form.smtp_encryption=ge),options:h(k),placeholder:L.$t("mailclient::mail.account.without_encryption")},null,8,["modelValue","options","placeholder"]),l(ae,{error:e.form.getError("smtp_encryption")},null,8,["error"])]),_:1},8,["label"])])]),l(ue,null,{default:p(()=>[l(Y,null,{default:p(()=>[l(de,{checked:e.form.validate_cert,"onUpdate:checked":U[16]||(U[16]=ge=>e.form.validate_cert=ge),value:0,"unchecked-value":1},null,8,["checked"]),l(he,{text:L.$t("mailclient::mail.account.allow_non_secure_certificate")},null,8,["text"])]),_:1}),l(ae,{error:e.form.getError("validate_cert")},null,8,["error"])]),_:1})],2),[[pe,V.value||F.value]]),_("div",{class:be({"pointer-events-none blur-sm":B.value,hidden:e.form.connection_type==="Outlook"})},[l(X,{class:"mb-2 mt-6 font-medium",text:L.$t("mailclient.mail.from_header")},null,8,["text"]),_("div",AFe,[l(ue,{label:L.$t("mailclient::mail.from_name"),description:L.$t("mailclient::mail.placeholders_info",{placeholders:"{agent}, {company}"})},{default:p(()=>[l(xe,{modelValue:e.form.from_name_header,"onUpdate:modelValue":U[17]||(U[17]=ge=>e.form.from_name_header=ge),name:"from_name_header",autocomplete:"off"},null,8,["modelValue"]),l(ae,{error:e.form.getError("from_name_header")},null,8,["error"])]),_:1},8,["label","description"]),l(ue,null,{default:p(()=>[l(X,{text:L.$t("core::app.preview")},null,8,["text"]),l(re,{class:"mb-2",text:L.$t("mailclient.mail.from_header_info")},null,8,["text"]),_("div",RFe,[_("div",DFe,[_("div",OFe,[l(we,{icon:"Mail",class:"size-6 text-neutral-600 dark:text-neutral-300"})]),_("div",null,[l(ce,{class:"font-medium",text:$.value},null,8,["text"]),ne(l(re,{text:"<"+e.form.email+">"},null,8,["text"]),[[pe,e.form.email]])])])])]),_:1})])],2),ne(_("div",{class:be({"pointer-events-none blur-sm":B.value})},[e.testConnectionForm.errors&&e.testConnectionForm.errors.any()?(g(),A(ue,{key:0},{default:p(()=>[l(G,{variant:"danger",class:"mt-3 space-y-1"},{default:p(()=>[l(ee,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.testConnectionForm.errors.all(),(ge,Re)=>(g(),D("p",{key:Re,textContent:Z(e.testConnectionForm.getError(Re))},null,8,BFe))),128))]),_:1})]),_:1})]),_:1})):K("",!0)],2),[[pe,V.value]]),e.account?(g(),D("div",NFe,[l(V1,{modelValue:e.form.sent_folder_id,"onUpdate:modelValue":U[18]||(U[18]=ge=>e.form.sent_folder_id=ge),field:"sent_folder_id",form:e.form,folders:e.account.folders,required:!0,label:L.$t("mailclient::mail.account.sent_folder")},null,8,["modelValue","form","folders","label"]),l(V1,{modelValue:e.form.trash_folder_id,"onUpdate:modelValue":U[19]||(U[19]=ge=>e.form.trash_folder_id=ge),field:"trash_folder_id",form:e.form,required:!0,folders:e.account.folders,label:L.$t("mailclient::mail.account.trash_folder")},null,8,["modelValue","form","folders","label"])])):K("",!0),P.value?(g(),D("div",PFe,[l(ce,{class:"font-medium"},{default:p(()=>[le(Z(L.$t("mailclient::mail.account.active_folders")),1)]),_:1}),l(re,{class:"-mt-1 mb-2"},{default:p(()=>[le(Z(L.$t("mailclient::mail.account.active_folders_info")),1)]),_:1}),l(bFe,{folders:e.form.folders},null,8,["folders"])])):K("",!0)],64)}}},MFe={__name:"EmailAccountsCreate",setup(e){const{t}=Ee(),n=It(),o=_t(),a=cn(),{scriptConfig:r,currentUser:s}=Ne(),{form:i}=Ze(),{createOAuthConnectUrl:u}=ya(),{isSuccessful:c,testConnectionForm:m,testConnection:f}=$5(),v=r("requirements"),y=M(null),b=M(null),w=O(()=>!c.value&&k.value||i.busy||b.value!==null||!i.connection_type),k=O(()=>i.connection_type==="Imap");function x(){return u(i.connection_type,n.query.type)+"?period="+i.initial_sync_from}function I(){i.set("initial_sync_from",y.value.initialSyncOptions[1].value)}function C(){if(!k.value){window.location.href=x();return}i.post("/mail/accounts").then(E=>{a.commit("emailAccounts/ADD",E),Innoclapps.success(t("mailclient::mail.account.created")),o.push({name:"email-accounts-index"})})}function S(){f(i).then(E=>{i.requires_auth=!1,i.folders=E.folders})}function T(){let E={connection_type:null,email:null,password:null,username:null,imap_server:null,imap_port:993,imap_encryption:"ssl",smtp_server:null,smtp_port:465,smtp_encryption:"ssl",validate_cert:1,folders:[],create_contact:!1,from_name_header:r("mail.accounts.from_name")};n.query.type==="personal"?E.user_id=s.value.id:n.query.type!=="shared"&&o.push({name:"404"}),i.set(E)}return T(),(E,$)=>{const F=d("IButton"),R=d("ISlideover");return g(),A(R,{title:E.$t("mailclient::mail.account.create"),visible:"","static-backdrop":"",form:"",onSubmit:C,onHidden:E.$router.back},{"modal-ok":p(()=>[k.value&&h(v).imap?(g(),A(F,{key:0,variant:"primary",loading:h(m).busy,disabled:h(m).busy,text:E.$t("mailclient::mail.account.test_connection"),onClick:S},null,8,["loading","disabled","text"])):K("",!0),l(F,{type:"submit",variant:"primary",disabled:w.value,text:E.$t("mailclient::mail.account.connect"),loading:h(i).busy},null,8,["disabled","text","loading"])]),default:p(()=>[l(C5,{ref_key:"formFieldsRef",ref:y,type:E.$route.query.type,"test-connection-form":h(m),form:h(i),onReady:I,onConfigError:$[0]||($[0]=B=>b.value=B),onSubmit:C},null,8,["type","test-connection-form","form"])]),_:1},8,["title","onHidden"])}}},VFe={__name:"EmailAccountsEdit",setup(e){const t=It(),n=_t(),o=cn(),{t:a}=Ee(),{scriptConfig:r}=Ne(),{form:s}=Ze(),{isSuccessful:i,testConnectionForm:u,testConnection:c}=$5(!0),m=r("requirements"),f=M({}),v=O(()=>s.connection_type==="Imap"),y=O(()=>t.params.id),b=O(()=>f.value.is_sync_stopped||f.value.is_sync_disabled);function w(){s.put(`/mail/accounts/${t.params.id}`).then(I=>{o.commit("emailAccounts/UPDATE",{id:I.id,item:I}),Innoclapps.success(a("mailclient::mail.account.updated")),n.back()})}function k(){c(s).then(I=>{s.requires_auth=!1,s.folders=I.folders})}function x(I){I&&Innoclapps.request(`/mail/accounts/${I}`).then(({data:C})=>{s.set(C),s.folders=C.folders_tree,f.value=C})}return $e(y,x,{immediate:!0}),(I,C)=>{const S=d("IAlertBody"),T=d("IAlert"),E=d("IButton"),$=d("ISlideover");return g(),A($,{title:I.$t("mailclient::mail.account.edit"),visible:"","static-backdrop":"",form:"",onHidden:I.$router.back,onSubmit:w},{"modal-ok":p(()=>[v.value&&h(m).imap?(g(),A(E,{key:0,variant:"primary",loading:h(u).busy,disabled:h(u).busy,text:I.$t("mailclient::mail.account.test_connection"),onClick:k},null,8,["loading","disabled","text"])):K("",!0),l(E,{type:"submit",variant:"primary",loading:h(s).busy,text:I.$t("core::app.save"),disabled:!h(i)||h(s).busy},null,8,["loading","text","disabled"])]),default:p(()=>[b.value?(g(),A(T,{key:0,class:"mb-4",variant:"warning"},{default:p(()=>[l(S,null,{default:p(()=>[le(Z(f.value.sync_state_comment),1)]),_:1})]),_:1})):K("",!0),l(C5,{form:h(s),"test-connection-form":h(u),type:f.value.type||"",account:f.value},null,8,["form","test-connection-form","type","account"])]),_:1},8,["title","onHidden"])}}},LFe={class:"mx-auto max-w-7xl"},qFe={class:"flex w-full flex-col space-x-0 space-y-1 sm:flex-row sm:space-x-2 sm:space-y-0"},UFe={class:"grid sm:inline"},jFe={key:0},zFe=["textContent"],HFe={class:"flex items-center px-4 py-4 sm:px-6"},WFe={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},GFe={class:"flex text-base/6 sm:text-sm/6"},KFe={class:"mt-2 flex"},ZFe={class:"flex items-center space-x-1 text-base/6 sm:text-sm/6"},YFe={class:"mt-4 shrink-0 sm:ml-5 sm:mt-0"},XFe={class:"flex space-x-6"},QFe={class:"mx-auto max-w-2xl p-4 sm:p-6"},JFe={role:"list",class:"mt-6 grid grid-cols-1 gap-6 border-y border-neutral-200 py-6 dark:border-neutral-500/30 lg:grid-cols-2"},e6e={class:"relative -m-2 flex items-center space-x-4 rounded-xl p-2"},t6e={class:"flex h-10 w-12 shrink-0 items-center justify-center rounded-lg border border-primary-200 bg-primary-50 dark:border-primary-400/30 dark:bg-primary-400/10"},n6e={class:"mt-6 space-y-1 sm:space-x-2 sm:text-right"},o6e={class:"inline-block w-full sm:w-auto"},a6e={__name:"EmailAccountsIndex",setup(e){const{t}=Ee(),n=_t(),o=It(),a=cn(),{emailAccounts:r,emailAccountsBeingLoaded:s,latestEmailAccount:i,fetchEmailAccounts:u,createOAuthConnectUrl:c}=ya(),m=[{description:t("mailclient::mail.account.featured.sync"),icon:"Refresh"},{description:t("mailclient::mail.account.featured.save_time"),icon:"DocumentAdd"},{description:t("mailclient::mail.account.featured.placeholders"),icon:"CodeBracket"},{description:t("mailclient::mail.account.featured.signature"),icon:"Pencil"},{description:t("mailclient::mail.account.featured.associations",{resources:t("contacts::contact.contacts")+", "+t("contacts::company.companies"),resource:t("deals::deal.deals")}),icon:"Mail"},{description:t("mailclient::mail.account.featured.types"),icon:"CheckCircle"}];async function f(I){await Innoclapps.confirm(t("mailclient::mail.account.delete_warning")),await Innoclapps.request().delete(`/mail/accounts/${I}`),a.commit("emailAccounts/REMOVE",I),Innoclapps.success(t("mailclient::mail.account.deleted"))}function v(){Innoclapps.confirm({message:t("mailclient::mail.account.create_shared_confirmation_message"),title:!1,icon:"QuestionMarkCircle",iconWrapperColorClass:"bg-info-100",iconColorClass:"text-info-400",html:!0,confirmText:t("core::app.continue"),confirmVariant:"info"}).then(()=>n.push({name:"create-email-account",query:{type:"shared"}}))}function y(){n.push({name:"create-email-account",query:{type:"personal"}})}function b(I){n.push({name:"edit-email-account",params:{id:I.id}})}function w(I,C){I?a.dispatch("emailAccounts/setPrimary",C.id):a.dispatch("emailAccounts/removePrimary")}function k(I){let C=I.is_sync_disabled?"enable":"disable";a.dispatch(`emailAccounts/${C}Sync`,I.id)}function x(I){I.connection_type==="Imap"?b(I):window.location.href=c(I.connection_type,I.type)+"?re_auth=1"}return u().finally(()=>{o.query.viaOAuth&&b(i.value)}),(I,C)=>{const S=d("NavbarSeparator"),T=d("IButton"),E=d("ICardHeading"),$=d("ICardActions"),F=d("ICardHeader"),R=d("IAlertBody"),B=d("IAlertActions"),V=d("IAlert"),P=d("IBadge"),z=d("IFormSwitchLabel"),H=d("IFormSwitch"),j=d("IFormSwitchField"),N=d("IDropdownItem"),L=d("IDropdownMinimal"),U=d("ICard"),ee=d("ITextDisplay"),G=d("IText"),W=d("Icon"),ae=d("IOverlay"),ue=d("RouterView"),ce=d("MainLayout"),oe=Ve("i-tooltip"),ie=Ve("t");return g(),A(ce,null,{actions:p(()=>[ne(l(S,{class:"hidden lg:block"},null,512),[[pe,h(r).length]]),ne(l(T,{variant:"secondary",icon:"Inbox",to:{name:"inbox"},text:I.$t("mailclient::inbox.inbox")},null,8,["text"]),[[pe,h(r).length]])]),default:p(()=>[ne(_("div",LFe,[l(F,null,{default:p(()=>[l(E,{text:I.$t("mailclient::mail.account.accounts")},null,8,["text"]),l($,{class:"mt-2 w-full sm:mt-0 sm:w-auto"},{default:p(()=>[_("div",qFe,[ne((g(),D("span",UFe,[l(T,{variant:"secondary",icon:"Share",disabled:I.$gate.isRegularUser(),text:I.$t("mailclient::mail.account.connect_shared"),onClick:v},null,8,["disabled","text"])])),[[oe,I.$t(I.$gate.isRegularUser()?"users::user.not_authorized":"mailclient::mail.account.create_shared_info")]]),l(T,{icon:"User",variant:"secondary",text:I.$t("mailclient::mail.account.connect_personal"),onClick:y},null,8,["text"])])]),_:1})]),_:1}),l(U,{overlay:h(s)},{default:p(()=>[l(li,{class:"divide-y divide-neutral-200 dark:divide-neutral-500/30",name:"flip-list",tag:"ul"},{default:p(()=>[(g(!0),D(fe,null,Ie(h(r),Q=>(g(),D("li",{key:Q.id},[Q.is_sync_stopped||Q.requires_auth?(g(),A(V,{key:0,variant:"warning"},{default:p(()=>[l(R,null,{default:p(()=>[Q.requires_auth?ne((g(),D("p",jFe,null,512)),[[ie,"core::oauth.requires_authentication"]]):K("",!0),Q.is_sync_stopped?(g(),D("p",{key:1,textContent:Z(Q.sync_state_comment)},null,8,zFe)):K("",!0)]),_:2},1024),Q.requires_auth?(g(),A(B,{key:0},{default:p(()=>[l(T,{variant:"warning",text:I.$t("core::oauth.re_authenticate"),ghost:"",onClick:se=>x(Q)},null,8,["text","onClick"])]),_:2},1024)):K("",!0)]),_:2},1024)):K("",!0),_("div",HFe,[_("div",WFe,[_("div",{class:be(["truncate",{"opacity-70":Q.is_sync_stopped||Q.is_sync_disabled}])},[_("div",GFe,[(g(),A(Rt(Q.authorizations.update?"a":"p"),{class:be(["truncate font-medium text-primary-600 dark:text-primary-400",Q.authorizations.update?"cursor-pointer":""]),onClick:se=>Q.authorizations.update?b(Q):""},{default:p(()=>[le(Z(Q.email)+" "+Z(Q.alias_email?`(${Q.alias_email})`:""),1)]),_:2},1032,["class","onClick"]))]),_("div",KFe,[_("div",ZFe,[Q.connection_type==="Gmail"?(g(),A(Ok,{key:0,class:"mr-3 size-5 shrink-0"})):Q.connection_type==="Outlook"?(g(),A(Bk,{key:1,class:"mr-3 size-5 shrink-0"})):K("",!0),Q.authorizations.update?(g(),A(P,{key:2,variant:"info",text:Q.connection_type},null,8,["text"])):K("",!0),l(P,{variant:Q.is_personal?"neutral":"info",text:I.$t("mailclient::mail.account."+Q.type)},null,8,["variant","text"]),Q.is_primary||h(r).length===1?(g(),A(P,{key:3,variant:"primary",text:I.$t("mailclient::mail.account.is_primary")},null,8,["text"])):K("",!0)])])],2),_("div",YFe,[_("div",XFe,[h(r).length>1?(g(),A(j,{key:0},{default:p(()=>[l(z,{text:I.$t("mailclient::mail.account.is_primary")},null,8,["text"]),l(H,{disabled:Q.is_sync_stopped,"model-value":Q.is_primary,onChange:se=>w(se,Q)},null,8,["disabled","model-value","onChange"])]),_:2},1024)):K("",!0),ne(l(j,null,{default:p(()=>[l(z,{text:I.$t("mailclient::mail.disable_sync")},null,8,["text"]),l(H,{"model-value":Q.is_sync_disabled,onChange:se=>k(Q)},null,8,["model-value","onChange"])]),_:2},1536),[[pe,!Q.is_sync_stopped&&Q.authorizations.update]])])])]),Q.authorizations.update||Q.authorizations.delete?(g(),A(L,{key:0,class:"ml-5 shrink-0 self-start sm:self-auto"},{default:p(()=>[Q.authorizations.update?(g(),A(N,{key:0,text:I.$t("core::app.edit"),onClick:se=>b(Q)},null,8,["text","onClick"])):K("",!0),Q.authorizations.delete?(g(),A(N,{key:1,text:I.$t("core::app.delete"),onClick:se=>f(Q.id)},null,8,["text","onClick"])):K("",!0)]),_:2},1024)):K("",!0)])]))),128))]),_:1})]),_:1},8,["overlay"])],512),[[pe,h(r).length]]),h(r).length?K("",!0):(g(),A(ae,{key:0,class:"m-auto max-w-5xl",show:h(s)},{default:p(()=>[ne(_("div",QFe,[l(ee,{text:I.$t("mailclient.mail.account.no_accounts_configured")},null,8,["text"]),l(G,{text:I.$t("mailclient.mail.account.no_accounts_configured_info")},null,8,["text"]),_("ul",JFe,[(g(),D(fe,null,Ie(m,(Q,se)=>_("li",{key:se,class:"flow-root"},[_("div",e6e,[_("div",t6e,[l(W,{class:"size-6 text-primary-600 dark:text-primary-400",icon:Q.icon},null,8,["icon"])]),_("div",null,[l(G,{class:"mt-1",text:Q.description},null,8,["text"])])])])),64))]),_("div",n6e,[ne((g(),D("span",o6e,[l(T,{class:"sm:w-justify-around w-full justify-center sm:w-auto",variant:"primary",icon:"Share",disabled:I.$gate.isRegularUser(),text:I.$t("mailclient::mail.account.connect_shared"),onClick:v},null,8,["disabled","text"])])),[[oe,I.$t(I.$gate.isRegularUser()?"users::user.not_authorized":"mailclient::mail.account.create_shared_info")]]),l(T,{class:"sm:w-justify-around w-full justify-center sm:w-auto",variant:"primary",icon:"User",text:I.$t("mailclient::mail.account.connect_personal"),onClick:y},null,8,["text"])])],512),[[pe,!h(s)]])]),_:1},8,["show"])),l(ue)]),_:1})}}},r6e={class:"font-sans text-base leading-[initial] dark:text-white sm:text-sm"},l6e={__name:"MessagePreview",props:{visibleText:null,hiddenText:null},setup(e){return(t,n)=>n[0]||(je(-1),n[0]=_("div",{class:"mail-text all-revert"},[_("div",r6e,[l(Ki,{html:e.visibleText},null,8,["html"]),l(v5,{text:e.hiddenText},null,8,["text"])])]),je(1),n[0])}},s6e={class:"sticky top-2 z-auto"},i6e={class:"mr-3 grow"},u6e=["textContent"],c6e={class:"mt-1.5 inline-flex items-center"},d6e={class:"mr-4 flex-none"},m6e={class:"mt-2 shrink-0 self-start sm:mt-0"},f6e={key:0,class:"flex items-center space-x-2"},p6e={id:"messageInfo",class:"flex pt-1"},v6e={class:"mr-2"},h6e={class:"mt-2 inline-flex"},g6e={class:"inline-flex flex-1 flex-wrap justify-end space-y-1 self-start sm:flex-nowrap sm:items-center sm:space-x-2 sm:space-y-0"},b6e=_("span",{class:"size-1 rounded-full bg-info-500"},null,-1),y6e=["textContent"],_6e={key:0,class:"mt-6"},I6e={key:0,class:"mb-3 mt-5"},w6e={__name:"InboxMessage",props:{account:{required:!0,type:Object}},setup(e){const t=e,n=Innoclapps.resourceName("emails"),{t:o}=Ee(),a=It(),r=_t(),s=cn(),i=bo(),{localizedDateTime:u}=rt(),{setLoading:c,isLoading:m}=An(),{TAGS_TYPE:f,syncTags:v}=Yv(),y=M(null),b=M({_placeholder:!0,avatar_url:"",from:{name:"",address:""},to:[],cc:[],bcc:[]}),w=M(!1),k=M(!1),x=M(!1),I=M(!1),C=M(!1),S=M(!1),T=M(!0),E=M([]),$=Pt([]),F=M({});let R=null;const B=O(()=>b.value._placeholder!==!0),V=O(()=>b.value.cc&&b.value.cc.length>0),P=O(()=>({folder_id:a.params.folder_id,account_id:a.params.account_id})),z=O(()=>B.value&&!b.value.is_draft),H=O(()=>b.value.subject?b.value.subject:o("mailclient::inbox.no_subject")),j=O(()=>B.value&&b.value.media.length>0),N=O(()=>`/inbox/emails/folders/${a.params.folder_id}/${a.params.id}`),L=O(()=>s.getters.getSidebarMenuItem("inbox").badge);async function U(){let{data:de}=await Innoclapps.request("contacts/search",{params:{q:b.value.from.address,search_fields:"email:="}});$.value=de,x.value=!0}async function ee(de){let he=await v(b.value.id,de);b.value.tags=he.tags}async function G(){E.value=await ae(),w.value=!0}function W(){k.value=!0,F.value.email=b.value.from.address,b.value.from.name&&(F.value["first-name"]=b.value.from.name.split(" ")[0],F.value["last-name"]=b.value.from.name.split(" ")[1]||null)}async function ae(){let{data:de}=await Innoclapps.request("contacts/search",{params:{q:b.value.from.address,search_fields:"email:="}});return de}function ue(){ie(!1),Q(!1)}function ce(de){de.uriKey==="email-account-message-move"?(oe(de.response.moved_to_folder_id),me()):de.uriKey==="email-account-message-delete"?parseInt(a.params.folder_id)===parseInt(t.account.trash_folder.id)?r.replace({name:"inbox"}):(oe(t.account.trash_folder.id),me()):me()}function oe(de){r.replace({name:"inbox-message",params:{account_id:t.account.id,folder_id:de,id:b.value.id}})}function ie(de=!0){I.value=de,S.value=!1}function Q(de=!0){C.value=de}function se(){I.value=!0,S.value=!0}function me(){return xe(!0)}async function xe(de=!1){c(!de);let{data:he}=await Innoclapps.request(N.value,{params:{silent:de,account_id:t.account.id,folder_id:a.params.folder_id}});b.value=he,s.commit("emailAccounts/UPDATE",{id:t.account.id,item:{...t.account,active_folders_tree:he.account_active_folders_tree}}),he.was_unread===!0&&s.dispatch("emailAccounts/updateUnreadCountUI",L.value===0?0:L.value-1),i.value=H.value,c(!1)}return xe(),Je(()=>{R=new IntersectionObserver(de=>{T.value=de[0].isIntersecting},{root:document.getElementById("main"),threshold:1}),R.observe(document.getElementById("messageInfo"))}),En(()=>{R&&(R.unobserve(document.getElementById("messageInfo")),R=null)}),(de,he)=>{var De;const Y=d("IButton"),X=d("IDropdownItem"),re=d("IDropdownMinimal"),we=d("IAvatar"),Ce=d("ITextDark"),ge=d("IText"),Re=d("IBadge"),et=d("ICardBody"),kt=d("ICard"),lt=d("CreateDealModal"),ft=d("CreateContactModal"),zt=d("CreateActivityModal");return g(),D(fe,null,[_("div",{class:be({"sticky top-0 bg-opacity-75 p-2 backdrop-blur-lg backdrop-filter dark:bg-neutral-500/80":!T.value})},null,2),_("div",s6e,[_("div",{class:be([T.value?"rounded-t-lg bg-white dark:bg-neutral-900":"border-t border-neutral-200 bg-neutral-50 dark:border-neutral-500/30 dark:bg-neutral-800","overflow-hidden shadow"])},[_("div",{class:be(["flex flex-col border-b border-neutral-200 p-4 dark:border-neutral-800 sm:flex-row sm:items-center sm:px-6",{"pointer-events-none blur":h(m)}])},[_("div",i6e,[_("h5",{class:"text-lg/6 font-semibold text-neutral-700 dark:text-white",textContent:Z(H.value)},null,8,u6e),_("div",c6e,[_("div",d6e,[l(za,{ref_key:"associationsPopoverRef",ref:y,"associations-count":b.value.associations_count,"onUpdate:associationsCount":he[0]||(he[0]=_e=>b.value.associations_count=_e),class:"inline-flex",placement:"bottom-start","resource-name":h(n),"resource-id":b.value.id},null,8,["associations-count","resource-name","resource-id"])]),l(hs,{simple:!0,type:h(f),"model-value":b.value.tags,disabled:!((De=b.value.authorizations)!=null&&De.update),"onUpdate:modelValue":ee},null,8,["type","model-value","disabled"])])]),_("div",m6e,[B.value?(g(),D("div",f6e,[ne(_("div",null,[l(fs,{type:"dropdown",ids:b.value.id,actions:b.value.actions,"action-request-params":P.value,"resource-name":h(n),onRun:ce},null,8,["ids","actions","action-request-params","resource-name"])],512),[[pe,!e.account.is_sync_stopped]]),z.value?(g(),A(Y,{key:0,variant:"secondary",icon:"Reply",disabled:e.account.is_sync_stopped,text:de.$t("mailclient::inbox.reply"),onClick:he[1]||(he[1]=_e=>ie(!0))},null,8,["disabled","text"])):K("",!0),z.value&&V.value?(g(),A(Y,{key:1,variant:"secondary",icon:"Reply",disabled:e.account.is_sync_stopped,text:de.$t("mailclient::inbox.reply_all"),onClick:he[2]||(he[2]=_e=>se())},null,8,["disabled","text"])):K("",!0),z.value?(g(),A(Y,{key:2,variant:"secondary",icon:"Share",disabled:e.account.is_sync_stopped,text:de.$t("mailclient::inbox.forward"),onClick:he[3]||(he[3]=_e=>Q(!0))},null,8,["disabled","text"])):K("",!0),l(re,{horizontal:""},{default:p(()=>[l(X,{icon:"Users",text:de.$t("contacts::contact.convert"),onClick:W},null,8,["text"]),l(X,{icon:"Banknotes",text:de.$t("deals::deal.create"),onClick:G},null,8,["text"]),l(X,{icon:"Calendar",text:de.$t("activities::activity.create"),onClick:U},null,8,["text"])]),_:1})])):K("",!0)])],2)],2)]),l(kt,{class:"-mt-1 mb-3",overlay:h(m)},{default:p(()=>[l(et,null,{default:p(()=>[_("div",p6e,[ne(_("div",v6e,[l(we,{src:b.value.avatar_url},null,8,["src"])],512),[[pe,B.value]]),_("div",{class:be(["grow",B.value?"":"blur"])},[l(Do,{label:de.$t("mailclient::inbox.from"),addresses:b.value.from},null,8,["label","addresses"]),l(Do,{label:de.$t("mailclient::inbox.reply_to"),addresses:b.value.reply_to,"show-when-empty":!1},null,8,["label","addresses"]),l(Do,{label:de.$t("mailclient::inbox.to"),addresses:b.value.to},null,8,["label","addresses"]),l(Do,{label:de.$t("mailclient::inbox.cc"),addresses:b.value.cc,"show-when-empty":!1},null,8,["label","addresses"]),l(Do,{label:de.$t("mailclient::inbox.bcc"),addresses:b.value.bcc,"show-when-empty":!1},null,8,["label","addresses"]),_("div",h6e,[l(Ce,{class:"mr-1 font-semibold"},{default:p(()=>[le(Z(de.$t("mailclient::inbox.date"))+": ",1)]),_:1}),l(ge,{text:h(u)(b.value.date)},null,8,["text"])])],2),_("div",g6e,[(g(!0),D(fe,null,Ie(b.value.folders,_e=>(g(),A(Re,{key:_e.id,class:"flex shrink-0",variant:"info"},{default:p(()=>[b6e,le(" "+Z(_e.display_name),1)]),_:2},1024))),128)),b.value.opened_at?(g(),A(Re,{key:0,variant:"success",icon:"Eye"},{default:p(()=>[le(" ("+Z(b.value.opens)+") ",1),_("span",{class:"hidden sm:block",textContent:Z(" - "+h(u)(b.value.opened_at))},null,8,y6e)]),_:1})):K("",!0)])]),h(m)?K("",!0):(g(),D("div",_6e,[l(l6e,{"visible-text":b.value.visible_text,"hidden-text":b.value.hidden_text},null,8,["visible-text","hidden-text"])]))]),_:1})]),_:1},8,["overlay"]),j.value?(g(),D("div",I6e,[l(Ce,{class:"mb-2 font-medium",as:"dd",text:de.$t("mailclient.mail.attachments")},null,8,["text"]),l(p5,{attachments:b.value.media},null,8,["attachments"])])):K("",!0),z.value?(g(),A(_5,{key:1,message:b.value,visible:I.value||C.value,"to-all":S.value,forward:C.value,onHidden:ue},null,8,["message","visible","to-all","forward"])):K("",!0),l(lt,{visible:w.value,"onUpdate:visible":he[4]||(he[4]=_e=>w.value=_e),associations:{emails:[b.value.id]},contacts:E.value,name:b.value.subject,onCreated:he[5]||(he[5]=_e=>(w.value=!1,de.$refs.associationsPopoverRef.retrieveAssociatedResources()))},null,8,["visible","associations","contacts","name"]),l(ft,Ue({visible:k.value,"onUpdate:visible":he[6]||(he[6]=_e=>k.value=_e),associations:{emails:[b.value.id]}},F.value,{onHidden:he[7]||(he[7]=_e=>F.value={}),onCreated:he[8]||(he[8]=_e=>(k.value=!1,de.$refs.associationsPopoverRef.retrieveAssociatedResources()))}),null,16,["visible","associations"]),x.value?(g(),A(zt,{key:2,contacts:$.value,title:de.$t("activities::activity.title_via_create_message",{subject:b.value.subject}),message:b.value,onCreated:he[9]||(he[9]=_e=>x.value=!1),onHidden:he[10]||(he[10]=_e=>x.value=!1)},null,8,["contacts","title","message"])):K("",!0)],64)}}},x6e=Object.assign({name:"InboxMessagesFoldersMenuItem"},{__name:"InboxMessagesFoldersMenuItem",props:{folder:{required:!0,type:Object}},setup(e){const t=e,n=It(),o=O(()=>n.params.account_id?{name:"inbox-messages",params:{account_id:n.params.account_id,folder_id:t.folder.id}}:null),a=O(()=>t.folder.children&&t.folder.children.length>0);return(r,s)=>{const i=d("IBadge"),u=d("IVerticalNavigationItem"),c=d("InboxMessagesFoldersMenuItem",!0),m=d("IVerticalNavigationCollapsible");return g(),A(m,{fixed:""},{default:p(()=>[l(u,{to:o.value},{default:p(()=>[le(Z(e.folder.display_name)+" ",1),e.folder.unread_count?(g(),A(i,{key:0,text:e.folder.unread_count,pill:""},null,8,["text"])):K("",!0)]),_:1},8,["to"]),a.value?(g(!0),D(fe,{key:0},Ie(e.folder.children,f=>(g(),A(c,{key:f.id,folder:f},null,8,["folder"]))),128)):K("",!0)]),_:1})}}}),k6e={key:0},$6e={__name:"InboxMessagesFoldersMenu",props:{folders:{type:Array,required:!0}},setup(e){return(t,n)=>{const o=d("IVerticalNavigation");return g(),D(fe,null,[l(o,null,{default:p(()=>[(g(!0),D(fe,null,Ie(e.folders,a=>(g(),A(x6e,{key:a.id,folder:a},null,8,["folder"]))),128))]),_:1}),e.folders.length?K("",!0):(g(),D("div",k6e,[(g(),D(fe,null,Ie([1,2,3,4],a=>_("div",{key:"p-"+a,class:"mb-2 rounded-lg bg-neutral-200 p-4 dark:bg-neutral-500"})),64))]))],64)}}},C6e=["textContent"],S6e=_("span",{"aria-hidden":"true"},"→",-1),T6e=_("span",{"aria-hidden":"true"},"→",-1),E6e=_("span",{"aria-hidden":"true"},"→",-1),F6e=_("span",{"aria-hidden":"true"},"→",-1),A6e={__name:"InboxMessagesWarnings",props:{account:{type:Object,required:!0},totalAccounts:{required:!0,type:Number},hasPrimaryAccount:{required:!0,type:Boolean},isSyncDisabled:{required:!0,type:Boolean}},setup(e){return(t,n)=>{const o=d("ILink"),a=d("IAlertBody"),r=d("IAlert"),s=Ve("t");return g(),D(fe,null,[e.isSyncDisabled?(g(),A(r,{key:0,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[_("p",{textContent:Z(e.account.sync_state_comment)},null,8,C6e),l(o,{variant:"warning",class:"font-medium",to:{name:"email-accounts-index"}},{default:p(()=>[le(Z(t.$t("mailclient::mail.account.manage"))+" ",1),S6e]),_:1})]),_:1})]),_:1})):K("",!0),!e.hasPrimaryAccount&&e.totalAccounts>1?(g(),A(r,{key:1,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[ne(_("p",null,null,512),[[s,"mailclient::mail.account.missing_primary_account"]]),l(o,{variant:"warning",class:"font-medium",to:{name:"email-accounts-index"}},{default:p(()=>[le(Z(t.$t("mailclient::mail.account.manage"))+" ",1),T6e]),_:1})]),_:1})]),_:1})):K("",!0),!e.account.sent_folder_id||!e.account.sent_folder?(g(),A(r,{key:2,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[ne(_("p",null,null,512),[[s,"mailclient::mail.account.missing_sent_folder"]]),l(o,{variant:"warning",class:"font-medium",to:{name:"edit-email-account",params:{id:e.account.id}}},{default:p(()=>[le(Z(t.$t("mailclient::mail.account.edit"))+" ",1),E6e]),_:1},8,["to"])]),_:1})]),_:1})):K("",!0),!e.account.trash_folder_id||!e.account.trash_folder?(g(),A(r,{key:3,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[ne(_("p",null,null,512),[[s,"mailclient::mail.account.missing_trash_folder"]]),l(o,{variant:"warning",class:"font-medium",to:{name:"edit-email-account",params:{id:e.account.id}}},{default:p(()=>[le(Z(t.$t("mailclient::mail.account.edit"))+" ",1),F6e]),_:1},8,["to"])]),_:1})]),_:1})):K("",!0)],64)}}},R6e={class:"flex items-center space-x-2"},D6e={key:0,class:"relative"},O6e={key:0,class:"absolute -right-1 -top-px z-10"},B6e=_("span",{class:"relative flex size-3"},[_("span",{class:"absolute inline-flex h-full w-full rounded-full bg-info-400 opacity-75"}),_("span",{class:"relative inline-flex size-3 rounded-full bg-info-500"})],-1),N6e=[B6e],P6e={class:"mx-auto max-w-7xl"},M6e={key:0,class:"grid grid-cols-12 gap-6"},V6e={class:"col-span-12 lg:col-span-3"},L6e=["textContent"],q6e={key:1,class:"grid grid-cols-12 gap-6"},U6e={class:"col-span-12 lg:col-span-3"},j6e={class:"sm:sticky sm:top-2"},z6e=_("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-2 fill-white",height:"16",width:"16",viewBox:"0 0 512 512"},[_("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"})],-1),H6e={class:"mb-2 text-base font-semibold leading-6 text-neutral-700 dark:text-neutral-300 sm:text-sm"},W6e=["textContent"],G6e={class:"-my-1"},K6e={class:"col-span-12 lg:col-span-9"},Z6e={key:2,class:"h-60"},Y6e={class:"mx-auto mt-5 block max-w-2xl text-center"},X6e={class:"mt-6 space-x-6"},Q6e=_("span",{"aria-hidden":"true"},"→",-1),J6e=_("span",{"aria-hidden":"true"},"→",-1),eAe={__name:"InboxMessages",setup(e){const t=It(),n=_t(),o=cn(),a=M(!0),r=M(!1),s=M(0),i=M(null),{availableTags:u}=Yv(),{emailAccounts:c,hasPrimaryEmailAccount:m,emailAccountBeingSynced:f,fetchEmailAccounts:v,syncEmailAccount:y}=ya();$e(()=>t.query.compose,V=>{V&&C()}),$e(()=>t.query.tag,V=>{V&&t.params.id&&n.push({name:"inbox-messages",account_id:t.params.accountId,folderId:t.params.folderId,query:{...t.query,tag:V}})}),Va((V,P,z)=>{V.name==="inbox"?E(b.value,V.query):z()});const b=O(()=>c.value.find(V=>V.id===i.value)||{}),w=O(()=>c.value.length>0),k=O(()=>b.value.active_folders.length>0),x=O(()=>b.value.is_sync_stopped||b.value.is_sync_disabled);function I(V){o.commit("emailAccounts/UPDATE",V)}function C(V=!0){if(r.value=V,V==!1){let P=Object.assign({},t.query);delete P.compose,n.replace({query:P})}}function S(V){i.value=V.id,E(V)}function T(V){Object.hasOwn(V.response,"account")&&o.commit("emailAccounts/UPDATE",{id:V.response.account.id,item:V.response.account}),Object.hasOwn(V.response,"unread_count")&&o.dispatch("emailAccounts/updateUnreadCountUI",V.response.unread_count)}function E(V,P={}){let z=V.active_folders[0]?V.active_folders[0].id:null;z&&n.replace({name:"inbox-messages",params:{account_id:V.id,folder_id:z},query:{...t.query,...P}})}async function $(){const{data:V}=await Innoclapps.request("/emails/scheduled/count");s.value=V.count}function F(){R(!0)}async function R(V=!1){if(await v({force:V}),!w.value){n.replace({name:"email-accounts-index"});return}$(),t.params.account_id&&t.params.folder_id?i.value=parseInt(t.params.account_id):Object.keys(b.value).length===0&&(i.value=c.value[0].id),t.name==="inbox"&&k.value&&E(b.value)}function B(){y(b.value.id).then(V=>{I({id:V.id,item:V}),At("user-synchronized-email-account",V)})}return R().then(()=>t.query.compose&&C()).finally(()=>a.value=!1),Ut("email-scheduled",$),Ut("action-executed",T),Ut("email-accounts-sync-finished",F),(V,P)=>{const z=d("NavbarSeparator"),H=d("IDropdownItem"),j=d("IDropdownMinimal"),N=d("IButton"),L=d("NavbarItems"),U=d("IDropdownButton"),ee=d("IDropdownMenu"),G=d("IDropdown"),W=d("Icon"),ae=d("ILink"),ue=d("IAlertBody"),ce=d("IAlert"),oe=d("RouterView"),ie=d("IText"),Q=d("MainLayout"),se=Ve("i-tooltip");return g(),A(Q,{overlay:a.value},{actions:p(()=>[l(z,{class:"hidden lg:block"}),l(L,null,{default:p(()=>[l(j,{placement:b.value.is_initial_sync_performed&&!x.value?"bottom":"bottom-end",horizontal:""},{default:p(()=>[b.value.authorizations.update?(g(),A(H,{key:0,to:{name:"edit-email-account",params:{id:b.value.id}},text:V.$t("mailclient::mail.account.edit")},null,8,["to","text"])):K("",!0),l(H,{to:{name:"email-accounts-index"},text:V.$t("mailclient::mail.account.manage")},null,8,["text"])]),_:1},8,["placement"]),ne(_("div",R6e,[s.value>0?(g(),D("div",D6e,[ne(l(N,{variant:"secondary",icon:"Clock",to:{name:"scheduled-emails-index"},pill:""},null,512),[[se,V.$t("mailclient::schedule.scheduled_emails"),void 0,{left:!0}]]),s.value>0?ne((g(),D("span",O6e,N6e)),[[se,s.value,void 0,{bottom:!0}]]):K("",!0)])):K("",!0),b.value.is_initial_sync_performed&&!x.value?ne((g(),A(N,{key:1,variant:"secondary",icon:"Refresh",disabled:h(f),loading:h(f),pill:"",onClick:B},null,8,["disabled","loading"])),[[se,V.$t("mailclient::inbox.synchronize"),void 0,{left:!0}]]):K("",!0)],512),[[pe,s.value>0||b.value.is_initial_sync_performed&&!x.value]])]),_:1})]),default:p(()=>[_("div",P6e,[!a.value&&w.value?(g(),D("div",M6e,[_("div",V6e,[l(G,{"adaptive-width":""},{default:p(()=>[l(U,{class:"mb-1.5 w-full",icon:"InboxStack",loading:h(f),basic:""},{default:p(()=>[_("span",{class:"max-w-[15rem] truncate",textContent:Z(b.value.display_email)},null,8,L6e)]),_:1},8,["loading"]),l(ee,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(c),me=>(g(),A(H,{key:me.id,text:me.display_email,active:me.id===b.value.id,onClick:xe=>S(me)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])])):K("",!0),!a.value&&w.value?(g(),D("div",q6e,[_("div",U6e,[_("div",j6e,[l(N,{variant:"primary",class:"mb-3",disabled:!b.value.can_send_email,block:"",onClick:P[0]||(P[0]=me=>C(!0))},{default:p(()=>[z6e,le(" "+Z(V.$t("mailclient::mail.compose")),1)]),_:1},8,["disabled"]),l($6e,{folders:b.value&&b.value.active_folders_tree},null,8,["folders"]),h(u).length?(g(),D("ul",{key:0,class:be(["mt-8 flex flex-1 flex-col gap-y-0.5",k.value?"":"hidden"])},[_("li",H6e,Z(V.$t("core::tags.tags"))+" ("+Z(h(u).length)+") ",1),(g(!0),D(fe,null,Ie(h(u),me=>(g(),D("li",{key:me.id},[l(ae,{class:be(["flex items-center space-x-2 rounded-lg px-3 py-2 text-base/6 font-medium text-neutral-700 hover:bg-neutral-200/50 focus:outline-none dark:text-neutral-100 dark:hover:dark:bg-neutral-700 sm:text-sm/6",V.$route.query.tag==me.name?"bg-neutral-200/50 dark:bg-neutral-700":""]),to:{query:{tag:me.name}},plain:""},{default:p(()=>[l(W,{icon:"Tag",class:"size-4",style:Nt({color:me.swatch_color})},null,8,["style"]),_("span",{class:"grow",textContent:Z(me.name)},null,8,W6e),_("span",G6e,[V.$route.query.tag==me.name?(g(),A(N,{key:0,icon:"XSolid",basic:"",small:"",onClick:P[1]||(P[1]=ot(xe=>V.$router.replace({query:{...V.$route.query,tag:void 0}}),["prevent","stop"]))})):K("",!0)])]),_:2},1032,["class","to"])]))),128))],2)):K("",!0)])]),_("div",K6e,[l(A6e,{account:b.value,"total-accounts":h(c).length,"has-primary-account":h(m),"is-sync-disabled":x.value},null,8,["account","total-accounts","has-primary-account","is-sync-disabled"]),b.value.is_initial_sync_performed?K("",!0):(g(),A(ce,{key:0,class:"mb-4"},{default:p(()=>[l(ue,null,{default:p(()=>[le(Z(V.$t("mailclient::mail.initial_sync_info")),1)]),_:1})]),_:1})),l(oe,{name:"message",account:b.value},null,8,["account"]),k.value?(g(),A(oe,{key:1,ref:"messages",name:"messages",account:b.value},null,8,["account"])):(g(),D("div",Z6e,[_("div",Y6e,[l(W,{icon:"Folder",class:"mx-auto size-12 text-neutral-400"}),l(ie,{class:"mt-4",text:V.$t("mailclient.mail.account.no_active_folders")},null,8,["text"]),_("div",X6e,[b.value.authorizations.update?(g(),A(ae,{key:0,class:"font-medium",to:{name:"edit-email-account",params:{id:b.value.id}}},{default:p(()=>[le(Z(V.$t("mailclient::mail.account.activate_folders"))+" ",1),Q6e]),_:1},8,["to"])):K("",!0),l(ae,{class:"font-medium",to:{name:"email-accounts-index"}},{default:p(()=>[le(Z(V.$t("mailclient::mail.account.manage"))+" ",1),J6e]),_:1})])])]))])])):K("",!0)]),l(Td,{visible:r.value,"default-account":b.value,onHidden:P[2]||(P[2]=me=>C(!1))},null,8,["visible","default-account"])]),_:1},8,["overlay"])}}},S5={__name:"InboxMessageSubject",props:["subject","messageId","accountId"],setup(e){const t=It(),n=M(t.params.folder_id);return(o,a)=>{const r=d("ILink");return g(),A(r,{title:e.subject,to:{name:"inbox-message",params:{account_id:e.accountId,folder_id:n.value,id:e.messageId}},text:e.subject?e.subject:"("+o.$t("mailclient::inbox.no_subject")+")",basic:""},null,8,["title","to","text"])}}},tAe={class:"inline-flex max-w-[380px] flex-nowrap items-center"},nAe={class:"block min-w-0 truncate"},oAe={key:0,class:"ml-2 inline-flex shrink-0 space-x-0.5 group-hover/td:hidden"},aAe=["textContent"],rAe=["title"],lAe={__name:"InboxMessagesTableIncoming",props:{tableId:{required:!0,type:String},dataRequestQueryString:{type:Object,required:!0},actionRequestParams:{type:Object,required:!0},isSyncStopped:Boolean,accountId:{type:Number,required:!0}},setup(e,{expose:t}){const n=Innoclapps.resourceName("emails"),{DateTime:o,localizedDate:a,localizedTime:r,localizedDateTime:s}=rt(),i=M(null);function u(c){const m=o.fromISO(c);return m.hasSame(o.now(),"day")?r(m.toISO()):a(m.toISO())}return t({tableRef:i}),(c,m)=>{const f=d("IBadge"),v=d("ResourceTable");return g(),D("div",{class:be({"sync-stopped-by-system":e.isSyncStopped})},[l(v,{ref_key:"tableRef",ref:i,"resource-name":h(n),"table-id":e.tableId,"action-request-params":e.actionRequestParams,"data-request-query-string":e.dataRequestQueryString},{subject:p(({row:y})=>[_("div",tAe,[_("div",nAe,[l(S5,{subject:y.subject,"message-id":y.id,"account-id":e.accountId},null,8,["subject","message-id","account-id"])]),y.tags?(g(),D("div",oAe,[(g(!0),D(fe,null,Ie(y.tags,b=>(g(),A(f,{key:b.id,color:b.swatch_color,text:b.name},null,8,["color","text"]))),128))])):K("",!0)])]),from:p(({row:y})=>[y.from?(g(),A(Xv,{key:0,address:y.from},null,8,["address"])):(g(),D("p",{key:1,textContent:Z("("+c.$t("mailclient::inbox.unknown_address")+")")},null,8,aAe))]),date:p(({row:y})=>[_("span",{title:h(s)(y.date)},Z(u(y.date)),9,rAe)]),_:1},8,["resource-name","table-id","action-request-params","data-request-query-string"])],2)}}},sAe={class:"inline-flex max-w-[380px] flex-nowrap items-center"},iAe={class:"block min-w-0 truncate"},uAe={key:0,class:"ml-2 inline-flex shrink-0 space-x-0.5 group-hover/td:hidden"},cAe=["textContent"],dAe=["title"],mAe={__name:"InboxMessagesTableOutgoing",props:{tableId:{required:!0,type:String},dataRequestQueryString:{type:Object,required:!0},actionRequestParams:{type:Object,required:!0},accountId:{type:Number,required:!0},isSyncStopped:Boolean},setup(e,{expose:t}){const n=Innoclapps.resourceName("emails"),{DateTime:o,localizedTime:a,localizedDate:r,localizedDateTime:s}=rt(),i=M(null);function u(c){const m=o.fromISO(c);return m.hasSame(o.now(),"day")?a(m.toISO()):r(m.toISO())}return t({tableRef:i}),(c,m)=>{const f=d("IBadge"),v=d("ResourceTable");return g(),D("div",{class:be({"sync-stopped-by-system":e.isSyncStopped})},[l(v,{ref_key:"tableRef",ref:i,"resource-name":h(n),"table-id":e.tableId,"action-request-params":e.actionRequestParams,"data-request-query-string":e.dataRequestQueryString},{subject:p(({row:y})=>[_("div",sAe,[_("div",iAe,[l(S5,{subject:y.subject,"message-id":y.id,"account-id":e.accountId},null,8,["subject","message-id","account-id"])]),y.tags?(g(),D("div",uAe,[(g(!0),D(fe,null,Ie(y.tags,b=>(g(),A(f,{key:b.id,color:b.swatch_color,text:b.name},null,8,["color","text"]))),128))])):K("",!0)])]),to:p(({row:y})=>[(g(!0),D(fe,null,Ie(y.to,(b,w)=>(g(),D("div",{key:w},[l(Xv,{address:b},null,8,["address"])]))),128)),!y.to||y.to.length===0?(g(),D("span",{key:0,textContent:Z("("+c.$t("mailclient::inbox.unknown_address")+")")},null,8,cAe)):K("",!0)]),date:p(({row:y})=>[_("span",{title:h(s)(y.date)},Z(u(y.date)),9,dAe)]),_:1},8,["resource-name","table-id","action-request-params","data-request-query-string"])],2)}}},fAe={__name:"InboxMessagesTable",props:{account:{type:Object,required:!0}},setup(e){const t=e,n=It(),o=bo(),{scriptConfig:a}=Ne(),r=M(null),s=M(null),i=M({}),u=M(null),c=O(()=>({folder_id:r.value,account_id:s.value})),m=O(()=>({account_id:s.value,folder_id:r.value,folder_type:f.value,tag:n.query.tag})),f=O(()=>y.value?"outgoing":b.value?"incoming":a("mail.folders.other")),v=O(()=>f.value==="incoming"||f.value===a("mail.folders.other")?"messages-incoming":"messages-outgoing"),y=O(()=>a("mail.folders.outgoing").indexOf(i.value.type)>-1?!0:k("outgoing")),b=O(()=>a("mail.folders.incoming").indexOf(i.value.type)>-1?!0:k("incoming")),{reloadTable:w}=eo(v);function k(I,C){let S=C||i.value;if(!S.parent_id)return!1;let T=ut(t.account.folders,["id",parseInt(S.parent_id)]);return a(`mail.folders.${I}`).indexOf(T.type)>-1?!0:T.parent_id?k(I,T):!1}function x(){y.value&&w()}return $e(()=>n.params,(I,C)=>{const S=I.account_id&&I.folder_id&&!I.id;s.value=I.account_id,r.value=I.folder_id,(!C||C&&C.folder_id!=I.folder_id)&&(i.value=ut(t.account.folders,T=>parseInt(T.id)===parseInt(I.folder_id))),S&&ze(()=>o.value=`${i.value.display_name} - ${t.account.display_email}`),S&&C&&parseInt(I.account_id)!==parseInt(C.account_id)&&(u.value.tableRef.setPage(1),ze(()=>{u.value.tableRef.refetchActions()}))},{immediate:!0}),Ut("user-synchronized-email-account",w),Ut("email-accounts-sync-finished",w),Ut("email-sent",x),(I,C)=>(g(),A(Rt(v.value==="messages-incoming"?lAe:mAe),{ref_key:"tableComponentRef",ref:u,"table-id":v.value,"account-id":e.account.id,"is-sync-stopped":e.account.is_sync_stopped,"data-request-query-string":m.value,"action-request-params":c.value},null,8,["table-id","account-id","is-sync-stopped","data-request-query-string","action-request-params"]))}},pAe={__name:"ScheduledEmailsIndex",setup(e){return(t,n)=>{const o=d("ICardHeading"),a=d("ICardHeader"),r=d("ICard"),s=d("MainLayout");return g(),A(s,null,{default:p(()=>[l(r,{class:"mx-auto max-w-6xl"},{default:p(()=>[l(a,null,{default:p(()=>[l(o,{text:t.$t("mailclient::schedule.scheduled_emails")},null,8,["text"])]),_:1}),l(k5,{"wrapper-class":"px-6",class:"[--gutter:theme(spacing.6)]",bleed:""})]),_:1})]),_:1})}}},vAe=[{path:"/inbox",name:"inbox",component:eAe,meta:{title:at("mailclient::inbox.inbox")},children:[{path:":account_id/folder/:folder_id/messages",components:{messages:fAe},name:"inbox-messages",meta:{title:at("mailclient::inbox.inbox")}},{path:":account_id/folder/:folder_id/messages/:id",components:{message:w6e},name:"inbox-message",meta:{scrollToTop:!1}}]},{path:"/mail/accounts",name:"email-accounts-index",component:a6e,meta:{title:at("mailclient::mail.account.accounts")},children:[{path:"create",name:"create-email-account",component:MFe,meta:{title:at("mailclient::mail.account.create")}},{path:":id/edit",name:"edit-email-account",component:VFe}]},{path:"/mail/scheduled",name:"scheduled-emails-index",component:pAe,meta:{title:at("mailclient::schedule.scheduled_emails")}}];window.Innoclapps&&Innoclapps.booting(function(e,t,n){e.component("RecordTabTimelineEmail",TEe),e.component("FormMailEditorField",tFe),e.component("DetailEmailSendableField",eFe),e.component("IndexEmailSendableField",nFe),e.component("EmailsTab",lFe),e.component("EmailsTabPanel",hFe),n.registerModule("emailAccounts",rFe),vAe.forEach(o=>t.addRoute(o)),Ui("inbox",".Modules\\MailClient\\App\\Events\\EmailAccountsSynchronized",o=>{this.$emit("email-accounts-sync-finished",o),this.request("mail/accounts/unread").then(({data:a})=>n.dispatch("emailAccounts/updateUnreadCountUI",a))})});const hAe={__name:"RecordTabNote",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=d("Icon"),a=d("IBadge"),r=d("ITab");return Un([e.resource.notes_count],()=>l(r,null,{default:p(()=>[l(o,{icon:"PencilAlt"}),le(" "+Z(t.$t("notes::note.notes"))+" ",1),ne(l(a,{variant:"neutral",text:e.resource.notes_count,pill:""},null,8,["text"]),[[pe,e.resource.notes_count]])]),_:1}),n,0)}}},gAe={class:"mt-2 space-y-2 sm:mt-0 sm:space-x-2 sm:space-y-0"},bAe={__name:"NotesCreate",props:{viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},relatedResourceDisplayName:{required:!0,type:String}},emits:["cancel"],setup(e){const t=e,n=Pe("synchronizeResource"),o=Pe("incrementResourceCount"),{t:a}=Ee(),{createFollowUpActivity:r}=Gi(),{createResource:s}=Dt(Innoclapps.resourceName("notes")),{form:i}=Ze({body:"",task_date:null}),u=M(null);async function c(f){if(i.task_date){let v=await r(i.task_date,t.viaResource,t.viaResourceId,t.relatedResourceDisplayName,{note:a("notes::note.follow_up_task_body",{content:f.body})});u.value.reset(),v&&(n({activities:[v]}),o("incomplete_activities_for_user_count"))}n({notes:[f]}),o("notes_count"),Innoclapps.success(a("notes::note.created")),i.reset()}function m(){s(i.set(t.viaResource,[t.viaResourceId]).withQueryString({via_resource:t.viaResource,via_resource_id:t.viaResourceId})).then(c)}return(f,v)=>{const y=d("Editor"),b=d("IFormError"),w=d("ICardBody"),k=d("IButton"),x=d("ICardFooter"),I=d("ICard");return g(),A(I,{as:"form",onSubmit:ot(m,["prevent"])},{default:p(()=>[l(w,null,{default:p(()=>[l(y,{ref:"editorRef",modelValue:h(i).body,"onUpdate:modelValue":v[0]||(v[0]=C=>h(i).body=C),placeholder:f.$t("notes::note.write"),"with-mention":"",minimal:"",onInit:v[1]||(v[1]=()=>f.$refs.editorRef.focus())},null,8,["modelValue","placeholder"]),l(b,{error:h(i).getError("body")},null,8,["error"])]),_:1}),l(x,{class:"flex flex-col sm:flex-row sm:items-center"},{default:p(()=>[l(bs,{ref_key:"createFollowUpTaskRef",ref:u,modelValue:h(i).task_date,"onUpdate:modelValue":v[2]||(v[2]=C=>h(i).task_date=C),class:"grow"},null,8,["modelValue"]),_("div",gAe,[l(k,{class:"w-full sm:w-auto",variant:"secondary",text:f.$t("core::app.cancel"),onClick:v[3]||(v[3]=C=>f.$emit("cancel"))},null,8,["text"]),l(k,{class:"w-full sm:w-auto",variant:"primary",text:f.$t("notes::note.add"),disabled:h(i).busy,onClick:m},null,8,["text","disabled"])])]),_:1})]),_:1})}}},yAe={__name:"NotesEdit",props:{noteId:{required:!0,type:Number},body:{required:!0,type:String},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]}},emits:["updated","cancelled"],setup(e,{emit:t}){const n=e,o=t,a=Pe("synchronizeResource"),{t:r}=Ee(),{updateResource:s}=Dt(Innoclapps.resourceName("notes")),{form:i}=Ze({body:n.body});async function u(){let c=await s(i.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),n.noteId);a({notes:c}),o("updated",c),Innoclapps.success(r("notes::note.updated"))}return(c,m)=>{const f=d("Editor"),v=d("IFormError"),y=d("ICardBody"),b=d("IButton"),w=d("ICardFooter"),k=d("ICard");return g(),A(k,{as:"form",onSubmit:ot(u,["prevent"])},{default:p(()=>[l(y,null,{default:p(()=>[l(f,{modelValue:h(i).body,"onUpdate:modelValue":m[0]||(m[0]=x=>h(i).body=x),minimal:"","with-mention":""},null,8,["modelValue"]),l(v,{error:h(i).getError("body")},null,8,["error"])]),_:1}),l(w,{class:"space-x-2 text-right"},{default:p(()=>[l(b,{variant:"secondary",text:c.$t("core::app.cancel"),onClick:m[1]||(m[1]=x=>c.$emit("cancelled"))},null,8,["text"]),l(b,{type:"submit",variant:"primary",text:c.$t("core::app.save"),disabled:h(i).busy,onClick:u},null,8,["text","disabled"])]),_:1})]),_:1})}}},_Ae={class:"flex flex-1"},IAe={class:"mr-1 shrink-0 self-start"},wAe=["textContent"],xAe=["textContent"],T5=Object.assign({inheritAttrs:!1},{__name:"NotesView",props:{noteId:{required:!0,type:Number},commentsCount:{required:!0,type:Number},createdAt:{required:!0,type:String},body:{required:!0,type:String},userId:{required:!0,type:Number},authorizations:{required:!0,type:Object},comments:{required:!0,type:Array},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},collapsable:Boolean},setup(e){const t=e,n=Innoclapps.resourceName("notes"),o=Pe("synchronizeResource"),a=Pe("decrementResourceCount"),{t:r}=Ee(),{localizedDateTime:s}=rt(),{findUserById:i}=Ne(),{deleteResource:u}=Dt(n),{commentsAreVisible:c}=_a(t.noteId,"notes"),m=O(()=>i(t.userId)),f=M(!1);async function v(b){await u(b),o({notes:{id:b,_delete:!0}}),a("notes_count"),Innoclapps.success(r("notes::note.deleted"))}function y(b){b.type=="dblclick"&&f.value||t.authorizations.update&&(f.value=!f.value)}return(b,w)=>{const k=d("IAvatar"),x=d("I18nT"),I=d("ITextBlockDark"),C=d("IDropdownItem"),S=d("IDropdownMinimal"),T=d("ICardActions"),E=d("ICardHeader"),$=d("TextCollapse"),F=d("CollapseableCommentsLink"),R=d("CollapsableCommentsList"),B=d("ICardBody"),V=d("CommentsAdd"),P=d("ICardFooter"),z=d("ICard");return g(),D(fe,null,[ne(l(z,Ue(b.$attrs,{class:"note-"+e.noteId}),{default:p(()=>[l(E,null,{default:p(()=>[_("div",_Ae,[_("div",IAe,[l(k,{src:m.value.avatar_url},null,8,["src"])]),l(I,{class:"ml-1 mt-0.5"},{default:p(()=>[l(x,{scope:"global",keypath:"notes::note.info_created"},{user:p(()=>[_("span",{class:"font-medium",textContent:Z(m.value.name)},null,8,wAe)]),date:p(()=>[_("span",{class:"font-medium",textContent:Z(h(s)(e.createdAt))},null,8,xAe)]),_:1})]),_:1})]),l(T,null,{default:p(()=>[e.authorizations.update&&e.authorizations.delete?(g(),A(S,{key:0,small:""},{default:p(()=>[ne(l(C,{text:b.$t("core::app.edit"),onClick:y},null,8,["text"]),[[pe,e.authorizations.update]]),ne(l(C,{text:b.$t("core::app.delete"),onClick:w[0]||(w[0]=H=>b.$confirm(()=>v(e.noteId)))},null,8,["text"]),[[pe,e.authorizations.delete]])]),_:1})):K("",!0)]),_:1})]),_:1}),l(B,null,{default:p(()=>[e.collapsable?(g(),A($,{key:0,class:"wysiwyg-text",text:e.body,length:250,lightbox:"",onDblclick:y},null,8,["text"])):(g(),A(Ki,{key:1,class:"wysiwyg-text",html:e.body,onDblclick:y},null,8,["html"])),l(R,{class:"mt-3","commentable-type":"notes","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.noteId,count:e.commentsCount,comments:e.comments,onUpdated:w[1]||(w[1]=H=>h(o)({notes:{id:e.noteId,comments:H}})),onDeleted:w[2]||(w[2]=H=>h(o)({notes:{id:e.noteId,comments:{id:H,_delete:!0}}})),"onUpdate:comments":w[3]||(w[3]=H=>h(o)({notes:{id:e.noteId,comments:H}})),"onUpdate:count":w[4]||(w[4]=H=>h(o)({notes:{id:e.noteId,comments_count:H}}))},{default:p(({hasComments:H,totalComments:j,commentsAreBeingLoaded:N,toggleCommentsVisibility:L})=>[H?(g(),A(F,{key:0,class:"mt-6",loading:N,total:j,collapsed:h(c),onClick:L},null,8,["loading","total","collapsed","onClick"])):K("",!0)]),_:1},8,["via-resource","via-resource-id","commentable-id","count","comments"])]),_:1}),l(P,{class:"text-right"},{default:p(()=>[l(V,{class:"self-end","commentable-type":"notes","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.noteId,onCreated:w[5]||(w[5]=H=>(c.value=!0,h(o)({notes:{id:e.noteId,comments:[H]}})))},null,8,["via-resource","via-resource-id","commentable-id"])]),_:1})]),_:1},16,["class"]),[[pe,!f.value]]),f.value?(g(),A(yAe,{key:0,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"note-id":e.noteId,body:e.body,onCancelled:w[6]||(w[6]=H=>f.value=!1),onUpdated:w[7]||(w[7]=H=>f.value=!1)},null,8,["via-resource","via-resource-id","note-id","body"])):K("",!0)],64)}}}),kAe={class:"sm:flex sm:items-start sm:justify-between"},$Ae={class:"mt-5 sm:ml-6 sm:mt-0"},CAe={class:"mt-3 space-y-4 sm:mt-7"},qm="notes",SAe={__name:"RecordTabNotePanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Pe("synchronizeResource"),o=It(),a=M(null),r=M(!1),{commentsAreVisible:s}=_a(o.query.resourceId,qm),{dataLoadedFirstTime:i,focusToAssociateableElement:u,searchResults:c,isSearching:m,hasSearchResults:f,performSearch:v,search:y,loadData:b,infiniteHandler:w}=gs({resourceName:t.resourceName,resource:gt(t,"resource"),scrollElement:t.scrollElement,infinityRef:a,synchronizeResource:n,timelineRelation:qm}),k=O(()=>Vt(c.value||t.resource.notes,"created_at","desc")),x=O(()=>k.value.length>0);return o.query.resourceId&&o.query.section===qm&&Yr(i,()=>{u(o.query.resourceId,"note").then(()=>{o.query.comment_id&&(s.value=!0)})}),(I,C)=>{const S=d("ITextDark"),T=d("IText"),E=d("IButton"),$=d("SearchInput"),F=d("ICardBody"),R=d("ICard"),B=d("ITabPanel");return g(),A(B,{lazy:!h(i),onActivatedOnce:h(b)},{default:p(()=>[ne(l(R,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(F,null,{default:p(()=>[_("div",kAe,[_("div",null,[l(S,{class:"font-semibold",text:I.$t("notes::note.manage_notes")},null,8,["text"]),l(T,{class:"max-w-xl",text:I.$t("notes::note.info")},null,8,["text"])]),_("div",$Ae,[l(E,{variant:"primary",icon:"PlusSolid",text:I.$t("notes::note.add"),onClick:C[0]||(C[0]=V=>r.value=!0)},null,8,["text"])])]),ne(l($,{modelValue:h(y),"onUpdate:modelValue":[C[1]||(C[1]=V=>$n(y)?y.value=V:null),h(v)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[pe,x.value||h(y)]])]),_:1})]),_:1},512),[[pe,!r.value]]),r.value?(g(),A(bAe,{key:0,class:"rounded-t-none","via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource-display-name":e.resource.display_name,onCancel:C[2]||(C[2]=V=>r.value=!1)},null,8,["via-resource","via-resource-id","related-resource-display-name"])):K("",!0),_("div",CAe,[(g(!0),D(fe,null,Ie(k.value,(V,P,z,H)=>{const j=[V.updated_at,V.comments_count];if(H&&H.key===V.id&&pc(H,j))return H;const N=(g(),D("div",{key:V.id},[l(T5,{"note-id":V.id,"comments-count":V.comments_count,"created-at":V.created_at,body:V.body,"user-id":V.user_id,authorizations:V.authorizations,comments:V.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId},null,8,["note-id","comments-count","created-at","body","user-id","authorizations","comments","via-resource","via-resource-id"])]));return N.memo=j,N},C,3),128))]),ne(l(T,{class:"mt-6 text-center",text:I.$t("core::app.no_search_results")},null,8,["text"]),[[pe,h(m)&&!h(f)]]),l(gr,{ref_key:"infinityRef",ref:a,"scroll-element":e.scrollElement,onHandle:C[5]||(C[5]=V=>h(w)(V))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},TAe={class:"mt-3"},EAe={__name:"RecordTabTimelineNote",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),A(yo,{"heading-class":"font-medium",icon:"PencilAlt","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:t.$t("notes::note.timeline.heading")},{default:p(()=>[_("div",TAe,[l(T5,{"note-id":e.log.id,"comments-count":e.log.comments_count,"created-at":e.log.created_at,body:e.log.body,"user-id":e.log.user_id,authorizations:e.log.authorizations,comments:e.log.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,collapsable:""},null,8,["note-id","comments-count","created-at","body","user-id","authorizations","comments","via-resource","via-resource-id"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"]))}};window.Innoclapps&&Innoclapps.booting(e=>{e.component("NotesTab",hAe),e.component("NotesTabPanel",SAe),e.component("RecordTabTimelineNote",EAe)});const FAe={key:0},AAe={key:0,class:"text-danger-500"},RAe=_("p",{class:"mt-0.5"},' The parameters starting with ":" must not be translated or modified. ',-1),DAe={class:"mt-1"},L1={__name:"SettingsTranslatorTranslate",props:yt(["source"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Zt(e,"modelValue"),o=/:(?:[a-z]+|[A-Z]+|[A-Z][a-zA-Z]*)\b/g,a=O(()=>{let s=t.source.match(o),i=t.modelValue.match(o,t.modelValue);return tk(s,i)}),r=O(()=>a.value.length>0);return(s,i)=>{const u=d("IFormTextarea");return Array.isArray(e.modelValue)?K("",!0):(g(),D("div",FAe,[l(u,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c),rows:"3"},null,8,["modelValue"]),r.value?(g(),D("div",AAe,[RAe,_("p",DAe," Modified parameters: "+Z(a.value.join(", ")),1)])):K("",!0)]))}}},OAe={class:"flex items-center space-x-4"},BAe={class:"flex items-center space-x-2"},NAe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},PAe={class:"group hover:bg-neutral-100 dark:hover:bg-neutral-700/60"},MAe={class:"flex items-center"},VAe={class:"grow"},LAe={class:"px-6 py-2"},qAe={class:"ml-2 py-2 pr-6"},UAe=["onSubmit"],jAe={class:"px-6"},zAe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},HAe={class:"group hover:bg-neutral-100 dark:hover:bg-neutral-700/60"},WAe={class:"flex items-center"},GAe={class:"grow"},KAe={class:"px-6 py-2"},ZAe={class:"ml-2 py-2 pr-6"},YAe=["onSubmit"],XAe={class:"px-6"},QAe={__name:"SettingsTranslator",setup(e){const t=It(),{t:n}=Ee(),{appUrl:o,scriptConfig:a,locales:r}=Ne(),{form:s}=Ze({name:null});let i={};const u=M(t.query.locale||a("locale")),c=Pt({source:{groups:{},namespaces:{}},current:{groups:{},namespaces:{}}}),m=M(null),f=M(null),v=M(!1);$e(u,w),X_((E,$,F)=>{y().length>0?Innoclapps.confirm({message:n("translator::translator.changes_not_saved"),title:"Are you sure you want to leave this page?",confirmText:n("core::app.discard_changes")}).then(()=>F()).catch(()=>F(!1)):F()});function y(){let E=[],$={},F={};f.value?(E=Object.keys(i.namespaces[f.value]),$=i.namespaces[f.value],F=c.value.current.namespaces[f.value]):(E=Object.keys(i.groups),$=i.groups,F=c.value.current.groups);let R=[];return E.forEach(B=>{fa($[B],F[B])||R.push(B)}),R}function b(E,$=null){v.value=!0;let F=null;$?F=c.value.current.namespaces[$][E]:F=c.value.current.groups[E],Innoclapps.request().put(`/translation/${u.value}/${E}`,{translations:F,namespace:$}).then(()=>{window.location.href=`${o}/settings/translator?locale=${u.value}`}).finally(()=>setTimeout(()=>v.value=!1,1e3))}function w(E){Innoclapps.request(`/translation/${E}`).then(({data:$})=>{i=structuredClone($.current),c.value=$})}function k(){s.post("/translation").then(E=>{r.value.push(E.locale),u.value=E.locale,Innoclapps.dialog().hide("newLocaleModal")})}function x(E,$=null){if(m.value){C(E);return}I(E,$)}function I(E,$=null){m.value=E,f.value=$}function C(E,$=!1){const F=y();let R=f.value;const B=F.indexOf(E)>-1;if($||!B){m.value=null,f.value=null,B&&S(E,R);return}Innoclapps.confirm({message:n("translator::translator.changes_not_saved"),title:n("translator::translator.group_has_unsaved_translations"),confirmText:n("core::app.discard_changes")}).then(()=>{f.value=null,m.value=null,S(E,R)})}function S(E,$=null){if($){c.value.current.namespaces[$][E]=structuredClone(i.namespaces[$][E]),Rr(c);return}c.value.current.groups[E]=structuredClone(i.groups[E]),Rr(c)}function T(E){E=E.toLowerCase().split(" ");for(var $=0;$<E.length;$++)E[$]=E[$].charAt(0).toUpperCase()+E[$].slice(1);return E.join(" ")}return w(u.value),(E,$)=>{const F=d("ICardHeading"),R=d("ITextDark"),B=d("IDropdownButton"),V=d("IDropdownItem"),P=d("IDropdownMenu"),z=d("IDropdown"),H=d("IButton"),j=d("ICardActions"),N=d("ICardHeader"),L=d("ILink"),U=d("ITableHeader"),ee=d("ITableRow"),G=d("ITableHead"),W=d("ITableCell"),ae=d("ITableBody"),ue=d("ITable"),ce=d("ICardFooter"),oe=d("IFormInput"),ie=d("IFormError"),Q=d("IFormGroup"),se=d("IModal"),me=d("ICard"),xe=Ve("dialog");return g(),D(fe,null,[l(N,null,{default:p(()=>[_("div",OAe,[l(F,{text:E.$t("translator::translator.translator")},null,8,["text"]),_("div",BAe,[l(R,{class:"font-medium",text:E.$t("core::app.locale")},null,8,["text"]),l(z,null,{default:p(()=>[l(B,{text:u.value,basic:""},null,8,["text"]),l(P,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(r),de=>(g(),A(V,{key:de,text:de,active:u.value===de,condensed:"",onClick:he=>u.value=de},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])]),l(j,null,{default:p(()=>[ne(l(H,{variant:"primary",icon:"PlusSolid",text:E.$t("translator::translator.new_locale")},null,8,["text"]),[[xe,"newLocaleModal"]])]),_:1})]),_:1}),l(me,null,{default:p(()=>[_("ul",NAe,[(g(!0),D(fe,null,Ie(c.value.current.groups,(de,he)=>ne((g(),D("li",{key:he},[_("div",PAe,[_("div",MAe,[_("div",VAe,[_("div",LAe,[l(L,{class:"block font-medium group-hover:text-neutral-900",text:T(he.replace("_"," ")),basic:"",onClick:Y=>x(he)},null,8,["text","onClick"])])]),_("div",qAe,[l(H,{variant:"secondary",icon:"ChevronDownSolid",small:"",onClick:Y=>x(he)},null,8,["onClick"])])])]),ne(_("form",{novalidate:"true",onSubmit:ot(Y=>b(he),["prevent"])},[_("div",jAe,[l(ue,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(G,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(ee,null,{default:p(()=>[l(U,{width:"15%"},{default:p(()=>[le("Key")]),_:1}),l(U,{width:"30%"},{default:p(()=>[le("Source")]),_:1}),l(U,{width:"55%"},{default:p(()=>[le(Z(u.value),1)]),_:1})]),_:1})]),_:1}),l(ae,null,{default:p(()=>[(g(!0),D(fe,null,Ie(de,(Y,X)=>(g(),A(ee,{key:X},{default:p(()=>[l(W,{width:"15%",class:"whitespace-normal font-medium"},{default:p(()=>[le(Z(X),1)]),_:2},1024),l(W,{width:"30%",class:"whitespace-normal"},{default:p(()=>[le(Z(c.value.source.groups[he][X]),1)]),_:2},1024),l(W,{width:"55%"},{default:p(()=>[l(L1,{modelValue:c.value.current.groups[he][X],"onUpdate:modelValue":re=>c.value.current.groups[he][X]=re,source:c.value.source.groups[he][X]},null,8,["modelValue","onUpdate:modelValue","source"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),l(ce,{class:"-mt-px flex items-center justify-end space-x-2"},{default:p(()=>[l(H,{variant:"secondary",disabled:v.value,text:E.$t("core::app.cancel"),onClick:Y=>C(he,!0)},null,8,["disabled","text","onClick"]),l(H,{type:"submit",variant:"primary",text:E.$t("core::app.save"),disabled:v.value,loading:v.value},null,8,["text","disabled","loading"])]),_:2},1024)],40,UAe),[[pe,m.value===he]])])),[[pe,!m.value||m.value===he]])),128))]),(g(!0),D(fe,null,Ie(c.value.current.namespaces,(de,he)=>(g(),D(fe,{key:he},[ne(_("p",{class:"border-y border-neutral-200 bg-neutral-100 px-6 py-3 font-semibold text-neutral-700 dark:border-neutral-500/30 dark:bg-neutral-700 dark:text-neutral-300"},Z(T(he)),513),[[pe,!m.value]]),_("ul",zAe,[(g(!0),D(fe,null,Ie(c.value.current.namespaces[he],(Y,X)=>ne((g(),D("li",{key:X},[_("div",HAe,[_("div",WAe,[_("div",GAe,[_("div",KAe,[l(L,{class:"block font-medium",text:T(X.replace("_"," ")),basic:"",onClick:re=>x(X,he)},null,8,["text","onClick"])])]),_("div",ZAe,[l(H,{variant:"secondary",icon:"ChevronDownSolid",small:"",onClick:re=>x(X,he)},null,8,["onClick"])])])]),ne(_("form",{novalidate:"true",onSubmit:ot(re=>b(X,he),["prevent"])},[_("div",XAe,[l(ue,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(G,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(ee,null,{default:p(()=>[l(U,{width:"15%"},{default:p(()=>[le("Key")]),_:1}),l(U,{width:"30%"},{default:p(()=>[le("Source")]),_:1}),l(U,{width:"55%"},{default:p(()=>[le(Z(u.value),1)]),_:1})]),_:1})]),_:1}),_("tbody",null,[(g(!0),D(fe,null,Ie(Y,(re,we)=>(g(),A(ee,{key:we},{default:p(()=>[l(W,{width:"15%",class:"whitespace-normal font-medium"},{default:p(()=>[le(Z(we),1)]),_:2},1024),l(W,{width:"30%",class:"whitespace-normal"},{default:p(()=>[le(Z(c.value.source.namespaces[he][X][we]),1)]),_:2},1024),l(W,{width:"55%"},{default:p(()=>[l(L1,{modelValue:c.value.current.namespaces[he][X][we],"onUpdate:modelValue":Ce=>c.value.current.namespaces[he][X][we]=Ce,source:c.value.source.namespaces[he][X][we]},null,8,["modelValue","onUpdate:modelValue","source"])]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),l(ce,{class:"-mt-px flex items-center justify-end space-x-2"},{default:p(()=>[l(H,{variant:"secondary",disabled:v.value,text:E.$t("core::app.cancel"),onClick:re=>C(X,!0)},null,8,["disabled","text","onClick"]),l(H,{type:"submit",variant:"primary",text:E.$t("core::app.save"),disabled:v.value,loading:v.value},null,8,["text","disabled","loading"])]),_:2},1024)],40,YAe),[[pe,m.value===X&&f.value===he]])])),[[pe,!m.value||m.value===X&&f.value===he]])),128))])],64))),128)),l(se,{id:"newLocaleModal",size:"sm","ok-text":E.$t("core::app.create"),title:E.$t("translator::translator.create_new_locale"),form:"",onSubmit:k,onShown:$[1]||($[1]=()=>E.$refs.inputNameRef.focus())},{default:p(()=>[l(Q,{"label-for":"localeName",label:E.$t("translator::translator.locale_name"),required:""},{default:p(()=>[l(oe,{id:"localeName",ref:"inputNameRef",modelValue:h(s).name,"onUpdate:modelValue":$[0]||($[0]=de=>h(s).name=de)},null,8,["modelValue"]),l(ie,{error:h(s).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["ok-text","title"])]),_:1})],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/translator",component:QAe,meta:{title:at("translator::translator.translator")}})});const JAe=["innerHTML"],eRe={__name:"RecordTabTimelineWebFormSubmission",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const{localizeIfDate:t}=rt(),n=Innoclapps.resources();return(o,a)=>{const r=d("ITextDark"),s=d("ITextBlockDark"),i=d("IText"),u=d("ICardBody"),c=d("ICard");return g(),A(yo,{"heading-class":"font-medium",icon:"Bars3BottomLeft","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:o.$t("webforms::form.submission")},{default:p(()=>[a[0]||(je(-1),a[0]=l(c,{class:"mt-2"},{default:p(()=>[l(u,null,{default:p(()=>[l(r,{class:"mb-2 font-semibold",text:e.log.description},null,8,["text"]),(g(!0),D(fe,null,Ie(e.log.properties,(m,f)=>(g(),D(fe,{key:f},[l(s,{class:"flex justify-start font-semibold"},{default:p(()=>[_("span",null,Z(h(n)[m.resourceName].singularLabel)+" /",1),_("span",{class:"ml-1 font-medium",innerHTML:m.label},null,8,JAe)]),_:2},1024),l(i,{class:"mb-4 last:mb-0"},{default:p(()=>[le(Z(m.value===null?"/":h(t)(m.value)||m.value),1)]),_:2},1024)],64))),128))]),_:1})]),_:1}),je(1),a[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"])}}},eh=rs(()=>{const{setLoading:e,isLoading:t}=An(),n=M([]),o=O(()=>Vt(n.value,["status","title"],["asc","asc"]));f();function a(v){return n.value.findIndex(y=>y.id==v)}function r(v){n.value.splice(a(v),1)}function s(v){n.value.push(v)}function i(v,y){n.value[a(v)]=y}function u(v){return n.value[a(v)]}async function c(v,y){const{data:b}=await Innoclapps.request(`/forms/${v}`,y);return b}async function m(v){await Innoclapps.request().delete(`/forms/${v}`),r(v)}function f(v){e(!0),Innoclapps.request("/forms",v).then(({data:y})=>n.value=y).finally(()=>e(!1))}return{webForms:n,webFormsOrderedByNameAndStatus:o,formsAreBeingFetched:t,addWebForm:s,removeWebForm:r,setWebForm:i,findWebForm:u,fetchWebForms:f,fetchWebForm:c,deleteWebForm:m}}),tRe={class:"flex items-center px-4 py-5 sm:px-6"},nRe={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},oRe={class:"truncate"},aRe={class:"flex flex-col sm:flex-row"},rRe={class:"whitespace-normal sm:max-w-md sm:truncate"},lRe={class:"mt-2 sm:flex sm:items-center sm:space-x-4"},sRe={class:"mt-2 shrink-0 sm:ml-5 sm:mt-0"},iRe={__name:"WebFormsIndex",setup(e){const{t}=Ee(),n=_t(),{webFormsOrderedByNameAndStatus:o,formsAreBeingFetched:a,setWebForm:r,deleteWebForm:s}=eh(),{findPipelineById:i,findPipelineStageById:u}=Wa(),{form:c}=Ze({status:null}),m=O(()=>o.value.length>0);async function f(w){await s(w),Innoclapps.success(t("webforms::form.deleted"))}function v(){n.push({name:"web-form-create"})}function y(w){n.push({name:"web-form-edit",params:{id:w}})}function b(w){c.fill("status",w.status==="active"?"inactive":"active"),c.put(`/forms/${w.id}`).then(k=>{r(k.id,k)})}return(w,k)=>{const x=d("ICardHeading"),I=d("IButton"),C=d("ICardActions"),S=d("ICardHeader"),T=d("Icon"),E=d("ILink"),$=d("IBadge"),F=d("ITextDark"),R=d("IFormSwitchLabel"),B=d("IFormSwitch"),V=d("IFormSwitchField"),P=d("IDropdownItem"),z=d("IDropdownMinimal"),H=d("IEmptyState"),j=d("ICardBody"),N=d("ICard"),L=d("RouterView");return g(),D(fe,null,[l(S,null,{default:p(()=>[l(x,{text:w.$t("webforms::form.forms")},null,8,["text"]),l(C,null,{default:p(()=>[ne(l(I,{variant:"primary",icon:"PlusSolid",text:w.$t("webforms::form.create"),onClick:v},null,8,["text"]),[[pe,m.value]])]),_:1})]),_:1}),l(N,{overlay:h(a)},{default:p(()=>[h(a)?K("",!0):(g(),D(fe,{key:0},[m.value?(g(),A(li,{key:0,name:"flip-list",tag:"ul",class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},{default:p(()=>[(g(!0),D(fe,null,Ie(h(o),U=>(g(),D("li",{key:U.id},[_("div",{class:be({"opacity-70":U.status==="inactive"})},[_("div",tRe,[_("div",nRe,[_("div",oRe,[_("div",aRe,[l(E,{class:"font-medium sm:flex sm:items-center",onClick:ee=>y(U.id)},{default:p(()=>[_("span",rRe,Z(U.title),1),l(T,{icon:"ArrowRight",class:"ml-1 hidden size-4 sm:block"})]),_:2},1032,["onClick"]),h(i)(U.submit_data.pipeline_id)?(g(),A($,{key:0,class:"sm:ml-2",variant:"primary"},{default:p(()=>[le(Z(h(i)(U.submit_data.pipeline_id).name)+" ",1),l(T,{icon:"ChevronRight",class:"mx-0.5 size-3"}),le(" "+Z(h(u)(U.submit_data.pipeline_id,U.submit_data.stage_id).name),1)]),_:2},1024)):K("",!0)]),_("div",lRe,[l(E,{text:w.$t("core::app.preview"),href:U.public_url},null,8,["text","href"]),l(F,{class:"font-medium",text:w.$t("webforms::form.total_submissions",{total:U.total_submissions||0})},null,8,["text"])])]),_("div",sRe,[l(V,null,{default:p(()=>[l(R,{text:w.$t("webforms::form.active")},null,8,["text"]),l(B,{value:"active","unchecked-value":"inactive","model-value":U.status,onChange:ee=>b(U)},null,8,["model-value","onChange"])]),_:2},1024)])]),l(z,{class:"ml-2 shrink-0 self-start sm:self-auto"},{default:p(()=>[l(P,{icon:"PencilAlt",text:w.$t("core::app.edit"),onClick:ee=>y(U.id)},null,8,["text","onClick"]),l(P,{icon:"Trash",text:w.$t("core::app.delete"),onClick:ee=>w.$confirm(()=>f(U.id))},null,8,["text","onClick"])]),_:2},1024)])],2)]))),128))]),_:1})):(g(),A(j,{key:1},{default:p(()=>[l(H,{"button-text":w.$t("webforms::form.create"),description:w.$t("webforms::form.info"),onClick:v},null,8,["button-text","description"])]),_:1}))],64))]),_:1},8,["overlay"]),l(L)],64)}}},uRe={__name:"SettingsWebForms",setup(e){return(t,n)=>(g(),A(iRe))}},Xi={section:{required:!0,type:Object},form:{required:!0,type:Object}},cRe={__name:"FieldSection",props:Xi,emits:["fillFormAttribute","setFormAttribute"],setup(e){return(t,n)=>(g(),A(Rt(t.section.field.formComponent),{field:t.section.field,"validation-errors":t.form.errors.groupByField()[t.section.field.attribute],"model-value":t.form[t.section.field.attribute],"onUpdate:modelValue":n[0]||(n[0]=o=>t.$emit("fillFormAttribute",{attribute:t.section.field.attribute,value:o})),onSetInitialValue:n[1]||(n[1]=o=>t.$emit("setFormAttribute",{attribute:t.section.field.attribute,value:o}))},null,40,["field","validation-errors","model-value"]))}},dRe={class:"flex flex-col items-center"},mRe=["innerHTML"],fRe={__name:"FileSection",props:Xi,emits:{fillFormAttribute:({attribute:e,value:t})=>e&&typeof t<"u"?!0:(console.warn('Invalid "fillFormAttribute" event payload!'),!1)},setup(e,{emit:t}){const n=e,o=t,a=M([]),r=O(()=>a.value.length);return $e(r,()=>{let s={attribute:n.section.requestAttribute};a.value.length===0?s.value=n.section.multiple?[]:null:n.section.multiple?s.value=a.value.map(i=>i.file):s.value=a.value[0].file,o("fillFormAttribute",s)}),(s,i)=>{const u=d("Icon"),c=d("IFormError"),m=d("IFormGroup");return g(),A(m,null,{default:p(()=>[l(Dl,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),"wrapper-classes":"","base-classes":"group block rounded-lg border border-dashed border-neutral-300 dark:border-neutral-400 w-full py-4 sm:py-5 hover:border-neutral-400 cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-700/60 font-medium text-center",drop:!0,multiple:s.section.multiple,"show-upload-button":!1,"automatic-upload":!1,name:s.section.requestAttribute,"input-id":s.section.requestAttribute},{"upload-content":p(()=>[_("div",dRe,[l(u,{icon:"CloudArrowUp",class:"size-7 text-neutral-600 dark:text-neutral-300 dark:group-hover:text-white"}),_("p",{class:"mt-1 max-w-sm text-sm text-neutral-700 dark:text-neutral-100 dark:group-hover:text-white",innerHTML:s.section.label},null,8,mRe)])]),_:1},8,["modelValue","multiple","name","input-id"]),l(c,{error:s.form.getError(s.section.requestAttribute)},null,8,["error"])]),_:1})}}},pRe={key:0,class:"mb-3"},vRe=["innerHTML"],hRe={__name:"IntroductionSection",props:Xi,setup(e){const t=e,n=O(()=>t.section.title||t.section.message);return(o,a)=>{const r=d("ITextDisplay"),s=d("ITextBlock");return n.value?(g(),D("div",pRe,[l(r,{text:o.section.title},null,8,["text"]),l(s,{class:"wysiwyg-text"},{default:p(()=>[_("div",{innerHTML:o.section.message},null,8,vRe)]),_:1})])):K("",!0)}}},gRe=["innerHTML"],bRe={__name:"MessageSection",props:Xi,setup(e){return(t,n)=>{const o=d("ITextBlock");return g(),A(o,{class:"wysiwyg-text mb-3"},{default:p(()=>[_("div",{innerHTML:t.section.message},null,8,gRe)]),_:1})}}},yRe={key:1,class:"flex"},_Re={__name:"SubmitButtonSection",props:Xi,emits:{fillFormAttribute:({attribute:e,value:t})=>e&&typeof t<"u"?!0:(console.warn('Invalid "fillFormAttribute" event payload!'),!1)},setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),r=a("reCaptcha")||{},s=M(!1),i=O(()=>n.section.spamProtected?r.validate&&r.configured:!1);function u(c){o("fillFormAttribute",{attribute:"g-recaptcha-response",value:c})}return(c,m)=>{const f=d("IFormError"),v=d("IFormGroup"),y=d("IFormCheckbox"),b=d("ILink"),w=d("I18nT"),k=d("IFormCheckboxLabel"),x=d("IFormCheckboxField"),I=d("IButton");return g(),D("div",null,[i.value?(g(),A(v,{key:0},{default:p(()=>[l(h(Xp),{sitekey:h(r).siteKey,onVerify:u},null,8,["sitekey"]),l(f,{error:c.form.getError("g-recaptcha-response")},null,8,["error"])]),_:1})):K("",!0),c.section.privacyPolicyAcceptIsRequired?(g(),D("div",yRe,[l(x,null,{default:p(()=>[l(y,{checked:s.value,"onUpdate:checked":m[0]||(m[0]=C=>s.value=C),class:"self-start",onChange:m[1]||(m[1]=C=>c.form.fill("_privacy-policy",C))},null,8,["checked"]),l(k,{class:"-mt-1 text-neutral-500"},{default:p(()=>[l(w,{scope:"global",keypath:"core::app.agree_to_privacy_policy"},{privacyPolicyLink:p(()=>[l(b,{variant:"primary",href:c.section.privacyPolicyUrl},{default:p(()=>[le(Z(c.$t("core::app.privacy_policy")),1)]),_:1},8,["href"])]),_:1},8,["keypath"])]),_:1})]),_:1})])):K("",!0),l(f,{class:"ml-6",error:c.form.getError("_privacy-policy")},null,8,["error"]),l(I,{id:"submitButton",variant:"primary",class:"mt-3",type:"submit",disabled:c.form.busy,loading:c.form.busy,text:c.section.text,block:""},null,8,["disabled","loading","text"])])}}},IRe=["src"],wRe={key:0},xRe=["textContent"],kRe=["innerHTML"],$Re={__name:"WebFormPublicView",props:{sections:{required:!0,type:Array},styles:{required:!0,type:Object},submitData:{required:!0,type:Object},publicUrl:{required:!0,type:String},logo:String},setup(e){const t=e,n={"field-section":cRe,"file-section":fRe,"introduction-section":hRe,"message-section":bRe,"submit-button-section":_Re},o=M(!1),a=It(),{findField:r}=yn(t.sections.filter(C=>v(C)&&C.field).map(C=>C.field)),{form:s}=Ze();t.sections.filter(y).forEach(C=>{s.set(C.requestAttribute,C.multiple?[]:null)});const i=O(()=>t.sections.map(C=>(v(C)&&(C.field=r(C.requestAttribute)),C)).filter(C=>v(C)?!!C.field:!0)),u=O(()=>i.value.length>0),c=O(()=>Object.hasOwn(a.query,"bgColor")?a.query.bgColor:t.styles.background_color),m=O(()=>Object.hasOwn(a.query,"primaryColor")?"#"+a.query.primaryColor:t.styles.primary_color),f=O(()=>a.query.e==="true");function v(C){return C.type==="field-section"}function y(C){return C.type==="file-section"}function b(){s.post(t.publicUrl).then(()=>{t.submitData.action==="redirect"?window.top?window.top.location.href=t.submitData.success_redirect_url:window.location.href=t.submitData.success_redirect_url:o.value=!0})}let w=new WeakMap,k=function(){return!!window.getComputedStyle(document.body).getPropertyValue("--color-primary-50")}();function x(C){let S=Array.prototype.slice.call(document.querySelectorAll("style"),0),T=/(\-\-[-\w]+)\:\s*(.*?)\;/g,E=C||{};if(k){Object.keys(E).forEach(function(F){document.body.style.setProperty("--"+F,E[F])});return}function $(F){return new RegExp("var\\(s*"+F+"s*\\)","gmi")}S.forEach(function(F){let R=w[F]||(w[F]=F.textContent),B;for(;B=T.exec(R);)R=R.replace($(B[1]),E[B[1].substr(2)]||B[2]);F.textContent=R})}let I=C=>{try{return Mu(_A(m.value,C))}catch{return Mu(m.value)}};return x({"color-primary-50":I(100),"color-primary-100":I(80),"color-primary-200":I(60),"color-primary-300":I(40),"color-primary-400":I(20),"color-primary-500":I(10),"color-primary-600":I(0),"color-primary-700":I(-10),"color-primary-800":I(-20),"color-primary-900":I(-30)}),Je(()=>{document.body.style.backgroundColor=c.value,document.getElementById("app").style.backgroundColor=c.value}),(C,S)=>{const T=d("IAlertBody"),E=d("IAlert"),$=d("ICardBody"),F=d("ICard");return g(),D("div",{dusk:"web-form",class:be(["m-auto",{"w-full":f.value,"max-w-2xl":!f.value}]),style:Nt({"--primary-contrast":h(jr)(m.value)})},[e.logo?(g(),D("img",{key:0,class:"mx-auto mb-3 mt-10 h-12 w-auto",src:e.logo},null,8,IRe)):K("",!0),l(F,{class:be(["m-4 sm:m-8 sm:p-3",{"my-5":!f.value,"rounded-none shadow-none":f.value}])},{default:p(()=>[l($,null,{default:p(()=>[o.value?(g(),D("div",wRe,[_("h4",{class:"text-lg text-neutral-800",textContent:Z(e.submitData.success_title)},null,8,xRe),ne(_("div",{class:"wysiwyg-text",innerHTML:e.submitData.success_message},null,8,kRe),[[pe,e.submitData.success_message]])])):u.value?(g(),D("form",{key:2,novalidate:"true",onSubmit:ot(b,["prevent"])},[(g(!0),D(fe,null,Ie(i.value,(R,B)=>(g(),A(Rt(n[R.type]),{key:B,form:h(s),section:R,onFillFormAttribute:S[0]||(S[0]=V=>h(s).fill(V.attribute,V.value)),onSetFormAttribute:S[1]||(S[1]=V=>h(s).set(V.attribute,V.value))},null,40,["form","section"]))),128))],32)):(g(),A(E,{key:1,variant:"warning"},{default:p(()=>[l(T,null,{default:p(()=>[le(Z(C.$t("webforms::form.no_sections")),1)]),_:1})]),_:1}))]),_:1})]),_:1},8,["class"])],6)}}},CRe={class:"mb-2"},SRe={class:"mb-3 font-medium text-neutral-700 dark:text-neutral-300"},TRe={__name:"WebFormsCreate",setup(e){const t=_t(),{addWebForm:n}=eh(),{scriptConfig:o}=Ne(),a=o("favourite_colors"),{form:r}=Ze({title:null,styles:{primary_color:"#4f46e5",background_color:"#F3F4F6"}});function s(){r.post("/forms").then(i=>{n(i),t.push({name:"web-form-edit",params:{id:i.id}})})}return(i,u)=>{const c=d("IFormInput"),m=d("IFormError"),f=d("IFormGroup"),v=d("IColorSwatch"),y=d("IModal"),b=Ve("t");return g(),A(y,{size:"sm","ok-text":i.$t("core::app.create"),"ok-disabled":h(r).busy,title:i.$t("webforms::form.create"),visible:"","static-backdrop":"",form:"",onSubmit:s,onHidden:i.$router.back,onShown:u[3]||(u[3]=()=>i.$refs.inputTitleRef.focus())},{default:p(()=>[l(f,{"label-for":"title",description:i.$t("webforms::form.title_visibility_info"),label:i.$t("webforms::form.title"),required:""},{default:p(()=>[l(c,{id:"title",ref:"inputTitleRef",modelValue:h(r).title,"onUpdate:modelValue":u[0]||(u[0]=w=>h(r).title=w)},null,8,["modelValue"]),l(m,{error:h(r).getError("title")},null,8,["error"])]),_:1},8,["description","label"]),_("div",CRe,[ne(_("h5",SRe,null,512),[[b,"webforms::form.style.style"]]),l(f,{label:i.$t("webforms::form.style.primary_color")},{default:p(()=>[l(v,{modelValue:h(r).styles.primary_color,"onUpdate:modelValue":u[1]||(u[1]=w=>h(r).styles.primary_color=w),swatches:h(a)},null,8,["modelValue","swatches"]),l(m,{error:h(r).getError("styles.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(f,{label:i.$t("webforms::form.style.background_color")},{default:p(()=>[l(v,{modelValue:h(r).styles.background_color,"onUpdate:modelValue":u[2]||(u[2]=w=>h(r).styles.background_color=w),swatches:h(a)},null,8,["modelValue","swatches"]),l(m,{error:h(r).getError("styles.background_color")},null,8,["error"])]),_:1},8,["label"])])]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}};function E5(e,t,n){const o=M(null),a=M(null),r=M(!1),s=O(()=>o.value&&o.value.isRequired&&o.value.primary),i=O(()=>Vt(Tn(pt(t),f=>(f.disabled=m(f),f)),["disabled","order"],["desc","asc"]));function u(){return $o(25)}function c(f){f?(a.value=f.label,r.value=f.isRequired):(a.value="",r.value=!1)}function m(f){return!ut(pt(n),{attribute:f.attribute,resourceName:pt(e)})}return{field:o,fieldLabel:a,isRequired:r,fieldMustBeRequired:s,availableFields:i,generateRequestAttribute:u,handleFieldChanged:c,isFieldAlreadySelected:m}}const ERe=["innerHTML"],FRe={class:"text-right"},ARe={class:"flex items-center justify-between"},RRe={class:"space-x-2"},DRe={__name:"FieldSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object},companiesFields:{required:!0},contactsFields:{required:!0},dealsFields:{required:!0},availableResources:{required:!0}},emits:["updateSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),r=M(!1),s=M(n.section.resourceName),i=O(()=>n[s.value+"Fields"]),u=ut(i.value,{attribute:n.section.attribute}),{field:c,availableFields:m,handleFieldChanged:f,fieldLabel:v,isRequired:y,fieldMustBeRequired:b,generateRequestAttribute:w}=E5(s,i,gt(n.form,"sections")),k=O(()=>!r.value&&u),x=O(()=>ut(n.availableResources,{id:n.section.resourceName}).label),I=O(()=>u?x.value+" | "+u.label:a("core::fields.no_longer_available")),C=O(()=>v.value===null||v.value==""||c.value==null);function S(){let $={isRequired:y.value,label:v.value,resourceName:s.value,attribute:c.value.attribute};(!u||s.value!=n.section.resourceName||c.value.attribute!=u.attribute)&&($.requestAttribute=w()),o("updateSectionRequested",$),r.value=!1}function T(){c.value=u,s.value=n.section.resourceName,v.value=n.section.label,y.value=n.section.isRequired,r.value=!0}function E(){o("removeSectionRequested")}return($,F)=>{const R=d("ITextSmall"),B=d("ICardHeading"),V=d("IButton"),P=d("ICardActions"),z=d("ICardHeader"),H=d("ITextBlockDark"),j=d("ICustomSelect"),N=d("IFormGroup"),L=d("Editor"),U=d("IFormCheckbox"),ee=d("IFormCheckboxLabel"),G=d("IFormCheckboxField"),W=d("ICardBody"),ae=d("ICard");return g(),A(ae,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-danger-500":!h(u),"border border-primary-400 dark:border-primary-500":r.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!r.value&&h(u)}]])},{default:p(()=>[l(z,null,{default:p(()=>[l(B,{class:"truncate text-sm/6"},{default:p(()=>[le(Z(I.value)+" ",1),h(u)&&!e.section.isRequired?(g(),A(R,{key:0,class:"inline font-normal"},{default:p(()=>[le(Z($.$t("core::fields.optional")),1)]),_:1})):K("",!0)]),_:1}),l(P,null,{default:p(()=>[l(V,{icon:"PencilAlt",class:be([k.value?"opacity-100 md:opacity-0 md:group-hover:opacity-100":"opacity-0"]),basic:"",small:"",onClick:T},null,8,["class"]),l(V,{class:"opacity-100 md:opacity-0 md:group-hover:opacity-100",icon:"Trash",basic:"",small:"",onClick:E})]),_:1})]),_:1}),l(W,null,{default:p(()=>[ne(l(H,null,{default:p(()=>[_("p",{innerHTML:e.section.label},null,8,ERe)]),_:1},512),[[pe,!r.value]]),r.value?(g(),D(fe,{key:0},[l(N,{"label-for":"resourceName",label:$.$t("webforms::form.sections.field.resourceName")},{default:p(()=>[l(j,{modelValue:s.value,"onUpdate:modelValue":F[0]||(F[0]=ue=>s.value=ue),label:"label","field-id":"resourceName",clearable:!1,options:e.availableResources,reduce:ue=>ue.id,onOptionSelected:F[1]||(F[1]=ue=>c.value=null)},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(N,{"label-for":"field",label:$.$t("core::fields.field")},{default:p(()=>[l(j,{modelValue:h(c),"onUpdate:modelValue":F[2]||(F[2]=ue=>$n(c)?c.value=ue:null),label:"label","field-id":"field",clearable:!1,selectable:ue=>ue.disabled,options:h(m),onOptionSelected:h(f)},null,8,["modelValue","selectable","options","onOptionSelected"])]),_:1},8,["label"]),ne(l(N,{label:$.$t("core::fields.label")},{default:p(()=>[l(L,{modelValue:h(v),"onUpdate:modelValue":F[3]||(F[3]=ue=>$n(v)?v.value=ue:null),"default-tag":"div",config:{toolbar:"bold italic underline link removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),[[pe,h(c)!==null]]),_("div",FRe,[_("div",ARe,[ne(l(G,null,{default:p(()=>[l(U,{checked:h(y),"onUpdate:checked":F[4]||(F[4]=ue=>$n(y)?y.value=ue:null),disabled:h(b)},null,8,["checked","disabled"]),l(ee,{text:$.$t("core::fields.is_required")},null,8,["text"])]),_:1},512),[[pe,h(c)!==null]]),_("div",RRe,[l(V,{variant:"secondary",text:$.$t("core::app.cancel"),onClick:F[5]||(F[5]=ue=>r.value=!1)},null,8,["text"]),l(V,{variant:"primary",disabled:C.value,text:$.$t("core::app.save"),onClick:S},null,8,["disabled","text"])])])])],64)):K("",!0)]),_:1})]),_:1},8,["class"])}}},ORe=["innerHTML"],BRe={class:"space-x-2 text-right"},NRe={__name:"FileSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object},availableResources:{required:!0}},emits:["updateSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),r=M(!1),s=M(null),i=M(!1),u=M(null),c=M(!1),m=O(()=>!r.value),f=O(()=>ut(n.availableResources,{id:n.section.resourceName}).label),v=O(()=>f.value+" | "+(n.section.multiple?a("webforms::form.sections.file.files"):a("webforms::form.sections.file.file"))+(n.section.isRequired?"":" "+a("core::fields.optional"))),y=O(()=>s.value===null||s.value=="");function b(){o("updateSectionRequested",{resourceName:u.value,label:s.value,isRequired:i.value,multiple:c.value}),r.value=!1}function w(){o("removeSectionRequested")}function k(){u.value=n.section.resourceName,s.value=n.section.label,i.value=n.section.isRequired,c.value=n.section.multiple,r.value=!0}return(x,I)=>{const C=d("ICardHeading"),S=d("IButton"),T=d("ICardActions"),E=d("ICardHeader"),$=d("ITextBlockDark"),F=d("ICustomSelect"),R=d("IFormGroup"),B=d("Editor"),V=d("IFormCheckbox"),P=d("IFormCheckboxLabel"),z=d("IFormCheckboxField"),H=d("ICardBody"),j=d("ICard");return g(),A(j,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":r.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!r.value}]])},{default:p(()=>[l(E,null,{default:p(()=>[l(C,{class:"text-sm/6",text:v.value},null,8,["text"]),l(T,null,{default:p(()=>[l(S,{icon:"PencilAlt",class:be([m.value?"opacity-100 md:opacity-0 md:group-hover:opacity-100":"opacity-0"]),basic:"",small:"",onClick:k},null,8,["class"]),l(S,{class:"opacity-100 md:opacity-0 md:group-hover:opacity-100",icon:"Trash",basic:"",small:"",onClick:w})]),_:1})]),_:1}),l(H,null,{default:p(()=>[ne(l($,null,{default:p(()=>[_("p",{innerHTML:e.section.label},null,8,ORe)]),_:1},512),[[pe,!r.value]]),r.value?(g(),D(fe,{key:0},[l(R,{"label-for":"resourceName",label:x.$t("webforms::form.sections.field.resourceName")},{default:p(()=>[l(F,{modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=N=>u.value=N),label:"label","field-id":"resourceName",clearable:!1,options:e.availableResources,reduce:N=>N.id},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(R,{label:x.$t("core::fields.label")},{default:p(()=>[l(B,{modelValue:s.value,"onUpdate:modelValue":I[1]||(I[1]=N=>s.value=N),"default-tag":"div",config:{toolbar:"bold italic underline link removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),l(R,null,{default:p(()=>[l(z,null,{default:p(()=>[l(V,{checked:i.value,"onUpdate:checked":I[2]||(I[2]=N=>i.value=N)},null,8,["checked"]),l(P,{text:x.$t("core::fields.is_required")},null,8,["text"])]),_:1}),l(z,null,{default:p(()=>[l(V,{checked:c.value,"onUpdate:checked":I[3]||(I[3]=N=>c.value=N)},null,8,["checked"]),l(P,{text:x.$t("webforms::form.sections.file.multiple")},null,8,["text"])]),_:1})]),_:1}),_("div",BRe,[l(S,{variant:"secondary",text:x.$t("core::app.cancel"),onClick:I[4]||(I[4]=N=>r.value=!1)},null,8,["text"]),l(S,{variant:"primary",disabled:y.value,text:x.$t("core::app.save"),onClick:b},null,8,["disabled","text"])])],64)):K("",!0)]),_:1})]),_:1},8,["class"])}}},PRe=["innerHTML"],MRe={class:"space-x-2 text-right"},VRe=Object.assign({inheritAttrs:!1},{__name:"IntroductionSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object}},emits:["updateSectionRequested"],setup(e,{emit:t}){const n=e,o=t,a=M(!1),r=M(null),s=M(null);function i(){o("updateSectionRequested",{title:r.value,message:s.value}),a.value=!1}function u(){r.value=n.section.title,s.value=n.section.message,a.value=!0}return(c,m)=>{const f=d("ICardHeading"),v=d("IButton"),y=d("ICardActions"),b=d("ICardHeader"),w=d("ITextDisplay"),k=d("ITextBlock"),x=d("IFormInput"),I=d("IFormGroup"),C=d("Editor"),S=d("ICardBody"),T=d("ICard");return g(),A(T,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":a.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!a.value}]])},{default:p(()=>[l(b,null,{default:p(()=>[l(f,{class:"text-sm/6",text:c.$t("webforms::form.sections.introduction.introduction")},null,8,["text"]),l(y,null,{default:p(()=>[l(v,{icon:"PencilAlt",class:be([a.value?"opacity-0":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),basic:"",small:"",onClick:u},null,8,["class"])]),_:1})]),_:1}),l(S,null,{default:p(()=>[ne(_("div",null,[l(w,{text:e.section.title},null,8,["text"]),l(k,{class:"wysiwyg-text"},{default:p(()=>[_("div",{innerHTML:e.section.message},null,8,PRe)]),_:1})],512),[[pe,!a.value]]),a.value?(g(),D(fe,{key:0},[l(I,{"label-for":"title",label:c.$t("webforms::form.sections.introduction.title")},{default:p(()=>[l(x,{id:"title",modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=E=>r.value=E)},null,8,["modelValue"])]),_:1},8,["label"]),l(I,{label:c.$t("webforms::form.sections.introduction.message")},{default:p(()=>[l(C,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=E=>s.value=E),"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),_("div",MRe,[l(v,{variant:"secondary",text:c.$t("core::app.cancel"),onClick:m[2]||(m[2]=E=>a.value=!1)},null,8,["text"]),l(v,{variant:"primary",text:c.$t("core::app.save"),onClick:i},null,8,["text"])])],64)):K("",!0)]),_:1})]),_:1},8,["class"])}}}),LRe=["innerHTML"],qRe={class:"space-x-2 text-right"},URe=Object.assign({inheritAttrs:!1},{__name:"MessageSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object}},emits:["updateSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,a=M(!1),r=M(null);function s(){o("updateSectionRequested",{message:r.value}),a.value=!1}function i(){o("removeSectionRequested")}function u(){r.value=n.section.message,a.value=!0}return(c,m)=>{const f=d("ICardHeading"),v=d("IButton"),y=d("ICardActions"),b=d("ICardHeader"),w=d("ITextBlock"),k=d("Editor"),x=d("IFormGroup"),I=d("ICardBody"),C=d("ICard");return g(),A(C,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":a.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!a.value}]])},{default:p(()=>[l(b,null,{default:p(()=>[l(f,{class:"text-sm/6",text:c.$t("webforms::form.sections.message.message")},null,8,["text"]),l(y,null,{default:p(()=>[l(v,{icon:"PencilAlt",class:be([a.value?"opacity-0":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),basic:"",small:"",onClick:u},null,8,["class"]),l(v,{class:"block md:opacity-0 md:group-hover:opacity-100",icon:"Trash",basic:"",small:"",onClick:i})]),_:1})]),_:1}),l(I,null,{default:p(()=>[ne(l(w,{class:"wysiwyg-text"},{default:p(()=>[_("div",{innerHTML:e.section.message},null,8,LRe)]),_:1},512),[[pe,!a.value]]),a.value?(g(),D(fe,{key:0},[l(x,{label:c.$t("webforms::form.sections.message.message")},{default:p(()=>[l(k,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=S=>r.value=S),"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),_("div",qRe,[l(v,{variant:"secondary",text:c.$t("core::app.cancel"),onClick:m[1]||(m[1]=S=>a.value=!1)},null,8,["text"]),l(v,{variant:"primary",text:c.$t("core::app.save"),onClick:s},null,8,["text"])])],64)):K("",!0)]),_:1})]),_:1},8,["class"])}}}),jRe={key:1},zRe={class:"space-x-2 text-right"},HRe=Object.assign({inheritAttrs:!1},{__name:"NewSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object},companiesFields:{required:!0},contactsFields:{required:!0},dealsFields:{required:!0},availableResources:{required:!0}},emits:["createSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ee(),r=M("field"),s=M("contacts"),i=M(!1),u=M(null),c=O(()=>n[s.value+"Fields"]),{field:m,availableFields:f,handleFieldChanged:v,fieldLabel:y,isRequired:b,fieldMustBeRequired:w,generateRequestAttribute:k}=E5(s,c,gt(n.form,"sections")),x=[{id:"field",label:a("webforms::form.sections.types.input_field")},{id:"message",label:a("webforms::form.sections.types.message")},{id:"file",label:a("webforms::form.sections.types.file")}],I=O(()=>r.value==="field"?y.value===null||y.value==""||m.value==null:r.value==="message"?u.value===null||u.value=="":r.value==="file"?y.value===null||y.value=="":!1);function C(){o("createSectionRequested",{type:"message-section",message:u.value})}function S(){o("createSectionRequested",{type:"field-section",isRequired:b.value,label:y.value,resourceName:s.value,attribute:m.value.attribute,requestAttribute:k()})}function T(){o("createSectionRequested",{type:"file-section",isRequired:b.value,label:y.value,resourceName:s.value,multiple:i.value,requestAttribute:k()})}function E(){r.value==="message"?C():r.value==="file"?T():S()}function $(){o("removeSectionRequested")}return(F,R)=>{const B=d("ICardHeading"),V=d("IButton"),P=d("ICardActions"),z=d("ICardHeader"),H=d("ICustomSelect"),j=d("IFormGroup"),N=d("Editor"),L=d("IFormCheckbox"),U=d("IFormCheckboxLabel"),ee=d("IFormCheckboxField"),G=d("ICardBody"),W=d("ICard");return g(),A(W,{class:"border border-primary-400 dark:border-primary-500 [&>[data-slot=header]]:py-3"},{default:p(()=>[l(z,null,{default:p(()=>[l(B,{class:"text-sm/6",text:F.$t("webforms::form.sections.new")},null,8,["text"]),l(P,null,{default:p(()=>[l(V,{icon:"XSolid",basic:"",small:"",onClick:$})]),_:1})]),_:1}),l(G,null,{default:p(()=>[l(j,{"label-for":"section_type",label:F.$t("webforms::form.sections.type")},{default:p(()=>[l(H,{modelValue:r.value,"onUpdate:modelValue":R[0]||(R[0]=ae=>r.value=ae),label:"label","field-id":"section_type",options:x,clearable:!1,reduce:ae=>ae.id,onOptionSelected:R[1]||(R[1]=ae=>(ae.id==="file"&&(y.value="Attachment"),ae.id!=="field"?m.value=null:""))},null,8,["modelValue","reduce"])]),_:1},8,["label"]),r.value==="message"?(g(),A(j,{key:0,label:F.$t("webforms::form.sections.message.message")},{default:p(()=>[l(N,{modelValue:u.value,"onUpdate:modelValue":R[2]||(R[2]=ae=>u.value=ae),"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"])):(g(),D("div",jRe,[l(j,{"label-for":"resourceName",label:F.$t("webforms::form.sections.field.resourceName")},{default:p(()=>[l(H,{modelValue:s.value,"onUpdate:modelValue":R[3]||(R[3]=ae=>s.value=ae),label:"label","field-id":"resourceName",clearable:!1,options:e.availableResources,reduce:ae=>ae.id,onOptionSelected:R[4]||(R[4]=ae=>m.value=null)},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),r.value==="field"?(g(),A(j,{key:0,"label-for":"field",label:F.$t("core::fields.field")},{default:p(()=>[l(H,{modelValue:h(m),"onUpdate:modelValue":R[5]||(R[5]=ae=>$n(m)?m.value=ae:null),label:"label","field-id":"field",clearable:!1,selectable:ae=>ae.disabled,options:h(f),onOptionSelected:h(v)},null,8,["modelValue","selectable","options","onOptionSelected"])]),_:1},8,["label"])):K("",!0),ne(l(j,{label:F.$t("core::fields.label")},{default:p(()=>[l(N,{modelValue:h(y),"onUpdate:modelValue":R[6]||(R[6]=ae=>$n(y)?y.value=ae:null),"default-tag":"div",config:{toolbar:"bold italic underline link removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),[[pe,h(m)!==null||r.value==="file"]]),l(j,null,{default:p(()=>[ne(l(ee,null,{default:p(()=>[l(L,{checked:h(b),"onUpdate:checked":R[7]||(R[7]=ae=>$n(b)?b.value=ae:null),disabled:h(w)},null,8,["checked","disabled"]),l(U,{text:F.$t("core::fields.is_required")},null,8,["text"])]),_:1},512),[[pe,h(m)!==null||r.value==="file"]]),ne(l(ee,null,{default:p(()=>[l(L,{checked:i.value,"onUpdate:checked":R[8]||(R[8]=ae=>i.value=ae)},null,8,["checked"]),l(U,{text:F.$t("webforms::form.sections.file.multiple")},null,8,["text"])]),_:1},512),[[pe,r.value==="file"]])]),_:1})])),_("div",zRe,[l(V,{variant:"secondary",text:F.$t("core::app.cancel"),onClick:$},null,8,["text"]),l(V,{variant:"primary",disabled:I.value,text:F.$t("core::app.save"),onClick:E},null,8,["disabled","text"])])]),_:1})]),_:1})}}}),WRe={key:0},GRe={class:"space-x-2 text-right"},KRe=Object.assign({inheritAttrs:!1},{__name:"SubmitButtonSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object}},emits:["updateSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=Ne(),r=M(!1),s=M(null),i=M(!1),u=M(!1),c=M(a("privacyPolicyUrl"));function m(){o("updateSectionRequested",{text:s.value,spamProtected:i.value,privacyPolicyAcceptIsRequired:u.value,privacyPolicyUrl:c.value}),r.value=!1}function f(){s.value=n.section.text,i.value=n.section.spamProtected,u.value=n.section.privacyPolicyAcceptIsRequired,c.value=n.section.privacyPolicyUrl,r.value=!0}return(v,y)=>{const b=d("ICardHeading"),w=d("IButton"),k=d("ICardActions"),x=d("ICardHeader"),I=d("ITextDark"),C=d("IFormInput"),S=d("IFormGroup"),T=d("IFormCheckbox"),E=d("IFormCheckboxLabel"),$=d("IFormCheckboxField"),F=d("ICardBody"),R=d("ICard");return g(),A(R,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":r.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!r.value}]])},{default:p(()=>[l(x,null,{default:p(()=>[l(b,{class:"text-sm/6",text:v.$t("webforms::form.sections.submit.button")},null,8,["text"]),l(k,null,{default:p(()=>[l(w,{icon:"PencilAlt",class:be([r.value?"opacity-0":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),basic:"",small:"",onClick:f},null,8,["class"])]),_:1})]),_:1}),l(F,null,{default:p(()=>[ne(l(I,{text:e.section.text},null,8,["text"]),[[pe,!r.value]]),r.value?(g(),D("div",WRe,[l(S,{"label-for":"text",label:v.$t("webforms::form.sections.submit.button_text")},{default:p(()=>[l(C,{id:"text",modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=B=>s.value=B)},null,8,["modelValue"])]),_:1},8,["label"]),ne(l(S,null,{default:p(()=>[l($,null,{default:p(()=>[l(T,{checked:i.value,"onUpdate:checked":y[1]||(y[1]=B=>i.value=B)},null,8,["checked"]),l(E,{text:v.$t("webforms::form.sections.submit.spam_protected")},null,8,["text"])]),_:1})]),_:1},512),[[pe,v.$scriptConfig("reCaptcha.configured")]]),l(S,null,{default:p(()=>[l($,null,{default:p(()=>[l(T,{checked:u.value,"onUpdate:checked":y[2]||(y[2]=B=>u.value=B)},null,8,["checked"]),l(E,{text:v.$t("webforms::form.sections.submit.require_privacy_policy")},null,8,["text"])]),_:1})]),_:1}),ne(l(S,{"label-for":"privacy_policy_url",label:v.$t("webforms::form.sections.submit.privacy_policy_url")},{default:p(()=>[l(C,{id:"privacy_policy_url",modelValue:c.value,"onUpdate:modelValue":y[3]||(y[3]=B=>c.value=B)},null,8,["modelValue"])]),_:1},8,["label"]),[[pe,u.value]]),_("div",GRe,[l(w,{variant:"secondary",text:v.$t("core::app.cancel"),onClick:y[4]||(y[4]=B=>r.value=!1)},null,8,["text"]),l(w,{variant:"primary",text:v.$t("core::app.save"),onClick:m},null,8,["text"])])])):K("",!0)]),_:1})]),_:1},8,["class"])}}}),ZRe={class:"select-all rounded-lg border border-neutral-200 bg-neutral-100 px-3 py-1.5 text-neutral-900 dark:border-neutral-500/30 dark:bg-neutral-800 dark:text-neutral-200"},YRe=_("ul",{class:"ml-4 list-disc leading-7"},[_("li",null,"Copy the code snippet below"),_("li",null," Paste the code right where you want the form to appear in your template or CMS editor ")],-1),XRe=_("em",{class:"font-italic"},[le("* When entering the snippet to your CMS, make sure you are in "),_("span",{class:"font-medium"},'"editing mode"'),le(". ")],-1),QRe=_("em",{class:"font-italic"},[le(" * You must place the iframe snippet on a website that uses the same protocol like your installation, for example, if the current installation uses "),_("span",{class:"font-medium"},"https://"),le(" URL protocol, you will need to add the iframe in a website that uses "),_("span",{class:"font-medium"},"https://"),le(" URL protocol, "),_("span",{class:"font-medium"}," adding https URL iframe on a non-https url, will prevent the form from loading. ")],-1),JRe={class:"mt-3 select-all rounded-lg border border-neutral-200 bg-neutral-100 px-2 py-1.5 text-neutral-900 dark:border-neutral-500/30 dark:bg-neutral-800 dark:text-neutral-200"},eDe={__name:"WebFormsEditEmbed",props:["form"],setup(e){const t=e,n=O(()=>`<iframe src="${t.form.public_url}?e=true" frameborder="0" width="700" height="500" sandbox="allow-top-navigation allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox"></iframe>`);return(o,a)=>{const r=d("IButtonCopy"),s=d("ITextDisplay"),i=d("ITextBlock"),u=d("IText"),c=Ve("i-tooltip");return g(),D("div",null,[l(s,{class:"mb-3 inline-flex items-center"},{default:p(()=>[le(" Share via link "),ne(l(r,{class:"ml-3",text:e.form.public_url,"success-message":o.$t("core::app.copied")},null,8,["text","success-message"]),[[c,o.$t("core::app.copy")]])]),_:1}),_("div",ZRe,Z(e.form.public_url),1),l(s,{class:"mb-3 mt-8"},{default:p(()=>[le(" Embed the form on your Website ")]),_:1}),l(i,null,{default:p(()=>[YRe]),_:1}),l(u,{class:"mb-2 mt-4"},{default:p(()=>[XRe]),_:1}),l(u,{class:"mb-2 mt-4"},{default:p(()=>[QRe]),_:1}),l(s,{class:"mb-3 mt-8"},{default:p(()=>[le(" Snippet code ")]),_:1}),_("div",JRe,Z(n.value),1)])}}},tDe={class:"grid max-w-lg grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},nDe={class:"flex flex-1"},oDe={class:"flex flex-col items-center rounded-md bg-white px-3 py-2"},aDe={__name:"WebFormsEditLogoType",props:yt({modelValue:String,backgroundColor:String,primaryColor:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zt(e,"modelValue"),{t:n}=Ee(),o=[{id:"form_no_logo",title:n("core::app.no"),value:null},{id:"form_logo_light",value:"light",title:n("core::app.logo.light")},{id:"form_logo_dark",value:"dark",title:n("core::app.logo.dark")}];return(a,r)=>{const s=d("Icon");return g(),A(h(ds),{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value=i)},{default:p(()=>[l(h(cr),{class:"sr-only"},{default:p(()=>[le("Select web form logo type")]),_:1}),_("div",tDe,[(g(),D(fe,null,Ie(o,i=>l(h(od),{key:i.id,as:"template",value:i.value},{default:p(({checked:u,active:c})=>[_("div",{class:be([u?"border-transparent":"border-neutral-300 dark:border-neutral-500/30",c?"border-primary-600 ring-2 ring-primary-600":"","relative flex cursor-pointer flex-col rounded-lg border bg-white p-4 shadow-sm focus:outline-none dark:bg-neutral-500/10"])},[_("span",nDe,[l(h(cr),{as:"span",class:"block self-start truncate text-base font-medium text-neutral-900 dark:text-white sm:text-sm"},{default:p(()=>[le(Z(i.title),1)]),_:2},1024),l(s,{icon:"CheckCircle",class:be([u?"":"invisible","ml-auto size-5 text-primary-600"])},null,8,["class"])]),l(h(Xs),{class:"mt-auto"},{default:p(()=>[_("div",{class:"mt-2 h-[130px] w-full overflow-hidden p-3",style:Nt({backgroundColor:e.backgroundColor})},[i.value==="dark"?(g(),A(s,{key:0,icon:"RocketLaunch",class:"mx-auto mb-2 size-5"})):i.value==="light"?(g(),A(s,{key:1,icon:"RocketLaunch",class:"mx-auto mb-2 size-5 text-white"})):K("",!0),_("div",oDe,[_("div",{class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4),_("div",{class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4),_("div",{class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4),i.value===null?(g(),D("div",{key:0,class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4)):K("",!0),i.value===null?(g(),D("div",{key:1,class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4)):K("",!0),_("div",{class:"mt-3 h-3 w-full rounded",style:Nt({backgroundColor:e.primaryColor})},null,4)])],4)]),_:2},1024),_("span",{"aria-hidden":"true",class:be([c?"border":"border-2",u?"border-primary-600":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"])},null,2)],2)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])}}},rDe={class:"text-right"},lDe={class:"flex w-full sm:mr-16"},sDe={class:"w-full min-w-0"},iDe={class:"mr-3 flex sm:mr-6"},uDe={class:"overflow-auto sm:h-[calc(100vh-(var(--navbar-height)+220px))]"},cDe={class:"m-auto max-w-full"},dDe={key:0,class:"group relative flex flex-col items-center justify-center"},mDe={class:"absolute"},fDe=_("svg",{height:"56",width:"360"},[_("line",{x1:"180",y1:"0",x2:"180",y2:"56",class:"stroke-current stroke-1 text-neutral-900 dark:text-neutral-700"}),le(" Sorry, your browser does not support inline SVG. ")],-1),pDe={class:"mb-3"},vDe={class:"flex space-x-2"},hDe={class:"relative flex grow text-neutral-500 focus-within:text-neutral-600 dark:text-neutral-300 dark:focus-within:text-neutral-100"},gDe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},bDe={__name:"WebFormsEdit",setup(e){const t={"field-section":DRe,"introduction-section":VRe,"submit-button-section":KRe,"file-section":NRe,"new-section":HRe,"message-section":URe},n=It(),{t:o}=Ee(),{scriptConfig:a,users:r,currentUser:s,locales:i}=Ne(),{fetchWebForm:u,setWebForm:c,findWebForm:m}=eh(),{orderedPipelines:f}=Wa();bo(O(()=>{var Y;return(Y=m(n.params.id))==null?void 0:Y.title}));const v=a("favourite_colors"),y=M({email:!0,phones:!0}),b=M([]),w=M([]),k=M([]),x=M(null),I=M(null),C=M(!1),S=M(!1),{form:T}=Ze({notifications:[],sections:[],styles:[],submit_data:[]}),E=[{id:"contacts",label:o("contacts::contact.contact")},{id:"companies",label:o("contacts::company.company")},{id:"deals",label:o("deals::deal.deal")}],$=O(()=>T.notifications.length),F=O(()=>T.notifications.filter(Gt).length>0),R=O(()=>T.sections.length),B=O(()=>ut(T.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"email"})!==void 0),V=O(()=>ut(T.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"phones"})!==void 0),P=O(()=>B.value?ut(T.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"email"}).isRequired===!0:!1),z=O(()=>V.value?ut(T.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"phones"}).isRequired===!0:!1),H=O(()=>!B.value&&!V.value),j=O(()=>!P.value&&!z.value);function N(Y,X){G(Y,X,!1),H.value||j.value?ie():se()}function L(){const Y=Et(T.sections,{type:"new-section"});Y!==-1&&ee(Y)}function U(Y){S.value=!0,T.sections.splice(Y+1,0,{type:"new-section",label:o("webforms::form.sections.new")})}async function ee(Y){T.sections[Y].type==="new-section"?(S.value=!1,T.sections.splice(Y,1)):(await Innoclapps.confirm(),T.sections.splice(Y,1),ae())}function G(Y,X,re=!0){T.sections[Y]=Object.assign({},T.sections[Y],X),re&&se(!0)}function W(Y,X){T.sections.splice(Y+1,0,X),ae(),L()}function ae(){!H.value&&!j.value&&se(!0)}function ue(){R.value===0&&(T.sections.push({type:"introduction-section",message:"",title:""}),T.sections.push({type:"submit-button-section",text:o("webforms::form.sections.submit.default_text")}))}function ce(Y){T.notifications.splice(Y,1)}function oe(){T.notifications.push(""),T.notifications.length===1&&(T.notifications[0]=s.value.email)}function ie(){if(H.value){Innoclapps.dialog().show("requiresFieldsModal");return}else if(j.value){Innoclapps.dialog().show("nonOptionalFieldRequiredModal");return}se()}function Q(){B.value&&y.value.email&&G(Et(T.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"email"}),{isRequired:!0},!1),V.value&&y.value.phones&&G(Et(T.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"phones"}),{isRequired:!0},!1),se(),Innoclapps.dialog().hide("nonOptionalFieldRequiredModal")}function se(Y=!1){T.submit_data.pipeline_id=x.value?x.value.id:null,T.submit_data.stage_id=I.value?I.value.id:null,L(),T.put(`/forms/${n.params.id}`).then(X=>{c(X.id,X),Y||Innoclapps.success(o("webforms::form.updated"))}).catch(X=>(X.isValidationError()&&Innoclapps.error(o("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(X)))}function me(Y){return Y.readonly||Ma(Y,"attributes.readonly")}function xe(Y,X){return Y.filter(re=>re.showOnCreation===!0&&(X.indexOf(re.attribute)===-1||me(re)))}async function de(){let{data:Y}=await Innoclapps.request("/fields/settings/bulk/create?intent=create",{params:{groups:["contacts","companies","deals"]}});b.value=xe(Y.contacts,["user_id","source_id","tags","deals","companies"]),k.value=xe(Y.deals,["user_id","pipeline_id","stage_id","tags","contacts","companies"]),w.value=xe(Y.companies,["user_id","parent_company_id","source_id","tags","contacts","deals"])}function he(){de().finally(()=>{u(n.params.id).then(Y=>{T.clear().set(Y),x.value=f.value.filter(X=>X.id==Y.submit_data.pipeline_id)[0],I.value=x.value.stages.filter(X=>X.id==Y.submit_data.stage_id)[0],ue(),C.value=!0})})}return he(),(Y,X)=>{const re=d("ITextDisplay"),we=d("IText"),Ce=d("IButton"),ge=d("IModal"),Re=d("IFormCheckbox"),et=d("IFormCheckboxLabel"),kt=d("IFormCheckboxField"),lt=d("IActionMessage"),ft=d("IFormSwitchLabel"),zt=d("IFormSwitch"),De=d("IFormSwitchField"),_e=d("ILink"),Te=d("ICardActions"),Xe=d("ICardHeader"),Me=d("ITab"),ke=d("ITabList"),We=d("ITabPanel"),$t=d("IFormLabel"),Yt=d("IFormRadio"),Fe=d("IFormRadioLabel"),Ge=d("IFormRadioField"),ht=d("IFormError"),Xt=d("IFormGroup"),Ke=d("IFormInput"),He=d("Editor"),vt=d("ICustomSelect"),pn=d("Icon"),Dn=d("ICardBody"),_o=d("IColorSwatch"),Eo=d("ITabPanels"),jt=d("ITabGroup"),xn=d("ICard"),Ht=d("IOverlay");return g(),D("div",null,[l(Ht,{show:!C.value},{default:p(()=>[l(ge,{id:"requiresFieldsModal",size:"xs","hide-header":""},{"modal-footer":p(({cancel:ct})=>[_("div",rDe,[l(Ce,{variant:"secondary",text:Y.$t("core::app.hide"),onClick:ct},null,8,["text","onClick"])])]),default:p(()=>[l(re,{class:"mb-2"},{default:p(()=>[le(Z(Y.$t("webforms::form.fields_action_required")),1)]),_:1}),l(we,null,{default:p(()=>[le(Z(Y.$t("webforms::form.required_fields_needed")),1)]),_:1})]),_:1}),l(ge,{id:"nonOptionalFieldRequiredModal",size:"xs","ok-text":Y.$t("core::app.continue"),"ok-disabled":B.value&&!y.value.email&&V.value&&!y.value.phones,"hide-header":"",onOk:Q},{default:p(()=>[l(re,{class:"mb-2"},{default:p(()=>[le(Z(Y.$t("webforms::form.fields_action_required")),1)]),_:1}),l(we,{class:"mb-3"},{default:p(()=>[le(Z(Y.$t("webforms::form.must_requires_fields")),1)]),_:1}),ne(l(kt,null,{default:p(()=>[l(Re,{checked:y.value.email,"onUpdate:checked":X[0]||(X[0]=ct=>y.value.email=ct)},null,8,["checked"]),l(et,{text:Y.$t("contacts::fields.contacts.email")},null,8,["text"])]),_:1},512),[[pe,!P.value&&B.value]]),ne(l(kt,null,{default:p(()=>[l(Re,{checked:y.value.phones,"onUpdate:checked":X[1]||(X[1]=ct=>y.value.phones=ct)},null,8,["checked"]),l(et,{text:Y.$t("contacts::fields.contacts.phone")},null,8,["text"])]),_:1},512),[[pe,!z.value&&V.value]])]),_:1},8,["ok-text","ok-disabled"]),l(xn,{as:"form",novalidate:"true",onSubmit:ot(ie,["prevent"])},{default:p(()=>[l(Xe,null,{default:p(()=>[_("div",lDe,[l(Ce,{class:"-ml-5 mr-1 shrink-0 sm:-ml-0 sm:mr-2",icon:"ChevronLeftSolid",to:{name:"web-forms-index"},basic:""}),_("div",sDe,[ne(_("input",{id:"name","onUpdate:modelValue":X[2]||(X[2]=ct=>h(T).title=ct),type:"text",name:"name",class:be(["block w-full border-0 border-b-2 bg-neutral-50 text-base/6 font-medium focus:bg-neutral-100 focus:ring-0 dark:bg-neutral-500/10 dark:text-white dark:focus:bg-neutral-800 sm:text-sm/6",(!h(T).title||h(T).getError("title"))&&C.value?"border-danger-500 focus:border-danger-600":"border-transparent focus:border-primary-500"])},null,2),[[ua,h(T).title]])])]),l(Te,{class:"w-full justify-end sm:w-auto"},{default:p(()=>[_("div",iDe,[l(lt,{class:"mr-2",show:h(T).recentlySuccessful,message:Y.$t("core::app.saved")},null,8,["show","message"]),l(De,null,{default:p(()=>[l(ft,{text:Y.$t("webforms::form.active")},null,8,["text"]),l(zt,{modelValue:h(T).status,"onUpdate:modelValue":X[3]||(X[3]=ct=>h(T).status=ct),value:"active","unchecked-value":"inactive",disabled:S.value||h(T).busy},null,8,["modelValue","disabled"])]),_:1})]),l(_e,{class:"mr-2",text:Y.$t("core::app.preview"),href:h(T).public_url},null,8,["text","href"]),l(Ce,{variant:"primary",loading:h(T).busy,disabled:h(T).busy||S.value,text:Y.$t("core::app.save"),onClick:ie},null,8,["loading","disabled","text"])]),_:1})]),_:1}),_("div",uDe,[_("div",cDe,[l(jt,null,{default:p(()=>[l(ke,{class:"sticky top-0 z-10 bg-white dark:bg-neutral-900",centered:""},{default:p(()=>[l(Me,{title:Y.$t("webforms::form.editor")},null,8,["title"]),l(Me,{title:Y.$t("webforms::form.submit_options")},null,8,["title"]),l(Me,{title:Y.$t("webforms::form.style.style")},null,8,["title"]),l(Me,{title:Y.$t("webforms::form.sections.embed.embed")},null,8,["title"])]),_:1}),l(Eo,{class:"mt-4 sm:mt-0"},{default:p(()=>[l(We,{class:"px-2 sm:px-0"},{default:p(()=>[(g(!0),D(fe,null,Ie(h(T).sections,(ct,jn)=>(g(),D("div",{key:jn+ct.type+ct.attribute,class:"m-auto max-w-sm"},[(g(),A(Rt(t[ct.type]),{form:h(T),"companies-fields":w.value,"contacts-fields":b.value,"deals-fields":k.value,index:jn,"available-resources":E,section:ct,onRemoveSectionRequested:Lt=>ee(jn),onUpdateSectionRequested:Lt=>N(jn,Lt),onCreateSectionRequested:Lt=>W(jn,Lt)},null,40,["form","companies-fields","contacts-fields","deals-fields","index","section","onRemoveSectionRequested","onUpdateSectionRequested","onCreateSectionRequested"])),R.value-1!=jn?(g(),D("div",dDe,[ne(_("div",mDe,[l(Ce,{class:"transition-opacity delay-75 md:opacity-0 md:group-hover:opacity-100",icon:"PlusSolid",variant:"primary",soft:"",onClick:Lt=>U(jn)},null,8,["onClick"])],512),[[pe,!S.value]]),fDe])):K("",!0)]))),128))]),_:1}),l(We,null,{default:p(()=>[l(Dn,null,{default:p(()=>[l(re,{class:"mb-3",text:Y.$t("webforms::form.success_page.success_page")},null,8,["text"]),l(Xt,null,{default:p(()=>[l($t,{as:"p",class:"mb-1"},{default:p(()=>[le(Z(Y.$t("webforms::form.success_page.success_page_info")),1)]),_:1}),l(Ge,null,{default:p(()=>[l(Yt,{modelValue:h(T).submit_data.action,"onUpdate:modelValue":X[4]||(X[4]=ct=>h(T).submit_data.action=ct),value:"message",name:"submit-action"},null,8,["modelValue"]),l(Fe,{text:Y.$t("webforms::form.success_page.thank_you_message")},null,8,["text"])]),_:1}),l(Ge,null,{default:p(()=>[l(Yt,{modelValue:h(T).submit_data.action,"onUpdate:modelValue":X[5]||(X[5]=ct=>h(T).submit_data.action=ct),value:"redirect",name:"submit-action"},null,8,["modelValue"]),l(Fe,{text:Y.$t("webforms::form.success_page.redirect")},null,8,["text"])]),_:1}),l(ht,{error:h(T).getError("submit_data.action")},null,8,["error"])]),_:1}),_("div",pDe,[ne(_("div",null,[l(Xt,{"label-for":"success_title",label:Y.$t("webforms::form.success_page.title"),required:""},{default:p(()=>[l(Ke,{modelValue:h(T).submit_data.success_title,"onUpdate:modelValue":X[6]||(X[6]=ct=>h(T).submit_data.success_title=ct),placeholder:Y.$t("webforms::form.success_page.title_placeholder")},null,8,["modelValue","placeholder"]),l(ht,{error:h(T).getError("submit_data.success_title")},null,8,["error"])]),_:1},8,["label"]),l(Xt,{label:Y.$t("webforms::form.success_page.message"),optional:""},{default:p(()=>[l(He,{modelValue:h(T).submit_data.success_message,"onUpdate:modelValue":X[7]||(X[7]=ct=>h(T).submit_data.success_message=ct),"with-image":!1,"absolute-urls":"",minimal:""},null,8,["modelValue"])]),_:1},8,["label"])],512),[[pe,h(T).submit_data.action==="message"]]),ne(_("div",null,[l(Xt,{"label-for":"success_redirect_url",label:Y.$t("webforms::form.success_page.redirect_url"),required:""},{default:p(()=>[l(Ke,{modelValue:h(T).submit_data.success_redirect_url,"onUpdate:modelValue":X[8]||(X[8]=ct=>h(T).submit_data.success_redirect_url=ct),type:"url",placeholder:Y.$t("webforms::form.success_page.redirect_url_placeholder")},null,8,["modelValue","placeholder"]),l(ht,{error:h(T).getError("submit_data.success_redirect_url")},null,8,["error"])]),_:1},8,["label"])],512),[[pe,h(T).submit_data.action==="redirect"]])]),l(re,{class:"mb-3 mt-8",text:Y.$t("webforms::form.saving_preferences.saving_preferences")},null,8,["text"]),l(Xt,{"label-for":"title_prefix",label:Y.$t("webforms::form.saving_preferences.deal_title_prefix"),description:Y.$t("webforms::form.saving_preferences.deal_title_prefix_info"),optional:""},{default:p(()=>[l(Ke,{id:"title_prefix",modelValue:h(T).title_prefix,"onUpdate:modelValue":X[9]||(X[9]=ct=>h(T).title_prefix=ct)},null,8,["modelValue"])]),_:1},8,["label","description"]),l(Xt,{"label-for":"pipeline_id",label:Y.$t("deals::fields.deals.pipeline.name"),required:""},{default:p(()=>[l(vt,{modelValue:x.value,"onUpdate:modelValue":[X[10]||(X[10]=ct=>x.value=ct),X[11]||(X[11]=ct=>I.value=ct.stages[0])],label:"name","input-id":"pipeline_id",options:h(f),clearable:!1},null,8,["modelValue","options"]),l(ht,{error:h(T).getError("submit_data.pipeline_id")},null,8,["error"])]),_:1},8,["label"]),l(Xt,{"label-for":"stage_id",label:Y.$t("deals::fields.deals.stage.name"),required:""},{default:p(()=>[l(vt,{modelValue:I.value,"onUpdate:modelValue":X[12]||(X[12]=ct=>I.value=ct),label:"name","input-id":"stage_id",options:x.value?x.value.stages:[],clearable:!1},null,8,["modelValue","options"]),l(ht,{error:h(T).getError("submit_data.stage_id")},null,8,["error"])]),_:1},8,["label"]),l(Xt,{"label-for":"user_id",label:Y.$t("deals::fields.deals.user.name"),required:""},{default:p(()=>[l(vt,{modelValue:h(T).user_id,"onUpdate:modelValue":X[13]||(X[13]=ct=>h(T).user_id=ct),label:"name","input-id":"user_id",options:h(r),clearable:!1,reduce:ct=>ct.id},null,8,["modelValue","options","reduce"]),l(ht,{error:h(T).getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(Xt,{"label-for":"notifications",label:Y.$t("webforms::form.notifications")},{default:p(()=>[(g(!0),D(fe,null,Ie(h(T).notifications,(ct,jn)=>(g(),D("div",{key:jn,class:"mb-3"},[_("div",vDe,[_("div",hDe,[_("div",gDe,[l(pn,{icon:"Mail",class:"size-5"})]),l(Ke,{modelValue:h(T).notifications[jn],"onUpdate:modelValue":Lt=>h(T).notifications[jn]=Lt,class:"pl-10 sm:pl-11",type:"email",placeholder:Y.$t("webforms::form.notification_email_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),l(Ce,{icon:"Trash",basic:"",onClick:Lt=>ce(jn)},null,8,["onClick"])]),l(ht,{error:h(T).getError("notifications."+jn)},null,8,["error"])]))),128)),ne(l(_e,{class:"font-medium",text:Y.$t("webforms::form.new_notification"),onClick:oe},null,8,["text"]),[[pe,!F.value||$.value===0]])]),_:1},8,["label"])]),_:1})]),_:1}),l(We,null,{default:p(()=>[l(Dn,null,{default:p(()=>[l(re,{class:"mb-3",text:Y.$t("webforms::form.style.style")},null,8,["text"]),l(Xt,{class:"mt-3 w-full sm:w-[373px]","label-for":"locale",label:Y.$t("core::app.locale")},{default:p(()=>[l(vt,{modelValue:h(T).locale,"onUpdate:modelValue":X[14]||(X[14]=ct=>h(T).locale=ct),"input-id":"locale",clearable:!1,options:h(i)},null,8,["modelValue","options"]),l(ht,{error:h(T).getError("locale")},null,8,["error"])]),_:1},8,["label"]),l(Xt,{label:Y.$t("webforms::form.style.primary_color")},{default:p(()=>[l(_o,{modelValue:h(T).styles.primary_color,"onUpdate:modelValue":X[15]||(X[15]=ct=>h(T).styles.primary_color=ct),swatches:h(v)},null,8,["modelValue","swatches"]),l(ht,{error:h(T).getError("styles.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(Xt,{label:Y.$t("webforms::form.style.background_color")},{default:p(()=>[l(_o,{modelValue:h(T).styles.background_color,"onUpdate:modelValue":X[16]||(X[16]=ct=>h(T).styles.background_color=ct),swatches:h(v)},null,8,["modelValue","swatches"]),l(ht,{error:h(T).getError("styles.background_color")},null,8,["error"])]),_:1},8,["label"]),l($t,{as:"p",class:"mb-1 mt-4",label:Y.$t("webforms::form.style.logo")},null,8,["label"]),l(aDe,{modelValue:h(T).styles.logo,"onUpdate:modelValue":X[17]||(X[17]=ct=>h(T).styles.logo=ct),"background-color":h(T).styles.background_color,"primary-color":h(T).styles.primary_color},null,8,["modelValue","background-color","primary-color"])]),_:1})]),_:1}),l(We,null,{default:p(()=>[l(Dn,null,{default:p(()=>[l(eDe,{form:h(T)},null,8,["form"])]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}};window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("WebFormPublicView",$Re),e.component("WebFormSubmissionChangelog",eRe),t.addRoute("settings",{path:"forms/:id/edit",name:"web-form-edit",component:bDe}),t.addRoute("settings",{path:"forms",name:"web-forms-index",component:uRe,meta:{title:at("webforms::form.forms")},children:[{path:"create",name:"web-form-create",component:TRe}]})});const yDe=":root{--navbar-height: 4rem;--color-neutral-50: 248, 250, 252;--color-neutral-100: 241, 245, 249;--color-neutral-200: 226, 232, 240;--color-neutral-300: 203, 213, 225;--color-neutral-400: 148, 163, 184;--color-neutral-500: 100, 116, 139;--color-neutral-600: 71, 85, 105;--color-neutral-700: 51, 65, 85;--color-neutral-800: 30, 41, 59;--color-neutral-900: 15, 23, 42;--color-primary-50: 238, 242, 255;--color-primary-100: 224, 231, 255;--color-primary-200: 199, 210, 254;--color-primary-300: 165, 180, 252;--color-primary-400: 129, 140, 248;--color-primary-500: 99, 102, 241;--color-primary-600: 79, 70, 229;--color-primary-700: 67, 56, 202;--color-primary-800: 55, 48, 163;--color-primary-900: 49, 46, 129;--color-warning-50: 255, 251, 235;--color-warning-100: 254, 243, 199;--color-warning-200: 253, 230, 138;--color-warning-300: 252, 211, 77;--color-warning-400: 251, 191, 36;--color-warning-500: 245, 158, 11;--color-warning-600: 217, 119, 6;--color-warning-700: 180, 83, 9;--color-warning-800: 146, 64, 14;--color-warning-900: 120, 53, 15;--color-danger-50: 254, 242, 242;--color-danger-100: 254, 226, 226;--color-danger-200: 254, 202, 202;--color-danger-300: 252, 165, 165;--color-danger-400: 248, 113, 113;--color-danger-500: 239, 68, 68;--color-danger-600: 220, 38, 38;--color-danger-700: 185, 28, 28;--color-danger-800: 153, 27, 27;--color-danger-900: 127, 29, 29;--color-success-50: 240, 253, 244;--color-success-100: 220, 252, 231;--color-success-200: 187, 247, 208;--color-success-300: 134, 239, 172;--color-success-400: 74, 222, 128;--color-success-500: 34, 197, 94;--color-success-600: 22, 163, 74;--color-success-700: 21, 128, 61;--color-success-800: 22, 101, 52;--color-success-900: 20, 83, 45;--color-info-50: 239, 246, 255;--color-info-100: 219, 234, 254;--color-info-200: 191, 219, 254;--color-info-300: 147, 197, 253;--color-info-400: 96, 165, 250;--color-info-500: 59, 130, 246;--color-info-600: 37, 99, 235;--color-info-700: 29, 78, 216;--color-info-800: 30, 64, 175;--color-info-900: 30, 58, 138}",_De={class:"text-center text-sm font-medium"},IDe={class:"text-center text-xs uppercase opacity-90"},wDe=["for"],xDe=["id","value"],kDe={__name:"SettingsThemeStyleSwatch",props:["swatch","color"],emits:["update:hex"],setup(e,{emit:t}){const n=t,o=ga(a=>n("update:hex",a.target.value),300);return(a,r)=>(g(),D("div",{class:"flex h-14 w-full flex-col justify-center rounded-lg p-2 md:h-32 md:p-4",style:Nt({background:e.swatch.hex})},[_("div",{class:"flex items-center justify-between px-4 md:mt-auto md:block md:px-0",style:Nt({color:h(jr)(e.swatch.hex)})},[_("div",_De,Z(e.swatch.stop),1),_("div",IDe,[_("label",{class:"cursor-pointer",for:e.swatch.hex},Z(e.swatch.hex),9,wDe),_("input",{id:e.swatch.hex,type:"color",class:"h-0 [&::-moz-color-swatch]:border-0 [&::-webkit-color-swatch-wrapper]:p-0 [&::-webkit-color-swatch]:border-0",value:e.swatch.hex,onInput:r[0]||(r[0]=(...s)=>h(o)&&h(o)(...s))},null,40,xDe)])],4)],4))}},$De={class:"mb-2 items-center md:flex"},CDe={class:"mb-4 grow text-left sm:mb-0"},SDe={class:"flex items-center justify-center space-x-3"},TDe={class:"relative"},EDe={for:"lMax",class:"inline-block bg-white px-1 text-xs font-medium text-neutral-900 dark:bg-neutral-900 dark:text-neutral-300 sm:absolute sm:-top-2.5 sm:left-2"},FDe=["onUpdate:modelValue","onInput"],ADe={class:"relative"},RDe={for:"lMin",class:"inline-block bg-white px-1 text-xs font-medium text-neutral-900 dark:bg-neutral-900 dark:text-neutral-300 sm:absolute sm:-top-2.5 sm:left-2"},DDe=["onUpdate:modelValue","onInput"],ODe=["value","onInput"],BDe={class:"flex flex-col justify-between space-y-1 overflow-hidden md:flex-row md:space-x-1 md:space-y-0"},NDe={key:0,class:"absolute left-1/2 top-10 hidden h-2 -translate-x-1/2 transform items-center justify-center md:flex"},PDe={__name:"SettingsThemeStyle",setup(e){const t=[],n={},o=[0,950,1e3];x();const a={},r=uo({}),s=M(!1);t.forEach(C=>{r[C]=w(C),a[C]=w(C)});const{form:i,submit:u,isReady:c,originalSettings:m}=To();La(c,()=>{m.value.theme_style&&v(m.value.theme_style)});function f(C){s.value=!0;let S=structuredClone(Vn(r));delete S[C],y(S,()=>{r[C]=w(C),b(),s.value=!1})}function v(C){let S=JSON.parse(C);Aa(S,(T,E)=>{r[E]=T})}function y(C,S=null){let T=structuredClone(Vn(C));Aa(T,($,F)=>{fa(a[F],$)&&delete T[F]});let E=new Date;i.theme_style=JSON.stringify(T),i.theme_style_modified_at=Date.UTC(E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate(),E.getUTCHours(),E.getUTCMinutes(),E.getUTCSeconds(),E.getUTCMilliseconds()),u(S)}function b(){Aa(r,(C,S)=>{C.swatches.forEach(T=>{let E=`--color-${S}-${T.stop}`;document.documentElement.style.setProperty(E,Mu(T.hex),"important")})})}function w(C){return{valueStop:Hr,lMax:Ho.lMax,lMin:Ho.lMin,hex:n[C][Hr].hex,swatches:o1.filter(S=>!o.includes(S)).map(S=>({stop:S,hex:n[C][S].hex}))}}const k=ga(function(C,S){let T=r[C];S||(S=T.hex),r[C].hex=S;const E=Object.assign({},Ho,{value:S.substring(1),valueStop:T.valueStop,lMax:T.lMax,lMin:T.lMin}),$=ik(E).filter(F=>!o.includes(F.stop));r[C].swatches=$.map(F=>({hex:F.hex,stop:F.stop})),b()},300);function x(){const C=/--color-([a-z]+)-([0-9]+):\s[0-9]+,\s[0-9]+,\s[0-9]+/gm;let S;for(;(S=C.exec(yDe))!==null;){S.index===C.lastIndex&&C.lastIndex++;let T=S[0],E=S[1].trim(),$=S[2];t.indexOf(E)===-1&&t.push(S[1]),Object.hasOwn(n,E)||(n[E]={}),Object.hasOwn(n[E],$)||(n[E][$]=[]);const F=T.replaceAll(",","").split(" ").map(R=>R.trim());n[E][$]={rgb:T,hex:mie(F[1],F[2],F[3])}}}function I(C){return C!="neutral"||m.value.theme_style&&m.value.theme_style.indexOf("neutral")!==-1}return(C,S)=>{const T=d("ICardHeading"),E=d("ICardHeader"),$=d("ITextDisplay"),F=d("ILink"),R=d("IDropdownButton"),B=d("IDropdownItem"),V=d("IDropdownMenu"),P=d("IDropdown"),z=d("ICardBody"),H=d("IButton"),j=d("ICardFooter"),N=d("ICard"),L=Ve("t");return g(),D(fe,null,[l(E,null,{default:p(()=>[l(T,{text:C.$t("themestyle::style.theme_style")},null,8,["text"])]),_:1}),l(N,{as:"form",overlay:!h(c),onSubmit:S[1]||(S[1]=ot(U=>y(r),["prevent"]))},{default:p(()=>[l(z,null,{default:p(()=>[(g(!0),D(fe,null,Ie(r,(U,ee)=>(g(),D("div",{key:ee,class:be(I(ee)?"mb-14 last:mb-0":"hidden")},[_("div",$De,[_("div",CDe,[l($,null,{default:p(()=>[le(Z(ee.charAt(0).toUpperCase()+ee.slice(1)),1)]),_:2},1024)]),_("div",SDe,[h(fa)(a[ee],r[ee])?K("",!0):(g(),A(F,{key:0,text:C.$t("core::app.reset"),class:be(["mr-3",s.value?"pointer-events-none":""]),onClick:G=>f(ee)},null,8,["text","class","onClick"])),_("div",TDe,[ne(_("label",EDe,null,512),[[L,"themestyle::style.lightness_maximum"]]),ne(_("input",{id:"lMax","onUpdate:modelValue":G=>U.lMax=G,type:"number",class:"block w-full rounded-md border-0 py-1 text-base/6 text-neutral-900 shadow-sm ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:bg-neutral-900 dark:text-neutral-200 dark:ring-neutral-700 dark:focus:ring-primary-500 sm:text-sm/6",onInput:G=>h(k)(ee)},null,40,FDe),[[ua,U.lMax]])]),_("div",ADe,[ne(_("label",RDe,null,512),[[L,"themestyle::style.lightness_minimum"]]),ne(_("input",{id:"lMin","onUpdate:modelValue":G=>U.lMin=G,type:"number",class:"block w-full rounded-md border-0 py-1 text-base/6 text-neutral-900 shadow-sm ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:bg-neutral-900 dark:text-neutral-200 dark:ring-neutral-700 dark:focus:ring-primary-500 sm:text-sm/6",onInput:G=>h(k)(ee)},null,40,DDe),[[ua,U.lMin]])]),l(P,null,{default:p(()=>[l(R,{class:"self-end sm:self-auto",text:U.valueStop,basic:""},null,8,["text"]),l(V,null,{default:p(()=>[(g(!0),D(fe,null,Ie(h(o1),G=>(g(),A(B,{key:G,text:G,active:G===U.valueStop,condensed:"",onClick:W=>(U.valueStop=G,h(k)(ee))},null,8,["text","active","onClick"]))),128))]),_:2},1024)]),_:2},1024),_("input",{type:"color",class:"-ml-0.5 size-8 shrink-0 cursor-pointer appearance-none self-end border-0 bg-white p-0 outline-none sm:self-auto [&::-webkit-color-swatch]:rounded",value:U.hex,onInput:G=>h(k)(ee,G.target.value)},null,40,ODe)])]),_("div",BDe,[(g(!0),D(fe,null,Ie(U.swatches,(G,W)=>(g(),D("div",{key:W,class:"relative"},[G.stop===U.valueStop?(g(),D("div",NDe,[_("div",{class:"-mt-2 size-2 rounded-full shadow",style:Nt({backgroundColor:h(jr)(G.hex)})},null,4)])):K("",!0),l(kDe,{hex:G.hex,"onUpdate:hex":[ae=>G.hex=ae,S[0]||(S[0]=ae=>b())],swatch:G,color:ee},null,8,["hex","onUpdate:hex","swatch","color"])]))),128))])],2))),128))]),_:1}),l(j,{class:"text-right"},{default:p(()=>[l(H,{type:"submit",variant:"primary",disabled:h(i).busy,text:C.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/theme-style",component:PDe,meta:{title:at("themestyle::style.theme_style")}})});window.CreateApplication=(e,t=[])=>new MDe(e).booting(t);class MDe{constructor(t){this.bus=xc(),this.config=t,this.bootingCallbacks=[],this.availableTimezones=[],this.axios=ts,this.axios.defaults.baseURL=t.apiURL}start(){qd.init();const t=U1({});this.boot(t,mg),t.use(mg).use(cu).use(wp),this.app=t,this.app.mount("#app")}booting(t){return Array.isArray(t)?t.forEach(n=>this.booting(n)):this.bootingCallbacks.push(t),this}boot(t,n){t.config.globalProperties.$scriptConfig=(...o)=>this.scriptConfig(...o),t.config.globalProperties.$csrfToken=this.scriptConfig("csrfToken"),this.scriptConfig("broadcasting")&&this.scriptConfig("user_id")&&(this.broadcaster=new c9(this.scriptConfig("broadcasting"))),cu.commit("SET_SETTINGS",this.scriptConfig("settings")||{}),cu.commit("SET_SIDEBAR_MENU_ITEMS",this.scriptConfig("menu.sidebar")||[]),this.bootingCallbacks.forEach(o=>o.call(this,t,n,cu)),this.bootingCallbacks=[]}resources(){return this.scriptConfig("resources")}resource(t){return this.scriptConfig(`resources.${t}`)}resourceName(t){return this.resource(t).name}scriptConfig(t,n=void 0){return n===void 0?Ma(this.config,t):(m4(this.config,t,n),this)}request(t){return t!==void 0?typeof t=="string"?this.axios.get(t,arguments[1]||void 0):this.axios(t):this.axios}$on(...t){this.bus.on(...t)}$off(...t){this.bus.off(...t)}$emit(...t){this.bus.emit(...t)}success(t,n=4e3,o={}){this.notify(t,"success",n,o)}info(t,n=4e3,o={}){this.notify(t,"info",n,o)}error(t,n=4e3,o={}){this.notify(t,"error",n,o)}notify(t,n,o=4e3,a={},r="app"){this.app.config.globalProperties.$notify(Object.assign({},a,{text:t,type:n,group:r}),o)}addShortcut(t,n){qd.bind(t,n)}disableShortcut(t){qd.unbind(t)}confirm(t){return this.app.config.globalProperties.$confirm(t)}dialog(){return this.app.config.globalProperties.$dialog}async timezones(t=null){if(Array.isArray(t))return this.availableTimezones=Object.freeze(t),t;if(this.availableTimezones.length===0){let{data:n}=await this.request("/timezones");this.availableTimezones=Object.freeze(n)}return this.availableTimezones}}export{ot as $,K1 as A,Bt as B,KY as C,dt as D,Dr as E,fe as F,$e as G,Ue as H,be as I,pe as J,En as K,Z as L,uo as M,Je as N,rn as O,on as P,st as Q,Pe as R,H1 as S,ta as T,le as U,gt as V,Rt as W,Nt as X,fo as Y,lr as Z,Ki as _,Ee as a,$n as a0,Ur as a1,d1 as a2,bo as b,Ne as c,Le as d,xi as e,O as f,d as g,Ae as h,Ve as i,D as j,_ as k,Se as l,l as m,p as n,g as o,h as p,A as q,M as r,bn as s,Ie as t,g8 as u,en as v,ne as w,un as x,K as y,ze as z};
